"use strict";
window.parseTimeMarkers = window.parseTimeMarkers || {};
window.parseTimeMarkers['powerbiportal.dependencies.bundle.min.js'] = {
    nominalStart: Date.now(),
    start: Date.now()
};

window.parseTimeMarkers = window.parseTimeMarkers || {};
window.parseTimeMarkers['powerbi-visuals.min.js'] = {
    nominalStart: Date.now(),
    start: Date.now()
};
var powerbi;!(function(e){var a;!(function(e){e[e.Grouping=0]="Grouping",e[e.Measure=1]="Measure",e[e.GroupingOrMeasure=2]="GroupingOrMeasure"})(a=e.VisualDataRoleKind||(e.VisualDataRoleKind={}));var i;!(function(e){e[e.Create=0]="Create",e[e.Append=1]="Append"})(i=e.VisualDataChangeOperationKind||(e.VisualDataChangeOperationKind={}));var n;!(function(e){e[e.Data=2]="Data",e[e.Resize=4]="Resize",e[e.ViewMode=8]="ViewMode",e[e.Style=16]="Style",e[e.ResizeEnd=32]="ResizeEnd",e[e.All=62]="All"})(n=e.VisualUpdateType||(e.VisualUpdateType={}));var r;!(function(e){})(r=e.VisualPermissions||(e.VisualPermissions={}))})(powerbi||(powerbi={}));;"use strict";window.DEBUG=!1;var jsCommon;!(function(e){var t;!(function(e){var t;!(function(e){e.F6=117})(t=e.KeyDictionary||(e.KeyDictionary={})),e.DocumentBody="body",e.Anchor="a",e.EditableTextElements=":text, textarea",e.EditableNumericElements='[type="number"]',e.disabledAttributeOrValue="disabled",e.readonlyAttributeOrValue="readonly",e.idAttribute="id",e.styleAttribute="style",e.hrefAttribute="href",e.targetAttribute="target",e.blankValue="_blank",e.selfValue="_self",e.classAttribute="class",e.titleAttribute="title",e.srcAttribute="src",e.contextmenuEventName="contextmenu",e.blurEventName="blur",e.keyUpEventName="keyup",e.inputEventName="input",e.changeEventName="change",e.cutEventName="cut",e.keyDownEventName="keydown",e.mouseMoveEventName="mousemove",e.mouseDownEventName="mousedown",e.mouseEnterEventName="mouseenter",e.mouseLeaveEventName="mouseleave",e.mouseOverEventName="mouseover",e.mouseOutEventName="mouseout",e.mouseClickEventName="click",e.pasteEventName="paste",e.scrollEventName="scroll",e.dropEventName="drop",e.focusEventName="focus",e.focusInEventName="focusin",e.focusOutEventName="focusout",e.selectEventName="select",e.messageEventName="message",e.loadEventName="load",e.beforeUnload="beforeunload",e.inputAndSelectEventNames="input, select"})(t=e.DOMConstants||(e.DOMConstants={}))})(jsCommon||(jsCommon={}));var powerbi;!(function(e){e.RS_AccessDeniedDueToRLSGroup="rsAccessDeniedDueToRLSGroup",e.RS_CannotRetrieveModel="rsCannotRetrieveModel",e.DMTS_NoGatewayWithAllDatasourcesToBindError="DMTS_NoGatewayWithAllDatasourcesToBindError",e.DM_GWPipeline_UnknownError="DM_GWPipeline_UnknownError",e.PBID_AccessDenied="pbidAccessDenied",e.PBI_PowerBIServiceLiveConnectModelNotFound="PowerBIServiceLiveConnectModelNotFound";var t;!(function(e){e[e.ResourceCodeReference=0]="ResourceCodeReference",e[e.EmbeddedString=1]="EmbeddedString"})(t=e.PowerBIErrorResourceType||(e.PowerBIErrorResourceType={}));var r=(function(){function e(e){this.m_serviceError=e}return Object.defineProperty(e.prototype,"code",{get:function(){return e.codeName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignorable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requestId",{get:function(){return this.httpRequestId},set:function(e){this.httpRequestId=e},enumerable:!0,configurable:!0}),e.prototype.getDetails=function(e){var t;return t=6===this.m_serviceError.statusCode?n.GetDetailsFromTransformError(e,this.m_serviceError):n.GetDetailsFromServerError(e,this.m_serviceError),n.addAdditionalInfo(t,this.m_serviceError.errorDetails,e),n.addDebugErrorInfo(t,this.code,this.m_serviceError.message||null,this.m_serviceError.stackTrace||null,this.httpRequestId),t},e})();r.codeName="ServiceErrorToClientError",e.ServiceErrorToClientError=r;var n=(function(){function r(){}return r.addAdditionalInfo=function(e,n,i){if(n)for(var o=0;o<n.length;o++){var a=n[o],s=i.getOptional(r.serverErrorPrefix+a.code),u={errorInfoKey:s?s:a.code,errorInfoValue:a.detail.type===t.ResourceCodeReference?i.get(r.serverErrorPrefix+a.detail.value):a.detail.value};e.displayableErrorInfo.push(u)}return e},r.addDebugErrorInfo=function(t,r,n,i,o){return t.debugErrorInfo=t.debugErrorInfo||[],o&&t.debugErrorInfo.push({errorInfoKey:e.ClientErrorStrings.HttpRequestId,errorInfoValue:o}),r&&t.debugErrorInfo.push({errorInfoKey:e.ClientErrorStrings.ClientErrorCode,errorInfoValue:r}),n&&t.debugErrorInfo.push({errorInfoKey:e.ClientErrorStrings.ErrorDetails,errorInfoValue:n}),i&&t.debugErrorInfo.push({errorInfoKey:e.ClientErrorStrings.StackTrace,errorInfoValue:i}),t},r.GetDetailsFromTransformError=function(e,t){var r=e.get("ServiceError_CannotLoadVisual"),n=e.get("ServiceError_CannotLoadVisual"),i=t.message,o=[];o.push({errorInfoKey:n,errorInfoValue:i});var a={message:r,displayableErrorInfo:o};return a},r.GetDetailsFromServerError=function(t,r){var n="",i="",o="",a=!1;switch(r.errorCode){case e.RS_AccessDeniedDueToRLSGroup:n=t.get("ServiceError_ModelCannotLoad"),i=t.get("ServiceError_ModelFetchingFailureKey"),o=t.get("DsrError_NoPermissionDueToRLSGroupMessage"),a=!0;break;case e.RS_CannotRetrieveModel:n=t.get("ServiceError_ModelCannotLoad"),i=t.get("ServiceError_ModelFetchingFailureKey"),o=t.get("DsrError_CanNotRetrieveModelMessage"),a=!0;break;case e.DMTS_NoGatewayWithAllDatasourcesToBindError:n=t.get("ServiceError_ModelCannotLoad"),i=t.get("ServiceError_ModelFetchingFailureKey"),o=t.get("ServerError_DM_GWPipeline_Gateway_DataSourceConnectionError"),a=!0;break;case e.DM_GWPipeline_UnknownError:n=t.get("ServiceError_ModelCannotLoad"),i=t.get("ServiceError_ModelFetchingFailureKey"),o=t.get("ServerError_DM_GWPipeline_Client_GatewayUnreachable"),a=!0;break;case e.PBID_AccessDenied:n=t.get("ServiceError_CannotLoadVisual"),i=t.get("ServiceError_AuthenticationErrorKey"),o=t.get("ServiceError_AuthenticationErrorValue"),a=!0;break;case e.PBI_PowerBIServiceLiveConnectModelNotFound:n=t.get("UploadPowerBICompanion_AccessDatasetWarning"),a=!0}if(!a)switch(r.statusCode){case 2:n=t.get("ServiceError_ModelCannotLoad"),i=t.get("ServiceError_ModelConvertFailureKey"),o=t.get("ServiceError_ModelConvertFailureValue");break;case 3:n=t.get("ServiceError_ModelCannotLoad"),i=t.get("ServiceError_ModelCreationFailureKey"),o=t.get("ServiceError_ModelCreationFailureValue");break;case 1:n=t.get("ServiceError_ModelCannotLoad"),i=t.get("ServiceError_ModelFetchingFailureKey"),o=t.get("ServiceError_ModelFetchingFailureValue");break;case 4:n=t.get("ServiceError_CannotLoadVisual"),i=t.get("ServiceError_ExecuteSemanticQueryErrorKey"),o=t.get("ServiceError_ExecuteSemanticQueryErrorValue");break;case 5:n=t.get("ServiceError_CannotLoadVisual"),i=t.get("ServiceError_ExecuteSemanticQueryInvalidStreamFormatKey"),o=t.get("ServiceError_ExecuteSemanticQueryInvalidStreamFormatValue");break;case 0:default:n=t.get("ServiceError_GeneralError"),i=t.get("ServiceError_GeneralErrorKey"),o=t.get("ServiceError_GeneralErrorValue")}var s=[];s.push({errorInfoKey:i,errorInfoValue:o});var u={message:n,displayableErrorInfo:s};return u},r})();n.serverErrorPrefix="ServerError_",e.PowerBIErrorDetailHelper=n})(powerbi||(powerbi={}));var powerbi;!(function(e){})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e){return new n(e)}e.CategoryTypes={Address:"Address",City:"City",Continent:"Continent",CountryRegion:"Country",County:"County",Longitude:"Longitude",Latitude:"Latitude",Place:"Place",PostalCode:"PostalCode",StateOrProvince:"StateOrProvince"},e.createGeoTaggingAnalyzerService=t;var r={GeotaggingString_Continent:"continent",GeotaggingString_Continents:"continents",GeotaggingString_Country:"country",GeotaggingString_Countries:"countries",GeotaggingString_State:"state",GeotaggingString_States:"states",GeotaggingString_City:"city",GeotaggingString_Cities:"cities",GeotaggingString_Town:"town",GeotaggingString_Towns:"towns",GeotaggingString_Province:"province",GeotaggingString_Provinces:"provinces",GeotaggingString_County:"county",GeotaggingString_Counties:"counties",GeotaggingString_Village:"village",GeotaggingString_Villages:"villages",GeotaggingString_Post:"post",GeotaggingString_Zip:"zip",GeotaggingString_Code:"code",GeotaggingString_Place:"place",GeotaggingString_Places:"places",GeotaggingString_Address:"address",GeotaggingString_Addresses:"addresses",GeotaggingString_Street:"street",GeotaggingString_Streets:"streets",GeotaggingString_Longitude:"longitude",GeotaggingString_Longitude_Short:"lon",GeotaggingString_Longitude_Short2:"long",GeotaggingString_Latitude:"latitude",GeotaggingString_Latitude_Short:"lat",GeotaggingString_PostalCode:"postal code",GeotaggingString_PostalCodes:"postal codes",GeotaggingString_ZipCode:"zip code",GeotaggingString_ZipCodes:"zip codes",GeotaggingString_Territory:"territory",GeotaggingString_Territories:"territories",GeotaggingString_VRMBackCompat_CountryRegion:"CountryRegion",GeotaggingString_VRMBackCompat_StateOrProvince:"StateOrProvince"},n=(function(){function t(e){this.GeotaggingString_VRMBackCompat_CountryRegion="CountryRegion",this.GeotaggingString_VRMBackCompat_StateOrProvince="StateOrProvince",this.GeotaggingString_Continent=e("GeotaggingString_Continent").toLowerCase(),this.GeotaggingString_Continents=e("GeotaggingString_Continents").toLowerCase(),this.GeotaggingString_Country=e("GeotaggingString_Country").toLowerCase(),this.GeotaggingString_Countries=e("GeotaggingString_Countries").toLowerCase(),this.GeotaggingString_State=e("GeotaggingString_State").toLowerCase(),this.GeotaggingString_States=e("GeotaggingString_States").toLowerCase(),this.GeotaggingString_City=e("GeotaggingString_City").toLowerCase(),this.GeotaggingString_Cities=e("GeotaggingString_Cities").toLowerCase(),this.GeotaggingString_Town=e("GeotaggingString_Town").toLowerCase(),this.GeotaggingString_Towns=e("GeotaggingString_Towns").toLowerCase(),this.GeotaggingString_Province=e("GeotaggingString_Province").toLowerCase(),this.GeotaggingString_Provinces=e("GeotaggingString_Provinces").toLowerCase(),this.GeotaggingString_County=e("GeotaggingString_County").toLowerCase(),this.GeotaggingString_Counties=e("GeotaggingString_Counties").toLowerCase(),this.GeotaggingString_Village=e("GeotaggingString_Village").toLowerCase(),this.GeotaggingString_Villages=e("GeotaggingString_Villages").toLowerCase(),this.GeotaggingString_Post=e("GeotaggingString_Post").toLowerCase(),this.GeotaggingString_Zip=e("GeotaggingString_Zip").toLowerCase(),this.GeotaggingString_Code=e("GeotaggingString_Code").toLowerCase(),this.GeotaggingString_Place=e("GeotaggingString_Place").toLowerCase(),this.GeotaggingString_Places=e("GeotaggingString_Places").toLowerCase(),this.GeotaggingString_Address=e("GeotaggingString_Address").toLowerCase(),this.GeotaggingString_Addresses=e("GeotaggingString_Addresses").toLowerCase(),this.GeotaggingString_Street=e("GeotaggingString_Street").toLowerCase(),this.GeotaggingString_Streets=e("GeotaggingString_Streets").toLowerCase(),this.GeotaggingString_Longitude=e("GeotaggingString_Longitude").toLowerCase(),this.GeotaggingString_Longitude_Short=e("GeotaggingString_Longitude_Short").toLowerCase(),this.GeotaggingString_Longitude_Short2=e("GeotaggingString_Longitude_Short2").toLowerCase(),this.GeotaggingString_Latitude=e("GeotaggingString_Latitude").toLowerCase(),this.GeotaggingString_Latitude_Short=e("GeotaggingString_Latitude_Short").toLowerCase(),this.GeotaggingString_PostalCode=e("GeotaggingString_PostalCode").toLowerCase(),this.GeotaggingString_PostalCodes=e("GeotaggingString_PostalCodes").toLowerCase(),this.GeotaggingString_ZipCode=e("GeotaggingString_ZipCode").toLowerCase(),this.GeotaggingString_ZipCodes=e("GeotaggingString_ZipCodes").toLowerCase(),this.GeotaggingString_Territory=e("GeotaggingString_Territory").toLowerCase(),this.GeotaggingString_Territories=e("GeotaggingString_Territories").toLowerCase()}return t.prototype.isLongitudeOrLatitude=function(e){return this.isLongitude(e)||this.isLatitude(e)},t.prototype.isGeographic=function(e){return this.isLongitudeOrLatitude(e)||this.isGeocodable(e)},t.prototype.isGeocodable=function(e){return this.isAddress(e)||this.isCity(e)||this.isContinent(e)||this.isCountry(e)||this.isCounty(e)||this.isStateOrProvince(e)||this.isPlace(e)||this.isPostalCode(e)||this.isTerritory(e)},t.prototype.isGeoshapable=function(e){return this.isCity(e)||this.isCountry(e)||this.isCounty(e)||this.isStateOrProvince(e)||this.isPostalCode(e)||this.isTerritory(e)||this.isGeoshapableEnglish(e)},t.prototype.isGeoshapableEnglish=function(e){return this.isEnglishCity(e)||this.isEnglishCountry(e)||this.isEnglishCounty(e)||this.isEnglishStateOrProvince(e)||this.isEnglishPostalCode(e)||this.isEnglishTerritory(e)},t.prototype.isAddress=function(e){return t.hasMatches(e,[this.GeotaggingString_Address,this.GeotaggingString_Addresses,this.GeotaggingString_Street,this.GeotaggingString_Streets])},t.prototype.isPlace=function(e){return t.hasMatches(e,[this.GeotaggingString_Place,this.GeotaggingString_Places])},t.prototype.isCity=function(e){return t.hasMatches(e,[this.GeotaggingString_City,this.GeotaggingString_Cities,this.GeotaggingString_Town,this.GeotaggingString_Towns,this.GeotaggingString_Village,this.GeotaggingString_Villages])},t.prototype.isStateOrProvince=function(e){return t.hasMatches(e,[this.GeotaggingString_State,this.GeotaggingString_States,this.GeotaggingString_Province,this.GeotaggingString_Provinces,this.GeotaggingString_VRMBackCompat_StateOrProvince])},t.prototype.isCountry=function(e){return t.hasMatches(e,[this.GeotaggingString_Country,this.GeotaggingString_Countries,this.GeotaggingString_VRMBackCompat_CountryRegion])},t.prototype.isCounty=function(e){return t.hasMatches(e,[this.GeotaggingString_County,this.GeotaggingString_Counties])},t.prototype.isContinent=function(e){return t.hasMatches(e,[this.GeotaggingString_Continent,this.GeotaggingString_Continents])},t.prototype.isPostalCode=function(e){var r=t.hasMatches(e,[this.GeotaggingString_Post,this.GeotaggingString_Zip])&&t.hasMatches(e,[this.GeotaggingString_Code])||t.hasMatches(e,[this.GeotaggingString_PostalCode,this.GeotaggingString_PostalCodes,this.GeotaggingString_ZipCode,this.GeotaggingString_ZipCodes]);if(!r){var n=/\s+/,i=e.replace(n,"");r=t.hasMatches(i,[this.GeotaggingString_PostalCode.replace(n,""),this.GeotaggingString_PostalCodes.replace(n,""),this.GeotaggingString_ZipCode.replace(n,""),this.GeotaggingString_ZipCodes.replace(n,"")])}return r},t.prototype.isLongitude=function(e){return t.hasMatches(e,[this.GeotaggingString_Longitude])||t.hasMatches(e,[this.GeotaggingString_Longitude_Short],!0)||t.hasMatches(e,[this.GeotaggingString_Longitude_Short2],!0)},t.prototype.isLatitude=function(e){return t.hasMatches(e,[this.GeotaggingString_Latitude])||t.hasMatches(e,[this.GeotaggingString_Latitude_Short],!0)},t.prototype.isTerritory=function(e){return t.hasMatches(e,[this.GeotaggingString_Territory,this.GeotaggingString_Territories])},t.hasMatches=function(e,t,r){for(var n=/\W/,i=e.toLowerCase(),o=0,a=t.length;o<a;o++){var s=t[o].toLowerCase();if(r){var u=i.indexOf(s);if(u>-1){var g=void 0,l=void 0;if(g=l=!0,u-1>0&&(l=n.test(i[u-1])),u+s.length<i.length&&(g=n.test(i[u+s.length])),l&&g)return!0}}else if(i.indexOf(s)>-1)return!0}return!1},t.prototype.getFieldType=function(t){if(null!=t)return this.isLatitude(t)?e.CategoryTypes.Latitude:this.isLongitude(t)?e.CategoryTypes.Longitude:this.isPostalCode(t)?e.CategoryTypes.PostalCode:this.isAddress(t)?e.CategoryTypes.Address:this.isPlace(t)?e.CategoryTypes.Place:this.isCity(t)?e.CategoryTypes.City:this.isCountry(t)?e.CategoryTypes.CountryRegion:this.isCounty(t)?e.CategoryTypes.County:this.isStateOrProvince(t)?e.CategoryTypes.StateOrProvince:this.isContinent(t)?e.CategoryTypes.Continent:this.getEnglishFieldType(t)},t.prototype.getFieldTypeFromDescriptor=function(t){if(null!=t&&null!=t.geography){var r=t.geography;return r.latitude?e.CategoryTypes.Latitude:r.longitude?e.CategoryTypes.Longitude:r.postalCode?e.CategoryTypes.PostalCode:r.address?e.CategoryTypes.Address:r.place?e.CategoryTypes.Place:r.city?e.CategoryTypes.City:r.country?e.CategoryTypes.CountryRegion:r.county?e.CategoryTypes.County:r.stateOrProvince?e.CategoryTypes.StateOrProvince:r.continent?e.CategoryTypes.Continent:void 0}},t.prototype.isEnglishAddress=function(e){return t.hasMatches(e,[r.GeotaggingString_Address,r.GeotaggingString_Addresses,r.GeotaggingString_Street,r.GeotaggingString_Streets])},t.prototype.isEnglishPlace=function(e){return t.hasMatches(e,[r.GeotaggingString_Place,r.GeotaggingString_Places])},t.prototype.isEnglishCity=function(e){return t.hasMatches(e,[r.GeotaggingString_City,r.GeotaggingString_Cities,r.GeotaggingString_Town,r.GeotaggingString_Towns,r.GeotaggingString_Village,r.GeotaggingString_Villages])},t.prototype.isEnglishStateOrProvince=function(e){return t.hasMatches(e,[r.GeotaggingString_State,r.GeotaggingString_States,r.GeotaggingString_Province,r.GeotaggingString_Provinces,r.GeotaggingString_VRMBackCompat_StateOrProvince])},t.prototype.isEnglishCountry=function(e){return t.hasMatches(e,[r.GeotaggingString_Country,r.GeotaggingString_Countries,r.GeotaggingString_VRMBackCompat_CountryRegion])},t.prototype.isEnglishCounty=function(e){return t.hasMatches(e,[r.GeotaggingString_County,r.GeotaggingString_Counties])},t.prototype.isEnglishContinent=function(e){return t.hasMatches(e,[r.GeotaggingString_Continent,r.GeotaggingString_Continents])},t.prototype.isEnglishPostalCode=function(e){var n=t.hasMatches(e,[r.GeotaggingString_Post,r.GeotaggingString_Zip])&&t.hasMatches(e,[this.GeotaggingString_Code])||t.hasMatches(e,[r.GeotaggingString_PostalCode,r.GeotaggingString_PostalCodes,r.GeotaggingString_ZipCode,r.GeotaggingString_ZipCodes]);if(!n){var i=new RegExp("s");n=t.hasMatches(e,[r.GeotaggingString_PostalCode.replace(i,""),r.GeotaggingString_PostalCodes.replace(i,""),r.GeotaggingString_ZipCode.replace(i,""),r.GeotaggingString_ZipCodes.replace(i,"")])}return n},t.prototype.isEnglishLongitude=function(e){return t.hasMatches(e,[r.GeotaggingString_Longitude])||t.hasMatches(e,[r.GeotaggingString_Longitude_Short],!0)||t.hasMatches(e,[r.GeotaggingString_Longitude_Short2],!0)},t.prototype.isEnglishLatitude=function(e){return t.hasMatches(e,[r.GeotaggingString_Latitude])||t.hasMatches(e,[r.GeotaggingString_Latitude_Short],!0)},t.prototype.isEnglishTerritory=function(e){return t.hasMatches(e,[r.GeotaggingString_Territory,r.GeotaggingString_Territories])},t.prototype.getEnglishFieldType=function(t){if(null!=t)return this.isEnglishLatitude(t)?e.CategoryTypes.Latitude:this.isEnglishLongitude(t)?e.CategoryTypes.Longitude:this.isEnglishPostalCode(t)?e.CategoryTypes.PostalCode:this.isEnglishAddress(t)?e.CategoryTypes.Address:this.isEnglishPlace(t)?e.CategoryTypes.Place:this.isEnglishCity(t)?e.CategoryTypes.City:this.isEnglishCountry(t)?e.CategoryTypes.CountryRegion:this.isEnglishCounty(t)?e.CategoryTypes.County:this.isEnglishStateOrProvince(t)?e.CategoryTypes.StateOrProvince:this.isEnglishContinent(t)?e.CategoryTypes.Continent:void 0},t})();e.GeoTaggingAnalyzerService=n})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){e.ClientErrorCode="Client Error Code",e.ErrorCode="Error Code",e.ErrorDetails="Error Details",e.HttpRequestId="HTTP Request Id",e.JobId="Job Id",e.ODataErrorMessage="OData Error Message",e.StackTrace="Stack Trace"})(t=e.ClientErrorStrings||(e.ClientErrorStrings={}));var r=(function(){function e(e){this.errorCode=e}return Object.defineProperty(e.prototype,"code",{get:function(){return this.errorCode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignorable",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.getDetails=function(e){var r={message:e.get("ClientError_UnknownClientErrorValue"),displayableErrorInfo:[{errorInfoKey:e.get("ClientError_UnknownClientErrorKey"),errorInfoValue:e.get("ClientError_UnknownClientErrorValue")}],debugErrorInfo:[{errorInfoKey:t.ClientErrorCode,errorInfoValue:this.code}]};return r},e})();e.UnknownClientError=r;var n=(function(){function e(e,t){this.httpStatusCode=e,this.httpRequestId=t}return Object.defineProperty(e.prototype,"code",{get:function(){return"HttpClientError"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignorable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requestId",{get:function(){return this.httpRequestId},enumerable:!0,configurable:!0}),e.prototype.getDetails=function(e){var r={message:null,displayableErrorInfo:[{errorInfoKey:e.get("DsrError_Key"),errorInfoValue:e.get("DsrError_UnknownErrorValue")},{errorInfoKey:e.get("ClientError_HttpResponseStatusCodeKey"),errorInfoValue:this.httpStatusCode.toString()}],debugErrorInfo:[{errorInfoKey:t.HttpRequestId,errorInfoValue:this.httpRequestId},{errorInfoKey:t.ClientErrorCode,errorInfoValue:this.code}]};return r},e})();e.HttpClientError=n;var i=(function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"IgnorableClientError"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignorable",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.getDetails=function(e){var t={message:"",displayableErrorInfo:[]};return t},e})();e.IgnorableClientError=i})(powerbi||(powerbi={}));var jsCommon;!(function(e){var t;!(function(e){function t(e,t){for(var r=[],n=e.length-1;n>=0;--n)t.indexOf(e[n])!==-1&&r.push(e[n]);return r}function r(e,t){for(var r=[],n=e.length-1;n>=0;--n){var i=e[n];t.indexOf(i)===-1&&r.push(i)}return r}function n(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];t.indexOf(i)===-1&&t.push(i)}return t}function i(e,t){for(var r=0,n=t.length;r<n;++r)o(e,t[r])}function o(e,t){e.indexOf(t)<0&&e.push(t)}function a(e,t,r){for(var n=[],i=t;i<=r;++i)n.push(e[i]);return n}function s(e,t){for(var r=[],n=0;n<t;++n)r.push(e[n]);return r}function u(e){return s(e,e.length)}function g(e,t,r){if(e||(e=null),t||(t=null),e===t)return!0;if(!!e!=!!t)return!1;var n=e.length;if(n!==t.length)return!1;for(var i=0;i<n&&r(e[i],t[i]);)++i;return i===n}function l(e){return e&&0===e.length?null:e}function c(e,t){for(var r=0,n=e.length;r<n;++r)if(t(e[r]))return r;return-1}function f(e,t){if(0===t)return e.slice();var r=e.slice(t);return Array.prototype.push.apply(r,e.slice(0,t)),r}function h(){return d([])}function d(e){var t=e;return t.withId=m,t}function p(e,t){for(var r=0,n=e.length;r<n;r++){var i=e[r];if(i.id===t)return i}}function m(t){return e.findWithId(this,t)}function y(){return v([])}function v(e){var t=e;return t.withName=E,t}function S(e,t){var r=C(e,t);if(r>=0)return e[r]}function C(e,t){for(var r=0,n=e.length;r<n;r++){var i=e[r];if(i.name===t)return r}return-1}function w(e,t){for(var r=e.length,n=r-1;n>=0;n--){var i=e[n]-t;if(0===i)return!1;if(!(i>0))return e.splice(n+1,0,t),!0}return e.unshift(t),!0}function b(e,t){var r=e.indexOf(t);return!(r<0)&&(e.splice(r,1),!0)}function E(e){var t=this;return S(t,e)}function x(e){if(e)for(;e.length>0;)e.pop()}function T(e){return!e||0===e.length}function P(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function I(e,t,r){return _.any(e,(function(e){return r(e,t)}))}function G(e){for(var t=e;null!=t;){if(_.isArray(t))return!0;t=Object.getPrototypeOf(t)}return!1}function M(e,t){var r=e.length;if(r>=2)for(var n=1;n<r;n++)if(t(e[n-1],e[n])>0)return!1;return!0}function N(e,t){var r=t?function(e,t){return t-e}:function(e,t){return e-t};return M(e,r)}function O(e){return _.isArray(e)?e:[e]}e.intersect=t,e.diff=r,e.distinct=n,e.union=i,e.unionSingle=o,e.range=a,e.take=s,e.copy=u,e.sequenceEqual=g,e.emptyToNull=l,e.indexOf=c,e.rotate=f,e.createWithId=h,e.extendWithId=d,e.findWithId=p,e.createWithName=y,e.extendWithName=v,e.findItemWithName=S,e.indexWithName=C,e.insertSorted=w,e.removeFirst=b,e.clear=x,e.isUndefinedOrEmpty=T,e.swap=P,e.isInArray=I,e.isArrayOrInheritedArray=G,e.isSorted=M,e.isSortedNumeric=N,e.ensureArray=O})(t=e.ArrayExtensions||(e.ArrayExtensions={}))})(jsCommon||(jsCommon={}));var InJs;!(function(e){var t;!(function(e){function t(){return $("<div/>")}function r(){return $("<span/>")}function n(){return $('<input type="checkbox"/>')}function i(){return $("<ul/>")}function o(){return $("<li/>")}function a(){return $('<input type="button"/>')}function s(){return $("<select/>")}function u(){return $('<input type="text"/>')}function g(){return $("<img/>")}function l(){return $("<iframe/>")}e.div=t,e.span=r,e.checkbox=n,e.ul=i,e.li=o,e.button=a,e.select=s,e.textBox=u,e.img=g,e.iframe=l})(t=e.DomFactory||(e.DomFactory={}))})(InJs||(InJs={}));var powerbi;!(function(e){var t;!(function(e){function t(t){return t>=0?t<e.POSITIVE_POWERS.length?e.POSITIVE_POWERS[t]:1/0:(t=-t,t>0&&t<e.NEGATIVE_POWERS.length?e.NEGATIVE_POWERS[t]:0)}function r(t){if(t>1&&t<1e16)return t<1e8?t<1e4?t<100?t<10?0:1:t<1e3?2:3:t<1e6?t<1e5?4:5:t<1e7?6:7:t<1e12?t<1e10?t<1e9?8:9:t<1e11?10:11:t<1e14?t<1e13?12:13:t<1e15?14:15;if(t>1e-16&&t<1)return t<1e-8?t<1e-12?t<1e-14?t<1e-15?-16:-15:t<1e-13?-14:-13:t<1e-10?t<1e-11?-12:-11:t<1e-9?-10:-9:t<1e-4?t<1e-6?t<1e-7?-8:-7:t<1e-5?-6:-5:t<.01?t<.001?-4:-3:t<.1?-2:-1;var r=Math.log(t)/e.LOG_E_10;return e.floorWithPrecision(r)}function n(t,r){if(void 0===r&&(r=e.DEFAULT_PRECISION_IN_DECIMAL_DIGITS),t&&isFinite(t)){var n=e.log10(Math.abs(t));if(n<e.MIN_EXP)return 0;var i=Math.max(n-r,-e.NEGATIVE_POWERS.length+1);return e.pow10(i)}}function i(e,t,r){return r=C(r,e,t),e===t||Math.abs(e-t)<r}function o(e,t,r){return r=C(r,e,t),e<t&&Math.abs(e-t)>r}function a(e,t,r){return r=C(r,e,t),e<t||Math.abs(e-t)<r}function s(e,t,r){return r=C(r,e,t),e>t&&Math.abs(e-t)>r}function u(e,t,r){return r=C(r,e,t),e>t||Math.abs(e-t)<r}function g(t,r){r=null!=r?r:e.DEFAULT_PRECISION;var n=Math.round(t);return Math.abs(t-n)<r?n:Math.floor(t)}function l(t,r){r=C(r,e.DEFAULT_PRECISION);var n=Math.round(t);return Math.abs(t-n)<r?n:Math.ceil(t)}function c(t,r){return r=C(r,e.DEFAULT_PRECISION),0===r||0===t?t:Math.floor(t/r)*r}function f(t,r){return r=C(r,e.DEFAULT_PRECISION),0===r||0===t?t:Math.ceil(t/r)*r}function h(t,r){if(r=C(r,e.DEFAULT_PRECISION),0===r||0===t)return t;var n=Math.round(t/r)*r,i=Math.round(e.log10(Math.abs(t))-e.log10(r))+1;return i>0&&i<16&&(n=parseFloat(n.toPrecision(i))),n}function d(e,t,r){return void 0===e||null===e?e:e<t?t:e>r?r:e}function p(e){return.5+e<<0}function m(e,t,r,n,i){if(0===r||0===i)return t<=e&&e<=t+r?n:NaN;var o=(e-t)/r,a=n+o*i;return a}function y(e){return h(e,n(e))}function v(e){return null!==e&&e%1===0}function S(e,t){return Math.round(e/t)*t}function C(t,r,n){if(void 0!==t)return t;var i;return i=n?r?e.getPrecision(Math.min(Math.abs(r),Math.abs(n))):e.getPrecision(n):e.getPrecision(r),i||e.DEFAULT_PRECISION}e.MIN_VALUE=-Number.MAX_VALUE,e.MAX_VALUE=Number.MAX_VALUE,e.MIN_EXP=-308,e.MAX_EXP=308,e.EPSILON=1e-323,e.DEFAULT_PRECISION=1e-4,e.DEFAULT_PRECISION_IN_DECIMAL_DIGITS=12,e.LOG_E_10=Math.log(10),e.POSITIVE_POWERS=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13,1e14,1e15,1e16,1e17,1e18,1e19,1e20,1e21,1e22,1e23,1e24,1e25,1e26,1e27,1e28,1e29,1e30,1e31,1e32,1e33,1e34,1e35,1e36,1e37,1e38,1e39,1e40,1e41,1e42,1e43,1e44,1e45,1e46,1e47,1e48,1e49,1e50,1e51,1e52,1e53,1e54,1e55,1e56,1e57,1e58,1e59,1e60,1e61,1e62,1e63,1e64,1e65,1e66,1e67,1e68,1e69,1e70,1e71,1e72,1e73,1e74,1e75,1e76,1e77,1e78,1e79,1e80,1e81,1e82,1e83,1e84,1e85,1e86,1e87,1e88,1e89,1e90,1e91,1e92,1e93,1e94,1e95,1e96,1e97,1e98,1e99,1e100,1e101,1e102,1e103,1e104,1e105,1e106,1e107,1e108,1e109,1e110,1e111,1e112,1e113,1e114,1e115,1e116,1e117,1e118,1e119,1e120,1e121,1e122,1e123,1e124,1e125,1e126,1e127,1e128,1e129,1e130,1e131,1e132,1e133,1e134,1e135,1e136,1e137,1e138,1e139,1e140,1e141,1e142,1e143,1e144,1e145,1e146,1e147,1e148,1e149,1e150,1e151,1e152,1e153,1e154,1e155,1e156,1e157,1e158,1e159,1e160,1e161,1e162,1e163,1e164,1e165,1e166,1e167,1e168,1e169,1e170,1e171,1e172,1e173,1e174,1e175,1e176,1e177,1e178,1e179,1e180,1e181,1e182,1e183,1e184,1e185,1e186,1e187,1e188,1e189,1e190,1e191,1e192,1e193,1e194,1e195,1e196,1e197,1e198,1e199,1e200,1e201,1e202,1e203,1e204,1e205,1e206,1e207,1e208,1e209,1e210,1e211,1e212,1e213,1e214,1e215,1e216,1e217,1e218,1e219,1e220,1e221,1e222,1e223,1e224,1e225,1e226,1e227,1e228,1e229,1e230,1e231,1e232,1e233,1e234,1e235,1e236,1e237,1e238,1e239,1e240,1e241,1e242,1e243,1e244,1e245,1e246,1e247,1e248,1e249,1e250,1e251,1e252,1e253,1e254,1e255,1e256,1e257,1e258,1e259,1e260,1e261,1e262,1e263,1e264,1e265,1e266,1e267,1e268,1e269,1e270,1e271,1e272,1e273,1e274,1e275,1e276,1e277,1e278,1e279,1e280,1e281,1e282,1e283,1e284,1e285,1e286,1e287,1e288,1e289,1e290,1e291,1e292,1e293,1e294,1e295,1e296,1e297,1e298,1e299,1e300,1e301,1e302,1e303,1e304,1e305,1e306,1e307,1e308],e.NEGATIVE_POWERS=[1,.1,.01,.001,1e-4,1e-5,1e-6,1e-7,1e-8,1e-9,1e-10,1e-11,1e-12,1e-13,1e-14,1e-15,1e-16,1e-17,1e-18,1e-19,1e-20,1e-21,1e-22,1e-23,1e-24,1e-25,1e-26,1e-27,1e-28,1e-29,1e-30,1e-31,1e-32,1e-33,1e-34,1e-35,1e-36,1e-37,1e-38,1e-39,1e-40,1e-41,1e-42,1e-43,1e-44,1e-45,1e-46,1e-47,1e-48,1e-49,1e-50,1e-51,1e-52,1e-53,1e-54,1e-55,1e-56,1e-57,1e-58,1e-59,1e-60,1e-61,1e-62,1e-63,1e-64,1e-65,1e-66,1e-67,1e-68,1e-69,1e-70,1e-71,1e-72,1e-73,1e-74,1e-75,1e-76,1e-77,1e-78,1e-79,1e-80,1e-81,1e-82,1e-83,1e-84,1e-85,1e-86,1e-87,1e-88,1e-89,1e-90,1e-91,1e-92,1e-93,1e-94,1e-95,1e-96,1e-97,1e-98,1e-99,1e-100,1e-101,1e-102,1e-103,1e-104,1e-105,1e-106,1e-107,1e-108,1e-109,1e-110,1e-111,1e-112,1e-113,1e-114,1e-115,1e-116,1e-117,1e-118,1e-119,1e-120,1e-121,1e-122,1e-123,1e-124,1e-125,1e-126,1e-127,1e-128,1e-129,1e-130,1e-131,1e-132,1e-133,1e-134,1e-135,1e-136,1e-137,1e-138,1e-139,1e-140,1e-141,1e-142,1e-143,1e-144,1e-145,1e-146,1e-147,1e-148,1e-149,1e-150,1e-151,1e-152,1e-153,1e-154,1e-155,1e-156,1e-157,1e-158,1e-159,1e-160,1e-161,1e-162,1e-163,1e-164,1e-165,1e-166,1e-167,1e-168,1e-169,1e-170,1e-171,1e-172,1e-173,1e-174,1e-175,1e-176,1e-177,1e-178,1e-179,1e-180,1e-181,1e-182,1e-183,1e-184,1e-185,1e-186,1e-187,1e-188,1e-189,1e-190,1e-191,1e-192,1e-193,1e-194,1e-195,1e-196,1e-197,1e-198,1e-199,1e-200,1e-201,1e-202,1e-203,1e-204,1e-205,1e-206,1e-207,1e-208,1e-209,1e-210,1e-211,1e-212,1e-213,1e-214,1e-215,1e-216,1e-217,1e-218,1e-219,1e-220,1e-221,1e-222,1e-223,1e-224,1e-225,1e-226,1e-227,1e-228,1e-229,1e-230,1e-231,1e-232,1e-233,1e-234,1e-235,1e-236,1e-237,1e-238,1e-239,1e-240,1e-241,1e-242,1e-243,1e-244,1e-245,1e-246,1e-247,1e-248,1e-249,1e-250,1e-251,1e-252,1e-253,1e-254,1e-255,1e-256,1e-257,1e-258,1e-259,1e-260,1e-261,1e-262,1e-263,1e-264,1e-265,1e-266,1e-267,1e-268,1e-269,1e-270,1e-271,1e-272,1e-273,1e-274,1e-275,1e-276,1e-277,1e-278,1e-279,1e-280,1e-281,1e-282,1e-283,1e-284,1e-285,1e-286,1e-287,1e-288,1e-289,1e-290,1e-291,1e-292,1e-293,1e-294,1e-295,1e-296,1e-297,1e-298,1e-299,1e-300,1e-301,1e-302,1e-303,1e-304,1e-305,1e-306,1e-307,1e-308,1e-309,1e-310,1e-311,1e-312,1e-313,1e-314,1e-315,1e-316,1e-317,1e-318,1e-319,1e-320,1e-321,1e-322,1e-323,0],e.pow10=t,e.log10=r,e.getPrecision=n,e.equalWithPrecision=i,e.lessWithPrecision=o,e.lessOrEqualWithPrecision=a,e.greaterWithPrecision=s,e.greaterOrEqualWithPrecision=u,e.floorWithPrecision=g,e.ceilWithPrecision=l,e.floorToPrecision=c,e.ceilToPrecision=f,e.roundToPrecision=h,e.ensureInRange=d,e.round=p,e.project=m,e.removeDecimalNoise=y,e.isInteger=v,e.toIncrement=S,e.detectPrecision=C})(t=e.Double||(e.Double={}))})(powerbi||(powerbi={}));var jsCommon;!(function(e){var t,r=powerbi.Double;!(function(e){function t(e,t){if(0===t)return e;var r=i(e),n=o(r),u=s(n,t),g=a(u);return l(g)}function n(e){var t=i(e);return l(t)}function i(e){if(e.indexOf("#")>=0){if(7===e.length){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(null==t||t.length<4)return;return{R:parseInt(t[1],16),G:parseInt(t[2],16),B:parseInt(t[3],16)}}if(4===e.length){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i.exec(e);if(null==t||t.length<4)return;return{R:parseInt(t[1]+t[1],16),G:parseInt(t[2]+t[2],16),B:parseInt(t[3]+t[3],16)}}}else{if(e.indexOf("rgb(")>=0){var t=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/.exec(e);if(null==t||t.length<4)return;return{R:parseInt(t[1],10),G:parseInt(t[2],10),B:parseInt(t[3],10)}}if(e.indexOf("rgba(")>=0){var t=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d*(?:\.\d+)?)\)$/.exec(e);if(null==t||t.length<5)return;return{R:parseInt(t[1],10),G:parseInt(t[2],10),B:parseInt(t[3],10),A:parseFloat(t[4])}}}}function o(e){var t,r,n=e.R/255,i=e.G/255,o=e.B/255,a=Math.min(n,Math.min(i,o)),s=Math.max(n,Math.max(i,o)),u=s,g=s-a;return 0===s||0===g?(t=0,r=0):(t=g/s,r=n===s?(i-o)/g:i===s?2+(o-n)/g:4+(n-i)/g),r/=6,r<0&&(r+=1),{H:r,S:t,V:u}}function a(e){var t,r,n,i=e.H,o=e.S,a=e.V;if(0===o)t=a,r=a,n=a;else{var s=void 0,u=void 0,g=void 0,l=void 0,c=void 0,f=void 0;switch(f=6*i,c=Math.floor(f),l=f-c,s=a*(1-o),u=a*(1-o*l),g=a*(1-o*(1-l)),c){case 0:t=a,r=g,n=s;break;case 1:t=u,r=a,n=s;break;case 2:t=s,r=a,n=g;break;case 3:t=s,r=u,n=a;break;case 4:t=g,r=s,n=a;break;case 5:t=a,r=s,n=u}}return{R:Math.floor(255*t),G:Math.floor(255*r),B:Math.floor(255*n)}}function s(e,t){var r=e.H+t;return{H:r>1?r-1:r,S:e.S,V:e.V}}function u(e,t){var r=Math.floor(t);return{R:Math.max(0,e.R-r),G:Math.max(0,e.G-r),B:Math.max(0,e.B-r)}}function g(e){return null==e.A?"rgb("+e.R+","+e.G+","+e.B+")":"rgba("+e.R+","+e.G+","+e.B+","+e.A+")";
}function l(e){return"#"+m(e.R)+m(e.G)+m(e.B)}function c(e){return/^#[0-9a-f]{6}$/i.test(e)}function f(e,t,r){return l(h(i(e),t,i(r)))}function h(e,t,n){return t=r.ensureInRange(t,0,1),{R:d(e.R,t,n.R),G:d(e.G,t,n.G),B:d(e.B,t,n.B)}}function d(e,t,n){return t=r.ensureInRange(t,0,1),e=r.ensureInRange(e,0,255),n=r.ensureInRange(n,0,255),Math.round(t*e+(1-t)*n)}function p(e,t,r){var n=o(e);return(t+r>1||t<=0||r<=0)&&(t=.8,r=.2),n.V<t?n.V=n.V+r:n.V=n.V-r,l(a(n))}function m(e){var t=r.ensureInRange(e,0,255),n=t.toString(16).toUpperCase();return 1===n.length?"0"+n:n}function y(t,r,n){var i=r.map((function(t){return e.parseColorString(t)}));return function(o){if(null==o&&(o=0),!isNaN(o)){if(n){if(o>=_.last(t))return _.last(r);if(o<=t[0])return r[0]}for(var a,s,u,g,l=1,c=t.length;l<c;l++){if(a=t[l-1],s=t[l],a===Number.NEGATIVE_INFINITY&&isNaN(s))return r[l];if(o===s)return r[l];if(o>=a&&o<=s){u=i[l-1],g=i[l];break}}var f={R:v(o,a,s,u.R,g.R),G:v(o,a,s,u.G,g.G),B:v(o,a,s,u.B,g.B)};return e.hexString(f)}}}function v(e,t,r,n,i){return t===Number.NEGATIVE_INFINITY&&r===Number.POSITIVE_INFINITY?Math.round((i+n)/2):t===Number.NEGATIVE_INFINITY?i:r===Number.POSITIVE_INFINITY?n:Math.round(n+(e-t)*(i-n)/(r-t))}function S(e,t){var r=parseInt(e.slice(1),16),n=t<0?0:255,i=t<0?t*-1:t,o=r>>16,a=r>>8&255,s=255&r,u="#"+(16777216+65536*(Math.round((n-o)*i)+o)+256*(Math.round((n-a)*i)+a)+(Math.round((n-s)*i)+s)).toString(16).slice(1);return u}function C(t,r){var n=t.length;if(n<r){t=_.clone(t);for(var i=_.chain(t).map((function(t){return o(e.parseColorString(t))})).sortBy((function(e){return e.H})).value(),s=_.chain(i).map((function(e,t){return{color1:e,color2:i[t+1===i.length?0:t+1]}})).value(),u=o(e.parseColorString(_.last(t)));;){s.sort((function(e,t){return w(e,t,u)}));var g=s[0];s.splice(0,1);var c=g.color1,f=g.color2,h=P(g);if(t.push(l(a(h))),t.length>=r)break;s.push({color1:c,color2:h}),s.push({color1:h,color2:f}),u=h}}return t}function w(e,t,r){var n=T(r.H-.1),i=Math.sqrt(2*E(x(e),n)),o=Math.sqrt(2*E(x(t),n));return o*b(t)-i*b(e)}function b(e){return T(e.color2.H-e.color1.H)}function E(e,t){var r=Math.abs(t-e);return r>.5&&(r-=1),r}function x(e){var t=b(e);return 0===t&&(t=1),(e.color1.H+t/2)%1}function T(e){return e%=1,e<0&&(e+=1),e}function P(e){var t,r,n,i=e.color1,o=e.color2;return t=x(e),r=(i.S+o.S)/2,n=(i.V+o.V)/2,{H:t,S:r,V:n}}e.rotate=t,e.normalizeToHexString=n,e.parseColorString=i,e.darken=u,e.rgbString=g,e.hexString=l,e.isFullHexString=c,e.hexBlend=f,e.rgbBlend=h,e.channelBlend=d,e.calculateHighlightColor=p,e.createLinearColorScale=y,e.shadeColor=S,e.expandDataColorSet=C})(t=e.Color||(e.Color={}))})(jsCommon||(jsCommon={}));var powerbi;!(function(e){var t;!(function(e){function t(e,t){e!==!0&&i(t||"condition: "+e)}function r(e,t){null!==e&&void 0!==e||i(t||"condition: "+e)}function n(e,t){_.isEmpty(e)&&i(t||"condition: "+e)}function i(e){throw new Error("Contract check failed: "+e)}e.check=t,e.checkValue=r,e.checkNonEmpty=n,e.fail=i})(t=e.contract||(e.contract={}))})(powerbi||(powerbi={}));var jsCommon;!(function(e){var t;!(function(e){function t(e){return{class:e,selector:"."+e}}e.createClassAndSelector=t,e.styleAttribute="style",e.pixelUnits="px",e.heightProperty="height",e.widthProperty="width",e.topProperty="top",e.bottomProperty="bottom",e.leftProperty="left",e.rightProperty="right",e.marginTopProperty="margin-top",e.marginLeftProperty="margin-left",e.displayProperty="display",e.backgroundProperty="background",e.backgroundColorProperty="background-color",e.backgroundRepeatProperty="background-repeat",e.backgroundSizeProperty="background-size",e.backgroundImageProperty="background-image",e.textShadowProperty="text-shadow",e.textAlignProperty="text-align",e.borderProperty="border",e.borderTopWidthProperty="border-top-width",e.borderBottomWidthProperty="border-bottom-width",e.borderLeftWidthProperty="border-left-width",e.borderRightWidthProperty="border-right-width",e.fontSizeProperty="font-size",e.fontWeightProperty="font-weight",e.colorProperty="color",e.opacityProperty="opacity",e.paddingLeftProperty="padding-left",e.paddingRightProperty="padding-right",e.positionProperty="position",e.maxWidthProperty="max-width",e.minWidthProperty="min-width",e.overflowProperty="overflow",e.overflowXProperty="overflow-x",e.overflowYProperty="overflow-y",e.transformProperty="transform",e.webkitTransformProperty="-webkit-transform",e.cursorProperty="cursor",e.visibilityProperty="visibility",e.absoluteValue="absolute",e.zeroPixelValue="0px",e.autoValue="auto",e.hiddenValue="hidden",e.noneValue="none",e.blockValue="block",e.inlineBlockValue="inline-block",e.transparentValue="transparent",e.boldValue="bold",e.visibleValue="visible",e.tableRowValue="table-row",e.coverValue="cover",e.pointerValue="pointer",e.scrollValue="scroll"})(t=e.CssConstants||(e.CssConstants={}))})(jsCommon||(jsCommon={}));var debug;!(function(e){function t(e,t){e!==!0&&o(t||"condition: "+e)}function r(e,t){null!==e&&void 0!==e||o(t||"condition: "+e)}function n(e,t){null!=e&&e.length>0||o(t||"condition: "+e)}function i(e,t){}function o(t){(e.assertFailFunction||alert)("Debug Assert failed: "+t)}function a(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]}function s(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];console&&console.warn||a.apply(void 0,[e].concat(t))}e.assert=t,e.assertValue=r,e.assertNonEmpty=n,e.assertAnyValue=i,e.assertFail=o,e.log=a,e.warn=s})(debug||(debug={}));var jsCommon;!(function(e){var t;!(function(e){e.escape=window.escape,e.unescape=window.unescape})(t=e.Deprecated||(e.Deprecated={}));var r;!(function(e){function t(e){}e.deprecated=t})(r=e.API||(e.API={}))})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){function t(e){void 0===e&&(e=1);var t,r;try{throw new Error}catch(n){t=n.stack,null!=t&&(r=t.split("\n"),r.splice(1,e),t=r.join("\n"))}return t}var r;!(function(e){function r(e){return{name:"argumentNull",argument:e,message:"Argument was null",stack:a()}}function n(e){return{name:"argumentUndefined",argument:e,message:"Argument was undefined",stack:a()}}function i(e){return{name:"argumentOutOfRange",argument:e,message:"Argument was out of range",stack:a()}}function o(e){return{name:"notImplementedException",message:e,stack:a()}}function a(){return t(2)}e.argumentNull=r,e.argumentUndefined=n,e.argumentOutOfRange=i,e.notImplementedException=o})(r=e.Errors||(e.Errors={})),e.getStackTrace=t})(jsCommon||(jsCommon={})),$.fn.multiline=function(e){return this.text(e),this.html(this.html().replace(/\n/g,"<br/>")),this},$.fn.togglePanelControl=function(){return this.each((function(){$(this).addClass("ui-accordion ui-accordion-icons ui-widget ui-helper-reset").find(".accordionHeader").addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-top ui-corner-bottom").hover((function(){$(this).toggleClass("ui-state-hover")})).prepend('<span class="ui-icon ui-icon-triangle-1-e"></span>').click((function(){return $(this).toggleClass("ui-accordion-header-active ui-state-active ui-state-default ui-corner-bottom").find("> .ui-icon").toggleClass("ui-icon-triangle-1-e ui-icon-triangle-1-s").end().next().slideToggle(),!1})).next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide()}))};var jsCommon;!(function(e){var t;!(function(e){e.VisibleSelector=":visible"})(t=e.JQueryConstants||(e.JQueryConstants={}))})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){var t=(function(){function e(e){this.factoryMethod=e}return e.prototype.getValue=function(){return null!==this.factoryMethod&&(this.value=this.factoryMethod(),this.factoryMethod=null),this.value},e})();e.Lazy=t})(jsCommon||(jsCommon={}));var powerbi;!(function(e){var t;!(function(e){function t(e,t){function r(){}r.prototype=e;var n=new r;return t&&t(n),n}function r(e){var r=Object.getPrototypeOf(e);return r!==Object.prototype&&r!==Array.prototype||(e=t(e)),e}function n(e,r){if(e){for(var n,i=0,o=e.length;i<o;i++){var a=r(e[i]);a&&(n||(n=t(e)),n[i]=a)}return n}}e.inherit=t,e.inheritSingle=r,e.overrideArray=n})(t=e.Prototype||(e.Prototype={}))})(powerbi||(powerbi={}));var jsCommon;!(function(e){var t;!(function(e){function t(e,t,r){switch(t){case"m":t="M";break;case"O":case"o":t="yyyy'-'MM'-'dd'T'HH':'mm':'ss'.'fff'0000'";break;case"R":case"r":e=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t="ddd, dd MMM yyyy HH':'mm':'ss 'GMT'";break;case"s":t="S";break;case"u":e=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t="yyyy'-'MM'-'dd HH':'mm':'ss'Z'";break;case"U":e=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t="F";break;case"y":case"Y":switch(r){case"default":case"en":case"en-US":t="MMMM, yyyy";break;default:t="Y"}}return{value:e,format:t}}function r(e){if(e=e.replace(/%K/g,"zzz"),e=e.replace(/K/g,"zzz"),e=e.replace(/fffffff/g,"fff0000"),e=e.replace(/ffffff/g,"fff000"),e=e.replace(/fffff/g,"fff00"),e=e.replace(/ffff/g,"fff0"),e=e.replace(/yyyyy/g,"0yyyy"),e=e.replace(/(^y|^)yyy(^y|$)/g,"yyyy"),n||(n=["d","f","F","g","h","H","K","m","M","s","t","y","z",":","/"].map((function(e){return{r:new RegExp("%"+e+"(?!"+e+")","g"),s:e}}))),e.indexOf("%")!==-1&&e.length>2)for(var t=0;t<n.length;t++)e=e.replace(n[t].r,n[t].s);return e}var n;e.findDateFormat=t,e.fixDateTimeFormat=r})(t=e.Formatting||(e.Formatting={}))})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){var t;!(function(e){e[e.OK=200]="OK",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.Forbidden=403]="Forbidden",e[e.RequestEntityTooLarge=413]="RequestEntityTooLarge"})(t=e.HttpStatusCode||(e.HttpStatusCode={}));var r;!(function(e){e.ApplicationOctetStream="application/octet-stream",e.MultiPartFormData="multipart/form-data"})(r=e.HttpConstants||(e.HttpConstants={}));var n;!(function(e){function t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0];if(u(r))return r;for(var n=0;n<e.length-1;n++){var i=new RegExp("\\{"+n+"\\}","gm");r=r.replace(i,e[n+1])}return r}function r(t,r){return e.normalizeCase(t)===e.normalizeCase(r)}function n(t,r){var n=e.normalizeCase(r);return 0===e.normalizeCase(t).indexOf(n)}function o(e,t){return null!=e&&e.indexOf(t)!==-1}function a(e,t){return null!=e&&o(s(e),s(t))}function s(t){return i.throwIfNullOrUndefined(t,e,"normalizeCase","value"),t.toUpperCase()}function u(e){return _.isEmpty(e)||_.isEmpty(e.trim())}function g(e){i.throwIfNullOrUndefined(e,i,"containsWhitespace","str");var t=/\s/;return t.test(e)}function l(e){return""===_.trim(e)}function c(e){return i.throwIfNullOrUndefined(e,i,"trimTrailingWhitespace","str"),e.replace(/\s+$/,"")}function f(e){return i.throwIfNullOrUndefined(e,i,"trimWhitespace","str"),e.replace(/^\s+/,"").replace(/\s+$/,"")}function h(e,t,r){if(!t)return e;var n=v(t);return e.replace(new RegExp(n,"gi"),r)}function d(e){for(var t={},r=0,n=e;r<n.length;r++){var i=n[r];t[i]=!1}for(var o=[],a=0,s=e;a<s.length;a++){var u=s[a],g=u;if(t[g])for(var l=0;void 0!==t[g];)g=u+"."+ ++l;o.push(g),t[g]=!0}return o}function p(e,t){for(var r=0,n=t;e[n];)n=t+ ++r;return n}function m(e,t,r){for(var n,i=[],o=0,a=0,s=e;a<s.length;a++){var u=s[a];if(o+u.length>r&&i.length>0){n=!0;break}i.push(u),o+=u.length}var g=" "+t+" ",l=i.join(g);return n&&(l+=g+"..."),l}function y(t,r,n){if(!t||0===t.length)return"";null!==n&&void 0!==n||(n=Number.MAX_VALUE);for(var i=Math.min(n,t.length),o=[],a=0;a<2;a++)for(var s="{"+a+"}",u="_|_<"+a+">_|_",g=0;g<i;g++)t[g].indexOf(s)>-1&&(t[g]=t[g].replace(s,u),o.push({targetValue:s,replaceValue:u}));for(var l="",g=0;g<i;g++)l=0===g?t[g]:e.format(r.get("FilterRestatement_Comma"),l,t[g]);for(var g=0;g<o.length;g++)l=l.replace(o[g].replaceValue,o[g].targetValue);return l}function v(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1")}function S(e){return e.replace(/[\<\>\:"\/\\\|\?*]/g,"")}function C(e){return JSON.stringify(e)}function w(e,t){var r=e.replace(/^[^A-Za-z]*/g,"").replace(/[ :\.\/\\\-\u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000]/g,"_").replace(/[\W]/g,"");return r.length>0?r:t}function b(e){return e.replace(x,"")}function E(e,t){if(void 0===t&&(t=!1),!e)return e;var r=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;").replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,(function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(r-56320)+65536)+";"})).replace(/([^!-~ ])/g,(function(e){return"&#"+e.charCodeAt(0)+";"}));return t&&(r=r.replace(/\ /g,"&nbsp;")),r}var x=new RegExp("[<>]","g");e.format=t,e.equalIgnoreCase=r,e.startsWithIgnoreCase=n,e.contains=o,e.containsIgnoreCase=a,e.normalizeCase=s,e.isNullOrUndefinedOrWhiteSpaceString=u,e.containsWhitespace=g,e.isWhitespace=l,e.trimTrailingWhitespace=c,e.trimWhitespace=f,e.replaceAll=h,e.ensureUniqueNames=d,e.findUniqueName=p,e.constructNameFromList=m,e.constructCommaSeparatedList=y,e.escapeStringForRegex=v,e.normalizeFileName=S,e.stringifyAsPrettyJSON=C,e.deriveClsCompliantName=w,e.stripTagDelimiters=b,e.encodeHtml=E})(n=e.StringExtensions||(e.StringExtensions={}));var i=(function(){function t(){}return t.throwIfNullOrUndefined=function(r,n,i,o){null===r?t.throwException(e.Errors.argumentNull(t.getComponentName(n)+i+"."+o)):void 0===r&&t.throwException(e.Errors.argumentUndefined(t.getComponentName(n)+i+"."+o))},t.throwIfNullOrEmptyString=function(r,n,i,o){t.throwIfNullOrUndefined(r,n,i,o),r.length<1&&t.throwException(e.Errors.argumentOutOfRange(t.getComponentName(n)+i+"."+o))},t.valueOrDefault=function(e,t){return null!=e?e:t},t.urlCombine=function(e,r){if(t.throwIfNullOrUndefined(e,null,"urlCombine","baseUrl"),t.throwIfNullOrUndefined(r,null,"urlCombine","path"),n.isNullOrUndefinedOrWhiteSpaceString(r))return e;if(n.isNullOrUndefinedOrWhiteSpaceString(e))return r;var i=e;return"/"===i.charAt(i.length-1)?"/"===r.charAt(0)&&(r=r.slice(1)):"/"!==r.charAt(0)&&(r="/"+r),i+r},t.getAbsoluteUri=function(e){t.throwIfNullOrUndefined(e,null,"getAbsoluteUri","path");var r=e;return r&&r.indexOf("http")===-1&&(r=t.urlCombine(clusterUri,r)),r},t.getStaticResourceUri=function(r){t.throwIfNullOrUndefined(r,null,"getStaticResourceUri","path");var n=r;return n&&n.indexOf("http")===-1&&(n=e.Utility.urlCombine(t.staticContentLocation,n)),n},t.getComponentName=function(e){return e?(typeof e).toString()+".":""},t.throwException=function(t){throw e.Trace.error("Throwing exception: "+JSON.stringify(t),null==t.stack),t},t.createClassSelector=function(e){return t.throwIfNullOrEmptyString(e,null,"CreateClassSelector","className"),"."+e},t.createIdSelector=function(e){return t.throwIfNullOrEmptyString(e,null,"CreateIdSelector","id"),"#"+e},t.generateGuid=function(){var e="",t=0;for(t=0;t<32;t+=1){var r=16*Math.random()|0;switch(t){case 8:case 12:case 16:case 20:e+="-"}e+=r.toString(16)}return e},t.getCookieValue=function(e){for(var t=document.cookie.split(";"),r=0;r<t.length;r++){var n=t[r],i=n.split("=");if(i.length>0&&i[0].trim()===e)return n.substr(n.indexOf("=")+1)}return null},t.getDomainForUrl=function(e){var r=t.getHrefObjectFromUrl(e);return r.prop("protocol")+"//"+r.prop("hostname")},t.getHostNameForUrl=function(e){var r=t.getHrefObjectFromUrl(e);return t.urlCombine(r.prop("hostname"),r.prop("pathname"))},t.getUrlWithoutQueryString=function(e){var r=t.getHrefObjectFromUrl(e);return r.prop("protocol")+"//"+t.urlCombine(r.prop("host"),r.prop("pathname"))},t.getProtocolFromUrl=function(e){return t.getHrefObjectFromUrl(e).prop("protocol").replace(":","")},t.getHrefObjectFromUrl=function(e){var t=$("<a>");return t=t.prop("href",e)},t.getDateFromWcfJsonString=function(e,t){if(_.isEmpty(e))return null;var r=e.indexOf("("),n=e.indexOf(")");if(r!==-1&&n!==-1){var i=parseInt(e.substring(r+1,n),10);if(isNaN(i)&&(i=0),t)return new Date(i);var o=new Date(0);return o.setUTCMilliseconds(i),o}return null},t.isValidImageDataUrl=function(e){var t=new RegExp("data:(image/(png|jpg|jpeg|gif|svg))");return t.test(e)},t.isLocalUrl=function(e){return _.startsWith(e,"data:")||_.startsWith(e,"blob:")},t.extractFileNameFromPath=function(e){return e.replace(/^.*[\\\/]/,"")},t.canUseClipboard=function(){return"undefined"==typeof MSApp},t.is64BitOperatingSystem=function(){return navigator.userAgent.indexOf("WOW64")!==-1||navigator.userAgent.indexOf("Win64")!==-1},t.parseNumber=function(e,t){if(null===e)return null;if(void 0===e)return t;var r=Number(e);return isFinite(r)?r:isNaN(r)&&"number"!=typeof e&&"NaN"!==e?t:r},t.getURLParamValue=function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==t?null:t[1]||0},t.getLocalTimeZoneString=function(){var e,t=new Date(Date.UTC(2005,6,30,0,0,0,0)),r=-1*t.getTimezoneOffset(),n=new Date(Date.UTC(2005,12,30,0,0,0,0)),i=-1*n.getTimezoneOffset();return e=-720===r&&-720===i?"Dateline Standard Time":-660===r&&-660===i?"UTC-11":-660===r&&-660===i?"Samoa Standard Time":-600===r&&-600===i?"Hawaiian Standard Time":-480===r&&-540===i?"Alaskan Standard Time":-420===r&&-480===i?"Pacific Standard Time":-420===r&&-420===i?"US Mountain Standard Time":-360===r&&-420===i?"Mountain Standard Time":-360===r&&-360===i?"Central America Standard Time":-300===r&&-360===i?"Central Standard Time":-300===r&&-300===i?"SA Pacific Standard Time":-240===r&&-300===i?"Eastern Standard Time":-270===r&&-270===i?"Venezuela Standard Time":-240===r&&-240===i?"SA Western Standard Time":-240===r&&-180===i?"Central Brazilian Standard Time":-180===r&&-240===i?"Atlantic Standard Time":-180===r&&-180===i?"Montevideo Standard Time":-180===r&&-120===i?"E. South America Standard Time":-150===r&&-210===i?"Mid-Atlantic Standard Time":-120===r&&-120===i?"SA Eastern Standard Time":0===r&&0===i?"UTC":60===r&&0===i?"GMT Standard Time":60===r&&120===i?"Namibia Standard Time":120===r&&60===i?"Romance Standard Time":120===r&&120===i?"South Africa Standard Time":180===r&&120===i?"GTB Standard Time":180===r&&180===i?"E. Africa Standard Time":240===r&&180===i?"Russian Standard Time":240===r&&240===i?"Arabian Standard Time":270===r&&210===i?"Iran Standard Time":270===r&&270===i?"Afghanistan Standard Time":300===r&&240===i?"Pakistan Standard Time":300===r&&300===i?"West Asia Standard Time":330===r&&330===i?"India Standard Time":345===r&&345===i?"Nepal Standard Time":360===r&&300===i?"N. Central Asia Standard Time":360===r&&360===i?"Central Asia Standard Time":390===r&&390===i?"Myanmar Standard Time":420===r&&360===i?"North Asia Standard Time":420===r&&420===i?"SE Asia Standard Time":480===r&&420===i?"North Asia East Standard Time":480===r&&480===i?"China Standard Time":540===r&&480===i?"Yakutsk Standard Time":540===r&&540===i?"Tokyo Standard Time":570===r&&570===i?"Cen. Australia Standard Time":600===r&&600===i?"E. Australia Standard Time":600===r&&660===i?"AUS Eastern Standard Time":660===r&&600===i?"Tasmania Standard Time":660===r&&660===i?"West Pacific Standard Time":690===r&&690===i?"Central Pacific Standard Time":720===r&&660===i?"Magadan Standard Time":720===r&&720===i?"Fiji Standard Time":720===r&&780===i?"New Zealand Standard Time":780===r&&780===i?"Tonga Standard Time":"UTC"},t})();i.JsonContentType="application/json",i.JpegContentType="image/jpeg",i.BlobDataType="blob",i.ArrayBufferDataType="arraybuffer",i.HttpAcceptHeader="Accept",i.staticContentLocation=window.location.protocol+"//"+window.location.host,e.Utility=i;var o=(function(){function e(){}return e.compareVersions=function(e,t){for(var r=e.split(".").map(parseFloat),n=t.split(".").map(parseFloat),i=Math.max(r.length,n.length),o=0;o<i;o++){var a=r[o]||0,s=n[o]||0;if(a>s)return 1;if(a<s)return-1}return 0},e})();e.VersionUtility=o;var a;!(function(e){function t(e){var t=window.performance;if(!t||!t.mark)return _.noop;console.time;var r="Begin "+e;return t.mark(r),function(){var n="End "+e;t.mark(n),t.measure&&t.measure(e,r,n),console.timeEnd}}e.start=t})(a=e.PerfTimer||(e.PerfTimer={}));var s;!(function(e){function t(e){var t,r,n;return window.requestAnimationFrame||(window.requestAnimationFrame=function(e){return setTimeout(e,20)}),function(){t||(t=!0,r=arguments,n=this,window.requestAnimationFrame((function(){t=!1,e.apply(n,r)})))}}e.deferUntilNextFrame=t})(s=e.DeferUtility||(e.DeferUtility={}))})(jsCommon||(jsCommon={}));var powerbi;!(function(e){function t(e,t,r,n){return new a(e,t,r,n)}function r(e,t,r,n){if(e.defined(r))return void n.resolve(e(r));var i=o.start("moduleLoader.require('"+r+"')"),a=(new Date).toISOString();e([r],(function(){t(r,void 0,a,(new Date).toISOString()),i(),n.resolve(arguments[0])}),(function(e){t(r,e.requireType,a,(new Date).toISOString()),i(),n.reject(e)}))}function n(e,t){if(t)for(var r=0,n=t;r<n.length;r++){var o=n[r];o=e[o]||o,_.endsWith(o,".css")||(o+=".css"),c.indexOf(o)===-1&&(c.push(o),i(o))}}function i(e){var t=l.cloneNode();t.href=e,g?u.insertBefore(t,g):u.appendChild(t)}var o=jsCommon.PerfTimer;e.createModuleLoader=t;var a=(function(){function e(e,t,r,n){this.promiseFactory=e,this.telemetry=t,this.rjs=n||window.require,r?(this.rjs.config(r),this.cssPaths=r.cssPaths):this.cssPaths={}}return e.prototype.require=function(e){var t=this.promiseFactory.defer();return n(this.cssPaths,e.css),r(this.rjs,this.telemetry,e.javascript,t),t.promise},e})(),s=document,u=s.head,g=u.getElementsByTagName("script")[0],l=s.createElement("link"),c=[];l.setAttribute("rel","stylesheet")})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(){return new n}e.createJQueryPromiseFactory=t;var r;!(function(e){e[e.pending=0]="pending",e[e.resolved=1]="resolved",e[e.rejected=2]="rejected"})(r=e.JQueryPromiseState||(e.JQueryPromiseState={}));var n=(function(){function e(){}return e.prototype.defer=function(){return new i($.Deferred())},e.prototype.reject=function(e){var t=this.defer();return t.reject(e),t.promise},e.prototype.resolve=function(e){var t=this.defer();return t.resolve(e),t.promise},e.prototype.all=function(e){var t=jQuery.map(e,(function(e){return e&&e.promise?e.promise:e}));return new o($.when.apply($,t).then((function(){return Array.prototype.slice.call(arguments)})))},e.prototype.allSettled=function(e){var t=this.defer(),r=e.length;if(r>0)for(var n=0,i=[],o=function(o){e[o].then((function(e){i[o]={value:e,type:0}})).catch((function(e){i[o]={value:e,type:1}})).finally((function(){n++,n===r&&t.resolve(i)}))},a=0;a<r;a++)o(a);else t.resolve([]);return t.promise},e.prototype.when=function(e){var t=e&&e.promise?e.promise:e;return new o($.when(t))},e})(),i=(function(){function e(e){this.deferred=e,this.promise=new o(e.promise())}return e.prototype.resolve=function(e){this.deferred.resolve(e)},e.prototype.reject=function(e){this.deferred.reject(e)},e})(),o=(function(){function e(e){this.promise=e}return e.prototype.then=function(t,r){return new e(this.promise.then(e.wrapCallback(t),e.wrapCallback(r)))},e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(t){return this.promise.always(e.wrapCallback(t)),this},e.wrapCallback=function(t){return t?function(){var r=t.apply(this,arguments);return r instanceof e?r.promise:r}:t},e})()})(powerbi||(powerbi={}));var powerbi;!(function(e){var t=(function(){function e(){}return e.prototype.getData=function(e){try{if(localStorage){var t=localStorage[e];if(t)return JSON.parse(t)}}catch(e){}return null},e.prototype.setData=function(e,t){try{localStorage&&(localStorage[e]=JSON.stringify(t))}catch(e){}},e})(),r=(function(){function e(t){this.cache={},this.clearCacheInterval=null!=t?t:e.defaultClearCacheInterval,this.clearCache()}return e.prototype.getData=function(e){return this.cache[e]},e.prototype.setData=function(e,t){var r=this;this.cache[e]=t,null==this.clearCacheTimerId&&(this.clearCacheTimerId=setTimeout((function(){return r.clearCache()}),this.clearCacheInterval))},e.prototype.clearCache=function(){this.cache={},this.clearCacheTimerId=void 0},e})();r.defaultClearCacheInterval=864e5,e.EphemeralStorageService=r,e.localStorageService=new t,e.ephemeralStorageService=new r})(powerbi||(powerbi={}));var powerbi;!(function(e){var t=(function(){function e(){this.timeoutHandles={},this.animationFrameHandles={}}return e.prototype.scheduleTimeoutTask=function(e,t){var r=this,n=setTimeout((function(){e(),r.removeTimeoutTask(n)}),t);this.timeoutHandles[n]=n},e.prototype.scheduleAnimationFrameTask=function(e){var t=this,r=requestAnimationFrame((function(){e(),t.removeAnimationFrameTask(r)}));this.animationFrameHandles[r]=r},e.prototype.removeTimeoutTask=function(e){delete this.timeoutHandles[e],this.checkOnIdle()},e.prototype.removeAnimationFrameTask=function(e){delete this.animationFrameHandles[e],this.checkOnIdle()},e.prototype.clear=function(){for(var e in this.timeoutHandles)clearTimeout(this.timeoutHandles[e]);this.timeoutHandles={};for(var e in this.animationFrameHandles)cancelAnimationFrame(this.animationFrameHandles[e]);this.animationFrameHandles={}},e.prototype.checkOnIdle=function(){this.onIdle&&_.isEmpty(this.timeoutHandles)&&_.isEmpty(this.animationFrameHandles)&&this.onIdle()},e})();e.WorkScheduler=t})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e){return e&&_.isFunction(e.then)}var r=(function(){function r(e){var t=this;this.defer=r.ensureFactory().defer(),e((function(e){return t.onResolve(e)}),(function(e){return t.onReject(e)}))}return r.prototype.then=function(e,t){return this.defer.promise.then(e,t)},r.prototype.catch=function(e){return this.defer.promise.catch(e)},r.prototype.finally=function(e){return this.defer.promise.finally(e)},r.init=function(e,t){r.factory=e,r.exceptions=t},r.ensureFactory=function(){var t=r.factory;return t||(t=r.factory=e.createJQueryPromiseFactory()),t},r.prototype.onResolve=function(e){var r=this;t(e)?e.then((function(e){return r.onResolve(e)}),(function(e){return r.onReject(e)})):this.defer.resolve(e)},r.prototype.onReject=function(e){if(e instanceof Error&&!e.suppressExceptionHandler){var t=r.exceptions;t&&(e.suppressExceptionHandler=!0,t(e))}this.defer.reject(e)},r})();e.Promise=r})(powerbi||(powerbi={}));var jsCommon;!(function(e){var t;!(function(e){function t(e,t,r){if(r){for(var i=e-1;i>-1;i--)if(n(t[i]))return i+1}else for(var i=e,o=t.length;i<o;i++)if(n(t[i]))return i;return r?0:t.length}function r(e,r){var n={start:0,end:0};return 0===r.length?n:(n.start=t(e,r,!0),n.end=t(e,r,!1),n)}function n(e){return f.lastIndex=0,f.test(e)}function i(e){var t=1;for(f.lastIndex=0,f.exec(e);0!==f.lastIndex;)t++,f.exec(e);return t}function o(e,t,r){for(var n=a(e),i=0,o=0,s=n;o<s.length;o++){var u=s[o];r.text=u,i=Math.max(i,t(r))}return i}function a(e){return e.split(f)}function s(e,t,r){return t.text=e,r(t)}function u(e,t,r,n){return t.text=e,r(t,n)}function g(e,t,r,n,i,o,g){i<1&&(i=Number.POSITIVE_INFINITY),o=o?o:function(e,t){return e.text};for(var f=s(c,t,r),h=new d,p=a(e),m=0,y=p;m<y.length;m++){var v=y[m],S=s(v,t,r),C=S,w=h.getLastLine().isEmpty();if(w||(C+=f),h.getLastLineWidth()+C<=n||h.count>=i)h.addWord(v,C);else if(w||h.newLine(),S<=n)h.addWord(v,S);else{var b=i-h.count;if(!g||b<=0)h.addWord(v,S);else for(var E=l(v,t,r,n,b+1),x=0,T=E.chunks.length;x<T;x++){var P=E.chunks[x];x<T-1?(h.addWord(P,n),h.newLine()):h.addWord(P,E.lastChunkWidth)}}}var I=_.map(h.getLines(),(function(e){return e.getWidth()>n?u(e.toString(),t,o,n):e.toString()}));return I}function l(e,t,r,n,i){var o={chunks:[],lastChunkWidth:0};if(i<1)return o;for(var a=e.length,u=o.chunks,g="",l=0;l<a;l++){var c=i-u.length,f=e.charAt(l),h=g+f,d=s(h,t,r);d<=n||_.isEmpty(g)||c<=1?(g=h,o.lastChunkWidth=d):(u.push(g),g=f,o.lastChunkWidth=s(f,t,r))}return _.isEmpty(g)||u.push(g),o}var c=" ",f=/[\s\n]+/g;e.find=r,e.hasBreakers=n,e.wordCount=i,e.getMaxWordWidth=o;var h=(function(){function e(){this.words=[],this.width=0}return e.prototype.getWidth=function(){return this.width},e.prototype.addWord=function(e,t){this.words.push(e),this.width+=t},e.prototype.toString=function(){return this.words.join(c)},e.prototype.isEmpty=function(){return _.isEmpty(this.words)},e})(),d=(function(){function e(){this.lastLine=new h,this.lines=[this.lastLine]}return e.prototype.newLine=function(){var e=this.lastLine;return this.lastLine=new h,this.lines.push(this.lastLine),e},Object.defineProperty(e.prototype,"count",{get:function(){return this.lines.length},enumerable:!0,configurable:!0}),e.prototype.getLastLine=function(){return this.lastLine},e.prototype.getLastLineWidth=function(){return this.getLastLine().getWidth()},e.prototype.addWord=function(e,t){this.lastLine.addWord(e,t)},e.prototype.getLines=function(){return this.lines},e})();e.splitByWidth=g,e.splitWordByWidth=l})(t=e.WordBreaker||(e.WordBreaker={}))})(jsCommon||(jsCommon={}));var powerbi;!(function(e){var t;!(function(t){function r(){if(!v){v=$("<span/>"),$("body").append(v),S=d3.select($("body").get(0)).append("svg").style({height:"0px",width:"0px",position:"absolute"}).append("text"),C=$("<canvas/>").get(0).getContext("2d");var e=window.getComputedStyle(S.node());w=e?e.fontFamily:""}}function n(){v&&v.remove&&v.remove(),v=null}function i(e,t){return r(),C.font=(e.fontStyle||"")+" "+(e.fontVariant||"")+" "+(e.fontWeight||"")+" "+e.fontSize+" "+(e.fontFamily||w),C.measureText(t||e.text).width}function o(t,n){return r(),S.style(null),S.text(n||t.text).attr({visibility:"hidden","font-family":t.fontFamily||w,"font-variant":t.fontVariant,"font-size":t.fontSize,"font-weight":t.fontWeight,"font-style":t.fontStyle,"white-space":t.whiteSpace||"nowrap"}),e.visuals.SVGUtil.tryGetBBox(S.node())}function a(e,t){var r=o(e,t);return r?r.height:0}function s(r){var n=r.fontFamily+r.fontSize,i=e.ephemeralStorageService.getData(n);if(null==i){var o={fontFamily:r.fontFamily,fontSize:r.fontSize,text:"M"};i=t.measureSvgTextRect(o),i.height>0&&e.ephemeralStorageService.setData(n,i)}return i}function u(e){var t=s(e);return t.y+t.height}function g(e,t){void 0===t&&(t=!1);var r=s(e).height;return t&&(r*=.7),r}function l(e){return i(f(e))}function c(e){return{text:e.val()||e.text(),fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontWeight:e.css("font-weight"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),whiteSpace:e.css("white-space")}}function f(e){var t=window.getComputedStyle(e,null);return t?{text:e.textContent,fontFamily:t.fontFamily,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontVariant:t.fontVariant,whiteSpace:t.whiteSpace}:{text:e.textContent,fontFamily:"",fontSize:"0"}}function h(e){var t=getComputedStyle(e[0]);return t?t.width:"0"}function d(e,t){r();var n=e.text;if(0===n.length)return n;C.font=(e.fontStyle||"")+" "+(e.fontVariant||"")+" "+(e.fontWeight||"")+" "+e.fontSize+" "+(e.fontFamily||w);var i=C.measureText(n).width;if(i<=t)return n;n=b+n;for(var o=1,a=n.length;o<a;){var s=o+a>>1;i=C.measureText(n.substr(0,s)).width,t>i?o=s+1:t<i?a=s-1:(o=s,a=s)}return i=C.measureText(n.substr(0,o)).width,i>t&&o--,n.substr(b.length,o-b.length)+b}function p(e,t){var r=f(e),n=r.text,i=d(r,t);n!==i&&(e.textContent=i)}function m(e,t,r,n){void 0===n&&(n=0),jsCommon.API.deprecated("powerbi.TextMeasurementService.wordBreak is deprecated. Use powerbi.visuals.TextUtil.wordBreak instead");var o=f(e),a=g(o)+n,s=Math.max(1,Math.floor(r/a)),u=d3.select(e),l=u.attr("y"),c=e.textContent;e.textContent=null;for(var h=jsCommon.WordBreaker.splitByWidth(c,o,i,t,s),p=0,m=h.length;p<m;p++)o.text=h[p],u.append("tspan").attr({x:0,dy:0===p?l:a}).text(d(o,t))}function y(e,t,r,n){void 0===n&&(n=0);var o=f(e),a=g(o)+n,s=Math.max(1,Math.floor(r/a)),u=e.textContent;e.textContent=null;var l=jsCommon.WordBreaker.splitByWidth(u,o,i,t,s),c=d3.select(e).selectAll(E.selector).data(l,(function(e){return $.inArray(e,l)}));c.enter().append("span").classed(E.class,!0).text((function(e){return e})).style("width",jsCommon.PixelConverter.toString(t))}var v,S,C,w,b="",E=jsCommon.CssConstants.createClassAndSelector("overflowingText");t.removeSpanElement=n,t.measureSvgTextWidth=i,t.measureSvgTextRect=o,t.measureSvgTextHeight=a,t.estimateSvgTextBaselineDelta=u,t.estimateSvgTextHeight=g,t.measureSvgTextElementWidth=l,
t.getMeasurementProperties=c,t.getSvgMeasurementProperties=f,t.getDivElementWidth=h,t.getTailoredTextOrDefault=d,t.svgEllipsis=p,t.wordBreak=m,t.wordBreakOverflowingText=y})(t=e.TextMeasurementService||(e.TextMeasurementService={}))})(powerbi||(powerbi={}));var jsCommon;!(function(e){var t;e.DOMConstants;!(function(e){function t(e){return 40===e||38===e||37===e||39===e}function r(e){return 65===e||67===e||88===e||86===e||90===e||89===e}function n(e){return 16===e}function i(e){return 46===e}e.isArrowKey=t,e.isCtrlShortcutKey=r,e.isNudgeModifierKey=n,e.isDeleteKey=i})(t=e.KeyUtils||(e.KeyUtils={}))})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){var t=(function(){function e(){}return e.prototype.create=function(e){var t=$.Deferred();return window.setTimeout((function(){return t.resolve()}),e),t},e})();t.instance=new t,e.TimerPromiseFactory=t})(jsCommon||(jsCommon={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(){var e="touchstart";return window.PointerEvent&&(e="pointerdown"),e}function r(){var e="touchend";return window.PointerEvent&&(e="pointerup"),e}function n(){var e=t();return"pointerdown"===e||"MSPointerDown"===e}e.touchStartEventName=t,e.touchEndEventName=r,e.usePointerEvents=n})(t=e.TouchUtils||(e.TouchUtils={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var jsCommon;!(function(e){var t;!(function(e){function t(e){var t=_.lastIndexOf(e,".");return t>=0?e.substr(t+1):""}function r(e){var t=_.lastIndexOf(e,".");return t>=0?e.substr(0,t):e}e.getFileExtension=t,e.getFileWithoutExtension=r})(t=e.FileUtils||(e.FileUtils={}))})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){var t;!(function(e){function t(e,t){if(_.isEmpty(e))return!1;var r=$._data(e[0],"events");return!!r&&r.hasOwnProperty(t)}e.hasEventHandler=t})(t=e.DomEventUtils||(e.DomEventUtils={}))})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){var t=(function(){function e(e,t,r,n){this.text=e,this.type=t,this.sessionId=r,this.requestId=n,this.timeStamp=new Date}return e.prototype.toString=function(){var t="";return t+=e.traceTypeStrings[this.type]+" ("+this.timeStamp.toUTCString()+"): "+this.text,this.requestId&&(t+="\n(Request id: "+this.requestId+")"),t},e})();t.traceTypeStrings=["INFORMATION","VERBOSE","WARNING","ERROR","EXPECTEDERROR","UNEXPECTEDERROR","FATAL"],e.TraceItem=t})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){var t,r=e.Deprecated;!(function(e){function t(e){if(_.isEmpty(e))return!1;switch(v(e)){case T.http:case T.https:return!0;default:return!1}}function n(e){return t(e)}function i(e){return e&&0===e.indexOf("data:")}function o(e){if(!i(e))throw new Error("Expected data uri");var t=";base64,",r=e.indexOf(t);if(r<0)throw new Error("Expected base 64 content in data url");var n=r+t.length;return e.substr(n,e.length-n)}function a(t,r){return"data:"+t+";base64,"+e.utoa(r)}function s(e){return a("application/json",e)}function u(e){return e?e.replace(/[^*+\-.\/0123456789@ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz]/g,(function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();switch(t.length){case 1:return"%0"+t;case 2:return"%"+t;case 3:return"%u0"+t;default:return"%u"+t}})):e}function g(e){return e?e.replace(/%([0-9a-fA-F]{2})|%u([0-9a-fA-F]{4})/g,(function(e,t,r){return String.fromCharCode(parseInt(t||r,16))})):e}function l(e){return E(encodeURIComponent(e))}function c(e){return decodeURIComponent(x(e))}function f(e){return btoa(l(e))}function h(e){return c(atob(e))}function d(e){var t=w(e);if(t)return b(t)}function p(e,t,r){void 0===r&&(r=!1);var n=m(e),i=n.baseUrl;return r&&_.assign(t,n.queryParameters),_.isEmpty(t)?i:i+="?"+_.chain(t).pairs().map((function(e){return e.join("=")})).value().join("&")}function m(e){var t=w(e),r=t?e.slice(0,e.lastIndexOf(t)):e;return{baseUrl:r,queryParameters:b(t)}}function y(e){var t=e.match(/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);if(t)return{scheme:t[1],host:t[2],path:t[3],query:t[4],fragment:t[5]}}function v(t){var r=e.parseUrl(t);if(null==r||null==r.scheme)return T.NONE;switch(r.scheme.toLowerCase()){case"http":return T.http;case"https":return T.https;case"file":return T.file;case"ftp":return T.ftp;case"mailto":return T.mailto;case"news":return T.news;case"telnet":return T.telnet;default:return T.NONE}}function S(e){var t=y(e);return t&&t.host}function C(e){return e?e.replace(P,""):e}function w(e){var t=document.createElement("a");return t.href=e,t.search}function b(e){if(!e)return null;_.startsWith(e,"?")&&(e=e.substring(1));for(var t=e.split("&"),r={},n=0,i=t;n<i.length;n++){var o=i[n],a=o.split("=");r[a[0]]=decodeURIComponent(a[1])}return r}e.isValidHttpUrl=t,e.isValidImageUrl=n,e.isDataUri=i,e.getBase64ContentFromDataUri=o,e.makeUTF8EncodedBase64DataUri=a,e.makeJsonDataUri=s,e.escapeSlow=u,e.unescapeSlow=g;var E=r.unescape||g,x=r.escape||u;e.encodeUTF8=l,e.decodeUTF8=c,e.utoa=f,e.atou=h,e.getQueryParameters=d,e.setQueryParameters=p,e.splitUrlAndQuery=m,e.parseUrl=y;var T;!(function(e){e[e.NONE=0]="NONE",e[e.http=1]="http",e[e.https=2]="https",e[e.file=3]="file",e[e.ftp=4]="ftp",e[e.mailto=5]="mailto",e[e.news=6]="news",e[e.telnet=7]="telnet"})(T=e.UrlScheme||(e.UrlScheme={})),e.getUrlScheme=v,e.getHost=S;var P=/https?:\/\/[^\/]+/i;e.getAbsolutePath=C})(t=e.UrlUtils||(e.UrlUtils={}))})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){var t;!(function(e){function t(){var e=window.navigator.vendor||"",t=window.navigator.userAgent.toLowerCase();return e.toLowerCase().indexOf("google")>-1&&t.indexOf("chrome")>-1&&t.indexOf("edge")===-1&&t.indexOf("opr")===-1}function r(){var e=window.navigator.userAgent.toLowerCase();return e.indexOf("msie")>-1||e.indexOf("trident")>-1||e.indexOf("edge")>-1}function n(){var e=0;if("Microsoft Internet Explorer"===navigator.appName||window.navigator.userAgent.indexOf("MSIE")>=0){var t=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})"),r=t.exec(window.navigator.userAgent);r&&(e=parseFloat(r[1]))}return e}function i(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}e.isChrome=t,e.isInternetExplorerOrEdge=r,e.getInternetExplorerVersion=n,e.isFirefox=i})(t=e.BrowserUtils||(e.BrowserUtils={}))})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){var t;!(function(e){function t(e,t){return(e&t)===t}function r(e,t){return e|=t}function n(e,t){return e&=~t}function i(e,t){return e[t]}function o(e){if(null===e||e%1!==0)return 0;for(var t=0,r=e;0!==r;)1===(1&r)&&t++,r>>>=1;return t}e.hasFlag=t,e.setFlag=r,e.resetFlag=n,e.toString=i,e.getBitCount=o})(t=e.EnumExtensions||(e.EnumExtensions={}));var r;!(function(e){function t(e,t){return(e||t)&&!(e&&t)}e.XOR=t})(r=e.LogicExtensions||(e.LogicExtensions={}));var n;!(function(e){function t(e,t){return e===t||JSON.stringify(e)===JSON.stringify(t)}e.equals=t})(n=e.JsonComparer||(e.JsonComparer={}));var i;!(function(e){function t(t){return(t-e.TextSizeMin)/r}e.TextSizeMin=8,e.TextSizeMax=40;var r=e.TextSizeMax-e.TextSizeMin;e.getScale=t})(i=e.TextSizeDefaults||(e.TextSizeDefaults={}));var o;!(function(e){function t(e){return e+o}function r(e){return t(n(e))}function n(t){return e.PxPtRatio*t}function i(t){return t/e.PxPtRatio}e.PxPtRatio=4/3;var o="px";e.toString=t,e.fromPoint=r,e.fromPointToPixel=n,e.toPoint=i})(o=e.PixelConverter||(e.PixelConverter={}));var a;!(function(e){function t(e,t,r){return e.lastIndex=r||0,e.exec(t)}e.run=t})(a=e.RegExpExtensions||(e.RegExpExtensions={}))})(jsCommon||(jsCommon={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(e){function t(e){var t=e.get(0).style,r=t.transform||t.webkitTransform;if(r){var n=r.match(/rotate\((-?\d+(?:\.\d*)?)deg\)/);if(n)return parseFloat(n[1])}return 0}function r(e){var t=e.get(0).style,r=t.transform||t.webkitTransform,n={x:0,y:0};if(r&&r.length>0){var i=r.match(/translate\((-?\d+(?:\.\d*)?)px, (-?\d+(?:\.\d*)?)px\)/);i&&(n.x=parseFloat(i[1]),n.y=parseFloat(i[2]))}return n}function n(e){if(e)return{left:parseFloat(e.css("padding-left"))||0,right:parseFloat(e.css("padding-right"))||0,top:parseFloat(e.css("padding-top"))||0,bottom:parseFloat(e.css("padding-bottom"))||0}}e.getRotateAngleFromElement=t,e.getTranslateTransformFromElement=r,e.getPadding=n})(t=e.StyleUtils||(e.StyleUtils={}))})(t=e.utility||(e.utility={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(e,t){return"translate("+e+","+t+")"}function r(e){return"translateX("+e+"px)"}function n(e,t){return"translate("+e+"px,"+t+"px)"}function i(e,t,r,n,i){return"translate("+e+","+t+") rotate("+i+","+r+","+n+")"}function o(e){return"scale("+e+")"}function a(e,t,r){return"translate("+e+","+t+") scale("+r+")"}function s(e,t){return e+" "+t}function u(){var e=Date.now;Date.now=function(){return 1/0},d3.timer.flush(),Date.now=e}function g(e){if(e){var t=e,r=e;r.animation&&(t=r.animation),t&&t.transitionImmediate&&u()}}function l(e){isNaN(e.x)&&(e.x=0),isNaN(e.y)&&(e.y=0)}function c(e){if(!e||0===e.length)return{x:"0",y:"0"};var t,r=e.split(/[\s,]+/),n="0",i=r[0];if(1===r.length)t=i.substring(10,i.length-1);else{var o=r[1];n=o.substring(0,o.length-1),t=i.substring(10,i.length)}return{x:t,y:n}}function f(e,t,r){var n="rotate("+r+" "+e/2+" "+t/2+")",i="M0 0";return i+="L0 "+t,i+="L"+e+" "+t/2+" Z",{path:i,transform:n}}function h(t){if(null!=t){var r=t.getBoundingClientRect(),n=e.tryGetBBox(t);if(n.height>0&&n.width>0)return{x:r.width/n.width,y:r.height/n.height}}return{x:1,y:1}}function d(e){var t;try{t=e.getBBox()}catch(e){}return t||p()}function p(){return{x:0,y:0,width:0,height:0}}e.AlmostZero=1e-6,e.translate=t,e.translateXWithPixels=r,e.translateWithPixels=n,e.translateAndRotate=i,e.scale=o,e.translateAndScale=a,e.transformOrigin=s,e.flushAllD3Transitions=u,e.flushAllD3TransitionsIfNeeded=g,e.ensureValidSVGPoint=l,e.parseTranslateTransform=c,e.createArrow=f,e.getTransformScaleRatios=h,e.tryGetBBox=d})(t=e.SVGUtil||(e.SVGUtil={}));var r=(function(){function e(e){this.scaleDetectorElement=e.append("rect").classed("scale-detector",!0).attr({width:1,height:1,"stroke-width":"0px",fill:"none"}).node()}return e.prototype.getScale=function(){var e=this.scaleDetectorElement.getBoundingClientRect(),r=t.tryGetBBox(this.scaleDetectorElement);return r.height>0&&r.width>0?{x:e.width/r.width,y:e.height/r.height}:{x:1,y:1}},e})();e.SVGScaleDetector=r})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var jsCommon;!(function(e){var t;!(function(e){function t(e){Object.freeze(e);for(var r=0,n=Object.getOwnPropertyNames(e);r<n.length;r++){var i=n[r],o=e[i];o&&"object"==typeof o&&t(o)}}e.deepFreeze=t})(t=e.FreezeUtility||(e.FreezeUtility={}))})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){var t=(function(){function t(){}return t.prototype.logTrace=function(t){if(window.DEBUG)switch(t.type){case e.TraceType.Information:break;case e.TraceType.UnexpectedError:case e.TraceType.Error:case e.TraceType.Fatal:break;case e.TraceType.ExpectedError:case e.TraceType.Warning:break;case e.TraceType.Verbose:}},t})();e.ConsoleTracer=t;var r;!(function(r){function n(t,r){h(new e.TraceItem(t,e.TraceType.Warning,r))}function i(t,r,n){r&&(t=e.StringExtensions.format("{0}.\nStack:\n{1}",t,e.getStackTrace())),h(new e.TraceItem(t,e.TraceType.Error,n))}function o(t,r){h(new e.TraceItem(t,e.TraceType.Verbose,r))}function a(e){v.push(e)}function s(e){var t=v.indexOf(e);t>=0&&v.splice(t,1)}function u(){v=new Array(y)}function g(){m=-1}function l(){if(!(m<0)){for(var e=new Array(m+1),t=0;t<=m;t++)e[t]=p[t];return e}}function c(){s(y)}function f(){a(y)}function h(e){m+1>=d&&g(),p[++m]=e;for(var t=0,r=v.length;t<r;t++)v[t].logTrace(e)}var d=1e3,p=new Array(d),m=-1,y=new t,v=new Array(y);r.warning=n,r.error=i,r.verbose=o,r.addListener=a,r.removeListener=s,r.resetListeners=u,r.reset=g,r.getTraces=l,r.disableDefaultListener=c,r.enableDefaultListener=f})(r=e.Trace||(e.Trace={}))})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){var t;!(function(e){e[e.Information=0]="Information",e[e.Verbose=1]="Verbose",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.ExpectedError=4]="ExpectedError",e[e.UnexpectedError=5]="UnexpectedError",e[e.Fatal=6]="Fatal"})(t=e.TraceType||(e.TraceType={}))})(jsCommon||(jsCommon={}));var powerbi;!(function(e){function t(e,t,r,i){if(n)return n.promise;r=jsCommon.UrlUtils.setQueryParameters(r,{onscriptload:"globalMapControlLoaded",callback:"globalMapControlLoaded"},!0);var o=r,a=jsCommon.UrlUtils.getQueryParameters(r),s=a.c||a.culture||i;if(!_.isEmpty(s)){var u=s.split("-",2),g={mkt:i||s,ur:u.length>1?u[1]:s,c:s};o=jsCommon.UrlUtils.setQueryParameters(r,g,!0)}return n=e.defer(),t.require({javascript:o}),n.promise}function r(){n.resolve(void 0)}var n;e.ensureMap=t,e.mapControlLoaded=r})(powerbi||(powerbi={})),window.globalMapControlLoaded=function(){powerbi.mapControlLoaded()};var InJs;!(function(e){var t;!(function(e){e[e.information=0]="information",e[e.verbose=1]="verbose",e[e.warning=2]="warning",e[e.error=3]="error",e[e.expectedError=4]="expectedError",e[e.unexpectedError=5]="unexpectedError",e[e.fatal=6]="fatal"})(t=e.TraceType||(e.TraceType={}))})(InJs||(InJs={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e,t){this.x=e||0,this.y=t||0}return e})();e.Point=t})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e,t,r,n){this.left=e||0,this.top=t||0,this.width=r||0,this.height=n||0}return e})();e.Rect=t})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r;!(function(t){var r=jsCommon.Utility,n=(function(){function e(e){this.polygonPoints=this.convertArrayPathToPoints(e)}return e.prototype.absoluteCentroid=function(){return null==this._absoluteCentroid&&(this._absoluteCentroid=this.calculatePolygonCentroid()),this._absoluteCentroid},e.prototype.absoluteBoundingRect=function(){return null==this._absoluteBoundingRect&&(this._absoluteBoundingRect=this.calculateBoundingRect()),this._absoluteBoundingRect},e.prototype.contains=function(e){var t={x:e.left,y:e.top},r={x:e.left+e.width,y:e.top},n={x:e.left,y:e.top+e.height},i={x:e.left+e.width,y:e.top+e.height};return this.inside(t)&&this.inside(r)&&this.inside(n)&&this.inside(i)},e.prototype.conflicts=function(e){if(!this.isConflictWithBoundingBox(e))return!1;var t={x:e.left,y:e.top},r={x:e.left+e.width/2,y:e.top},n={x:e.left+e.width,y:e.top},i={x:e.left,y:e.top+e.height},o={x:e.left+e.width/2,y:e.top+e.height},a={x:e.left+e.width,y:e.top+e.height},s={x:e.left,y:e.top+e.height/2},u={x:e.left+e.width,y:e.top+e.height/2};return this.inside(t)||this.inside(r)||this.inside(n)||this.inside(i)||this.inside(o)||this.inside(a)||this.inside(s)||this.inside(u)},e.prototype.lineIntersectionPoint=function(e,t){for(var r=0;r<this.polygonPoints.length;r++){var n=this.polygonPoints[r],i=r===this.polygonPoints.length-1?this.polygonPoints[0]:this.polygonPoints[r+1],o=this.getLineIntersection(e,t,n,i);if(null!==o)return o}return null},e.calculateAbsolutePolygonArea=function(e){var t,r=1,n=0;for(t=0;t<e.length;t++)n+=e[t].x*e[r].y-e[r].x*e[t].y,r=(r+1)%e.length;return n*=.5},e.prototype.isConflictWithBoundingBox=function(e){return a.isIntersecting(this.absoluteBoundingRect(),e)},e.prototype.calculatePolygonCentroid=function(){var t,r,n,i,o,a;for(t=e.calculateAbsolutePolygonArea(this.polygonPoints),n=i=0,a=1,o=0;o<this.polygonPoints.length;o++)r=this.polygonPoints[o].x*this.polygonPoints[a].y-this.polygonPoints[a].x*this.polygonPoints[o].y,n+=(this.polygonPoints[o].x+this.polygonPoints[a].x)*r,i+=(this.polygonPoints[o].y+this.polygonPoints[a].y)*r,a=(a+1)%this.polygonPoints.length;return n/=6*t,i/=6*t,{x:n,y:i}},e.prototype.calculateBoundingRect=function(){for(var e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,i=0;i<this.polygonPoints.length;i++)this.polygonPoints[i].x<e?e=this.polygonPoints[i].x:this.polygonPoints[i].x>r&&(r=this.polygonPoints[i].x),this.polygonPoints[i].y<t?t=this.polygonPoints[i].y:this.polygonPoints[i].y>n&&(n=this.polygonPoints[i].y);return{left:e,top:t,width:r-e,height:n-t}},e.prototype.inside=function(e){for(var t=e.x,r=e.y,n=!1,i=0,o=this.polygonPoints.length-1;i<this.polygonPoints.length;o=i++){var a=this.polygonPoints[i].x,s=this.polygonPoints[i].y,u=this.polygonPoints[o].x,g=this.polygonPoints[o].y,l=s>r!=g>r&&t<(u-a)*(r-s)/(g-s)+a;l&&(n=!n)}return n},e.prototype.getLineIntersection=function(e,t,r,n){var i=e.x,o=e.y,a=t.x,s=t.y,u=r.x,g=r.y,l=n.x,c=n.y,f=a-i,h=s-o,d=l-u,p=c-g,m=(-h*(i-u)+f*(o-g))/(-d*h+f*p),y=(d*(o-g)-p*(i-u))/(-d*h+f*p);return m>=0&&m<=1&&y>=0&&y<=1?{x:i+y*f,y:o+y*h}:null},e.prototype.convertArrayPathToPoints=function(e){for(var t=[],r=0;r<e.length;r+=2){var n=e[r],i=e[r+1],o={x:n,y:i};t.push(o)}return t},e})();t.Polygon=n;var i;!(function(t){function n(e,t,r){var n=e.x+t>=0?e.x+t:0,i=e.y+r>=0?e.y+r:0;return{x:n,y:i}}function i(e,t){return void 0!==e&&null!==e&&void 0!==t&&null!==t&&e.x===t.x&&e.y===t.y}function o(e){return null!==e?{x:e.x,y:e.y}:null}function a(e){return"{x:"+e.x+", y:"+e.y+"}"}function s(e){return e.x+","+e.y}function u(e,t){if(null===e||null===t)return null;var r=t.x-e.x,n=t.y-e.y;return Math.sqrt(r*r+n*n)}function g(t,r){return t===r||void 0!==t&&void 0!==r&&e.Double.equalWithPrecision(t.x,r.x)&&e.Double.equalWithPrecision(t.y,r.y)}function l(e,t){if(null===e)return void 0===t?null:t;if(void 0===e)return void 0===t?null:t;if(2===e.length)return{x:r.parseNumber(e[0]),y:r.parseNumber(e[1])};if("string"==typeof e){var n=e.split(",");return 2!==n.length?void 0===t?null:t:{x:r.parseNumber(n[0]),y:r.parseNumber(n[1])}}return 2!==e.length&&"string"!=typeof e?void 0===t?null:t:{x:r.parseNumber(e.x),y:r.parseNumber(e.y)}}t.offset=n,t.equals=i,t.clone=o,t.toString=a,t.serialize=s,t.getDistance=u,t.equalWithPrecision=g,t.parsePoint=l})(i=t.Point||(t.Point={}));var o;!(function(t){function n(e){return 0===e.width&&0===e.height}function i(e,t){return void 0!==e&&null!==e&&void 0!==t&&null!==t&&e.width===t.width&&e.height===t.height}function o(e){return null!==e?{width:e.width,height:e.height}:null}function a(e,t){var r=o(e);return t&&(r.width+=t.left+t.right,r.height+=t.top+t.bottom),r}function s(e,t){var r=o(e);return t&&(r.width=r.width-t.left-t.right,r.width<0&&(r.width=0),r.height=r.height-t.top-t.bottom,r.height<0&&(r.height=0)),r}function u(e,t){return t&&(e.width=Math.max(e.width,t.width),e.height=Math.max(e.height,t.height)),e}function g(e){return{left:0,top:0,width:e.width,height:e.height}}function l(e){return"{width:"+e.width+", height:"+e.height+"}"}function c(e,t){return e===t||void 0!==e&&void 0!==t&&e.width===t.width&&e.height===t.height}function f(t,r){return t===r||void 0!==t&&void 0!==r&&e.Double.equalWithPrecision(t.width,r.width)&&e.Double.equalWithPrecision(t.height,r.height)}function h(e,t){if(null===e)return void 0===t?null:t;if(void 0===e)return void 0===t?null:t;if(2===e.length)return{width:r.parseNumber(e[0]),height:r.parseNumber(e[1])};if("string"==typeof e){var n=e.split(",");return 2!==n.length?void 0===t?null:t:{width:r.parseNumber(n[0]),height:r.parseNumber(n[1])}}return 2!==e.length&&"string"!=typeof e?void 0===t?null:t:{width:r.parseNumber(e.width),height:r.parseNumber(e.height)}}t.isEmpty=n,t.equals=i,t.clone=o,t.inflate=a,t.deflate=s,t.combine=u,t.toRect=g,t.toString=l,t.equal=c,t.equalWithPrecision=f,t.parseSize=h})(o=t.Size||(t.Size={}));var a;!(function(t){function n(e){return{x:e.left,y:e.top}}function i(e){return{width:e.width,height:e.height}}function o(e,t){e.width=t.width,e.height=t.height}function a(e){return e.left+e.width}function s(e){return e.top+e.height}function u(e){return{x:e.left,y:e.top}}function g(e){return{x:e.left+e.width,y:e.top}}function l(e){return{x:e.left,y:e.top+e.height}}function c(e){return{x:e.left+e.width,y:e.top+e.height}}function f(e,t){return void 0!==t&&null!==t&&e.left===t.left&&e.top===t.top&&e.width===t.width&&e.height===t.height}function h(e){return null!==e?{left:e.left,top:e.top,width:e.width,height:e.height}:null}function d(e){return"{left:"+e.left+", top:"+e.top+", width:"+e.width+", height:"+e.height+"}"}function p(e,t,r){var n=e.left+t>=0?e.left+t:0,i=e.top+r>=0?e.top+r:0;return{left:n,top:i,width:e.width,height:e.height}}function m(e,t){return{left:e.left+t.left,top:e.top+t.top,height:e.height+t.height,width:e.width+t.width}}function y(e,t){return{left:e.left-t.left,top:e.top-t.top,height:e.height-t.height,width:e.width-t.width}}function v(e,t){var r=h(e);return t&&(r.left-=t.left,r.top-=t.top,r.width+=t.left+t.right,r.height+=t.top+t.bottom),r}function S(e,t){var r=h(e);return t&&(r.left+=t.left,r.top+=t.top,r.width-=t.left+t.right,r.height-=t.top+t.bottom),r}function C(e,t){return{left:e.left-t,top:e.top-t,width:e.width+t+t,height:e.height+t+t}}function w(e,t){return{left:e.left+t,top:e.top+t,width:e.width-t-t,height:e.height-t-t}}function b(e,t,r){return{x:Math.min(Math.max(e.left,t),e.left+e.width),y:Math.min(Math.max(e.top,r),e.top+e.height)}}function E(e,t){return e===t||void 0!==e&&void 0!==t&&e.left===t.left&&e.top===t.top&&e.width===t.width&&e.height===t.height}function _(t,r){return t===r||void 0!==t&&void 0!==r&&e.Double.equalWithPrecision(t.left,r.left)&&e.Double.equalWithPrecision(t.top,r.top)&&e.Double.equalWithPrecision(t.width,r.width)&&e.Double.equalWithPrecision(t.height,r.height)}function x(e){return void 0===e||null===e||0===e.width&&0===e.height}function T(t,r){return null!==t&&null!==r&&(e.Double.lessOrEqualWithPrecision(t.left,r.x)&&e.Double.lessOrEqualWithPrecision(r.x,t.left+t.width)&&e.Double.lessOrEqualWithPrecision(t.top,r.y)&&e.Double.lessOrEqualWithPrecision(r.y,t.top+t.height))}function P(e,t){return!(!e||!t)&&!(t.left>e.left+e.width||t.left+t.width<e.left||t.top>e.top+e.height||t.top+t.height<e.top)}function I(e,t){if(!e)return t;if(!t)return e;var r=Math.max(e.left,t.left),n=Math.max(e.top,t.top),i=Math.min(e.left+e.width,t.left+t.width),o=Math.min(e.top+e.height,t.top+t.height);return r<=i&&n<=o?{left:r,top:n,width:i-r,height:o-n}:{left:0,top:0,width:0,height:0}}function G(e,t){if(!e)return t;if(!t)return e;var r=Math.min(e.left,t.left),n=Math.min(e.top,t.top),i=Math.max(e.left+e.width,t.left+t.width),o=Math.max(e.top+e.height,t.top+t.height);return{left:r,top:n,width:i-r,height:o-n}}function M(e,t){if(null===e)return void 0===t?null:t;if(void 0===e)return void 0===t?null:t;if(4===e.length)return{left:r.parseNumber(e[0]),top:r.parseNumber(e[1]),width:r.parseNumber(e[2]),height:r.parseNumber(e[3])};if("string"==typeof e){var n=e.split(",");return 4!==n.length?void 0===t?null:t:{left:r.parseNumber(n[0]),top:r.parseNumber(n[1]),width:r.parseNumber(n[2]),height:r.parseNumber(n[3])}}return 4!==e.length&&"string"!=typeof e?void 0===t?null:t:{left:r.parseNumber(e.left),top:r.parseNumber(e.top),width:r.parseNumber(e.width),height:r.parseNumber(e.height)}}function N(e){return{x:e.left+e.width/2,y:e.top+e.height/2}}t.getOffset=n,t.getSize=i,t.setSize=o,t.right=a,t.bottom=s,t.topLeft=u,t.topRight=g,t.bottomLeft=l,t.bottomRight=c,t.equals=f,t.clone=h,t.toString=d,t.offset=p,t.add=m,t.subtract=y,t.inflate=v,t.deflate=S,t.inflateBy=C,t.deflateBy=w,t.getClosestPoint=b,t.equal=E,t.equalWithPrecision=_,t.isEmpty=x,t.containsPoint=T,t.isIntersecting=P,t.intersect=I,t.combine=G,t.parseRect=M,t.getCentroid=N})(a=t.Rect||(t.Rect={}));var s;!(function(t){function n(e,t){var r=a(e);return t&&(r.left=e.left+t.left,r.right=e.right+t.right,r.bottom=e.bottom+t.bottom,r.top=e.top+t.top),r}function i(e){return e.left+e.right}function o(e){return e.top+e.bottom}function a(e){return null!==e?{left:e.left,top:e.top,right:e.right,bottom:e.bottom}:null}function s(e,t){return void 0!==e&&null!==e&&void 0!==t&&null!==t&&e.left===t.left&&e.bottom===t.bottom&&e.right===t.right&&e.top===t.top}function u(e){var t=e.right;e.right=e.left,e.left=t}function g(e){var t=e.top;e.top=e.bottom,e.bottom=t}function l(e){return"{top:"+e.top+", left:"+e.left+", right:"+e.right+", bottom:"+e.bottom+"}"}function c(e){return e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px"}function f(e){return 0===e.left&&0===e.top&&0===e.right&&0===e.bottom}function h(e,t){return e===t||void 0!==e&&void 0!==t&&e.left===t.left&&e.top===t.top&&e.right===t.right&&e.bottom===t.bottom}function d(t,r){return t===r||void 0!==t&&void 0!==r&&e.Double.equalWithPrecision(t.left,r.left)&&e.Double.equalWithPrecision(t.top,r.top)&&e.Double.equalWithPrecision(t.right,r.right)&&e.Double.equalWithPrecision(t.bottom,r.bottom)}function p(e,t,n){if(null===e)return void 0===t?null:t;if(void 0===e)return void 0===t?null:t;if(4===e.length)return{left:r.parseNumber(e[0]),top:r.parseNumber(e[1]),right:r.parseNumber(e[2]),bottom:r.parseNumber(e[3])};if("string"==typeof e){var i=e.split(",");return 4!==i.length?void 0===t?null:t:{left:r.parseNumber(i[0]),top:r.parseNumber(i[1]),right:r.parseNumber(i[2]),bottom:r.parseNumber(i[3])}}return 4!==e.length&&"string"!=typeof e?void 0===t?null:t:{left:r.parseNumber(e.left),top:r.parseNumber(e.top),right:r.parseNumber(e.right),bottom:r.parseNumber(e.bottom)}}t.inflate=n,t.getWidth=i,t.getHeight=o,t.clone=a,t.equals=s,t.flipHorizontal=u,t.flipVertical=g,t.toString=l,t.toCssString=c,t.isEmpty=f,t.equal=h,t.equalWithPrecision=d,t.parseThickness=p})(s=t.Thickness||(t.Thickness={}));var u;!(function(t){function r(e){return 0===e.x&&0===e.y}function n(e,t){return void 0!==e&&null!==e&&void 0!==t&&null!==t&&e.x===t.x&&e.y===t.y}function i(e){return null!==e?{x:e.x,y:e.y}:null}function o(e){return"{x:"+e.x+", y:"+e.y+"}"}function a(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function s(e){return e.x*e.x+e.y*e.y}function u(e,t){return{x:e.x*t,y:e.y*t}}function g(e){return r(e)?e:u(e,1/a(e))}function l(e){return{x:e.y,y:-e.x}}function c(e){return{x:-e.y,y:e.x}}function f(e,t){var r=e.x*Math.cos(t)-e.y*Math.sin(t),n=e.x*Math.sin(t)+e.y*Math.cos(t);return{x:r,y:n}}function h(e,t){return e===t||void 0!==e&&void 0!==t&&e.x===t.x&&e.y===t.y}function d(t,r){return t===r||void 0!==t&&void 0!==r&&e.Double.equalWithPrecision(t.x,r.x)&&e.Double.equalWithPrecision(t.y,r.y)}function p(e,t){if(e&&t)return{x:e.x+t.x,y:e.y+t.y}}function m(e,t){if(e&&t)return{x:e.x-t.x,y:e.y-t.y}}function y(e,t){if(e&&t)return e.x*t.x+e.y*t.y}function v(e,t){if(e&&t)return{x:t.x-e.x,y:t.y-e.y}}t.isEmpty=r,t.equals=n,t.clone=i,t.toString=o,t.getLength=a,t.getLengthSqr=s,t.scale=u,t.normalize=g,t.rotate90DegCW=l,t.rotate90DegCCW=c,t.rotate=f,t.equal=h,t.equalWithPrecision=d,t.add=p,t.subtract=m,t.dotProduct=y,t.getDeltaVector=v})(u=t.Vector||(t.Vector={}))})(r=t.shapes||(t.shapes={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));;"use strict";var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){}return e.prototype.visitEntity=function(e,t){return this.visitDefault(e,t)},e.prototype.visitSubqueryRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitNamedQueryRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitColumnRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitMeasureRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitAggr=function(e,t){return this.visitDefault(e,t)},e.prototype.visitPercentile=function(e,t){return this.visitDefault(e,t)},e.prototype.visitGroupRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitHierarchy=function(e,t){return this.visitDefault(e,t)},e.prototype.visitHierarchyLevel=function(e,t){return this.visitDefault(e,t)},e.prototype.visitPropertyVariationSource=function(e,t){return this.visitDefault(e,t)},e.prototype.visitSelectRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitBetween=function(e,t){return this.visitDefault(e,t)},e.prototype.visitIn=function(e,t){return this.visitDefault(e,t)},e.prototype.visitAnd=function(e,t){return this.visitDefault(e,t)},e.prototype.visitOr=function(e,t){return this.visitDefault(e,t)},e.prototype.visitCompare=function(e,t){return this.visitDefault(e,t)},e.prototype.visitContains=function(e,t){return this.visitDefault(e,t)},e.prototype.visitExists=function(e,t){return this.visitDefault(e,t)},e.prototype.visitNot=function(e,t){return this.visitDefault(e,t)},e.prototype.visitStartsWith=function(e,t){return this.visitDefault(e,t)},e.prototype.visitConstant=function(e,t){return this.visitDefault(e,t)},e.prototype.visitDateSpan=function(e,t){return this.visitDefault(e,t)},e.prototype.visitDateAdd=function(e,t){return this.visitDefault(e,t)},e.prototype.visitNow=function(e,t){return this.visitDefault(e,t)},e.prototype.visitDefaultValue=function(e,t){return this.visitDefault(e,t)},e.prototype.visitAnyValue=function(e,t){return this.visitDefault(e,t)},e.prototype.visitArithmetic=function(e,t){return this.visitDefault(e,t)},e.prototype.visitFloor=function(e,t){return this.visitDefault(e,t)},e.prototype.visitFillRule=function(e,t){return this.visitDefault(e,t)},e.prototype.visitThemeColor=function(e,t){return this.visitDefault(e,t)},e.prototype.visitResourcePackageItem=function(e,t){return this.visitDefault(e,t)},e.prototype.visitScopedEval=function(e,t){return this.visitDefault(e,t)},e.prototype.visitWithRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitTransformTableRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitTransformOutputRoleRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitRoleRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitDiscretize=function(e,t){return this.visitDefault(e,t)},e.prototype.visitMember=function(e,t){return this.visitDefault(e,t)},e.prototype.visitDefault=function(e,t){},e})();e.DefaultSQExprVisitorWithArg=t;var r=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t})(t);e.DefaultSQExprVisitor=r;var i=(function(){function e(){}return e.prototype.visitEntity=function(e){this.visitDefault(e)},e.prototype.visitSubqueryRef=function(e){this.visitDefault(e)},e.prototype.visitNamedQueryRef=function(e){this.visitDefault(e)},e.prototype.visitColumnRef=function(e){e.source.accept(this)},e.prototype.visitMeasureRef=function(e){e.source.accept(this)},e.prototype.visitAggr=function(e){e.arg.accept(this)},e.prototype.visitPercentile=function(e){e.arg.accept(this)},e.prototype.visitGroupRef=function(e){e.source.accept(this);for(var t=0,r=e.groupedExprs;t<r.length;t++){var i=r[t];i.accept(this)}},e.prototype.visitHierarchy=function(e){e.arg.accept(this)},e.prototype.visitHierarchyLevel=function(e){e.arg.accept(this)},e.prototype.visitPropertyVariationSource=function(e){e.arg.accept(this)},e.prototype.visitSelectRef=function(e){this.visitDefault(e)},e.prototype.visitBetween=function(e){e.arg.accept(this),e.lower.accept(this),e.upper.accept(this)},e.prototype.visitIn=function(e){for(var t=e.args,r=0,i=t.length;r<i;r++)t[r].accept(this);var n=e.values;if(n)for(var r=0,i=n.length;r<i;r++)for(var a=n[r],o=0,u=a.length;o<u;o++)a[o].accept(this);else e.table.accept(this)},e.prototype.visitAnd=function(e){e.left.accept(this),e.right.accept(this)},e.prototype.visitOr=function(e){e.left.accept(this),e.right.accept(this)},e.prototype.visitCompare=function(e){e.left.accept(this),e.right.accept(this)},e.prototype.visitContains=function(e){e.left.accept(this),e.right.accept(this)},e.prototype.visitExists=function(e){e.arg.accept(this)},e.prototype.visitNot=function(e){e.arg.accept(this)},e.prototype.visitStartsWith=function(e){e.left.accept(this),e.right.accept(this)},e.prototype.visitConstant=function(e){this.visitDefault(e)},e.prototype.visitDateSpan=function(e){e.arg.accept(this)},e.prototype.visitDateAdd=function(e){e.arg.accept(this)},e.prototype.visitNow=function(e){this.visitDefault(e)},e.prototype.visitDefaultValue=function(e){this.visitDefault(e)},e.prototype.visitAnyValue=function(e){this.visitDefault(e)},e.prototype.visitArithmetic=function(e){e.left.accept(this),e.right.accept(this)},e.prototype.visitFloor=function(e){e.arg.accept(this)},e.prototype.visitFillRule=function(e){e.input.accept(this);var t=e.rule,r=t.linearGradient2,i=t.linearGradient3;r&&this.visitLinearGradient2(r),i&&this.visitLinearGradient3(i)},e.prototype.visitLinearGradient2=function(e){this.visitFillRuleStop(e.min),this.visitFillRuleStop(e.max),this.visitFillNullStrategy(e.nullColoringStrategy)},e.prototype.visitLinearGradient3=function(e){this.visitFillRuleStop(e.min),this.visitFillRuleStop(e.mid),this.visitFillRuleStop(e.max),this.visitFillNullStrategy(e.nullColoringStrategy)},e.prototype.visitThemeColor=function(e){this.visitDefault(e)},e.prototype.visitResourcePackageItem=function(e){this.visitDefault(e)},e.prototype.visitScopedEval=function(e){e.expression.accept(this);for(var t=0,r=e.scope;t<r.length;t++){var i=r[t];i.accept(this)}},e.prototype.visitWithRef=function(e){this.visitDefault(e)},e.prototype.visitTransformTableRef=function(e){this.visitDefault(e)},e.prototype.visitTransformOutputRoleRef=function(e){this.visitDefault(e)},e.prototype.visitRoleRef=function(e){this.visitDefault(e)},e.prototype.visitDiscretize=function(e){this.visitDefault(e)},e.prototype.visitMember=function(e){this.visitDefault(e)},e.prototype.visitDefault=function(e){},e.prototype.visitFillRuleStop=function(e){e.color.accept(this);var t=e.value;t&&t.accept(this)},e.prototype.visitFillNullStrategy=function(e){e&&(e.strategy.accept(this),e.color&&e.color.accept(this))},e})();e.DefaultSQExprVisitorWithTraversal=i})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e){return new r(e)}e.createEnumType=t;var r=(function(){function e(e){this.allMembers=e}return e.prototype.members=function(e){var t=this.allMembers;if(!e)return t;for(var r=[],i=0,n=t;i<n.length;i++){var a=n[i];_.contains(e,a.value)&&r.push(a)}return r},e})()})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function r(t){if(t)return{solid:{color:e.data.SQExprBuilder.text(t)}}}t.createSolidFillDefinition=r})(t=e.fillDefinitionHelpers||(e.fillDefinitionHelpers={}));var r;!(function(e){function t(e){if(e===!0)return!1;var t=e;return!!t.nullable}e.nullable=t})(r=e.FillSolidColorTypeDescriptor||(e.FillSolidColorTypeDescriptor={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.asZero="asZero",t.noColor="noColor",t.specificColor="specificColor",t.type=e.createEnumType([{value:t.asZero,displayName:function(e){return e.get("ConditionalFormattingDialog_FormatNull_AsZero")}},{value:t.noColor,displayName:function(e){return e.get("ConditionalFormattingDialog_FormatNull_NoFormat")}},{value:t.specificColor,displayName:function(e){return e.get("ConditionalFormattingDialog_FormatNull_SpecificColor")}}])})(t=e.NullStrategy||(e.NullStrategy={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){e.shared="shared",e.packaged="packaged"})(t=e.GeoJsonTypes||(e.GeoJsonTypes={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){e.urlType={misc:{imageUrl:!0}}})(t=e.ImageDefinition||(e.ImageDefinition={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(e){return!!(e.fill||e.fillRule||e.filter||e.expression||e.image||e.paragraphs||e.geoJson||e.queryTransform)}e.isValid=t})(t=e.StructuralTypeDescriptor||(e.StructuralTypeDescriptor={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e){return e&m}function r(e){return(e&y)===e}function i(e){if(r(e))return null;var t=h[e];if(t){var i=t.lastIndexOf("_");if(i>0){var n=t.slice(0,i);h[n]&&(t=n)}}return t||null}function n(e,r){var i=s[e],n=h[i];if(null==n&&(n=0),e&&r){var a=h[r];if(a){var o=t(a);0===o?(a=n|a,h[a]&&(n=a)):o===e&&(n=a)}}return n}function a(e,t){return(e&d)===(t&d)}var o=jsCommon.EnumExtensions,u=(function(){function e(e,t,r,i){this.underlyingType=e,this.category=t,o.hasFlag(e,512)&&(this.temporalType=new l(e)),o.hasFlag(e,1024)&&(this.geographyType=new p(e)),o.hasFlag(e,2048)&&(this.miscType=new f(e)),o.hasFlag(e,4096)&&(this.formattingType=new v(e)),o.hasFlag(e,26214401)&&(this.enumType=r),o.hasFlag(e,8192)&&(this.scriptingType=new c(e)),o.hasFlag(e,13)&&(this.variationTypes=i)}return e.fromDescriptor=function(t){if(t=t||{},t.text)return e.fromExtendedType(1);if(t.integer)return e.fromExtendedType(260);if(t.numeric)return e.fromExtendedType(259);if(t.bool)return e.fromExtendedType(5);if(t.dateTime)return e.fromExtendedType(519);if(t.duration)return e.fromExtendedType(10);if(t.binary)return e.fromExtendedType(11);if(t.none)return e.fromExtendedType(12);if(t.scripting&&t.scripting.source)return e.fromExtendedType(32776193);if(t.enumeration)return e.fromEnum(t.enumeration);if(t.temporal){if(t.temporal.year)return e.fromExtendedType(66308);if(t.temporal.quarter)return e.fromExtendedType(262916);if(t.temporal.month)return e.fromExtendedType(131844);if(t.temporal.day)return e.fromExtendedType(328452);if(t.temporal.paddedDateTableDate)return e.fromExtendedType(197127)}if(t.geography){if(t.geography.address)return e.fromExtendedType(6554625);if(t.geography.city)return e.fromExtendedType(6620161);if(t.geography.continent)return e.fromExtendedType(6685697);if(t.geography.country)return e.fromExtendedType(6751233);if(t.geography.county)return e.fromExtendedType(6816769);if(t.geography.region)return e.fromExtendedType(6882305);if(t.geography.postalCode)return e.fromExtendedType(6947841);if(t.geography.stateOrProvince)return e.fromExtendedType(7013377);if(t.geography.place)return e.fromExtendedType(7078913);if(t.geography.latitude)return e.fromExtendedType(7144707);if(t.geography.longitude)return e.fromExtendedType(7210243)}if(t.misc){if(t.misc.image)return e.fromExtendedType(13109259);if(t.misc.imageUrl)return e.fromExtendedType(13174785);if(t.misc.webUrl)return e.fromExtendedType(13240321);if(t.misc.barcode)return e.fromExtendedType(13305857)}if(t.formatting){if(t.formatting.color)return e.fromExtendedType(19664897);if(t.formatting.formatString)return e.fromExtendedType(19730433);if(t.formatting.alignment)return e.fromExtendedType(20058113);if(t.formatting.labelDisplayUnits)return e.fromExtendedType(20123649);if(t.formatting.fontFamily)return e.fromExtendedType(20385793);if(t.formatting.fontSize)return e.fromExtendedType(20189443);if(t.formatting.labelDensity)return e.fromExtendedType(20254979);if(t.formatting.bubbleSize)return e.fromExtendedType(20320515);if(t.formatting.altText)return e.fromExtendedType(20451329)}if(t.extendedType)return e.fromExtendedType(t.extendedType);if(t.operations&&t.operations.searchEnabled)return e.fromExtendedType(65541);if(t.variant){var r=_.map(t.variant,(function(t){return e.fromDescriptor(t)}));return e.fromVariant(r)}return e.fromExtendedType(0)},e.fromExtendedType=function(r){r=r||0;var n=t(r),a=i(r);return e.fromPrimitiveTypeAndCategory(n,a)},e.fromPrimitiveTypeAndCategory=function(t,r){t=t||0,r=r||null;var i=t.toString();return r&&(i+="|"+r),e.typeCache[i]||(e.typeCache[i]=new e(n(t,r),r))},e.fromEnum=function(t){return new e(26214401,null,t)},e.fromVariant=function(t){return new e(13,null,null,t)},e.isCompatibleTo=function(t,r,i){for(var n=e.fromDescriptor(t),a=0,o=r;a<o.length;a++){var u=o[a],s=e.fromDescriptor(u);if(s.isCompatibleFrom(n,i))return!0}return!1},e.prototype.isCompatibleFrom=function(e,t){if(this===e)return!0;if(e.variant)for(var r=0,i=e.variant;r<i.length;r++){var n=i[r];if(!this.isCompatibleFrom(n,t))return!1}if(this.variant)for(var a=0,o=this.variant;a<o.length;a++){var u=o[a];if(u.isCompatibleFrom(e,t))return!0}var s=e.primitiveType;return this.primitiveType===s||0===s||this.numeric&&e.numeric&&(!t||!this.integer||e.integer)},e.prototype.equals=function(e){return _.isEqual(this,e)},Object.defineProperty(e.prototype,"primitiveType",{get:function(){return t(this.underlyingType)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extendedType",{get:function(){return this.underlyingType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categoryString",{get:function(){return this.category},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return 1===this.primitiveType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numeric",{get:function(){return o.hasFlag(this.underlyingType,256)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"integer",{get:function(){return 4===this.primitiveType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bool",{get:function(){return 5===this.primitiveType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateTime",{get:function(){return 7===this.primitiveType||6===this.primitiveType||9===this.primitiveType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return 10===this.primitiveType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binary",{get:function(){return 11===this.primitiveType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"none",{get:function(){return 12===this.primitiveType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"temporal",{get:function(){return this.temporalType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"geography",{get:function(){return this.geographyType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"misc",{get:function(){return this.miscType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatting",{get:function(){return this.formattingType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enum",{get:function(){return this.enumType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scripting",{get:function(){return this.scriptingType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"variant",{get:function(){return this.variationTypes},enumerable:!0,configurable:!0}),e})();u.typeCache={},e.ValueType=u;var s,c=(function(){function e(e){this.underlyingType=e}return Object.defineProperty(e.prototype,"source",{get:function(){return a(this.underlyingType,32776193)},enumerable:!0,configurable:!0}),e})(),l=(function(){function e(e){this.underlyingType=e}return Object.defineProperty(e.prototype,"year",{get:function(){return a(this.underlyingType,66048)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"quarter",{get:function(){return a(this.underlyingType,262656)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"month",{get:function(){return a(this.underlyingType,131584)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"day",{get:function(){return a(this.underlyingType,328192)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddedDateTableDate",{get:function(){return a(this.underlyingType,197127)},enumerable:!0,configurable:!0}),e})(),p=(function(){function e(e){this.underlyingType=e}return Object.defineProperty(e.prototype,"address",{get:function(){return a(this.underlyingType,6554625)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"city",{get:function(){return a(this.underlyingType,6620161)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"continent",{get:function(){return a(this.underlyingType,6685697)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"country",{get:function(){return a(this.underlyingType,6751233)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"county",{get:function(){return a(this.underlyingType,6816769)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"region",{get:function(){return a(this.underlyingType,6882305)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"postalCode",{get:function(){return a(this.underlyingType,6947840)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stateOrProvince",{get:function(){return a(this.underlyingType,7013377)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"place",{get:function(){return a(this.underlyingType,7078913)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"latitude",{get:function(){return a(this.underlyingType,7144448)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return a(this.underlyingType,7209984)},enumerable:!0,configurable:!0}),e})(),f=(function(){function e(e){this.underlyingType=e}return Object.defineProperty(e.prototype,"image",{get:function(){return a(this.underlyingType,13109259)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageUrl",{get:function(){return a(this.underlyingType,13174785)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"webUrl",{get:function(){return a(this.underlyingType,13240321)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barcode",{get:function(){return a(this.underlyingType,13305856)},enumerable:!0,configurable:!0}),e})(),v=(function(){function e(e){this.underlyingType=e}return Object.defineProperty(e.prototype,"color",{get:function(){return a(this.underlyingType,19664897)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatString",{get:function(){return a(this.underlyingType,19730433)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignment",{get:function(){return a(this.underlyingType,20058113)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelDisplayUnits",{get:function(){return a(this.underlyingType,20123649)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return a(this.underlyingType,20385793)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return a(this.underlyingType,20189443)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelDensity",{get:function(){return a(this.underlyingType,20254979)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bubbleSize",{get:function(){return a(this.underlyingType,20320515)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"altText",{get:function(){return a(this.underlyingType,20451329)},enumerable:!0,configurable:!0}),e})();!(function(e){e[e.Null=0]="Null",e[e.Text=1]="Text",e[e.Decimal=2]="Decimal",e[e.Double=3]="Double",e[e.Integer=4]="Integer",e[e.Boolean=5]="Boolean",e[e.Date=6]="Date",e[e.DateTime=7]="DateTime",e[e.DateTimeZone=8]="DateTimeZone",e[e.Time=9]="Time",e[e.Duration=10]="Duration",e[e.Binary=11]="Binary",e[e.None=12]="None",e[e.Variant=13]="Variant"})(s=e.PrimitiveTypeStrings||(e.PrimitiveTypeStrings={}));var h;!(function(e){e[e.Numeric=256]="Numeric",e[e.Temporal=512]="Temporal",e[e.Geography=1024]="Geography",e[e.Miscellaneous=2048]="Miscellaneous",e[e.Formatting=4096]="Formatting",e[e.Scripting=8192]="Scripting",e[e.Null=0]="Null",e[e.Text=1]="Text",e[e.Decimal=258]="Decimal",e[e.Double=259]="Double",e[e.Integer=260]="Integer",e[e.Boolean=5]="Boolean",e[e.Date=518]="Date",e[e.DateTime=519]="DateTime",e[e.DateTimeZone=520]="DateTimeZone",e[e.Time=521]="Time",e[e.Duration=10]="Duration",e[e.Binary=11]="Binary",e[e.None=12]="None",e[e.Variant=13]="Variant",e[e.Years=66048]="Years",e[e.Years_Text=66049]="Years_Text",e[e.Years_Integer=66308]="Years_Integer",e[e.Years_Date=66054]="Years_Date",e[e.Years_DateTime=66055]="Years_DateTime",e[e.Months=131584]="Months",e[e.Months_Text=131585]="Months_Text",e[e.Months_Integer=131844]="Months_Integer",e[e.Months_Date=131590]="Months_Date",e[e.Months_DateTime=131591]="Months_DateTime",e[e.PaddedDateTableDates=197127]="PaddedDateTableDates",e[e.Quarters=262656]="Quarters",e[e.Quarters_Text=262657]="Quarters_Text",e[e.Quarters_Integer=262916]="Quarters_Integer",e[e.Quarters_Date=262662]="Quarters_Date",e[e.Quarters_DateTime=262663]="Quarters_DateTime",e[e.DayOfMonth=328192]="DayOfMonth",e[e.DayOfMonth_Text=328193]="DayOfMonth_Text",e[e.DayOfMonth_Integer=328452]="DayOfMonth_Integer",e[e.DayOfMonth_Date=328198]="DayOfMonth_Date",e[e.DayOfMonth_DateTime=328199]="DayOfMonth_DateTime",e[e.Address=6554625]="Address",e[e.City=6620161]="City",e[e.Continent=6685697]="Continent",e[e.Country=6751233]="Country",e[e.County=6816769]="County",e[e.Region=6882305]="Region",e[e.PostalCode=6947840]="PostalCode",e[e.PostalCode_Text=6947841]="PostalCode_Text",e[e.PostalCode_Integer=6948100]="PostalCode_Integer",e[e.StateOrProvince=7013377]="StateOrProvince",e[e.Place=7078913]="Place",e[e.Latitude=7144448]="Latitude",e[e.Latitude_Decimal=7144706]="Latitude_Decimal",e[e.Latitude_Double=7144707]="Latitude_Double",e[e.Longitude=7209984]="Longitude",e[e.Longitude_Decimal=7210242]="Longitude_Decimal",e[e.Longitude_Double=7210243]="Longitude_Double",e[e.Image=13109259]="Image",e[e.ImageUrl=13174785]="ImageUrl",e[e.WebUrl=13240321]="WebUrl",e[e.Barcode=13305856]="Barcode",e[e.Barcode_Text=13305857]="Barcode_Text",e[e.Barcode_Integer=13306116]="Barcode_Integer",e[e.Color=19664897]="Color",e[e.FormatString=19730433]="FormatString",e[e.Alignment=20058113]="Alignment",e[e.LabelDisplayUnits=20123649]="LabelDisplayUnits",e[e.FontFamily=20385793]="FontFamily",e[e.AltText=20451329]="AltText",e[e.FontSize=20189443]="FontSize",e[e.LabelDensity=20254979]="LabelDensity",e[e.BubbleSize=20320515]="BubbleSize",e[e.Enumeration=26214401]="Enumeration",e[e.ScriptSource=32776193]="ScriptSource",e[e.SearchEnabled=65541]="SearchEnabled"})(h||(h={}));var m=255,y=65535,d=4294901760})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(e){if(e){var t;return e.top&&(t={Top:{}},e.top.count&&(t.Top.Count=e.top.count)),e.bottom&&(t={Bottom:{}},e.bottom.count&&(t.Bottom.Count=e.bottom.count)),e.sample&&(t={Sample:{}},e.sample.count&&(t.Sample.Count=e.sample.count)),e.window&&(t={Window:{}},e.window.count&&(t.Window.Count=e.window.count)),t}}e.createFrom=t})(t=e.DataShapeBindingDataReduction||(e.DataShapeBindingDataReduction={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e){this.schemasByName=e.schemas,e.links&&(this.links=e.links)}return e.merge=function(t){if(1===t.length)return t[0];for(var r={},i=[],n=0,a=t;n<a.length;n++){var o=a[n];for(var u in o.schemasByName)r[u]=o.schemasByName[u];i.push.apply(i,o.links)}var s={schemas:r};return _.any(i)&&(s.links=i),new e(s)},Object.defineProperty(e.prototype,"schemas",{get:function(){return _.values(this.schemasByName)},enumerable:!0,configurable:!0}),e.prototype.schema=function(e){return this.schemasByName[e]},e})();e.FederatedConceptualSchema=t})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=jsCommon.ArrayExtensions;!(function(r){function n(e){return null!=e&&1===e.kind}function a(e){return null!=e&&3===e.kind}function o(e){return null!=e&&2===e.kind}function u(e){return null!=e&&0===e.kind}function s(t,r){if(!_.isEmpty(t)){var i=c(t);return _.isEmpty(i)?void 0:e.DataViewScopeIdentity.filterFromExprs(i,r)}}function c(e){if(!_.isEmpty(e)){for(var r=[],i=0,n=e.length;i<n;i++){var a=e[i],o=a.data,u=void 0;if(o&&o.length)for(var s=0,c=o.length;s<c;s++)u=t.SQExprBuilder.and(u,a.data[s].expr);u&&r.push(u)}return r}}function l(r,i,s){var c=r.data,l=i.length;if(_.isEmpty(s)||l++,c.length!==l)return!1;for(var p=0,f=i.length;p<f;p++){var v=r.data[p],h=i[p];if(u(v))return!1;if(n(v)&&!e.DataViewScopeIdentity.equals(v,h))return!1;if(a(v)&&!t.DataViewScopeWildcard.matches(v,h))return!1;if(o(v))return!_.isEmpty(s),!1}if(!_.isEmpty(s)){var v=_.last(r.data);return o(v)&&t.DataViewScopeTotal.matches(v,s)}return!0}function p(e,r){var i=e.data,s=i.length;if(s!==r.length)return!1;for(var c=0;c<s;c++){var l=e.data[c],p=void 0;if(n(l))p=t.ScopeIdentityExtractor.getKeys(l.expr);else if(a(l))p=l.exprs;else{if(!o(l))return u(l),!1;p=l.exprs}if(!p)return!1;if(!t.SQExprUtils.sequenceEqual(r[c],p))return!1}return!0}function f(e,t){return e=e||null,t=t||null,e===t||!e==!t&&(e.id===t.id&&(e.metadata===t.metadata&&!!v(e.data,t.data)))}function v(e,t){if(e=e||null,t=t||null,e===t)return!0;if(!e!=!t)return!1;if(e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(!h(e[r],t[r]))return!1;return!0}function h(r,i){return n(r)&&n(i)?e.DataViewScopeIdentity.equals(r,i):a(r)&&a(i)?t.DataViewScopeWildcard.equals(r,i):o(r)&&o(i)?t.DataViewScopeTotal.equals(r,i):!(!u(r)||!u(i))&&t.DataViewRoleWildcard.equals(r,i)}function m(e){var t={};if(e.data){for(var r=[],i=0,n=e.data.length;i<n;i++)r.push(e.data[i].key);t.data=r}return e.metadata&&(t.metadata=e.metadata),e.id&&(t.id=e.id),JSON.stringify(t)}function y(e){var t=e.data;return!!t&&_.any(t,(function(e){return u(e)||a(e)}))}function d(e){var t=e.data;if(_.isEmpty(t))return!1;for(var r=0,i=t;r<i.length;r++){var n=i[r];if(u(n))return!0}return!1}function g(e){if(e){var t=[];for(var r in e.dataMap)for(var n=i.ensureArray(e.dataMap[r]),a=0,o=n;a<o.length;a++){var u=o[a];t.push(u)}var s={};return t.length>0&&(s.data=t),e.metadata&&(s.metadata=_.first(e.metadata)),e.id&&(s.id=e.id),s}}function x(e){return _.filter(e,(function(e){return!t.SQExprUtils.detectTransformExpr(e.expr)}))}r.isScopeIdentity=n,r.isScopeWildcard=a,r.isScopeTotal=o,r.isRoleWildcard=u,r.filterFromSelector=s,r.filterExprsFromSelectors=c,r.matchesData=l,r.matchesKeys=p,r.equals=f,r.getKey=m,r.containsWildcard=y,r.hasRoleWildcard=d,r.convertSelectorsByColumnToSelector=g,r.filterTransformSelectorsForSelection=x})(r=t.Selector||(t.Selector={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function r(t){switch(t){case 0:return"Add";case 1:return"Subtract";case 2:return"Multiply";case 3:return"Divide"}return e.contract.fail("Unexpected ArithmeticOperatorKind: "+t)}function i(e){switch(e){case 0:return"Sum";case 1:return"Avg";case 2:return"Count";case 3:return"Min";case 4:return"Max";case 5:return"CountNonNull";case 6:return"Median";case 7:return"StandardDeviation";case 8:return"Variance"}}var n;!(function(e){e[e.Table=0]="Table",e[e.Pod=1]="Pod",e[e.Expression=2]="Expression"})(n=t.EntitySourceType||(t.EntitySourceType={})),t.getArithmeticOperatorName=r,t.aggregateFunctionName=i;var a;!(function(e){e[e.Default=0]="Default",e[e.Period=1]="Period"})(a=t.FilterKind||(t.FilterKind={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e,t,r){this.items=e,this._activeProjectionRefs=t,this._showAll=r}return e.prototype.all=function(){return this.items},Object.defineProperty(e.prototype,"activeProjectionRefs",{get:function(){return this._activeProjectionRefs},set:function(e){if(!_.isEmpty(e)){for(var t=this.items.map((function(e){return e.queryRef})),r=0,i=e;r<i.length;r++){var n=i[r];if(!_.contains(t,n))return}this._activeProjectionRefs=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showAll",{get:function(){return this._showAll},set:function(e){this._showAll=e},enumerable:!0,configurable:!0}),e.prototype.addActiveQueryReference=function(e){this._activeProjectionRefs?this._activeProjectionRefs.push(e):this._activeProjectionRefs=[e]},e.prototype.getLastActiveQueryReference=function(){if(!_.isEmpty(this._activeProjectionRefs))return this._activeProjectionRefs[this._activeProjectionRefs.length-1]},e.prototype.replaceQueryRef=function(e,t){for(var r=0,i=this.items;r<i.length;r++){var n=i[r];n.queryRef===e&&(n.queryRef=t)}},e.prototype.clone=function(){return new e(_.cloneDeep(this.items),_.clone(this._activeProjectionRefs),this._showAll)},e})();e.QueryProjectionCollection=t;var r;!(function(e){function t(e){if(!e)return e;var t={};for(var r in e)t[r]=e[r].clone();return t}function r(e,t){if(e)return e[t]}e.clone=t,e.getRole=r})(r=e.QueryProjectionsByRole||(e.QueryProjectionsByRole={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){e[e.Default=0]="Default",e[e.Verbose=1]="Verbose",e[e.WholeUnits=2]="WholeUnits",e[e.DataLabels=3]="DataLabels"})(t=e.DisplayUnitSystemType||(e.DisplayUnitSystemType={}));var r;!(function(e){function t(e){for(var t=[],r=0,i=e;r<i.length;r++)for(var n=i[r],a=function(e){_.find(t,(function(t){return _.isEqual(t,e)}))||t.push(e)},o=0,u=n.DataRoles;o<u.length;o++){var s=u[o];a(s)}return t}e.getDataRolesFromVisualElements=t})(r=e.VisualElement||(e.VisualElement={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t=(function(){function t(e){this.unit=e,this.sequence=[],this.min=new Date("9999-12-31T23:59:59.999"),this.max=new Date("0001-01-01T00:00:00.000")}return t.prototype.add=function(e){e<this.min&&(this.min=e),e>this.max&&(this.max=e),this.sequence.push(e)},t.prototype.moveToCover=function(e,r){var i=t.getDelta(e,r,this.unit),n=Math.floor(i/this.interval);for(this.min=t.addInterval(this.min,n*this.interval,this.unit),this.sequence=[],this.sequence.push(this.min),this.max=this.min;this.max<r;)this.max=t.addInterval(this.max,this.interval,this.unit),this.sequence.push(this.max)},t.calculate=function(r,i,n,a){switch(a||(a=t.getIntervalUnit(r,i,n)),a){case e.DateTimeUnit.Year:return t.calculateYears(r,i,n);case e.DateTimeUnit.Month:return t.calculateMonths(r,i,n);case e.DateTimeUnit.Week:return t.calculateWeeks(r,i,n);case e.DateTimeUnit.Day:return t.calculateDays(r,i,n);case e.DateTimeUnit.Hour:return t.calculateHours(r,i,n);case e.DateTimeUnit.Minute:return t.calculateMinutes(r,i,n);case e.DateTimeUnit.Second:return t.calculateSeconds(r,i,n);case e.DateTimeUnit.Millisecond:return t.calculateMilliseconds(r,i,n)}},t.calculateYears=function(r,i,n){var a=e.NumericSequenceRange.calculateDataRange(r.getFullYear(),i.getFullYear(),!1),o=e.NumericSequence.calculate(e.NumericSequenceRange.calculate(0,a.max-a.min),n,0,null,null,[1,2,5]),u=Math.floor(a.min/o.interval)*o.interval,s=new Date(u,0,1),c=t.fromNumericSequence(s,o,e.DateTimeUnit.Year);return c},t.calculateMonths=function(r,i,n){var a=r.getFullYear(),o=i.getFullYear(),u=r.getMonth(),s=12*(o-a)+i.getMonth(),c=new Date(a,0,1),l=e.NumericSequence.calculateUnits(u,s,n,[1,2,3,6,12]),p=t.fromNumericSequence(c,l,e.DateTimeUnit.Month);return p},t.calculateWeeks=function(r,i,n){var a=0,o=r.getDay(),u=(o-a+7)%7,s=r.getDate()-u,c=new Date(r.getFullYear(),r.getMonth(),s),l=0,p=e.Double.ceilWithPrecision(t.getDelta(c,i,e.DateTimeUnit.Week)),f=e.NumericSequence.calculateUnits(l,p,n,[1,2,4,8]),v=t.fromNumericSequence(c,f,e.DateTimeUnit.Week);return v},t.calculateDays=function(r,i,n){var a=new Date(r.getFullYear(),r.getMonth(),r.getDate()),o=0,u=e.Double.ceilWithPrecision(t.getDelta(r,i,e.DateTimeUnit.Day)),s=e.NumericSequence.calculateUnits(o,u,n,[1,2,7,14]),c=t.fromNumericSequence(a,s,e.DateTimeUnit.Day);
return c},t.calculateHours=function(r,i,n){var a=new Date(r.getFullYear(),r.getMonth(),r.getDate()),o=e.Double.floorWithPrecision(t.getDelta(a,r,e.DateTimeUnit.Hour)),u=e.Double.ceilWithPrecision(t.getDelta(a,i,e.DateTimeUnit.Hour)),s=e.NumericSequence.calculateUnits(o,u,n,[1,2,3,6,12,24]),c=t.fromNumericSequence(a,s,e.DateTimeUnit.Hour);return c},t.calculateMinutes=function(r,i,n){var a=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours()),o=e.Double.floorWithPrecision(t.getDelta(a,r,e.DateTimeUnit.Minute)),u=e.Double.ceilWithPrecision(t.getDelta(a,i,e.DateTimeUnit.Minute)),s=e.NumericSequence.calculateUnits(o,u,n,[1,2,5,10,15,30,60,120,180,360,720,1440]),c=t.fromNumericSequence(a,s,e.DateTimeUnit.Minute);return c},t.calculateSeconds=function(r,i,n){var a=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes()),o=e.Double.floorWithPrecision(t.getDelta(a,r,e.DateTimeUnit.Second)),u=e.Double.ceilWithPrecision(t.getDelta(a,i,e.DateTimeUnit.Second)),s=e.NumericSequence.calculateUnits(o,u,n,[1,2,5,10,15,30,60,120,300,600,900,1800,3600]),c=t.fromNumericSequence(a,s,e.DateTimeUnit.Second);return c},t.calculateMilliseconds=function(r,i,n){var a=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds()),o=t.getDelta(a,r,e.DateTimeUnit.Millisecond),u=t.getDelta(a,i,e.DateTimeUnit.Millisecond),s=e.NumericSequence.calculate(e.NumericSequenceRange.calculate(o,u),n,0),c=t.fromNumericSequence(a,s,e.DateTimeUnit.Millisecond);return c},t.addInterval=function(t,i,n){switch(i=Math.round(i),n){case e.DateTimeUnit.Year:return r.addYears(t,i);case e.DateTimeUnit.Month:return r.addMonths(t,i);case e.DateTimeUnit.Week:return r.addWeeks(t,i);case e.DateTimeUnit.Day:return r.addDays(t,i);case e.DateTimeUnit.Hour:return r.addHours(t,i);case e.DateTimeUnit.Minute:return r.addMinutes(t,i);case e.DateTimeUnit.Second:return r.addSeconds(t,i);case e.DateTimeUnit.Millisecond:return r.addMilliseconds(t,i)}},t.fromNumericSequence=function(e,r,i){for(var n=new t(i),a=0;a<r.sequence.length;a++){var o=r.sequence[a],u=t.addInterval(e,o,i);n.add(u)}return n.interval=r.interval,n.intervalOffset=r.intervalOffset,n},t.getDelta=function(t,r,i){var n=0;switch(i){case e.DateTimeUnit.Year:n=r.getFullYear()-t.getFullYear();break;case e.DateTimeUnit.Month:n=12*(r.getFullYear()-t.getFullYear())+r.getMonth()-t.getMonth();break;case e.DateTimeUnit.Week:n=(r.getTime()-t.getTime())/6048e5;break;case e.DateTimeUnit.Day:n=(r.getTime()-t.getTime())/864e5;break;case e.DateTimeUnit.Hour:n=(r.getTime()-t.getTime())/36e5;break;case e.DateTimeUnit.Minute:n=(r.getTime()-t.getTime())/6e4;break;case e.DateTimeUnit.Second:n=(r.getTime()-t.getTime())/1e3;break;case e.DateTimeUnit.Millisecond:n=r.getTime()-t.getTime()}return n},t.getIntervalUnit=function(r,i,n){n=Math.max(n,2);var a=t.getDelta(r,i,e.DateTimeUnit.Day);if(a>356&&a>=180*n)return e.DateTimeUnit.Year;if(a>60&&a>7*n)return e.DateTimeUnit.Month;if(a>14&&a>2*n)return e.DateTimeUnit.Week;var o=t.getDelta(r,i,e.DateTimeUnit.Hour);if(a>2&&o>12*n)return e.DateTimeUnit.Day;if(o>=24&&o>=n)return e.DateTimeUnit.Hour;var u=t.getDelta(r,i,e.DateTimeUnit.Minute);if(u>2&&u>=n)return e.DateTimeUnit.Minute;var s=t.getDelta(r,i,e.DateTimeUnit.Second);if(s>2&&s>=.8*n)return e.DateTimeUnit.Second;var c=t.getDelta(r,i,e.DateTimeUnit.Millisecond);if(c>0)return e.DateTimeUnit.Millisecond;var l=r;return 0!==l.getMilliseconds()?e.DateTimeUnit.Millisecond:0!==l.getSeconds()?e.DateTimeUnit.Second:0!==l.getMinutes()?e.DateTimeUnit.Minute:0!==l.getHours()?e.DateTimeUnit.Hour:1!==l.getDate()?e.DateTimeUnit.Day:0!==l.getMonth()?e.DateTimeUnit.Month:e.DateTimeUnit.Year},t})();t.MIN_COUNT=1,t.MAX_COUNT=1e3,e.DateTimeSequence=t;var r;!(function(e){function t(e){return e%4===0&&e%100!==0||e%400===0}function r(e,r){return t(e)?f[r]:p[r]}function i(e,r){var i=e.getFullYear(),n=e.getMonth(),a=e.getDate(),o=2===n&&29===a,u=new Date(e.getTime());return i+=r,o&&!t(i)&&(a=28),u.setFullYear(i,n,a),u}function n(e,t){var i=e.getFullYear(),n=e.getMonth(),a=e.getDate(),o=new Date(e.getTime());return i+=(t-t%12)/12,n+=t%12,n>11&&(n%=12,i++),a=Math.min(a,r(i,n)),o.setFullYear(i,n,a),o}function a(e,t){return o(e,7*t)}function o(e,t){var r=e.getFullYear(),i=e.getMonth(),n=e.getDate(),a=new Date(e.getTime());return a.setFullYear(r,i,n+t),a}function u(e,t){return new Date(e.getTime()+36e5*t)}function s(e,t){return new Date(e.getTime()+6e4*t)}function c(e,t){return new Date(e.getTime()+1e3*t)}function l(e,t){return new Date(e.getTime()+t)}var p=[31,28,31,30,31,30,31,31,30,31,30,31],f=[31,29,31,30,31,30,31,31,30,31,30,31];e.addYears=i,e.addMonths=n,e.addWeeks=a,e.addDays=o,e.addHours=u,e.addMinutes=s,e.addSeconds=c,e.addMilliseconds=l})(r=e.DateUtils||(e.DateUtils={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(t,n){for(var a=[],o=3;o<i;o++){var u=t(o);u&&r(a,e.Double.pow10(o),u.title,u.format,n)}return a}function r(e,t,r,i,n){if(r||i){var a=t;if(e.length>0){var o=e[e.length-1];n&&(a=n(t,o.value,a)),o.applicableRangeMax=a}var u=new l;u.value=t,u.applicableRangeMin=a,u.applicableRangeMax=1e3*a,u.title=r,u.labelFormat=i,e.push(u)}}var i=24,n=1e15,a=1e-4,o="%",u="E+0",s="0.##"+u,c=/^([0\#,]*\.[0\#]+|[0\#,]+|g)$/i,l=(function(){function t(){}return t.prototype.project=function(t){return this.value?e.Double.removeDecimalNoise(t/this.value):t},t.prototype.isApplicableTo=function(t){t=Math.abs(t);var r=e.Double.getPrecision(t,3);return e.Double.greaterOrEqualWithPrecision(t,this.applicableRangeMin,r)&&e.Double.lessWithPrecision(t,this.applicableRangeMax,r)},t.prototype.isScaling=function(){return this.value>1},t})();e.DisplayUnit=l;var p=(function(){function t(e){this.units=e?e:[]}return Object.defineProperty(t.prototype,"title",{get:function(){return this.displayUnit?this.displayUnit.title:void 0},enumerable:!0,configurable:!0}),t.prototype.update=function(e){void 0!==e&&(this.unitBaseValue=e,this.displayUnit=this.findApplicableDisplayUnit(e))},t.prototype.findApplicableDisplayUnit=function(e){for(var t=0,r=this.units;t<r.length;t++){var i=r[t];if(i.isApplicableTo(e))return i}},t.prototype.format=function(e,t,r,i){r=this.getNumberOfDecimalsForFormatting(t,r);var n="";return this.isFormatSupported(t)&&!this.hasScientitifcFormat(t)&&this.isScalingUnit()&&this.shouldRespectScalingUnit(t)&&(e=this.displayUnit.project(e),n=this.displayUnit.labelFormat),this.formatHelper(e,n,t,r,i)},t.prototype.isFormatSupported=function(e){return!t.UNSUPPORTED_FORMATS.test(e)},t.prototype.isPercentageFormat=function(e){return e&&e.indexOf(o)>=0},t.prototype.shouldRespectScalingUnit=function(e){return!0},t.prototype.getNumberOfDecimalsForFormatting=function(e,t){return t},t.prototype.isScalingUnit=function(){return this.displayUnit&&this.displayUnit.isScaling()},t.prototype.formatHelper=function(t,r,i,n,a){if("g"!==i&&"G"!==i||null==n||(i=e.visuals.valueFormatter.DefaultNumericFormat),i=e.NumberFormat.addDecimalsToFormat(i,n,a),i&&!e.formattingService.isStandardNumberFormat(i))return e.formattingService.formatNumberWithCustomOverride(t,i,r);i||(i="G"),r||(r="{0}");var o=e.formattingService.formatValue(t,i);return e.formattingService.format(r,[o])},t.prototype.formatSingleValue=function(t,r,i,n){return this.update(this.shouldUseValuePrecision(t)?e.Double.getPrecision(t,8):t),this.format(t,r,i,n)},t.prototype.shouldUseValuePrecision=function(e){if(0===this.units.length)return!0;for(var t=0,r=0;r<this.units.length;r++)if(this.units[r].isScaling()){t=this.units[r].applicableRangeMin;break}return Math.abs(e)<t},t.prototype.isScientific=function(e){return e<-n||e>n||-a<e&&e<a&&0!==e},t.prototype.hasScientitifcFormat=function(e){return e&&e.toUpperCase().indexOf("E")!==-1},t.prototype.supportsScientificFormat=function(e){return!e||c.test(e)},t.prototype.shouldFallbackToScientific=function(e,t){return!this.hasScientitifcFormat(t)&&this.supportsScientificFormat(t)&&this.isScientific(e)},t.prototype.getScientificFormat=function(t,r,i,n){if(this.isFormatSupported(r)&&this.shouldFallbackToScientific(t,r)){var a=e.NumberFormat.getNumericFormat(t,r);return i&&(a=e.NumberFormat.addDecimalsToFormat(a?a:"0",Math.abs(i),n)),a?a+u:s}return r},t})();p.UNSUPPORTED_FORMATS=/^(p\d*)|(e\d*)$/i,e.DisplayUnitSystem=p;var f=(function(e){function t(){return e.call(this,[])||this}return __extends(t,e),t})(p);e.NoDisplayUnitSystem=f;var v=(function(e){function r(t){return e.call(this,r.getUnits(t))||this}return __extends(r,e),r.prototype.format=function(t,r,i,n){return r=this.getScientificFormat(t,r,i,n),e.prototype.format.call(this,t,r,i,n)},r.reset=function(){r.units=null},r.getUnits=function(e){return r.units||(r.units=t(e,(function(e,t,r){return e-t>=1e3?e/10:r})),r.units[r.units.length-1].applicableRangeMax=1/0),r.units},r})(p);e.DefaultDisplayUnitSystem=v;var h=(function(e){function r(t){return e.call(this,r.getUnits(t))||this}return __extends(r,e),r.reset=function(){r.units=null},r.getUnits=function(e){return r.units||(r.units=t(e),r.units[r.units.length-1].applicableRangeMax=1/0),r.units},r.prototype.format=function(t,r,i,n){return r=this.getScientificFormat(t,r,i,n),e.prototype.format.call(this,t,r,i,n)},r})(p);e.WholeUnitsDisplayUnitSystem=h;var m=(function(e){function i(t){return e.call(this,i.getUnits(t))||this}return __extends(i,e),i.prototype.isFormatSupported=function(e){return!i.UNSUPPORTED_FORMATS.test(e)},i.getUnits=function(e){if(!i.units){var n=[],a=function(e,t,r){return e===-1&&e-t>=1e3?e/10:r},o=e(-1);r(n,i.AUTO_DISPLAYUNIT_VALUE,o.title,o.format,a),o=e(0),r(n,i.NONE_DISPLAYUNIT_VALUE,o.title,o.format,a),i.units=n.concat(t(e,a)),i.units[i.units.length-1].applicableRangeMax=1/0}return i.units},i.prototype.format=function(t,r,i,n){return r=this.getScientificFormat(t,r,i,n),e.prototype.format.call(this,t,r,i,n)},i})(p);m.AUTO_DISPLAYUNIT_VALUE=0,m.NONE_DISPLAYUNIT_VALUE=1,m.UNSUPPORTED_FORMATS=/^(e\d*)$/i,e.DataLabelsDisplayUnitSystem=m})(powerbi||(powerbi={}));var powerbi;!(function(e){var t=(function(){function t(){}return t.calculate=function(r,i,n,a,o,u){var s=new t;if(i=void 0===i?10:e.Double.ensureInRange(i,t.MIN_COUNT,t.MAX_COUNT),void 0===a&&(a=e.Double.MIN_EXP),void 0===o&&(o=!1),void 0===n&&(n=1),void 0===u&&(u=[1,2,5]),r.forcedSingleStop)return s.interval=r.getSize(),s.intervalOffset=s.interval-(r.forcedSingleStop-r.min),s.min=r.min,s.max=r.max,s.sequence=[r.forcedSingleStop],s;var c=0,l=0,p=9,f=n>0&&!r.hasFixedMin,v=n>0&&!r.hasFixedMax,h=r.getSize(),m=e.Double.log10(h),y=e.Double.log10(u[0]);m-=y;var d=e.Double.log10(i);m-=d,m=Math.max(m,a-y+1);var g=void 0;if(0!==c){var x=e.Double.pow10(m),S=e.Double.floorToPrecision(r.min,x),b=e.Double.ceilToPrecision(r.max,x),w=e.NumericSequenceRange.calculateFixedRange(S,b);w.shrinkByStep(r,c),l=w.min,p=w.max,g=Math.floor(w.getSize()/c)}else{var E=void 0;for(E=0;E<3;E++){for(var D=m+E,x=e.Double.pow10(D),S=e.Double.floorToPrecision(r.min,x),b=e.Double.ceilToPrecision(r.max,x),C=u.length,_=e.Double.pow10(D-1),R=0;R<C;R++){var T=u[R]*_,w=e.NumericSequenceRange.calculateFixedRange(S,b,o);if(w.shrinkByStep(r,T),f&&r.min===w.min&&n>=1&&(w.min-=T),v&&r.max===w.max&&n>=1&&(w.max+=T),g=e.Double.ceilWithPrecision(w.getSize()/T,e.Double.DEFAULT_PRECISION),g<=i||2===E&&R===C-1||1===i&&2===g&&(T>r.getSize()||r.min<0&&r.max>0&&2*T>=r.getSize())){c=T,l=w.min,p=w.max;break}}if(0!==c)break}}(g>32*i||g>t.MAX_COUNT)&&(g=Math.min(32*i,t.MAX_COUNT),c=(p-l)/g),s.min=l,s.max=p,s.interval=c,s.intervalOffset=l-r.min,s.maxAllowedMargin=n,s.canExtendMin=f,s.canExtendMax=v;var V=e.Double.getPrecision(c,0);s.precision=V;var F=[],P=e.Double.roundToPrecision(l,V);F.push(P);for(var R=0;R<g;R++)P=e.Double.roundToPrecision(P+c,V),F.push(P);return s.sequence=F,s.trimMinMax(r.min,r.max),s},t.calculateUnits=function(r,i,n,a){n=e.Double.ensureInRange(n,t.MIN_COUNT,t.MAX_COUNT),r===i&&(i=r+1);for(var o=0,u=0,s=0;s<a.length;s++){u=a[s];var c=e.Double.ceilWithPrecision(i/u),l=e.Double.floorWithPrecision(r/u);if(o=c-l,o<=n)break}var p=-r;p%=u;var f=new t;f.sequence=[];for(var v=r+p;f.sequence.push(v),!(v>=i);v+=u);return f.interval=u,f.intervalOffset=p,f.min=f.sequence[0],f.max=f.sequence[f.sequence.length-1],f},t.prototype.trimMinMax=function(e,t){var r=(e-this.min)/this.interval,i=(this.max-t)/this.interval,n=.001;(!this.canExtendMin||r>this.maxAllowedMargin&&r>n)&&(this.min=e),(!this.canExtendMax||i>this.maxAllowedMargin&&i>n)&&(this.max=t)},t})();t.MIN_COUNT=1,t.MAX_COUNT=1e3,e.NumericSequence=t})(powerbi||(powerbi={}));var powerbi;!(function(e){var t=(function(){function t(){}return t.prototype._ensureIncludeZero=function(){this.includeZero&&(this.min>0&&!this.hasFixedMin&&(this.min=0),this.max<0&&!this.hasFixedMax&&(this.max=0))},t.prototype._ensureNotEmpty=function(){if(this.min===this.max)if(this.min){var r=this.min,i=e.Double.log10(Math.abs(r)),n=void 0;i>=0&&i<4?(n=.5,this.forcedSingleStop=r):(n=e.Double.pow10(i)/2,this.forcedSingleStop=null),this.min=r-n,this.max=r+n}else this.min=0,this.max=t.DEFAULT_MAX,this.hasFixedMin=!0,this.hasFixedMax=!0},t.prototype._ensureDirection=function(){if(this.min>this.max){var e=this.min;this.min=this.max,this.max=e}},t.prototype.getSize=function(){return this.max-this.min},t.prototype.shrinkByStep=function(e,t){var r=this.min/t,i=e.min/t,n=Math.floor(i-r);this.min+=n*t,r=this.max/t,i=e.max/t,n=Math.ceil(i-r),this.max+=n*t},t.calculate=function(i,n,a,o,u){var s=new t;return s.includeZero=!!u,s.hasDataRange=r.hasValue(i)&&r.hasValue(n),s.hasFixedMin=r.hasValue(a),s.hasFixedMax=r.hasValue(o),i=e.Double.ensureInRange(i,t.MIN_SUPPORTED_DOUBLE,t.MAX_SUPPORTED_DOUBLE),n=e.Double.ensureInRange(n,t.MIN_SUPPORTED_DOUBLE,t.MAX_SUPPORTED_DOUBLE),s.hasFixedMin&&s.hasFixedMax?(s.min=a,s.max=o):s.hasFixedMin?(s.min=a,s.max=n>a?n:a):s.hasFixedMax?(s.min=i<o?i:o,s.max=o):s.hasDataRange?(s.min=i,s.max=n):(s.min=0,s.max=0),s._ensureIncludeZero(),s._ensureNotEmpty(),s._ensureDirection(),0===s.min?s.hasFixedMin=!0:0===s.max&&(s.hasFixedMax=!0),s},t.calculateDataRange=function(e,i,n){return r.hasValue(e)&&r.hasValue(i)?t.calculate(e,i,null,null,n):t.calculateFixedRange(0,t.DEFAULT_MAX)},t.calculateFixedRange=function(e,r,i){var n=new t;return n.hasDataRange=!1,n.includeZero=i,n.min=e,n.max=r,n._ensureIncludeZero(),n._ensureNotEmpty(),n._ensureDirection(),n.hasFixedMin=!0,n.hasFixedMax=!0,n},t})();t.DEFAULT_MAX=10,t.MIN_SUPPORTED_DOUBLE=-1e307,t.MAX_SUPPORTED_DOUBLE=1e307,e.NumericSequenceRange=t;var r;!(function(e){function t(e){return void 0!==e&&null!==e}e.hasValue=t})(r=e.ValueUtil||(e.ValueUtil={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r;!(function(t){function r(e){var t=w[e];return t?E[t]||e:e}function i(e){var t=e===-1?"Auto":e.toString(),r=E["DisplayUnitSystem_E"+t+"_Title"],i=e<=0?"{0}":E["DisplayUnitSystem_E"+t+"_LabelFormat"];if(r||i)return{title:r,format:i}}function n(e){return E[e]}function a(t){return e.NumberFormat.getCustomFormatMetadata(t)}function o(t){D=t,e.DefaultDisplayUnitSystem.reset(),e.WholeUnitsDisplayUnitSystem.reset()}function u(e,t){void 0===t&&(t=!1);var r=t?D.beautify(e):e;return{format:function(e){return null==e?D.null:g(e,r)}}}function s(t){var r=t.allowFormatBeautification?D.beautify(t.format):t.format;if(f(t)){var i=p(t.displayUnitSystemType),n=!!t.formatSingleValues;i.update(Math.max(Math.abs(t.value||0),Math.abs(t.value2||0)));var a,o=null!=t.precision;return o?a=-t.precision:i.displayUnit&&i.displayUnit.value>1&&(a=-C),{format:function(t){var u=x(t,!0);return b.isNullOrUndefinedOrWhiteSpaceString(u)?(t&&!i.isScalingUnit()&&Math.abs(t)<_&&!o&&(t=e.Double.roundToPrecision(t)),n?i.formatSingleValue(t,r,a,o):i.format(t,r,a,o)):u},displayUnit:i.displayUnit,options:t}}if(v(t.value,t.value2,t.tickCount)){var s=e.DateTimeSequence.getIntervalUnit(t.value,t.value2,t.tickCount);return{format:function(t){if(null==t)return D.null;var r=e.formattingService.dateFormatString(s);return g(t,r)},options:t}}return u(r)}function c(e,t,r){return null==e?D.null:g(e,r?D.beautify(t):t)}function l(e,t,r,i){if(!(t&&t.type&&t.type.dateTime)&&e instanceof Date){var n=h(V,null,!1);return g(e,n,i)}return g(e,h(t,r),i)}function p(t){if(null==t)return new e.DefaultDisplayUnitSystem(D.describe);switch(t){case e.DisplayUnitSystemType.Default:return new e.DefaultDisplayUnitSystem(D.describe);case e.DisplayUnitSystemType.WholeUnits:return new e.WholeUnitsDisplayUnitSystem(D.describe);case e.DisplayUnitSystemType.Verbose:return new e.NoDisplayUnitSystem;case e.DisplayUnitSystemType.DataLabels:return new e.DataLabelsDisplayUnitSystem(D.describe);default:return new e.DefaultDisplayUnitSystem(D.describe)}}function f(t){var r=t.value,i=t.value2,n=t.format,a=t.columnType;if(t.formatSingleValues&&n&&Math.abs(r)<R){var o=!e.NumberFormat.isStandardFormat(n);if(o){var u=e.NumberFormat.getCustomFormatMetadata(n,!0).precision;if(u<T)return!1}else if(e.Double.isInteger(r))return!1}if("number"==typeof r||"number"==typeof i)return!(a&&a.temporal&&a.temporal.year)}function v(e,t,r){return e instanceof Date&&t instanceof Date&&void 0!==r&&null!==r}function h(r,i,n){if(r){if(i){var a=e.DataViewObjects.getValue(r.objects,i);if(a)return a}if(!n){var o=r.type;if(o){if(o.dateTime)return t.DefaultDateFormat;if(o.integer)return o.temporal&&o.temporal.year?"0":t.DefaultIntegerFormat;if(o.numeric)return t.DefaultNumericFormat}}}}function m(e,t){var r;if(!e)return null;var i=e.length;if(i>0){r=e[0];for(var n=i-1,a=1,o=n;a<o;a++){var u=e[a];r=b.format(D.restatementComma,r,u)}if(i>1){var u=e[n];r=b.format(t,r,u)}}else r=null;return r}function y(e){return m(e,D.restatementCompoundAnd)}function d(e){return m(e,D.restatementCompoundOr)}function g(t,r,i){var n=x(t,!!i&&i);return b.isNullOrUndefinedOrWhiteSpaceString(n)?e.formattingService.formatValue(t,r):n}function x(e,t){return null==e&&t?D.null:e===!0?D.true:e===!1?D.false:"number"==typeof e&&isNaN(e)?D.NaN:e===Number.NEGATIVE_INFINITY?D.negativeInfinity:e===Number.POSITIVE_INFINITY?D.infinity:""}function S(e){var t=p(e);return t.units}var b=jsCommon.StringExtensions,w={"0.00 %;-0.00 %;0.00 %":"Percentage","0.0 %;-0.0 %;0.0 %":"Percentage1"};t.DefaultIntegerFormat="g",t.DefaultNumericFormat="#,0.00",t.DefaultDateFormat="d";var E={NullValue:"(Blank)",BooleanTrue:"True",BooleanFalse:"False",NaNValue:"NaN",InfinityValue:"+Infinity",NegativeInfinityValue:"-Infinity",RestatementComma:"{0}, {1}",RestatementCompoundAnd:"{0} and {1}",RestatementCompoundOr:"{0} or {1}",DisplayUnitSystem_EAuto_Title:"Auto",DisplayUnitSystem_E0_Title:"None",DisplayUnitSystem_E3_LabelFormat:"{0}K",DisplayUnitSystem_E3_Title:"Thousands",DisplayUnitSystem_E6_LabelFormat:"{0}M",DisplayUnitSystem_E6_Title:"Millions",DisplayUnitSystem_E9_LabelFormat:"{0}bn",DisplayUnitSystem_E9_Title:"Billions",DisplayUnitSystem_E12_LabelFormat:"{0}T",DisplayUnitSystem_E12_Title:"Trillions",Percentage:"#,0.##%",Percentage1:"#,0.#%",TableTotalLabel:"Total",Tooltip_HighlightedValueDisplayName:"Highlighted",Funnel_PercentOfFirst:"Percent of first",Funnel_PercentOfPrevious:"Percent of previous",Funnel_PercentOfFirst_Highlight:"Percent of first (highlighted)",Funnel_PercentOfPrevious_Highlight:"Percent of previous (highlighted)",GeotaggingString_Continent:"continent",GeotaggingString_Continents:"continents",GeotaggingString_Country:"country",GeotaggingString_Countries:"countries",GeotaggingString_State:"state",GeotaggingString_States:"states",GeotaggingString_City:"city",GeotaggingString_Cities:"cities",GeotaggingString_Town:"town",GeotaggingString_Towns:"towns",GeotaggingString_Province:"province",GeotaggingString_Provinces:"provinces",GeotaggingString_County:"county",GeotaggingString_Counties:"counties",GeotaggingString_Village:"village",GeotaggingString_Villages:"villages",GeotaggingString_Post:"post",GeotaggingString_Zip:"zip",GeotaggingString_Code:"code",GeotaggingString_Place:"place",GeotaggingString_Places:"places",GeotaggingString_Address:"address",GeotaggingString_Addresses:"addresses",GeotaggingString_Street:"street",GeotaggingString_Streets:"streets",GeotaggingString_Longitude:"longitude",GeotaggingString_Longitude_Short:"lon",GeotaggingString_Longitude_Short2:"long",GeotaggingString_Latitude:"latitude",GeotaggingString_Latitude_Short:"lat",GeotaggingString_PostalCode:"postal code",GeotaggingString_PostalCodes:"postal codes",GeotaggingString_ZipCode:"zip code",GeotaggingString_ZipCodes:"zip codes",GeotaggingString_Territory:"territory",GeotaggingString_Territories:"territories"};t.getLocalizedString=n;var D={null:E.NullValue,true:E.BooleanTrue,false:E.BooleanFalse,NaN:E.NaNValue,infinity:E.InfinityValue,negativeInfinity:E.NegativeInfinityValue,beautify:function(e){return r(e)},describe:function(e){return i(e)},restatementComma:E.RestatementComma,restatementCompoundAnd:E.RestatementCompoundAnd,restatementCompoundOr:E.RestatementCompoundOr},C=2,_=1e3,R=1e4,T=2,V={displayName:"",type:e.ValueType.fromPrimitiveTypeAndCategory(7)};t.getFormatMetadata=a,t.setLocaleOptions=o,t.createDefaultFormatter=u,t.create=s,t.format=c,t.formatVariantMeasureValue=l,t.createDisplayUnitSystem=p,t.getFormatString=h,t.formatListAnd=y,t.formatListOr=d,t.getDisplayUnits=S})(r=t.valueFormatter||(t.valueFormatter={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){e[e.Year=0]="Year",e[e.Month=1]="Month",e[e.Week=2]="Week",e[e.Day=3]="Day",e[e.Hour=4]="Hour",e[e.Minute=5]="Minute",e[e.Second=6]="Second",e[e.Millisecond=7]="Millisecond"})(t=e.DateTimeUnit||(e.DateTimeUnit={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=e.Prototype.inheritSingle;!(function(e){function t(e){return!_.isEmpty(e)&&e[0].objects}function r(e,t){if(!_.isEmpty(e)){var r=i(e),n=r[0]=i(r[0]);return n.objects=t,r}}function n(e){var t=_.isEmpty(e.categories)?_.isEmpty(e.values)?0:e.values[0].values.length:e.categories[0].values.length;return t}e.getCategoriesDataViewObjects=t,e.setCategoriesDataViewObjects=r,e.getRowCount=n})(r=t.DataViewCategoricalUtils||(t.DataViewCategoricalUtils={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=e.Prototype.inherit,n=e.Prototype.inheritSingle,a=jsCommon.ArrayExtensions;!(function(e){function r(e){return _.isEmpty(e.children)}function o(e,t){if(e)if(c(e))for(var r=0,i=e;r<i.length;r++){var n=i[r];n&&u(n,[],t)}else u(e,[],t)}function u(e,t,r){t.push(e);var i=r(e,t),n=null!=i&&0!==i;if(1===i){var a=e.children;if(!_.isEmpty(a))for(var o=0,s=a;o<s.length;o++){var c=s[o];if(c&&(n=u(c,t,r),!n))break}}return t.pop(),n}function s(e,t){var i=0;o(e,(function(e,n){return r(e)&&(t(e,i,n),i++),1}))}function c(e){return a.isArrayOrInheritedArray(e)}function l(e,t,r){if(e.level===t)return void r(e);var i=e.children;if(i&&i.length>0)for(var n=0,a=i.length;n<a;n++)l(i[n],t,r)}function p(e,t,r){var a=e,o=void 0===e.level,u=o||e.level<=t;if(u){var s=r?n:i,c=s(e),l=o||e.level<t;if(l&&!_.isEmpty(e.children)){c.children=s(e.children);for(var f=0,v=c.children.length;f<v;f++)c.children[f]=p(c.children[f],t,r)}a=c}return a}function f(e){var t=!1;if(e)if(d(e))t=f(e.rows)||f(e.columns);else{var r=e.levels;if(!_.isEmpty(r))for(var i=0,n=r;i<n.length;i++){var a=n[i];if(a.sources&&a.sources.length>=2){var o=a.sources[0].isMeasure;if(!o){t=!0;break}}}}return t}function v(e){var t=e.rows&&e.rows.levels,r=e.columns&&e.columns.levels,i=e.valueSources,n={primaryAxis:!_.isEmpty(t)&&h(t),secondaryAxis:!_.isEmpty(r)&&h(r),intersection:!_.isEmpty(i)&&_.map(i,(function(e){return e.index}))};return n}function h(e){return _.map(e,(function(e){var t=e.sources,r={selectIndices:_.map(t,(function(e){return e.index}))};return r}))}function m(e){return e&&e.rows&&!_.isEmpty(e.rows.levels)?e.rows.levels.length:0}function y(e){return e&&e.columns&&!_.isEmpty(e.columns.levels)?e.columns.levels.length-(t.DataViewMatrixMeasureHeaders.hasMeasureHeadersLevel(e.columns.levels)?1:0):0}function d(e){return"rows"in e&&"columns"in e&&"valueSources"in e}function g(e){if(e&&!_.isEmpty(e.children)){var t=[];return s(e,(function(e,r,i){t.push(e)})),t}}e.isLeafNode=r,e.forEachNodeDepthFirst=o,e.forEachLeafNode=s,e.forEachNodeAtLevel=l,e.inheritMatrixNodeHierarchy=p,e.containsCompositeGroup=f,e.extractSelectIndices=v,e.getRowGroupingLevelsCount=m,e.getColumnGroupingLevelsCount=y,e.getLeafNodes=g})(r=t.DataViewMatrixUtils||(t.DataViewMatrixUtils={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(e,t){var r=e.roles;return!!r&&!!r[t]}function r(e,t){var r=e.roles;return!!r&&_.any(t,(function(e){return r[e]}))}function i(e,t){if(!e)return!1;if(!e[t])return!1;if(_.size(e)>=2)for(var r in e)if(r!==t&&e[r])return!1;return!0}function n(e,t,i){var n=[];if(!_.isEmpty(e))for(var o=a(t),u=0,s=e.length;u<s;u++){var c=e[u];if(!i||r(c,i)){var l=o[c.index];if(_.isEmpty(l)){var p={metadataColumn:c,sourceIndex:u,projectionOrderIndex:void 0};n.push(p)}else for(var f=0,v=l;f<v.length;f++){var h=v[f],p={metadataColumn:c,sourceIndex:u,projectionOrderIndex:h};n.push(p)}}}return n}function a(e){for(var t={},r=0,i=e.length;r<i;r++){var n=e[r],a=t[n];a||(a=t[n]=[]),a.push(r)}return t}e.isForRole=t,e.isForAnyRole=r,e.isExactMatchRole=i,e.leftJoinMetadataColumnsAndProjectionOrder=n})(t=e.DataViewMetadataColumnUtils||(e.DataViewMetadataColumnUtils={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.scalarKeyMinPropertyIdentifier={objectName:"scalarKey",propertyName:"min"};var r;!(function(t){function r(t,r){var i;if(t&&(i=t.objects),!_.isEmpty(i)){for(var n=void 0,a=i.length,o=0;o<a;o++){var u=i[o],s=e.DataViewObjects.getValue(u,r);if(void 0!==s){n||(n={values:new Array(a)});var c={min:s};n.values[o]=c}}return n}}t.getScalarKeys=r})(r=t.ScalarKeyUtils||(t.ScalarKeyUtils={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(e,t){var i=e.categorical;i&&r(i,t);var n=e.table;n&&a(n,t);var u=e.matrix;u&&o(u,t);var s=e.tree;s&&f(s,t);var c=e.single;c&&w(c,t)}function r(e,t){i(e.categories,t);var r=e.values;n(r,t),S(r,t)}function i(e,t){e&&(m(e,t),y(e,t),g(e,t),b(e,t))}function n(e,t){if(e){m(e,t,0),y(e,t,0),g(e,t,0);var r=e.group;if(r)for(var i=0,n=r.select;i<n.length;i++){var a=n[i];m(a,t,1),y(a,t,1)}}}function a(e,t){var r=e.rows;m(r,t),y(r,t),g(r,t),b(r,t)}function o(e,t){u(e.rows,t),s(e.columns,t),c(e.values,t)}function u(e,t){l(e,t)}function s(e,t){p(e,t)}function c(e,t){p(e,t)}function l(e,t){e&&(y(e,t),x(e,t),b(e,t))}function p(e,t){e&&(y(e,t),g(e,t),b(e,t))}function f(e,t){v(e.nodes,t),h(e.values,t)}function v(e,t){e&&(y(e,t),b(e,t))}function h(e,t){e&&y(e,t)}function m(e,t,r){var i=e.bind;i&&(null!=r?t.visitRole(i.to,r):t.visitRole(i.to))}function y(e,t,r){var i=e.for;i&&(null!=r?t.visitRole(i.in,r):t.visitRole(i.in))}function d(e,t,r){var i=e.composite;if(i){t.enterComposite&&t.enterComposite();for(var n=0,a=i;n<a.length;n++){var o=a[n];m(o,t,r),y(o,t,r)}t.exitComposite&&t.exitComposite()}}function g(e,t,r){var i=e.select;if(i)for(var n=0,a=i;n<a.length;n++){var o=a[n];m(o,t,r),y(o,t,r)}}function x(e,t,r){var i=e.select;if(i)for(var n=0,a=i;n<a.length;n++){var o=a[n];m(o,t,r),y(o,t,r),d(o,t,r)}}function S(e,t){if(e){var r=e.group;r&&(t.visitRole(r.by),b(r,t))}}function b(e,t){if(t.visitReduction){var r=e.dataReductionAlgorithm;r&&t.visitReduction(r)}}function w(e,t){t.visitRole(e.role)}e.visitMapping=t,e.visitCategoricalCategories=i,e.visitCategoricalValues=n,e.visitTable=a,e.visitMatrixRows=u,e.visitMatrixColumns=s,e.visitMatrixValues=c,e.visitTreeNodes=v,e.visitTreeValues=h,e.visitGrouped=S})(t=e.CompiledDataViewMapping||(e.CompiledDataViewMapping={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(e,t){if(!_.isEmpty(e)){var r=e[0];if(r.values&&r.values.length>0)for(var n=0,a=r.values.length;n<a;++n){var o=r.values[n];if(o&&o.source&&i(o.source,t))return n}}return-1}function r(e,t){if(!_.isEmpty(e))for(var r=0,n=e.length;r<n;r++)if(i(e[r].source,t))return r;return-1}function i(e,t){var r=e.roles;return r&&r[t]}function n(e,t){return null!=e&&null!=e.metadata&&e.metadata.columns&&_.any(e.metadata.columns,(function(e){return e.roles&&void 0!==e.roles[t]}))}function a(e,t){return e&&e.source&&e.source.roles&&e.source.roles[t]===!0}e.getMeasureIndexOfRole=t,e.getCategoryIndexOfRole=r,e.hasRole=i,e.hasRoleInDataView=n,e.hasRoleInValueColumn=a})(t=e.DataRoleHelper||(e.DataRoleHelper={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=jsCommon.StringExtensions,n=e.Prototype.inheritSingle;!(function(r){function a(e,r){var i=e.categorical;if(!i||_.isEmpty(i.categories))return e;var a=i.categories,u=t.ScalarKeyUtils.getScalarKeys(a[0],t.scalarKeyMinPropertyIdentifier);if(!u||_.isEmpty(u.values))return e;for(var s,c,l,p,f=[],v=0,h=a.length;v<h;v++)for(var m=a[v],y=m.source.type,d=m.values,g=void 0,x=void 0,S=0,b=_.size(d);S<b;S++){var w=d[S],E=u.values[S];if(null==w&&null!=E){s||(s=n(e),c=s.categorical=n(i),l=c.categories=n(a)),g||(g=l[v]=n(m),x=g.values=n(d));var D=o(E.min,y,r);x[S]=D,f[S]||(p||(p=S),f[S]=[]),f[S][v]=t.SQExprBuilder.typedConstant(D,y)}}for(var v=0,h=_.size(l);v<h;v++)for(var m=l[v],C=p,R=_.size(m.identity);C<R;C++){var T=f[C];T&&(m.identity[C]=t.createDataViewScopeIdentity(t.SQExprUtils.getDataViewScopeIdentityComparisonExpr(m.identityFields,T)))}return s||e}function o(e,t,r){if(!_.isDate(e)||!t||!t.temporal)return null;var i=e;return t.temporal.year?u(i):t.temporal.quarter?s(i,r):t.temporal.month?c(i):t.temporal.day?l(i):void 0}function u(e){return e.getFullYear()}function s(e,t){var r=3,n=Math.floor((e.getMonth()+r)/r);return i.format(t,n.toLocaleString())}function c(t){return e.formattingService.formatValue(t,"MMMM")}function l(e){return e.getDate()}r.apply=a})(r=t.DataViewHierarchyLevelBackfill||(t.DataViewHierarchyLevelBackfill={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=e.Prototype.inherit,n=e.Prototype.inheritSingle,a=e.visuals.valueFormatter;!(function(r){function o(e,t,r,i,n){var a=e,o=e.categorical;if(o){var u=c(o,r),l=s(e.metadata);if(u&&(u.categories.length>=2||l)){var p=_.chain(n&&n[u.roleName]).filter((function(e){return e.suppressConcat})).map((function(e){return e.queryRef})).value();a=f(e,t,u.roleName,u.categories,p,l)}}return a}function u(e,t,r,n){var a;if(!_.isEmpty(n.categories)&&n.categories.length>=2){var o=i(e.columns),u=i(e,(function(e){e.columns=o})),s={metadata:u,categorical:n};a=f(s,t,r,n.categories,[])}else a={metadata:e,categorical:n};return a}function s(e){var r=_.find(e.columns,(function(e){return e.expr instanceof t.SQHierarchyLevelExpr}));if(r){var i=r.expr,n=i.arg;if(n instanceof t.SQHierarchyExpr){var a=n.arg;if(a instanceof t.SQPropertyVariationSourceExpr)return a.property}}}function c(t,r){var i,n=_.chain(r).filter((function(t){return!e.DataViewMapping.getRegressionUsage(t)})).map((function(e){return e.categorical})).value(),a=!_.isEmpty(n)&&_.every(n,(function(e){return!!e}));if(a){var o=l(n);if(o&&p(o,r)){var u=_.filter(t.categories,(function(e){return e.source.roles&&!!e.source.roles[o]}));if(!_.isEmpty(u)){var s=_.every(u,(function(e){return e.values.length===u[0].values.length}));s&&(i={roleName:o,categories:u})}}}return i}function l(t){var r=e.DataViewMapping.getRolesIfSameInAllCategoricalMappings(t,e.DataViewMapping.getAllRolesInCategories);if(1===_.size(r))return _.first(r)}function p(e,t){var r=_.every(t,(function(t){return!_.isEmpty(t.conditions)&&_.every(t.conditions,(function(t){return t[e]&&1===t[e].max}))}));return r}function f(r,i,a,o,u,s){var c,l,p=_.filter(o,(function(e){return!_.contains(u,e.source.queryName)}));if(1===o.length)c=p[0].values,l=p[0].source.type;else{var f=t.DataViewObjectDescriptors.findFormatString(i);c=h(p,f),l=e.ValueType.fromDescriptor({text:!0})}var v=_.map(p,(function(e){return e.source})),g=m(a,v,l,s),x=n(r);y(x,g);var S=r.categorical,b=t.DataViewCategoricalUtils.getCategoriesDataViewObjects(S.categories),w=d(p,g,c,b),E=_.last(o),D=_.findIndex(S.categories,(function(e){
return e===E})),C=n(S.categories);C.splice(D,0,w);for(var R=function(e){_.find(o,(function(t){return t===C[e]}))&&C.splice(e,1)},T=C.length-1;T>=0;T--)R(T);var V=n(S);return V.categories=C,x.categorical=V,x}function v(e,t){return e+" "+t}function h(e,t){for(var r=[],i=0,n=e;i<n.length;i++)for(var o=n[i],u=a.getFormatString(o.source,t),s=0,c=o.values.length;s<c;s++){var l=o.values&&o.values[s],p=a.format(l,u);r[s]=void 0===r[s]?p:r[s]+" "+p}return r}function m(e,t,r,i){var n;if(i){var a=_.last(t).displayName;n=v(i,a)}else for(var o=0,u=t;o<u.length;o++){var s=u[o];n=null==n?s.displayName:n+" "+s.displayName}var c={};c[e]=!0;var l={displayName:n,roles:c,type:r},p=_.last(t);return void 0!==p.isMeasure&&(l.isMeasure=p.isMeasure),l.queryName=p.queryName,l}function y(e,t){var r=n(e.metadata.columns);r.push(t);var i=n(e.metadata);i.columns=r,e.metadata=i}function d(e,t,r,i){var n={source:t,values:r},a=e[0];return a.identity&&(n.identity=a.identity),a.identityFields&&(n.identityFields=a.identityFields),i&&(n.objects=i),n}r.detectAndApply=o,r.applyToPlayChartCategorical=u})(r=t.DataViewConcatenateCategoricalColumns||(t.DataViewConcatenateCategoricalColumns={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t,r=jsCommon.ArrayExtensions;!(function(e){function t(e){var t=e&&e.usage&&e.usage.regression;return t||void 0}function i(e,t){var r=[];if(e){var i={visitRole:function(e){r.push(e)}};t(e,i)}return r}function n(e){var t=e&&e.usage&&e.usage.forecast;return!!t}function a(e,t){if(0!==_.size(e)){var i=_.map(e,(function(e){return t(e)})),n=i[0];if(!(i.length>=2)||_.every(i,(function(e){return r.sequenceEqual(e,n,(function(e,t){return e===t}))})))return n}}function o(t){if(!t.categories)return[];var r=[];return e.visitCategoricalCategories(t.categories,{visitRole:function(e){r.push(e)}}),r}function u(e){if(!e)return 0;for(var t=0,r=0,i=e;r<i.length;r++){var n=i[r];n.categorical&&(t|=1),n.matrix&&(t|=2),n.single&&(t|=4),n.table&&(t|=8),n.tree&&(t|=16)}return t}e.getRegressionUsage=t,e.getRoles=i,e.isForecastDefined=n,e.getRolesIfSameInAllCategoricalMappings=a,e.getAllRolesInCategories=o,e.targetDataViewKinds=u})(t=e.DataViewMapping||(e.DataViewMapping={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(e,t){var i=e.categorical;i&&r(i,t);var n=e.table;n&&a(n,t);var u=e.matrix;u&&o(u,t);var s=e.tree;s&&f(s,t);var c=e.single;c&&w(c,t)}function r(e,t){i(e.categories,t);var r=e.values;n(r,t),S(r,t)}function i(e,t){e&&(m(e,t),y(e,t),g(e,t),b(e,t))}function n(e,t){if(e){m(e,t,0),y(e,t,0),g(e,t,0);var r=e.group;if(r)for(var i=0,n=r.select;i<n.length;i++){var a=n[i];m(a,t,1),y(a,t,1)}}}function a(e,t){var r=e.rows;m(r,t),y(r,t),g(r,t),b(r,t)}function o(e,t){u(e.rows,t),s(e.columns,t),c(e.values,t)}function u(e,t){l(e,t)}function s(e,t){p(e,t)}function c(e,t){p(e,t)}function l(e,t){e&&(y(e,t),x(e,t),b(e,t))}function p(e,t){e&&(y(e,t),g(e,t),b(e,t))}function f(e,t){v(e.nodes,t),h(e.values,t)}function v(e,t){e&&(y(e,t),b(e,t))}function h(e,t){e&&y(e,t)}function m(e,t,r){var i=e.bind;i&&(null!=r?t.visitRole(i.to,r):t.visitRole(i.to))}function y(e,t,r){var i=e.for;i&&(null!=r?t.visitRole(i.in,r):t.visitRole(i.in))}function d(e,t,r){var i=e.composite;if(i){t.enterComposite&&t.enterComposite();for(var n=0,a=i;n<a.length;n++){var o=a[n];m(o,t,r),y(o,t,r)}t.exitComposite&&t.exitComposite()}}function g(e,t,r){var i=e.select;if(i)for(var n=0,a=i;n<a.length;n++){var o=a[n];m(o,t,r),y(o,t,r)}}function x(e,t,r){var i=e.select;if(i)for(var n=0,a=i;n<a.length;n++){var o=a[n];m(o,t,r),y(o,t,r),d(o,t,r)}}function S(e,t){if(e){var r=e.group;r&&(t.visitRole(r.by),b(r,t))}}function b(e,t){if(t.visitReduction){var r=e.dataReductionAlgorithm;r&&t.visitReduction(r)}}function w(e,t){t.visitRole(e.role)}e.visitMapping=t,e.visitCategorical=r,e.visitCategoricalCategories=i,e.visitCategoricalValues=n,e.visitTable=a,e.visitMatrixRows=u,e.visitMatrixColumns=s,e.visitMatrixValues=c,e.visitTreeNodes=v,e.visitTreeValues=h,e.visitGrouped=S})(t=e.DataViewMapping||(e.DataViewMapping={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=e.Prototype.inheritSingle;!(function(t){function r(e){var t=_.filter(e.dataRoles,(function(e){return!_.isEmpty(e.requiredTypes)}));n(e.dataview,e.dataViewMappings,t)}function n(e,t,r){if(!_.isEmpty(t)&&!_.isEmpty(r)){for(var i=a(e.metadata.columns,r),n=o(e.metadata.columns,r),u={},s=0,v=t;s<v.length;s++){var m=v[s];for(var y in m)null!=e[y]&&(u[y]=!0)}u.categorical&&c(e.categorical,i,n),u.table&&l(e.table,i,n),u.tree&&p(e.tree.root,i,n),u.matrix&&f(e.matrix,i,n),u.single&&h(e,t,r,n)}}function a(e,t){if(!e||!t)return function(){return!1};for(var r={},i=0,n=e;i<n.length;i++){var a=n[i],o=a.roles;if(o)for(var u=0,s=t;u<s.length;u++){var c=s[u];if(o[c.name]){r[a.index]=!0;break}}}return function(e){return!isNaN(e)&&!!r[e]}}function o(e,t){if(!e||!t)return function(){return!0};for(var r=[],i=0,n=e;i<n.length;i++){var a=n[i],o=u(a,t);o&&(r[a.index]=o)}return function(e,t){return!r[e]||r[e](t)}}function u(e,t){var r=s(e,t);if(!_.isEmpty(r))return function(e){return y(e,r)}}function s(t,r){var i=[],n=t&&t.roles;if(!n)return i;for(var a=0,o=r;a<o.length;a++){var u=o[a];if(n[u.name])for(var s=0,c=u.requiredTypes;s<c.length;s++){var l=c[s],p=e.ValueType.fromDescriptor(l);i.push(p)}}return i}function c(e,t,r){var i=e&&e.values;if(i){var n=i.grouped();if(n)for(var a=0,o=n;a<o.length;a++)for(var u=o[a],s=u.values,c=0,l=s;c<l.length;c++){var p=l[c],f=p.source.index;if(t(f))for(var v=0,h=p.values.length;v<h;v++)p.values=m(p.values,v,f,r)}}}function l(e,t,r){var i=e&&e.columns;if(i){for(var n=[],a=0,o=i;a<o.length;a++){var u=o[a];t(u.index)&&n.push(u.index)}for(var s=e.rows,c=0,l=s.length;c<l;c++)for(var p=0,f=n;p<f.length;p++){var v=f[p];s[c]=m(s[c],v,v,r)}}}function p(e,t,r){if(e.values)for(var i in e.values)t(i)&&("object"==typeof e.values[i]&&"value"in e.values[i]?e.values[i]=m(e.values[i],"value",i,r):e.values=m(e.values,i,i,r));else if(e.children)for(var n=0,a=e.children;n<a.length;n++){var o=a[n];p(o,t,r)}}function f(e,t,r){var i=e&&e.rows&&e.rows.root;i&&v(e,i,t,r)}function v(e,t,r,i){if(t.values)for(var n in t.values){var a=t.values[n],o=a.valueSourceIndex||0,u=e.valueSources[o].index;_.isNumber(u)&&r(u)&&(t.values[n]=m(a,"value",u,i))}else if(t.children)for(var s=0,c=t.children;s<c.length;s++){var l=c[s];v(e,l,r,i)}}function h(e,t,r,i){if(e.single){for(var n=[],a=0,o=r;a<o.length;a++){var u=o[a];u.name&&n.push(u.name)}for(var s=e.metadata.columns,c=0,l=t;c<l.length;c++){var p=l[c],f=p.single.role;if(n.indexOf(f)!==-1){var v=d(s,f);return void(v&&(e.single=m(e.single,"value",v.index,i)))}}}}function m(e,t,r,n){if(e){var a=e[t];return null===a||n(r,a)||(e=i(e),e[t]=null),e}}function y(e,t){for(var r=0,i=t;r<i.length;r++){var n=i[r];if(n.numeric||n.integer)return"number"==typeof e}return!1}function d(e,t){for(var r=0,i=e;r<i.length;r++){var n=i[r],a=n&&n.roles;if(a&&a[t])return n}}t.apply=r,t.filterVariantMeasures=n,t.generateMetadataColumnFilter=a,t.generateValueFilter=o,t.getColumnRequiredTypes=s,t.normalizeVariant=m})(r=t.DataViewNormalizeValues||(t.DataViewNormalizeValues={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(e,t,i){if(!e)return i;var n=e[t.objectName];return r.getValue(n,t.propertyName,i)}function i(e,t,r){if(e&&e[t]){var i=e[t];return i}return r}function n(e,t){var r=i(e,t);if(r)return r.$instances}function a(e,r,i){var n=t(e,r);return n&&n.solid?n.solid.color:i}e.getValue=t,e.getObject=i,e.getUserDefinedObjects=n,e.getFillColor=a})(t=e.DataViewObjects||(e.DataViewObjects={}));var r;!(function(e){function t(e,t,r){if(!e)return r;var i=e[t];return void 0===i?r:i}function r(e,r,i){var n=t(e,r);return n&&n.solid?n.solid.color:i}e.getValue=t,e.getFillColorByPropertyName=r})(r=e.DataViewObject||(e.DataViewObject={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t,r=jsCommon.JsonComparer;!(function(t){function n(t,r,i){var n=t[r];n||(t[r]=n=[]);for(var a=0,o=n.length;a<o;a++){var u=n[a];if(e.Selector.equals(u.selector,i))return u}var s={selector:i,properties:{}};return n.push(s),s}function a(t,r,i,n){var a=_.find(t[r],(function(t){return e.Selector.equals(t.selector,i)}));a&&(a.selector=n)}function o(t,r,i){var n=t[r];if(!n)return!1;var a=_.remove(n,(function(t){return e.Selector.equals(t.selector,i)})).length>0;return _.isEmpty(n)&&delete t[r],a}function u(e,t){if(e&&t)for(var r in t)for(var i=t[r],n=0,a=i;n<a.length;n++){var o=a[n];for(var u in o.properties)p(e,r,o.selector,u)}}function s(e,t){if(e&&t)for(var r in t){var i=t[r];if(i){var n=e[r];n||(n=e[r]=[]),c(n,i)}}}function c(t,r){for(var i,n=0,a=r;n<a.length;n++){var o=a[n];i=!1;for(var u=0,s=t;u<s.length;u++){var c=s[u];if(e.Selector.equals(c.selector,o.selector)){l(c.properties,o.properties),i=!0;break}}if(!i){var p={selector:o.selector,properties:{}};l(p.properties,o.properties),t.push(p)}}}function l(e,t){for(var r in t){var i=t[r];if(i){var n=e[r];n||(e[r]=i)}}}function p(e,t,r,n){var a=m(e,t,r);a&&i.deleteSingleProperty(a,n)}function f(e,t,r,i){n(e,t.objectName,r).properties[t.propertyName]=i}function v(e,t,r){var i=h(e,t,r);if(i)return i[t.propertyName]}function h(e,t,r){var i=m(e,t.objectName,r);if(i)return i.properties}function m(t,r,i){if(t){var n=t[r];if(n)for(var a=0,o=n.length;a<o;a++){var u=n[a];if(e.Selector.equals(u.selector,i))return u}}}function y(t,i){return t instanceof e.SemanticFilter&&i instanceof e.SemanticFilter?e.SemanticFilter.isSameFilter(t,i):r.equals(t,i)}function d(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!y(e[r],t[r]))return!1;return!0}function g(t,r){if(r.bool)return"boolean"!=typeof t&&(t=!1),e.SQExprBuilder.boolean(t);if(r.text||r.scripting&&r.scripting.source)return e.SQExprBuilder.text(t);if(r.numeric){if($.isNumeric(t))return e.SQExprBuilder.double(+t)}else if(r.integer){if($.isNumeric(t))return e.SQExprBuilder.integer(Math.floor(+t))}else if(r.fill){if(t)return{solid:{color:e.SQExprBuilder.text(t)}}}else{if(r.formatting)return r.formatting.labelDisplayUnits?e.SQExprBuilder.double(+t):e.SQExprBuilder.text(t);if(r.enumeration)return $.isNumeric(t)?e.SQExprBuilder.double(+t):e.SQExprBuilder.text(t);if(r.misc)t=t?e.SQExprBuilder.text(t):null;else if(r.dateTime)t=t?e.SQExprBuilder.dateTime(t):null;else if(r.image){if(t){var i=t,n={name:e.SQExprBuilder.text(i.name),url:e.SQExprBuilder.text(i.url)};return i.scaling&&(n.scaling=e.SQExprBuilder.text(i.scaling)),n}}else if(r.geoJson&&t){var a=t,o={type:e.SQExprBuilder.text(a.type),name:e.SQExprBuilder.text(a.name),content:a.content?e.SQExprBuilder.text(a.content):e.SQExprBuilder.nullConstant()};return o}}return t}function x(e){var t={};for(var r in e){var i=e[r];if(!_.isEmpty(i)){for(var n=[],a=0,o=i;a<o.length;a++){var u=o[a];n.push({properties:S(u.properties),selector:u.selector})}t[r]=n}}return t}function S(e){return _.clone(e)}function b(t){function r(t,i,n){var u=t[i];if(u instanceof e.SQExpr)a(u,t,i,n,o);else if("object"==typeof u)for(var s in u)o.push(s),r(u,s,n),o.pop()}var i=t.definitions,n=t.descriptors,a=t.visitor,o=[];for(var u in i)if(!_.isEmpty(i[u]))for(var s=n&&n[u],c=0,l=i[u];c<l.length;c++){var p=l[c],f=p.properties;if(f)for(var v in f){var h=s&&s.properties[v];r(f,v,h&&h.type)}}}t.ensure=n,t.updateSelector=a,t.deleteObjectDefinition=o,t.deleteProperties=u,t.extend=s,t.deleteProperty=p,t.setValue=f,t.getValue=v,t.getPropertyContainer=h,t.getObjectDefinition=m,t.propertiesAreEqual=y,t.allPropertiesAreEqual=d,t.encodePropertyValue=g,t.clone=x,t.visitPropertyExprs=b})(t=e.DataViewObjectDefinitions||(e.DataViewObjectDefinitions={}));var i;!(function(e){function t(e,t){delete e.properties[t]}function r(e){return!_.startsWith(e,"$")}e.deleteSingleProperty=t,e.isValidPropertyName=r})(i=e.DataViewObjectDefinition||(e.DataViewObjectDefinition={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r;!(function(t){function r(t){return s(t,(function(t){var r=e.ValueType.fromDescriptor(t.type).formatting;return r&&r.formatString}))}function i(e){return s(e,(function(e){var t=e.type;return t&&t.filter&&!t.filter.selfFilter}))}function n(e){return s(e,a)}function a(e){var t=e&&e.type;return t&&t.filter&&t.filter.selfFilter}function o(e){return s(e,(function(e){var t=e.type;return t&&t.operations&&t.operations.searchEnabled}))}function u(e){return s(e,(function(e){var t=e.type;return t&&!!t.expression&&t.expression.defaultValue}))}function s(e,t){if(e)for(var r in e){var i=e[r].properties;for(var n in i)if(t(i[n]))return{objectName:r,propertyName:n}}}t.findFormatString=r,t.findFilterOutput=i,t.findSelfFilter=n,t.isSelfFilter=a,t.findSelfFilterEnabled=o,t.findDefaultValue=u})(r=t.DataViewObjectDescriptors||(t.DataViewObjectDescriptors={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function r(t,r,i){for(var n,a=0,o=i.length;a<o;a++){var u=i[a],s=u.name,c=e.DataViewObjectEvaluator.run(t,r[s],u.properties);c&&(n||(n={}),n[s]=c)}return n}function i(e){var t={data:[]};if(e)for(var r in e)for(var i=e[r],a=0,o=i.length;a<o;a++){var u=i[a];n(t,u.selector).objects.push({name:r,properties:u.properties})}return t}function n(t,r){var i;r&&r.data?i=t.data:r&&r.metadata?(t.metadata||(t.metadata=[]),i=t.metadata):(t.metadataOnce||(t.metadataOnce=[]),i=t.metadataOnce);for(var n=0,a=i;n<a.length;n++){var o=a[n];if(e.Selector.equals(r,o.selector))return o}var u={selector:r,objects:[]};return i.push(u),u}function a(e,t,r,i){i&&(o(e,t,r,i),u(e,t,r,i))}function o(t,r,i,n){var a=e.DataViewObjectDescriptors.findFormatString(r);if(a)for(var o=0,u=n.length;o<u;o++){var l=n[o];l&&c(t,a,l.queryName,l.format||s(i,o))}}function u(t,r,i,n){var a=e.DataViewObjectDescriptors.findDefaultValue(r);if(a)for(var o=0,u=n;o<u.length;o++){var s=u[o];s&&l(t,a,s.queryName,s.defaultValue)}}function s(e,t){for(var r=0,i=e.length;r<i;r++){var n=e[r];if(n&&n.index===t)return n.format}}function c(t,r,i,n){n&&p(t,r,{metadata:i},e.SQExprBuilder.text(n))}function l(e,t,r,i){i&&p(e,t,{metadata:r},i)}function p(e,t,r,i){var n;if(r){var a=e.metadata;a||(a=e.metadata=[]),n=a}else{var o=e.metadataOnce;o||(o=e.metadataOnce=[{selector:r,objects:[]}]),n=o}var u,s=f(n,r);if(s){var c=s.objects;if(u=v(c,t.objectName)){if(u.properties[t.propertyName])return}else u={name:t.objectName,properties:{}},c.push(u)}else u={name:t.objectName,properties:{}},n.push({selector:r,objects:[u]});u.properties[t.propertyName]=i}function f(t,r){for(var i=0,n=t.length;i<n;i++){var a=t[i];if(e.Selector.equals(a.selector,r))return a}}function v(e,t){for(var r=0,i=e.length;r<i;r++){var n=e[r];if(n.name===t)return n}}t.evaluateDataViewObjects=r,t.groupObjectsBySelector=i,t.addImplicitObjects=a})(t=e.DataViewObjectEvaluationUtils||(e.DataViewObjectEvaluationUtils={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=jsCommon.Color;!(function(r){function n(e,t,r){if(t){var i,n=t.properties;for(var o in r){var u=r[o],s=n[o];if(s){var c=a(e,s,u);void 0!==c&&(i||(i={}),i[o]=c)}}return i}}function a(r,i,n){var a=i.type;if(a&&a.expression)return n;var s=d(r,n,e.ValueType.fromDescriptor(i.type));return void 0!==s||n instanceof t.RuleEvaluation?s:o(r,n,a)||u(r,n,a)||p(r,n,a)||f(r,n,a)||m(r,n,a)||n}function o(t,r,i){var n=i.fill;if(n)return n&&n.solid&&n.solid.color&&r.solid?{solid:{color:d(t,r.solid.color,e.ValueType.fromExtendedType(19664897))}}:void 0}function u(e,t,r){if(r.fillRule){var i;if(t.linearGradient2){var n=t.linearGradient2;i={linearGradient2:{min:s(e,n.min),max:s(e,n.max)}};var a=l(e,n.nullColoringStrategy);a&&(i.linearGradient2.nullColoringStrategy=a)}else if(t.linearGradient3){var n=t.linearGradient3;i={linearGradient3:{min:s(e,n.min),mid:s(e,n.mid),max:s(e,n.max)}};var a=l(e,n.nullColoringStrategy);a&&(i.linearGradient3.nullColoringStrategy=a)}return i}}function s(e,t){var r={color:c(e,t.color)},i=d(e,t.value,x);return null!=i&&(r.value=i),r}function c(e,t){return d(e,t,g)}function l(e,t){if(t){var r={strategy:d(e,t.strategy,b)};return t.color&&(r.color=c(e,t.color)),r}}function p(t,r,i){if(i.image&&r){var n={name:d(t,r.name,S),url:d(t,r.url,e.ValueType.fromDescriptor(e.ImageDefinition.urlType))};return r.scaling&&(n.scaling=d(t,r.scaling,S)),n}}function f(e,t,r){if(r.paragraphs&&t)return y(e,t,v)}function v(e,t){var r,i=t.textRuns,n=y(e,i,h);return i!==n&&(r=_.clone(t),r.textRuns=n),r||t}function h(e,t){var r,i=t.value,n=d(e,i,S);return void 0!==n&&(r=_.clone(t),r.value=n),r||t}function m(e,t,r){if(r.geoJson&&t){var i={name:d(e,t.name,S),type:d(e,t.type,S),content:d(e,t.content,S)};return i}}function y(e,t,r){for(var i,n=0,a=t.length;n<a;n++){var o=t[n],u=r(e,o);i||o===u||(i=_.take(t,n)),i&&i.push(u)}return i||t}function d(e,r,i){return r instanceof t.SQExpr?w.evaluate(r,e):r instanceof t.RuleEvaluation?r.evaluate(e):void 0}var g=e.ValueType.fromDescriptor({formatting:{color:!0}}),x=e.ValueType.fromDescriptor({numeric:!0}),S=e.ValueType.fromDescriptor({text:!0}),b=e.ValueType.fromDescriptor({enumeration:e.NullStrategy.type});r.run=n,r.evaluateProperty=a,r.evaluateFillRule=u,r.evaluateValue=d;var w=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.evaluate=function(e,r){if(null!=e)return e.accept(t.instance,r)},t.prototype.visitColumnRef=function(e,t){return t.getExprValue(e)},t.prototype.visitConstant=function(e,t){return e.value},t.prototype.visitMeasureRef=function(e,t){return t.getExprValue(e)},t.prototype.visitAggr=function(e,t){return t.getExprValue(e)},t.prototype.visitFillRule=function(e,t){var r=e.input.accept(this,t);if(void 0!==r){var i=t.getColorAllocator(e);if(i)return i.color(r)}},t.prototype.visitPercentile=function(e,t){return t.getExprValue(e)},t.prototype.visitSelectRef=function(e,t){return t.getExprValue(e)},t.prototype.visitThemeColor=function(e,t){var r=t.getThemeColor(e.color);if(r)return i.shadeColor(r,e.percent)},t})(t.DefaultSQExprVisitorWithArg);w.instance=new w})(r=t.DataViewObjectEvaluator||(t.DataViewObjectEvaluator={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=e.Prototype.inheritSingle;!(function(e){function r(e){var r=e.values;if(r){var n,a=!!r.source;if(a){n=i(r.grouped());var o=0===t.DataViewCategoricalUtils.getRowCount(e),u=r.length>=1&&(o||void 0!==_.first(r).identity);if(!_.isEmpty(r)&&u)for(var s=0,c=void 0,l=0,p=r.length;l<p;l++){var f=r[l];if(!c||f.identity!==c.identity){var v=n[s];c=v?i(v):v=n[s]={values:null},n[s]=c,c.values=[],s++}c.values.push(f)}else for(var l=0,p=n.length;l<p;l++){var h=n[l];_.isEmpty(h.values)||(n[l]=h=i(h),h.values=[])}}else n=[{values:r}];r.grouped=function(){return n},e.values=r}}e.apply=r})(r=t.DataViewCategoricalEvalGrouped||(t.DataViewCategoricalEvalGrouped={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=jsCommon.ArrayExtensions,n=e.Prototype.inheritSingle;!(function(r){function o(e,t,r,i){var n=e;return r&&(n=u(n,t,r,i),n=p(n,t,r)),n}function u(r,i,o,u){if(!o)return r;var p=e.DataViewMapping.getRoles(i.values,e.DataViewMapping.visitMatrixValues);if(_.isEmpty(p))return r;var f=r.valueSources,v=s(o,p);if(_.isEmpty(f)||c(r.valueSources,v))return r;var h=t.DataViewMetadataColumnUtils.leftJoinMetadataColumnsAndProjectionOrder(f,v,p),m=_.chain(h).filter((function(e){return void 0!==e.projectionOrderIndex})).sortBy((function(e){return e.projectionOrderIndex})).value(),y=n(r);y.rows=l(y.rows,y.valueSources,m);var d=_.map(m,(function(e){return e.metadataColumn}));return y.valueSources=d,y.columns=a.update(y.columns,d.slice()),u.hierarchyTreesRewritten=!0,y}function s(e,t){for(var r=[],i=0,n=t;i<n.length;i++){var a=n[i],o=e[a];_.isEmpty(o)||r.push.apply(r,o)}return r}function c(e,t){var r=_.map(e,(function(e){return e.index}));return i.sequenceEqual(r,t,(function(e,t){return e===t}))}function l(e,r,i){var a,o=r.length,u=i.length,s=n(e);return s.root=t.DataViewPivotMatrix.cloneTreeExecuteOnLeaf(s.root,(function(e){var t=e.values;if(t)if(void 0===a&&(a=Object.keys(e.values).length/o),u>0){for(var r={},s=0;s<a;s++)for(var c=s*o,l=s*u,p=0;p<u;p++){var f=i[p].sourceIndex,v=t[c+f];p!==(v.valueSourceIndex||0)&&(v=n(v),v.valueSourceIndex=p||void 0),r[l+p]=v}e.values=r}else e.values=void 0})),s}function p(t,r,i){var a,o=e.DataViewMapping.getRoles(r.rows,e.DataViewMapping.visitMatrixRows),u=s(i,o),c=f(t.rows,u),l=e.DataViewMapping.getRoles(r.columns,e.DataViewMapping.visitMatrixColumns),p=s(i,l),v=f(t.columns,p);return(c||v)&&(a=n(t),a.rows=c||a.rows,a.columns=v||a.columns),a||t}function f(e,r){var i,o=e.levels,u=_.chain(o).map((function(e,t){return t})).filter((function(e){var t=o[e];return _.size(t.sources)>=2&&!a.isMeasureHeadersLevel(t)})).value();if(!_.isEmpty(u)){for(var s=_.uniq(r),c=u.length-1;c>=0;c--){var l=u[c],p=e.levels[l],f=v(p,s);if(!_.isEmpty(f)){void 0===i&&(i=n(e),i.levels=n(e.levels),i.root=t.DataViewMatrixUtils.inheritMatrixNodeHierarchy(e.root,l,!0));var y=n(p);i.levels[l]=h(y,f),m(i.root,l,f)}}return i}}function v(e,r){var i,n=e.sources;if(n&&n.length>=2){var a=t.DataViewMetadataColumnUtils.leftJoinMetadataColumnsAndProjectionOrder(n,r),o=_.sortBy(a,(function(e){return e.projectionOrderIndex}));i=_.map(o,(function(e,t){var r={originalSourceIndex:e.sourceIndex,newSourceIndex:t};return r}))}return i}function h(e,t){var r=e.sources;e.sources=r.slice(0);for(var i=0,n=t;i<n.length;i++){var a=n[i];e.sources[a.newSourceIndex]=r[a.originalSourceIndex]}return e}function m(e,r,i){var a=_.reduce(i,(function(e,t){return e[t.originalSourceIndex]=t,e}),{});return t.DataViewMatrixUtils.forEachNodeAtLevel(e,r,(function(e){var t=e.levelValues;if(!_.isEmpty(t)){for(var r=_.sortBy(t,(function(e){var t=a[e.levelSourceIndex];return t&&t.newSourceIndex})),i=0,o=r.length;i<o;i++){var u=n(r[i]),s=a[u.levelSourceIndex];u.levelSourceIndex=s&&s.newSourceIndex,r[i]=u}e.levelValues=r;var c=_.last(r);e.value!==c.value&&(e.value=c.value),(e.levelSourceIndex||0)!==c.levelSourceIndex&&(e.levelSourceIndex=c.levelSourceIndex)}})),e}r.apply=o})(r=t.DataViewMatrixProjectionOrder||(t.DataViewMatrixProjectionOrder={}));var a;!(function(e){function r(e,t){var r,n=e.levels,a=i(n),c=a?_.size(n)>=2:_.size(n)>=1,l=c?t.length>=2:t.length>=1;return r=a?l?o(e,t):u(e):l?s(e,t):e}function i(e){return!_.isEmpty(e)&&a(_.last(e))}function a(e){return e&&_.every(e.sources,(function(e){return e.isMeasure}))}function o(e,r){var i=n(e),a=i.levels=n(i.levels),o=a.length-1,u=a[o]=n(a[o]);return u.sources=r,i.root=t.DataViewMatrixUtils.inheritMatrixNodeHierarchy(i.root,o,!0),t.DataViewMatrixUtils.forEachNodeDepthFirst(i.root,(function(e){return c(e,o)?(e.children=l(o,r.length,e.isSubtotal),2):1})),i}function u(e){var r=n(e),i=r.levels=n(r.levels),a=i.length-1;return i.splice(a,1),r.root=t.DataViewMatrixUtils.inheritMatrixNodeHierarchy(r.root,a,!0),t.DataViewMatrixUtils.forEachNodeDepthFirst(r.root,(function(e){return c(e,a)?(e.children=void 0,2):1})),r}function s(e,r){var i=n(e),a=i.levels=n(i.levels),o={sources:r};a.push(o);var u=a.length-1;return i.root=t.DataViewMatrixUtils.inheritMatrixNodeHierarchy(i.root,u,!0),t.DataViewMatrixUtils.forEachNodeDepthFirst(i.root,(function(e){return t.DataViewMatrixUtils.isLeafNode(e)?(e.children=l(u,r.length,e.isSubtotal),2):1})),i}function c(e,t){var r=e.children;return!_.isEmpty(r)&&r[0].level===t}function l(e,t,r){for(var i=[],n=0,a=t;n<a;n++){var o={level:e};n>0&&(o.levelSourceIndex=n),r&&(o.isSubtotal=!0),i.push(o)}return i}e.update=r,e.hasMeasureHeadersLevel=i,e.isMeasureHeadersLevel=a})(a=t.DataViewMatrixMeasureHeaders||(t.DataViewMatrixMeasureHeaders={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=e.Prototype.inherit;!(function(e){function r(e){var r=e.categorical;if(!r)return null;var n=r.categories;if(!n||1!==n.length)return null;var a=r.values;if(_.isEmpty(a)||a.source)return null;for(var o=n[0],u=o.identity,s=o.values,c=[],l=[],p=0,f=s.length;p<f;p++)for(var v=s[p],h=u[p],m=0,y=a.length;m<y;m++){var d=a[m],g=i(d.source);if(d.identity)return null;g.groupName=v;var x={source:g,values:[d.values[p]],identity:h,min:d.min,max:d.max,subtotal:d.subtotal},S=d.highlights;S&&(x.highlights=[S[p]]),c.push(g),l.push(x)}var b=i(e.metadata);return b.columns=c,a=t.DataViewTransform.createValueColumns(l,o.identityFields,o.source),{metadata:b,categorical:{values:a},matrix:e.matrix}}e.apply=r})(r=t.DataViewPivotCategorical||(t.DataViewPivotCategorical={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r;!(function(t){function r(t,r){r.columnHierarchyRewritten||(t.columns=e.Prototype.inherit(t.columns));var o=t.columns;r.rowHierarchyRewritten||(t.rows=e.Prototype.inherit(t.rows));var u=t.rows;if(!(o.levels.length>1)){var s={level:0},c=o.root.children,l=c.length,p=u.levels.length;if(l>0){var f=0,v=function(e){if(e.values){s.values||(s.values={});for(var t=0;t<l;t++)s.values[f++]=e.values[t];e.values=void 0}if(l>1){e.children||(e.children=[]);for(var r=0;r<l;r++){var i={level:p},n=c[r];i.levelSourceIndex=n.levelSourceIndex,e.isSubtotal&&(i.isSubtotal=!0),e.children.push(i)}}};r.hierarchyTreesRewritten?i(u.root,v):t.columns.root=a(u.root,v)}else r.hierarchyTreesRewritten||(t.columns.root=n(u.root));if(l>1){var h={sources:o.levels[0].sources};u.levels.push(h),o.levels.length=0}if(r.hierarchyTreesRewritten)t.columns.root=u.root,t.rows.root={children:[s]};else{var m=e.Prototype.inherit(t.rows.root);m.children=[s],t.rows.root=m}t.columns.levels=u.levels,t.rows.levels=[]}}function i(e,t){var r=e.children;if(r&&r.length>0)for(var n=0,a=r.length;n<a;n++)i(r[n],t);else t(e)}function n(e){return a(e)}function a(t,r){var i=e.Prototype.inherit(t),n=t.children;if(n&&n.length>0){for(var o=[],u=0,s=n.length;u<s;u++){var c=a(n[u],r);o.push(c)}i.children=o}else r&&r(i);return i}t.apply=r,t.cloneTree=n,t.cloneTreeExecuteOnLeaf=a})(r=t.DataViewPivotMatrix||(t.DataViewPivotMatrix={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function r(e,r){for(var i=e.identity,n=e.values,a=[],o={},u=0,s=_.size(i);u<s;u++){var c=i[u],l=t.ScopeIdentityExtractor.getSubset(c.expr,r),p=l&&t.createDataViewScopeIdentity(l),f=p&&p.key,v=o[f],h=void 0;void 0===v?(h={identity:p,groupValue:n[u],groupIndex:a.length,valueRowIndices:[]},a.push(h),o[f]=h.groupIndex):h=a[v],h.valueRowIndices.push(u)}return a}function i(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=null;return t}function n(t,r,i){for(var n=e.Prototype.inherit(t),a=0,o=i;a<o.length;a++){var u=o[a];n[u]=r[u]}return n}var a;!(function(a){function o(e,t){if(e.categorical&&t){var r=e.categorical;if(!(_.isEmpty(r.categories)||r.values&&r.values.source)){var i=u(r,t);if(!_.isEmpty(i))return s(e.metadata,r,t,i)}}}function u(e,t){var r=t.source.identityExprs;return r?r:1===e.categories.length?t.identityFields:void 0}function s(r,i,n,a){var o=n.values,u=o.length;if(0!==u){var s=i.values?i.values.grouped()[0].values:[],l=c(n,u,s,a);if(l){var p=t.createCategoricalDataViewBuilder().withCategories(i.categories).withGroupedValues(l).build();return r=e.Prototype.inherit(r),r.columns=p.metadata.columns,{metadata:r,categorical:p.categorical}}}}function c(e,t,a,o){var u=i(t),s=r(e,o);if(!_.isEmpty(s)){var c=_.map(s,(function(e){var t=e.valueRowIndices,r=_.map(a,(function(e){var r={values:n(u,e.values,t)};return e.highlights&&(r.highlights=n(u,e.highlights,t)),r}));return r}));return{groupColumn:{source:e.source,identityFrom:{fields:o,identities:_.map(s,(function(e){return e.identity}))},values:_.map(s,(function(e){return e.groupValue}))},valueColumns:_.map(a,(function(e){return{source:e.source}})),data:c}}}a.apply=o})(a=t.DataViewSelfCrossJoin||(t.DataViewSelfCrossJoin={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=jsCommon.ArrayExtensions,n=e.data.DataShapeBindingDataReduction,a=e.Prototype.inheritSingle;!(function(r){function o(e,t,r,i,a){t&&1===t.length&&r.categorical&&r.categorical.dataReductionAlgorithm&&e&&s(e,r)&&(e.Primary.Groupings=[e.Secondary.Groupings[0],e.Primary.Groupings[0]],e.Secondary=void 0,e.DataReduction={Primary:n.createFrom(r.categorical.dataReductionAlgorithm),DataVolume:a||r.categorical.dataVolume||i})}function u(e){return e&&e.Groupings&&1===e.Groupings.length&&!_.isEmpty(e.Groupings[0].Projections)&&!e.Groupings[0].Subtotal&&_.isEmpty(e.Groupings[0].SuppressedProjections)}function s(e,t){return!!u(e.Primary)&&(!(!u(e.Secondary)||1!==e.Secondary.Groupings[0].Projections.length)&&(!e.DataReduction||!e.DataReduction.Primary&&!e.DataReduction.Secondary))}function c(e,r,n,a,o){if(!l(e,r,n,a,o))return e;var u={metadata:{columns:i.copy(e.metadata.columns)}};if(e.single&&(u.single=e.single),e.table&&(u.table=e.table),e.matrix){var s=p(e.matrix);if(!_.isEmpty(s.valueSources)){var c=t.DataViewMatrixUtils.containsCompositeGroup(s.columns);c||(u.categorical=f(s,u.metadata.columns))}}return u}function l(t,r,i,n,a){if(_.isEmpty(r)||!t||_.isEmpty(a))return!1;var o=_.filter(a,(function(t){return!e.DataViewMapping.getRegressionUsage(t)}));if(1!==o.length)return!1;var u=o[0].categorical;if(!u)return!1;var s=t.matrix;if(!s)return!1;if(!s.rows||!s.rows.levels||2!==s.rows.levels.length)return!1;var c=[],l=[],p=function(t,r){var a=n[t];if(a)for(var o=0,u=a.all();o<u.length;o++){var s=u[o];i[s.queryRef]===e.VisualDataRoleKind.Grouping&&r.push(s.queryRef)}};if(e.DataViewMapping.visitCategoricalCategories(u.categories,{visitRole:function(e){p(e,c)}}),e.DataViewMapping.visitGrouped(u.values,{visitRole:function(e){p(e,l)}}),e.DataViewMapping.visitCategoricalValues(u.values,{visitRole:function(e){p(e,l)}}),_.isEmpty(c)||_.isEmpty(l))return!1;for(var f=0,v=s.columns.levels;f<v.length;f++)for(var h=v[f],m=0,y=h.sources;m<y.length;m++){var d=y[m];if(!d.isMeasure)return!1}return!0}function p(e){var t=e.rows,r=t.root,i=r.children,n=[],o=t.levels[0],u=r.childIdentityFields,s={},c=[],l=t.levels[1],p=_.isEmpty(i)?void 0:i[0].childIdentityFields,f=e.valueSources.length,v=function(e){var t=s[e.key];return t};if(i)for(var h=function(e){var t=e.identity.key,r=s[t];void 0===r&&(r=c.length,s[t]=r,c.push(e))},m=0,y=i;m<y.length;m++){var d=y[m];n.push(d);for(var g=0,x=d.children;g<x.length;g++){var S=x[g];h(S)}}for(var b=new Array(c.length),w=0;w<n.length;++w)for(var d=i[w],E=0,D=d.children;E<D.length;E++){var S=D[E],C=v(S.identity);b[C]||(b[C]=new Array(n.length)),b[C][w]=S.values}var R={root:{children:_.map(n,(function(e){var t=a(e);return t.level=0,t.children=void 0,t.childIdentityFields=void 0,t})),childIdentityFields:u},levels:[o]};if(f>0){for(var T=_.map(e.columns.root.children,(function(e){var t={level:1};return e.levelSourceIndex&&(t.levelSourceIndex=e.levelSourceIndex),t})),C=0;C<R.root.children.length;++C)R.root.children[C].children=T;R.levels.push(e.columns.levels[0])}var V={root:{children:_.map(c,(function(e){var t=a(e);return t.level=0,t.children=void 0,t.childIdentityFields=void 0,t})),childIdentityFields:p},levels:[l]};if(f>0)for(var C=0;C<c.length;++C){for(var F=V.root.children[C],P={},w=0;w<n.length;++w)for(var M=b[C]&&b[C][w],A=0;A<f;++A){var N=w*f+A;P[N]=M?M[A]:0===A?{value:null}:{value:null,valueSourceIndex:A}}F.values=P}var Q={rows:V,columns:R,valueSources:e.valueSources};return Q}function f(e,t){for(var r=e.columns.root.children.length,i=e.valueSources,n=i.length,a=v(e),o=[],u=0;u<r;++u){var s=e.columns.root.children[u],c={values:[],identity:s.identity,name:null!=s.value?s.value:null};o.push(c);for(var l=0;l<n;++l){var p=i[l],f={};for(var h in p)f[h]=p[h];f.groupName=c.name,t.push(f);var m={source:f,values:[],identity:c.identity};c.values.push(m);for(var y=l+u*n,d=0,g=e.rows.root.children;d<g.length;d++){var x=g[d],S=x.values[y].value;m.values.push(S)}}}for(var b=[],w=0,E=o;w<E.length;w++)for(var c=E[w],l=0;l<n;++l)b.push(c.values[l]);b.grouped=function(){return o},b.identityFields=e.columns.root.childIdentityFields,b.source=e.columns.levels[0].sources[0];var D={categories:a,values:b
};return D}function v(e){for(var t=_.map(e.rows.root.children,(function(e){return e.identity})),r=e.rows.root.childIdentityFields,i=e.rows.levels[0].sources,n=[],a=0,o=i.length;a<o;a++){var u=_.map(e.rows.root.children,(function(e){var t=e.levelValues;if(void 0!==t)return t[a].value}));n.push({source:i[a],values:u,identity:t,identityFields:r})}return n}r.pivotBinding=o,r.unpivotResult=c})(r=t.DataViewPivotCategoricalToPrimaryGroups||(t.DataViewPivotCategoricalToPrimaryGroups={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=e.DataViewMapping;!(function(r){function n(r,n,a,o,u,s,c){var l=s.selects,p=s.roles&&s.roles.activeItems,f=_.isEmpty(l)?{}:t.DataViewSelectTransform.createRoleKindFromMetadata(l,r),v=t.DataViewSelectTransform.projectionsFromSelects(l,p),h=e.DataViewAnalysis.chooseDataViewMappings(v,a,f,n,s.objects),m=h.supportedMappings,y={queryDataViewMetadata:r,objectDescriptors:n,dataRoles:o,drillCapabilities:u,transforms:s,colorAllocatorFactory:c,selectTransforms:l,projectionOrdering:s.roles&&s.roles.ordering,projectionActiveItems:p,roleKindByQueryRef:f,queryProjectionsByRole:v,visualCapabilitiesRoleMappings:a,visualCapabilitiesDataViewKinds:i.targetDataViewKinds(a),applicableRoleMappings:m,applicableDataViewKinds:i.targetDataViewKinds(m)};return y}r.create=n})(r=t.DataViewTransformContext||(t.DataViewTransformContext={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=jsCommon.ArrayExtensions,n=e.data.DataViewMetadataColumnUtils,a=e.Prototype.inheritSingle;!(function(r){function o(t,r,i,n,o){var u,c=_.chain(r).filter((function(t){return t.categorical&&!e.DataViewMapping.getRegressionUsage(t)})).map((function(e){return e.categorical})).value();if(t.categorical&&c.length>=1){var l=t.categorical,f=s(l,c,n,o);f=p(f||l,i,n,o),f&&(u=a(t),u.categorical=f)}return u||t}function u(e,t,r){if(t){var i=_.reduce(e,(function(e,i){var n=_.filter(t[i],(function(e){return!r||r[e]}));return e.push.apply(e,n),e}),[]);return i}}function s(t,r,i,n){if(!_.isEmpty(t.categories)){var a=e.DataViewMapping.getRolesIfSameInAllCategoricalMappings(r,e.DataViewMapping.getAllRolesInCategories);if(a){var o=u(a,i,n);if(o)return c(t,o,a)}}}function c(e,r,i){var o=e.categories;if(!_.isEmpty(o)&&!l(o,r)){var u=_.map(o,(function(e){return e.source})),s=n.leftJoinMetadataColumnsAndProjectionOrder(u,r,i),c=_.chain(s).filter((function(e){return void 0!==e.projectionOrderIndex})).sortBy((function(e){return e.projectionOrderIndex})).value(),p=_.map(c,(function(e){return o[e.sourceIndex]})),f=a(e);if(_.isEmpty(p))f.categories=void 0;else{var v=t.DataViewCategoricalUtils.getCategoriesDataViewObjects(o);v&&(p=t.DataViewCategoricalUtils.setCategoriesDataViewObjects(p,v)||p),f.categories=p}return f}}function l(e,t){return e.length===t.length&&_.every(t,(function(t,r){return e[r].source.index===t}))}function p(e,r,i,n){var o=e.values;if(o){var u=x(o),s=v(u,r,i,n),c=m(o,u,s);if(c=f(c||o,n)||c){var l=!!c.source,p=c.length>0,h=a(e);return l||p?(h.values=c,t.DataViewCategoricalEvalGrouped.apply(h)):h.values=void 0,h}}}function f(e,t){if(t&&e.source){var r=!t[e.source.index];if(r){var i=a(e);return i.source=void 0,i.identityFields=void 0,i}}}function v(e,t,r,i){if(!r)return h(e,i);var n=_.reduce(t,(function(e,t,r){var i=t.name;return void 0===e[i]&&(e[i]=r),e}),{}),a=e.dynamicSeriesMeasureSources||[],o=e.staticSeriesMeasureSources||[],u=a.concat(o),s=_.chain(u).filter((function(e){return!i||!!i[e.index]})).uniq((function(e){return e.index})).map((function(e){var t=e.roles;return t?_.filter(Object.keys(t),(function(e){return t[e]})):[]})).flatten().uniq().sortBy((function(e){return n[e]})).value(),c=_.chain(s).map((function(e){return r[e]||[]})).flatten().filter((function(e){return!i||!!i[e]})).uniq().value();return c}function h(e,t){var r=e.dynamicSeriesMeasureSources||[],i=e.staticSeriesMeasureSources||[],n=r.concat(i),a=_.chain(n).filter((function(e){return!t||!!t[e.index]})).map((function(e){return e.index})).uniq().value();return a}function m(e,t,r){var i=y(e,t,r),n=d(e,t,r);if(i||n){var o=a(e);if(i)if(n)o.splice(0,o.length),o.push.apply(o,i),o.push.apply(o,n);else{var u=t.dynamicSeriesMeasureSources.length,s=u*t.dynamicSeriesGroupCount;o.splice.apply(o,[0,s].concat(i))}else if(n){var c=t.staticSeriesMeasureSources.length;o.splice.apply(o,[t.staticSeriesMeasureStartingIndex,c].concat(n))}return o}}function y(e,t,r){if(t.dynamicSeriesGroupCount&&!_.isEmpty(t.dynamicSeriesMeasureSources)){var i=g(t.dynamicSeriesMeasureSources,r);if(i){var n=i.length;if(0===n)return[];for(var a=t.dynamicSeriesMeasureSources.length,o=t.dynamicSeriesGroupCount,u=[],s=0;s<o;s++)for(var c=s*a,l=0;l<n;l++){var p=i[l].sourceIndex,f=e[c+p];u.push(f)}return u}}}function d(e,t,r){if(!_.isEmpty(t.staticSeriesMeasureSources)){var i=g(t.staticSeriesMeasureSources,r);if(i){var n=i.length;if(0===n)return[];for(var a=t.staticSeriesMeasureStartingIndex,o=[],u=0;u<n;u++){var s=i[u].sourceIndex,c=e[a+s];o.push(c)}return o}}}function g(e,t){var r=n.leftJoinMetadataColumnsAndProjectionOrder(e,t);r=_.chain(r).filter((function(e){return void 0!==e.projectionOrderIndex})).sortBy((function(e){return e.projectionOrderIndex})).value();var a=i.sequenceEqual(e,r,(function(e,t){return e.index===t.metadataColumn.index}));if(!a)return r}function x(e){var t,r,i,n,a=e.source,o=e.grouped();if(a){r=S(o),t=o.length;var u=_.size(r),s=t*u,c=e.length-s;c>0&&(i=s,n=_.chain(e).takeRight(c).map((function(e){return e.source})).value())}else i=0,n=S(o);return{secondaryAxisSource:a,dynamicSeriesGroupCount:t,dynamicSeriesMeasureSources:r,staticSeriesMeasureStartingIndex:i,staticSeriesMeasureSources:n}}function S(e){if(!_.isEmpty(e)){var t=e[0];return _.map(t.values,(function(e){return e.source}))}}r.apply=o})(r=t.DataViewCategoricalProjectionOrder||(t.DataViewCategoricalProjectionOrder={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=jsCommon.ArrayExtensions,n=e.Prototype;!(function(r){function a(e,r,i,a){if(!_.isEmpty(r.splits))return e;var s=e.matrix;if(!s)return e;var c=_.chain(i).map((function(e){return o(e)})).filter((function(e){return!!e})).value();if(1!==c.length)return e;var p=t.DataViewMatrixUtils.extractSelectIndices(s);if(!u(p,r,a,c[0]))return e;var f=l(s),v=n.inheritSingle(e);return v.matrix=f,v}function o(t){var r=t.matrix;if(r&&r.rows&&!r.columns&&!r.values){var n=e.DataViewMapping.getRoles(r.rows,e.DataViewMapping.visitMatrixRows);if(i.sequenceEqual(n,f,(function(e,t){return e===t}))||i.sequenceEqual(n,v,(function(e,t){return e===t}))){var a={primaryAxisRoles:n.slice(1),secondaryAxisRole:n[0]};return a}}}function u(e,t,r,i){var n=e.primaryAxis,a=e.secondaryAxis;if(!_.isEmpty(e.intersection)||1!==_.size(n)||1!==_.size(a))return!1;var o=t.selects;return!!s(n[0].selectIndices,o,r,i.primaryAxisRoles)&&!!s(a[0].selectIndices,o,r,[i.secondaryAxisRole])}function s(e,t,r,i){for(var n=0,a=e.length,o=0,u=i;o<u.length;o++){var s=u[o];if(a<=n)return!1;var l=c(e,t,s);if(0===l)return!1;if(l>=2&&!_.contains(r,s))return!1;n+=l}return!(n<a)}function c(e,r,i){for(var n=0,a=0,o=e;a<o.length;a++){var u=o[a],s=r[u]&&r[u].roles;if(t.DataViewMetadataColumnUtils.isExactMatchRole(s,i))n++;else if(n>0)break}return n}function l(e){var t=n.inheritSingle(e),r=t.rows=n.inheritSingle(e.rows),i=t.columns=n.inheritSingle(e.columns),a=i.levels=n.inheritSingle(i.levels),o=a.splice(0,1)[0],u=r.levels=n.inheritSingle(r.levels);u.splice(0,0,o);var s=e.rows.root,c=r.root=n.inheritSingle(i.root);i.root={children:[]};var l=n.overrideArray(c.children,(function(e){var t=n.inheritSingle(e);return t.childIdentityFields=s.childIdentityFields,t.children=p(s.children),t}));return l&&(c.children=l),t}function p(e){if(!e)return e;var t=n.overrideArray(e,(function(e){var t=n.inherit(e);return t.level+=1,t}));return t||n.inherit(e)}var f=["Series","Category"],v=["Series","X","Y"];r.detectAndApply=a})(r=t.DataViewUpgradeFromCY16SU09Map||(t.DataViewUpgradeFromCY16SU09Map={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=e.Prototype.inherit,n=e.Prototype.inheritSingle,a=jsCommon.ArrayExtensions,o=jsCommon.EnumExtensions;!(function(r){function u(e){be=e}function s(e){var r=e.prototype,i=e.objectDescriptors,n=e.transforms,a=e.colorAllocatorFactory;if(!r)return p(i,n,a);if(!n)return[r];var o=t.DataViewTransformContext.create(r.metadata,i,e.dataViewMappings,e.dataRoles,e.drillCapabilities,n,a),u=c(r,o),s=l(u,o,e.bypassConcatenation);return s=t.DataViewRegression.run({visualDataViews:s,dataRoles:o.dataRoles,objectDescriptors:i,objectDefinitions:n.objects,colorAllocatorFactory:a,transformSelects:n.selects,applicableDataViewMappings:o.applicableRoleMappings,roleKindByQueryRef:o.roleKindByQueryRef,queryProjectionsByRole:o.queryProjectionsByRole})}function c(e,r){var i=r.transforms,n=r.applicableRoleMappings,a=t.DataViewPivotCategoricalToPrimaryGroups.unpivotResult(e,r.selectTransforms,r.roleKindByQueryRef,r.queryProjectionsByRole,n);return a=t.DataViewUpgradeFromCY16SU09Map.detectAndApply(a,i,n,r.drillCapabilities&&r.drillCapabilities.roles)}function l(e,t,r){var i=[],n=t.transforms.splits;if(_.isEmpty(n))i.push(f(e,t,null,r));else for(var a=0,o=n;a<o.length;a++){var u=o[a],s=f(e,t,u.selects);i.push(s)}return i}function p(e,t,r){if(t&&t.objects){var i={metadata:{columns:[]}};return F(i,0,e,t.objects,t.selects,r),[i]}return[]}function f(e,r,n,a){var o=i(e);o.metadata=i(e.metadata),o=h(o,r);var u=r.visualCapabilitiesDataViewKinds,s=r.visualCapabilitiesRoleMappings,c=r.selectTransforms,l=r.objectDescriptors,p=r.projectionOrdering,f={rowHierarchyRewritten:!1,columnHierarchyRewritten:!1,hierarchyTreesRewritten:!1};return o=m(o,u,s,c,p,f),F(o,r.visualCapabilitiesDataViewKinds,l,r.transforms.objects,c,r.colorAllocatorFactory),o=v(o,r,f,n),o=t.DataViewHierarchyLevelBackfill.apply(o,be.quarterPrefix),a||(o=t.DataViewConcatenateCategoricalColumns.detectAndApply(o,l,r.applicableRoleMappings,p,r.projectionActiveItems)),t.DataViewNormalizeValues.apply({dataview:o,dataViewMappings:s,dataRoles:r.dataRoles}),o}function v(e,r,i,a){var u=r.projectionOrdering,s=r.applicableRoleMappings,c=n(e);if(c.matrix&&o.hasFlag(r.applicableDataViewKinds,2)){var l=_.filter(s,(function(e){return!!e.matrix}));c.matrix=t.DataViewMatrixProjectionOrder.apply(c.matrix,l[0].matrix,u,i),ye(c.matrix,s)&&t.DataViewPivotMatrix.apply(c.matrix,i)}return c=t.DataViewCategoricalProjectionOrder.apply(c,s,r.dataRoles,u,a)}function h(e,t){var r=o.getBitCount(t.visualCapabilitiesDataViewKinds);if(r<=1)return e;var i=t.applicableDataViewKinds,a=o.getBitCount(i);if(0===a)return e;var u=n(e);return u.categorical&&!o.hasFlag(i,1)&&(u.categorical=void 0),u.matrix&&!o.hasFlag(i,2)&&(u.matrix=void 0),u.table&&!o.hasFlag(i,8)&&(u.table=void 0),u.tree&&!o.hasFlag(i,16)&&(u.tree=void 0),u.single&&!o.hasFlag(i,4)&&(u.single=void 0),u}function m(e,t,r,i,n,a){var u=[];return i&&(e.metadata.columns=y(e.metadata.columns,i,u),g(e,i)),e.categorical&&o.hasFlag(t,1)&&(e.categorical=w(e.categorical,u),e=he(e,r)),e.matrix&&o.hasFlag(t,2)&&(e.matrix=C(e.matrix,u,n,a)),e.table&&o.hasFlag(t,8)&&(e.table=E(e.table,u,n)),e}function y(e,t,r){if(!t)return e;for(var n=i(e),a=0,o=e.length;a<o;a++){var u=e[a],s=t[u.index];if(s){var c=n[a]=d(u,s);r.push({from:u,to:c})}}return n}function d(e,t){var r=i(e);return t.roles&&(r.roles=t.roles),t.type&&(r.type=t.type),r.format=b(t,r),t.displayName&&(r.displayName=t.displayName),t.queryName&&(r.queryName=t.queryName),t.expr&&(r.expr=t.expr),t.kpi&&t.kpi.graphic&&(r.kpi=t.kpi),t.sort&&(r.sort=t.sort),null!=t.sortOrder&&(r.sortOrder=t.sortOrder),t.discourageAggregationAcrossGroups&&(r.discourageAggregationAcrossGroups=t.discourageAggregationAcrossGroups),r}function g(r,i){if(i)for(var n,a=r.metadata.columns,o=0,u=i.length;o<u;o++){var s=i[o],c=s&&s.aggregateSources;if(c){n||(n=t.createStaticEvalContext(t.createColorAllocatorCache(),r,i));var l=x(a,o,s),p=l.aggregates={},f=e.ValueType.fromDescriptor(l.type),v=S(n,i,f,c.min);void 0!==v&&(p.min=v),v=S(n,i,f,c.max),void 0!==v&&(p.max=v)}}}function x(e,t,r){for(var i=0,n=e;i<n.length;i++){var a=n[i];if(a.index===t&&void 0===a.groupName)return a}var o=d({displayName:r.displayName},r);return e.push(o),o}function S(e,r,i,n){var a=r[n.index];if(a)return t.DataViewObjectEvaluator.evaluateValue(e,a.expr,i)}function b(e,t){return e.format||t.format}function w(r,a){function o(e){var t=T(e.source,a);if(t){var r=i(e);return r.source=t,r}}var u=i(r),s=e.Prototype.overrideArray(r.categories,o);if(s&&(u.categories=s),r.values){var c=e.Prototype.overrideArray(r.values,o)||n(r.values);if(u.values=c,c.source){var l=T(c.source,a);l&&(c.source=l)}}return t.DataViewCategoricalEvalGrouped.apply(u),u}function E(t,r,n){var a=i(t),o=function(e){return T(e,r)},u=e.Prototype.overrideArray(t.columns,o);if(u&&(a.columns=u),!n)return a;var s=D(n,r);if(!s)return a;for(var c=u.slice(0),l=Object.keys(s),p=0,f=l.length;p<f;p++){var v=c[s[l[p]]];p===u.length?u.push(v):u[p]=v}var h=e.Prototype.overrideArray(a.rows,(function(e){for(var t=[],r=0,i=l.length;r<i;++r)t[r]=e[s[l[r]]];return t}));return h&&(a.rows=h),a}function D(e,t){var r=Object.keys(e);if(1===r.length){var i=r[0],n=_.map(t,(function(e){return e.from.index})),a=e[i];return R(n,a)}}function C(t,r,n,a){function o(e){return T(e,r)}function u(t){var r=null,i=e.Prototype.overrideArray(t.levels,(function(t){var r=null,i=e.Prototype.overrideArray(t.sources,o);return i&&(r=V(r,t,(function(e){return e.sources=i}))),r}));return i&&(r=V(r,t,(function(e){return e.levels=i}))),r}var s=i(t),c=u(s.rows);c&&(s.rows=c,a.rowHierarchyRewritten=!0);var l=u(s.columns);l&&(s.columns=l,a.columnHierarchyRewritten=!0);var p=e.Prototype.overrideArray(s.valueSources,o);return p&&(s.valueSources=p),s}function R(e,t){if(!a.sequenceEqual(e,t,(function(e,t){return e===t}))){for(var r={},i=0,n=t.length;i<n;++i){var o=t[i];r[i]=e.indexOf(o)}return r}}function T(e,t){for(var r=0,i=t.length;r<i;r++){var n=t[r];if(n.from===e)return n.to}}function V(e,t,r){return e||(e=i(t)),r&&r(e),e}function F(e,r,i,n,a,o){if(i){var u=t.DataViewObjectEvaluationUtils.groupObjectsBySelector(n);t.DataViewObjectEvaluationUtils.addImplicitObjects(u,i,e.metadata.columns,a);var s=u.metadataOnce,c=u.data;if(s)for(var l=0,p=s.length;l<p;l++){var f=s[l],v=f.objects;M(e,a,i,f.selector,v,c,o)}var h=u.metadata;if(h)for(var l=0,p=h.length;l<p;l++){var m=h[l],v=m.objects,y=I(e,a,v,o);oe(e,a,i,m.selector,v,y)}for(var l=0,p=c.length;l<p;l++){var d=c[l],v=d.objects,y=I(e,a,v,o);U(e,r,a,i,d.selector,d.rules,v,y)}}}function P(e,t,r){if(!_.isEmpty(t))for(var i in t){var n=t[i];if(r&&void 0!==r.id){var a=e[i];a||(a=e[i]={});var o=a.$instances;o||(o=a.$instances={}),o[r.id]=n}else e[i]=n}}function M(e,r,i,n,a,o,u){var s=I(e,r,a,u),c=t.createStaticEvalContext(s,e,r),l=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(c,i,a);if(l){var p=e.metadata.objects;p||(p=e.metadata.objects={}),P(p,l,n);for(var f in l){var v=l[f],h=i[f];for(var m in v){var y=h.properties[m],d=y.rule;if(d){var g=A(e,u,d,f,v[m],y.type);_.isEmpty(g)||o.push.apply(o,g)}}}}}function A(e,t,r,i,n,a){var o=r.output;if(o){var u=se(e,o.selector);if(!_.isEmpty(u))return a.fillRule?N(e,t,r,u,i,n):void 0}}function N(e,r,i,n,a,o){var u=Q(e,r,i.inputRole,1,o);if(u){var s=new t.ColorRuleEvaluation(i.inputRole,u),c={};c[i.output.property]={solid:{color:s}};for(var l=[],p=0,f=n.length;p<f;p++)l.push({selector:n[p],rules:[s],objects:[{name:a,properties:c}]});return l}}function Q(e,t,r,i,n){return n.linearGradient2?O(e,t,r,i,n,n.linearGradient2):n.linearGradient3?q(e,t,r,i,n,n.linearGradient3):void 0}function O(e,t,r,i,n,a){if(a=n.linearGradient2,void 0===a.min.value||void 0===a.max.value){var o=le(e,r,i);if(!o)return;void 0===a.min.value&&(a.min.value=o.min),void 0===a.max.value&&(a.max.value=o.max)}if(void 0!==a.min.value&&void 0!==a.max.value)return t.linearGradient2(n.linearGradient2)}function q(e,t,r,i,n,a){var o;if(a=n.linearGradient3,void 0===a.min.value||void 0===a.max.value){var u=le(e,r,i);if(!u)return;o=void 0===a.min.value&&void 0===a.max.value&&void 0!==a.mid.value,void 0===a.min.value&&(a.min.value=u.min),void 0===a.max.value&&(a.max.value=u.max)}if(void 0!==a.min.value&&void 0!==a.max.value)return void 0===a.mid.value&&(a.mid.value=(a.max.value+a.min.value)/2),t.linearGradient3(n.linearGradient3,o)}function I(e,r,i,n){for(var a=t.createColorAllocatorCache(),o=t.createStaticEvalContext(),u=0,s=i.length;u<s;u++){var c=i[u].properties;for(var l in c){var p=c[l];if(p&&p.solid&&p.solid.color&&24===p.solid.color.kind){var f=p.solid.color,v=ce(r,f.input);if(!v)continue;var h=t.DataViewObjectEvaluator.evaluateProperty(o,Se,f.rule),m=Q(e,n,v,0,h);m&&a.register(f,m)}}}return a}function U(e,r,i,n,a,u,s,c){var l=t.Selector.containsWildcard(a),p=e.categorical;if(p&&o.hasFlag(r,1)){var f=k(p,a);Y(p,i,n,f,u,l,s,c),J(p,i,n,f,u,l,s,c)}var v=e.matrix;if(v&&o.hasFlag(r,2)){var f=B(v,a),h=Z(v,n,f,l,s,c);h&&(e.matrix=h)}var m=e.table;if(m&&o.hasFlag(r,8)){var f=j(m,a),y=ne(m,i,n,f,l,s,c);y&&(e.table=y)}}function j(e,r){return t.Selector.hasRoleWildcard(r)&&(r=L(r,(function(t){return H(t,e)}))),r}function B(e,r){return t.Selector.hasRoleWildcard(r)&&(r=L(r,(function(t){return G(t,e)}))),r}function k(e,r){return t.Selector.hasRoleWildcard(r)&&(r=L(r,(function(t){return z(t,e)}))),r}function L(e,r){for(var i={data:[],id:e.id,metadata:e.metadata},n=0,a=e.data;n<a.length;n++){var o=a[n];if(t.Selector.isRoleWildcard(o)){var u=r(o.roles);if(!_.isEmpty(u)){i.data.push(t.DataViewScopeWildcard.fromExprs(u));continue}}}return i}function H(e,t){var r=K(t.columns,e),i=t.identityFields;if(r&&i)return i}function G(e,t){if(t){var r=[];return r.push.apply(r,W(e,t.rows)),r.push.apply(r,W(e,t.columns)),r}}function W(e,t){var r=[];if(!e||!t)return r;for(var i=0,n=t.levels;i<n.length;i++)for(var a=n[i],o=0,u=a.sources;o<u.length;o++){var s=u[o];s.identityExprs&&K([s],e)&&r.push.apply(r,s.identityExprs)}return r}function z(e,t){if(t.categories)for(var r=0,i=t.categories;r<i.length;r++){var n=i[r];if(n.source&&K([n.source],e))return n.identityFields}}function K(e,t){for(var r=0,i=e;r<i.length;r++){var n=i[r],a=n.roles;if(!a||!_.any(t,(function(e){return a[e]})))return!1}return!0}function Y(e,r,i,n,a,o,u,s){if(e.categories&&0!==e.categories.length){var c=ue(e,n);if(c){var l,p=c.identities,f=t.createCategoricalEvalContext(s,e,r);if(p){for(var v=0,h=p.length;v<h;v++){var m=p[v];if(o||t.Selector.matchesData(n,[m])){f.setCurrentRowIndex(v);var y=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(f,i,u);if(y)for(var d=0,g=c.columns;d<g.length;d++){var x=g[d],S=x.objects;S||(S=x.objects=[],x.objects.length=h),S[v]||(S[v]={}),P(S[v],y,n)}if(!o)return!0;l=!0}}return l}}}}function J(r,i,n,a,o,u,s,c){var l=r.values;if(l&&l.identityFields&&t.Selector.matchesKeys(a,[l.identityFields])){var p=l.grouped();if(p){for(var f,v=t.createCategoricalEvalContext(c,r,i),h=0,m=p.length;h<m;h++){var y=p[h],d=a.metadata,g=y.values;if(u||t.Selector.matchesData(a,[y.identity])){var x=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(v,n,s);if(x)if(d)for(var S=0,b=g.length;S<b;S++){var w=g[S],E=w.source;if(E.queryName===d){var D=e.Prototype.inherit(E),C=D.objects;C||(C=D.objects={}),P(C,x,a),w.source=D,f=!0;break}}else{var _=y.objects;_||(_=y.objects={}),P(_,x,a),fe(l,p),f=!0}if(!u)return!0}}return f}}}function Z(e,r,i,a,o,u){var s,c,l=t.createMatrixEvalContext(u,e);c=X(l,e.columns,r,i,a,o);var p=[];p.push.apply(p,$(e.rows)),p.push.apply(p,$(e.columns));var f=t.Selector.matchesKeys(i,[p]),v=e.valueSources;if(f&&i.metadata&&e.columns&&e.columns.root&&!_.isEmpty(v)&&_.any(v,(function(e){return e.queryName===i.metadata}))){var h=t.DataViewMatrixUtils.getLeafNodes(e.columns.root);s=X(l,e.rows,r,i,a,o,h,v)}else s=X(l,e.rows,r,i,a,o);if(s||c){var m=n(e);return s&&(m.rows=s),c&&(m.columns=c),m}}function $(e){var t=[];if(!e)return t;for(var r=0,i=e.levels;r<i.length;r++)for(var n=i[r],a=0,o=n.sources;a<o.length;a++){var u=o[a];u.identityExprs&&t.push.apply(t,u.identityExprs)}return t}function X(e,t,r,i,a,o,u,s){if(t){var c=t.root;if(c){var l=ee(e,[c],r,i,a,o,u,s);if(l){var p=n(t);return p.root=l,p}}}}function ee(e,r,i,n,a,o,u,s){var c,l=_.last(r);return t.DataViewMatrixUtils.isLeafNode(l)?l.isSubtotal||_.isEmpty(l.values)||_.isEmpty(u)||_.isEmpty(s)||(c=re(e,l,i,n,a,o,u,s)):c=te(e,r,i,n,a,o,u,s),c}function te(e,r,i,a,o,u,s,c){var l,p=e.getDataView();r[0]===p.rows.root?l=p.rows:r[0]===p.columns.root&&(l=p.columns);var f,v,h=_.last(r),m=h.children,y=!1,d=h.childIdentityFields,g=[],x=m[0].level,S=p.valueSources.length>1&&l===p.columns&&x===l.levels.length-1;if(!_.isEmpty(l.levels)){var b=l.levels[x].sources;if(S){g=_.map(p.valueSources,(function(e){return e.queryName}));var w=_.compact(_.map(r,(function(e){return e.identity}))),E=void 0;h.isSubtotal&&r.length>1&&(E=r[r.length-2].childIdentityFields),y=null!=a.metadata&&_.any(g,(function(e){return e===a.metadata}))&&t.Selector.matchesData(a,w,E)}else 1!==b.length||_.isEmpty(d)||(g=[b[0].queryName],y=null==a.metadata&&t.Selector.matchesKeys(a,_.map(r,(function(e){return e.childIdentityFields}))))}for(var D=0,C=m.length;D<C;D++){for(var R=m[D],T=r.concat(R),V=[],F=0,P=T;F<P.length;F++){var M=P[F];M.identity&&V.push(M.identity)}var A=void 0;_.isEmpty(g)||(A=g[R.levelSourceIndex||0]);var N=void 0;R.isSubtotal&&(S?r.length>1&&(N=r[r.length-2].childIdentityFields):N=d),l===p.rows?e.setCurrentContext(null,R,null):l===p.columns&&e.setCurrentContext(null,null,R);var Q=!1;if(y&&(null==a.metadata||a.metadata===A)&&t.Selector.matchesData(a,V,N)){Q=!0;var O=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(e,i,u);O&&(v=n(R),v.objects=O)}if(Q||(v=ee(e,T,i,a,o,u,s,c)),v&&(f||(f=ie(h)),f.children[D]=v,!o))break}return f}function re(e,r,i,a,o,u,s,c){var l,p=r.values;for(var f in p){var v=p[f],h=s[f];if(!h.isSubtotal&&v&&c[v.valueSourceIndex||0].queryName===a.metadata){var m=void 0;e.setCurrentContext(v,r,h);var y=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(e,i,u);y&&(m=n(v),m.objects=y,l||(l=n(r)),l.values[f]=m)}}return l}function ie(e){if(Object.getPrototypeOf(e)!==Object.prototype)return e;var t=n(e);return t.children=i(e.children),t}function ne(e,r,i,a,o,u,s){var c=t.createTableEvalContext(s,e,r),l=ae(c,e.columns,e.rows,e.identity,e.identityFields,i,a,o,u);if(l){var p=n(e);return p.rows=l,p}}function ae(e,r,i,a,o,u,s,c,l){if(!_.isEmpty(a)&&!_.isEmpty(o)&&s.metadata&&t.Selector.matchesKeys(s,[o])){var p=_.findIndex(r,(function(e){return e.queryName===s.metadata}));if(!(p<0)){for(var f,v=r.length,h=0,m=a.length;h<m;h++){var y=a[h];if(c||t.Selector.matchesData(s,[y])){e.setCurrentRowIndex(h);var d=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(e,u,l);if(d){f||(f=n(i));var g=f[h]=n(f[h]),x=g.objects;x||(g.objects=x=new Array(v)),x[p]=d}if(!c)break}}return f}}}function oe(e,r,i,n,a,o){for(var u=e.metadata.columns,s=n.metadata,c=t.createStaticEvalContext(o,e,r),l=0,p=u.length;l<p;l++){var f=u[l];if(f.queryName===s){var v=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(c,i,a),h=f.objects;h||(h=f.objects={}),P(h,v,n)}}}function ue(e,r){for(var i=e.categories[0].identity,n=[],a=0,o=e.categories;a<o.length;a++){var u=o[a];if(!u.identityFields)return;if(!t.Selector.matchesKeys(r,[u.identityFields]))return;n.push(u)}var s=r.metadata;if(s){var c=e.values;if(c)for(var l=0,p=c.length;l<p;l++){var f=c[l];if(f.source.queryName===s){n=[f];break}}}return{columns:n,identities:i}}function se(e,r){var i=e.categorical;if(i){var n=i.categories;if(n){for(var a,o=[],u=0,s=n.length;u<s;u++){var c=n[u],l=c.identityFields;if(a=c.source.roles,a&&l){var p=_.any(r,(function(e){return a[e]}));p&&o.push({data:[t.DataViewScopeWildcard.fromExprs(l)]})}}return o}}}function ce(e,r){if(t.SQExpr.isSelectRef(r))return r.expressionName;if(e)for(var i=0,n=e.length;i<n;i++){var a=e[i],o=a.expr;if(o&&t.SQExpr.equals(r,a.expr))return a.queryName}}function le(e,t,r){for(var i=e.metadata.columns,n=0,a=i.length;n<a;n++){var o=i[n];if(1===r){var u=o.roles;if(!u||!u[t])continue}else if(o.queryName!==t||void 0!==o.groupName)continue;var s=o.aggregates;if(s){var c=s.min,l=s.max;return{min:c,max:l}}}}function pe(e,t,r){void 0===e&&(e=[]);var i=e;return fe(i),t&&(i.identityFields=t),r&&(i.source=r),i}function fe(e,t){e.grouped=t?function(){return t}:function(){return ve(e)}}function ve(e){for(var t,r=[],i=0,n=e.length;i<n;i++){var a=e[i];if(!t||t.identity!==a.identity){if(t={values:[]},a.identity){t.identity=a.identity;var o=a.source;void 0!==o.groupName?t.name=o.groupName:o.displayName&&(t.name=o.displayName)}r.push(t)}t.values.push(a)}return r}function he(e,r){var i,n=me(e.categorical,r);if(n)switch(n.type){case 1:i=t.DataViewPivotCategorical.apply(e);break;case 2:i=t.DataViewSelfCrossJoin.apply(e,n.selfCrossJoinCategory)}return i||e}function me(e,t){if(e&&!_.isEmpty(t)){var r=e.categories;if(!_.isEmpty(r)){var i=e.values;if(!_.isEmpty(i)&&!i.grouped().some((function(e){return!!e.identity})))for(var n=function(e,i){var n=t[e].categorical;if(!n)return"continue";for(var a=0,o=r;a<o.length;a++){var u=o[a],s=u.source.roles;if(xe(s,n.values)){var c=n.categories,l=de(s,c)||ge(s,c);if(l)return{value:{type:2,selfCrossJoinCategory:u}};if(1===r.length)return{value:{type:1}}}}},a=0,o=t.length;a<o;a++){var u=n(a,o);if("object"==typeof u)return u.value}}}}function ye(e,t){if(e&&!_.isEmpty(t)){var r=e.rows.levels;if(!(r.length<1)){var i=e.rows.root.children;if(i&&0!==i.length)for(var n=r[0].sources[0].roles,a=0,o=t.length;a<o;a++){var u=t[a].matrix;if(u&&!ge(n,u.rows)&&ge(n,u.columns))return!0}}}}function de(e,t){if(e&&t&&t.bind)return e[t.bind.to]}function ge(e,t){if(e&&t&&t.for)return e[t.for.in]}function xe(e,t){if(e&&t&&t.group)return e[t.group.by]}var Se={type:{fillRule:{}}},be={quarterPrefix:"Qtr {0}"};r.setLocalizationOptions=u,r.apply=s,r.transformObjects=F,r.mergeObjects=P,r.createValueColumns=pe,r.setGrouped=fe})(r=t.DataViewTransform||(t.DataViewTransform={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(e){return function(t){return t.get(e)}}function r(e,t){return"function"==typeof e?e(t):"string"==typeof e?e:void 0}e.createDisplayNameGetter=t,e.getDisplayName=r})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(e){var t=o.visit(e,v.instance);return t}function r(t){return e.aggregate(i(t),t.aggregate)}function i(t){return e.columnRef(u(t),t.name)}function n(t){return e.aggregate(e.groupRef(t.name,u(t),f(t.groupedColumns)),t.aggregate)}function a(t){return e.groupRef(t.name,u(t),f(t.groupedColumns))}function u(t){return e.entity(t.schema,t.entity,t.entityVar)}function s(t){return e.aggregate(u(t),t.aggregate)}function c(t){return e.aggregate(l(t),t.aggregate)}function l(t){return e.hierarchyLevel(p(t),t.level)}function p(t){return e.hierarchy(u(t),t.name)}function f(t){return _.map(t,(function(t){return e.fieldExpr(t)}))}e.fieldExpr=t,e.fromColumnAggr=r,e.fromColumn=i,e.fromGroupingColumnAggr=n,e.fromGroupingColumn=a,e.fromEntity=u,e.fromEntityAggr=s,e.fromHierarchyLevelAggr=c,e.fromHierarchyLevel=l,e.fromHierarchy=p;var v=(function(){function t(){}return t.prototype.visitColumn=function(e){return i(e)},t.prototype.visitColumnAggr=function(e){return r(e)},t.prototype.visitGroupingColumn=function(e){return a(e)},t.prototype.visitGroupingColumnAggr=function(e){return n(e)},t.prototype.visitColumnHierarchyLevelVariation=function(t){return e.propertyVariationSource(this.visitEntity(t.source),t.source.name,t.level.name)},t.prototype.visitEntity=function(e){return u(e)},t.prototype.visitEntityAggr=function(e){return s(e)},t.prototype.visitHierarchy=function(e){return p(e)},t.prototype.visitHierarchyLevel=function(e){return l(e)},t.prototype.visitHierarchyLevelAggr=function(e){return c(e)},t.prototype.visitMeasure=function(t){return e.measureRef(this.visitEntity(t),t.name)},t.prototype.visitPercentile=function(t){var r=e.fieldExpr(t.arg);return e.percentile(r,t.k,t.exclusive)},t.prototype.visitPercentOfGrandTotal=function(t){var r=e.fieldExpr(t.baseExpr);return e.arithmetic(r,e.scopedEval(r,[]),3)},t.prototype.visitPercentOfRoleTotal=function(t){var r=e.fieldExpr(t.baseExpr);return e.arithmetic(r,e.scopedEval(r,_.map(t.roles,(function(t){return e.roleRef(t)}))),3)},t.prototype.visitSelectRef=function(t){return e.selectRef(t.expressionName)},t.prototype.visitTransformOutputRoleRef=function(t){return e.transformOutputRoleRef(t.expressionName)},t})();v.instance=new v})(t=e.SQExprBuilder||(e.SQExprBuilder={}));var r;!(function(e){function t(e,t){return e.accept(new i(t))}e.asFieldPattern=t})(r=e.SQExprConverter||(e.SQExprConverter={}));var i=(function(r){function i(e){var t=r.call(this)||this;return t.schema=e,t}return __extends(i,r),i.prototype.visitColumnRef=function(e){var t=e.source.accept(n.instance);if(t&&t.entity){var r=t.entity;return r.name=e.ref,{column:r}}},i.prototype.visitMeasureRef=function(e){var t=e.source.accept(n.instance);if(t&&t.entity){var r=t.entity;return r.name=e.ref,{measure:r}}},i.prototype.visitEntity=function(e){var t={schema:e.schema,entity:e.entity};return e.variable&&(t.entityVar=e.variable),{entity:t}},i.prototype.visitAggr=function(e){var t=e.arg.accept(this);if(t){if(t.column){var r=t.column;return r.aggregate=e.func,{columnAggr:r}}if(t.columnAggr){var r=t.columnAggr;return r.aggregate=e.func,{columnAggr:r}}if(t.groupingColumn){var r=t.groupingColumn;return r.aggregate=e.func,{groupingColumnAggr:r}}if(t.groupingColumnAggr){var r=t.groupingColumnAggr;return r.aggregate=e.func,{groupingColumnAggr:r}}if(t.hierarchyLevel){var r=t.hierarchyLevel;return r.aggregate=e.func,{hierarchyLevelAggr:r}}}var i=e.arg.accept(n.instance);if(i&&i.entity){var r=i.entity;return r.aggregate=e.func,{entityAggr:r}}},i.prototype.visitPercentile=function(e){return{percentile:{arg:e.arg.accept(this),k:e.k,exclusive:e.exclusive}}},i.prototype.visitGroupRef=function(e){var t=e.source.accept(n.instance);if(t&&t.entity){var r=t.entity;r.name=e.ref,r.groupedColumns=[];for(var i=0,a=e.groupedExprs;i<a.length;i++){var o=a[i],u=o.accept(this);(u.column||u.groupingColumn||u.hierarchyLevel)&&r.groupedColumns.push(u)}return{groupingColumn:r}}},i.prototype.visitHierarchy=function(e){var t=e.arg.accept(n.instance);if(t&&t.entity){var r=t.entity;return r.name=e.hierarchy,{hierarchy:r}}},i.prototype.visitHierarchyLevel=function(e){var t=e.arg.accept(a.instance);if(t){var r;if(t.hierarchy&&(r={entity:t.hierarchy.entity,schema:t.hierarchy.schema,name:t.hierarchy.name,level:e.level}),t.variation){if(this.schema){var i=t.variation,n=this.schema.schema(t.variation.column.schema).findTargetEntityOfVariation(r.entity,i.column.name,i.variationName);n&&(r.entity=n.name)}return{columnHierarchyLevelVariation:{source:{entity:t.variation.column.entity,schema:t.variation.column.schema,name:t.variation.column.name},level:r,variationName:t.variation.variationName}}}return{hierarchyLevel:r}}},i.prototype.visitArithmetic=function(r){var i={percentOfGrandTotal:{baseExpr:r.left.accept(this)}};if(e.SQExpr.equals(r,t.fieldExpr(i)))return i;var n=e.SQExpr.isScopedEval(r.right)&&r.right.scope;return!_.isEmpty(n)&&_.all(n,(function(t){return e.SQExpr.isRoleRef(t)}))?{percentOfRoleTotal:{baseExpr:r.left.accept(this),roles:_.map(n,(function(e){return e.role}))}}:void 0},i.prototype.visitSelectRef=function(e){return{selectRef:{expressionName:e.expressionName}}},i.prototype.visitTransformOutputRoleRef=function(e){return{transformOutputRoleRef:{expressionName:e.role}}},i})(e.DefaultSQExprVisitor),n=(function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.visitEntity=function(e){var t={schema:e.schema,entity:e.entity};return e.variable&&(t.entityVar=e.variable),{entity:t}},r.prototype.visitPropertyVariationSource=function(t){var r=t.arg;if(r instanceof e.SQEntityExpr){var i={schema:r.schema,entity:r.entity,name:t.property};return r.variable&&(i.entityVar=r.variable),{variation:{column:i,variationName:t.name}}}},r})(e.DefaultSQExprVisitor);n.instance=new n;
var a=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.visitHierarchy=function(e){var t,r,i=e.arg.accept(n.instance);return i.variation?(t={name:e.hierarchy,schema:i.variation.column.schema,entity:i.variation.column.entity},r=i.variation):t={name:e.hierarchy,schema:i.entity.schema,entity:i.entity.entity},{hierarchy:t,variation:r}},t})(e.DefaultSQExprVisitor);a.instance=new a;var o;!(function(i){function n(t,i){var n=t instanceof e.SQExpr?r.asFieldPattern(t):t;return n.column?a(n.column,i):n.columnAggr?o(n.columnAggr,i):n.groupingColumn?u(n.groupingColumn,i):n.groupingColumnAggr?s(n.groupingColumnAggr,i):n.columnHierarchyLevelVariation?c(n.columnHierarchyLevelVariation,i):n.entity?l(n.entity,i):n.entityAggr?p(n.entityAggr,i):n.hierarchy?f(n.hierarchy,i):n.hierarchyLevel?v(n.hierarchyLevel,i):n.hierarchyLevelAggr?h(n.hierarchyLevelAggr,i):n.measure?m(n.measure,i):n.percentile?d(n.percentile,i):n.percentOfGrandTotal?g(n.percentOfGrandTotal,i):n.percentOfRoleTotal?x(n.percentOfRoleTotal,i):n.selectRef?y(n.selectRef,i):n.transformOutputRoleRef?S(n.transformOutputRoleRef,i):void 0}function a(e,t){return t.visitColumn(e)}function o(e,t){return t.visitColumnAggr(e)}function u(e,t){return t.visitGroupingColumn(e)}function s(e,t){return t.visitGroupingColumnAggr(e)}function c(e,t){return t.visitColumnHierarchyLevelVariation(e)}function l(e,t){return t.visitEntity(e)}function p(e,t){return t.visitEntityAggr(e)}function f(e,t){return t.visitHierarchy(e)}function v(e,t){return t.visitHierarchyLevel(e)}function h(e,t){return t.visitHierarchyLevelAggr(e)}function m(e,t){return t.visitMeasure(e)}function y(e,t){return t.visitSelectRef(e)}function d(e,t){return t.visitPercentile(e)}function g(e,t){return t.visitPercentOfGrandTotal(e)}function x(e,t){return t.visitPercentOfRoleTotal(e)}function S(e,t){return t.visitTransformOutputRoleRef(e)}function b(e){return t.columnRef(t.entity(e.schema,e.entity,e.entityVar),e.name)}function w(e){return n(e,A.instance)}function E(e){return void 0!==(e.column||e.columnAggr||e.groupingColumn||e.groupingColumnAggr||e.measure)}function D(e){return i.visit(e,Q.instance)}function C(e){var t=e.hierarchy;if(t)return t.name}function R(e){return e.columnHierarchyLevelVariation?e.columnHierarchyLevelVariation.source:e.column||e.groupingColumn||e.groupingColumnAggr||e.measure||e.columnAggr}function T(e){var t=D(e);return t?t:F(e).entity}function V(e){var t=i.toFieldExprEntityItemPattern(e);return t.schema}function F(e){return i.visit(e,N.instance)}function P(e){return i.visit(e,N.instance)}function M(t){return e.SQExpr.isArithmetic(t)&&e.SQExpr.isScopedEval(t.right)&&!_.isEmpty(t.right.scope)&&_.all(t.right.scope,(function(t){return e.SQExpr.isRoleRef(t)}))}i.visit=n,i.toColumnRefSQExpr=b,i.getAggregate=w,i.hasFieldExprName=E,i.getPropertyName=D,i.getHierarchyName=C,i.getProperty=R,i.getFieldExprName=T,i.getSchema=V,i.toFieldExprEntityPattern=F,i.toFieldExprEntityItemPattern=P,i.isPercentRoleTotalExpr=M;var A=(function(){function r(){}return r.prototype.visitColumn=function(e){},r.prototype.visitColumnAggr=function(e){return e.aggregate},r.prototype.visitGroupingColumn=function(e){},r.prototype.visitGroupingColumnAggr=function(e){return e.aggregate},r.prototype.visitColumnHierarchyLevelVariation=function(e){},r.prototype.visitEntity=function(e){},r.prototype.visitEntityAggr=function(e){return e.aggregate},r.prototype.visitHierarchy=function(e){},r.prototype.visitHierarchyLevel=function(e){},r.prototype.visitHierarchyLevelAggr=function(e){return e.aggregate},r.prototype.visitMeasure=function(e){},r.prototype.visitSelectRef=function(e){},r.prototype.visitPercentile=function(e){},r.prototype.visitPercentOfGrandTotal=function(r){return e.SQExprInfo.getAggregate(t.fieldExpr(r.baseExpr))},r.prototype.visitPercentOfRoleTotal=function(r){return e.SQExprInfo.getAggregate(t.fieldExpr(r.baseExpr))},r.prototype.visitTransformOutputRoleRef=function(e){},r})();A.instance=new A;var N=(function(){function e(){}return e.prototype.visitColumn=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitColumnAggr=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitGroupingColumn=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitGroupingColumnAggr=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitColumnHierarchyLevelVariation=function(t){return e.toEntityItemExprPattern(t.source)},e.prototype.visitEntity=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitEntityAggr=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitHierarchy=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitHierarchyLevel=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitHierarchyLevelAggr=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitMeasure=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitSelectRef=function(e){},e.prototype.visitPercentile=function(e){return i.visit(e.arg,this)},e.prototype.visitPercentOfGrandTotal=function(e){return i.visit(e.baseExpr,this)},e.prototype.visitPercentOfRoleTotal=function(e){return i.visit(e.baseExpr,this)},e.prototype.visitTransformOutputRoleRef=function(e){},e.toEntityItemExprPattern=function(e){var t={schema:e.schema,entity:e.entity};return e.entityVar&&(t.entityVar=e.entityVar),t},e})();N.instance=new N;var Q=(function(){function e(){}return e.prototype.visitColumn=function(e){return e.name},e.prototype.visitColumnAggr=function(e){return e.name},e.prototype.visitGroupingColumn=function(e){return e.name},e.prototype.visitGroupingColumnAggr=function(e){return e.name},e.prototype.visitColumnHierarchyLevelVariation=function(e){},e.prototype.visitEntity=function(e){},e.prototype.visitEntityAggr=function(e){},e.prototype.visitHierarchy=function(e){},e.prototype.visitHierarchyLevel=function(e){},e.prototype.visitHierarchyLevelAggr=function(e){},e.prototype.visitMeasure=function(e){return e.name},e.prototype.visitSelectRef=function(e){},e.prototype.visitPercentile=function(e){return i.visit(e.arg,this)},e.prototype.visitPercentOfGrandTotal=function(e){return i.visit(e.baseExpr,this)},e.prototype.visitPercentOfRoleTotal=function(e){return i.visit(e.baseExpr,this)},e.prototype.visitTransformOutputRoleRef=function(e){},e})();Q.instance=new Q})(o=e.FieldExprPattern||(e.FieldExprPattern={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function r(e,t){if(!t||0===t.length)return{dataView:e,isValid:!0};if(e)for(var r=0,u=t;r<u.length;r++){var s=u[r];if(c(e,s))return{dataView:e,isValid:!0};if(s.categorical&&e.categorical)return i(e,s);if(s.tree&&e.tree)return a(e,s.tree);if(s.single&&e.single)return n(e,s.single);if(s.table&&e.table)return o(e,s.table)}return{isValid:!1}}function i(t,r){var i=r.categorical,n=t.categorical;if(!n)return{isValid:!1};var a;if(i.rowCount&&(a=i.rowCount.supported,a&&a.max)){var o=void 0,u=n.categories,s=a.max,c=void 0;if(u)for(var p=0,f=u.length;p<f;p++){var v=u[p];if(c=v.values.length,void 0!==s&&c>s){var h=R.range(v.values,0,s-1);o=o||{categories:[]},o.categories.push({source:v.source,values:h})}}if(n.values&&n.values.length>0&&s&&(c||(c=n.values[0].values.length),void 0!==s&&c>s)){o=o||{},o.values=e.data.DataViewTransform.createValueColumns();for(var p=0,f=n.values.length;p<f;p++){var m=n.values[p],y={source:m.source,values:R.range(m.values,0,s-1)};void 0!==m.min&&(y.min=m.min),void 0!==m.max&&(y.max=m.max),void 0!==m.subtotal&&(y.subtotal=m.subtotal),o.values.push(y)}}o&&(t={metadata:t.metadata,categorical:o})}return l(t,r)?{dataView:t,isValid:!0}:null}function n(e,t){return e.single?{dataView:e,isValid:!0}:{isValid:!1}}function a(e,t){var r=e.metadata;return null==m(u(r.columns),t.depth)?{dataView:e,isValid:!0}:{isValid:!1}}function o(e,t){return e.table?{dataView:e,isValid:!0}:{isValid:!1}}function u(e){for(var t=0,r=0,i=e.length;r<i;r++)e[r].isMeasure||++t;return t}function s(e){for(var t=0,r=0,i=e.length;r<i;r++)e[r].isMeasure&&++t;return t}function c(e,t,r){return!(!t||!e)&&(!(t.scriptResult&&!h(e.scriptResult,t.scriptResult))&&(!(t.categorical&&!l(e,t.categorical,r))&&(!(t.tree&&!f(e,t.tree))&&(!(t.single&&!p(e.single,t.single))&&!(t.table&&!v(e.table,t.table,r))))))}function l(e,t,r){var i=e.categorical;if(!i)return!1;if(t.rowCount){var n=t.rowCount.supported;if(r&&t.rowCount.preferred&&(n=t.rowCount.preferred),n){var a=0;if(i.values&&i.values.length?a=i.values[0].values.length:i.categories&&i.categories.length&&(a=i.categories[0].values.length),null!=m(a,n))return!1}}return!0}function p(e,t){return!!e}function f(e,t){var r=e.metadata;return null==m(u(r.columns),t.depth)}function v(e,t,r){if(!e)return!1;if(t.rowCount){var i=t.rowCount.supported;if(r&&t.rowCount.preferred&&(i=t.rowCount.preferred),i){var n=0;if(e.rows&&e.rows.length&&(n=e.rows.length),null!=m(n,i))return!1}}return!0}function h(e,t){return!!e&&!!e.payloadBase64}function m(e,t,r){if(t)return!r&&void 0!==t.min&&t.min>e?C.conditionRangeTooSmall:void 0!==t.max&&t.max<e?C.conditionRangeTooLarge:void 0}function y(t,r,i,n){if(t&&void 0!==t.kind){var a=t.kind,o=i[r];if(o)for(var u=o.all(),s=0,c=u;s<c.length;s++){var l=c[s];if(n[l.queryRef]!==a)switch(a){case e.VisualDataRoleKind.Measure:return C.conditionKindExpectedMeasure;case e.VisualDataRoleKind.Grouping:return C.conditionKindExpectedGrouping;case e.VisualDataRoleKind.GroupingOrMeasure:return C.conditionKindExpectedGroupingOrMeasure}}}}function d(e,t,r,i,n){var a=[],o=[];if(!_.isEmpty(t))for(var u=0,s=t.length;u<s;u++){var c=t[u],l=c.conditions,p=c.requiredProperties,f=x(p,i,n),v=[];if(_.isEmpty(l))v.push({});else for(var h=0,m=l.length;h<m;h++){var y=l[h],d=g(e,y,r);if(_.isEmpty(d))v.push(y);else for(var S=0,b=d;S<b.length;S++){var w=b[S];w.mappingIndex=u,w.conditionIndex=h,o.push(w)}}if(!_.isEmpty(v)&&f){var E=_.cloneDeep(c),D=_.filter(v,(function(e){return Object.keys(e).length>0}));_.isEmpty(D)||(E.conditions=D),a.push(E)}}return{supportedMappings:R.emptyToNull(a),mappingErrors:R.emptyToNull(o)}}function g(e,t,r,i){for(var n=Object.keys(t),a=[],o=0,u=n.length;o<u;o++){var s=n[o],c=e[s]&&!_.isEmpty(e[s].activeProjectionRefs),l=t[s],p=void 0!==i&&null!==i,f=p?i:c,v=S(s,e,f),h=m(v,l);null!=h&&a.push({code:h,roleName:s});var d=y(l,s,e,r);null!=d&&a.push({code:d,roleName:s})}return a}function x(t,r,i){if(_.isEmpty(t))return!0;if(!r||!i)return!1;var n=e.data.createStaticEvalContext();return _.every(t,(function(t){var a=null,o=i[t.objectName];if(!o)return!1;var u=r[t.objectName];u&&(a=u.properties[t.propertyName]);var s;return!_.isEmpty(o)&&o[0]&&(s=T.getValue(i,t,o[0].selector)),!(!a||!s)&&e.data.DataViewObjectEvaluator.evaluateProperty(n,a,s)}))}function S(e,t,r){var i=t[e];return i?r?1:i.all().length:0}function b(t,r){if(t&&r&&t.categorical&&r.categorical){var i=t.categorical.categories,n=r.categorical.categories;if(i&&n&&i.length===n.length){for(var a=0,o=i.length;a<o;a++){var u=i[a].identity,s=n[a].identity,c=w(u);if(c!==w(s))return!1;for(var l=0;l<c;l++)if(!e.DataViewScopeIdentity.equals(u[l],s[l]))return!1}return!0}}return!1}function w(e){return e?e.length:0}function E(e,t){return!e&&!t||!(!e||!t)&&(e.displayName===t.displayName&&(e.queryName===t.queryName&&(e.isMeasure===t.isMeasure&&(e.type===t.type&&e.sort===t.sort))))}function D(e,r){if(!e&&!r)return!0;if(!e||!r)return!1;var i=e.columns.length,n=r.columns.length;if(i!==n)return!1;for(var a=0;a<n;a++)if(!t.areMetadataColumnsEquivalent(e.columns[a],r.columns[a]))return!1;return!0}var C,R=jsCommon.ArrayExtensions,T=e.data.DataViewObjectDefinitions;!(function(e){e[e.conditionRangeTooLarge=0]="conditionRangeTooLarge",e[e.conditionRangeTooSmall=1]="conditionRangeTooSmall",e[e.conditionKindExpectedMeasure=2]="conditionKindExpectedMeasure",e[e.conditionKindExpectedGrouping=3]="conditionKindExpectedGrouping",e[e.conditionKindExpectedGroupingOrMeasure=4]="conditionKindExpectedGroupingOrMeasure"})(C=t.DataViewMappingMatchErrorCode||(t.DataViewMappingMatchErrorCode={})),t.validateAndReshape=r,t.countGroups=u,t.countMeasures=s,t.supports=c,t.validateRange=m,t.chooseDataViewMappings=d,t.checkForConditionErrors=g,t.getPropertyCount=S,t.hasSameCategoryIdentity=b,t.areMetadataColumnsEquivalent=E,t.isMetadataEquivalent=D})(t=e.DataViewAnalysis||(e.DataViewAnalysis={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t,r=jsCommon.ArrayExtensions,i=jsCommon.Lazy;!(function(e){function t(e){return new a(e)}function n(e,t){return e.key&&t.key&&e.key===t.key&&r.sequenceEqual(e.roles,t.roles,(function(e,t){return e===t}))}e.fromRoles=t,e.equals=n;var a=(function(){function e(e){var t=this;this.kind=0,this._roles=e,this._key=new i(function(){return JSON.stringify(t.roles)})}return Object.defineProperty(e.prototype,"roles",{get:function(){return this._roles},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this._key.getValue()},enumerable:!0,configurable:!0}),e})()})(t=e.DataViewRoleWildcard||(e.DataViewRoleWildcard={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(e,t,i){return e=e||null,t=t||null,e===t||!e==!t&&r.SQExpr.equals(e.expr,t.expr,i)}function n(e,t){if(!_.isEmpty(e)){for(var r=[],i=0,n=e;i<n.length;i++){var o=n[i];r.push(o.expr)}return a(r,t)}}function a(t,i){if(!_.isEmpty(t)){for(var n,a=0,o=t;a<o.length;a++){var u=o[a],s=r.ScopeIdentityExtractor.getInExpr(u);n=n?r.SQExprBuilder.or(n,s):s||u}return n&&i&&(n=e.data.SQExprBuilder.not(n)),e.data.SemanticFilter.fromSQExpr(n)}}t.equals=i,t.filterFromIdentity=n,t.filterFromExprs=a})(t=e.DataViewScopeIdentity||(e.DataViewScopeIdentity={}));var r;!(function(e){function t(e){return new i(e)}var r=jsCommon.Lazy;e.createDataViewScopeIdentity=t;var i=(function(){function t(t){this.kind=1,this._expr=t,this._key=new r(function(){return e.SQExprShortSerializer.serialize(t)})}return Object.defineProperty(t.prototype,"expr",{get:function(){return this._expr},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this._key.getValue()},enumerable:!0,configurable:!0}),t})()})(r=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t,r=jsCommon.Lazy;!(function(t){function i(t,r){return!_.isEmpty(r)&&e.SQExprUtils.sequenceEqual(t.exprs,r)}function n(t,r){return t===r||e.SQExprUtils.sequenceEqual(t.exprs,r.exprs)}function a(e){return new o(e)}t.matches=i,t.equals=n,t.fromExprs=a;var o=(function(){function t(t){this.kind=2,this._exprs=t,this._key=new r(function(){return e.SQExprShortSerializer.serializeArray(t)})}return Object.defineProperty(t.prototype,"exprs",{get:function(){return this._exprs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this._key.getValue()},enumerable:!0,configurable:!0}),t})()})(t=e.DataViewScopeTotal||(e.DataViewScopeTotal={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t,r=jsCommon.Lazy;!(function(t){function i(t,r){var i=e.ScopeIdentityExtractor.getKeys(r.expr);return!!i&&e.SQExprUtils.sequenceEqual(t.exprs,i)}function n(t,r){return t===r||e.SQExprUtils.sequenceEqual(t.exprs,r.exprs)}function a(e){return new o(e)}t.matches=i,t.equals=n,t.fromExprs=a;var o=(function(){function t(t){this.kind=3,this._exprs=t,this._key=new r(function(){return e.SQExprShortSerializer.serializeArray(t)})}return Object.defineProperty(t.prototype,"exprs",{get:function(){return this._exprs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this._key.getValue()},enumerable:!0,configurable:!0}),t})()})(t=e.DataViewScopeWildcard||(e.DataViewScopeWildcard={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(){return new r}e.createColorAllocatorCache=t;var r=(function(){function e(){this.cache=[]}return e.prototype.get=function(e){for(var t=0,r=this.cache;t<r.length;t++){var i=r[t];if(i.key===e)return i.allocator}},e.prototype.register=function(e,t){return this.cache.push({key:e,allocator:t}),this},e})()})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=e.DataViewMapping;!(function(r){function n(e){var t=e.visualDataViews,r=e.dataRoles,n=e.objectDescriptors,o=e.objectDefinitions,u=e.colorAllocatorFactory,s=e.transformSelects,c=e.applicableDataViewMappings,l=e.roleKindByQueryRef,p=e.queryProjectionsByRole;if(!_.isEmpty(t)&&s){if(!l||!p||_.isEmpty(c)||!n||!o)return t;var f=_.find(c,(function(e){return!!i.getRegressionUsage(e)}));if(f){for(var v=[],h=0,m=t;h<m.length;h++){var y=m[h],d=a(y,r,f,n,o,u);d&&v.push(d)}_.isEmpty(v)||t.push.apply(t,v)}}return t}function a(t,r,n,a,c,l){if(t.categorical){var p=s(0,t.categorical,r),f=s(1,t.categorical,r);if(!_.isEmpty(p)&&!_.isEmpty(f)){var h=p[0].source,m=f[0].source,x=!0,S=i.getRegressionUsage(n);if(S&&t.metadata.objects){var b=S.combineSeries;b&&(x=e.DataViewObjects.getValue(t.metadata.objects,b,!0))}var w=y(p,f,x,!1),E=o(w);if(u(E)){var D,C=E.xMin,R=E.xMax,T=g(f)||g(p);if(T){var V=y(p,f,x,!0);D=o(V),u(D)?(C=_.min([C,D.xMin]),R=_.max([R,D.xMax])):T=!1}for(var F=[],P=0,M=E.lineDefs;P<M.length;P++){var A=M[P];F.push(v(A,+C,+R))}var N;if(T){N=[];for(var Q=0,O=D.lineDefs;Q<O.length;Q++){var A=O[Q];N.push(v(A,+C,+R))}}var q;if(x)q=["combinedRegressionSeries"];else if(t.categorical.values.source){var I=t.categorical.values.grouped();q=_.map(I,(function(e){return e.name}))}else q=_.map(f,(function(e){return e.source.queryName}));var U=d(h,m,q,[C,R],F,N,t,n,a,c,l);return U}}}}function o(e){for(var t,r,i=[],n=0,a=e;n<a.length;n++){var o=a[n],u=o.xValues,s=o.yValues;if(_.isEmpty(u)||_.isEmpty(s))i.push(null);else{var c=l(u),v=l(s);if(c&&v){var h=p(u,s);if(!h||_.isEmpty(h.xValues)||_.isEmpty(h.yValues))i.push(null);else{var m=h.xValues[0],y=h.xValues[h.xValues.length-1],d=f(h.xValues,h.yValues);t=_.min([t,m]),r=_.max([r,y]),i.push(d)}}else i.push(null)}}return{lineDefs:i,xMin:t,xMax:r}}function u(e){return e&&!_.isEmpty(e.lineDefs)&&_.some(e.lineDefs,(function(e){return e}))}function s(e,t,r){var i=c(e,t.values,r);if(!_.isEmpty(i))return i;var n=t.categories;if(!_.isEmpty(n)){var a=n[0],o=c(e,[a],r);return _.isEmpty(o)?void 0:o}}function c(e,t,r){if(!_.isEmpty(t))return _.filter(t,(function(t){var i=function(i){if(!t.source.roles[i])return"continue";var n=_.find(r,(function(e){return e.name===i}));return n&&n.cartesianKind===e?{value:!0}:void 0};for(var n in t.source.roles){var a=i(n);if("object"==typeof a)return a.value}return!1}))}function l(e){var t=_.find(e,(function(e){return null!=e}));if(null!=t){var r=typeof t;if(!_.some(e,(function(e){return null!=e&&typeof e!==r})))return r}}function p(e,t){var r=_.zip(e,t),i=_.chain(r).filter((function(e){return null!=e[0]&&null!=e[1]})).sortBy((function(e){return e[0]})).unzip().value(),n=i[0],a=i[1];return{xValues:n,yValues:a}}function f(e,t){var r=_.sum(e)/e.length,i=_.sum(t)/t.length,n=_.chain(e).map((function(e){return Math.pow(e-r,2)})).sum();if(0!==n){var a=_.chain(e).map((function(e,n){return(e-r)*(t[n]-i)})).sum(),o=a/n,u=i-r*o;return{slope:o,intercept:u}}}function v(e,t,r){return e?[t*e.slope+e.intercept,r*e.slope+e.intercept]:[null,null]}function h(r){return e.DataViewObjects.getValue(r,t.scalarKeyMinPropertyIdentifier)}function m(e,t){var r=_.head(e.objects);if(r&&h(r))return _.map(e.objects,(function(e){return h(e)}));if(t){var i=e;if(i.highlights)return i.highlights}return e.values}function y(e,t,r,i){for(var n=[],a=_.map(e,(function(e){return m(e,i)})),o=_.map(t,(function(e){return m(e,i)})),u=e.length>1,s=0;s<o.length;s++){var c=u?a[s]:a[0],l=o[s];r&&n.length>0?(n[0].xValues=n[0].xValues.concat(c),n[0].yValues=n[0].yValues.concat(l)):n.push({xValues:c,yValues:l})}return n}function d(e,i,n,a,o,u,s,c,l,p,f){var v,h,m=c.categorical.categories.for.in,y=c.categorical.values.group;if(y&&!_.isEmpty(y.select)&&(v=y.select[0].for?y.select[0].for.in:y.select[0].bind.to,h=y.by),v&&h){var d=(R={},R[m]=!0,R),g=(T={},T[v]=!0,T),b=(V={},V[h]=!0,V),w=[];for(var E in o){var D={values:o[E]};u&&(D.highlights=u[E]),w.push([D])}var C=t.createCategoricalDataViewBuilder().withCategory({source:{displayName:e.displayName,queryName:x,type:e.type,isMeasure:!1,roles:d},values:a,identityFrom:{fields:[t.SQExprBuilder.columnRef(t.SQExprBuilder.entity("s","RegressionEntity"),"RegressionCategories")]}}).withGroupedValues({groupColumn:{source:{displayName:i.displayName+"Regression",queryName:S,type:i.type,isMeasure:i.isMeasure,roles:b},values:n,identityFrom:{fields:[t.SQExprBuilder.columnRef(t.SQExprBuilder.entity("s","RegressionEntity"),"RegressionSeries")]}},valueColumns:[{source:{displayName:i.displayName,queryName:r.regressionYQueryName,type:i.type,isMeasure:i.isMeasure,roles:g}}],data:w}).build();return t.DataViewTransform.transformObjects(C,1,l,p,[],f),C;var R,T,V}}function g(e){return _.any(e,(function(e){var t=e;return null!=t.highlights}))}var x="RegressionX",S="RegressionSeries";r.regressionYQueryName="RegressionY",r.run=n,r.linearRegressionTransform=a})(r=t.DataViewRegression||(t.DataViewRegression={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r;!(function(r){function i(e,r){if(_.isEmpty(e))return{};for(var i={},n=0,a=e;n<a.length;n++){var o=a[n];if(o){var u=o.roles;if(u)for(var s in u)if(u[s]){var c=i[s];c||(c=i[s]=new t.QueryProjectionCollection([])),c.all().push({queryRef:o.queryName}),r&&r[s]&&(c.activeProjectionRefs=_.map(r[s],(function(e){return e.queryRef})))}}}return i}function n(t,r){for(var i={},n=0,a=r.columns;n<a.length;n++){var o=a[n];if(!(!o.index&&0!==o.index||o.index<0||o.index>=t.length)){var u=t[o.index];if(u){var s=u.queryName;s&&void 0===i[s]&&(i[s]=o.isMeasure?e.VisualDataRoleKind.Measure:e.VisualDataRoleKind.Grouping)}}}return i}r.projectionsFromSelects=i,r.createRoleKindFromMetadata=n})(r=t.DataViewSelectTransform||(t.DataViewSelectTransform={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(e,t,r){return new a(e,t,r)}function r(e,t){return i(e.values,t)||i(e.categories,t)}function i(e,t){if(e)for(var r=0,i=e;r<i.length;r++){var n=i[r],a=n.source.roles;if(a&&a[t])return n}}function n(e,t){if(e)for(var r=0,i=e;r<i.length;r++){var n=i[r];if(!n.identity&&n.source.index===t)return n}}e.createCategoricalEvalContext=t;var a=(function(){function t(e,t,r){this.colorAllocatorProvider=e,this.dataView=t,this.selectTransforms=r,this.columnsByRole={}}return t.prototype.getColorAllocator=function(e){return this.colorAllocatorProvider.get(e)},t.prototype.getExprValue=function(t){var r=this.index;if(_.isNumber(r)){var i=this.selectTransforms;if(i){var a=e.findSelectIndex(t,i);if(a!==-1){var o=this.dataView,u=n(o.values,a);if(u)return u.values[r]}}}},t.prototype.getRoleValue=function(e){var t=this.columnsByRole,i=t[e];if(i||(i=t[e]=r(this.dataView,e)),i){var n=this.index;return null!=n?i.values[this.index]:void 0}},t.prototype.setCurrentRowIndex=function(e){this.index=e},t})()})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(e,t,i){return new r(e,t,i)}e.createTableEvalContext=t;var r=(function(){function t(e,t,r){this.colorAllocatorProvider=e,this.dataView=t,this.selectTransforms=r}return t.prototype.getColorAllocator=function(e){return this.colorAllocatorProvider.get(e)},t.prototype.getExprValue=function(t){var r=this.rowIdx;if(null!=r)return e.getExprValueFromTable(t,this.selectTransforms,this.dataView,r)},t.prototype.getRoleValue=function(e){},t.prototype.setCurrentRowIndex=function(e){this.rowIdx=e},t})()})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){}return e.prototype.evaluate=function(e){},e})();e.RuleEvaluation=t})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(e){function t(t,r){var i;return i=e.call(this)||this,i.inputRole=t,i.allocator=r,i}return __extends(t,e),t.prototype.evaluate=function(e){var t=e.getRoleValue(this.inputRole);if(void 0!==t)return this.allocator.color(t)},t})(e.RuleEvaluation);e.ColorRuleEvaluation=t})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){}return e.prototype.findProperty=function(e,t){var r=this.entities.withName(e);if(r&&!_.isEmpty(r.properties))return r.properties.withName(t)},Object.defineProperty(e.prototype,"isExtensionSchema",{get:function(){return this.hasOwnProperty("extends")},enumerable:!0,configurable:!0}),e.prototype.findHierarchy=function(e,t){var r=this.entities.withName(e);if(r&&!_.isEmpty(r.hierarchies))return r.hierarchies.withName(t)},e.prototype.findHierarchyByVariation=function(e,t,r,i){var n=this.findTargetEntityOfVariation(e,t,r);if(n&&!_.isEmpty(n.hierarchies))return n.hierarchies.withName(i)},e.prototype.findTargetEntityOfVariation=function(e,t,r){var i=this.entities.withName(e);if(i&&!_.isEmpty(i.properties)){var n=i.properties.withName(t);if(n){var a=n.column;if(a&&!_.isEmpty(a.variations)){var o=a.variations.withName(r);return o?o.navigationProperty?o.navigationProperty.targetEntity:i:void 0}}}},e.prototype.findPropertyWithKpi=function(e,t){var r=this.entities.withName(e);if(r&&!_.isEmpty(r.properties))for(var i=0,n=r.properties;i<n.length;i++){var a=n[i];if(a&&a.measure&&a.measure.kpi&&(a.measure.kpi.status===t||a.measure.kpi.goal===t))return a}},e})();e.ConceptualSchema=t;var r;!(function(e){e[e.None=0]="None",e[e.Address=1]="Address",e[e.City=2]="City",e[e.Company=3]="Company",e[e.Continent=4]="Continent",e[e.Country=5]="Country",e[e.County=6]="County",e[e.Date=7]="Date",e[e.Image=8]="Image",e[e.ImageUrl=9]="ImageUrl",e[e.Latitude=10]="Latitude",e[e.Longitude=11]="Longitude",e[e.Organization=12]="Organization",e[e.Place=13]="Place",e[e.PostalCode=14]="PostalCode",e[e.Product=15]="Product",e[e.StateOrProvince=16]="StateOrProvince",e[e.WebUrl=17]="WebUrl"})(r=e.ConceptualDataCategory||(e.ConceptualDataCategory={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t,r=jsCommon.StringExtensions,i=e.data.FieldExprPattern;!(function(t){function n(e){if(e&&1===e.length&&e[0])return e[0].scriptResult}function a(e){var t=n(e);if(t){var r=e[0].metadata&&e[0].metadata.objects;return s(t,r)}}function o(t,r){if(r){var i=n(t);if(i&&i.script&&i.script.source&&i.script.provider){var a=e.data.DataViewObjectDefinitions.getValue(r,i.script.source,null),o=e.data.DataViewObjectDefinitions.getValue(r,i.script.provider,null),u=a?a.value:null,s=o?o.value:null;return p(u,s,i.script.scriptOutputType)}}}function u(e){return c(n(e))}function s(t,r){if(t&&t.script&&t.script.source&&t.script.provider&&r){var i=e.DataViewObjects.getValue(r,t.script.source),n=e.DataViewObjects.getValue(r,t.script.provider);return p(i,n,t.script.scriptOutputType)}}function c(e){return l(e&&e.script)}function l(e){if(e){var t=e.scriptSourceDefault,r=e.scriptProviderDefault,i=e.scriptOutputType;return p(t,r,i)}}function p(e,t,i){if(!r.isNullOrUndefinedOrWhiteSpaceString(e)&&!r.isNullOrUndefinedOrWhiteSpaceString(t))return{source:e,provider:t,outputType:i||y}}function f(e,t,r,i,n){if(i&&i.script)return v(e,t,r,i.script,n)}function v(e,t,n,a,o){var u=!!l(a),s={VariableName:"dataset",Columns:[],Parameters:[]};if(e&&t&&!_.isEmpty(t)){var c=[],p=[];for(var f in e)for(var v=0,m=e[f].all();v<m.length;v++){var y=m[v],g=t.withName(y.queryRef);if(g){var x={QueryName:g.name},S=i.visit(g.expr,new d(n));u&&(x.Role=f,S=f+"."+S),p.push(x),c.push(S)}}c=r.ensureUniqueNames(c);for(var b=0;b<c.length;b++){var x=p[b];x.Name=c[b]}s.Columns=p}return s.Parameters=h(a,o),s}function h(t,r){var i=[];if(r)for(var n in r){var a=e.DataViewObjects.getObject(r,n);if(a)for(var o in a){var u=m(t,a,n,o);if(u){var s={ObjectName:n,PropertyName:o,Value:u};i.push(s)}}}return i}function m(t,r,i,n){if(!(t&&t.source&&t.source.objectName===i&&t.source.propertyName===n||t&&t.provider&&t.provider.objectName===i&&t.provider.propertyName===n)){var a=e.DataViewObject.getFillColorByPropertyName(r,n);if(a)return e.data.PrimitiveValueEncoding.text(a);var o=e.DataViewObject.getValue(r,n);if(void 0!==o&&null!==o)switch(typeof o){case"string":return e.data.PrimitiveValueEncoding.text(o);case"number":var u=o;return e.Double.isInteger(u)?e.data.PrimitiveValueEncoding.integer(u):e.data.PrimitiveValueEncoding.double(u);case"boolean":return e.data.PrimitiveValueEncoding.boolean(o)}}}var y="png";t.findScriptResultMapping=n,t.extractScriptResult=a,t.extractScriptResultFromVisualConfig=o,t.extractScriptResultDefaultFromDataViewMappings=u,t.extractScriptResultDefaultFromDataViewMappingScriptDefinition=l,t.getScriptInput=f,t.getScriptInputFromScriptDefinition=v;var d=(function(){function e(e){this.federatedSchema=e}return e.prototype.visitColumn=function(t){return e.getNameForProperty(t,this.federatedSchema)},e.prototype.visitColumnAggr=function(t){return e.getNameForProperty(t,this.federatedSchema)},e.prototype.visitGroupingColumn=function(t){return e.getNameForProperty(t,this.federatedSchema)},e.prototype.visitGroupingColumnAggr=function(t){return e.getNameForProperty(t,this.federatedSchema)},e.prototype.visitColumnHierarchyLevelVariation=function(t){return e.getVariationLevelName(t,this.federatedSchema)},e.prototype.visitEntity=function(e){return e.entity},e.prototype.visitEntityAggr=function(e){return e.entity},e.prototype.visitHierarchy=function(t){return e.getNameForHierarchy(t,this.federatedSchema)},e.prototype.visitHierarchyLevel=function(e){},e.prototype.visitHierarchyLevelAggr=function(t){return e.getNameForProperty(t,this.federatedSchema)},e.prototype.visitMeasure=function(t){return e.getNameForProperty(t,this.federatedSchema)},e.prototype.visitSelectRef=function(e){return i.visit(e,this)},e.prototype.visitPercentile=function(e){return i.visit(e.arg,this)},e.prototype.visitPercentOfGrandTotal=function(e){return i.visit(e.baseExpr,this)},e.prototype.visitPercentOfRoleTotal=function(e){return i.visit(e.baseExpr,this)},e.prototype.visitTransformOutputRoleRef=function(e){return i.visit(e,this)},e.getNameForHierarchy=function(e,t){var r=t.schema(e.schema),i=r.findHierarchy(e.entity,e.name);if(i)return i.name},e.getNameForProperty=function(e,t){var r=t.schema(e.schema),i=r.findProperty(e.entity,e.name);if(i)return i.name},e.getVariationLevelName=function(e,t){var r=e.source,i=t.schema(r.schema).findProperty(r.entity,r.name);if(i)for(var n=i.column.variations,a=0,o=n;a<o.length;a++){var u=o[a];if(u.name===e.variationName)for(var s=0,c=u.defaultHierarchy.levels;s<c.length;s++){var l=c[s];if(l.name===e.level.level)return l.column.name}}},e})()})(t=e.ScriptResultUtil||(e.ScriptResultUtil={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r;!(function(t){var r;!(function(t){function r(t,r){!e.DataViewAnalysis.isMetadataEquivalent(t.metadata,r.metadata),r.metadata.segment||delete t.metadata.segment,t.table&&r.table&&i(t.table,r.table),t.categorical&&r.categorical&&n(t.categorical,r.categorical),t.tree&&r.tree&&o(t.tree.root,r.tree.root,!0),t.matrix&&r.matrix&&o(t.matrix.rows.root,r.matrix.rows.root,!1)}function i(e,t){if(!_.isEmpty(t.rows)){var r=t.lastMergeIndex+1;a(e.rows,t.rows,r),t.identity&&a(e.identity,t.identity,r)}}function n(e,t){if(!_.isEmpty(e.categories)&&!_.isEmpty(t.categories)){for(var r=t.lastMergeIndex+1,i=t.categories.length,n=0;n<i;n++){var o=t.categories[n],u=e.categories[n];o.values&&a(u.values,o.values,r)}t.categories[0].identity&&a(e.categories[0].identity,t.categories[0].identity,r)}if(e.values&&t.values)for(var s=t.values.length,c=0;c<s;c++){var l=t.values[c],p=e.values[c];!p.values&&l.values&&(p.values=[]);var r=t.lastMergeIndex+1;l.values&&a(p.values,l.values,r),l.highlights&&a(p.highlights,l.highlights,r)}}function a(e,t,r){if(r>=t.length)return t;var i=[];return void 0!==r&&(i=t.splice(0,r)),Array.prototype.push.apply(e,t),i}function o(e,t,r){if(t.children&&0!==t.children.length){if(r&&(!e.children||0===e.children.length))return void(e.children=t.children);
var i=u(t.children),n=e.children[e.children.length-1],s=a(e.children,t.children,i);s.length>0&&o(n,s[s.length-1],r)}}function u(e){if(0===e.length)return 0;for(var t=0;t<e.length;t++){var r=e[t];if(!r.isMerge)break}return t}t.mergeDataViews=r,t.mergeTables=i,t.mergeCategorical=n,t.mergeTreeNodes=o})(r=t.DataViewMerger||(t.DataViewMerger={}))})(r=t.segmentation||(t.segmentation={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=jsCommon.ArrayExtensions,r=(function(){function r(){}return r.prototype.visitColumnRef=function(t){var r=t.source,i=r.accept(this);return r===i?t:new e.SQColumnRefExpr(i,t.ref)},r.prototype.visitMeasureRef=function(t){var r=t.source,i=r.accept(this);return r===i?t:new e.SQMeasureRefExpr(i,t.ref)},r.prototype.visitAggr=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQAggregationExpr(i,t.func)},r.prototype.visitSelectRef=function(e){return e},r.prototype.visitPercentile=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQPercentileExpr(i,t.k,t.exclusive)},r.prototype.visitGroupRef=function(t){for(var r=t.source,i=t.source.accept(this),n=t.groupedExprs,a=new Array(n.length),o=0;o<n.length;o++)a[o]=n[o].accept(this);return r===i&&e.SQExprUtils.sequenceEqual(n,a)?t:new e.SQGroupRefExpr(t.ref,i,a)},r.prototype.visitHierarchy=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQHierarchyExpr(i,t.hierarchy)},r.prototype.visitHierarchyLevel=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQHierarchyLevelExpr(i,t.level)},r.prototype.visitPropertyVariationSource=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQPropertyVariationSourceExpr(i,t.name,t.property)},r.prototype.visitEntity=function(e){return e},r.prototype.visitSubqueryRef=function(e){return e},r.prototype.visitNamedQueryRef=function(e){return e},r.prototype.visitAnd=function(t){var r=t.left,i=r.accept(this),n=t.right,a=n.accept(this);return r===i&&n===a?t:new e.SQAndExpr(i,a)},r.prototype.visitBetween=function(t){var r=t.arg,i=r.accept(this),n=t.lower,a=n.accept(this),o=t.upper,u=o.accept(this);return r===i&&n===a&&o===u?t:new e.SQBetweenExpr(i,a,u)},r.prototype.visitIn=function(r){var i,n=r.args,a=this.rewriteAll(n),o=r.values,u=r.table,s=u;if(o)for(var c=0,l=o.length;c<l;c++){var p=o[c],f=this.rewriteAll(p);p===f||i||(i=t.take(o,c)),i&&i.push(f)}return u&&(s=u.accept(this)),n!==a||i||u!==s?new e.SQInExpr(a,i||o,s):r},r.prototype.rewriteAll=function(e){for(var r,i=0,n=e.length;i<n;i++){var a=e[i],o=a.accept(this);a===o||r||(r=t.take(e,i)),r&&r.push(o)}return r||e},r.prototype.visitOr=function(t){var r=t.left,i=r.accept(this),n=t.right,a=n.accept(this);return r===i&&n===a?t:new e.SQOrExpr(i,a)},r.prototype.visitCompare=function(t){var r=t.left,i=r.accept(this),n=t.right,a=n.accept(this);return r===i&&n===a?t:new e.SQCompareExpr(t.comparison,i,a)},r.prototype.visitContains=function(t){var r=t.left,i=r.accept(this),n=t.right,a=n.accept(this);return r===i&&n===a?t:new e.SQContainsExpr(i,a)},r.prototype.visitExists=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQExistsExpr(i)},r.prototype.visitNot=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQNotExpr(i)},r.prototype.visitStartsWith=function(t){var r=t.left,i=r.accept(this),n=t.right,a=n.accept(this);return r===i&&n===a?t:new e.SQStartsWithExpr(i,a)},r.prototype.visitConstant=function(e){return e},r.prototype.visitFloor=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQFloorExpr(i,t.size,t.timeUnit)},r.prototype.visitDateSpan=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQDateSpanExpr(t.unit,i)},r.prototype.visitDateAdd=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQDateAddExpr(t.unit,t.amount,i)},r.prototype.visitNow=function(e){return e},r.prototype.visitDefaultValue=function(e){return e},r.prototype.visitAnyValue=function(e){return e},r.prototype.visitArithmetic=function(t){var r=t.left,i=r.accept(this),n=t.right,a=n.accept(this);return r===i&&n===a?t:new e.SQArithmeticExpr(i,a,t.operator)},r.prototype.visitScopedEval=function(t){var r=t.expression,i=r.accept(this),n=t.scope,a=this.rewriteAll(n);return r===i&&n===a?t:new e.SQScopedEvalExpr(i,a)},r.prototype.visitWithRef=function(e){return e},r.prototype.visitTransformTableRef=function(e){return e},r.prototype.visitTransformOutputRoleRef=function(e){return e},r.prototype.visitRoleRef=function(e){return e},r.prototype.visitFillRule=function(t){var r=t.input,i=r.accept(this),n=t.rule,a=n.linearGradient2,o=a;a&&(o=this.visitLinearGradient2(a));var u=n.linearGradient3,s=u;if(u&&(s=this.visitLinearGradient3(u)),r!==i||a!==o||u!==s){var c={};return o&&(c.linearGradient2=o),s&&(c.linearGradient3=s),new e.SQFillRuleExpr(i,c)}return t},r.prototype.visitLinearGradient2=function(e){var t=e.min,r=this.visitFillRuleStop(t),i=e.max,n=this.visitFillRuleStop(i),a=e.nullColoringStrategy,o=this.visitFillNullStrategy(a);if(t!==r||i!==n||a!==o){var u={min:r,max:n};return o&&(u.nullColoringStrategy=o),u}return e},r.prototype.visitLinearGradient3=function(e){var t=e.min,r=this.visitFillRuleStop(t),i=e.mid,n=this.visitFillRuleStop(i),a=e.max,o=this.visitFillRuleStop(a),u=e.nullColoringStrategy,s=this.visitFillNullStrategy(u);if(t!==r||i!==n||a!==o||u!==s){var c={min:r,mid:n,max:o};return s&&(c.nullColoringStrategy=s),c}return e},r.prototype.visitFillRuleStop=function(e){var t=e.color,r=e.color.accept(this),i=e.value,n=i;if(i&&(n=i.accept(this)),t!==r||i!==n){var a={color:r};return n&&(a.value=n),a}return e},r.prototype.visitFillNullStrategy=function(e){if(e){var t=e.strategy,r=t.accept(this),i=e.color,n=i;if(i&&(n=i.accept(this)),t!==r||i!==n){var a={strategy:r};return n&&(a.color=n),a}return e}},r.prototype.visitThemeColor=function(e){return e},r.prototype.visitResourcePackageItem=function(e){return e},r.prototype.visitDiscretize=function(t){var r=t.source.accept(this);return r===t.source?t:new e.SQDiscretizeExpr(r,t.count)},r.prototype.visitMember=function(t){var r=t.source.accept(this);return r===t.source?t:new e.SQMemberExpr(r,t.member)},r})();e.SQExprRewriter=r})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function r(e){return e.accept(new i)}t.run=r;var i=(function(t){function r(){return t.call(this)||this}return __extends(r,t),r.prototype.visitCompare=function(t){if(0!==t.comparison)return this.visitUnsupported(t);if(!this.isSupported(t.left)||!this.isSupported(t.right))return this.visitUnsupported(t);var r=this.isComparand(t.left),i=this.isComparand(t.right);if(r===i)return this.visitUnsupported(t);var n=r?t.left:t.right,a=r?t.right:t.left,o=this.current;return o?(o.add(n,a),t):e.SQExprBuilder.inValues([n],[[a]])},r.prototype.visitOr=function(e){if(!this.isSupported(e.left)||!this.isSupported(e.right))return this.visitUnsupported(e);var t;return this.current||(t=this.current=new n),e.left.accept(this),e.right.accept(this),t?(this.current=null,t.complete()||e):e},r.prototype.visitAnd=function(e){if(!this.isSupported(e.left)||!this.isSupported(e.right))return this.visitUnsupported(e);var r=this.current;return r?(r.cancel(),e):t.prototype.visitAnd.call(this,e)},r.prototype.visitUnsupported=function(e){var t=this.current;return t&&t.cancel(),e},r.prototype.isSupported=function(t){return t instanceof e.SQCompareExpr||t instanceof e.SQColumnRefExpr||t instanceof e.SQConstantExpr||t instanceof e.SQHierarchyLevelExpr||t instanceof e.SQOrExpr||t instanceof e.SQAndExpr},r.prototype.isComparand=function(t){return t instanceof e.SQColumnRefExpr||t instanceof e.SQHierarchyLevelExpr},r})(e.SQExprRewriter),n=(function(){function t(){}return t.prototype.add=function(t,r){if(!this.cancelled){if(this.operand&&!e.SQExpr.equals(t,this.operand))return void this.cancel();this.operand=t;var i=this.values;i||(i=this.values=[]),i.push(r)}},t.prototype.cancel=function(){this.cancelled=!0},t.prototype.complete=function(){if(!this.cancelled&&this.operand)return e.SQExprBuilder.inValues([this.operand],_.map(this.values,(function(e){return[e]})))},t})()})(t=e.EqualsToInRewriter||(e.EqualsToInRewriter={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function r(e){var t=new i;return e.accept(t),t.sawSubquery?3:t.filterKind}t.run=r;var i=(function(e){function t(){var t=e.call(this)||this;return t.filterKind=0,t.sawSubquery=!1,t}return __extends(t,e),t.prototype.visitMeasureRef=function(e){this.filterKind=1},t.prototype.visitExists=function(e){this.filterKind=2},t.prototype.visitAggr=function(e){this.filterKind=1},t.prototype.visitSubqueryRef=function(e){this.sawSubquery=!0},t})(e.DefaultSQExprVisitorWithTraversal)})(t=e.FilterKindDetector||(e.FilterKindDetector={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r;!(function(e){function t(e,t){var r=e.conditions(),n=r[0];if(n){var a=new i(t);if(n.accept(a))return a.getResult()}}function r(e){var t=e.expr.accept(new n);if(t)return t.value}function o(e){return e.expr.accept(new a)}e.asScopeIdsContainer=t,e.getFirstComparandValue=r,e.getAllComparands=o})(r=t.SQExprConverter||(t.SQExprConverter={}));var i=(function(r){function i(e){var i=r.call(this)||this;i.isRoot=!0,i.isNot=!1,i.keyExprsCount=null,i.valueExprs=[],i.fieldExprs=[];for(var n=0,a=e;n<a.length;n++){var o=a[n];i.fieldExprs.push(t.SQExprBuilder.removeEntityVariables(o))}return i}return __extends(i,r),i.prototype.getResult=function(){for(var t=this.valueExprs,r=[],n=this.keyExprsCount||1,a=0,o=n,u=t.length;a<u&&o<=u;){var s=t.slice(a,o),c=i.getScopeIdentity(this.fieldExprs,s);jsCommon.ArrayExtensions.isInArray(r,c,e.DataViewScopeIdentity.equals)||r.push(c),a+=n,o+=n}return{isNot:this.isNot,scopeIds:r}},i.getScopeIdentity=function(e,r){for(var i,n=0,a=e.length;n<a;n++){var o=t.SQExprBuilder.equal(e[n],r[n]);i=i?t.SQExprBuilder.and(i,o):o}return t.createDataViewScopeIdentity(i)},i.prototype.visitOr=function(e){return null!==this.keyExprsCount?this.unsupportedSQExpr():(this.isRoot=!1,e.left.accept(this)&&e.right.accept(this))},i.prototype.visitNot=function(e){return this.isRoot?(this.isNot=!0,e.arg.accept(this)):this.unsupportedSQExpr()},i.prototype.visitConstant=function(e){return this.isRoot&&0===e.type.primitiveType?this.unsupportedSQExpr():(this.valueExprs.push(e),!0)},i.prototype.visitCompare=function(e){return null!==this.keyExprsCount?this.unsupportedSQExpr():(this.isRoot=!1,0!==e.comparison?this.unsupportedSQExpr():e.left.accept(this)&&e.right.accept(this))},i.prototype.visitIn=function(e){if(!e.values)return!1;this.keyExprsCount=0;var t;this.isRoot=!1;for(var r=0,i=e.args;r<i.length;r++){var n=i[r];if(t=n.accept(this),!t)return this.unsupportedSQExpr();this.keyExprsCount++}if(this.keyExprsCount!==this.fieldExprs.length)return this.unsupportedSQExpr();for(var a=e.values,o=0,u=a;o<u.length;o++)for(var s=u[o],c=(s.length,0),l=s;c<l.length;c++){var p=l[c];if(t=p.accept(this),!t)return this.unsupportedSQExpr()}return t},i.prototype.visitColumnRef=function(e){if(this.isRoot)return this.unsupportedSQExpr();var r=t.SQExprBuilder.removeEntityVariables(e);return null!==this.keyExprsCount?t.SQExpr.equals(this.fieldExprs[this.keyExprsCount],r):t.SQExpr.equals(this.fieldExprs[0],r)},i.prototype.visitDefaultValue=function(e){return this.isRoot||null!==this.keyExprsCount?this.unsupportedSQExpr():(this.valueExprs.push(e),!0)},i.prototype.visitAnyValue=function(e){return this.isRoot||null!==this.keyExprsCount?this.unsupportedSQExpr():(this.valueExprs.push(e),!0)},i.prototype.visitDefault=function(e){return this.unsupportedSQExpr()},i.prototype.unsupportedSQExpr=function(){return!1},i})(t.DefaultSQExprVisitor),n=(function(e){function r(){return e.apply(this,arguments)||this}return __extends(r,e),r.prototype.visitAnd=function(e){return e.left.accept(this)||e.right.accept(this)},r.prototype.visitCompare=function(e){if(0===e.comparison){if(e.right instanceof t.SQConstantExpr)return e.right;if(e.left instanceof t.SQConstantExpr)return e.left}},r})(t.DefaultSQExprVisitor),a=(function(e){function r(){return e.apply(this,arguments)||this}return __extends(r,e),r.prototype.visitAnd=function(e){var t=[];return t=t.concat(e.left.accept(this)),t=t.concat(e.right.accept(this))},r.prototype.visitCompare=function(e){if(0===e.comparison){var r=[];return e.right instanceof t.SQConstantExpr?r.push({expr:e.left,value:e.right.value}):e.left instanceof t.SQConstantExpr&&r.push({expr:e.right,value:e.left.value}),r}},r})(t.DefaultSQExprVisitor)})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t,r=jsCommon.ArrayExtensions;!(function(t){function i(e){var t=new u;return e.accept(t),t.malformed?null:r.emptyToNull(t.keys)}function n(e){var t=new u;return e.accept(t),t.malformed?null:r.emptyToNull(t.values)}function a(t){var i=new u;if(t.accept(i),!i.malformed){var n=r.emptyToNull(i.keys),a=r.emptyToNull(i.values);return n&&a?e.SQExprBuilder.inValues(n,[a]):void 0}}function o(e,t){var r=new s(t);return e.accept(r),r.getResult()}t.getKeys=i,t.getValues=n,t.getInExpr=a,t.getSubset=o;var u=(function(e){function t(){var t=e.apply(this,arguments)||this;return t.keys=[],t.values=[],t}return __extends(t,e),t.prototype.visitAnd=function(e){e.left.accept(this),e.right.accept(this)},t.prototype.visitCompare=function(e){return 0!==e.comparison?void this.visitDefault(e):(e.left.accept(this),void e.right.accept(this))},t.prototype.visitColumnRef=function(e){this.keys.push(e)},t.prototype.visitGroupRef=function(e){this.keys.push(e)},t.prototype.visitHierarchyLevel=function(e){this.keys.push(e)},t.prototype.visitConstant=function(e){this.values.push(e)},t.prototype.visitArithmetic=function(e){this.keys.push(e)},t.prototype.visitDefault=function(e){this.malformed=!0},t})(e.DefaultSQExprVisitor),s=(function(t){function r(e){var r=t.call(this)||this;return r.identityFieldExprs=e,r.identityComparisonExprs=[],r.identityComparisonExprCount=0,r}return __extends(r,t),r.prototype.getResult=function(){if(!this.malformed&&this.identityComparisonExprCount===this.identityFieldExprs.length){for(var t,r=0,i=this.identityComparisonExprs;r<i.length;r++){var n=i[r];t=t?e.SQExprBuilder.and(t,n):n}return t}},r.prototype.visitAnd=function(e){e.left.accept(this),e.right.accept(this)},r.prototype.visitCompare=function(t){if(0!==t.comparison)return void this.visitDefault(t);var r=_.findIndex(this.identityFieldExprs,(function(r){return e.SQExpr.equals(t.left,r)}));r>=0&&!this.identityComparisonExprs[r]&&(this.identityComparisonExprs[r]=t,this.identityComparisonExprCount++)},r.prototype.visitDefault=function(e){this.malformed=!0},r})(e.DefaultSQExprVisitor)})(t=e.ScopeIdentityExtractor||(e.ScopeIdentityExtractor={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function n(t,r){if(t){if(t instanceof e.SemanticFilter){var i=t.conditions();return o(t.from(),i[0])}return o(r,t.condition)}}function a(t){var r=u(t),i=new e.SQFromSubquerySource(r),n=new e.SQFrom,a=n.ensureSource(i,"subquery"),o=e.SQExprBuilder.inTable([t.fieldBeingFiltered],e.SQExprBuilder.subqueryRef(a.name));return e.SemanticFilter.fromSQFromAndSQExpr(n,o)}function o(t,n){var a=new i;if(a.visitCondition(n)){var o=t.sources(),u=o&&o[a.subqueryName];if(u&&e.isSQFromSubquerySource(u)){var s=u.subquery.orderBy();if(!s||1!==s.length)return;var c=s[0],l=r.run(c);if(!l)return;return{fieldBeingFiltered:a.fieldBeingFiltered,isTop:2===c.direction,itemCount:u.subquery.top(),orderByField:l}}}}function u(t){var r=new e.SQFrom,i=e.SQExprRewriterWithSourceRenames.rewrite(t.fieldBeingFiltered,null,r),n=e.SQExprRewriterWithSourceRenames.rewrite(t.orderByField,null,r),a=t.isTop?2:1,o=e.SemanticQuery.createWith({from:r,orderBy:[{expr:n,direction:a}],select:[{name:"field",expr:i}],top:t.itemCount});return o}t.extractParametersFromFilter=n,t.buildFilterFromParameters=a,t.extractParametersFromCondition=o})(t=e.TopNFilterPattern||(e.TopNFilterPattern={}));var r,i=(function(e){function t(){var t=e.call(this)||this;return t.fieldBeingFiltered=null,t.subqueryName=null,t}return __extends(t,e),t.prototype.visitCondition=function(e){return e.accept(this,0)},t.prototype.visitIn=function(e,t){return 0===t&&(!(!e.args||1!==e.args.length||!e.args[0].accept(this,1))&&!(!e.table||!e.table.accept(this,2)))},t.prototype.visitColumnRef=function(e,t){return 1===t&&(this.fieldBeingFiltered=e,!0)},t.prototype.visitHierarchyLevel=function(e,t){return 1===t&&(this.fieldBeingFiltered=e,!0)},t.prototype.visitSubqueryRef=function(e,t){return 2===t&&(this.subqueryName=e.variable,!0)},t})(e.DefaultSQExprVisitorWithArg);!(function(t){function r(e){var t=new i;if(t.visitOrderBy(e.expr))return t.orderByField}t.run=r;var i=(function(e){function t(){var t=e.call(this)||this;return t.orderByField=null,t}return __extends(t,e),t.prototype.visitOrderBy=function(e){return e.accept(this,0)},t.prototype.visitAggr=function(e,t){return 0===t&&(this.orderByField=e,!0)},t.prototype.visitMeasureRef=function(e,t){return 0===t&&(this.orderByField=e,!0)},t})(e.DefaultSQExprVisitorWithArg)})(r||(r={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function i(t,i){if(!i||!t)return t;var n=i.conditions();if(!n||1!==n.length)return t;var a=new r;if(!a.visitCondition(n[0]))return t;for(var o,u=a.fieldsBeingFiltered,s=t.from(),c=t.where(),l=function(t,r){var i=c[t],n=e.TopNFilterPattern.extractParametersFromFilter(i,s);n&&_.find(u,(function(t){return e.SQExpr.equals(n.fieldBeingFiltered,t)}))?o||(o=_.take(c,t)):o&&o.push(i)},p=0,f=c.length;p<f;p++)l(p,f);return o?e.SemanticFilter.fromSQFromAndSQFilters(s,o):t}t.removeUnnecessaryTopNFilters=i})(t=e.TopNFilterPruner||(e.TopNFilterPruner={}));var r=(function(e){function t(){var t=e.call(this)||this;return t.fieldsBeingFiltered=[],t}return __extends(t,e),t.prototype.visitCondition=function(e){return e.accept(this,0)},t.prototype.visitIn=function(e,t){if(0!==t)return!1;if(!e.args)return!1;for(var r=0,i=e.args;r<i.length;r++){var n=i[r];if(!n.accept(this,1))return!1}return!!e.values&&!e.table},t.prototype.visitColumnRef=function(e,t){return 1===t&&(this.fieldsBeingFiltered.push(e),!0)},t})(e.DefaultSQExprVisitorWithArg)})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function i(t){var i=_.filter(t.where(),(function(t){return 0===e.FilterKindDetector.run(t.condition)}));if(_.isEmpty(i))return t;var n=t.from(),a=r.ensureFiltersInSubqueries(n,i,n);return n===a?t:e.SemanticFilter.fromSQFromAndSQFilters(a,t.where())}function n(t,i){for(var n=t.from(),a=n,o=0,u=i;o<u.length;o++){var s=u[o];a=r.ensureFiltersInSubqueries(a,s.where(),s.from())}return n===a?t:e.SemanticFilter.fromSQFromAndSQFilters(a,t.where())}function a(t,i){var n=_.filter(_.map(i.select(),(function(e){return e.expr})),(function(t){return!e.SQExprUtils.isMeasure(t)}));if(_.isEmpty(n))return t;var a=_.map(n,(function(t){return{condition:e.SQExprBuilder.equal(t,e.SQExprBuilder.anyValue(!0))}})),o=t.from(),u=r.ensureFiltersInSubqueries(o,a,o);return o===u?t:e.SemanticFilter.fromSQFromAndSQFilters(u,t.where())}t.makeSubqueriesLowerPrecedenceThanColumnFilters=i,t.makeSubqueriesLowerPrecedenceThanSpecificFilters=n,t.rewriteSubqueriesForContainingQuery=a})(t=e.SubqueryRewriter||(e.SubqueryRewriter={}));var r=(function(){function t(e,t){this.filtersToEnsure=e,this.filtersToEnsureFrom=t,this.modifiedSubquery=!1}return t.ensureFiltersInSubqueries=function(r,i,n){var a=new t(i,n),o=e.SemanticQueryRewriter.rewriteFrom(r,a);return o},t.prototype.visitEntity=function(e,t){return e},t.prototype.visitSubquery=function(t,r){for(var i=t.subquery.where(),n=[],a=function(t){_.find(i,(function(r){return e.SQFilter.equals(t,r)}))||n.push(t)},o=0,u=this.filtersToEnsure;o<u.length;o++){var s=u[o];a(s)}return 0===n.length?t:(this.modifiedSubquery=!0,new e.SQFromSubquerySource(t.subquery.addWhere(n,this.filtersToEnsureFrom)))},t.prototype.visitExpr=function(e,t){return e},t})()})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(e){return e+"M"}function r(e){return e+"D"}function i(e){return e+"L"}function n(e){var t=new Date(e.getTime()-6e4*e.getTimezoneOffset()),r=t.toISOString();return _.endsWith(r,"Z")&&(r=r.substr(0,r.length-1)),"datetime'"+r+"'"}function a(e){return"'"+e.replace(s,"''")+"'"}function o(){return"null"}function u(e){return e?"true":"false"}var s=/'/g;e.decimal=t,e.double=r,e.integer=i,e.dateTime=n,e.text=a,e.nullEncoding=o,e.boolean=u})(t=e.PrimitiveValueEncoding||(e.PrimitiveValueEncoding={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function r(){return new o}function i(e,r){var i=t.SQExprBuilder.removeAggregate(e).getMetadata(r);return i||(i=e.getMetadata(r)),i}function n(e,r){var i=t.SQExprConverter.asFieldPattern(e),n=t.FieldExprPattern.toFieldExprEntityItemPattern(i),a=r.schema(n.schema);return a.capabilities}function a(e){switch(e){case 6:return 1;case 3:return 5;case 7:return 2;case 5:return 4;case 4:return 3;case 2:return 0}}t.createSQAggregationOperations=r;var o=(function(){function r(){}return r.prototype.getSupportedAggregates=function(r,a,o){var u=i(r,a);if(!u)return[];var s=u.type,c=u.kind,l=u.idOnEntityKey;if(!s)return[];if(1===c)return[];if(s.numeric||s.integer){var p=[0,1,3,4,2,5,7,8];return n(r,a).supportsMedian&&p.push(6),p}var f=[];(s.dateTime||s.text&&n(r,a).supportsStringMinMax)&&(_.isEmpty(o)||e.ValueType.isCompatibleTo(s,o))&&(f.push(3),f.push(4));var v=2===t.SQExprInfo.getAggregate(r);return l&&!v||f.push(2),f.push(5),f},r.prototype.isSupportedAggregate=function(e,t,r,i){var n=this.getSupportedAggregates(e,t,i);return _.contains(n,r)},r.prototype.createExprWithAggregate=function(e,r,i,n,a){var o;return o=null!=a&&this.isSupportedAggregate(e,r,a,n)?a:this.defaultAggregate(e,r,i,n),void 0!==o&&(e=t.SQExprBuilder.aggregate(e,o)),e},r.prototype.defaultAggregate=function(t,r,i,o){void 0===i&&(i=!1);var u=t.getConceptualProperty(r,!0);if(u){var s;if(u&&0===u.kind){var c=u.column?u.column.defaultAggregate:null,l=u.type;if((l.integer||l.numeric)&&1!==c)s=a(c),void 0===s&&(s=0);else if(i&&(l.dateTime||l.text&&n(t,r).supportsStringMinMax)&&(_.isEmpty(o)||e.ValueType.isCompatibleTo(l,o)))return 3;void 0===s&&i&&(s=5)}return s}},r})();t.defaultAggregateToQueryAggregateFunction=a})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function a(e,r){var i=m(r);if(i)return t.getConceptualHierarchyLevel(e,i.schema,i.entity,i.name,i.level)}function o(e,t,r,i,n){var a=e.schema(t),o=a.findHierarchy(r,i);if(o)return o.levels.withName(n)}function u(t,r){if(t instanceof e.SQHierarchyExpr){var i=t;if(t.arg instanceof e.SQEntityExpr){var n=t.arg;return r.schema(n.schema).findHierarchy(n.entity,i.hierarchy)}if(t.arg instanceof e.SQPropertyVariationSourceExpr){var a=t.arg,o=a.arg;return r.schema(o.schema).findHierarchyByVariation(o.entity,a.property,a.name,i.hierarchy)}}}function s(e,t,a){return r.convert(t,e)||n.expand(t,e)||!a&&i.expand(t,e)||t}function c(t,r){if(r instanceof e.SQHierarchyExpr||r instanceof e.SQHierarchyLevelExpr)return!0;var i=r.getConceptualProperty(t);if(i){var n=i.column;if(n&&n.variations&&n.variations.length>0)return!0}return!1}function l(t){var r=e.SQExprConverter.asFieldPattern(t);if(r.columnHierarchyLevelVariation){var i=e.SQExprBuilder.entity(r.columnHierarchyLevelVariation.source.schema,r.columnHierarchyLevelVariation.source.entity);return e.SQExprBuilder.columnRef(i,r.columnHierarchyLevelVariation.source.name)}}function p(t){var r=e.SQExprConverter.asFieldPattern(t),i=r.hierarchyLevel;if(i){var n=e.SQExprBuilder.entity(i.schema,i.entity,i.entityVar);return e.SQExprBuilder.hierarchy(n,i.name)}}function f(t){if(t.arg instanceof e.SQHierarchyExpr){var r=t.arg;return r.arg instanceof e.SQPropertyVariationSourceExpr?r.arg:void 0}}function v(t,r,i){if(!(r instanceof e.SQHierarchyLevelExpr&&i instanceof e.SQHierarchyLevelExpr))return!1;var n=r,a=i;if(!e.SQExpr.equals(n.arg,a.arg))return!1;var o=e.SQExprUtils.indexOfExpr(t,n),u=e.SQExprUtils.indexOfExpr(t,a);return o!==-1&&u!==-1&&o<u}function h(e,t,r){for(var i=0;i<t.length&&v(e,t[i],r);)i++;return i}function m(e){return e.hierarchyLevel||e.hierarchyLevelAggr||e.columnHierarchyLevelVariation&&e.columnHierarchyLevelVariation.level}t.getConceptualHierarchyLevelFromExpr=a,t.getConceptualHierarchyLevel=o,t.getConceptualHierarchy=u,t.expandExpr=s,t.isHierarchyOrVariation=c,t.getSourceVariationExpr=l,t.getSourceHierarchy=p,t.getHierarchySourceAsVariationSource=f,t.areHierarchyLevelsOrdered=v,t.getInsertionIndex=h})(t=e.SQHierarchyExprUtils||(e.SQHierarchyExprUtils={}));var r;!(function(r){function i(r,i){if(r instanceof e.SQHierarchyExpr){var n=r,a=t.getConceptualHierarchy(n,i);if(a)return _.map(a.levels,(function(t){return e.SQExprBuilder.hierarchyLevel(r,t.name)}))}}r.convert=i})(r=e.SQExprHierarchyToHierarchyLevelConverter||(e.SQExprHierarchyToHierarchyLevelConverter={}));var i;!(function(t){function r(t,r){var i=[];if(t instanceof e.SQHierarchyLevelExpr){var n=e.SQExprConverter.asFieldPattern(t);if(n.hierarchyLevel){var a=e.FieldExprPattern.toFieldExprEntityItemPattern(n),o=r.schema(a.schema).findHierarchy(a.entity,n.hierarchyLevel.name);if(o)for(var u=o.levels,s=0,c=u;s<c.length;s++){var l=c[s];if(l.name===n.hierarchyLevel.level){i.push(t);break}i.push(e.SQExprBuilder.hierarchyLevel(e.SQExprBuilder.hierarchy(e.SQExprBuilder.entity(a.schema,a.entity,a.entityVar),o.name),l.name))}}}if(!_.isEmpty(i))return i}t.expand=r})(i||(i={}));var n;!(function(t){function r(t,r){var i,n=t.getConceptualProperty(r);if(n){var a=n.column;if(a&&a.variations&&a.variations.length>0){var o=a.variations,u=o[0],s=e.SQExprConverter.asFieldPattern(t),c=e.FieldExprPattern.toFieldExprEntityItemPattern(s);if(i=[],u.defaultHierarchy)for(var l=e.SQExprBuilder.hierarchy(e.SQExprBuilder.propertyVariationSource(e.SQExprBuilder.entity(c.schema,c.entity,c.entityVar),u.name,n.name),u.defaultHierarchy.name),p=0,f=u.defaultHierarchy.levels;p<f.length;p++){var v=f[p];i.push(e.SQExprBuilder.hierarchyLevel(l,v.name))}}}return i}t.expand=r})(n||(n={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function r(t,r){for(var n=[],a=0,o=r.length;a<o;a++){var u=r[a];u instanceof e.SQHierarchyLevelExpr?i(t,n,u,a):n.push({expr:u,children:null,selectQueryIndex:a})}return n}function i(t,r,i,n){var a=!0,o=e.SQHierarchyExprUtils.getSourceVariationExpr(i)||e.SQHierarchyExprUtils.getSourceHierarchy(i),u=_.last(r);if(u&&u.children&&e.SQExpr.equals(u.expr,o)){var s=e.SQHierarchyExprUtils.expandExpr(t,i.arg);if(s instanceof Array){var c=s;a=!e.SQHierarchyExprUtils.areHierarchyLevelsOrdered(c,_.last(u.children),i)}}a?r.push({expr:o,children:[i],selectQueryIndex:n}):u.children.push(i)}t.groupExprs=r})(t=e.SQExprGroupUtils||(e.SQExprGroupUtils={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r=jsCommon.StringExtensions,i=(function(){function r(e){this._kind=e}return r.equals=function(e,t,r,i){return z.run(e,t,r,i)},r.prototype.validate=function(e,t,r){var i=new J(e,t,r);return this.accept(i),i.errors},r.prototype.accept=function(e,t){},Object.defineProperty(r.prototype,"kind",{get:function(){return this._kind},enumerable:!0,configurable:!0}),r.isArithmetic=function(e){return 23===e.kind},r.isFloor=function(e){return 34===e.kind},r.isColumn=function(e){return 2===e.kind},r.isConstant=function(e){return 17===e.kind},r.isEntity=function(e){return 0===e.kind},r.isHierarchy=function(e){return 6===e.kind},r.isHierarchyLevel=function(e){return 7===e.kind},r.isIn=function(e){return 10===e.kind},r.isAggregation=function(e){return 4===e.kind},r.isMinAggregation=function(e){return r.isAggregation(e)&&3===e.func},r.isMaxAggregation=function(e){return r.isAggregation(e)&&4===e.func},r.isAvgAggregation=function(e){return r.isAggregation(e)&&1===e.func},r.isMedianAggregation=function(e){return r.isAggregation(e)&&6===e.func},r.isMeasure=function(e){return 3===e.kind},r.isPercentile=function(e){return 28===e.kind},r.isPropertyVariationSource=function(e){return 5===e.kind},r.isSelectRef=function(e){return 29===e.kind},r.isScopedEval=function(e){return 26===e.kind},r.isSubqueryRef=function(e){return 1===e.kind},r.isWithRef=function(e){return 27===e.kind},r.isTransformTableRef=function(e){return 30===e.kind},r.isTransformOutputRoleRef=function(e){return 31===e.kind},r.isResourcePackageItem=function(e){return 25===e.kind},r.isCompareRef=function(e){return 13===e.kind},r.isGroupRef=function(e){return 33===e.kind},r.isRoleRef=function(e){return 35===e.kind},r.isNamedQueryRef=function(e){return 37===e.kind},r.isBetween=function(e){return 9===e.kind},r.isAnd=function(e){return 8===e.kind},r.isOr=function(e){return 11===e.kind},r.isCompare=function(e){return 13===e.kind},r.isContains=function(e){return 12===e.kind},r.isDateSpan=function(e){return 18===e.kind},r.isDateAdd=function(e){return 19===e.kind},r.isExists=function(e){return 15===e.kind},r.isNot=function(e){return 16===e.kind},r.isNow=function(e){return 20===e.kind},r.isDefaultValue=function(e){return 22===e.kind},r.isAnyValue=function(e){return 21===e.kind},r.isStartsWith=function(e){return 14===e.kind},r.isFillRule=function(e){return 24===e.kind},r.isThemeColor=function(e){return 32===e.kind},r.isDiscretize=function(e){return 36===e.kind},r.isMember=function(e){return 38===e.kind},r.prototype.getMetadata=function(e){var i=t.SQExprConverter.asFieldPattern(this);if(i)return i.column||i.columnAggr||i.groupingColumn||i.groupingColumnAggr||i.measure?this.getMetadataForProperty(i,e):i.hierarchyLevel||i.hierarchyLevelAggr?this.getMetadataForHierarchyLevel(i,e):i.columnHierarchyLevelVariation?this.getMetadataForVariation(i,e):r.getMetadataForEntity(i,e)},r.prototype.getKeyColumns=function(e){var t=$.getColumnRefSQExpr(e,this);if(t){var r=[],i=this.getPropertyKeys(e);if(i&&i.length>0)for(var n=0,a=i.length;n<a;n++)r.push(G.columnRef(t.source,i[n].name));else r.push(t);return r}},r.prototype.hasGroupOnKeys=function(e){var t=this.getTargetColumnRef(e);if(t){var i=this.getPropertyKeys(e);if(!i||i.length<1)return!1;if(i.length>1)return!0;var n=G.columnRef(t.source,i[0].name);return!r.equals(n,this)}},r.prototype.getPropertyKeys=function(e){var t=this.getConceptualProperty(e,!0);if(t)return t.column?t.column.keys:void 0},r.prototype.getOrderByColumns=function(e){var t=this.getTargetColumnRef(e);if(t){var r=t.getConceptualProperty(e,!0),i=r&&r.column&&r.column.orderBy;if(_.isEmpty(i))return[];for(var n=new Array(i.length),a=0,o=i.length;a<o;a++)n[a]=G.columnRef(t.source,i[a].name);return n}},r.prototype.getConceptualProperty=function(e,r){var i=t.SQExprConverter.asFieldPattern(this);if(i){var n=t.FieldExprPattern.toFieldExprEntityItemPattern(i),a=t.FieldExprPattern.getPropertyName(i);if(a)return e.schema(n.schema).findProperty(n.entity,a);if(r){var o=i.hierarchyLevel||i.hierarchyLevelAggr;if(o){var u=t.FieldExprPattern.toFieldExprEntityItemPattern(i),s=e.schema(u.schema).findHierarchy(u.entity,o.name);if(s){var c=s.levels.withName(o.level);if(c)return c.column}}}}},r.prototype.getTargetEntityForVariation=function(e,t){var r=this.getConceptualProperty(e);if(r&&r.column&&!_.isEmpty(r.column.variations))for(var i=r.column.variations,n=0,a=i;n<a.length;n++){var o=a[n];if(o.name===t)return o.navigationProperty.targetEntity.name}},r.prototype.getTargetEntity=function(){return X.getEntityExpr(this)},r.prototype.getTargetColumnRef=function(e){return $.getColumnRefSQExpr(e,this)},r.prototype.getMetadataForVariation=function(e,r){var i=e.columnHierarchyLevelVariation,n=t.FieldExprPattern.toFieldExprEntityItemPattern(e),a=r.schema(n.schema).findProperty(n.entity,i.source.name);if(a&&a.column&&a.column.variations)for(var o=0,u=a.column.variations;o<u.length;o++){var s=u[o];if(s.defaultHierarchy&&s.defaultHierarchy.levels)for(var c=0,l=s.defaultHierarchy.levels;c<l.length;c++){
var p=l[c];if(p.name===i.level.level){var f=p.column;return{kind:1===f.kind?1:0,type:f.type,format:f.format,idOnEntityKey:!!f.column&&f.column.idOnEntityKey,defaultAggregate:f.column?f.column.defaultAggregate:null}}}}},r.prototype.getMetadataForHierarchyLevel=function(e,t){var r=this.getConceptualProperty(t,!0);if(r)return this.getPropertyMetadata(e,r)},r.prototype.getPropertyMetadata=function(t,r){var i=r.format,n=r.type,a=t.columnAggr||t.groupingColumnAggr||t.hierarchyLevelAggr;if(a)switch(a.aggregate){case 2:case 5:n=e.ValueType.fromExtendedType(260),i=void 0;break;case 1:case 7:case 8:n.integer&&(n=e.ValueType.fromExtendedType(259),i=e.NumberFormat.getFormatForWholeNumberAverage(i))}return{kind:1===r.kind||a&&void 0!==a.aggregate?1:0,type:n,format:i,idOnEntityKey:!!r.column&&r.column.idOnEntityKey,aggregate:a?a.aggregate:void 0,defaultAggregate:r.column?r.column.defaultAggregate:null}},r.prototype.getMetadataForProperty=function(e,t){var r=this.getConceptualProperty(t);if(r)return this.getPropertyMetadata(e,r)},r.getMetadataForEntity=function(r,i){var n=t.FieldExprPattern.toFieldExprEntityItemPattern(r),a=i.schema(n.schema).entities.withName(n.entity);if(a&&r.entityAggr)switch(r.entityAggr.aggregate){case 2:case 5:return{kind:1,type:e.ValueType.fromExtendedType(260),format:void 0,idOnEntityKey:!1,aggregate:r.entityAggr.aggregate}}},r})();t.SQExpr=i;var n=(function(e){function t(t,r,i){var n;return n=e.call(this,0)||this,n.schema=t,n.entity=r,i&&(n.variable=i),n}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitEntity(this,t)},t.prototype.as=function(e){return new t(this.schema,this.entity,e)},t})(i);t.SQEntityExpr=n;var a=(function(e){function t(t){var r;return r=e.call(this,1)||this,r.variable=t,r}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitSubqueryRef(this,t)},t.prototype.as=function(e){return new t(e)},t})(i);t.SQSubqueryRefExpr=a;var o=(function(e){function t(t,r){var i;return i=e.call(this,37)||this,i.queryName=t,r&&(i.variable=r),i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitNamedQueryRef(this,t)},t.prototype.as=function(e){return new t(this.queryName,e)},t})(i);t.SQNamedQueryRefExpr=o;var u=(function(t){function r(e,r,i){var n;return n=t.call(this,23)||this,n.left=e,n.right=r,n.operator=i,n}return __extends(r,t),r.prototype.accept=function(e,t){return e.visitArithmetic(this,t)},r.prototype.getMetadata=function(t){var r=this.left.getMetadata(t);return r&&3===this.operator&&(r.format="#,##0.00%",r.type=e.ValueType.fromExtendedType(259)),r},r})(i);t.SQArithmeticExpr=u;var s=(function(e){function t(t,r,i){var n;return n=e.call(this,34)||this,n.arg=t,n.size=r,null!=i&&(n.timeUnit=i),n}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitFloor(this,t)},t})(i);t.SQFloorExpr=s;var c=(function(e){function t(t,r){var i;return i=e.call(this,26)||this,i.expression=t,i.scope=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitScopedEval(this,t)},t.prototype.getMetadata=function(e){return this.expression.getMetadata(e)},t})(i);t.SQScopedEvalExpr=c;var l=(function(e){function t(t){var r;return r=e.call(this,27)||this,r.expressionName=t,r}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitWithRef(this,t)},t})(i);t.SQWithRefExpr=l;var p=(function(e){function t(t,r,i){var n;return n=e.call(this,t)||this,n.source=r,n.ref=i,n}return __extends(t,e),t})(i);t.SQPropRefExpr=p;var f=(function(e){function t(t,r,i){return e.call(this,i||2,t,r)||this}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitColumnRef(this,t)},t})(p);t.SQColumnRefExpr=f;var v=(function(e){function t(t,r){return e.call(this,3,t,r)||this}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitMeasureRef(this,t)},t})(p);t.SQMeasureRefExpr=v;var h=(function(e){function t(t,r){var i;return i=e.call(this,4)||this,i.arg=t,i.func=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitAggr(this,t)},t})(i);t.SQAggregationExpr=h;var m=(function(e){function t(t,r,i){var n;return n=e.call(this,28)||this,n.arg=t,n.k=r,n.exclusive=i,n}return __extends(t,e),t.prototype.getMetadata=function(e){var t=this.arg.getMetadata(e);if(t)return{kind:1,type:t.type}},t.prototype.accept=function(e,t){return e.visitPercentile(this,t)},t})(i);t.SQPercentileExpr=m;var y=(function(e){function t(t,r,i){var n;return n=e.call(this,5)||this,n.arg=t,n.name=r,n.property=i,n}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitPropertyVariationSource(this,t)},t})(i);t.SQPropertyVariationSourceExpr=y;var d=(function(e){function t(t,r,i){var n;return n=e.call(this,r,t,33)||this,n.groupedExprs=i,n}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitGroupRef(this,t)},t})(f);t.SQGroupRefExpr=d;var g=(function(e){function t(t,r){var i;return i=e.call(this,6)||this,i.arg=t,i.hierarchy=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitHierarchy(this,t)},t})(i);t.SQHierarchyExpr=g;var x=(function(e){function t(t,r){var i;return i=e.call(this,7)||this,i.arg=t,i.level=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitHierarchyLevel(this,t)},t})(i);t.SQHierarchyLevelExpr=x;var S=(function(e){function t(t){var r;return r=e.call(this,29)||this,r.expressionName=t,r}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitSelectRef(this,t)},t})(i);t.SQSelectRefExpr=S;var b=(function(e){function t(t,r){var i;return i=e.call(this,8)||this,i.left=t,i.right=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitAnd(this,t)},t})(i);t.SQAndExpr=b;var w=(function(e){function t(t,r,i){var n;return n=e.call(this,9)||this,n.arg=t,n.lower=r,n.upper=i,n}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitBetween(this,t)},t})(i);t.SQBetweenExpr=w;var E=(function(e){function t(t,r,i){var n;return n=e.call(this,10)||this,n.args=t,r&&(n.values=r),i&&(n.table=i),n}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitIn(this,t)},t})(i);t.SQInExpr=E;var D=(function(e){function t(t,r){var i;return i=e.call(this,11)||this,i.left=t,i.right=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitOr(this,t)},t})(i);t.SQOrExpr=D;var C=(function(e){function t(t,r,i){var n;return n=e.call(this,13)||this,n.comparison=t,n.left=r,n.right=i,n}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitCompare(this,t)},t})(i);t.SQCompareExpr=C;var R=(function(e){function t(t,r){var i;return i=e.call(this,12)||this,i.left=t,i.right=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitContains(this,t)},t})(i);t.SQContainsExpr=R;var T=(function(e){function t(t,r){var i;return i=e.call(this,14)||this,i.left=t,i.right=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitStartsWith(this,t)},t})(i);t.SQStartsWithExpr=T;var V=(function(e){function t(t){var r;return r=e.call(this,15)||this,r.arg=t,r}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitExists(this,t)},t})(i);t.SQExistsExpr=V;var F=(function(e){function t(t){var r;return r=e.call(this,16)||this,r.arg=t,r}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitNot(this,t)},t})(i);t.SQNotExpr=F;var P=(function(e){function t(t,r,i){var n;return n=e.call(this,17)||this,n.type=t,n.value=r,n.valueEncoded=i,n}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitConstant(this,t)},t.prototype.getMetadata=function(){return{kind:1,type:this.type}},t})(i);t.SQConstantExpr=P;var M=(function(e){function t(t,r){var i;return i=e.call(this,18)||this,i.unit=t,i.arg=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitDateSpan(this,t)},t})(i);t.SQDateSpanExpr=M;var A=(function(e){function t(t,r,i){var n;return n=e.call(this,19)||this,n.unit=t,n.arg=i,n.amount=r,n}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitDateAdd(this,t)},t.prototype.getMetadata=function(e){return this.arg.getMetadata(e)},t})(i);t.SQDateAddExpr=A;var N=(function(t){function r(){return t.call(this,20)||this}return __extends(r,t),r.prototype.accept=function(e,t){return e.visitNow(this,t)},r.prototype.getMetadata=function(){return{kind:1,type:e.ValueType.fromExtendedType(519)}},r})(i);t.SQNowExpr=N;var Q=(function(e){function t(){return e.call(this,22)||this}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitDefaultValue(this,t)},t})(i);t.SQDefaultValueExpr=Q;var O=(function(e){function t(t){var r;return r=e.call(this,21)||this,r.defaultValueOverridesAncestors=t,r}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitAnyValue(this,t)},t})(i);t.SQAnyValueExpr=O;var q=(function(e){function t(t,r){var i;return i=e.call(this,24)||this,i.input=t,i.rule=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitFillRule(this,t)},t})(i);t.SQFillRuleExpr=q;var I=(function(e){function t(t,r){var i;return i=e.call(this,32)||this,i.color=t,i.percent=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitThemeColor(this,t)},t})(i);t.SQThemeColorExpr=I;var U=(function(e){function t(t,r,i){var n;return n=e.call(this,25)||this,n.packageName=t,n.packageType=r,n.itemName=i,n}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitResourcePackageItem(this,t)},t})(i);t.SQResourcePackageItemExpr=U;var j=(function(e){function t(t){var r;return r=e.call(this,30)||this,r.source=t,r}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitTransformTableRef(this,t)},t})(i);t.SQTransformTableRefExpr=j;var B=(function(e){function t(t,r){var i;return i=e.call(this,31)||this,i.role=t,r&&(i.transform=r),i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitTransformOutputRoleRef(this,t)},t.prototype.getMetadata=function(e){},t})(i);t.SQTransformOutputRoleRefExpr=B;var k=(function(e){function t(t){var r;return r=e.call(this,35)||this,r.role=t,r}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitRoleRef(this,t)},t})(i);t.SQRoleRefExpr=k;var L=(function(e){function t(t,r){var i;return i=e.call(this,36)||this,i.source=t,i.count=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitDiscretize(this,t)},t})(i);t.SQDiscretizeExpr=L;var H=(function(e){function t(t,r){var i;return i=e.call(this,38)||this,i.source=t,i.member=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitMember(this,t)},t})(i);t.SQMemberExpr=H;var G;!(function(r){function p(e,t,r){return new n(e,t,r)}function G(e){return new a(e)}function W(e,t){return new o(e,t)}function z(e,t){return new f(e,t)}function K(e,t){return new v(e,t)}function Y(e,t){return new h(e,t)}function J(e){return new S(e)}function Z(e,t,r){return new m(e,t,r)}function $(e,t,r){return new u(e,t,r)}function X(e,t,r){return new s(e,t,r)}function ee(e,t){return new c(e,t)}function ie(e){return new l(e)}function ce(e,t,r){return new d(e,t,r)}function le(e,t){return new g(e,t)}function pe(e,t,r){return new y(e,t,r)}function fe(e,t){return new x(e,t)}function ve(e){return new j(e)}function he(e,t){return new B(e,t)}function me(e){return new k(e)}function ye(e,t){return e?t?new b(e,t):e:t}function de(e,t,r){return new w(e,t,r)}function ge(e,t){return new E(e,t,null)}function xe(e,t){return new E(e,null,t)}function Se(e,t){if(!e)return t;if(!t)return e;if(i.isIn(e)&&i.isIn(t)){var r=be(e,t);if(r)return r}return new D(e,t)}function be(e,t){if(e.args&&t.args&&e.values&&t.values){var n=e.args.length,a=t.args.length;if(n===a){for(var o=0;o<n;++o)if(!i.equals(e.args[o],t.args[o]))return;var u=e.values.concat(t.values);return r.inValues(e.args,u)}}}function we(e,t,r){return new C(e,t,r)}function Ee(e,t){return new R(e,t)}function De(e){return new V(e)}function Ce(e,t){return we(0,e,t)}function _e(e){return new F(e)}function Re(e,t){return new T(e,t)}function Te(){return new P(e.ValueType.fromExtendedType(0),null,t.PrimitiveValueEncoding.nullEncoding())}function Ve(){return new N}function Fe(){return new Q}function Pe(e){return new O(e)}function Me(r){return new P(e.ValueType.fromExtendedType(5),r,t.PrimitiveValueEncoding.boolean(r))}function Ae(e,t,r){return new A(e,t,r)}function Ne(r,i){return void 0===i&&(i=t.PrimitiveValueEncoding.dateTime(r)),new P(e.ValueType.fromExtendedType(519),r,i)}function Qe(e,t){return new M(e,t)}function Oe(r,i){return void 0===i&&(i=t.PrimitiveValueEncoding.decimal(r)),new P(e.ValueType.fromExtendedType(258),r,i)}function qe(r,i){return void 0===i&&(i=t.PrimitiveValueEncoding.double(r)),new P(e.ValueType.fromExtendedType(259),r,i)}function Ie(r,i){return void 0===i&&(i=t.PrimitiveValueEncoding.integer(r)),new P(e.ValueType.fromExtendedType(260),r,i)}function Ue(r,i){return new P(e.ValueType.fromExtendedType(1),r,i||t.PrimitiveValueEncoding.text(r))}function je(t,r){return null==t?Te():_.isBoolean(t)?Me(t):_.isString(t)?Ue(t):_.isNumber(t)?r.integer&&e.Double.isInteger(t)?Ie(t):qe(t):t instanceof Date?Ne(t):void 0}function Be(e,t){return te.rewrite(e,t)}function ke(e){return re.rewrite(e)}function Le(e){return oe.rewrite(e)}function He(e){return ae.rewrite(e)}function Ge(e,t){return se.rewrite(e,t)}function We(e){return ue.rewrite(e)}function ze(e){return ne.rewrite(e)}function Ke(e,t){return new q(e,t)}function Ye(e,t){return new I(e,t)}function Je(e,t,r){return new U(e,t,r)}function Ze(e,t){return new L(e,t)}function $e(e,t){return new H(e,t)}r.entity=p,r.subqueryRef=G,r.namedQueryRef=W,r.columnRef=z,r.measureRef=K,r.aggregate=Y,r.selectRef=J,r.percentile=Z,r.arithmetic=$,r.floor=X,r.scopedEval=ee,r.withRef=ie,r.groupRef=ce,r.hierarchy=le,r.propertyVariationSource=pe,r.hierarchyLevel=fe,r.transformTableRef=ve,r.transformOutputRoleRef=he,r.roleRef=me,r.and=ye,r.between=de,r.inValues=ge,r.inTable=xe,r.or=Se,r.compare=we,r.contains=Ee,r.exists=De,r.equal=Ce,r.not=_e,r.startsWith=Re,r.nullConstant=Te,r.now=Ve,r.defaultValue=Fe,r.anyValue=Pe,r.boolean=Me,r.dateAdd=Ae,r.dateTime=Ne,r.dateSpan=Qe,r.decimal=Oe,r.double=qe,r.integer=Ie,r.text=Ue,r.typedConstant=je,r.setAggregate=Be,r.removeAggregate=ke,r.setPercentOfGrandTotal=Le,r.removePercentOfGrandTotal=He,r.setPercentOfRoleTotal=Ge,r.removePercentOfRoleTotal=We,r.removeEntityVariables=ze,r.fillRule=Ke,r.themeColor=Ye,r.resourcePackageItem=Je,r.discretize=Ze,r.member=$e})(G=t.SQExprBuilder||(t.SQExprBuilder={}));var W;!(function(e){function t(e){return Z.getAggregate(e)}e.getAggregate=t})(W=t.SQExprInfo||(t.SQExprInfo={}));var z=(function(){function e(e,t){this.ignoreCase=e,this.ignoreVariables=t}return e.run=function(t,r,i,n){return t=t||null,r=r||null,t===r||!t==!r&&(n?i?t.accept(e.ignoreVariablesAndCaseInstance,r):t.accept(e.ignoreVariablesInstance,r):i?t.accept(e.ignoreCaseInstance,r):t.accept(e.instance,r))},e.prototype.visitColumnRef=function(e,t){if(i.isColumn(t)||i.isGroupRef(t))return e.ref===t.ref&&this.equals(e.source,t.source)},e.prototype.visitMeasureRef=function(e,t){return i.isMeasure(t)&&e.ref===t.ref&&this.equals(e.source,t.source)},e.prototype.visitAggr=function(e,t){return i.isAggregation(t)&&e.func===t.func&&this.equals(e.arg,t.arg)},e.prototype.visitPercentile=function(e,t){return i.isPercentile(t)&&e.exclusive===t.exclusive&&e.k===t.k&&this.equals(e.arg,t.arg)},e.prototype.visitGroupRef=function(e,t){var r=!1;return(i.isGroupRef(t)||i.isColumn(t))&&(r=e.ref===t.ref&&this.equals(e.source,t.source)),i.isGroupRef(t)&&(r=r&&this.equalsAll(e.groupedExprs,t.groupedExprs)),r},e.prototype.visitHierarchy=function(e,t){return i.isHierarchy(t)&&e.hierarchy===t.hierarchy&&this.equals(e.arg,t.arg)},e.prototype.visitHierarchyLevel=function(e,t){return i.isHierarchyLevel(t)&&e.level===t.level&&this.equals(e.arg,t.arg)},e.prototype.visitPropertyVariationSource=function(e,t){return i.isPropertyVariationSource(t)&&e.name===t.name&&e.property===t.property&&this.equals(e.arg,t.arg)},e.prototype.visitSelectRef=function(e,t){return i.isSelectRef(t)&&e.expressionName===t.expressionName},e.prototype.visitBetween=function(e,t){return i.isBetween(t)&&this.equals(e.arg,t.arg)&&this.equals(e.lower,t.lower)&&this.equals(e.upper,t.upper)},e.prototype.visitIn=function(e,t){if(!i.isIn(t)||!this.equalsAll(e.args,t.args))return!1;var r=t,n=e.values;if(n){var a=r.values;if(!a)return!1;if(n.length!==a.length)return!1;for(var o=0,u=n.length;o<u;o++)if(!this.equalsAll(n[o],a[o]))return!1}else{if(!r.table)return!1;if(!this.equals(e.table,r.table))return!1}return!0},e.prototype.visitEntity=function(e,t){return i.isEntity(t)&&e.schema===t.schema&&e.entity===t.entity&&(this.ignoreVariables||this.optionalEqual(e.variable,t.variable))},e.prototype.visitSubqueryRef=function(e,t){return i.isSubqueryRef(t)&&e.variable===t.variable},e.prototype.visitNamedQueryRef=function(e,t){return i.isNamedQueryRef(t)&&e.queryName===t.queryName&&(this.ignoreVariables||this.optionalEqual(e.variable,t.variable))},e.prototype.visitAnd=function(e,t){return i.isAnd(t)&&this.equals(e.left,t.left)&&this.equals(e.right,t.right)},e.prototype.visitOr=function(e,t){return i.isOr(t)&&this.equals(e.left,t.left)&&this.equals(e.right,t.right)},e.prototype.visitCompare=function(e,t){return i.isCompare(t)&&e.comparison===t.comparison&&this.equals(e.left,t.left)&&this.equals(e.right,t.right)},e.prototype.visitContains=function(e,t){return i.isContains(t)&&this.equals(e.left,t.left)&&this.equals(e.right,t.right)},e.prototype.visitDateSpan=function(e,t){return i.isDateSpan(t)&&e.unit===t.unit&&this.equals(e.arg,t.arg)},e.prototype.visitDateAdd=function(e,t){return i.isDateAdd(t)&&e.unit===t.unit&&e.amount===t.amount&&this.equals(e.arg,t.arg)},e.prototype.visitExists=function(e,t){return i.isExists(t)&&this.equals(e.arg,t.arg)},e.prototype.visitNot=function(e,t){return i.isNot(t)&&this.equals(e.arg,t.arg)},e.prototype.visitNow=function(e,t){return i.isNow(t)},e.prototype.visitDefaultValue=function(e,t){return i.isDefaultValue(t)},e.prototype.visitAnyValue=function(e,t){return i.isAnyValue(t)},e.prototype.visitResourcePackageItem=function(e,t){return i.isResourcePackageItem(t)&&e.packageName===t.packageName&&e.packageType===t.packageType&&e.itemName===t.itemName},e.prototype.visitStartsWith=function(e,t){return i.isStartsWith(t)&&this.equals(e.left,t.left)&&this.equals(e.right,t.right)},e.prototype.visitConstant=function(e,t){return!(!i.isConstant(t)||e.type!==t.type)&&(e.type.text&&this.ignoreCase?r.equalIgnoreCase(e.valueEncoded,t.valueEncoded):e.valueEncoded===t.valueEncoded)},e.prototype.visitFillRule=function(e,t){if(i.isFillRule(t)&&this.equals(e.input,t.input)){var r=e.rule,n=t.rule;if(r===n)return!0;var a=r.linearGradient2,o=n.linearGradient2;if(a&&o)return this.visitLinearGradient2(a,o);var u=r.linearGradient3,s=n.linearGradient3;if(u&&s)return this.visitLinearGradient3(u,s)}return!1},e.prototype.visitLinearGradient2=function(e,t){var r=this;return this.equalsFillRuleStop(e.min,t.min)&&this.equalsFillRuleStop(e.max,t.max)&&this.equalsNullableObject(e.nullColoringStrategy,t.nullColoringStrategy,(function(e,t){return r.equalsNullStrategy(e,t)}))},e.prototype.visitLinearGradient3=function(e,t){var r=this;return this.equalsFillRuleStop(e.min,t.min)&&this.equalsFillRuleStop(e.mid,t.mid)&&this.equalsFillRuleStop(e.max,t.max)&&this.equalsNullableObject(e.nullColoringStrategy,t.nullColoringStrategy,(function(e,t){return r.equalsNullStrategy(e,t)}))},e.prototype.visitThemeColor=function(e,t){return i.isThemeColor(t)&&e.color===t.color&&e.percent===t.percent},e.prototype.equalsFillRuleStop=function(e,t){return this.equals(e.color,t.color)&&this.equalsNullable(e.value,t.value)},e.prototype.equalsNullStrategy=function(e,t){return this.equals(e.strategy,t.strategy)&&this.equalsNullable(e.color,t.color)},e.prototype.visitArithmetic=function(e,t){return i.isArithmetic(t)&&e.operator===t.operator&&this.equals(e.left,t.left)&&this.equals(e.right,t.right)},e.prototype.visitFloor=function(e,t){return i.isFloor(t)&&e.timeUnit===t.timeUnit&&e.size===t.size&&this.equals(e.arg,t.arg)},e.prototype.visitScopedEval=function(e,t){return i.isScopedEval(t)&&this.equals(e.expression,t.expression)&&this.equalsAll(e.scope,t.scope)},e.prototype.visitWithRef=function(e,t){return i.isWithRef(t)&&e.expressionName===t.expressionName},e.prototype.visitTransformTableRef=function(e,t){return i.isTransformTableRef(t)&&e.source===t.source},e.prototype.visitTransformOutputRoleRef=function(e,t){return i.isTransformOutputRoleRef(t)&&e.role===t.role&&e.transform===t.transform},e.prototype.visitRoleRef=function(e,t){return i.isRoleRef(t)&&e.role===t.role},e.prototype.visitDiscretize=function(e,t){return i.isDiscretize(t)&&e.count===t.count&&this.equals(e.source,t.source)},e.prototype.visitMember=function(e,t){return i.isMember(t)&&e.member===t.member&&this.equals(e.source,t.source)},e.prototype.optionalEqual=function(e,t){return!e||!t||e===t},e.prototype.equals=function(e,t){return e.accept(this,t)},e.prototype.equalsNullable=function(e,t){var r=this;return this.equalsNullableObject(e,t,(function(e,t){return r.equals(e,t)}))},e.prototype.equalsNullableObject=function(e,t,r){return null==e&&null==t||null!=e&&null!=t&&r(e,t)},e.prototype.equalsAll=function(e,t){var r=e.length;if(r!==t.length)return!1;for(var i=0;i<r;i++)if(!this.equals(e[i],t[i]))return!1;return!0},e})();z.instance=new z((!1),(!1)),z.ignoreCaseInstance=new z((!0),(!1)),z.ignoreVariablesInstance=new z((!1),(!0)),z.ignoreVariablesAndCaseInstance=new z((!0),(!0));var K=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.visitDefault=function(e){return e},t})(t.DefaultSQExprVisitor),Y=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.visitDefault=function(e,t){return e},t})(t.DefaultSQExprVisitorWithArg),J=(function(e){function r(t,r,i){var n;return n=e.call(this)||this,n.schema=t,n.aggrUtils=r,i&&(n.errors=i),n}return __extends(r,e),r.prototype.visitIn=function(t){var r=e.prototype.visitIn.call(this,t),i=r.args,n=r.values;if(n)for(var a=0,o=n;a<o.length;a++)for(var u=o[a],s=0,c=u.length;s<c;++s)this.validateCompatibleType(i[s],u[s]);else{var l=r.table;this.validateIsTableRef(l)}return r},r.prototype.visitCompare=function(t){var r=e.prototype.visitCompare.call(this,t);return this.validateCompatibleType(r.left,r.right),r},r.prototype.visitColumnRef=function(e){var r=t.SQExprConverter.asFieldPattern(e);if(r){var i=t.FieldExprPattern.toFieldExprEntityItemPattern(r),n=this.validateEntity(i.schema,i.entity);if(n){var a=n.properties.withName(r.column.name);a&&0===a.kind&&this.isQueryable(r)||this.register(3)}}return e},r.prototype.visitMeasureRef=function(e){var r=t.SQExprConverter.asFieldPattern(e);if(r){var i=t.FieldExprPattern.toFieldExprEntityItemPattern(r),n=this.validateEntity(i.schema,i.entity);if(n){var a=n.properties.withName(r.measure.name);a&&1===a.kind&&this.isQueryable(r)||this.register(5)}}return e},r.prototype.visitAggr=function(t){var r=e.prototype.visitAggr.call(this,t),i=$.getColumnRefSQExpr(this.schema,r.arg);return i&&(this.aggrUtils.isSupportedAggregate(t,this.schema,t.func,null)||this.register(0)),r},r.prototype.visitGroupRef=function(e){var r=t.SQExprConverter.asFieldPattern(e);if(r){var i=t.FieldExprPattern.toFieldExprEntityItemPattern(r),n=this.validateEntity(i.schema,i.entity);if(n){var a=n.properties.withName(r.groupingColumn.name);a&&0===a.kind&&this.validateExprSequence(e.groupedExprs)&&a.column.groupingMetadata&&this.isQueryable(r)||this.register(4)}}return e},r.prototype.visitHierarchy=function(e){var r=t.SQExprConverter.asFieldPattern(e);if(r){var i=r.hierarchy;i?this.validateHierarchy(i.schema,i.entity,i.name):this.register(6)}return e},r.prototype.visitHierarchyLevel=function(e){var r=t.SQExprConverter.asFieldPattern(e);if(r){var i=r.hierarchyLevel;i?this.validateHierarchyLevel(i.schema,i.entity,i.name,i.level):r.columnHierarchyLevelVariation||this.register(7)}return e},r.prototype.visitPercentile=function(e){if(e.arg.accept(this),_.isEmpty(this.errors)){var t=e.arg.getMetadata(this.schema);t&&0===t.kind&&t.type&&(t.type.integer||t.type.numeric)||this.register(11)}return e},r.prototype.visitDiscretize=function(e){return e.source.accept(this),e.count<=0&&this.register(14),e},r.prototype.visitEntity=function(e){return this.validateEntity(e.schema,e.entity),e},r.prototype.visitSubqueryRef=function(e){return e},r.prototype.visitNamedQueryRef=function(e){return e},r.prototype.visitContains=function(e){return this.validateStartOrContainsArgs(e.left,e.right),e},r.prototype.visitStartsWith=function(e){return this.validateStartOrContainsArgs(e.left,e.right),e},r.prototype.visitArithmetic=function(e){return this.validateArithmeticTypes(e.operator,e.left,e.right),e},r.prototype.visitScopedEval=function(e){for(var t=0,r=e.scope;t<r.length;t++){var n=r[t];i.isWithRef(n)||i.isColumn(n)||this.register(12)}return e},r.prototype.visitWithRef=function(e){return e},r.prototype.visitTransformTableRef=function(e){return e},r.prototype.visitTransformOutputRoleRef=function(e){return e},r.prototype.visitRoleRef=function(e){return e},r.prototype.validateExprSequence=function(e){var t=this;return _.reduce(e,(function(e,r){return e=e&&_.isEmpty(r.validate(t.schema,t.aggrUtils,t.errors))}),!0)},r.prototype.validateStartOrContainsArgs=function(e,t){e.accept(this),t.accept(this),_.isEmpty(this.errors)&&(i.isConstant(t)&&t.type.text?this.validateCompatibleType(e,t,!0):this.register(9))},r.prototype.validateArithmeticTypes=function(e,r,i){t.SQExprUtils.supportsArithmetic(e,r,this.schema)||this.register(8),t.SQExprUtils.supportsArithmetic(e,i,this.schema)||this.register(9)},r.prototype.validateCompatibleType=function(e,t,r){var i,n=e.getMetadata(this.schema),a=n&&n.type,o=t.getMetadata(this.schema),u=o&&o.type;i=r?!a||!u||!a.isCompatibleFrom(u):a&&u&&!a.isCompatibleFrom(u),i&&this.register(10)},r.prototype.validateEntity=function(e,t){var r=this.schema.schema(e);if(r){var i=r.entities.withName(t);if(i)return i;this.register(2)}else this.register(1)},r.prototype.validateIsTableRef=function(e){1!==e.kind&&0!==e.kind&&this.register(13)},r.prototype.validateHierarchy=function(e,t,r){var i=this.validateEntity(e,t);if(i){var n=i.hierarchies.withName(r);if(n)return n;this.register(6)}},r.prototype.validateHierarchyLevel=function(e,t,r,i){var n=this.validateHierarchy(e,t,r);if(n){var a=n.levels.withName(i);if(a)return a;this.register(7)}},r.prototype.register=function(e){this.errors||(this.errors=[]),this.errors.push(e)},r.prototype.isQueryable=function(e){var r=t.FieldExprPattern.toFieldExprEntityItemPattern(e);if(e.hierarchyLevel||e.hierarchyLevelAggr){var i=t.SQHierarchyExprUtils.getConceptualHierarchyLevelFromExpr(this.schema,e);return i&&1!==i.column.queryable}return 1!==this.schema.schema(r.schema).findProperty(r.entity,t.FieldExprPattern.getPropertyName(e)).queryable},r})(t.SQExprRewriter);t.SQExprValidationVisitor=J;var Z=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.visitAggr=function(e){return e.func},t.prototype.visitDefault=function(e){},t.getAggregate=function(e){var r=new t;return e.accept(r)},t})(t.DefaultSQExprVisitor),$=(function(e){function r(t){var r=e.call(this)||this;return r.schema=t,r}return __extends(r,e),r.prototype.visitColumnRef=function(e){return e},r.prototype.visitGroupRef=function(e){return e},r.prototype.visitHierarchyLevel=function(e){var r=e.level,n=e.arg,a=n.accept(this);if(n&&i.isPropertyVariationSource(n.arg)){var o=n.arg,u=a.getTargetEntityForVariation(this.schema,o.name);if(a&&u){var s=a.source.schema,c=G.entity(s,u),l=this.schema.schema(s).findHierarchy(u,n.hierarchy);if(l)for(var p=0,v=l.levels;p<v.length;p++){var h=v[p];if(h.name===r)return new f(c,h.column.name)}}}else{var m=n.arg,y=t.SQHierarchyExprUtils.getConceptualHierarchyLevel(this.schema,m.schema,m.entity,n.hierarchy,e.level);if(y)return new f(n.arg,y.column.name)}},r.prototype.visitHierarchy=function(e){return e.arg.accept(this)},r.prototype.visitPropertyVariationSource=function(e){var t=e.property;return new f(e.arg,t)},r.prototype.visitAggr=function(e){return e.arg.accept(this)},r.prototype.visitDefault=function(e){},r.getColumnRefSQExpr=function(e,t){var i=new r(e);return t.accept(i)},r})(t.DefaultSQExprVisitor),X=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.visitEntity=function(e){var t=this.result;void 0===t||i.equals(t,e)?this.result=e:this.result=null},t.getEntityExpr=function(e){var r=new t;return e.accept(r),r.result||void 0},t})(t.DefaultSQExprVisitorWithTraversal),ee=(function(e){function t(t){var r;return r=e.call(this)||this,r.func=t,r}return __extends(t,e),t.prototype.visitAggr=function(e){return e.func===this.func?e:new h(e.arg,this.func)},t.prototype.visitColumnRef=function(e){return new h(e,this.func)},t.prototype.visitGroupRef=function(e){return new h(e,this.func)},t.prototype.visitHierarchyLevel=function(e){return new h(e,this.func)},t.rewrite=function(e,r){var i=new t(r);return e.accept(i)},t})(K),te=(function(){function e(e,t){this.sqExpr=e,this.aggregate=t}return e.rewrite=function(r,i){return t.FieldExprPattern.visit(r,new e(r,i))},e.prototype.visitPercentOfGrandTotal=function(e){return e.baseExpr=t.SQExprConverter.asFieldPattern(ee.rewrite(G.fieldExpr(e.baseExpr),this.aggregate)),G.fieldExpr({percentOfGrandTotal:e})},e.prototype.visitPercentOfRoleTotal=function(e){return e.baseExpr=t.SQExprConverter.asFieldPattern(ee.rewrite(G.fieldExpr(e.baseExpr),this.aggregate)),G.fieldExpr({percentOfRoleTotal:e})},e.prototype.visitColumn=function(e){return this.defaultRewrite()},e.prototype.visitColumnAggr=function(e){return this.defaultRewrite()},e.prototype.visitGroupingColumn=function(e){return this.defaultRewrite()},e.prototype.visitGroupingColumnAggr=function(e){return this.defaultRewrite()},e.prototype.visitColumnHierarchyLevelVariation=function(e){return this.defaultRewrite()},e.prototype.visitSelectRef=function(e){return this.defaultRewrite()},e.prototype.visitEntity=function(e){return this.defaultRewrite()},e.prototype.visitEntityAggr=function(e){return this.defaultRewrite()},e.prototype.visitHierarchy=function(e){return this.defaultRewrite()},e.prototype.visitHierarchyLevel=function(e){return this.defaultRewrite()},e.prototype.visitHierarchyLevelAggr=function(e){return this.defaultRewrite()},e.prototype.visitMeasure=function(e){return this.defaultRewrite()},e.prototype.visitPercentile=function(e){return this.defaultRewrite()},e.prototype.visitTransformOutputRoleRef=function(e){return this.defaultRewrite()},e.prototype.defaultRewrite=function(){return ee.rewrite(this.sqExpr,this.aggregate)},e})(),re=(function(){function e(e){this.sqExpr=e}return e.rewrite=function(r){return t.FieldExprPattern.visit(r,new e(r))},e.prototype.visitPercentOfGrandTotal=function(t){return e.rewrite(G.fieldExpr(t.baseExpr))},e.prototype.visitPercentOfRoleTotal=function(t){return e.rewrite(G.fieldExpr(t.baseExpr))},e.prototype.visitColumn=function(e){return this.defaultRewrite()},e.prototype.visitColumnAggr=function(e){return this.defaultRewrite()},e.prototype.visitGroupingColumn=function(e){return this.defaultRewrite()},e.prototype.visitGroupingColumnAggr=function(e){return this.defaultRewrite()},e.prototype.visitColumnHierarchyLevelVariation=function(e){return this.defaultRewrite()},e.prototype.visitSelectRef=function(e){return this.defaultRewrite()},e.prototype.visitEntity=function(e){return this.defaultRewrite()},e.prototype.visitEntityAggr=function(e){return this.defaultRewrite()},e.prototype.visitHierarchy=function(e){return this.defaultRewrite()},e.prototype.visitHierarchyLevel=function(e){return this.defaultRewrite()},e.prototype.visitHierarchyLevelAggr=function(e){return this.defaultRewrite()},e.prototype.visitMeasure=function(e){return this.defaultRewrite()},e.prototype.visitPercentile=function(e){return this.defaultRewrite()},e.prototype.visitTransformOutputRoleRef=function(e){return this.defaultRewrite()},e.prototype.defaultRewrite=function(){return ie.rewrite(this.sqExpr)},e})(),ie=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.visitAggr=function(e){
return e.arg},t.rewrite=function(e){return e.accept(t.instance)},t})(K);ie.instance=new ie;var ne=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.visitEntity=function(e){return e.variable?G.entity(e.schema,e.entity):e},t.rewrite=function(e){return e.accept(t.instance)},t})(t.SQExprRewriter);ne.instance=new ne;var ae=(function(e){function r(){return e.apply(this,arguments)||this}return __extends(r,e),r.rewrite=function(e){return e.accept(r.instance)},r.prototype.visitDefault=function(e){var r=t.SQExprConverter.asFieldPattern(e);return r&&r.percentOfGrandTotal&&(e=G.fieldExpr(r.percentOfGrandTotal.baseExpr)),e},r})(K);ae.instance=new ae;var oe=(function(e){function r(){return e.apply(this,arguments)||this}return __extends(r,e),r.rewrite=function(e){return e.accept(r.instance)},r.prototype.visitDefault=function(e){var r=t.SQExprConverter.asFieldPattern(e);return r&&!r.percentOfGrandTotal&&(e=G.fieldExpr({percentOfGrandTotal:{baseExpr:r}})),e},r})(K);oe.instance=new oe;var ue=(function(e){function r(){return e.apply(this,arguments)||this}return __extends(r,e),r.rewrite=function(e){return e.accept(r.instance)},r.prototype.visitDefault=function(e){var r=t.SQExprConverter.asFieldPattern(e);return r&&r.percentOfRoleTotal&&(e=G.fieldExpr(r.percentOfRoleTotal.baseExpr)),e},r})(K);ue.instance=new ue;var se=(function(e){function r(){return e.apply(this,arguments)||this}return __extends(r,e),r.rewrite=function(e,t){return e.accept(r.instance,t)},r.prototype.visitDefault=function(e,r){var i=t.SQExprConverter.asFieldPattern(e);return i&&!i.percentOfRoleTotal&&(e=G.fieldExpr({percentOfRoleTotal:{baseExpr:i,roles:r}})),e},r})(Y);se.instance=new se;var ce=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.visitHierarchyLevel=function(e){return e.arg.accept(this)},t.prototype.visitHierarchy=function(e){return e.arg.accept(this)},t.prototype.visitPropertyVariationSource=function(e){return e.property},t.getProperty=function(e){var r=new t;return e.accept(r)},t})(t.DefaultSQExprVisitor);t.HierarchyVisitor=ce})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=jsCommon.ArrayExtensions,n=jsCommon.StringExtensions;!(function(r){function a(e,t,r){var i=t.getMetadata(r),n=i&&i.type;return!(!i||!n)&&(2===e||3===e?n.numeric:n.numeric||n.dateTime||n.duration)}function o(e,r){for(var i=0,n=e.length;i<n;i++)if(t.SQExpr.equals(e[i],r))return i;return-1}function u(e,r){for(var i=0,n=e.length;i<n;i++){var a=e[i];if(a&&t.SQExpr.equals(a.expr,r))return i}return-1}function s(e,r){var i=e.length;if(i!==r.length)return!1;for(var n=0;n<i;n++)if(!t.SQExpr.equals(e[n],r[n]))return!1;return!0}function c(e,t,r){for(var i={},a=0,o=e.length;a<o;a++)i[e[a].name]=!0;return n.findUniqueName(i,r||l(t))}function l(e,t){return void 0===t&&(t="select"),e?e.accept(Q.instance,t):t}function p(e){return e.accept(O.instance)}function f(e){return e.accept(I.instance)}function v(e){return e.accept(q.instance)}function h(e,t){var r=y(e,t);return r&&r.discourageQueryAggregateUsage}function m(e,t){var r=E(e,t);if(r)return r.aggregateBehavior}function y(e,r){var i=t.SQExprConverter.asFieldPattern(e);if(i){var n=t.FieldExprPattern.toFieldExprEntityItemPattern(i),a=r.schema(n.schema);return a?a.capabilities:void 0}}function d(e,t){var r=S(e,t);if(r)return r.kpiValue.measure.kpi.statusMetadata;var i=b(e,t);return i?i.kpiValue.measure.kpi.trendMetadata:void 0}function g(e,t){var r=t.schema(e.schema).entities.withName(e.entity);return r}function x(e,r){var i=e.getTargetColumnRef(r);if(i){var n=i.getConceptualProperty(r);if(n&&n.column){var a=i.getTargetEntity();if(a){var o=g(a,r);if(o){for(var u=[],s=0,c=o.properties;s<c.length;s++){var l=c[s];l.column&&l.column.keys&&_.contains(l.column.keys,n)&&u.push(t.SQExprBuilder.columnRef(a,l.name))}return u}}}}}function S(e,t){var r=e.getConceptualProperty(t);if(r){var i=r.kpiValue;return i&&i.measure.kpi.status===r?r:void 0}}function b(e,t){var r=e.getConceptualProperty(t);if(r){var i=r.kpiValue;return i&&i.measure.kpi.trend===r?r:void 0}}function w(e,t){var r=E(e,t);if(r)return r.defaultValue}function E(e,r){if(e&&r){var i=t.SQExprConverter.asFieldPattern(e);if(i){var n=i.column||i.groupingColumn;if(n){if(r.schema(n.schema)&&n.name){var a=r.schema(n.schema).findProperty(n.entity,n.name);if(a)return a.column}}else{var o=i.hierarchyLevel;if(o){var u=t.FieldExprPattern.toFieldExprEntityItemPattern(i),s=u.schema;if(r.schema(s)){var c=r.schema(s).findHierarchy(u.entity,o.name);if(c){var l=c.levels.withName(o.level);if(l&&l.column)return l.column.column}}}}}}}function D(e,t){if(!_.isEmpty(e)&&t){for(var r=[],i=0,n=e;i<n.length;i++){var a=n[i],o=w(a,t);o&&r.push(o)}return r}}function C(e,r){for(var i=[],n=0;n<e.length;n++)i.push(t.SQExprBuilder.compare(0,e[n],r[n]));if(!_.isEmpty(i)){for(var a,o=0,u=i;o<u.length;o++){var s=u[o];a=t.SQExprBuilder.and(a,s)}return a}}function R(e){var r=[],i=new t.SQFromEntitiesVisitor;if(e){var n=e.from();if(void 0!==n)for(var a=0,o=n.keys();a<o.length;a++){var u=o[a];n.source(u).accept(i,null)}}return r=_.map(i.entities,(function(e){return e.entity}))}function T(e,t,r){return F(e,t,r,0,2)||F(e,r,t,2,0)}function V(e,t,r){return F(e,t,r,2,0)||F(e,r,t,0,2)}function F(e,t,i,n,a){var o=r.getConceptualEntity(t,e);if(_.isEmpty(o.navigationProperties))return!1;var u=r.getConceptualEntity(i,e),s=[];for(s.push(o);!_.isEmpty(s);){var c=s.shift(),l=c.navigationProperties;if(!_.isEmpty(l))for(var p=0,f=l;p<f.length;p++){var v=f[p];if(v.isActive&&v.targetMultiplicity===a&&v.sourceMultiplicity===n){if(v.targetEntity===u)return!0;s.push(v.targetEntity)}}}return!1}function P(e,t,i){var n=r.getConceptualEntity(t,e),a=r.getConceptualEntity(i,e),o=n.navigationProperties,u=a.navigationProperties;return(!_.isEmpty(o)||!_.isEmpty(u))&&(M(o,a)||M(u,n))}function M(e,t){if(_.isEmpty(e))return!1;for(var r=0,i=e;r<i.length;r++){var n=i[r];if(n.isActive&&n.targetEntity===t&&0===n.sourceMultiplicity&&0===n.targetMultiplicity)return!0}return!1}function A(e,t){for(var r=i.copy(e),n=0,a=t;n<a.length;n++){var u=a[n];o(r,u)===-1&&r.push(u)}return r}function N(e){var t=new U;return e.accept(t),t.sawTransformOutputRoleRef}r.supportsArithmetic=a,r.indexOfExpr=o,r.indexOfNamedExpr=u,r.sequenceEqual=s,r.uniqueName=c,r.defaultName=l,r.isMeasure=p,r.isAnyValue=f,r.isDefaultValue=v,r.discourageAggregation=h,r.getAggregateBehavior=m,r.getSchemaCapabilities=y,r.getKpiMetadata=d,r.getConceptualEntity=g,r.getColumnnsWithKey=x,r.getDefaultValue=w,r.getDefaultValues=D,r.getDataViewScopeIdentityComparisonExpr=C,r.getActiveTablesNames=R,r.isRelatedToMany=T,r.isRelatedToOne=V,r.isRelatedOneToOne=P,r.concatUnique=A,r.detectTransformExpr=N;var Q=(function(r){function i(){return r.apply(this,arguments)||this}return __extends(i,r),i.prototype.visitEntity=function(e){return e.entity},i.prototype.visitNamedQueryRef=function(e){return"QueryRef("+e.queryName+")"},i.prototype.visitColumnRef=function(e){return e.source.accept(this)+"."+e.ref},i.prototype.visitGroupRef=function(e){return e.source.accept(this)+"."+e.ref},i.prototype.visitMeasureRef=function(e){return e.source.accept(this)+"."+e.ref},i.prototype.visitHierarchy=function(e){return e.arg.accept(this)+"."+e.hierarchy},i.prototype.visitHierarchyLevel=function(e){return e.arg.accept(this)+"."+e.level},i.prototype.visitPropertyVariationSource=function(e){return e.arg.accept(this)+"."+e.property+"."+e.name},i.prototype.visitAggr=function(e){return t.aggregateFunctionName(e.func)+"("+e.arg.accept(this)+")"},i.prototype.visitPercentile=function(e){var t=e.exclusive?"Percentile.Exc(":"Percentile.Inc(";return t+e.arg.accept(this)+", "+e.k+")"},i.prototype.visitArithmetic=function(t){return e.data.getArithmeticOperatorName(t.operator)+"("+t.left.accept(this)+", "+t.right.accept(this)+")"},i.prototype.visitConstant=function(e){return"const"},i.prototype.visitTransformOutputRoleRef=function(e){var t=e.role;return e.transform&&(t+="."+e.transform),t},i.prototype.visitScopedEval=function(e){var t=this;return"ScopedEval("+e.expression.accept(this)+", ["+_.map(e.scope,(function(e){return e.accept(t)})).join(", ")+"])"},i.prototype.visitRoleRef=function(e){return"Role."+e.role},i.prototype.visitDiscretize=function(e){return"Discretize("+e.source.accept(this)+", "+e.count+")"},i.prototype.visitMember=function(e){return"Member("+e.source.accept(this)+", "+e.member+")"},i.prototype.visitDefault=function(e,t){return t||"expr"},i})(t.DefaultSQExprVisitorWithArg);Q.instance=new Q;var O=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.visitMeasureRef=function(e){return!0},t.prototype.visitAggr=function(e){return!0},t.prototype.visitArithmetic=function(e){return!0},t.prototype.visitDefault=function(e){return!1},t})(t.DefaultSQExprVisitor);O.instance=new O;var q=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.visitCompare=function(e){return 0===e.comparison&&e.right.accept(this)},t.prototype.visitAnd=function(e){return e.left.accept(this)&&e.right.accept(this)},t.prototype.visitDefaultValue=function(e){return!0},t.prototype.visitDefault=function(e){return!1},t})(t.DefaultSQExprVisitor);q.instance=new q;var I=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.visitCompare=function(e){return 0===e.comparison&&e.right.accept(this)},t.prototype.visitAnd=function(e){return e.left.accept(this)&&e.right.accept(this)},t.prototype.visitAnyValue=function(e){return!0},t.prototype.visitDefault=function(e){return!1},t})(t.DefaultSQExprVisitor);I.instance=new I;var U=(function(e){function t(){var t=e.call(this)||this;return t.sawTransformOutputRoleRef=!1,t}return __extends(t,e),t.prototype.visitTransformOutputRoleRef=function(e){this.sawTransformOutputRoleRef=!0},t})(t.DefaultSQExprVisitorWithTraversal)})(r=t.SQExprUtils||(t.SQExprUtils={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function t(e){this.exprRewriter=e}return t.rewriteFrom=function(t,r){for(var i,n=t,a=n.keys(),o=0,u=a.length;o<u;o++){var s=a[o],c=n.source(s),l=c.accept(r,s);(c!==l||i)&&(i||(i=_.pick(n.sources(),a.slice(0,o))),i[s]=l)}return i?new e.SQFrom(i):n},t.prototype.rewriteFrom=function(r){return t.rewriteFrom(r,new e.SQFromSourceRewriter(this.exprRewriter))},t.prototype.rewriteSelect=function(e,t){return this.rewriteNamedSQExpressions(e,t)},t.prototype.rewriteGroupBy=function(e,t){if(!_.isEmpty(e))return this.rewriteNamedSQExpressions(e,t)},t.prototype.rewriteNamedSQExpressions=function(t,r){var i=this;return _.map(t,(function(t){return{name:t.name,expr:e.SQExprRewriterWithSourceRenames.rewrite(t.expr.accept(i.exprRewriter),r,r)}}))},t.prototype.rewriteOrderBy=function(t,r){if(!_.isEmpty(t)){for(var i=[],n=0,a=t.length;n<a;n++){var o=t[n],u=e.SQExprRewriterWithSourceRenames.rewrite(o.expr.accept(this.exprRewriter),r,r);i.push({direction:o.direction,expr:u})}return i}},t.prototype.rewriteWhere=function(t,r){var i=this;if(!_.isEmpty(t)){for(var n=[],a=0,o=t.length;a<o;a++){var u=t[a],s={condition:e.SQExprRewriterWithSourceRenames.rewrite(u.condition.accept(this.exprRewriter),r,r)};u.target&&(s.target=_.map(u.target,(function(t){return e.SQExprRewriterWithSourceRenames.rewrite(t.accept(i.exprRewriter),r,r)}))),n.push(s)}return n}},t.prototype.rewriteTransform=function(t,r){var i=this;if(!_.isEmpty(t)){for(var n=[],a=0,o=t;a<o.length;a++){var u=o[a],s=void 0;u.input.table&&!_.isEmpty(u.input.table.columns)&&(s=_.map(u.input.table.columns,(function(t){return{role:t.role,expression:{name:t.expression.name,expr:e.SQExprRewriterWithSourceRenames.rewrite(t.expression.expr.accept(i.exprRewriter),r,r)}}})));var c={name:u.name,algorithm:u.algorithm,input:{parameters:u.input.parameters},output:u.output};u.input.table&&(c.input.table={name:u.input.table.name,columns:s}),n.push(c)}return n}},t})();e.SemanticQueryRewriter=t})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(e,t){if(e===t)return!0;if(e&&t){if(r(e)&&r(t))return e.equals(t);if(i(e)&&i(t))return e.equals(t);if(n(e)&&n(t))return e.equals(t)}return!1}function r(e){return null!=e.entity}function i(e){return null!=e.subquery}function n(e){return null!=e.expr}var a=jsCommon.ArrayExtensions,o=jsCommon.StringExtensions,u=(function(){function e(e,t){this.schema=e,this.entity=t}return e.prototype.accept=function(e,t){return e.visitEntity(this,t)},e.prototype.equals=function(e){return e&&this.entity===e.entity&&this.schema===e.schema},e})();e.SQFromEntitySource=u;var s=(function(){function t(e){this.subquery=e}return t.prototype.accept=function(e,t){return e.visitSubquery(this,t)},t.prototype.equals=function(t){return t&&e.SemanticQuery.equals(this.subquery,t.subquery)},t})();e.SQFromSubquerySource=s;var c=(function(){function t(e){this.expr=e}return t.prototype.accept=function(e,t){return e.visitExpr(this,t)},t.prototype.equals=function(t){return t&&e.SQExpr.equals(this.expr,t.expr)},t})();e.SQFromExprSource=c;var l=(function(){function e(e){this.items=e||{}}return e.prototype.keys=function(){return Object.keys(this.items)},e.prototype.source=function(e){return this.items[e]},e.prototype.sources=function(){return this.items},e.prototype.ensureSource=function(e,t){var r=this.getSourceKeyFromItems(e);if(r)return{name:r};var i=this.addSource(e,t);return{name:i,new:!0}},e.prototype.remove=function(e){delete this.items[e]},e.prototype.getSourceKeyFromItems=function(e){var r=this.keys();for(var i in r){var n=r[i],a=this.items[n];if(t(a,e))return n}},e.prototype.addSource=function(e,t){for(var r=t||e.accept(new p,null),i=r,n={},a=0,u=this.keys();a<u.length;a++){var s=u[a];n[s]=!0}return i=o.findUniqueName(n,i),this.items[i]=e,i},e.prototype.clone=function(){var t=new e;return $.extend(t.items,this.items),t},e.prototype.equals=function(e){var r=this;if(!e)return!1;var i=this.keys(),n=e.keys();return i.length===n.length&&a.sequenceEqual(i,n,(function(i,n){return t(r.source(i),e.source(n))}))},e.prototype.renameSources=function(t){for(var r,i=this.items,n=Object.keys(i),a=0,u=n.length;a<u;a++){var s=n[a],c=s;if(t[s]&&(c=o.findUniqueName(t,s),!r)){r={};for(var l=0;l<a;l++){var p=n[l];r[p]=i[p]}}t[c]=!0,r&&(r[c]=i[s])}return r?new e(r):this},e})();e.SQFrom=l,e.equals=t,e.isSQFromEntitySource=r,e.isSQFromSubquerySource=i,e.isSQFromExprSource=n;var p=(function(){function e(){}return e.prototype.visitEntity=function(e){var t=e.entity,r=t.lastIndexOf(".");return r>=0&&r!==t.length-1&&(t=t.substr(r+1)),t.substring(0,1).toLowerCase()},e.prototype.visitSubquery=function(e){return"q"},e.prototype.visitExpr=function(e){return"x"},e})();e.SQFromSourceCandidateNameVisitor=p;var f=(function(){function t(){this.entities=[]}return t.prototype.visitEntity=function(t,r){this.entities.push(new e.SQEntityExpr(t.schema,t.entity,r))},t.prototype.visitSubquery=function(e,t){},t.prototype.visitExpr=function(e,t){},t})();e.SQFromEntitiesVisitor=f;var v=(function(){function t(e){this.exprRewriter=e}return t.prototype.visitEntity=function(t,r){var i=e.SQExprBuilder.entity(t.schema,t.entity,r),n=i.accept(this.exprRewriter);return new u(n.schema,n.entity)},t.prototype.visitSubquery=function(e,t){var r=e.subquery,i=r.rewrite(this.exprRewriter);return new s(i)},t.prototype.visitExpr=function(e,t){var r=e.expr,i=r.accept(this.exprRewriter);return new c(i)},t})();e.SQFromSourceRewriter=v})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=jsCommon.ArrayExtensions,r=(function(){function r(e,t,r,i,n,a,o){this.fromValue=e,this.whereItems=t,this.orderByItems=r,this.selectItems=i,this.groupByItems=n,this.transformItems=a,null!=o&&(this.topValue=o)}return r.create=function(){return r.empty||(r.empty=new r(new e.SQFrom,null,null,[],null,null,null)),r.empty},r.createWith=function(e,t){return t||(e=r.normalize(e)),new r(e.from,e.where,e.orderBy,e.select,e.groupBy,e.transforms,e.top)},r.prototype.createModified=function(e){return r.createWith({from:void 0!==e.from?e.from:this.fromValue,where:void 0!==e.where?e.where:this.whereItems,transforms:void 0!==e.transforms?e.transforms:this.transformItems,orderBy:void 0!==e.orderBy?e.orderBy:this.orderByItems,select:void 0!==e.select?e.select:this.selectItems,groupBy:void 0!==e.groupBy?e.groupBy:this.groupByItems,top:void 0!==e.top?e.top:this.topValue})},r.normalize=function(e){var t={clauses:{from:e.from,where:e.where,orderBy:e.orderBy,select:e.select,groupBy:e.groupBy,transforms:e.transforms,top:e.top},usedSourceNames:{}};return r.removeUnreferencedKeys(t),r.renameSources(t),r.renameSourcesInSubqueries(t),t.clauses},r.removeUnreferencedKeys=function(e){var t=e.clauses,r=t.from,i=t.where,n=t.orderBy,o=t.select,u=t.groupBy,s=t.transforms,c=new a(r.keys());if(i)for(var l=0,p=i.length;l<p;l++){var f=i[l];f.condition.accept(c);var v=f.target;if(v)for(var h=0,m=v.length;h<m;h++)v[h]&&v[h].accept(c)}if(s)for(var l=0,p=s.length;l<p;l++){var y=s[l].input.table;if(y&&!_.isEmpty(y.columns))for(var d=0,g=y.columns;d<g.length;d++){var x=g[d];x.expression.expr.accept(c)}}if(n)for(var l=0,p=n.length;l<p;l++)n[l].expr.accept(c);for(var l=0,p=o.length;l<p;l++)o[l].expr.accept(c);if(u)for(var l=0,p=u.length;l<p;l++)u[l].expr.accept(c);var S=c.result();if(S){for(var b=r.clone(),w=0,E=S;w<E.length;w++){var D=E[w];b.remove(D)}e.clauses.from=b}},r.renameSources=function(e){var t=e.clauses.from,i=t.renameSources(e.usedSourceNames);i!==t&&(e.clauses.from=i,r.rewriteClauses(e.clauses,new n(t,i)))},r.renameSourcesInSubqueries=function(e){e.clauses.from=o.renameSources(r.renameSourcesInQuery,e.clauses.from,e.usedSourceNames)},r.renameSourcesInQuery=function(e,t){var i={clauses:e.getClauses(),usedSourceNames:t},n=i.clauses.from;return r.renameSources(i),r.renameSourcesInSubqueries(i),i.clauses.from===n?e:r.createWith(i.clauses)},r.prototype.from=function(e){return e?this.createModified({from:e}):this.fromValue.clone()},r.prototype.select=function(e){return _.isEmpty(arguments)?this.getSelect():this.setSelect(e)},r.prototype.getSelect=function(){return r.createNamedExpressionArray(this.selectItems)},r.createNamedExpressionArray=function(e){return t.extendWithName(_.map(e,(function(e){return{name:e.name,expr:e.expr}})))},r.prototype.setSelect=function(e){var t=this.fromValue.clone(),i=r.rewriteExpressionsWithSourceRenames(e,t);return this.createModified({from:t,select:i})},r.rewriteExpressionsWithSourceRenames=function(e,t){for(var r=[],i=0,a=e.length;i<a;i++){var o=e[i];r.push({name:o.name,expr:n.rewrite(o.expr,null,t)})}return r},r.prototype.removeSelect=function(t){for(var r=this.selectItems,i=[],n=0,a=r.length;n<a;n++){var o=r[n];e.SQExpr.equals(o.expr,t)||i.push(o)}return this.createModified({select:i})},r.prototype.removeOrderBy=function(t){for(var r=this.orderBy(),i=r.length-1;i>=0;i--)e.SQExpr.equals(r[i].expr,t)&&r.splice(i,1);return this.createModified({orderBy:r})},r.prototype.removeTransform=function(e){for(var t=this.transforms(),r=0,i=t.length;r<i;r++)if(t[r].name===e.name){t.splice(r,1);break}return this.createModified({transforms:t})},r.prototype.selectNameOf=function(t){var r=e.SQExprUtils.indexOfNamedExpr(this.selectItems,t);if(r>=0)return this.selectItems[r].name},r.prototype.setSelectAt=function(e,t){if(!(e>=this.selectItems.length)){var r=this.select(),i=this.fromValue.clone(),a=r[e].name;return r[e]={name:a,expr:n.rewrite(t,null,i)},this.createModified({from:i,select:r})}},r.prototype.addSelect=function(e,t){var r=this.select(),i=this.fromValue.clone();return r.push(this.createNamedExpr(r,i,e,t)),this.createModified({from:i,select:r})},r.prototype.createNamedExpr=function(t,r,i,a){return{name:e.SQExprUtils.uniqueName(t,i,a),expr:n.rewrite(i,null,r)}},r.prototype.groupBy=function(e){return _.isEmpty(arguments)?this.getGroupBy():this.setGroupBy(e)},r.prototype.getGroupBy=function(){return r.createNamedExpressionArray(this.groupByItems)},r.prototype.setGroupBy=function(e){var t=this.fromValue.clone(),i=r.rewriteExpressionsWithSourceRenames(e,t);return this.createModified({from:t,groupBy:i})},r.prototype.addGroupBy=function(e){var t=this.groupBy(),r=this.fromValue.clone();return t.push(this.createNamedExpr(t,r,e)),this.createModified({from:r,groupBy:t})},r.prototype.orderBy=function(e){return _.isEmpty(arguments)?this.getOrderBy():this.setOrderBy(e)},r.prototype.getOrderBy=function(){var e=[],t=this.orderByItems;if(t)for(var r=0,i=t.length;r<i;r++){var n=t[r];e.push({expr:n.expr,direction:n.direction})}return e},r.prototype.setOrderBy=function(e){for(var t=[],r=this.fromValue.clone(),i=0,a=e.length;i<a;i++){var o=e[i];t.push({expr:n.rewrite(o.expr,null,r),direction:o.direction})}return this.createModified({from:r,orderBy:t})},r.prototype.where=function(e,t){return _.isEmpty(arguments)?this.getWhere():this.setWhere([],e,t)},r.prototype.getWhere=function(){var e=[],t=this.whereItems;if(t)for(var r=0,i=t.length;r<i;r++)e.push(t[r]);return e},r.prototype.setWhere=function(e,t,r){for(var i=_.clone(e),a=this.fromValue.clone(),o=0,u=t;o<u.length;o++){var s=u[o],c={condition:n.rewrite(s.condition,r,a)};s.target&&(c.target=_.map(s.target,(function(e){return n.rewrite(e,r,a)}))),i.push(c)}return this.createModified({from:a,where:i})},r.prototype.addWhere=function(e,t){return this.setWhere(this.where(),e,t)},r.prototype.addSemanticFilter=function(e){return this.setWhere(this.where(),e.where(),e.from())},r.prototype.transforms=function(e){return _.isEmpty(arguments)?this.getTransforms():this.setTransforms(e)},r.prototype.getTransforms=function(){var e=[];if(!_.isEmpty(this.transformItems))for(var t=0,r=this.transformItems;t<r.length;t++){var i=r[t];e.push(i)}return e},r.prototype.setTransforms=function(e){for(var r=this,i=this.fromValue.clone(),n=[],a=0,o=e;a<o.length;a++){var u=o[a],s=void 0;u.input.table&&!_.isEmpty(u.input.table.columns)&&(s=_.map(u.input.table.columns,(function(e){return{role:e.role,expression:r.createNamedExpr(t.extendWithName([]),i,e.expression.expr,e.expression.name)}})));var c={name:u.name,algorithm:u.algorithm,input:{parameters:u.input.parameters},output:u.output};u.input.table&&(c.input.table={name:u.input.table.name,columns:s}),n.push(c)}return this.createModified({from:i,transforms:e})},r.prototype.top=function(e){return _.isEmpty(arguments)?this.topValue:this.setTop(e)},r.prototype.setTop=function(e){return this.createModified({top:e})},r.prototype.rewrite=function(e){var t=this.getClauses();return r.rewriteClauses(t,e),this.createModified(t)},r.prototype.getClauses=function(){return{from:this.fromValue,where:this.whereItems,orderBy:this.orderByItems,select:this.selectItems,groupBy:this.groupByItems,transforms:this.transformItems,top:this.topValue}},r.rewriteClauses=function(t,r){var i=new e.SemanticQueryRewriter(r);t.from=i.rewriteFrom(t.from),t.where=i.rewriteWhere(t.where,t.from),t.orderBy=i.rewriteOrderBy(t.orderBy,t.from),t.select=i.rewriteSelect(t.select,t.from),t.groupBy=i.rewriteGroupBy(t.groupBy,t.from),t.transforms=i.rewriteTransform(t.transforms,t.from)},r.equals=function(r,i){return r.from().equals(i.from())&&t.sequenceEqual(r.where(),i.where(),e.SQFilter.equals)&&t.sequenceEqual(r.orderBy(),i.orderBy(),e.SQUtils.sqSortDefinitionEquals)&&t.sequenceEqual(r.select(),i.select(),e.SQUtils.namedSQExprEquals)&&t.sequenceEqual(r.groupBy(),i.groupBy(),e.SQUtils.namedSQExprEquals)&&t.sequenceEqual(r.transforms(),i.transforms(),e.SQUtils.sqTransformEquals)&&r.top()===i.top()},r})();e.SemanticQuery=r;var i=(function(){function r(e,t){this.fromValue=e,this.whereItems=t}return r.fromSQExpr=function(t){return r.fromSQFromAndSQExpr(new e.SQFrom,t)},r.fromSQFromAndSQExpr=function(e,t){var i=n.rewrite(t,e,e),a=[{condition:i}];return new r(e,a)},r.fromSQFromAndSQFilters=function(e,t){return new r(e,t)},r.getDefaultValueFilter=function(t){return r.getDataViewScopeIdentityComparisonFilters(t,e.SQExprBuilder.defaultValue())},r.getAnyValueFilter=function(t){return r.getDataViewScopeIdentityComparisonFilters(t,e.SQExprBuilder.anyValue())},r.getDataViewScopeIdentityComparisonFilters=function(t,i){if(t instanceof Array){var n=Array.apply(null,Array(t.length)).map((function(){return i}));return r.fromSQExpr(e.SQExprUtils.getDataViewScopeIdentityComparisonExpr(t,n))}return r.fromSQExpr(e.SQExprBuilder.equal(t,i))},r.prototype.from=function(){return this.fromValue.clone()},r.prototype.conditions=function(){for(var e=[],t=this.whereItems,r=0,i=t.length;r<i;r++){var n=t[r];e.push(n.condition)}return e},r.prototype.where=function(){for(var e=[],t=this.whereItems,r=0,i=t.length;r<i;r++)e.push(t[r]);return e},r.prototype.rewrite=function(t){var i=new e.SemanticQueryRewriter(t),n=i.rewriteFrom(this.fromValue),a=i.rewriteWhere(this.whereItems,n);return new r(n,a)},r.prototype.validate=function(t,r,i){var n=new e.SQExprValidationVisitor(t,r,i);return this.rewrite(n),n.errors},r.merge=function(e){if(_.isEmpty(e))return null;if(1===e.length)return e[0];for(var i=e[0],n=i.from(),a=t.take(i.whereItems,i.whereItems.length),o=1,u=e.length;o<u;o++)r.applyFilter(e[o],n,a);return new r(n,a)},r.isDefaultFilter=function(t){return!(!t||1!==t.where().length)&&e.SQExprUtils.isDefaultValue(t.where()[0].condition)},r.isAnyFilter=function(t){return!(!t||1!==t.where().length)&&e.SQExprUtils.isAnyValue(t.where()[0].condition)},r.isSameFilter=function(e,t){return!!jsCommon.JsonComparer.equals(e,t)&&!(r.isDefaultFilter(e)&&r.isAnyFilter(t)||r.isAnyFilter(e)&&r.isDefaultFilter(t))},r.applyFilter=function(e,t,r){for(var i=e.whereItems,a=0;a<i.length;a++){var o=i[a],u={condition:n.rewrite(o.condition,e.fromValue,t)};o.target&&(u.target=_.map(o.target,(function(r){return n.rewrite(r,e.fromValue,t)}))),r.push(u)}},r})();e.SemanticFilter=i;var n=(function(t){function i(e,r){var i;return i=t.call(this)||this,i.sourceFrom=e,i.destinationFrom=r,i}return __extends(i,t),i.prototype.visitEntity=function(t){var r=this.destinationFrom.source(t.variable);if(r&&e.isSQFromEntitySource(r)&&r.schema===t.schema&&r.entity===t.entity)return t;var i=this.destinationFrom.ensureSource(new e.SQFromEntitySource(t.schema,t.entity),t.variable);return i.name!==t.variable?new e.SQEntityExpr(t.schema,t.entity,i.name):t},i.prototype.visitSubqueryRef=function(t){if(!this.sourceFrom)return t;var i=this.sourceFrom.source(t.variable),n=this.destinationFrom.source(t.variable);if(n&&e.isSQFromSubquerySource(n)&&r.equals(i.subquery,n.subquery))return t;var a=this.destinationFrom.ensureSource(new e.SQFromSubquerySource(i.subquery),t.variable);return a.name!==t.variable?new e.SQSubqueryRefExpr(a.name):t},i.prototype.visitNamedQueryRef=function(t){var r=this.destinationFrom.source(t.variable);if(r&&e.isSQFromExprSource(r)){var i=r.expr;if(e.SQExpr.equals(i,t))return t}var n=this.destinationFrom.ensureSource(new e.SQFromExprSource(t),t.variable);if(n.name!==t.variable)return new e.SQNamedQueryRefExpr(t.queryName,n.name)},i.rewrite=function(e,t,r){var n=new i(t,r);return e.accept(n)},i})(e.SQExprRewriter);e.SQExprRewriterWithSourceRenames=n;var a=(function(e){function t(t){var r;return r=e.call(this)||this,r.keys=t,r}return __extends(t,e),t.prototype.visitEntity=function(e){this.removeKey(e.variable)},t.prototype.visitSubqueryRef=function(e){this.removeKey(e.variable)},t.prototype.visitNamedQueryRef=function(e){this.removeKey(e.variable)},t.prototype.removeKey=function(e){var t=this.keys.indexOf(e);t>=0&&this.keys.splice(t,1)},t.prototype.result=function(){return this.keys},t})(e.DefaultSQExprVisitorWithTraversal),o=(function(){function t(e,t,r){this.renameSources=e,this.from=t,this.usedSourceNames=r}return t.renameSources=function(r,i,n){var a=new t(r,i,n);return e.SemanticQueryRewriter.rewriteFrom(i,a)},t.prototype.visitEntity=function(e,t){return e},t.prototype.visitSubquery=function(t,r){var i=t.subquery,n=this.renameSources(i,this.usedSourceNames);return n===i?t:new e.SQFromSubquerySource(n)},t.prototype.visitExpr=function(e,t){return e},t})()})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t,r=jsCommon.ArrayExtensions;!(function(t){function i(t,r){return t||(t=null),r||(r=null),t===r||!!t==!!r&&(!!n(t,r)&&e.SQExpr.equals(t.condition,r.condition))}function n(t,i){return r.sequenceEqual(t.target,i.target,e.SQExpr.equals)}function a(e,t){return!_.isEmpty(e)&&_.any(e,(function(e){return i(e,t)}))}t.equals=i,t.targetsEqual=n,t.contains=a})(t=e.SQFilter||(e.SQFilter={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t,r=jsCommon.ArrayExtensions;!(function(t){function i(t,r){return!t&&!r||!(!t||!r)&&(t.direction===r.direction&&e.SQExpr.equals(t.expr,r.expr))}function n(t,r){return!t&&!r||!(!t||!r)&&e.SQExpr.equals(t.expr,r.expr)}function a(e,t){return!e&&!t||!(!e||!t)&&(e.role===t.role&&n(e.expression,t.expression))}function o(e,t){return!e&&!t||!(!e||!t)&&r.sequenceEqual(e.columns,t.columns,(function(e,t){return a(e,t)}))}function u(e,t){return!e&&!t||!(!e||!t)&&(r.sequenceEqual(e.parameters,t.parameters,(function(e,t){return n(e,t)}))&&o(e.table,t.table))}function s(e,t){return!e&&!t||!(!e||!t)&&o(e.table,t.table)}function c(e,t){return!e&&!t||!(!e||!t)&&(e.algorithm===t.algorithm&&u(e.input,t.input)&&s(e.output,t.output))}t.sqSortDefinitionEquals=i,t.namedSQExprEquals=n,t.sqTransformTableColumnsEquals=a,t.sqTransformTableEquals=o,t.sqTransformInputEquals=u,t.sqTransformOutputEquals=s,t.sqTransformEquals=c})(t=e.SQUtils||(e.SQUtils={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function r(){return new s}function i(e,r,i,n){var a=e.identities;return a?a[r]:t.createDataViewScopeIdentity(u.equal(e.fields[0],u.typedConstant(i,n)))}function n(e,t){_.contains(e,t)||e.push(t)}function a(e,t,r){var i=t.values;e.values=i;var n=t.highlights;n&&(e.highlights=n);var a;void 0!==t.minLocal&&(a||(a={}),a.minLocal=t.minLocal),void 0!==t.maxLocal&&(a||(a={}),a.maxLocal=t.maxLocal),a&&(e.source.aggregates=a,_.extend(e,a))}var o=e.data.DataViewTransform,u=e.data.SQExprBuilder;t.createCategoricalDataViewBuilder=r;var s=(function(){function e(){this.categories=[],this.staticMeasureColumns=[],this.dynamicMeasureColumns=[],this.columnIndex=0}return e.prototype.withCategory=function(e){var t=e.values,r=e.identityFrom,n=e.source.type,a={source:e.source,identityFields:e.identityFrom.fields,identity:e.identityFrom.identities||[],values:t};if(!e.identityFrom.identities)for(var o=0,u=t.length;o<u;o++)a.identity.push(i(r,o,t[o],n));return this.categories||(this.categories=[]),this.categories.push(a),this},e.prototype.withCategories=function(e){return _.isEmpty(this.categories)?this.categories=e:Array.prototype.push.apply(this.categories,e),this},e.prototype.withValues=function(e){for(var t=e.columns,r=0,i=t;r<i.length;r++){var n=i[r];this.staticMeasureColumns.push(n.source)}return this.staticSeriesValues=t,this},e.prototype.withGroupedValues=function(e){var t=e.groupColumn;this.dynamicSeriesMetadata={column:t.source,identityFrom:t.identityFrom,values:t.values};for(var r=e.valueColumns,i=0,n=r;i<n.length;i++){var a=n[i];this.dynamicMeasureColumns.push(a.source)}return this.dynamicSeriesValues=e.data,this},e.prototype.fillData=function(e){var t=_.first(this.categories),r=t&&t.values?t.values.length:0;if(this.hasDynamicSeries())for(var i=0,n=this.dynamicSeriesMetadata.values.length;i<n;i++)for(var o=this.dynamicSeriesValues[i],u=0,s=this.dynamicMeasureColumns.length;u<s;u++){var c=i*s+u;a(e[c],o[u],r)}if(this.hasStaticSeries())for(var l=this.hasDynamicSeries()?this.dynamicSeriesValues.length*this.dynamicMeasureColumns.length:0,u=0,s=this.staticMeasureColumns.length;u<s;u++)a(e[l+u],this.staticSeriesValues[u],r)},e.prototype.build=function(){for(var e=[],t={},r=this.categories,a=this.dynamicSeriesMetadata,u=0,s=r;u<s.length;u++){var c=s[u];n(e,c.source)}if(this.hasDynamicSeries()){n(e,a.column),t.values=o.createValueColumns([],a.identityFrom.fields,a.column);for(var l=a.values,p=0;p<l.length;p++)for(var f=l[p],v=i(a.identityFrom,p,f,a.column.type),h=0,m=this.dynamicMeasureColumns;h<m.length;h++){
var y=m[h],d=_.toPlainObject(y);d.groupName=f,n(e,d),t.values.push({source:d,values:[],identity:v})}if(0===l.length)for(var g=0,x=this.dynamicMeasureColumns;g<x.length;g++){var y=x[g],d=_.toPlainObject(y);n(e,d),t.values.push({source:d,values:[]})}if(this.hasStaticSeries()){var S=t.values.grouped();t.values.grouped=function(){return S},this.appendStaticMeasureColumns(e,t.values)}}else t.values=o.createValueColumns(),this.appendStaticMeasureColumns(e,t.values);var b=this.categories;_.isEmpty(b)||(t.categories=b),this.fillData(t.values);var w={metadata:{columns:e},categorical:t};if(this.isLegalDataView(w))return w},e.prototype.appendStaticMeasureColumns=function(e,t){if(!_.isEmpty(this.staticMeasureColumns))for(var r=0,i=this.staticMeasureColumns;r<i.length;r++){var a=i[r];n(e,a),t.push({source:a,values:[]})}},e.prototype.isLegalDataView=function(t){return!(this.hasDynamicSeries()&&this.hasStaticSeries()&&e.isVisualDataView(t.metadata.columns))},e.isVisualDataView=function(e){return!_.isEmpty(e)&&_.any(e,(function(e){return!!e.queryName}))},e.prototype.hasDynamicSeries=function(){return!!this.dynamicSeriesMetadata},e.prototype.hasStaticSeries=function(){return!!this.staticSeriesValues},e})()})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function r(e,r,i,n){return new c(e||t.createColorAllocatorCache(),n,r||{metadata:{columns:[]}},i)}function i(e,t,r,i){var n=r.rows;if(!(_.isEmpty(n)||n.length<=i)){var o=r.columns,u=a(e,t);if(!(u<0))for(var s=0,c=o.length;s<c;s++)if(u===o[s].index)return n[i][s]}}function n(e,t,r){var i=a(e.arg,t);if(!(i<0))for(var n=0,u=r.length;n<u;n++){var s=r[n],c=s.aggregates;if(i===s.index&&c){var l=o(c,e);if(void 0!==l)return l}}}function a(e,t){var r;s.isSelectRef(e)&&(r=e.expressionName);for(var i=0,n=t.length;i<n;i++){var a=t[i];if(a&&(!r||a.queryName))if(r){if(a.queryName===r)return i}else if(s.equals(a.expr,e))return i}return-1}function o(e,t){if(s.isPercentile(t)){var r=_.find(e.percentiles,(function(e){if(e.k===t.k){var r=!!e.exclusive;return t.exclusive===r}}));if(r)return r.value}else if(s.isAggregation(t))switch(t.func){case 3:return u(e.min,e.minLocal);case 4:return u(e.max,e.maxLocal);case 6:return e.median;case 1:return e.average}}function u(e,t){return void 0!==e?e:t}var s=e.data.SQExpr;t.createStaticEvalContext=r;var c=(function(){function e(e,t,r,i){this.colorAllocatorCache=e,this.dataView=r,this.selectTransforms=i,this.themeColors=t}return e.prototype.getColorAllocator=function(e){return this.colorAllocatorCache.get(e)},e.prototype.getThemeColor=function(e){var t=this.themeColors;if(t)return t.get(e)},e.prototype.getExprValue=function(e){var t=this.dataView,r=this.selectTransforms;if(t&&r){if(s.isAggregation(e)||s.isPercentile(e)){var a=n(e,r,t.metadata.columns);if(void 0!==a)return a}return t.table?i(e,r,t.table,0):void 0}},e.prototype.getRoleValue=function(e){},e})();t.getExprValueFromTable=i,t.findSelectIndex=a})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function r(e,t){return new n(e,t)}var i=e.data.SQExpr;t.createMatrixEvalContext=r;var n=(function(){function e(e,t){this.colorAllocatorProvider=e,this.dataView=t}return e.prototype.getColorAllocator=function(e){return this.colorAllocatorProvider.get(e)},e.prototype.getExprValue=function(e){if(i.isSelectRef(e))return this.valueNode?this.evaluateValue(e):this.rowNode?this.evaluateRowHeader(e):this.columnNode?this.evaluateColumnHeader(e):void 0},e.prototype.evaluateValue=function(e){var t=this.dataView.valueSources[this.valueNode.valueSourceIndex||0].queryName,r=e.expressionName;if(r===t)return this.valueNode.value},e.prototype.evaluateRowHeader=function(e){},e.prototype.evaluateColumnHeader=function(e){},e.prototype.getRoleValue=function(e){},e.prototype.setCurrentContext=function(e,t,r){this.valueNode=e,this.columnNode=r,this.rowNode=t},e.prototype.getDataView=function(){return this.dataView},e.prototype.getRowNode=function(){return this.rowNode},e.prototype.getColumnNode=function(){return this.columnNode},e.prototype.getIntersection=function(){return this.valueNode},e})()})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t,r=jsCommon.StringExtensions,i=jsCommon.Formatting,n=jsCommon.RegExpExtensions;!(function(e){function t(e){return a.lastIndex=0,e.replace(a,"")}function r(e,t){for(a.lastIndex=0;;){var r=a.exec(e);if(!r)break;var i=r[0],n=a.lastIndex-i.length,o=String.fromCharCode(57600+t.length);t.push(i),e=e.substr(0,n)+o+e.substr(a.lastIndex),a.lastIndex=n+1}return e}function i(e,t,r){void 0===r&&(r=!0);for(var i=t.length,n=0;n<i;n++){var a=String.fromCharCode(57600+n),o=t[n];if(!r){var u=o[0];o="\\"===u||1===o.length||o[o.length-1]!==u?o.substring(1):o.substring(1,o.length-1)}e=e.replace(a,o)}return e}var n=["'[^']*'",'"[^"]*"',"\\\\.","'[^']*$",'"[^"]*$',"\\\\$"],a=new RegExp(n.join("|"),"g");e.removeLiterals=t,e.preserveLiterals=r,e.restoreLiterals=i})(t||(t={}));var a,o=/({{)|(}})|{(\d+[^}]*)}/g,u="0",s="#",c="E",l=[u,s],p=new RegExp(l.join("|"),"g"),f=(function(){function e(){}return e.prototype.formatValue=function(e,t,r){if(void 0===e||null===e)return"";var i=this.getCulture(r);return a.canFormat(e)?a.format(e,t,i):v.canFormat(e)?v.format(e,t,i):e.toString()},e.prototype.format=function(e,t,r){var i=this;if(!e)return"";var n=e.replace(o,(function(e,n,a,o){if(n)return"{";if(a)return"}";var u=o.split(":"),s=parseInt(u[0],10),c=u[1];return i.formatValue(t[s],c,r)}));return n},e.prototype.isStandardNumberFormat=function(e){return v.isStandardFormat(e)},e.prototype.formatNumberWithCustomOverride=function(e,t,r,i){var n=this.getCulture(i);return v.formatWithCustomOverride(e,t,r,n)},e.prototype.dateFormatString=function(e){return this._dateTimeScaleFormatInfo||this.initialize(),this._dateTimeScaleFormatInfo.getFormatString(e)},e.prototype.setCurrentCulture=function(e){this._currentCultureSelector!==e&&(this._currentCulture=this.getCulture(e),this._currentCultureSelector=e,this._dateTimeScaleFormatInfo=new h(this._currentCulture))},e.prototype.getCulture=function(e){if(null==e)return null==this._currentCulture&&this.initialize(),this._currentCulture;var t=Globalize.findClosestCulture(e);return t||(t=Globalize.culture("en-US")),t},e.prototype.parseFloat=function(e){return Globalize.parseFloat(e,this.getCulture())},e.prototype.initialize=function(){var e=this.getCurrentCulture();this.setCurrentCulture(e);var t=this.getUrlParam("calendar");if(t){var r=this._currentCulture,i=r.calendars[t];i&&(r.calendar=i)}},e.prototype.getCurrentCulture=function(){var e=this.getUrlParam("language");return e?e:powerbi&&powerbi.common&&powerbi.common.cultureInfo?powerbi.common.cultureInfo:window.navigator.userLanguage||window.navigator.language||Globalize.culture().name},e.prototype.getUrlParam=function(e){var t=window.location.search.match(RegExp("[?&]"+e+"=([^&]*)"));return t?t[1]:void 0},e})();!(function(e){function n(e){var t=e instanceof Date;return t}function a(e,t,r){t=t||"G";var i=1===t.length;try{return i?o(e,t,r):u(e,t,r)}catch(t){return o(e,"G",r)}}function o(e,t,r){var n=r.calendar.patterns;l(r.calendar);var a=i.findDateFormat(e,t,r.name);return t=1===a.format.length?n[a.format]:a.format,r=Globalize.culture("en-US"),Globalize.format(a.value,t,r)}function u(e,i,n){var a,o=[];if(i=t.preserveLiterals(i,o),i.indexOf("F")>-1){i=r.replaceAll(i,"FFFF","FFF");var u=e.getMilliseconds();if(u%10>=1&&(i=r.replaceAll(i,"FFF","fff")),i=r.replaceAll(i,"FFF","FF"),u%100/10>=1&&(i=r.replaceAll(i,"FF","ff")),i=r.replaceAll(i,"FF","F"),u%1e3/100>=1&&(i=r.replaceAll(i,"F","f")),i=r.replaceAll(i,"F",""),""===i||"%"===i)return""}return i=s(i),a=Globalize.format(e,i,n),a=c(a,n.calendar),a=t.restoreLiterals(a,o,!1)}function s(e){return e===p?f:(p=e,e=i.fixDateTimeFormat(e),f=e,e)}function c(e,t){var r=t[":"];if(":"===r)return e;for(var i="",n=e.length,a=0;a<n;a++){var o=e.charAt(a);switch(o){case":":i+=r;break;default:i+=o}}return i}function l(e){var t=e.patterns;void 0===t.g&&(t.g=t.f.replace(t.D,t.d),t.G=t.F.replace(t.D,t.d))}var p,f;e.canFormat=n,e.format=a})(a||(a={}));var v;!(function(r){function i(e,t){if(!t||void 0===e)return e;var r="{0:"+t+"}";return e.replace("{0}",r)}function a(e,t){if(null==t)return t;if(v(t)){var i=r.getComponents(t),n=i.positive,a=i.negative,u=i.zero;return e>0?o(e,n):0===e?o(e,u):o(e,a)}return o(e,t)}function o(e,t){var r=n.run(j,t);return r?r[0]:t}function l(e,t,i){if(null==t)return e;if(null==e&&(e=u),v(e)){for(var n=r.getComponents(e),a=n.positive,o=n.negative,s=n.zero,c=[a,o,s],l=0;l<c.length;l++)c[l]=f(c[l],t,i);return c.join(r.NumberFormatComponentsDelimeter)}return f(e,t,i)}function f(e,r,i){if(r=Math.abs(r),r>=0){var a=[];e=t.preserveLiterals(e,a);var o=i?u:s,c=_.repeat(o,Math.abs(r)),l=n.run(U,e);if(l){var p=e.substr(0,l.index),f=e.substr(l.index+1,l[1].length),v=e.substr(l.index+l[0].length);if(i)f=c;else{var h=c.length-f.length;h>0?f+=c.slice(-h):h<0&&(f=f.slice(0,h))}f.length>0&&(f=k+f),e=p+f+v}else c.length>0&&(e=e.replace(B,"$1"+k+c));0!==a.length&&(e=t.restoreLiterals(e,a))}return e}function v(e){return t.removeLiterals(e).indexOf(r.NumberFormatComponentsDelimeter)!==-1}function h(e){var i={hasNegative:!1,positive:e,negative:e,zero:e},n=[];e=t.preserveLiterals(e,n);var a=e.split(r.NumberFormatComponentsDelimeter),o=a.length;return o>1&&(0!==n.length&&(a=_.map(a,(function(e){return t.restoreLiterals(e,n)}))),i.hasNegative=!0,i.positive=i.zero=a[0],i.negative=a[1],o>2&&(i.zero=a[2])),i}function m(e){var t="number"==typeof e;return t}function y(e){return q.test(e)}function d(e){if(e&&!y(e)){var t=D(e);if(!t.hasDots)return l(e,2,!0)}return e}function g(e,t,r){t=t||"G";try{return y(t)?S(e,t,r):b(e,t,r)}catch(t){return Globalize.format(e,void 0,r)}}function x(e,t,r,i){return b(e,t,i,r)}function S(e,t,r){var i,n=t.length>1?parseInt(t.substr(1,t.length-1),10):void 0,a=r.numberFormat,o=t.charAt(0);switch(o){case"e":case"E":void 0===n&&(n=6);var u=_.repeat("0",n);t="0."+u+o+"+000",i=b(e,t,r);break;case"f":case"F":i=void 0!==n?e.toFixed(n):e.toFixed(a.decimals),i=N(i,a);break;case"g":case"G":var s=Math.abs(e);if(0===s||1e-4<=s&&s<1e15)i=void 0!==n?e.toPrecision(n):e.toString();else{if("number"!=typeof e)return String(e);i=void 0!==n?e.toExponential(n):e.toExponential(),i=i.replace("e","E")}i=N(i,a);break;case"r":case"R":i=e.toString(),i=N(i,a);break;case"x":case"X":if(i=e.toString(16),"X"===o&&(i=i.toUpperCase()),void 0!==n){var c=i.length,l=e<0;l&&c--;var p=n-c,f=void 0;p>0&&(f=_.repeat("0",p)),i=l?"-"+f+i.substr(1):f+i}i=N(i,a);break;default:i=Globalize.format(e,t,r)}return i}function b(a,o,u,s){var c,l=u.numberFormat;if(!isFinite(a))return Globalize.format(a,void 0);var p=h(o);o=a>0?p.positive:0===a?p.zero:p.negative,p.hasNegative&&(a=Math.abs(a));var f=D(o,!0),v=[];if(f.hasLiterals&&(o=t.preserveLiterals(o,v)),f.hasE&&!s){var m=n.run(O,o);if(m){var y=o.substr(0,m.index),d=o.substr(m.index+2),g=C(y,f),x=F(y,f);if(1!==x&&(a*=x),"number"!=typeof a)return String(a);var S=a.toExponential(g),b=S.indexOf("e"),_=S.substr(0,b),T=S.substr(b+1),V=P(_,y,l),M=P(T,d,l);"+"===M.charAt(0)&&"+"!==m[0].charAt(1)&&(M=M.substr(1));var A=m[0].charAt(0);c=V+A+M}}if(void 0===c){var N=void 0,Q=!1,g=C(o,f),x=F(o,f);if(1!==x&&(a*=x),a=parseFloat(E(a,g)),!isFinite(a))return Globalize.format(a,void 0);if(s){var q=r.getNumericFormat(a,o);s=i(s,q),N=e.formattingService.format(s,[a],u.name),Q=!0}else N=E(a,g),N=w(a,N,g,R(o,f));c=P(N,o,l,s,Q)}return f.hasLiterals&&(c=t.restoreLiterals(c,v,!1)),L=f,c}function w(e,t,r,i){if(0===i)return t;var n=t.indexOf(".");if(n===-1)return t;for(var a=n+1,o=a+(r-i),u=o;u<t.length;++u){var s=t[u];if("0"===s||"9"===s){var c=E(e,u-a);if(parseFloat(c)===e)return c}}return t}function E(t,r){var i="",n=0;r>16&&(n=r-16,r=16);var a=e.Double.log10(Math.abs(t));if(a<16){if(a>0){var o=16-a;r>o&&(n+=r-o,r=o)}i=t.toFixed(r)}else if(16===a)i=t.toFixed(0),n+=r,n>0&&(i+=".");else{if("number"!=typeof t)return String(t);i=t.toExponential(15);var u=i.indexOf("e");if(u>0){var s=i.indexOf("."),c=i.substr(0,u),l=i.substr(u+1),p=parseInt(l,10)-(c.length-s-1);i=c.replace(".","")+_.repeat("0",p),r>0&&(i=i+"."+_.repeat("0",r))}}return n>0&&(i+=_.repeat("0",n)),i}function D(e,r,i,n){if(void 0!==L&&e===L.format)return L;for(var a=[],o=t.preserveLiterals(e,a),u={format:e,hasLiterals:0!==a.length,hasE:!1,hasCommas:!1,hasDots:!1,hasPercent:!1,hasPermile:!1,precision:void 0,optionalPrecision:void 0,scale:void 0,partsPerScale:void 0},s=0,c=o.length;s<c;s++){var l=o.charAt(s);switch(l){case"e":case"E":u.hasE=!0;break;case",":u.hasCommas=!0;break;case".":u.hasDots=!0;break;case"%":u.hasPercent=!0;break;case"":u.hasPermile=!0}}var p=h(e);return r&&(u.precision=C(p.positive,u)),n&&(u.partsPerScale=V(p.positive,u)),i&&(u.scale=F(p.positive,u)),u}function C(e,t){return T(e,t),t.precision}function R(e,t){return T(e,t),t.optionalPrecision}function T(e,r){if(!(r.precision>-1)){var i=0,n=0;if(r.hasDots){r.hasLiterals&&(e=t.removeLiterals(e));var a=e.indexOf(".");if(a>-1){for(var o=e.length,u=a;u<o;u++){var l=e.charAt(u);if(l.match(p)&&++i,l===s?++n:n=0,l===c)break}if(i>19){var f=i-19;n=Math.max(0,n-f),i=19}}}r.precision=i,r.optionalPrecision=n}}function V(e,t){if(null!=t.partsPerScale)return t.partsPerScale;var r=1;return t.hasPercent&&e.indexOf("%")>-1&&(r=100*r),t.hasPermile&&e.indexOf("")>-1&&(r=1e3*r),t.partsPerScale=r,r}function F(e,t){if(t.scale>-1)return t.scale;var r=V(e,t);if(t.hasCommas){var i=e.indexOf(".");i===-1&&(i=e.length);for(var n=i-1;n>-1;n--){var a=e.charAt(n);if(","!==a)break;r/=1e3}}return t.scale=r,r}function P(e,t,r,i,n){var a=!!i,o=t.split(".",2);if(2===o.length){var u=o[0],s=o[1],c="";i&&(c=i.replace(Q,""),e=e.replace(c,""));var l=r["."],p=n?l:".",f=e.split(p,2),v=1===f.length?f[0]+c:f[0],h=2===f.length?f[1]+c:"";h=h.replace(I,"");var m=M(v,u,r,a),y=A(h,s,a);return y.fmtOnly||""===y.value?m+y.value:m+l+y.value}return M(e,t,r,a)}function M(e,t,r,i){var n=t.indexOf(","),a=n>-1&&n<Math.max(t.lastIndexOf("0"),t.lastIndexOf("#"))&&r[","],o=0,c=0,l=r.groupSizes||[3],p=l[0],f=r[","],v="",h=e.charAt(0);"+"!==h&&"-"!==h||(v=r[h],e=e.substr(1));for(var m="0"===e,y="",d="",g=e.length-1,x=!0,S=t.length-1;S>-1;S--){var b=t.charAt(S);switch(b){case u:case s:x=!1,""!==d&&(y=d+y,d=""),i||((g>-1||b===u)&&a&&(o===p?(y=f+y,c++,c<l.length&&(p=l[c]),o=1):o++),g>-1?(m&&b===s||(y=e.charAt(g)+y),g--):b!==s&&(y=b+y));break;case",":break;default:d=b+d}}if(!i){if(g>-1&&""!==y)if(a)for(;g>-1;)o===p?(y=f+y,c++,c<l.length&&(p=l[c]),o=1):o++,y=e.charAt(g)+y,g--;else y=e.substr(0,g+1)+y;return v+d+y}return x?v+d+y:v+d+e+y}function A(e,t,r){var i=0,n=t.length,a=e.length;if(r){var o=t.charAt(n-1);return o.match(p)?{value:e,fmtOnly:""===e}:{value:e+o,fmtOnly:""===e}}for(var c="",l=!0,f=0;f<n;f++){var v=t.charAt(f);if(i<a)switch(v){case u:case s:c+=e[i++],l=!1;break;default:c+=v}else v!==s&&(c+=v,l=l&&v!==u)}return{value:c,fmtOnly:l}}function N(e,t){var r=t["+"],i=t["-"],n=t["."],a=t[","];if("+"===r&&"-"===i&&"."===n&&","===a)return e;for(var o=e.length,u="",s=0;s<o;s++){var c=e.charAt(s);switch(c){case"+":u+=r;break;case"-":u+=i;break;case".":u+=n;break;case",":u+=a;break;default:u+=c}}return u}var Q=/\{.+\}/,O=/e[+-]*[0#]+/i,q=/^[a-z]\d{0,2}$/i,I=/0+$/,U=/\.([0#]*)/g,j=/[0#,\.]+[0,#]*/g,B=/([0#])(?=[^0#]*$)/,k=".";r.NumberFormatComponentsDelimeter=";",r.getNumericFormat=a,r.addDecimalsToFormat=l,r.hasFormatComponents=v,r.getComponents=h;var L;r.canFormat=m,r.isStandardFormat=y,r.getFormatForWholeNumberAverage=d,r.format=g,r.formatWithCustomOverride=x,r.getCustomFormatMetadata=D})(v=e.NumberFormat||(e.NumberFormat={}));var h=(function(){function t(e){var t=e.calendar,r=t.patterns,i=t.months.namesAbbr,n=i&&i[0],a=r.Y,o=r.M,u=r.f,s=r.T,c=r.t,l=u.indexOf(",")>-1?", ":" ",p=0===a.indexOf("yyyy'")&&a.length>6&&"'"===a[6];this.YearPattern=p?a.substr(0,7):"yyyy";var f=u.indexOf("yy"),v=u.indexOf("MMMM");this.MonthPattern=n&&v>-1?f>v?"MMM yyyy":"yyyy MMM":a,this.DayPattern=n?o.replace("MMMM","MMM"):o;var h=u.indexOf("mm"),m=u.indexOf("tt"),y=m>-1?c.replace(":mm ",""):c;switch(this.HourPattern=f<h?this.DayPattern+l+y:y+l+this.DayPattern,this.MinutePattern=c,this.SecondPattern=s,this.MillisecondPattern=s.replace("ss","ss.fff"),e.name){case"fi-FI":this.DayPattern=this.DayPattern.replace("'ta'",""),this.HourPattern=this.HourPattern.replace("'ta'","")}}return t.prototype.getFormatString=function(t){switch(t){case e.DateTimeUnit.Year:return this.YearPattern;case e.DateTimeUnit.Month:return this.MonthPattern;case e.DateTimeUnit.Week:case e.DateTimeUnit.Day:return this.DayPattern;case e.DateTimeUnit.Hour:return this.HourPattern;case e.DateTimeUnit.Minute:return this.MinutePattern;case e.DateTimeUnit.Second:return this.SecondPattern;case e.DateTimeUnit.Millisecond:return this.MillisecondPattern}},t})();e.formattingService=new f})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function r(e){return JSON.stringify(e.accept(n.instance))}function i(e){for(var r="[",i=0,n=e.length;i<n;i++)i>0&&(r+=","),r+=t.serialize(e[i]);return r+"]"}t.serialize=r,t.serializeArray=i;var n=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.visitColumnRef=function(e){return{col:{s:e.source.accept(this),r:e.ref}}},t.prototype.visitMeasureRef=function(e){return{measure:{s:e.source.accept(this),r:e.ref}}},t.prototype.visitAggr=function(e){return{agg:{a:e.arg.accept(this),f:e.func}}},t.prototype.visitEntity=function(e){return{e:e.entity}},t.prototype.visitHierarchyLevel=function(e){return{h:e.arg.accept(this),l:e.level}},t.prototype.visitHierarchy=function(e){return{e:e.arg.accept(this),h:e.hierarchy}},t.prototype.visitPropertyVariationSource=function(e){return{e:e.arg.accept(this),n:e.name,p:e.property}},t.prototype.visitAnd=function(e){return{and:{l:e.left.accept(this),r:e.right.accept(this)}}},t.prototype.visitCompare=function(e){return{comp:{k:e.comparison,l:e.left.accept(this),r:e.right.accept(this)}}},t.prototype.visitConstant=function(e){return{const:{t:e.type.primitiveType,v:e.value}}},t.prototype.visitArithmetic=function(e){return{arithmetic:{o:e.operator,l:e.left.accept(this),r:e.right.accept(this)}}},t.prototype.visitScopedEval=function(e){return{scopedEval:{e:e.expression.accept(this),s:i(e.scope)}}},t.prototype.visitWithRef=function(e){return{withRef:{e:e.expressionName}}},t.prototype.visitTransformTableRef=function(e){return{transformTableRef:{source:e.source}}},t.prototype.visitTransformOutputRoleRef=function(e){var t={transformOutputRoleRef:{role:e.role}};return e.transform&&(t.transformOutputRoleRef.transform=e.transform),t},t.prototype.visitFloor=function(e){var t={floor:{a:e.arg.accept(this),s:e.size}};return null!=e.timeUnit&&(t.floor.timeunit=e.timeUnit),t},t.prototype.visitRoleRef=function(e){return{roleRef:{role:e.role}}},t.prototype.visitDefault=function(e){},t})(e.DefaultSQExprVisitor);n.instance=new n})(t=e.SQExprShortSerializer||(e.SQExprShortSerializer={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r=e.data.Selector,i=(function(){function t(e,t,i){this.selector=e,this.highlight=t,this.key=JSON.stringify({selector:e?r.getKey(e):null,highlight:t}),this.keyWithoutHighlight=JSON.stringify({selector:e?r.getKey(e):null}),this.selectorsByColumn=i}return t.prototype.equals=function(e){return this.selector&&e.selector?this.highlight===e.highlight&&r.equals(this.selector,e.selector):!this.selector==!e.selector&&this.highlight===e.highlight},t.isEqual=function(e,t){return e===t||null!=e&&null!=t&&e.equals(t)},t.prototype.includes=function(t,r){void 0===r&&(r=!1);var i=this.selector,n=t.selector;if(!i||!n)return!1;var a=i.data,o=n.data;if(!a&&i.metadata&&i.metadata!==n.metadata)return!1;if(!r&&this.highlight!==t.highlight)return!1;if(a){if(!o)return!1;if(a.length>0)for(var u=0,s=a.length;u<s;u++){var c=a[u];if(!o.some((function(t){return e.DataViewScopeIdentity.equals(c,t)})))return!1}}return!0},t.prototype.getKey=function(){return this.key},t.prototype.getKeyWithoutHighlight=function(){return this.keyWithoutHighlight},t.prototype.hasIdentity=function(){return this.selector&&!!this.selector.data},t.prototype.getSelector=function(){return this.selector},t.prototype.getSelectorsByColumn=function(){return this.selectorsByColumn},t.createNull=function(e){return void 0===e&&(e=!1),new t(null,e)},t.createWithId=function(e,r){void 0===r&&(r=!1);var i=null;return e&&(i={data:[e]}),new t(i,r)},t.createWithMeasure=function(e,r){void 0===r&&(r=!1);var i={metadata:e},n=new t(i,r);return n.selectorsByColumn={metadata:[e]},n},t.createWithIdAndMeasure=function(e,r,i){void 0===i&&(i=!1);var n={};e&&(n.data=[e]),r&&(n.metadata=r),e||r||(n=null);var a=new t(n,i);return a},t.createWithIdAndMeasureAndCategory=function(e,t,r,i){void 0===i&&(i=!1);var n=this.createWithIdAndMeasure(e,t,i);return n.selector&&(n.selectorsByColumn={},e&&r&&(n.selectorsByColumn.dataMap={},n.selectorsByColumn.dataMap[r]=[e]),t&&(n.selectorsByColumn.metadata=[t])),n},t.createWithIds=function(e,r,i){void 0===i&&(i=!1);var n=null,a=t.idArray(e,r);return a&&(n={data:a}),new t(n,i)},t.createWithIdsAndMeasure=function(e,r,i,n){void 0===n&&(n=!1);var a={},o=t.idArray(e,r);return o&&(a.data=o),i&&(a.metadata=i),e||r||i||(a=null),new t(a,n)},t.createWithSelectorForColumnAndMeasure=function(e,i,n){void 0===n&&(n=!1);var a={};_.isEmpty(e)||(a.dataMap=e),i&&(a.metadata=[i]),e||i||(a=null);var o=r.convertSelectorsByColumnToSelector(a);return new t(o,n,a)},t.createWithSelectorForColumnAndMeasures=function(e,i,n){void 0===n&&(n=!1);var a={};_.isEmpty(e)||(a.dataMap=e),_.isEmpty(i)||(a.metadata=i),!e&&_.isEmpty(i)&&(a=null);var o=r.convertSelectorsByColumnToSelector(a);return new t(o,n,a)},t.createWithHighlight=function(e){var r=new t(e.getSelector(),(!0));return r.selectorsByColumn=e.selectorsByColumn,r},t.idArray=function(e,t){if(e||t){var r=[];return e&&r.push(e),t&&t!==e&&r.push(t),r}},t})();t.SelectionId=i;var n=(function(){function e(){}return e.builder=function(){return new e},e.prototype.withColumnIdentity=function(e,t){return this.addItemToDataMap(t,e),this},e.prototype.withCategoryIdentity=function(e,t){return e&&e.source&&e.source.queryName&&this.addItemToDataMap(e.source.queryName,t),this},e.prototype.withCategory=function(e,t){return e&&e.source&&e.source.queryName&&e.identity&&this.addItemToDataMap(e.source.queryName,e.identity[t]),this},e.prototype.withSeries=function(e,t){return e&&e.source&&e.source.queryName&&t&&this.addItemToDataMap(e.source.queryName,t.identity),this},e.prototype.withMeasure=function(e){return this.ensureMeasures(),null!=e&&this.measures.push(e),this},e.prototype.withMeasures=function(e){this.ensureMeasures();for(var t=0,r=e;t<r.length;t++){var i=r[t];this.measures.push(i)}return this},e.prototype.createSelectionId=function(){return i.createWithSelectorForColumnAndMeasures(this.dataMap,this.measures)},e.prototype.ensureMeasures=function(){void 0===this.measures&&(this.measures=[])},e.prototype.addItemToDataMap=function(e,t){if(t){this.dataMap||(this.dataMap={});var r=this.dataMap,i=r[e];return null==i?void(r[e]=[t]):void i.push(t)}},e})();t.SelectionIdBuilder=n})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function r(e,t){if(e){_.isEmpty(t)&&(t=e.defaultPresetName);var r=e.presets[t];return r||(r=e.presets[e.defaultPresetName]),r}}function i(t){var r=[];if(t){var i=t.presets;if(i)for(var n in i){var a=i[n];r.push({value:a.name,displayName:a.displayName})}}return e.createEnumType(r)}t.getStylePreset=r,t.getStylePresetsEnum=i})(t=e.VisualStylePresetHelpers||(e.VisualStylePresetHelpers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=jsCommon.ArrayExtensions,r=(function(){function e(e,t){this.basePickerColors=[{value:"#FFFFFF"},{value:"#000000"}],this.colors=e||n.getDefaultTheme(),this.sentimentColors=t||n.defaultSentimentColors,this.scales={},(r=this.basePickerColors).push.apply(r,_.take(this.colors,8));var r}return e.prototype.getColorScaleByKey=function(e){var t=this.scales[e];return void 0===t&&(t=this.createScale(),this.scales[e]=t),t},e.prototype.getNewColorScale=function(){return this.createScale()},e.prototype.getColorByIndex=function(e){return this.colors[e]},e.prototype.getSentimentColors=function(){return this.sentimentColors},e.prototype.getBasePickerColors=function(){return this.basePickerColors},e.prototype.getAllColors=function(){return this.colors},e.prototype.createScale=function(){return i.createFromColors(this.colors)},e})();e.DataColorPalette=r;var i=(function(){function e(e){this.scale=e}return e.prototype.getColor=function(e){return this.scale(e)},e.prototype.clearAndRotateScale=function(){var e=this.scale.domain().length,r=t.rotate(this.scale.range(),e);this.scale=d3.scale.ordinal().range(r)},e.prototype.clone=function(){return new e(this.scale.copy())},e.prototype.getDomain=function(){return this.scale.domain()},e.createFromColors=function(t){return new e(d3.scale.ordinal().range(t))},e})();e.D3ColorScale=i;var n=(function(){function e(){}return e.getDefaultTheme=function(){if(!e.defaultTheme){e.defaultTheme=[];for(var t=e.defaultBaseColors,r=0;r<e.colorSectorCount;++r)for(var i=0,n=t.length;i<n;++i)e.defaultTheme.push({value:jsCommon.Color.rotate(t[i].value,r/e.colorSectorCount)})}return e.defaultTheme},e})();n.colorSectorCount=12,n.defaultBaseColors=[{value:"#01B8AA"},{value:"#374649"},{value:"#FD625E"},{value:"#F2C80F"},{value:"#5F6B6D"},{value:"#8AD4EB"},{value:"#FE9666"},{value:"#A66999"},{value:"#3599B8"},{value:"#DFBFBF"},{value:"#4AC5BB"},{value:"#5F6B6D"},{value:"#FB8281"},{value:"#F4D25A"},{value:"#7F898A"},{value:"#A4DDEE"},{value:"#FDAB89"},{value:"#B687AC"},{value:"#28738A"},{value:"#A78F8F"},{value:"#168980"},{value:"#293537"},{value:"#BB4A4A"},{value:"#B59525"},{value:"#475052"},{value:"#6A9FB0"},{value:"#BD7150"},{value:"#7B4F71"},{value:"#1B4D5C"},{value:"#706060"},{value:"#0F5C55"},{value:"#1C2325"},{value:"#7D3231"},{value:"#796419"},{value:"#303637"},{value:"#476A75"},{value:"#7E4B36"},{value:"#52354C"},{value:"#0D262E"},{value:"#544848"}],n.defaultSentimentColors=[{value:"#C0433A"},{value:"#E8D62E"},{value:"#79C75B"}],e.ThemeManager=n})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function r(){return new o}function i(t){return t.strategy===e.NullStrategy.asZero}function n(t){switch(t.strategy){case e.NullStrategy.noColor:return;case e.NullStrategy.specificColor:return t.color;case e.NullStrategy.asZero:}}var a=jsCommon.Color;t.createColorAllocatorFactory=r;var o=(function(){function e(){}return e.prototype.linearGradient2=function(e){return new u(e)},e.prototype.linearGradient3=function(e,t){return t?new c(e):new s(e)},e})(),u=(function(){function e(e){this.options=e;var t=e.min,r=e.max;this.scale=a.createLinearColorScale([t.value,r.value],[t.color,r.color],!0)}return e.prototype.color=function(e){var t=this.options.nullColoringStrategy;if(null===e&&t){if(!i(t))return n(t);e=0}return this.scale(e)},e})(),s=(function(){function e(e){this.options=e;var t=e.min,r=e.mid,i=e.max;this.scale=a.createLinearColorScale([t.value,r.value,i.value],[t.color,r.color,i.color],!0)}return e.prototype.color=function(e){var t=this.options.nullColoringStrategy;if(null===e&&t){if(!i(t))return n(t);e=0}return this.scale(e)},e})(),c=(function(){function e(e){this.options=e;var t=e.min,r=e.mid,i=e.max;this.scale1=a.createLinearColorScale([t.value,r.value],[t.color,r.color],!0),this.scale2=a.createLinearColorScale([r.value,i.value],[r.color,i.color],!0)}return e.prototype.color=function(e){var t=this.options.nullColoringStrategy;if(null===e&&t){if(!i(t))return n(t);e=0}return e<=this.options.mid.value?this.scale1(e):this.scale2(e)},e})()})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));;"use strict";var __extends=this&&this.__extends||function(e,t){function a(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},__assign=this&&this.__assign||Object.assign||function(e){for(var t,a=1,i=arguments.length;a<i;a++){t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},powerbi;!(function(e){var t;!(function(t){var a=e.data.SQExprShortSerializer,i=(function(){function t(e,t,a){this.colors=e,this.fillProp=t,this.defaultDataPointColor=a,this.defaultColorScale=e.getNewColorScale()}return t.prototype.getColorForSeriesValue=function(t,a,i){return this.fillProp&&e.DataViewObjects.getFillColor(t,this.fillProp)||this.defaultDataPointColor||this.getColorScaleForSeries(a).getColor(i).value},t.prototype.getColorScaleForSeries=function(e){return this.colors.getColorScaleByKey(a.serializeArray(e||[]))},t.prototype.getColorForMeasure=function(t,a){var i=this.defaultColorScale.getColor(a).value;return this.fillProp&&e.DataViewObjects.getFillColor(t,this.fillProp)||this.defaultDataPointColor||i},t.normalizeSelector=function(e,t){return e&&(t||e.data)?{data:e.data}:e},t})();t.ColorHelper=i})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){var a;!(function(t){function a(e,t,a,i){return new r(e,t,a,i)}var i=e.visuals.ColorHelper;t.createColorReader=a;var r=(function(){function t(a,r,o,n){if(this.columnReader=a,this.objectReader=r,this.dataReader=o,n&&n.colorOptions){this.colorPalette=n.colorOptions.visualStyle.colorPalette.dataColors,this.valueRole=n.colorOptions.valueRole;var s=e.DataViewObjects.getFillColor(this.objectReader.getStaticObjects(),t.defaultFillProp);this.colorHelper=new i(this.colorPalette,t.fillProp,n.colorOptions.ignoreDefaultColor?void 0:s),this.colorReaderIsValid=!0}else this.colorReaderIsValid=!1}return t.prototype.createByCategory=function(e){if(this.colorReaderIsValid)return this.colorHelper.getColorForSeriesValue(this.objectReader.getCategoryDataObjects(e),this.columnReader.getCategoryColumnIdentityFields(),this.getCategoryValueForColor(e))},t.prototype.createBySeries=function(e,t){if(this.colorReaderIsValid){var a="";return this.valueRole&&(a=this.columnReader.getValueQueryName(this.valueRole,e)||""),this.columnReader.hasDynamicSeries()?this.colorHelper.getColorForSeriesValue(this.objectReader.getSeriesDataObjects(e),this.columnReader.getDynamicSeriesColumnIdentityFields(),this.dataReader.getSeriesName(e)):this.columnReader.hasStaticSeries()?this.colorHelper.getColorForMeasure(this.objectReader.getSeriesDataObjects(e),a):this.colorHelper.getColorForMeasure(null!=t?this.objectReader.getCategoryDataObjects(t):void 0,a)}},t.prototype.createByValue=function(e){if(this.colorReaderIsValid&&null!=this.valueRole)return this.colorHelper.getColorForMeasure(this.objectReader.getValueMetadataObjects(this.valueRole,e),this.columnReader.getValueQueryName(this.valueRole,e)||"")},t.prototype.getCategoryValueForColor=function(e){var t=this.columnReader.getAllCategoryColumns();if(t)return _.first(t).values[e]},t})();r.defaultFillProp={objectName:"dataPoint",propertyName:"defaultColor"},r.fillProp={objectName:"dataPoint",propertyName:"fill"}})(a=t.categorical||(t.categorical={}))})(a=t.dataviewReaders||(t.dataviewReaders={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){var a;!(function(t){function a(e,t){return new r(e,t)}var i=e.data.DataRoleHelper;t.createColumnReader=a;var r=(function(){function e(e,t){this.dataView=e;var a;e&&(a=e.categorical);var i;a&&(i=this.categories=a.categories),this.hasValidCategories=!_.isEmpty(i),t&&(this.staticSeriesRole=t.staticSeriesRole);var r;if(a&&(r=a.values),this.dataHasAnyValidValues=!1,null!=r){var o=e.categorical.values.grouped();if(o.length>0){this.grouped=o;var n={},s=o[0].values;this.dataHasAnyValidValues=!!o[0].identity||!_.isEmpty(s);for(var l=0,c=s.length;l<c;l++){var u=s[l].source.roles;for(var d in u)u[d]&&(n[d]||(n[d]=[]),n[d].push(l))}this.valueRoleIndexMapping=n}this.dataHasDynamicSeries=!!this.dataView.categorical.values.source}this.dataHasStaticSeries=!this.dataHasDynamicSeries&&this.getValueColumnCount(this.staticSeriesRole)>1}return e.prototype.hasCategories=function(){return this.hasValidCategories},e.prototype.hasCategoryWithRole=function(e){return i.getCategoryIndexOfRole(this.categories,e)!==-1},e.prototype.getCategoryCount=function(){return this.hasValidCategories?_.last(this.categories).values.length:0},e.prototype.hasCompositeCategories=function(){return!!this.hasValidCategories&&this.categories.length>1},e.prototype.getCategoryColumn=function(e){if(this.hasValidCategories){var t=this.categories,a=e?i.getCategoryIndexOfRole(t,e):0;return t[a]}},e.prototype.getCategoryMetadataColumn=function(e){var t=this.getCategoryColumn(e);if(t)return t.source},e.prototype.getCategoryColumnIdentityFields=function(e){var t=this.getCategoryColumn(e);return t?t.identityFields:void 0},e.prototype.getAllCategoryColumns=function(){return this.categories},e.prototype.hasValues=function(e){return!!this.valueRoleIndexMapping&&!_.isEmpty(this.valueRoleIndexMapping[e])},e.prototype.hasAnyValidValues=function(){return this.dataHasAnyValidValues},e.prototype.getValueColumnCount=function(e){return this.hasValues(e)?this.valueRoleIndexMapping[e].length:0},e.prototype.hasHighlights=function(){return!!(this.grouped&&this.grouped[0]&&this.grouped[0].values[0])&&!_.isEmpty(this.grouped[0].values[0].highlights)},e.prototype.getValueColumn=function(e,t){if(void 0===t&&(t=0),this.hasValues(e))return this.dataHasDynamicSeries?this.getValueColumnInternal(e,t,0):this.getValueColumnInternal(e,0,t)},e.prototype.getAllValueColumnsForRole=function(e,t){if(void 0===t&&(t=0),this.hasValues(e)){for(var a=this.valueRoleIndexMapping[e],i=a.length,r=[],o=0;o<i;o++)r.push(this.getValueColumnInternal(e,t,o));return r}},e.prototype.getValueColumnInternal=function(e,t,a){if(this.hasValues(e)){var i=this.valueRoleIndexMapping[e][a];return this.grouped[t].values[i]}},e.prototype.getValueMetadataColumn=function(e,t){void 0===t&&(t=0);var a=this.getValueColumn(e,t);if(a)return a.source},e.prototype.getAllValueMetadataColumnsForRole=function(e,t){if(void 0===t&&(t=0),this.hasValues(e))return _.map(this.getAllValueColumnsForRole(e,t),(function(e){return e.source}))},e.prototype.getValueQueryName=function(e,t){var a=this.getValueMetadataColumn(e,t);if(a)return a.queryName},e.prototype.getAllValueQueryNames=function(e,t){var a=this.getAllValueMetadataColumnsForRole(e,t);if(!_.isEmpty(a))return _.map(a,(function(e){return e.queryName}))},e.prototype.getAllValueRoles=function(){var e=_.keys(this.valueRoleIndexMapping);if(!_.isEmpty(e))return e},e.prototype.hasDynamicSeries=function(){return this.dataHasDynamicSeries},e.prototype.hasStaticSeries=function(){return this.dataHasStaticSeries},e.prototype.getSeriesCount=function(){if(!this.dataHasAnyValidValues)return 0;if(this.dataHasDynamicSeries)return this.grouped.length;if(this.dataHasStaticSeries){var e=this.valueRoleIndexMapping[this.staticSeriesRole];if(e)return e.length}return 1},e.prototype.getSeriesValueColumns=function(){var e=this.dataHasDynamicSeries;if(this.dataHasAnyValidValues&&e)return this.dataView.categorical.values},e.prototype.getSeriesMetadataColumn=function(){var e=this.getSeriesValueColumns();if(e)return e.source},e.prototype.getSeriesValueColumnGroup=function(e){var t=this.dataHasDynamicSeries;if(this.dataHasAnyValidValues&&t)return this.grouped[e]},e.prototype.getDynamicSeriesColumnIdentityFields=function(){var e=this.getSeriesValueColumns();return e?e.identityFields:void 0},e.prototype.getStaticObjects=function(){if(this.dataView&&this.dataView.metadata&&this.dataView.metadata.objects)return this.dataView.metadata.objects},e.prototype.getMetadataColumns=function(e){var t=[];return this.dataView&&this.dataView.metadata&&this.dataView.metadata.columns&&(t=_.filter(this.dataView.metadata.columns,(function(t){return null!=t.roles&&t.roles[e]===!0}))),_.isEmpty(t)?void 0:t},e})()})(a=t.categorical||(t.categorical={}))})(a=t.dataviewReaders||(t.dataviewReaders={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(e){function t(e,t){return new a(e,t)}e.createDataReader=t;var a=(function(){function e(e,t){this.columnReader=e,this.dataHasDynamicSeries=e.hasDynamicSeries(),this.dataHasStaticSeries=e.hasStaticSeries(),this.hasAnyValidValues=e.hasAnyValidValues(),t&&(this.staticSeriesRole=t.staticSeriesRole)}return e.prototype.hasCategories=function(){return this.columnReader.hasCategories()},e.prototype.hasCategoryWithRole=function(e){return this.columnReader.hasCategoryWithRole(e)},e.prototype.hasCompositeCategories=function(){return this.columnReader.hasCompositeCategories()},e.prototype.getCategoryCount=function(){return this.columnReader.getCategoryCount()},e.prototype.getCategoryValue=function(e,t){var a=this.columnReader.getCategoryColumn(e);return a?a.values[t]:void 0},e.prototype.getCategoryMetadataColumn=function(e){var t=this.columnReader.getCategoryColumn(e);return t?t.source:void 0},e.prototype.getCategoryDisplayName=function(e){var t=this.columnReader.getCategoryColumn(e);if(t&&t.source)return t.source.displayName},e.prototype.getCategoryType=function(e){var t=this.columnReader.getCategoryMetadataColumn(e);if(t)return t.type},e.prototype.hasValues=function(e){return this.columnReader.hasValues(e)},e.prototype.hasHighlights=function(){return this.columnReader.hasHighlights()},e.prototype.getValue=function(e,t,a){if(void 0===a&&(a=0),this.hasValues(e)){var i=this.columnReader.getValueColumn(e,a);if(i)return i.values[t]}},e.prototype.getHighlight=function(e,t,a){if(void 0===a&&(a=0),this.hasValues(e)&&this.hasHighlights()){var i=this.columnReader.getValueColumn(e,a);if(i)return i.highlights[t]}},e.prototype.getValueType=function(e,t){var a=this.columnReader.getValueMetadataColumn(e,t);if(a)return a.type},e.prototype.getAllValuesForRole=function(e,t,a){if(void 0===a&&(a=0),this.hasValues(e)){this.dataHasDynamicSeries||(a=0);var i=this.columnReader.getAllValueColumnsForRole(e,a);return _.map(i,(function(e){return e.values[t]}))}},e.prototype.getAllHighlightsForRole=function(e,t,a){if(void 0===a&&(a=0),this.hasValues(e)&&this.hasHighlights()){this.dataHasDynamicSeries||(a=0);var i=this.columnReader.getAllValueColumnsForRole(e,a);return _.map(i,(function(e){return e.highlights[t]}))}},e.prototype.getAllValueTypesForRole=function(e,t){var a=this.columnReader.getAllValueMetadataColumnsForRole(e,t);if(a)return _.map(a,(function(e){return e.type}))},e.prototype.getFirstNonNullValueForCategory=function(e,t){if(this.hasValues(e)){var a=this.getSeriesCount();if(!this.dataHasDynamicSeries)return this.getValue(e,t);for(var i=0;i<a;i++){var r=this.getValue(e,t,i);if(null!=r)return r}}},e.prototype.getValueDisplayName=function(e){if(this.hasValues(e)){var t=this.columnReader.getValueMetadataColumn(e);if(t)return t.displayName}},e.prototype.getAllValueDisplayNamesForRole=function(e){if(this.hasValues(e)){var t=this.columnReader.getAllValueMetadataColumnsForRole(e);if(!_.isEmpty(t))return _.map(t,(function(e){return e.displayName}))}},e.prototype.getValueQueryName=function(e,t){return this.columnReader.getValueQueryName(e,t)},e.prototype.hasSeries=function(){return this.dataHasDynamicSeries||this.dataHasStaticSeries},e.prototype.getSeriesCount=function(){return this.columnReader.getSeriesCount()},e.prototype.getSeriesName=function(e){if(this.hasAnyValidValues&&this.hasSeries()){if(this.dataHasDynamicSeries)return this.columnReader.getSeriesValueColumnGroup(e).name;if(this.dataHasStaticSeries&&this.hasValues(this.staticSeriesRole)){var t=this.columnReader.getValueMetadataColumn(this.staticSeriesRole,e);if(t)return t.displayName}}},e.prototype.getSeriesDisplayName=function(){if(this.hasAnyValidValues&&this.dataHasDynamicSeries)return this.columnReader.getSeriesValueColumns().source.displayName},e.prototype.getSeriesType=function(){var e=this.columnReader.getSeriesMetadataColumn();if(e)return e.type},e})()})(t=e.categorical||(e.categorical={}))})(t=e.dataviewReaders||(e.dataviewReaders={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(t,a){var i=e.dataviewReaders.categorical.createColumnReader(t,a),r=e.dataviewReaders.categorical.createDataReader(i,a),o=e.dataviewReaders.categorical.createObjectReader(i,a);return{data:r,identities:e.dataviewReaders.categorical.createIdentityReader(i,a),objects:o,colors:e.dataviewReaders.categorical.createColorReader(i,o,r,a)}}function a(t,a){var i=e.dataviewReaders.categorical.createColumnReader(t,a),r=e.dataviewReaders.categorical.createDataReader(i,a),o=e.dataviewReaders.categorical.createObjectReader(i,a);return{data:r,identities:e.dataviewReaders.categorical.createIdentityReader(i,a),objects:o,colors:e.dataviewReaders.categorical.createColorReader(i,o,r,a),columns:i}}e.createDataViewCategoricalReader=t,e.createDataViewCategoricalReaderAdvanced=a})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){var a;!(function(t){function a(e,t){return new i(e,t)}t.createIdentityReader=a;var i=(function(){function t(e,t){this.columnReader=e,this.dataHasDynamicSeries=e.hasDynamicSeries(),this.dataHasStaticSeries=e.hasStaticSeries(),this.hasAnyValidValues=e.hasAnyValidValues(),this.valueRoles=e.getAllValueRoles(),t&&(this.staticSeriesRole=t.staticSeriesRole)}return t.prototype.createForCategory=function(t,a){return(new e.visuals.SelectionIdBuilder).withCategory(this.columnReader.getCategoryColumn(),t).withMeasures(this.mapRolesToValueMetadata(a)).createSelectionId()},t.prototype.createForDataPoint=function(t,a,i){this.dataHasDynamicSeries||this.dataHasStaticSeries;var r=(new e.visuals.SelectionIdBuilder).withCategory(this.columnReader.getCategoryColumn(),t);return null!=a&&this.dataHasDynamicSeries&&r.withSeries(this.columnReader.getSeriesValueColumns(),this.columnReader.getSeriesValueColumnGroup(a)),r.withMeasures(this.mapRolesToValueMetadata(i,a)),r.createSelectionId()},t.prototype.createForSeries=function(t,a){var i=new e.visuals.SelectionIdBuilder;return this.dataHasDynamicSeries&&i.withSeries(this.columnReader.getSeriesValueColumns(),this.columnReader.getSeriesValueColumnGroup(t)),i.withMeasures(this.mapRolesToValueMetadata(a,t)),i.createSelectionId()},t.prototype.createForValue=function(t,a){return(new e.visuals.SelectionIdBuilder).withMeasures(this.mapRolesToValueMetadata(a,t)).createSelectionId()},t.prototype.mapRolesToValueMetadata=function(e,t){var a=[],i=0,r=this.staticSeriesRole,o=this.columnReader.hasStaticSeries();null==e&&(e=this.columnReader.getAllValueRoles()||[]),o&&a.push(this.columnReader.getValueQueryName(r,t));for(var n=e.length;i<n;i++){var s=e[i];s===r&&o||a.push.apply(a,this.columnReader.getAllValueQueryNames(s))}return a},t})()})(a=t.categorical||(t.categorical={}))})(a=t.dataviewReaders||(t.dataviewReaders={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){var a;!(function(t){function a(e,t){return new i(e,t)}t.createObjectReader=a;var i=(function(){function t(e,t){this.columnReader=e,this.staticObjects=e.getStaticObjects(),t&&(this.staticSeriesRole=t.staticSeriesRole,t.colorOptions&&(this.dataColors=t.colorOptions.visualStyle.colorPalette.dataColors))}return t.prototype.getStaticObjects=function(){return this.staticObjects},t.prototype.getCategoryMetadataObjects=function(e){var t=this.columnReader.getCategoryColumn(e);if(t)return t.source.objects},t.prototype.getCategoryDataObjects=function(e){var t=this.columnReader.getCategoryColumn();if(t&&t.objects)return t.objects[e]},t.prototype.getValueMetadataObjects=function(e,t){var a=this.columnReader.getValueMetadataColumn(e,t);if(a)return a.objects},t.prototype.getAllValueMetadataObjectsForRole=function(e){var t=this.columnReader.getAllValueMetadataColumnsForRole(e);return _.map(t,(function(e){return e.objects}))},t.prototype.getSeriesMetadataObjects=function(){if(this.columnReader.hasDynamicSeries()){var e=this.columnReader.getSeriesMetadataColumn();return e?e.objects:void 0}},t.prototype.getSeriesDataObjects=function(e){var t;if(t=this.columnReader.hasDynamicSeries()?this.columnReader.getSeriesValueColumnGroup(e):this.columnReader.getValueMetadataColumn(this.staticSeriesRole,e))return t.objects},t.prototype.getCategoryFormatString=function(a){return e.DataViewObjects.getValue(this.getCategoryMetadataObjects(a),t.StandardFormatStringProp)},t.prototype.getValueFormatString=function(a,i){if(!this.columnReader.hasStaticSeries||a!==this.staticSeriesRole||null!=i)return e.DataViewObjects.getValue(this.getValueMetadataObjects(a,i),t.StandardFormatStringProp)},t.prototype.getAllValueFormatStringsForRole=function(a){var i=this.getAllValueMetadataObjectsForRole(a);return _.map(i,(function(a){return e.DataViewObjects.getValue(a,t.StandardFormatStringProp)}))},t.prototype.getSeriesFormatString=function(a){if(!this.columnReader.hasStaticSeries())return this.columnReader.hasDynamicSeries()?e.DataViewObjects.getValue(this.getSeriesMetadataObjects(),t.StandardFormatStringProp):void 0},t.prototype.getDefaultColor=function(){if(this.dataColors)return e.DataViewObjects.getFillColor(this.staticObjects,t.StandardDefaultColorProp,this.dataColors.getColorByIndex(0).value)},t})();i.StandardFormatStringProp={objectName:"general",propertyName:"formatString"},i.StandardDefaultColorProp={objectName:"dataPoint",propertyName:"defaultColor"}})(a=t.categorical||(t.categorical={}))})(a=t.dataviewReaders||(t.dataviewReaders={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(r,o){if(void 0===o&&(o=!0),_.isEmpty(r))return r;if(r.indexOf(",")===-1)return r.indexOf(" ")===-1?r:o?i(r):a(r);var n=r.split(",");return n.map((function(e){return t(e.trim(),o)})).join(e.FamilyDelimiter)}function a(e){if(e)return e.replace(/['"]+/g,"")}function i(t){if(t)return e.FamilyQuote+t.replace(/['"]+/g,"")+e.FamilyQuote}e.FamilyQuote='"',e.FamilyDelimiter=", ";var r=(function(){function t(e){this.families=e}return Object.defineProperty(t.prototype,"family",{get:function(){return this.getFamily()},enumerable:!0,configurable:!0}),t.prototype.getFamily=function(){return this.families.join(e.FamilyDelimiter)},Object.defineProperty(t.prototype,"css",{get:function(){return this.getCSS()},enumerable:!0,configurable:!0}),t.prototype.getCSS=function(){return this.families?this.families.map((function(e){return e.indexOf(" ")>-1?"'"+e+"'":e})).join(", "):null},t})();e.FamilyInfo=r,e.Family={light:new r(["Segoe UI Light","wf_segoe-ui_light","helvetica","arial","sans-serif"]),semilight:new r(["Segoe UI Semilight","wf_segoe-ui_semilight","helvetica","arial","sans-serif"]),regular:new r(["Segoe UI","wf_segoe-ui_normal","helvetica","arial","sans-serif"]),semibold:new r(["Segoe UI Semibold","wf_segoe-ui_semibold","helvetica","arial","sans-serif"]),bold:new r(["Segoe UI Bold","wf_segoe-ui_bold","helvetica","arial","sans-serif"]),lightSecondary:new r(["wf_standard-font_light","helvetica","arial","sans-serif"]),regularSecondary:new r(["wf_standard-font","helvetica","arial","sans-serif"]),boldSecondary:new r(["wf_standard-font_bold","helvetica","arial","sans-serif"]),glyphs:new r(["PowerVisuals"])},e.normalizeFamily=t,e.unQuoteFamily=a,e.quoteFontFamily=i})(t=e.Font||(e.Font={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function a(e,t,a,i,r,o,s){return void 0===i&&(i=!1),void 0===r&&(r=n.Top),t?new c(e):new l(e,r,a,i,o,s)}var i,r=jsCommon.CssConstants.createClassAndSelector,o=jsCommon.PixelConverter;!(function(e){e[e.Box=0]="Box",e[e.Circle=1]="Circle",e[e.Line=2]="Line"})(i=t.LegendIcon||(t.LegendIcon={}));var n;!(function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom",e[e.Right=2]="Right",e[e.Left=3]="Left",e[e.None=4]="None",e[e.TopCenter=5]="TopCenter",e[e.BottomCenter=6]="BottomCenter",e[e.RightCenter=7]="RightCenter",e[e.LeftCenter=8]="LeftCenter"})(n=t.LegendPosition||(t.LegendPosition={})),t.legendProps={show:"show",position:"position",titleText:"titleText",showTitle:"showTitle",labelColor:"labelColor",fontSize:"fontSize"},t.legendPropIdentifiers={show:{objectName:"legend",propertyName:"show"},position:{objectName:"legend",propertyName:"position"},showTitle:{objectName:"legend",propertyName:"showTitle"},titleText:{objectName:"legend",propertyName:"titleText"},labelColor:{objectName:"legend",propertyName:"labelColor"},fontSize:{objectName:"legend",propertyName:"fontSize"},fontFamily:{objectName:"legend",propertyName:"fontFamily"}},t.createLegend=a;var s;!(function(a){function r(e){switch(e){case n.Left:case n.LeftCenter:return!0;default:return!1}}function o(e){switch(e){case n.Top:case n.TopCenter:return!0;default:return!1}}function s(e){switch(e){case n.Bottom:case n.BottomCenter:return!0;default:return!1}}function l(e){switch(e){case n.Right:case n.RightCenter:return!0;default:return!1}}function c(e){switch(e){case n.BottomCenter:case n.LeftCenter:case n.RightCenter:case n.TopCenter:return!0;default:return!1}}function d(e){return a.isTop(e)||a.isBottom(e)}function p(e){return a.isLeft(e)||a.isRight(e)}function h(e,t){var i=t.getMargins(),r=t.getOrientation();e.style({"margin-left":a.isLeft(r)?i.width+"px":null,"margin-top":a.isTop(r)?i.height+"px":null})}function g(){return t.FontProperties.create({family:a.DefaultFontFamily,size:a.DefaultFontSize,color:a.DefaultLabelColor})}function m(){return{show:!0,title:"",dataPoints:[],fontProperties:e.Prototype.inherit(a.getDefaultFontProperties()),grouped:!1,showTitle:!0,position:n.Top}}function y(r){var o=e.data.createDataViewCategoricalReaderAdvanced(r.dataView,{staticSeriesRole:r.staticSeriesRole,colorOptions:{valueRole:r.staticSeriesRole,visualStyle:r.style,ignoreDefaultColor:r.ignoreDefaultColor}});if(!o.data.hasSeries())return r.allowLegendWithNoSeries?a.buildSeriesLegendDataForWithNoSeries(o,r):a.getDefaultLegendData();for(var n=[],s=o.columns.hasDynamicSeries(),l=0,c=o.data.getSeriesCount();l<c;l++){var d=o.data.getSeriesName(l),p=t.valueFormatter.format(d,o.objects.getSeriesFormatString(l)),h=o.colors.createBySeries(l),g=o.identities.createForSeries(l);n.push({color:h,label:p,icon:i.Circle,identity:g,selected:!1})}var m=u.create(o.objects.getStaticObjects(),n,r.showByDefault,o.data.getSeriesDisplayName()||"",s);return m}function f(e,a){var r=e.data.getValueDisplayName(a.staticSeriesRole),o=t.valueFormatter.format(r,e.objects.getValueFormatString(a.staticSeriesRole,0)),n=e.colors.createByValue(0),s=e.identities.createForValue(0),l=[{color:n,label:o,icon:i.Circle,identity:s,selected:!1}],c=u.create(e.objects.getStaticObjects(),l,a.showByDefault,"");return c}function v(a){var r,o=e.data.createDataViewCategoricalReader(a.dataView,{colorOptions:{valueRole:a.valueRole,visualStyle:a.style}}),n=[],s=a.categoryRole;if(o.data.hasCategories()){r=o.data.getCategoryDisplayName(s);for(var l=0,c=o.data.getCategoryCount();l<c;l++){var d=o.data.getCategoryValue(s,l),p=t.valueFormatter.format(d,o.objects.getCategoryFormatString(s)),h=o.colors.createByCategory(l),g=o.identities.createForCategory(l);n.push({color:h,label:p,icon:i.Circle,identity:g,selected:!1})}}var m=u.create(o.objects.getStaticObjects(),n,a.showByDefault,r);return m}function b(e,r,o,n){var s=e.matrix,l=[];if(_.isEmpty(s.rows.levels))return a.getDefaultLegendData();var c=s.rows.levels[0].sources[0],d=s.rows.root.childIdentityFields,p=s.rows.root.children;if(!p)return a.getDefaultLegendData();for(var h=0,g=p.length;h<g;h++){var m=p[h],y=m.value,f=t.converterHelper.formatFromMetadataColumn(y,c,o),v=r.getColorForSeriesValue(m.objects,d,y),b=new t.SelectionIdBuilder,C=b.withColumnIdentity(m.identity,c.queryName).createSelectionId();l.push({color:v,label:f,icon:i.Circle,identity:C,selected:!1})}var S=u.create(e.metadata.objects,l,n,c.displayName);return S}function C(e,t){for(var a=[],i=!1,r=e[0],o=function(t,r){var o=e[t];_.all(o.dataPoints,(function(e){return e.layerNumber=t})),a.push.apply(a,o.dataPoints),o.grouped&&(i=!0)},n=0,s=e.length;n<s;n++)o(n,s);return{dataPoints:a,show:r.show,position:r.position,showTitle:r.showTitle,title:r.title,grouped:i,fontProperties:r.fontProperties}}function S(e){var t=e.legendData,a={selector:null,properties:{show:t.show,position:n[t.position],showTitle:t.showTitle,titleText:t.title,labelColor:t.fontProperties.color,fontSize:t.fontProperties.sizePt},objectName:e.objectName||"legend"};return e.customFontFamily&&(a.properties.fontFamily=t.fontProperties.family),e.enumeration.pushInstance(a),e.enumeration.complete()}function x(i){var r=e.Prototype.inherit(i);return i.family===a.DefaultFontFamily?r.family=t.Font.Family.semibold.css:r.weight="bold",r}a.isLeft=r,a.isTop=o,a.isBottom=s,a.isRight=l,a.isCentered=c,a.isTopOrBottom=d,a.isLeftOrRight=p,a.positionChartArea=h,a.DefaultFontFamily=t.Font.Family.regular.css,a.DefaultFontSize={pt:8},a.DefaultLabelColor="#666666",a.DefaultPositionKey="Top",a.getDefaultFontProperties=g,a.getDefaultLegendData=m,a.buildSeriesLegendData=y,a.buildSeriesLegendDataForWithNoSeries=f,a.buildCategoryLegendData=v,a.buildFromFirstMatrixRowLevel=b,a.mergeLegendData=C,a.enumerate=S,a.getTitleFontProperties=x})(s=t.Legend||(t.Legend={}));var l=(function(){function a(e,a,i,r,o,n){this.element=e,this.interactivityService=i,this.isScrollable=r,this.legendSmallViewPortProperties=o,this.responsiveVisualEnabled=n,this.legendDataStartIndex=0,this.arrowPosWindow=1,this.lastCalculatedWidth=0,this.visibleLegendWidth=0,this.visibleLegendHeight=0,this.legendFontSizeMarginDifference=0,this.legendFontSizeMarginValue=0,this.svg=d3.select(e.get(0)).append("svg").style("position","absolute"),this.svg.style("display","inherit"),this.svg.classed("legend",!0),i&&(this.clearCatcher=t.appendClearCatcher(this.svg)),this.group=this.svg.append("g").attr("id","legendGroup"),this.changeOrientation(a),this.parentViewport={height:0,width:0},this.calculateViewport(),this.updateLayout()}return a.prototype.getLegendShowFlag=function(){return!this.data||null==this.data.show||this.data.show},a.prototype.updateLayout=function(){var e=this.viewport,t=this.orientation,a=this.getLegendShowFlag();this.svg.attr({height:e.height||(a?this.parentViewport.height:0),width:e.width||(a?this.parentViewport.width:0)});var i=t===n.Right||t===n.RightCenter,r=t===n.Bottom||t===n.BottomCenter;this.svg.style({"margin-left":i?this.parentViewport.width-e.width+"px":null,"margin-top":r?this.parentViewport.height-e.height+"px":null})},a.prototype.calculateViewport=function(){var e=this.getLegendShowFlag();if(!e)return void(this.viewport={height:0,width:0});switch(this.orientation){case n.Top:case n.Bottom:case n.TopCenter:case n.BottomCenter:var t=this.data&&this.data.fontProperties?this.data.fontProperties.sizePx:o.fromPointToPixel(s.DefaultFontSize.pt),i=a.TopLegendHeight+(t-s.DefaultFontSize.pt);return void(this.viewport={height:i,width:0});case n.Right:case n.Left:case n.RightCenter:case n.LeftCenter:var r=this.lastCalculatedWidth?this.lastCalculatedWidth:this.parentViewport.width*a.LegendMaxWidthFactor;return void(this.viewport={height:0,width:r})}},a.prototype.getMargins=function(){return this.viewport},a.prototype.isVisible=function(){return this.getLegendShowFlag()},a.prototype.changeOrientation=function(e){e?this.orientation=e:this.orientation=n.Top,this.svg.attr("orientation",e)},a.prototype.getOrientation=function(){return this.orientation},a.prototype.drawLegend=function(t,a){var i=e.Prototype.inherit(t);_.defaults(i,{fontProperties:s.getDefaultFontProperties()});for(var r=[],o=0,n=t.dataPoints;o<n.length;o++){var l=n[o];r.push(e.Prototype.inherit(l))}i.dataPoints=r,this.setTooltipToLegendItems(i),this.drawLegendInternal(i,a,!0)},a.prototype.drawLegendInternal=function(i,r,o){this.parentViewport=r;var l=i;(l.fontSize||l.labelColor)&&(i.fontProperties=t.FontProperties.create({color:l.labelColor||s.DefaultLabelColor,size:l.fontSize?{pt:l.fontSize}:s.DefaultFontSize,family:s.DefaultFontFamily})),i.fontProperties||(i.fontProperties=s.getDefaultFontProperties()),this.data=i;var c=this.applyViewportSettings(i);this.interactivityService&&this.interactivityService.applySelectionStateToData(i.dataPoints),0!==i.dataPoints.length&&i.position!==n.None||(this.data.show=!1),this.data.show===!1&&(i.dataPoints=[]),this.calculateViewport();var u=this.calculateLayout(i,o),d=u.title,p=d?[d]:[],h=this.interactivityService&&e.visuals.dataHasSelection(i.dataPoints),g=this.group,m=!1;if(this.responsiveVisualEnabled||this.legendSmallViewPortProperties&&(m=this.parentViewport.height<=this.legendSmallViewPortProperties.minHeightForTransform),s.isCentered(this.orientation)&&!m){var y=0;s.isTopOrBottom(this.orientation)?(y=Math.max(0,(this.parentViewport.width-this.visibleLegendWidth)/2),g.attr("transform",t.SVGUtil.translate(y,0))):(y=Math.max((this.parentViewport.height-this.visibleLegendHeight)/2),g.attr("transform",t.SVGUtil.translate(0,y)))}else g.attr("transform",null);var f=g.selectAll(a.LegendTitle.selector).data(p);f.enter().append("text").classed(a.LegendTitle.class,!0);var v=s.getTitleFontProperties(c);f.style(v.toSVGStyle()).text((function(e){return e.text})).attr({x:function(e){return e.x},y:function(e){return e.y}}).append("title").text(i.showTitle!==!1?i.title:null),f.exit().remove();var b=i.dataPoints.slice(this.legendDataStartIndex,this.legendDataStartIndex+u.numberOfItems),C=e.TextMeasurementService.estimateSvgTextHeight(c.toTextProperties())/a.LegendIconRadiusFactor;C=this.legendFontSizeMarginValue>a.DefaultTextMargin&&C>a.LegendIconRadius?C:a.LegendIconRadius;var S=g.selectAll(a.LegendItem.selector).data(b,(function(e){return e.identity.getKey()+(null!=e.layerNumber?e.layerNumber:"")})),x=S.enter().append("g").classed(a.LegendItem.class,!0);if(x.append("circle").classed(a.LegendIcon.class,!0),x.append("text").classed(a.LegendText.class,!0),x.append("title").text((function(e){return e.tooltip})),S.select(a.LegendIcon.selector).attr({cx:function(e,t){return e.glyphPosition.x},cy:function(e){return e.glyphPosition.y},r:C}).style({fill:function(e){return h&&!e.selected?t.LegendBehavior.dimmedLegendColor:e.color}}),S.select("title").text((function(e){return e.tooltip})),S.select(a.LegendText.selector).attr({x:function(e){return e.textPosition.x},y:function(e){return e.textPosition.y}}).text((function(e){return e.label})).style(c&&c.toSVGStyle()),this.interactivityService){var w=S.select(a.LegendIcon.selector),P={legendItems:S,legendIcons:w,clearCatcher:this.clearCatcher};this.interactivityService.bind(i.dataPoints,new t.LegendBehavior,P,{isLegend:!0})}S.exit().remove(),this.drawNavigationArrows(u.navigationArrows),this.updateLayout()},a.prototype.applyViewportSettings=function(t){var i=t.fontProperties;if(!this.responsiveVisualEnabled&&this.legendSmallViewPortProperties){if(this.parentViewport.width<=this.legendSmallViewPortProperties.maxWidthForSmallFont){var r=Math.min(i.sizePt,a.LegendSmallFontSmallViewportInPt),o=e.Prototype.inherit(i);return o.sizePt=r,o}if(this.parentViewport.width<=this.legendSmallViewPortProperties.maxWidthForMediumFont){var r=Math.min(i.sizePt,a.LegendMediumFontSmallViewportInPt),o=e.Prototype.inherit(i);return o.sizePt=r,o}}return i},a.prototype.normalizePosition=function(e){this.legendDataStartIndex>=e.length&&(this.legendDataStartIndex=e.length-1),this.legendDataStartIndex<0&&(this.legendDataStartIndex=0)},a.prototype.calculateTitleLayout=function(t){var i=0,r=!_.isEmpty(t);if(r){var o=s.isTopOrBottom(this.orientation),n=void 0;if(o){var l=this.legendFontSizeMarginValue>a.DefaultTextMargin?a.TextAndIconPadding+this.legendFontSizeMarginDifference:a.TextAndIconPadding,c=a.TextAndIconPadding+a.LegendIconRadius,u=a.LegendIconRadius+l+c;n=this.parentViewport.width*a.LegendMaxWidthFactor-u-a.LegendEdgeMariginWidth}else n=this.legendFontSizeMarginValue<a.DefaultTextMargin?a.MaxTitleLength:a.MaxTitleLength+a.DefaultMaxLegendFactor*this.legendFontSizeMarginDifference;
var d=this.data.fontProperties.toTextProperties(t),p=t;return i=e.TextMeasurementService.measureSvgTextWidth(d),i>n&&(p=e.TextMeasurementService.getTailoredTextOrDefault(d,n),d.text=p,i=e.TextMeasurementService.measureSvgTextWidth(d)),o?i+=a.TitlePadding:p=e.TextMeasurementService.getTailoredTextOrDefault(d,this.viewport.width),{x:0,y:0,text:p,width:i,height:e.TextMeasurementService.estimateSvgTextHeight(d)}}return null},a.prototype.calculateLayout=function(e,t){var i=e.dataPoints;if(0===e.dataPoints.length)return{numberOfItems:0,title:null,navigationArrows:[]};this.legendFontSizeMarginValue=this.data&&void 0!==this.data.fontProperties?this.data.fontProperties.sizePx:o.fromPointToPixel(s.DefaultFontSize.pt),this.legendFontSizeMarginDifference=this.legendFontSizeMarginValue-a.DefaultTextMargin,this.normalizePosition(i),this.legendDataStartIndex<i.length&&(i=i.slice(this.legendDataStartIndex));var r,n,l=this.calculateTitleLayout(e.showTitle!==!1?e.title:null);return s.isTopOrBottom(this.orientation)?(r=this.isScrollable?this.calculateHorizontalNavigationArrowsLayout(l):[],n=this.calculateHorizontalLayout(i,l,r)):(r=this.isScrollable?this.calculateVerticalNavigationArrowsLayout(l):[],n=this.calculateVerticalLayout(i,l,r,t)),{numberOfItems:n,title:l,navigationArrows:r}},a.prototype.updateNavigationArrowLayout=function(e,t,a){0===this.legendDataStartIndex&&e.shift();var i=this.arrowPosWindow;this.arrowPosWindow=a,e&&e.length>0&&this.arrowPosWindow===t&&(this.arrowPosWindow=i,e.length=e.length-1)},a.prototype.calculateHorizontalNavigationArrowsLayout=function(e){var i=a.LegendArrowHeight,r=a.LegendArrowWidth,o=this.viewport.height/2-i/2,n=[],s=e?e.x+e.width:0,l=t.SVGUtil.createArrow(r,i,180),c=t.SVGUtil.createArrow(r,i,0);return n.push({x:s,y:o,path:l.path,rotateTransform:l.transform,type:1}),n.push({x:this.parentViewport.width-r,y:o,path:c.path,rotateTransform:c.transform,type:0}),n},a.prototype.calculateVerticalNavigationArrowsLayout=function(e){var i=a.LegendArrowHeight,r=a.LegendArrowWidth,o=this.viewport.height/2,n=[],s=o+i/2,l=t.SVGUtil.createArrow(r,i,270),c=t.SVGUtil.createArrow(r,i,90),u=e?e.height:0;return n.push({x:s,y:r+u,path:l.path,rotateTransform:l.transform,type:1}),n.push({x:s,y:this.parentViewport.height-i,path:c.path,rotateTransform:c.transform,type:0}),n},a.calculateHorizontalLegendItemsWidths=function(t,i,r,o){var n=t.length,s=n>0?i/n|0:0,l=s-r;l<a.MaxTextLength&&(l=a.MaxTextLength,s=l+r),s>i&&(s=i,l=s-r);for(var c=0,u=[],d=0,p=t;d<p.length;d++){var h=p[d],g=o.toTextProperties(h.label),m=e.TextMeasurementService.measureSvgTextWidth(g),y=m+r,f=y>s,v=f?s:y;if(c+=v,c>=i){0===u.length?(u.push({dataPoint:h,textProperties:g,desiredWidth:y,desiredOverMaxWidth:!0,width:y}),c=i):c-=v;break}u.push({dataPoint:h,textProperties:g,desiredWidth:y,desiredOverMaxWidth:f,width:y})}var b=_.filter(u,(function(e){return e.desiredOverMaxWidth})),C=b.length;if(C>0)for(var S=i-c,x=0,w=b;x<w.length;x++){var P=w[x],D=S/C,T=s+D,V=void 0;P.desiredWidth<=T?(P.desiredOverMaxWidth=!1,V=P.desiredWidth-s):(P.width=T,V=T-s),S-=V,C--}return u},a.prototype.calculateHorizontalLayout=function(t,i,r){var o=4+a.LegendIconRadius,n=this.legendFontSizeMarginDifference>0,s=n?a.TextAndIconPadding+this.legendFontSizeMarginDifference:a.TextAndIconPadding,l=s/(a.LegendIconRadiusFactor/2)+o,c=0,u=2*a.LegendIconRadius+1.5*s,d=t.length,p=this.data.fontProperties.toTextProperties(),h=this.viewport.height/2,g=h+e.TextMeasurementService.estimateSvgTextHeight(p)/2-e.TextMeasurementService.estimateSvgTextBaselineDelta(p);i&&(c+=i.width,i.y=h+i.height/2-e.TextMeasurementService.estimateSvgTextBaselineDelta(this.data.fontProperties.toTextProperties(i.text))),this.legendDataStartIndex>0&&(c+=a.LegendArrowOffset);var m=t.length,y=this.parentViewport.width-c,f=a.calculateHorizontalLegendItemsWidths(t,y,u,this.data.fontProperties);d=f.length,d!==m&&(y-=a.LegendArrowOffset,f=a.calculateHorizontalLegendItemsWidths(t,y,u,this.data.fontProperties),d=f.length);for(var v=0,b=f;v<b.length;v++){var C=b[v],S=C.dataPoint;if(S.glyphPosition={x:c+a.LegendIconRadius+this.legendFontSizeMarginDifference/a.LegendIconRadiusFactor,y:this.viewport.height*a.LegendIconYRatio},S.textPosition={x:c+l,y:g},C.desiredOverMaxWidth){var x=C.width-u,w=e.TextMeasurementService.getTailoredTextOrDefault(C.textProperties,x);S.label=w}c+=C.width}return this.visibleLegendWidth=c,this.updateNavigationArrowLayout(r,m,d),d},a.prototype.calculateVerticalLayout=function(t,i,r,o){var n=this,s=this.legendFontSizeMarginDifference>0,l=s?this.legendFontSizeMarginDifference:0,c=20+l,u=15+l,d=4+l,p=c,h=a.TextAndIconPadding+a.LegendIconRadius+this.legendFontSizeMarginDifference/a.LegendIconRadiusFactor,g=2*h,m=o?this.parentViewport.width*a.LegendMaxWidthFactor-g-a.LegendEdgeMariginWidth:this.lastCalculatedWidth-g-a.LegendEdgeMariginWidth,y=t.length,f=0,v=this.parentViewport.height;i&&(p+=u,i.x=a.TextAndIconPadding,i.y=u,f=i.width||0),this.legendDataStartIndex>0&&(p+=a.LegendArrowOffset);for(var b=t.length,C=0;C<b;C++){var S=t[C],x=this.data.fontProperties.toTextProperties(S.label);S.glyphPosition={x:h,y:p+d-e.TextMeasurementService.estimateSvgTextBaselineDelta(x)},S.textPosition={x:g,y:p+d};var w=e.TextMeasurementService.measureSvgTextWidth(x);if(w>f&&(f=w),w>m){var P=e.TextMeasurementService.getTailoredTextOrDefault(x,m);S.label=P}if(p+=c,p>v){y=C;break}}return o?f<m?this.lastCalculatedWidth=this.viewport.width=Math.ceil(f+g+a.LegendEdgeMariginWidth):this.lastCalculatedWidth=this.viewport.width=Math.ceil(this.parentViewport.width*a.LegendMaxWidthFactor):this.viewport.width=this.lastCalculatedWidth,this.visibleLegendHeight=p,r.forEach((function(e){return e.x=n.lastCalculatedWidth/2})),this.updateNavigationArrowLayout(r,b,y),y},a.prototype.drawNavigationArrows=function(e){var i=this,r=this.group.selectAll(a.NavigationArrow.selector).data(e);r.enter().append("g").on("click",(function(e){var t=i.legendDataStartIndex;i.legendDataStartIndex=0===e.type?t+i.arrowPosWindow:t-i.arrowPosWindow,i.drawLegendInternal(i.data,i.parentViewport,!1)})).classed(a.NavigationArrow.class,!0).append("path"),r.attr("transform",(function(e){return t.SVGUtil.translate(e.x,e.y)})).select("path").attr({d:function(e){return e.path},transform:function(e){return e.rotateTransform}}),r.exit().remove()},a.prototype.reset=function(){},a.prototype.setTooltipToLegendItems=function(e){for(var t=0,a=e.dataPoints;t<a.length;t++){var i=a[t];i.tooltip=i.label}},a})();l.DefaultFontSizeInPt=8,l.LegendSmallFontSmallViewportInPt=7,l.LegendMediumFontSmallViewportInPt=8,l.LegendIconRadius=5,l.LegendIconRadiusFactor=5,l.MaxTextLength=60,l.MaxTitleLength=80,l.TextAndIconPadding=5,l.TitlePadding=15,l.LegendEdgeMariginWidth=10,l.LegendMaxWidthFactor=.3,l.TopLegendHeight=24,l.DefaultTextMargin=s.DefaultFontSize.pt,l.DefaultMaxLegendFactor=l.MaxTitleLength/l.DefaultTextMargin,l.LegendIconYRatio=.52,l.LegendArrowOffset=10,l.LegendArrowHeight=15,l.LegendArrowWidth=7.5,l.LegendItem=r("legendItem"),l.LegendText=r("legendText"),l.LegendIcon=r("legendIcon"),l.LegendTitle=r("legendTitle"),l.NavigationArrow=r("navArrow"),t.SVGLegend=l;var c=(function(){function a(e){this.legendContainerParent=d3.select(e.get(0))}return a.prototype.getMargins=function(){return{height:a.LegendHeight,width:0}},a.prototype.drawLegend=function(e){var t=e.dataPoints;if(!(t.length<1)){var i=this.legendContainerParent.select(a.LegendContainerSelector);if(i.empty()){if(!t.length)return;var r=$("<div></div>").height(this.getMargins().height).addClass(a.LegendContainerClass);$(this.legendContainerParent[0]).prepend(r),i=d3.select(r.get(0))}this.legendContainerDiv=i,this.drawTitle(t),this.drawLegendItems(t)}},a.prototype.reset=function(){this.legendContainerDiv&&(this.legendContainerDiv.remove(),this.legendContainerDiv=null)},a.prototype.isVisible=function(){return!0},a.prototype.changeOrientation=function(e){},a.prototype.getOrientation=function(){return n.Top},a.prototype.drawTitle=function(e){var t=this.legendContainerDiv.selectAll("div."+a.LegendTitleClass),i=t.data([e[0]]),r=i.enter(),o=r.append("div").attr("class",a.LegendTitleClass);o.filter((function(e){return e.iconOnlyOnLabel})).append("span").attr("class",a.legendIconClass).html(a.legendPlaceSelector),o.append("span"),i.filter((function(e){return e.iconOnlyOnLabel})).select("span."+a.legendIconClass).style(a.legendColorCss,(function(e){return e.color})),i.select("span:last-child").text((function(e){return e.category}))},a.prototype.drawLegendItems=function(t){this.ensureLegendTableCreated();var i=[t],r=this.legendContainerDiv.select("tbody").selectAll("tr").data(i),o=r.enter(),n=o.append("tr"),s=n.selectAll("td").data((function(e){return e}),(function(e){return e.label})).enter().append("td").attr("class",a.LegendItem),l=s.append("span");l.filter((function(e){return!e.iconOnlyOnLabel})).append("span").html(a.legendPlaceSelector).attr("class",a.legendIconClass).attr("white-space","nowrap").style({"font-size":"20px","margin-bottom":"7px"}),l.append("span").attr("class",a.legendItemNameClass),l.append("span").attr("class",a.legendItemMeasureClass);var c=r.selectAll("td").data((function(e){return e}),(function(e){return e.label}));c.select("span."+a.legendItemNameClass).html((function(t){return e.visuals.TextUtil.removeBreakingSpaces(t.label)})),c.select("span."+a.legendItemMeasureClass).html((function(e){return"&nbsp;"+e.measure})),c.select("span."+a.legendIconClass).style("color",(function(e){return e.color})),c.exit().remove()},a.prototype.ensureLegendTableCreated=function(){if(this.legendContainerDiv.select("div table").empty()){var e=this.legendContainerDiv.append("div").append("table");e.style("table-layout","fixed").append("tbody"),this.setPanGestureOnLegend(e)}},a.prototype.setPanGestureOnLegend=function(e){var a=$(this.legendContainerParent[0]).width(),i=d3.scale.linear().domain([0,a]).range([0,a]),r=d3.behavior.zoom().scaleExtent([1,1]).x(i).on("zoom",(function(){if($(e[0]).width()>a){var i=r.translate(),o=i[0],n=i[1];o=Math.min(o,0),o=Math.max(o,a-$(e[0]).width()),r.translate([o,n]),e.style("-ms-transform",(function(){return t.SVGUtil.translateXWithPixels(o)})),e.style("-webkit-transform",(function(){return t.SVGUtil.translateXWithPixels(o)})),e.style("transform",(function(){return t.SVGUtil.translateXWithPixels(o)}))}}));this.legendContainerDiv?this.legendContainerDiv.call(r):e.call(r)},a})();c.LegendHeight=70,c.LegendContainerClass="interactive-legend",c.LegendContainerSelector=".interactive-legend",c.LegendTitleClass="title",c.LegendItem="item",c.legendPlaceSelector="",c.legendIconClass="icon",c.legendColorCss="color",c.legendItemNameClass="itemName",c.legendItemMeasureClass="itemMeasure";var u;!(function(a){function i(e,a){var i=t.FontProperties.create({color:s.DefaultLabelColor,family:s.DefaultFontFamily,size:s.DefaultFontSize});if(e.fontProperties=i,null==a[t.legendProps.show]&&(a[t.legendProps.show]=!0),a[t.legendProps.show]===!1&&(e.dataPoints=[]),a[t.legendProps.show]===!0&&null==a[t.legendProps.position]&&(a[t.legendProps.position]=t.legendPosition.top),void 0!==a[t.legendProps.fontSize]){var r=void 0,o=a[t.legendProps.fontSize];null!=o&&(r={pt:+o},e.fontProperties.size=r),e.fontSize=o}if(void 0!==a[t.legendProps.labelColor]){var n=a[t.legendProps.labelColor];null!=n&&(e.fontProperties.color=n.solid.color,e.labelColor=n.solid.color)}a[t.legendProps.showTitle]===!1?e.title="":void 0!==a[t.legendProps.titleText]&&(e.title=a[t.legendProps.titleText])}function r(a,i,r,o,l){void 0===l&&(l=!1);var c,u=e.DataViewObjects.getValue(a,t.legendPropIdentifiers.fontSize);c=null!=u?{pt:+u}:s.DefaultFontSize;var d=e.DataViewObjects.getValue(a,t.legendPropIdentifiers.show,r),p=n[e.DataViewObjects.getValue(a,t.legendPropIdentifiers.position,s.DefaultPositionKey)],h=e.DataViewObjects.getValue(a,t.legendPropIdentifiers.showTitle,!0);return{show:d,position:p,dataPoints:i,showTitle:h,title:e.DataViewObjects.getValue(a,t.legendPropIdentifiers.titleText,o),grouped:l,fontProperties:t.FontProperties.create({family:e.DataViewObjects.getValue(a,t.legendPropIdentifiers.fontFamily,s.DefaultFontFamily),size:c,color:e.DataViewObjects.getFillColor(a,t.legendPropIdentifiers.labelColor,s.DefaultLabelColor)})}}a.DefaultLegendLabelFillColor="#666666",a.update=i,a.create=r})(u=t.LegendData||(t.LegendData={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){t.linear="linear",t.log="log",t.type=e.createEnumType([{value:t.linear,displayName:function(e){return e.get("Visual_Axis_Linear")}},{value:t.log,displayName:function(e){return e.get("Visual_Axis_Log")}}])})(a=t.axisScale||(t.axisScale={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){t.showBoth="showBoth",t.showTitleOnly="showTitleOnly",t.showUnitOnly="showUnitOnly",t.type=e.createEnumType([{value:t.showTitleOnly,displayName:function(e){return e.get("Visual_Axis_ShowTitleOnly")}},{value:t.showUnitOnly,displayName:function(e){return e.get("Visual_Axis_ShowUnitOnly")}},{value:t.showBoth,displayName:function(e){return e.get("Visual_Axis_ShowBoth")}}])})(a=t.axisStyle||(t.axisStyle={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){t.scalar="Scalar",t.categorical="Categorical",t.both="Both",t.type=e.createEnumType([{value:t.scalar,displayName:function(e){return e.get("Visual_Axis_Scalar")}},{value:t.categorical,displayName:function(e){return e.get("Visual_Axis_Categorical")}}])})(a=t.axisType||(t.axisType={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){t.rectangle="rectangle",t.oval="oval",t.line="line",t.arrow="arrow",t.triangle="triangle",t.type=e.createEnumType([{value:t.rectangle,displayName:"rectangle"},{value:t.oval,displayName:"oval"},{value:t.line,displayName:"line"},{value:t.arrow,displayName:"arrow"},{value:t.triangle,displayName:"triangle"}])})(a=t.basicShapeType||(t.basicShapeType={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){t.fill="fill",t.line="line",t.none="none",t.type=e.createEnumType([{value:t.fill,displayName:function(e){return e.get("Visual_Confidence_Band_Style_Fill")}},{value:t.line,displayName:function(e){return e.get("Visual_Confidence_Band_Style_Line")}},{value:t.none,displayName:function(e){return e.get("Visual_Confidence_Band_Style_None")}}])})(a=t.confidenceBandStyle||(t.confidenceBandStyle={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){t.year="year",t.quarter="quarter",t.month="month",t.day="day",t.hour="hour",t.minute="minute",t.second="second",t.point="point",t.type=e.createEnumType([{value:t.year,displayName:function(e){return e.get("Visual_Forecast_Units_Year")}},{value:t.quarter,displayName:function(e){return e.get("Visual_Forecast_Units_Quarter")}},{value:t.month,displayName:function(e){return e.get("Visual_Forecast_Units_Month")}},{value:t.day,displayName:function(e){return e.get("Visual_Forecast_Units_Day")}},{value:t.hour,displayName:function(e){return e.get("Visual_Forecast_Units_Hour")}},{value:t.minute,displayName:function(e){return e.get("Visual_Forecast_Units_Minute")}},{value:t.second,displayName:function(e){return e.get("Visual_Forecast_Units_Second")}},{value:t.point,displayName:function(e){return e.get("Visual_Forecast_Units_Point")}}])})(a=t.forecastUnits||(t.forecastUnits={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){t.ninetyNine="99%",t.ninetyFive="95%",t.ninety="90%",t.eightyFive="85%",t.eighty="80%",t.seventyfive="75%",t.type=e.createEnumType([{value:t.ninetyNine,displayName:function(e){return"99%"}},{value:t.ninetyFive,displayName:function(e){return"95%"}},{value:t.ninety,displayName:function(e){return"90%"}},{value:t.eightyFive,displayName:function(e){return"85%"}},{value:t.eighty,displayName:function(e){return"80%"}},{value:t.seventyfive,displayName:function(e){return"75%"}}])})(a=t.forecastConfidenceIntervals||(t.forecastConfidenceIntervals={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){t.normal="Normal",t.fit="Fit",t.fill="Fill",t.type=e.createEnumType([{value:t.normal,displayName:function(e){return e.get("Visual_ImageScalingType_Normal")}},{value:t.fit,displayName:function(e){return e.get("Visual_ImageScalingType_Fit")}},{value:t.fill,displayName:function(e){return e.get("Visual_ImageScalingType_Fill")}}])})(a=t.imageScalingType||(t.imageScalingType={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){t.type=e.createEnumType([{value:0,displayName:function(e){return e.get("Visual_LabelOrientation_Vertical")}},{value:1,displayName:function(e){return e.get("Visual_LabelOrientation_Horizontal")}}])})(a=t.labelOrientation||(t.labelOrientation={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){t.auto="Auto",t.insideEnd="InsideEnd",t.insideCenter="InsideCenter",t.outsideEnd="OutsideEnd",t.insideBase="InsideBase",t.type=e.createEnumType([{value:t.auto,displayName:function(e){return e.get("Visual_LabelPosition_Auto")}},{value:t.insideEnd,displayName:function(e){return e.get("Visual_LabelPosition_InsideEnd")}},{value:t.outsideEnd,displayName:function(e){return e.get("Visual_LabelPosition_OutsideEnd")}},{value:t.insideCenter,displayName:function(e){return e.get("Visual_LabelPosition_InsideCenter")}},{value:t.insideBase,displayName:function(e){return e.get("Visual_LabelPosition_InsideBase")}}])})(a=t.labelPosition||(t.labelPosition={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){t.flagLabelStyleCategory=2,t.flagLabelStyleData=4,t.flagLabelStylePercent=8;var a;!(function(e){e[e.category=t.flagLabelStyleCategory]="category",e[e.data=t.flagLabelStyleData]="data",e[e.percent=t.flagLabelStylePercent]="percent",e[e.categoryAndData=t.flagLabelStyleCategory|t.flagLabelStyleData]="categoryAndData",e[e.categoryAndPercent=t.flagLabelStyleCategory|t.flagLabelStylePercent]="categoryAndPercent",e[e.dataAndPercent=t.flagLabelStyleData|t.flagLabelStylePercent]="dataAndPercent",e[e.categoryAndDataAndPercent=t.flagLabelStyleCategory|t.flagLabelStyleData|t.flagLabelStylePercent]="categoryAndDataAndPercent"})(a=t.labelStyleFlagEnum||(t.labelStyleFlagEnum={})),t.category="Category",t.data="Data",t.percent="Percent of total",t.categoryAndData="Both",t.categoryAndPercent="Category, percent of total",t.dataAndPercent="Data value, percent of total",t.categoryAndDataAndPercent="Category, data value, percent of total",t.type=e.createEnumType([{value:t.category,displayName:function(e){return e.get("Visual_LabelStyle_Category")}},{value:t.data,displayName:function(e){return e.get("Visual_LabelStyle_DataValue")}},{value:t.percent,displayName:function(e){return e.get("Visual_LabelStyle_Percent")}},{value:t.categoryAndData,displayName:function(e){return e.get("Visual_LabelStyle_CategoryAndData")}},{value:t.categoryAndPercent,displayName:function(e){return e.get("Visual_LabelStyle_CategoryAndPercent")}},{value:t.dataAndPercent,displayName:function(e){return e.get("Visual_LabelStyle_DataAndPercent")}},{value:t.categoryAndDataAndPercent,displayName:function(e){return e.get("Visual_LabelStyle_CategoryAndDataAndPercent")}}])})(a=t.labelStyle||(t.labelStyle={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){t.value="Value",t.name="Name",t.nameAndValue="ValueAndName",t.type=e.createEnumType([{value:t.value,displayName:function(e){return e.get("Visual_LabelText_Value")}},{value:t.name,displayName:function(e){return e.get("Visual_LabelText_Name")}},{value:t.nameAndValue,displayName:function(e){return e.get("Visual_LabelText_Name_Value")}}])})(a=t.labelText||(t.labelText={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){t.top="Top",t.bottom="Bottom",t.left="Left",t.right="Right",t.topCenter="TopCenter",t.bottomCenter="BottomCenter",t.leftCenter="LeftCenter",t.rightCenter="RightCenter",t.type=e.createEnumType([{value:t.top,displayName:function(e){return e.get("Visual_LegendPosition_Top")}},{value:t.bottom,displayName:function(e){return e.get("Visual_LegendPosition_Bottom")}},{value:t.left,displayName:function(e){return e.get("Visual_LegendPosition_Left")}},{value:t.right,displayName:function(e){return e.get("Visual_LegendPosition_Right")}},{value:t.topCenter,displayName:function(e){return e.get("Visual_LegendPosition_TopCenter")}},{value:t.bottomCenter,displayName:function(e){return e.get("Visual_LegendPosition_BottomCenter")}},{value:t.leftCenter,displayName:function(e){return e.get("Visual_LegendPosition_LeftCenter")}},{value:t.rightCenter,displayName:function(e){return e.get("Visual_LegendPosition_RightCenter")}}])})(a=t.legendPosition||(t.legendPosition={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){t.positive="Positive",t.negative="Negative",t.type=e.createEnumType([{value:t.positive,displayName:function(e){return e.get("Visual_KPI_Direction_Positive")}},{value:t.negative,displayName:function(e){return e.get("Visual_KPI_Direction_Negative")}}])})(a=t.kpiDirection||(t.kpiDirection={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){t.miter="miter",t.round="round",t.bevel="bevel",t.defaultValue=t.round,t.type=e.createEnumType([{value:t.miter,displayName:function(e){return e.get("Visual_StrokeLineJoin_Miter")}},{value:t.round,displayName:function(e){return e.get("Visual_StrokeLineJoin_Round")}},{value:t.bevel,displayName:function(e){return e.get("Visual_StrokeLineJoin_Bevel")}}])})(a=t.strokeLineJoin||(t.strokeLineJoin={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){t.dashed="dashed",t.solid="solid",t.dotted="dotted",t.type=e.createEnumType([{value:t.dashed,displayName:function(e){return e.get("Visual_LineStyle_Dashed")}},{value:t.solid,displayName:function(e){return e.get("Visual_LineStyle_Solid")}},{value:t.dotted,displayName:function(e){return e.get("Visual_LineStyle_Dotted")}}])})(a=t.lineStyle||(t.lineStyle={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){function a(e){return[t.topOnly,t.topBottom,t.frame].some((function(t){return t===e}))}function i(e){return[t.rightOnly,t.leftRight,t.frame].some((function(t){return t===e}))}function r(e){return[t.bottomOnly,t.topBottom,t.frame].some((function(t){return t===e}))}function o(e){return[t.leftOnly,t.leftRight,t.frame].some((function(t){return t===e}))}t.none="None",t.bottomOnly="BottomOnly",t.topOnly="TopOnly",t.leftOnly="LeftOnly",t.rightOnly="RightOnly",t.topBottom="TopBottom",t.leftRight="LeftRight",t.frame="Frame",t.showTop=a,t.showRight=i,t.showBottom=r,t.showLeft=o,t.type=e.createEnumType([{value:t.none,displayName:function(e){return e.get("Visual_Outline_none")}},{value:t.bottomOnly,displayName:function(e){return e.get("Visual_Outline_bottom_only")}},{value:t.topOnly,displayName:function(e){return e.get("Visual_Outline_top_only")}},{value:t.leftOnly,displayName:function(e){return e.get("Visual_Outline_LeftOnly")}},{value:t.rightOnly,displayName:function(e){return e.get("Visual_Outline_RightOnly")}},{value:t.topBottom,displayName:function(e){return e.get("Visual_Outline_top_Bottom")}},{value:t.leftRight,displayName:function(e){return e.get("Visual_Outline_leftRight")}},{value:t.frame,displayName:function(e){return e.get("Visual_Outline_frame")}}])})(a=t.outline||(t.outline={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){t.back="back",t.front="front",t.type=e.createEnumType([{value:t.back,displayName:function(e){return e.get("Visual_Reference_Line_Behind")}},{value:t.front,displayName:function(e){return e.get("Visual_Reference_Line_InFront")}}])})(a=t.referenceLinePosition||(t.referenceLinePosition={}));var i;!(function(t){t.left="left",t.right="right",t.type=e.createEnumType([{value:t.left,displayName:function(e){return e.get("Visual_Reference_Line_Data_Label_Left")}},{value:t.right,displayName:function(e){return e.get("Visual_Reference_Line_Data_Label_Right")}}])})(i=t.referenceLineDataLabelHorizontalPosition||(t.referenceLineDataLabelHorizontalPosition={}));var r;!(function(t){t.above="above",t.under="under",t.type=e.createEnumType([{value:t.above,displayName:function(e){return e.get("Visual_Reference_Line_Data_Label_Above")}},{value:t.under,displayName:function(e){return e.get("Visual_Reference_Line_Data_Label_Under")}}])})(r=t.referenceLineDataLabelVerticalPosition||(t.referenceLineDataLabelVerticalPosition={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){t.type=e.createEnumType([{value:0,displayName:function(e){return e.get("Slicer_Orientation_Vertical")}},{value:1,displayName:function(e){return e.get("Slicer_Orientation_Horizontal")}}])})(a=t.slicerOrientation||(t.slicerOrientation={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){t.australiaStates="australia.states.topo",t.austriaStates="austria.states.topo",t.brazilStates="brazil.states.topo",t.canadaProvinces="canada.provinces.topo",t.franceRegions="france.regions.topo",t.germanyStates="germany.states.topo",t.irelandCounties="ireland.counties.topo",t.italyRegions="italy.regions.topo",t.mexicoStates="mexico.states.topo",t.netherlandsProvinces="netherlands.provinces.topo",t.ukCountries="uk.countries.topo",t.usaStates="usa.states.topo",t.type=e.createEnumType([{value:t.australiaStates,displayName:function(e){return e.get("Visual_ShapeMap_StandardMaps_AustraliaStates")}},{value:t.austriaStates,displayName:function(e){return e.get("Visual_ShapeMap_StandardMaps_AustriaStates")}},{value:t.brazilStates,displayName:function(e){return e.get("Visual_ShapeMap_StandardMaps_BrazilStates")}},{value:t.canadaProvinces,displayName:function(e){return e.get("Visual_ShapeMap_StandardMaps_CanadaProvinces")}},{value:t.franceRegions,displayName:function(e){return e.get("Visual_ShapeMap_StandardMaps_FranceRegions")}},{value:t.germanyStates,displayName:function(e){return e.get("Visual_ShapeMap_StandardMaps_GermanyStates")}},{value:t.irelandCounties,displayName:function(e){return e.get("Visual_ShapeMap_StandardMaps_IrelandCounties")}},{value:t.italyRegions,displayName:function(e){return e.get("Visual_ShapeMap_StandardMaps_ItalyRegions")}},{value:t.mexicoStates,displayName:function(e){return e.get("Visual_ShapeMap_StandardMaps_MexicoStates")}},{value:t.netherlandsProvinces,displayName:function(e){return e.get("Visual_ShapeMap_StandardMaps_NetherlandsProvinces")}},{value:t.ukCountries,displayName:function(e){return e.get("Visual_ShapeMap_StandardMaps_UkCountries")}},{value:t.usaStates,displayName:function(e){return e.get("Visual_ShapeMap_StandardMaps_UsaStates")}}])})(a=t.standardGeoJson||(t.standardGeoJson={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){t.left="Left",t.right="Right",t.type=e.createEnumType([{value:t.left,displayName:function(e){return e.get("Visual_yAxis_Left")}},{value:t.right,displayName:function(e){return e.get("Visual_yAxis_Right")}}])})(a=t.yAxisPosition||(t.yAxisPosition={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){var a;!(function(e){e.category="Category",e.series="Series",e.tooltips="Tooltips",e.value="Value"})(a=t.Role||(t.Role={}));var i;!(function(t){t.albersUsa="albersUsa",t.equirectangular="equirectangular",t.mercator="mercator",t.orthographic="orthographic",t.type=e.createEnumType([{value:t.albersUsa,displayName:function(e){return e.get("Visual_ShapeMap_Projection_AlbersUsa")}},{value:t.equirectangular,displayName:function(e){return e.get("Visual_ShapeMap_Projection_Equirectangular")}},{value:t.mercator,displayName:function(e){return e.get("Visual_ShapeMap_Projection_Mercator")}},{value:t.orthographic,displayName:function(e){return e.get("Visual_ShapeMap_Projection_Orthographic")}}])})(i=t.Projection||(t.Projection={}))})(a=t.ShapeMapType||(t.ShapeMapType={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){t.before="Before",t.after="After",t.between="Between",t.basic="Basic",t.dropdown="Dropdown",t.relative="Relative",t.type=e.createEnumType([{value:t.between,displayName:function(e){return e.get("Visual_SliderMode_Between")}},{value:t.before,displayName:function(e){return e.get("Visual_SliderMode_Before")}},{value:t.after,displayName:function(e){return e.get("Visual_SliderMode_After")}},{value:t.basic,displayName:function(e){return e.get("Visual_SliderMode_Basic")}},{value:t.dropdown,displayName:function(e){return e.get("Visual_SliderMode_Dropdown")}},{value:t.relative,displayName:function(e){return e.get("Visual_SliderMode_Relative")}}])})(a=t.slicerMode||(t.slicerMode={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){t.last="Last",t.next="Next",t.current="This",t.type=e.createEnumType([{value:t.last,displayName:function(e){return e.get("VisualKPI_Aggregate_Last")}},{value:t.next,displayName:function(e){return e.get("PBI_Button_Label_Next")}},{value:t.current,displayName:function(e){return e.get("Visual_SlicerRange_This")}}])})(a=t.relativeSlicerRelativeQualifier||(t.relativeSlicerRelativeQualifier={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){t.none="None",t.days="Days",t.weeks="Weeks",t.calendarWeeks="Calendar Weeks",t.months="Months",t.calendarMonths="Calendar Months",t.years="Years",t.calendarYears="Calendar Years",t.type=e.createEnumType([{value:t.none,displayName:function(e){return e.get("Visual_SlicerPeriod_None")}},{value:t.days,displayName:function(e){return e.get("Visual_SlicerPeriod_Days")}},{value:t.weeks,displayName:function(e){return e.get("Visual_SlicerPeriod_Weeks")}},{value:t.calendarWeeks,displayName:function(e){return e.get("Visual_SlicerPeriod_CalWeeks")}},{value:t.months,displayName:function(e){return e.get("Visual_SlicerPeriod_Months")}},{value:t.calendarMonths,displayName:function(e){return e.get("Visual_SlicerPeriod_CalMonths")}},{value:t.years,displayName:function(e){return e.get("Visual_SlicerPeriod_Years")}},{value:t.calendarYears,displayName:function(e){return e.get("Visual_SlicerPeriod_CalYears")}}])})(a=t.relativeSlicerPeriod||(t.relativeSlicerPeriod={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(e,t){return t||!e?0:e.getDuration()}e.MinervaAnimationDuration=250,e.MaxDataPointsToAnimate=1e3,e.GetAnimationDuration=t})(t=e.AnimatorCommon||(e.AnimatorCommon={}));var a=(function(){function e(e){e&&e.duration&&(this.animationDuration=e.duration),this.animationDuration=this.animationDuration>=0?this.animationDuration:t.MinervaAnimationDuration}return e.prototype.getDuration=function(){return this.animationDuration},e.prototype.animate=function(e){return null},e.prototype.getEasing=function(){return"cubic-in-out"},e})();e.BaseAnimator=a})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(t){function a(e){return t.call(this,e)||this}return __extends(a,t),a.prototype.animate=function(t){var a={failed:!0,shapes:null},i=t.viewModel,r=this.previousViewModel,o=i.categories.length*i.series.length;
return o>e.AnimatorCommon.MaxDataPointsToAnimate||r&&r.categories.length!==i.categories.length?a:(r&&(i.hasHighlights&&!r.hasHighlights?a=this.animateNormalToHighlighted(t):i.hasHighlights&&r.hasHighlights?a=this.animateHighlightedToHighlighted(t):!i.hasHighlights&&r.hasHighlights&&(a=this.animateHighlightedToNormal(t))),this.previousViewModel=i,a)},a.prototype.animateNormalToHighlighted=function(t){var a=t.viewModel,i=t.itemCS,r=t.series.selectAll(i.selector),o=r.data((function(e){return e.data}),(function(e){return e.key})),n=a.hasHighlights;return o.enter().append("rect").attr("class",(function(e){return i.class.concat(e.highlight?" highlight":"")})).attr(t.layout.shapeLayoutWithoutHighlights),o.style("fill",(function(e){return e.color})).style("fill-opacity",(function(t){return e.ColumnUtil.getFillOpacity(t.selected,t.highlight,!1,n)})).transition().duration(this.animationDuration).attr(t.layout.shapeLayout),o.exit().remove(),{failed:!1,shapes:o}},a.prototype.animateHighlightedToHighlighted=function(e){var t=this.animateDefaultShapes(e.viewModel,e.series,e.layout,e.itemCS);return{failed:!1,shapes:t}},a.prototype.animateHighlightedToNormal=function(t){var a=t.itemCS,i=t.series.selectAll(a.selector),r=i.data((function(e){return e.data}),(function(e){return e.key})),o=t.interactivityService&&t.interactivityService.hasSelection();return r.enter().append("rect").attr("class",(function(e){return a.class.concat(e.highlight?" highlight":"")})),r.style("fill",(function(e){return e.color})).style("fill-opacity",(function(t){return e.ColumnUtil.getFillOpacity(t.selected,t.highlight,t.selected,!t.selected)})).transition().duration(this.animationDuration).attr(t.layout.shapeLayout).transition().duration(0).delay(this.animationDuration).style("fill-opacity",(function(t){return e.ColumnUtil.getFillOpacity(t.selected,t.highlight,o,!1)})),r.exit().transition().duration(this.animationDuration).attr(o?t.layout.zeroShapeLayout:t.layout.shapeLayoutWithoutHighlights).remove(),{failed:!1,shapes:r}},a.prototype.animateDefaultShapes=function(t,a,i,r){var o=a.selectAll(r.selector),n=o.data((function(e){return e.data}),(function(e){return e.key}));return n.enter().append("rect").attr("class",(function(e){return r.class.concat(e.highlight?" highlight":"")})),n.style("fill",(function(e){return e.color})).style("fill-opacity",(function(a){return e.ColumnUtil.getFillOpacity(a.selected,a.highlight,!1,t.hasHighlights)})).transition().duration(this.animationDuration).attr(i.shapeLayout),n.exit().remove(),n},a})(e.BaseAnimator);e.WebColumnChartAnimator=t})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(t){function a(e){return t.call(this,e)||this}return __extends(a,t),a.prototype.animate=function(e){var t={failed:!0,shapes:null,highlightShapes:null},a=e.viewModel,i=this.previousViewModel;if(a.highlightsOverflow||i&&i.highlightsOverflow)return this.previousViewModel=a,t;var r=i&&i.hasHighlights,o=a.hasHighlights;return i&&(o&&!r?t=this.animateNormalToHighlighted(e):o&&r?t=this.animateHighlightedToHighlighted(e):!o&&r&&(t=this.animateHighlightedToNormal(e))),this.previousViewModel=a,t},a.prototype.animateNormalToHighlighted=function(t){var a=this.animateDefaultShapes(t),i=t.graphicsContext.select(".slices").selectAll("path.slice-highlight").data(t.viewModel.dataPoints.filter((function(e){return null!=e.data.highlightRatio})),(function(e){return e.data.identity.getKey()}));return i.enter().insert("path").classed("slice-highlight",!0).each((function(e){this._current=e})),e.DonutChart.isSingleColor(t.viewModel.dataPoints.filter((function(e){return null!=e.data.highlightRatio}))),i.style("fill",(function(e){return e.data.color?e.data.color:t.colors.getNewColorScale().getColor(e.data.identity.getKey()).value})).style("fill-opacity",(function(a){return e.ColumnUtil.getFillOpacity(a.data.selected,!0,!1,t.viewModel.hasHighlights)})).style("stroke-width",(function(e){return e.data.strokeWidth})).attr(t.layout.shapeLayout.attrs).style(t.layout.shapeLayout.styles).transition().duration(this.animationDuration).attr(t.layout.highlightShapeLayout.attrs).style(t.layout.highlightShapeLayout.styles),i.exit().remove(),e.NewDataLabelUtils.drawDefaultLabels(t.labelGraphicsContext,t.labels,!1,!0,!0),e.NewDataLabelUtils.drawLabelLeaderLines(t.labelGraphicsContext,t.labels),{failed:!1,shapes:a,highlightShapes:i}},a.prototype.animateHighlightedToHighlighted=function(t){var a=this.animateDefaultShapes(t),i=this.animateDefaultHighlightShapes(t);return e.NewDataLabelUtils.drawDefaultLabels(t.labelGraphicsContext,t.labels,!1,!0,!0),e.NewDataLabelUtils.drawLabelLeaderLines(t.labelGraphicsContext,t.labels),{failed:!1,shapes:a,highlightShapes:i}},a.prototype.animateHighlightedToNormal=function(t){var a=t.interactivityService&&t.interactivityService.hasSelection(),i=this.animationDuration,r=t.graphicsContext.select(".slices").selectAll("path.slice").data(t.viewModel.dataPoints,(function(e){return e.data.identity.getKey()}));r.enter().insert("path").classed("slice",!0).each((function(e){this._current=e})),e.DonutChart.isSingleColor(t.viewModel.dataPoints),r.style("fill",(function(e){return e.data.color?e.data.color:t.colors.getNewColorScale().getColor(e.data.identity.getKey()).value})).style("fill-opacity",(function(t){return e.ColumnUtil.getFillOpacity(t.data.selected,!1,t.data.selected,!t.data.selected)})).style("stroke-width",(function(e){return e.data.strokeWidth})).transition().duration(i).attr(t.layout.shapeLayout.attrs).style(t.layout.shapeLayout.styles).transition().duration(0).delay(i).style("fill-opacity",(function(t){return e.ColumnUtil.getFillOpacity(t.data.selected,!1,a,!1)})),r.exit().remove();var o=t.graphicsContext.select(".slices").selectAll("path.slice-highlight").data(t.viewModel.dataPoints.filter((function(e){return null!=e.data.highlightRatio})),(function(e){return e.data.identity.getKey()}));return o.enter().insert("path").classed("slice-highlight",!0).each((function(e){this._current=e})),e.DonutChart.isSingleColor(t.viewModel.dataPoints.filter((function(e){return null!=e.data.highlightRatio}))),o.exit().style("fill",(function(e){return e.data.color?e.data.color:t.colors.getNewColorScale().getColor(e.data.identity.getKey()).value})).style("fill-opacity",(function(t){return e.ColumnUtil.getFillOpacity(!1,!0,!1,!0)})).style("stroke-width",(function(e){return e.data.strokeWidth})).transition().duration(i).attr(a?t.layout.zeroShapeLayout.attrs:t.layout.shapeLayout.attrs).style(a?t.layout.zeroShapeLayout.styles:t.layout.shapeLayout.styles).remove(),e.NewDataLabelUtils.drawDefaultLabels(t.labelGraphicsContext,t.labels,!1,!0,!0),e.NewDataLabelUtils.drawLabelLeaderLines(t.labelGraphicsContext,t.labels),{failed:!1,shapes:r,highlightShapes:o}},a.prototype.animateDefaultShapes=function(t){var a=t.graphicsContext.select(".slices").selectAll("path.slice").data(t.viewModel.dataPoints,(function(e){return e.data.identity.getKey()}));return a.enter().insert("path").classed("slice",!0).each((function(e){this._current=e})),e.DonutChart.isSingleColor(t.viewModel.dataPoints),a.style("fill",(function(e){return e.data.color?e.data.color:t.colors.getNewColorScale().getColor(e.data.identity.getKey()).value})).style("fill-opacity",(function(a){return e.ColumnUtil.getFillOpacity(a.data.selected,!1,!1,t.viewModel.hasHighlights)})).style("stroke-width",(function(e){return e.data.strokeWidth})).transition().duration(this.animationDuration).attr(t.layout.shapeLayout.attrs).style(t.layout.shapeLayout.styles),a.exit().remove(),a},a.prototype.animateDefaultHighlightShapes=function(t){var a=t.graphicsContext.select(".slices").selectAll("path.slice-highlight").data(t.viewModel.dataPoints.filter((function(e){return null!=e.data.highlightRatio})),(function(e){return e.data.identity.getKey()}));return a.enter().insert("path").classed("slice-highlight",!0).each((function(e){this._current=e})),e.DonutChart.isSingleColor(t.viewModel.dataPoints.filter((function(e){return null!=e.data.highlightRatio}))),a.style("fill",(function(e){return e.data.color?e.data.color:t.colors.getNewColorScale().getColor(e.data.identity.getKey()).value})).style("fill-opacity",(function(a){return e.ColumnUtil.getFillOpacity(a.data.selected,!0,!1,t.viewModel.hasHighlights)})).style("stroke-width",(function(e){return e.data.strokeWidth})).transition().duration(this.animationDuration).attr(t.layout.highlightShapeLayout.attrs).style(t.layout.highlightShapeLayout.styles),a.exit().remove(),a},a})(e.BaseAnimator);e.WebDonutChartAnimator=t})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=(function(a){function i(e){return a.call(this,e)||this}return __extends(i,a),i.prototype.animate=function(e){var t={failed:!0,shapes:null,dataLabels:null},a=e.viewModel,i=this.previousViewModel;return i&&(a.hasHighlights&&!i.hasHighlights?t=this.animateNormalToHighlighted(e):a.hasHighlights&&i.hasHighlights?t=this.animateHighlightedToHighlighted(e):!a.hasHighlights&&i.hasHighlights&&(t=this.animateHighlightedToNormal(e))),this.previousViewModel=a,t},i.prototype.animateNormalToHighlighted=function(e){var a=e.viewModel,i=e.layout,r=!0,o=!1;t.FunnelChart.drawDefaultAxis(e.axisGraphicsContext,e.axisOptions,e.isHidingPercentBars);var n=e.shapeGraphicsContext.selectAll(t.FunnelChart.Selectors.funnel.bars.selector).data(a.dataPoints,(function(e){return e.key}));n.enter().append("rect").attr("class",(function(e){return e.highlight?t.FunnelChart.FunnelBarHighlightClass:t.FunnelChart.Selectors.funnel.bars.class})).attr(i.shapeLayoutWithoutHighlights),n.style("fill",(function(e){return e.color})).style("fill-opacity",(function(e){return t.ColumnUtil.getFillOpacity(e.selected,e.highlight,o,r)})).transition().duration(this.animationDuration).attr(i.shapeLayout),n.exit().remove(),this.animatePercentBars(e);var s=t.NewDataLabelUtils.animateDefaultLabels(e.labelGraphicsContext,e.labelLayout,this.animationDuration);return{failed:!1,shapes:n,dataLabels:s}},i.prototype.animateHighlightedToHighlighted=function(e){var a=e.viewModel,i=e.layout;t.FunnelChart.drawDefaultAxis(e.axisGraphicsContext,e.axisOptions,e.isHidingPercentBars);var r=this.animateDefaultShapes(a,a.dataPoints,e.shapeGraphicsContext,i);this.animatePercentBars(e);var o=t.NewDataLabelUtils.animateDefaultLabels(e.labelGraphicsContext,e.labelLayout,this.animationDuration);return{failed:!1,shapes:r,dataLabels:o}},i.prototype.animateHighlightedToNormal=function(e){var a=e.viewModel,i=e.layout,r=!!e.interactivityService&&e.interactivityService.hasSelection();t.FunnelChart.drawDefaultAxis(e.axisGraphicsContext,e.axisOptions,e.isHidingPercentBars);var o=e.shapeGraphicsContext.selectAll(t.FunnelChart.Selectors.funnel.bars.selector).data(a.dataPoints,(function(e){return e.key}));o.enter().append("rect").attr("class",(function(e){return e.highlight?t.FunnelChart.FunnelBarHighlightClass:t.FunnelChart.Selectors.funnel.bars.class})),o.style("fill",(function(e){return e.color})).style("fill-opacity",(function(e){return t.ColumnUtil.getFillOpacity(e.selected,e.highlight,r,!e.selected)})).transition().duration(this.animationDuration).attr(i.shapeLayoutWithoutHighlights).transition().duration(0).delay(this.animationDuration).style("fill-opacity",(function(e){return t.ColumnUtil.getFillOpacity(e.selected,e.highlight,r,!1)}));var n=o.exit();n.transition().duration(this.animationDuration).attr(r?i.zeroShapeLayout:i.shapeLayoutWithoutHighlights).remove(),this.animatePercentBars(e);var s=t.NewDataLabelUtils.animateDefaultLabels(e.labelGraphicsContext,e.labelLayout,this.animationDuration);return{failed:!1,shapes:o,dataLabels:s}},i.prototype.animateDefaultShapes=function(e,a,i,r){var o=e.hasHighlights,n=i.selectAll(t.FunnelChart.Selectors.funnel.bars.selector).data(a,(function(e){return e.key}));return n.enter().append("rect").attr("class",(function(e){return e.highlight?t.FunnelChart.FunnelBarHighlightClass:t.FunnelChart.Selectors.funnel.bars.class})),n.style("fill",(function(e){return e.color})).style("fill-opacity",(function(e){return t.ColumnUtil.getFillOpacity(e.selected,e.highlight,!1,o)})).transition().duration(this.animationDuration).attr(r.shapeLayout),n.exit().remove(),n},i.prototype.animatePercentBars=function(e){var a=e.viewModel,i=e.isHidingPercentBars;if(i||!a.dataPoints||(a.hasHighlights?a.dataPoints.length/2:a.dataPoints.length)<2)return void this.animatePercentBarComponents([],e);var r=[a.dataPoints[a.hasHighlights?1:0],a.dataPoints[a.dataPoints.length-1]],o=t.FunnelChart.getValueFromDataPoint(r[0]);if(o<=0)return void this.animatePercentBarComponents([],e);var n=r.map((function(e,a){return{value:t.FunnelChart.getValueFromDataPoint(e),percent:0===a?1:t.FunnelChart.getValueFromDataPoint(e)/o,isTop:0===a}}));this.animatePercentBarComponents(n,e)},i.prototype.animateToFunnelPercent=function(e,t,a){return e.data(t).transition().duration(this.animationDuration).attr(a)},i.prototype.animatePercentBarComponents=function(a,i){var r=i.percentGraphicsContext,o=i.layout,n=[{percent:0,value:0,isTop:!0},{percent:0,value:0,isTop:!1}],s=r.selectAll(t.FunnelChart.Selectors.percentBar.mainLine.selector).data(a);this.animateToFunnelPercent(s.exit(),n,o.percentBarLayout.mainLine).remove(),s.enter().append("line").classed(t.FunnelChart.Selectors.percentBar.mainLine.class,!0).data(n).attr(o.percentBarLayout.mainLine),this.animateToFunnelPercent(s,a,o.percentBarLayout.mainLine);var l=r.selectAll(t.FunnelChart.Selectors.percentBar.leftTick.selector).data(a);this.animateToFunnelPercent(l.exit(),n,o.percentBarLayout.leftTick).remove(),l.enter().append("line").classed(t.FunnelChart.Selectors.percentBar.leftTick.class,!0).data(n).attr(o.percentBarLayout.leftTick),this.animateToFunnelPercent(l,a,o.percentBarLayout.leftTick);var c=r.selectAll(t.FunnelChart.Selectors.percentBar.rightTick.selector).data(a);this.animateToFunnelPercent(c.exit(),n,o.percentBarLayout.rightTick).remove(),c.enter().append("line").classed(t.FunnelChart.Selectors.percentBar.rightTick.class,!0).data(n).attr(o.percentBarLayout.rightTick),this.animateToFunnelPercent(c,a,o.percentBarLayout.rightTick);var u=r.selectAll(t.FunnelChart.Selectors.percentBar.text.selector).data(a);this.animateToFunnelPercent(u.exit(),n,o.percentBarLayout.text).remove(),u.enter().append("text").classed(t.FunnelChart.Selectors.percentBar.text.class,!0).data(n).attr(o.percentBarLayout.text),this.animateToFunnelPercent(u,a,o.percentBarLayout.text).text((function(a){return e.formattingService.formatValue(a.percent,t.valueFormatter.getLocalizedString("Percentage1"))})),t.SVGUtil.flushAllD3TransitionsIfNeeded(i.visualInitOptions)},i})(t.BaseAnimator);t.WebFunnelAnimator=a})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=1500,a="linear",i=(function(i){function r(e){var t=i.call(this,e)||this;return t.lastUpdateTime=null,t}return __extends(r,i),r.prototype.refreshLastUpdate=function(){this.lastUpdateTime=Date.now()},r.prototype.getDuration=function(){if(this.lastUpdateTime){var e=Math.min(Date.now()-this.lastUpdateTime,t);return Math.max(this.animationDuration,e)}return this.animationDuration},r.prototype.getEasing=function(){return a},r.prototype.animate=function(t){var a=t.mainGraphicsContext,i=this.getDuration();return a.transition().duration(i).ease(this.getEasing()).attrTween("transform",(function(a,i,r){return function(a){return e.SVGUtil.translate(-(t.xTranslation*a),0)}})),{failed:!1}},r})(e.BaseAnimator);e.RealTimeLineChartAnimator=i;var r=(function(t){function i(e){return t.call(this,e)||this}return __extends(i,t),i.prototype.animate=function(t){var a={failed:!0,shapes:null},i=t.viewModel,r=this.previousViewModel,o=i.categories.length*i.series.length;return o>e.AnimatorCommon.MaxDataPointsToAnimate?a:(r&&(a=this.animateDefaultShapes(t.viewModel,t.series,t.layout,t.itemCS)),this.previousViewModel=i,a)},i.prototype.getEasing=function(){return a},i.prototype.animateDefaultShapes=function(t,a,i,r){var o=a.selectAll(r.selector),n=o.data((function(e){return e.data}),(function(e){return e.key}));return n.enter().append("rect").attr("class",(function(e){return r.class.concat(e.highlight?" highlight":"")})),n.style("fill",(function(e){return e.color})).style("fill-opacity",(function(a){return e.ColumnUtil.getFillOpacity(a.selected,a.highlight,!1,t.hasHighlights)})).transition().ease(this.getEasing()).duration(this.animationDuration).attr(i.shapeLayout),n.exit().remove(),{failed:!1,shapes:n}},i})(e.BaseAnimator);e.DashboardColumnChartAnimator=r})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={})),define("Visuals/animators/treemapAnimator",["require","exports","Visuals/visuals/treemap/util"],(function(e,t,a){var i=powerbi,r=i.visuals,o=r.ColumnUtil,n=r.BaseAnimator,s=(function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.animate=function(e){var t={failed:!0,shapes:null,highlightShapes:null,majorLabels:null,minorLabels:null},a=e.viewModel,i=this.previousViewModel;return i&&(a.hasHighlights&&!i.hasHighlights?t=this.animateNormalToHighlighted(e):a.hasHighlights&&i.hasHighlights?t=this.animateHighlightedToHighlighted(e):!a.hasHighlights&&i.hasHighlights&&(t=this.animateHighlightedToNormal(e))),this.previousViewModel=a,t},t.prototype.animateNormalToHighlighted=function(e){var t=!1,i=!0,r=this.animateDefaultShapes(e.shapeGraphicsContext,e.nodes,t,i,e.layout),o=e.shapeGraphicsContext.selectAll("."+a.classes.highlight).data(e.highlightNodes,(function(e){return e.key+"highlight"}));o.enter().append("rect").attr("class",e.layout.highlightShapeClass).attr(e.layout.shapeLayout),o.style("fill",(function(e){return a.getFill(e,!0)})).style("fill-opacity",(function(e){return a.getFillOpacity(e,t,i,!0)})).transition().duration(this.animationDuration).attr(e.layout.highlightShapeLayout),o.exit().remove();var n=this.animateDefaultMajorLabels(e.labelGraphicsContext,e.majorLabeledNodes,e.labelSettings,e.layout),s=this.animateDefaultMinorLabels(e.labelGraphicsContext,e.minorLabeledNodes,e.labelSettings,e.layout);return{failed:!1,shapes:r,highlightShapes:o,majorLabels:n,minorLabels:s}},t.prototype.animateHighlightedToHighlighted=function(e){var t=!1,i=!0,r=this.animateDefaultShapes(e.shapeGraphicsContext,e.nodes,t,i,e.layout);e.shapeGraphicsContext.selectAll("."+a.classes.highlight).data(e.highlightNodes,(function(e){return e.key+"highlight"}));var o=this.animateDefaultHighlightShapes(e.shapeGraphicsContext,e.highlightNodes,t,i,e.layout),n=this.animateDefaultMajorLabels(e.labelGraphicsContext,e.majorLabeledNodes,e.labelSettings,e.layout),s=this.animateDefaultMinorLabels(e.labelGraphicsContext,e.minorLabeledNodes,e.labelSettings,e.layout);return{failed:!1,shapes:r,highlightShapes:o,majorLabels:n,minorLabels:s}},t.prototype.animateHighlightedToNormal=function(e){var t=!!e.interactivityService&&e.interactivityService.hasSelection(),i=e.shapeGraphicsContext.selectAll("."+a.classes.node).data(e.nodes,(function(e){return e.key}));i.enter().append("rect").attr("class",e.layout.shapeClass),i.transition().duration(this.animationDuration).style("fill",(function(e){return a.getFill(e,!1)})).style("fill-opacity",(function(e){return o.getFillOpacity(e.selected,!1,e.selected,!e.selected)})).attr(e.layout.shapeLayout).transition().duration(0).delay(this.animationDuration).style("fill-opacity",(function(e){return o.getFillOpacity(e.selected,!1,t,!1)})),i.exit().remove();var r=e.shapeGraphicsContext.selectAll("."+a.classes.highlight).data(e.nodes,(function(e){return e.key+"highlight"}));r.enter().append("rect").attr("class",e.layout.highlightShapeClass),r.style("fill",(function(e){return a.getFill(e,!0)})).style("fill-opacity",(function(e){return o.getFillOpacity(e.selected,!0,e.selected,!e.selected)})).transition().duration(this.animationDuration).attr(t?e.layout.zeroShapeLayout:e.layout.shapeLayout).remove(),r.exit().remove();var n=this.animateDefaultMajorLabels(e.labelGraphicsContext,e.majorLabeledNodes,e.labelSettings,e.layout),s=this.animateDefaultMinorLabels(e.labelGraphicsContext,e.minorLabeledNodes,e.labelSettings,e.layout);return{failed:!1,shapes:i,highlightShapes:r,majorLabels:n,minorLabels:s}},t.prototype.animateDefaultShapes=function(e,t,i,r,o){var n=!1,s=e.selectAll("."+a.classes.node).data(t,(function(e){return e.key}));return s.enter().append("rect").attr("class",o.shapeClass),s.transition().duration(this.animationDuration).style("fill",(function(e){return a.getFill(e,n)})).style("fill-opacity",(function(e){return a.getFillOpacity(e,i,r,n)})).attr(o.shapeLayout),s.exit().remove(),s},t.prototype.animateDefaultHighlightShapes=function(e,t,i,r,o){var n=!0,s=e.selectAll("."+a.classes.highlight).data(t,(function(e){return e.key+"highlight"}));return s.enter().append("rect").attr("class",o.highlightShapeClass),s.transition().duration(this.animationDuration).style("fill",(function(e){return a.getFill(e,n)})).style("fill-opacity",(function(e){return a.getFillOpacity(e,i,r,n)})).attr(o.highlightShapeLayout),s.exit().remove(),s},t.prototype.animateDefaultMajorLabels=function(e,t,i,r){var o=e.selectAll("."+a.classes.major).data(t,(function(e){return e.key}));return o.enter().append("text").attr("class",r.majorLabelClass),o.text(r.majorLabelText).style("fill",(function(){return i.labelColor})).transition().duration(this.animationDuration).attr(r.majorLabelLayout),o.exit().remove(),o},t.prototype.animateDefaultMinorLabels=function(e,t,i,r){var o=e.selectAll("."+a.classes.minor).data(t,(function(e){return e.key}));return o.enter().append("text").attr("class",r.minorLabelClass),o.text(r.minorLabelText).style("fill",(function(){return i.labelColor})).transition().duration(this.animationDuration).attr(r.minorLabelLayout),o.exit().remove(),o},t})(n);t.WebTreemapAnimator=s}));var powerbi;!(function(e){var t;!(function(t){t.StandardObjectProperties={axisEnd:{displayName:e.data.createDisplayNameGetter("Visual_Axis_End"),description:e.data.createDisplayNameGetter("Visual_Axis_EndDescription"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{variant:[{numeric:!0},{dateTime:!0}]},suppressFormatPainterCopy:!0},axisScale:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Scale"),type:{enumeration:t.axisScale.type}},axisStart:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Start"),description:e.data.createDisplayNameGetter("Visual_Axis_StartDescription"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{variant:[{numeric:!0},{dateTime:!0}]},suppressFormatPainterCopy:!0},axisStyle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Style"),type:{enumeration:t.axisStyle.type}},axisType:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Type"),type:{enumeration:t.axisType.type}},backColor:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_BackColor"),description:e.data.createDisplayNameGetter("Visual_Tablix_BackColor_Desc"),type:{fill:{solid:{color:!0}}}},dataColor:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},dataLabelColor:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Color"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Color_Description"),type:{fill:{solid:{color:!0}}}},dataLabelDecimalPoints:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Decimal_Points"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}},dataLabelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),description:e.data.createDisplayNameGetter("Visual_DisplayUnitsDescription"),type:{formatting:{labelDisplayUnits:!0}},suppressFormatPainterCopy:!0},dataLabelHorizontalPosition:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Horizontal_Position"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Horizontal_Position_Description"),type:{enumeration:t.referenceLineDataLabelHorizontalPosition.type}},dataLabelText:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Text"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Text_Description"),type:{enumeration:t.labelText.type}},dataLabelShow:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Show_Description"),type:{bool:!0}},dataLabelVerticalPosition:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Vertical_Position"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Vertical_Position_Description"),type:{enumeration:t.referenceLineDataLabelVerticalPosition.type}},defaultColor:{displayName:e.data.createDisplayNameGetter("Visual_DefaultColor"),type:{fill:{solid:{color:!0}}}},fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}},fontColor:{displayName:e.data.createDisplayNameGetter("Visual_FontColor"),description:e.data.createDisplayNameGetter("Visual_Tablix_FontColor_Desc"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}},fontFamily:{displayName:e.data.createDisplayNameGetter("Visual_FontFamily"),type:{formatting:{fontFamily:!0}}},formatString:{type:{formatting:{formatString:!0}}},image:{type:{image:{}}},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_LegendTitleColor"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),description:e.data.createDisplayNameGetter("Visual_DisplayUnitsDescription"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),description:e.data.createDisplayNameGetter("Visual_PrecisionDescription"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}},legendPosition:{displayName:e.data.createDisplayNameGetter("Visual_LegendPosition"),description:e.data.createDisplayNameGetter("Visual_LegendPositionDescription"),type:{enumeration:t.legendPosition.type}},legendTitle:{displayName:e.data.createDisplayNameGetter("Visual_LegendName"),description:e.data.createDisplayNameGetter("Visual_LegendNameDescription"),type:{text:!0},suppressFormatPainterCopy:!0},lineColor:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Color"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Color_Description"),type:{fill:{solid:{color:!0}}}},titleColor:{displayName:e.data.createDisplayNameGetter("Visual_AxisTitleColor"),type:{fill:{solid:{color:!0}}}},titleFontSize:{displayName:e.data.createDisplayNameGetter("Visual_AxisTitleTextSize"),type:{formatting:{fontSize:!0}}},titleText:{displayName:e.data.createDisplayNameGetter("Visual_AxisTitleText"),type:{text:!0,suppressFormatPainterCopy:!0}},outline:{displayName:e.data.createDisplayNameGetter("Visual_Outline"),type:{enumeration:t.outline.type}},outlineColor:{displayName:e.data.createDisplayNameGetter("Visual_OutlineColor"),description:e.data.createDisplayNameGetter("Visual_OutlineColor_Desc"),type:{fill:{solid:{color:!0}}}},outlineWeight:{displayName:e.data.createDisplayNameGetter("Visual_OutlineWeight"),description:e.data.createDisplayNameGetter("Visual_OutlineWeight_Desc"),type:{numeric:!0}},referenceLinePosition:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Arrange"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Arrange_Description"),type:{enumeration:t.referenceLinePosition.type}},referenceLineStyle:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Style"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Style_Description"),type:{enumeration:t.lineStyle.type}},show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},showAllDataPoints:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint_Show_All"),type:{bool:!0}},showLegendTitle:{displayName:e.data.createDisplayNameGetter("Visual_LegendShowTitle"),description:e.data.createDisplayNameGetter("Visual_LegendShowTitleDescription"),type:{bool:!0}},strokeWidth:{displayName:e.data.createDisplayNameGetter("Visual_StrokeWidth"),type:{numeric:!0}},strokeLineJoin:{displayName:e.data.createDisplayNameGetter("Visual_StrokeLineJoin"),type:{enumeration:t.strokeLineJoin.type}},transparency:{displayName:e.data.createDisplayNameGetter("Visual_Background_Transparency"),description:e.data.createDisplayNameGetter("Visual_Background_TransparencyDescription"),type:{numeric:!0}},yAxisPosition:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_Position"),description:e.data.createDisplayNameGetter("Visual_YAxis_PositionDescription"),type:{enumeration:t.yAxisPosition.type}},legend:{displayName:e.data.createDisplayNameGetter("Visual_Legend"),description:e.data.createDisplayNameGetter("Visual_LegendDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_LegendPosition"),description:e.data.createDisplayNameGetter("Visual_LegendPositionDescription"),type:{enumeration:t.legendPosition.type}},showTitle:{displayName:e.data.createDisplayNameGetter("Visual_LegendShowTitle"),description:e.data.createDisplayNameGetter("Visual_LegendShowTitleDescription"),type:{bool:!0}},titleText:{displayName:e.data.createDisplayNameGetter("Visual_LegendName"),description:e.data.createDisplayNameGetter("Visual_LegendNameDescription"),type:{text:!0},suppressFormatPainterCopy:!0},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_LegendTitleColor"),type:{fill:{solid:{color:!0}}}},fontFamily:{displayName:e.data.createDisplayNameGetter("Visual_FontFamily"),type:{formatting:{fontFamily:!0}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}}}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){e.animatedTextObjectDescs={general:{properties:{formatString:e.StandardObjectProperties.formatString}}},e.animatedNumberCapabilities={objects:e.animatedTextObjectDescs,dataViewMappings:[{single:{role:"Values"}}],supportsSelection:!1}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.basicShapeCapabilities={objects:{line:{displayName:e.data.createDisplayNameGetter("Visual_BasicShape_Line"),properties:{lineColor:{displayName:e.data.createDisplayNameGetter("Visual_BasicShape_LineColor"),type:{fill:{solid:{color:!0}}}},transparency:t.StandardObjectProperties.transparency,weight:{displayName:e.data.createDisplayNameGetter("Visual_BasicShape_Weight"),type:{numeric:!0}},roundEdge:{displayName:e.data.createDisplayNameGetter("Visual_BasicShape_RoundEdges"),type:{numeric:!0}}}},fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),properties:{show:t.StandardObjectProperties.show,fillColor:{displayName:e.data.createDisplayNameGetter("Visual_BasicShape_FillColor"),type:{fill:{solid:{color:!0}}}},transparency:t.StandardObjectProperties.transparency}},rotation:{displayName:e.data.createDisplayNameGetter("Visual_BasicShape_Rotate"),properties:{angle:{displayName:e.data.createDisplayNameGetter("Visual_BasicShape_Rotate"),type:{numeric:!0}}}},general:{properties:{shapeType:{type:{text:!0},suppressFormatPainterCopy:!0}}}},suppressDefaultTitle:!0,suppressDefaultPadding:!0,canRotate:!1,supportsSelection:!1},t.basicShapeProps={general:{shapeType:{objectName:"general",propertyName:"shapeType"}},line:{transparency:{objectName:"line",propertyName:"transparency"},weight:{objectName:"line",propertyName:"weight"},roundEdge:{objectName:"line",propertyName:"roundEdge"},lineColor:{objectName:"line",propertyName:"lineColor"}},fill:{transparency:{objectName:"fill",propertyName:"transparency"},fillColor:{objectName:"fill",propertyName:"fillColor"},show:{objectName:"fill",propertyName:"show"}},rotation:{angle:{objectName:"rotation",propertyName:"angle"}}}})(t=e.visuals||(e.visuals={}));
})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function a(a,i){void 0===a&&(a=!1),void 0===i&&(i=!1);var r={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Axis"),description:e.data.createDisplayNameGetter("Role_DisplayName_AxisDescription"),cartesianKind:0},{name:"Series",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Legend"),description:e.data.createDisplayNameGetter("Role_DisplayName_LegendDescription")},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Value"),requiredTypes:[{numeric:!0},{integer:!0}],cartesianKind:1},{name:"Gradient",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Gradient"),description:e.data.createDisplayNameGetter("Role_DisplayName_GradientDescription"),requiredTypes:[{numeric:!0},{integer:!0}],joinPredicate:0},{name:"Tooltips",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Tooltips"),joinPredicate:0}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:t.StandardObjectProperties.formatString,responsive:{displayName:e.data.createDisplayNameGetter("Visual_General_ResponsiveLabel"),description:e.data.createDisplayNameGetter("Visual_General_ResponsiveLabelDescription"),type:{bool:!0}},responsiveLegacy:{type:{bool:!0}}}},legend:t.StandardObjectProperties.legend,categoryAxis:{displayName:a?e.data.createDisplayNameGetter("Visual_YAxis"):e.data.createDisplayNameGetter("Visual_XAxis"),properties:{show:t.StandardObjectProperties.show,position:t.StandardObjectProperties.yAxisPosition,axisScale:t.StandardObjectProperties.axisScale,start:t.StandardObjectProperties.axisStart,end:t.StandardObjectProperties.axisEnd,axisType:t.StandardObjectProperties.axisType,showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:a?e.data.createDisplayNameGetter("Visual_Axis_YTitleDescription"):e.data.createDisplayNameGetter("Visual_Axis_XTitleDescription"),type:{bool:!0}},axisStyle:t.StandardObjectProperties.axisStyle,labelColor:t.StandardObjectProperties.labelColor,fontFamily:t.StandardObjectProperties.fontFamily,fontSize:t.StandardObjectProperties.fontSize,labelDisplayUnits:t.StandardObjectProperties.labelDisplayUnits,labelPrecision:t.StandardObjectProperties.labelPrecision,concatenateLabels:{displayName:e.data.createDisplayNameGetter("Visual_Axis_ConcatenateLabels"),description:e.data.createDisplayNameGetter("Visual_Axis_ConcatenateLabelsDescription"),type:{bool:!0}},preferredCategoryWidth:{displayName:e.data.createDisplayNameGetter("Visual_Category_Width"),type:{numeric:!0}},titleColor:t.StandardObjectProperties.titleColor,titleFontFamily:t.StandardObjectProperties.fontFamily,titleFontSize:t.StandardObjectProperties.titleFontSize,titleText:t.StandardObjectProperties.titleText}},valueAxis:{displayName:a?e.data.createDisplayNameGetter("Visual_XAxis"):e.data.createDisplayNameGetter("Visual_YAxis"),properties:{show:t.StandardObjectProperties.show,position:t.StandardObjectProperties.yAxisPosition,axisScale:t.StandardObjectProperties.axisScale,start:t.StandardObjectProperties.axisStart,end:t.StandardObjectProperties.axisEnd,intersection:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Intersection"),type:{numeric:!0},placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto")},showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:a?e.data.createDisplayNameGetter("Visual_Axis_YTitleDescription"):e.data.createDisplayNameGetter("Visual_Axis_XTitleDescription"),type:{bool:!0}},axisStyle:t.StandardObjectProperties.axisStyle,labelColor:t.StandardObjectProperties.labelColor,fontFamily:t.StandardObjectProperties.fontFamily,fontSize:t.StandardObjectProperties.fontSize,labelDisplayUnits:t.StandardObjectProperties.labelDisplayUnits,labelPrecision:t.StandardObjectProperties.labelPrecision,titleColor:t.StandardObjectProperties.titleColor,titleFontFamily:t.StandardObjectProperties.fontFamily,titleFontSize:t.StandardObjectProperties.titleFontSize,titleText:t.StandardObjectProperties.titleText}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:t.StandardObjectProperties.defaultColor,showAllDataPoints:t.StandardObjectProperties.showAllDataPoints,fill:t.StandardObjectProperties.fill,fillRule:{displayName:e.data.createDisplayNameGetter("Visual_Gradient"),type:{fillRule:{}},rule:{inputRole:"Gradient",output:{property:"fill",selector:["Category"]}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),description:e.data.createDisplayNameGetter("Visual_DataPointsLabelsDescription"),properties:{show:t.StandardObjectProperties.show,showSeries:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:t.StandardObjectProperties.dataColor,labelDisplayUnits:t.StandardObjectProperties.dataLabelDisplayUnits,labelPrecision:__assign({},t.StandardObjectProperties.labelPrecision,{suppressFormatPainterCopy:!0}),labelOrientation:{displayName:e.data.createDisplayNameGetter("Visual_LabelOrientation"),type:{enumeration:t.labelOrientation.type}},labelPosition:{displayName:e.data.createDisplayNameGetter("Visual_Position"),type:{enumeration:t.labelPosition.type}},showAll:{displayName:e.data.createDisplayNameGetter("Visual_LabelSeriesShowAll"),type:{bool:!0}},fontSize:t.StandardObjectProperties.fontSize,labelDensity:{displayName:e.data.createDisplayNameGetter("Visual_LabelDensity"),type:{formatting:{labelDensity:!0}}}}},plotArea:{displayName:e.data.createDisplayNameGetter("Visual_Plot"),properties:{transparency:t.StandardObjectProperties.transparency,image:t.StandardObjectProperties.image}},y1AxisReferenceLine:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Description"),suppressFormatPainterCopy:!0,properties:{show:t.StandardObjectProperties.show,displayName:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_DisplayName"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_DisplayName_Description"),type:{text:!0}},value:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Value"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Value_Description"),type:{numeric:!0}},lineColor:t.StandardObjectProperties.lineColor,transparency:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency_Description"),type:{numeric:!0}},style:t.StandardObjectProperties.referenceLineStyle,position:t.StandardObjectProperties.referenceLinePosition,dataLabelShow:t.StandardObjectProperties.dataLabelShow,dataLabelText:t.StandardObjectProperties.dataLabelText,dataLabelColor:t.StandardObjectProperties.dataLabelColor,dataLabelDecimalPoints:t.StandardObjectProperties.dataLabelDecimalPoints,dataLabelHorizontalPosition:t.StandardObjectProperties.dataLabelHorizontalPosition,dataLabelVerticalPosition:t.StandardObjectProperties.dataLabelVerticalPosition,dataLabelDisplayUnits:t.StandardObjectProperties.dataLabelDisplayUnits}},trend:{displayName:e.data.createDisplayNameGetter("Visual_Trend_Line"),suppressFormatPainterCopy:!0,properties:{show:{type:{bool:!0}},displayName:{displayName:e.data.createDisplayNameGetter("Visual_Trend_Line_DisplayName"),description:e.data.createDisplayNameGetter("Visual_Trend_Line_DisplayName_Description"),type:{text:!0}},lineColor:{displayName:e.data.createDisplayNameGetter("Visual_Trend_Line_Color"),description:e.data.createDisplayNameGetter("Visual_Trend_Line_Color_Description"),type:{fill:{solid:{color:!0}}}},transparency:{displayName:e.data.createDisplayNameGetter("Visual_Trend_Line_Transparency"),description:e.data.createDisplayNameGetter("Visual_Trend_Line_Transparency_Description"),type:{numeric:!0}},style:{displayName:e.data.createDisplayNameGetter("Visual_Trend_Line_Style"),description:e.data.createDisplayNameGetter("Visual_Trend_Line_Style_Description"),type:{enumeration:t.lineStyle.type}},combineSeries:{displayName:e.data.createDisplayNameGetter("Visual_Trend_Line_Combine_Series"),description:e.data.createDisplayNameGetter("Visual_Trend_Line_Combine_Series_Description"),type:{bool:!0}},useHighlightValues:{displayName:e.data.createDisplayNameGetter("Visual_Trend_Line_UseHighlightValues"),description:e.data.createDisplayNameGetter("Visual_Trend_Line_UseHighlightValues_Description"),type:{bool:!0}}}},filters:{properties:{filteredToUniqueValue:{type:{bool:!0}}}}},dataViewMappings:[{conditions:[{Series:{max:0},Gradient:{max:0}},{Series:{min:1,max:1},Y:{max:1},Gradient:{max:0}},{Series:{max:0},Y:{min:0,max:1},Gradient:{max:1}}],categorical:{categories:{for:{in:"Category"},dataReductionAlgorithm:{window:{count:100}}},values:{group:{by:"Series",select:[{for:{in:"Y"}},{bind:{to:"Gradient"}},{for:{in:"Tooltips"}}],dataReductionAlgorithm:{top:{count:60}}}},rowCount:{preferred:{min:2},supported:{min:0}}}},{conditions:[{Series:{max:0},Gradient:{max:0}},{Series:{min:1,max:1},Y:{max:1},Gradient:{max:0}},{Series:{max:0},Y:{min:0,max:1},Gradient:{max:1}}],requiredProperties:[{objectName:"trend",propertyName:"show"}],usage:{regression:{combineSeries:{objectName:"trend",propertyName:"combineSeries"}}},categorical:{categories:{for:{in:"regression.X"}},values:{group:{by:"regression.Series",select:[{for:{in:"regression.Y"}}]}}}}],supportsHighlight:!0,sorting:{default:{}},drilldown:{roles:["Category"]},grouping:{groupingRules:[{condition:{Category:{min:1,max:1},Y:{min:1,max:1},Series:{max:0},Gradient:{max:0}},groupingTargetRole:"Series",kind:0},{condition:{Category:{min:1,max:1},Y:{min:1},Series:{max:0},Gradient:{max:0}},groupingTargetRole:"Category",kind:1},{condition:{Category:{min:1,max:1},Y:{min:0,max:1},Series:{max:0},Gradient:{max:1}},groupingTargetRole:"Category",kind:1},{condition:{Category:{max:0},Y:{min:1,max:1},Series:{max:1},Gradient:{max:0}},groupingTargetRole:"Series",kind:0}]}};return i||(r.objects.referenceLine={displayName:e.data.createDisplayNameGetter("Visual_Reference_Line"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Description"),suppressFormatPainterCopy:!0,properties:{show:t.StandardObjectProperties.show,displayName:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_DisplayName"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_DisplayName_Description"),type:{text:!0}},value:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Value"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Value_Description"),type:{numeric:!0}},lineColor:t.StandardObjectProperties.lineColor,transparency:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency_Description"),type:{numeric:!0}},style:t.StandardObjectProperties.referenceLineStyle,position:t.StandardObjectProperties.referenceLinePosition,dataLabelShow:t.StandardObjectProperties.dataLabelShow,dataLabelText:t.StandardObjectProperties.dataLabelText,dataLabelColor:t.StandardObjectProperties.dataLabelColor,dataLabelDecimalPoints:t.StandardObjectProperties.dataLabelDecimalPoints,dataLabelHorizontalPosition:t.StandardObjectProperties.dataLabelHorizontalPosition,dataLabelVerticalPosition:t.StandardObjectProperties.dataLabelVerticalPosition,dataLabelDisplayUnits:t.StandardObjectProperties.dataLabelDisplayUnits}}),r}t.getColumnChartCapabilities=a,t.columnChartProps={dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"},showAllDataPoints:{objectName:"dataPoint",propertyName:"showAllDataPoints"}},general:{formatString:{objectName:"general",propertyName:"formatString"}},categoryAxis:{axisType:{objectName:"categoryAxis",propertyName:"axisType"}},legend:{labelColor:{objectName:"legend",propertyName:"labelColor"}},plotArea:{image:{objectName:"plotArea",propertyName:"image"},transparency:{objectName:"plotArea",propertyName:"transparency"}}}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function a(a){var i={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_ComboChart_Category"),description:e.data.createDisplayNameGetter("Role_ComboChart_CategoryDescription"),cartesianKind:0},{name:"Series",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_ComboChart_Series")},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_ComboChart_Y"),description:e.data.createDisplayNameGetter("Role_ComboChart_YDescription"),requiredTypes:[{numeric:!0},{integer:!0}],cartesianKind:1},{name:"Y2",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_ComboChart_Y2"),description:e.data.createDisplayNameGetter("Role_ComboChart_Y2Description"),requiredTypes:[{numeric:!0},{integer:!0}],cartesianKind:1},{name:"Tooltips",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Tooltips"),joinPredicate:0}],objects:{general:{properties:{formatString:t.StandardObjectProperties.formatString,visualType1:{type:{text:!0}},visualType2:{type:{text:!0}},responsive:{displayName:e.data.createDisplayNameGetter("Visual_General_ResponsiveLabel"),description:e.data.createDisplayNameGetter("Visual_General_ResponsiveLabelDescription"),type:{bool:!0}},responsiveLegacy:{type:{bool:!0}}}},legend:t.StandardObjectProperties.legend,categoryAxis:{displayName:e.data.createDisplayNameGetter("Visual_XAxis"),properties:{show:t.StandardObjectProperties.show,axisScale:t.StandardObjectProperties.axisScale,start:t.StandardObjectProperties.axisStart,end:t.StandardObjectProperties.axisEnd,axisType:t.StandardObjectProperties.axisType,showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_XTitleDescription"),type:{bool:!0}},axisStyle:t.StandardObjectProperties.axisStyle,labelColor:t.StandardObjectProperties.labelColor,fontFamily:t.StandardObjectProperties.fontFamily,fontSize:t.StandardObjectProperties.fontSize,labelDisplayUnits:t.StandardObjectProperties.labelDisplayUnits,labelPrecision:t.StandardObjectProperties.labelPrecision,preferredCategoryWidth:{displayName:e.data.createDisplayNameGetter("Visual_Category_Width"),type:{numeric:!0}},titleColor:t.StandardObjectProperties.titleColor,titleFontFamily:t.StandardObjectProperties.fontFamily,titleFontSize:t.StandardObjectProperties.titleFontSize,titleText:t.StandardObjectProperties.titleText}},valueAxis:{displayName:e.data.createDisplayNameGetter("Visual_YAxis"),properties:{show:t.StandardObjectProperties.show,axisLabel:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_ColumnTitle"),type:{none:!0}},position:t.StandardObjectProperties.yAxisPosition,axisScale:t.StandardObjectProperties.axisScale,start:t.StandardObjectProperties.axisStart,end:t.StandardObjectProperties.axisEnd,showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_YTitleDescription"),type:{bool:!0}},axisStyle:t.StandardObjectProperties.axisStyle,labelColor:t.StandardObjectProperties.labelColor,fontFamily:t.StandardObjectProperties.fontFamily,fontSize:t.StandardObjectProperties.fontSize,labelDisplayUnits:t.StandardObjectProperties.labelDisplayUnits,labelPrecision:t.StandardObjectProperties.labelPrecision,titleColor:t.StandardObjectProperties.titleColor,titleFontFamily:t.StandardObjectProperties.fontFamily,titleFontSize:t.StandardObjectProperties.titleFontSize,titleText:t.StandardObjectProperties.titleText,secShow:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_ShowSecondary"),type:{bool:!0}},secAxisLabel:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_LineTitle"),type:{none:!0}},secPosition:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_Position"),type:{enumeration:t.yAxisPosition.type}},secAxisScale:t.StandardObjectProperties.axisScale,secStart:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Start"),description:e.data.createDisplayNameGetter("Visual_Axis_StartDescription"),type:{numeric:!0}},secEnd:{displayName:e.data.createDisplayNameGetter("Visual_Axis_End"),description:e.data.createDisplayNameGetter("Visual_Axis_EndDescription"),type:{numeric:!0}},secShowAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_YTitleDescription"),type:{bool:!0}},secAxisStyle:t.StandardObjectProperties.axisStyle,secLabelColor:t.StandardObjectProperties.labelColor,secFontFamily:t.StandardObjectProperties.fontFamily,secFontSize:t.StandardObjectProperties.fontSize,secLabelDisplayUnits:t.StandardObjectProperties.labelDisplayUnits,secLabelPrecision:t.StandardObjectProperties.labelPrecision,secTitleColor:t.StandardObjectProperties.titleColor,secTitleFontFamily:t.StandardObjectProperties.fontFamily,secTitleFontSize:t.StandardObjectProperties.titleFontSize,secTitleText:t.StandardObjectProperties.titleText}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:__assign({},t.StandardObjectProperties.defaultColor,{displayName:e.data.createDisplayNameGetter("Visual_DefaultColumnColor")}),showAllDataPoints:t.StandardObjectProperties.showAllDataPoints,fill:t.StandardObjectProperties.fill,fillRule:{displayName:e.data.createDisplayNameGetter("Visual_Gradient"),type:{fillRule:{}},rule:{inputRole:"Gradient",output:{property:"fill",selector:["Category"]}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),description:e.data.createDisplayNameGetter("Visual_DataPointsLabelsDescription"),properties:{show:t.StandardObjectProperties.show,color:t.StandardObjectProperties.dataColor,labelDisplayUnits:t.StandardObjectProperties.dataLabelDisplayUnits,labelPrecision:__assign({},t.StandardObjectProperties.labelPrecision,{suppressFormatPainterCopy:!0}),labelOrientation:{displayName:e.data.createDisplayNameGetter("Visual_LabelOrientation"),type:{enumeration:t.labelOrientation.type}},labelPosition:{displayName:e.data.createDisplayNameGetter("Visual_Position"),type:{enumeration:t.labelPosition.type}},fontSize:t.StandardObjectProperties.fontSize,labelDensity:{displayName:e.data.createDisplayNameGetter("Visual_LabelDensity"),type:{formatting:{labelDensity:!0}}}}},lineStyles:{displayName:e.data.createDisplayNameGetter("Visual_Shapes"),description:e.data.createDisplayNameGetter("Visual_ShapesDescription"),properties:{strokeWidth:t.StandardObjectProperties.strokeWidth,strokeLineJoin:t.StandardObjectProperties.strokeLineJoin}},plotArea:{displayName:e.data.createDisplayNameGetter("Visual_Plot"),properties:{transparency:t.StandardObjectProperties.transparency,image:t.StandardObjectProperties.image}}},dataViewMappings:[{conditions:[{Category:{max:1},Series:{max:0}},{Category:{max:1},Series:{min:1,max:1},Y:{max:1}}],categorical:{categories:{for:{in:"Category"},dataReductionAlgorithm:{window:{count:100}}},values:{group:{by:"Series",select:[{for:{in:"Y"}},{for:{in:"Tooltips"}}],dataReductionAlgorithm:{top:{count:60}}}},rowCount:{preferred:{min:2},supported:{min:0}}}},{conditions:[{Category:{max:1},Series:{max:0},Y2:{min:1}},{Category:{max:1},Series:{min:1,max:1},Y:{max:1},Y2:{min:1}}],categorical:{categories:{for:{in:"Category"},dataReductionAlgorithm:{window:{count:100}}},values:{select:[{for:{in:"Y2"}}]},rowCount:{preferred:{min:2},supported:{min:0}}}},{conditions:[{Category:{max:1},Series:{max:0}},{Category:{max:1},Series:{min:1,max:1},Y:{max:1}}],requiredProperties:[{objectName:"trend",propertyName:"show"}],usage:{regression:{combineSeries:{objectName:"trend",propertyName:"combineSeries"}}},categorical:{categories:{for:{in:"regression.X"}},values:{group:{by:"regression.Series",select:[{for:{in:"regression.Y"}}]}}}}],supportsHighlight:!0,sorting:{default:{}},drilldown:{roles:["Category"]},grouping:{groupingRules:[{condition:{Category:{min:1,max:1},Y:{min:1,max:1},Series:{max:0},Gradient:{max:0}},groupingTargetRole:"Series",kind:0},{condition:{Category:{max:0},Y:{min:1,max:1},Series:{min:1,max:1},Gradient:{max:0}},groupingTargetRole:"Series",kind:0}]}};return a||(i.objects.trend={displayName:e.data.createDisplayNameGetter("Visual_Trend_Line"),properties:{show:{type:{bool:!0}},displayName:{type:{text:!0}},lineColor:{displayName:e.data.createDisplayNameGetter("Visual_Trend_Line_Color"),description:e.data.createDisplayNameGetter("Visual_Trend_Line_Color_Description"),type:{fill:{solid:{color:!0}}}},transparency:{displayName:e.data.createDisplayNameGetter("Visual_Trend_Line_Transparency"),description:e.data.createDisplayNameGetter("Visual_Trend_Line_Transparency_Description"),type:{numeric:!0}},style:{displayName:e.data.createDisplayNameGetter("Visual_Trend_Line_Style"),description:e.data.createDisplayNameGetter("Visual_Trend_Line_Style_Description"),type:{enumeration:t.lineStyle.type}},combineSeries:{displayName:e.data.createDisplayNameGetter("Visual_Trend_Line_Combine_Series"),description:e.data.createDisplayNameGetter("Visual_Trend_Line_Combine_Series_Description"),type:{bool:!0}},useHighlightValues:{displayName:e.data.createDisplayNameGetter("Visual_Trend_Line_UseHighlightValues"),description:e.data.createDisplayNameGetter("Visual_Trend_Line_UseHighlightValues_Description"),type:{bool:!0}}}}),i}t.getComboChartCapabilities=a,t.comboChartProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},valueAxis:{secShow:{objectName:"valueAxis",propertyName:"secShow"}},legend:{labelColor:{objectName:"legend",propertyName:"labelColor"}},dataPoint:{showAllDataPoints:{objectName:"dataPoint",propertyName:"showAllDataPoints"}}}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.donutChartCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Legend"),description:e.data.createDisplayNameGetter("Role_DisplayName_LegendDescription")},{name:"Series",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Details"),description:e.data.createDisplayNameGetter("Role_DisplayName_DetailsDonutChartDescription")},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values"),description:e.data.createDisplayNameGetter("Role_DisplayName_ValuesDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"Tooltips",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Tooltips"),joinPredicate:0}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:t.StandardObjectProperties.formatString}},legend:t.StandardObjectProperties.legend,dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:t.StandardObjectProperties.defaultColor,fill:t.StandardObjectProperties.fill}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DetailLabels"),properties:{show:t.StandardObjectProperties.show,color:t.StandardObjectProperties.dataColor,labelDisplayUnits:t.StandardObjectProperties.dataLabelDisplayUnits,labelPrecision:__assign({},t.StandardObjectProperties.labelPrecision,{suppressFormatPainterCopy:!0}),fontSize:__assign({},t.StandardObjectProperties.fontSize,{suppressFormatPainterCopy:!0}),labelStyle:{displayName:e.data.createDisplayNameGetter("Visual_LabelStyle"),type:{enumeration:t.labelStyle.type}}}}},dataViewMappings:[{conditions:[{Category:{max:1},Series:{max:0}},{Category:{max:1},Series:{min:1,max:1},Y:{max:1}}],categorical:{categories:{for:{in:"Category"},dataReductionAlgorithm:{top:{}}},values:{group:{by:"Series",select:[{bind:{to:"Y"}},{for:{in:"Tooltips"}}],dataReductionAlgorithm:{top:{}}}},rowCount:{preferred:{min:2},supported:{min:1}}}}],sorting:{default:{}},supportsHighlight:!0,drilldown:{roles:["Category"]},grouping:{groupingRules:[{condition:{Category:{min:1,max:1},Y:{min:1,max:1},Series:{max:0}},groupingTargetRole:"Category",groupSourceTargetRole:"Series",kind:0},{condition:{Category:{min:1,max:1},Y:{min:1},Series:{max:0}},groupingTargetRole:"Category",kind:1},{condition:{Category:{max:0},Y:{min:1,max:1},Series:{max:1}},groupingTargetRole:"Series",kind:0}]}},t.donutChartProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"}},legend:{show:{objectName:"legend",propertyName:"show"},position:{objectName:"legend",propertyName:"position"},showTitle:{objectName:"legend",propertyName:"showTitle"},titleText:{objectName:"legend",propertyName:"titleText"},labelColor:{objectName:"legend",propertyName:"labelColor"}}}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.dataDotChartCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Axis"),description:e.data.createDisplayNameGetter("Role_DisplayName_AxisDescription")},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Value"),requiredTypes:[{numeric:!0},{integer:!0}]}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:t.StandardObjectProperties.formatString,responsive:{displayName:e.data.createDisplayNameGetter("Visual_General_ResponsiveLabel"),description:e.data.createDisplayNameGetter("Visual_General_ResponsiveLabelDescription"),type:{bool:!0}},responsiveLegacy:{type:{bool:!0}}}}},dataViewMappings:[{conditions:[{Category:{max:1},Y:{max:1}}],categorical:{categories:{for:{in:"Category"},dataReductionAlgorithm:{top:{}}},values:{select:[{for:{in:"Y"}}]}}}]}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.filledMapCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Location"),description:e.data.createDisplayNameGetter("Role_DisplayName_LocationFilledMapDescription"),preferredTypes:[{geography:{address:!0}},{geography:{city:!0}},{geography:{continent:!0}},{geography:{country:!0}},{geography:{county:!0}},{geography:{place:!0}},{geography:{postalCode:!0}},{geography:{region:!0}},{geography:{stateOrProvince:!0}}]},{name:"Series",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Legend"),description:e.data.createDisplayNameGetter("Role_DisplayName_LegendDescription")},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Latitude"),description:e.data.createDisplayNameGetter("Role_DisplayName_LatitudeFilledMapDescription"),preferredTypes:[{geography:{latitude:!0}}]},{name:"X",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Longitude"),description:e.data.createDisplayNameGetter("Role_DisplayName_LongitudeFilledMapDescription"),preferredTypes:[{geography:{longitude:!0}}]},{name:"Size",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Gradient"),description:e.data.createDisplayNameGetter("Role_DisplayName_GradientDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"Tooltips",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Tooltips"),joinPredicate:0}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:t.StandardObjectProperties.formatString}},legend:t.StandardObjectProperties.legend,dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:t.StandardObjectProperties.defaultColor,showAllDataPoints:t.StandardObjectProperties.showAllDataPoints,fill:t.StandardObjectProperties.fill,fillRule:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values"),description:e.data.createDisplayNameGetter("Role_DisplayName_ValuesDescription"),type:{fillRule:{}},rule:{conditions:[{Series:{max:0}}],inputRole:"Size",output:{property:"fill",selector:["Category"]}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),properties:{show:t.StandardObjectProperties.show,color:t.StandardObjectProperties.dataColor,labelDisplayUnits:t.StandardObjectProperties.labelDisplayUnits,labelPrecision:t.StandardObjectProperties.labelPrecision}},categoryLabels:{displayName:e.data.createDisplayNameGetter("Visual_CategoryLabels"),properties:{show:t.StandardObjectProperties.show}},mapControls:{displayName:e.data.createDisplayNameGetter("Visual_MapControls"),description:e.data.createDisplayNameGetter("Visual_MapControlsDescription"),properties:{autoZoom:{displayName:e.data.createDisplayNameGetter("Visual_AutoZoom"),type:{bool:!0}},zoomLevel:{type:{numeric:!0}},centerLatitude:{type:{numeric:!0}},centerLongitude:{type:{numeric:!0}}}}},dataViewMappings:[{conditions:[{Category:{max:1},Series:{max:1},X:{max:1},Y:{max:1},Size:{max:1}},{Category:{max:1},Series:{max:0},X:{max:1},Y:{max:1},Size:{max:1}}],categorical:{categories:{for:{in:"Category"},dataReductionAlgorithm:{top:{}}},values:{group:{by:"Series",select:[{bind:{to:"X"}},{bind:{to:"Y"}},{bind:{to:"Size"}},{for:{in:"Tooltips"}}],dataReductionAlgorithm:{top:{}}}},rowCount:{preferred:{min:2}},dataVolume:4}}],sorting:{custom:{},implicit:{clauses:[{role:"Size",direction:2}]}},drilldown:{roles:["Category"]}},t.filledMapProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"},showAllDataPoints:{objectName:"dataPoint",propertyName:"showAllDataPoints"}},legend:{show:{objectName:"legend",propertyName:"show"},position:{objectName:"legend",propertyName:"position"},showTitle:{objectName:"legend",propertyName:"showTitle"},titleText:{objectName:"legend",propertyName:"titleText"}},labels:{show:{objectName:"labels",propertyName:"show"},color:{objectName:"labels",propertyName:"color"},labelDisplayUnits:{objectName:"labels",propertyName:"labelDisplayUnits"},labelPrecision:{objectName:"labels",propertyName:"labelPrecision"}},categoryLabels:{show:{objectName:"categoryLabels",propertyName:"show"}},mapControls:{autoZoom:{objectName:"mapControls",propertyName:"autoZoom"},zoomLevel:{objectName:"mapControls",propertyName:"zoomLevel"},centerLatitude:{objectName:"mapControls",propertyName:"centerLatitude"},centerLongitude:{objectName:"mapControls",propertyName:"centerLongitude"}}}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.funnelChartCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Group"),description:e.data.createDisplayNameGetter("Role_DisplayName_GroupFunnelDescription")},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values"),description:e.data.createDisplayNameGetter("Role_DisplayName_ValuesDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"Gradient",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Gradient"),
description:e.data.createDisplayNameGetter("Role_DisplayName_GradientDescription"),requiredTypes:[{numeric:!0},{integer:!0}],joinPredicate:0},{name:"Tooltips",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Tooltips"),joinPredicate:0}],dataViewMappings:[{conditions:[{Category:{max:0},Gradient:{max:0}},{Category:{max:1},Y:{max:1},Gradient:{max:1}}],categorical:{categories:{for:{in:"Category"},dataReductionAlgorithm:{top:{}}},values:{select:[{for:{in:"Y"}},{bind:{to:"Gradient"}},{for:{in:"Tooltips"}}]},rowCount:{preferred:{min:1}}}}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:t.StandardObjectProperties.formatString}},categoryAxis:{displayName:e.data.createDisplayNameGetter("Visual_CategoryLabels"),description:e.data.createDisplayNameGetter("Visual_CategoryLabelOptionsDescription"),properties:{show:t.StandardObjectProperties.show,color:t.StandardObjectProperties.dataColor}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:t.StandardObjectProperties.defaultColor,fill:t.StandardObjectProperties.fill,fillRule:{displayName:e.data.createDisplayNameGetter("Visual_Gradient"),type:{fillRule:{}},rule:{inputRole:"Gradient",output:{property:"fill",selector:["Category"]}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),description:e.data.createDisplayNameGetter("Visual_DataPointsLabelsDescription"),properties:{show:t.StandardObjectProperties.show,color:t.StandardObjectProperties.dataColor,labelPosition:{displayName:e.data.createDisplayNameGetter("Visual_Position"),type:{enumeration:t.labelPosition.type},suppressFormatPainterCopy:!0},labelDisplayUnits:t.StandardObjectProperties.dataLabelDisplayUnits,labelPrecision:__assign({},t.StandardObjectProperties.labelPrecision,{suppressFormatPainterCopy:!0}),fontSize:t.StandardObjectProperties.fontSize}},percentBarLabel:{displayName:e.data.createDisplayNameGetter("Visual_PercentBarLabel"),description:e.data.createDisplayNameGetter("Visual_PercentBarLabelDescription"),properties:{show:t.StandardObjectProperties.show,color:t.StandardObjectProperties.dataColor,fontSize:t.StandardObjectProperties.fontSize}}},supportsHighlight:!0,sorting:{default:{}},drilldown:{roles:["Category"]}},t.funnelChartProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"}}}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.gaugeRoleNames={y:"Y",minValue:"MinValue",maxValue:"MaxValue",targetValue:"TargetValue"},t.gaugeCapabilities={dataRoles:[{name:t.gaugeRoleNames.y,kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Value"),description:e.data.createDisplayNameGetter("Role_DisplayName_ValueDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:t.gaugeRoleNames.minValue,kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_MinValue"),description:e.data.createDisplayNameGetter("Role_DisplayName_MinValueDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:t.gaugeRoleNames.maxValue,kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_MaxValue"),description:e.data.createDisplayNameGetter("Role_DisplayName_MaxValueDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:t.gaugeRoleNames.targetValue,kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_TargetValue"),description:e.data.createDisplayNameGetter("Role_DisplayName_TargetValueDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"Tooltips",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Tooltips"),joinPredicate:0}],objects:{general:{properties:{formatString:t.StandardObjectProperties.formatString}},axis:{displayName:e.data.createDisplayNameGetter("Visual_Gauge_Axis"),properties:{min:{displayName:e.data.createDisplayNameGetter("Visual_Gauge_Axis_Min"),type:{numeric:!0}},max:{displayName:e.data.createDisplayNameGetter("Visual_Gauge_Axis_Max"),type:{numeric:!0}},target:{displayName:e.data.createDisplayNameGetter("Visual_Gauge_Axis_Target"),type:{numeric:!0}}}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),properties:{fill:t.StandardObjectProperties.fill,target:{displayName:e.data.createDisplayNameGetter("Visual_Gauge_Axis_Target"),type:{fill:{solid:{color:!0}}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),properties:{show:t.StandardObjectProperties.show,color:t.StandardObjectProperties.dataColor,labelDisplayUnits:t.StandardObjectProperties.labelDisplayUnits,labelPrecision:t.StandardObjectProperties.labelPrecision,fontSize:t.StandardObjectProperties.fontSize}},target:{displayName:e.data.createDisplayNameGetter("Visual_Gauge_Axis_Target"),properties:{show:t.StandardObjectProperties.show,color:t.StandardObjectProperties.dataColor,labelDisplayUnits:t.StandardObjectProperties.labelDisplayUnits,labelPrecision:t.StandardObjectProperties.labelPrecision,fontSize:t.StandardObjectProperties.fontSize}},calloutValue:{displayName:e.data.createDisplayNameGetter("Visual_Gauge_CalloutValue"),properties:{show:t.StandardObjectProperties.show,color:t.StandardObjectProperties.dataColor,labelDisplayUnits:t.StandardObjectProperties.labelDisplayUnits,labelPrecision:t.StandardObjectProperties.labelPrecision}}},dataViewMappings:[{conditions:[{Y:{max:1},MinValue:{max:1},MaxValue:{max:1},TargetValue:{max:1}}],categorical:{values:{select:[{bind:{to:"Y"}},{bind:{to:"MinValue"}},{bind:{to:"MaxValue"}},{bind:{to:"TargetValue"}},{for:{in:"Tooltips"}}]}}}],supportsSelection:!1},t.gaugeProps={dataPoint:{fill:{objectName:"dataPoint",propertyName:"fill"},target:{objectName:"dataPoint",propertyName:"target"}},target:{show:{objectName:"target",propertyName:"show"},labelDisplayUnits:{objectName:"target",propertyName:"labelDisplayUnits"},labelPrecision:{objectName:"target",propertyName:"labelPrecision"},fontSize:{objectName:"target",propertyName:"fontSize"},color:{objectName:"target",propertyName:"color"}},labels:{show:{objectName:"labels",propertyName:"show"},labelDisplayUnits:{objectName:"labels",propertyName:"labelDisplayUnits"},labelPrecision:{objectName:"labels",propertyName:"labelPrecision"},fontSize:{objectName:"labels",propertyName:"fontSize"},color:{objectName:"labels",propertyName:"color"}}}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.imageVisualCapabilities={objects:{general:{properties:{imageUrl:{type:{misc:{imageUrl:!0}},suppressFormatPainterCopy:!0}}},imageScaling:{displayName:e.data.createDisplayNameGetter("Visual_Image_Scaling_Type"),properties:{imageScalingType:{displayName:e.data.createDisplayNameGetter("Visual_Image_Scaling_Type"),type:{enumeration:t.imageScalingType.type}}}}},suppressDefaultTitle:!0,supportsSelection:!1}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.realTimeLineChartCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Axis"),description:e.data.createDisplayNameGetter("Role_DisplayName_AxisDescription"),requiredTypes:[{numeric:!0},{dateTime:!0}],cartesianKind:0},{name:"Series",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Legend"),description:e.data.createDisplayNameGetter("Role_DisplayName_LegendDescription")},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values"),description:e.data.createDisplayNameGetter("Role_DisplayName_ValuesDescription"),requiredTypes:[{numeric:!0},{integer:!0}],cartesianKind:1}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:t.StandardObjectProperties.formatString,responsive:{displayName:e.data.createDisplayNameGetter("Visual_General_ResponsiveLabel"),description:e.data.createDisplayNameGetter("Visual_General_ResponsiveLabelDescription"),type:{bool:!0}},responsiveLegacy:{type:{bool:!0}}}},legend:{displayName:e.data.createDisplayNameGetter("Visual_Legend"),description:e.data.createDisplayNameGetter("Visual_LegendDescription"),properties:{show:t.StandardObjectProperties.show,position:t.StandardObjectProperties.legendPosition,showTitle:t.StandardObjectProperties.showLegendTitle,titleText:__assign({},t.StandardObjectProperties.legendTitle,{suppressFormatPainterCopy:!0}),labelColor:t.StandardObjectProperties.labelColor,fontSize:t.StandardObjectProperties.fontSize}},categoryAxis:{displayName:e.data.createDisplayNameGetter("Visual_XAxis"),properties:{show:t.StandardObjectProperties.show,axisType:t.StandardObjectProperties.axisType,showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_XTitleDescription"),type:{bool:!0}},axisStyle:t.StandardObjectProperties.axisStyle,labelColor:t.StandardObjectProperties.labelColor,labelDisplayUnits:t.StandardObjectProperties.labelDisplayUnits,labelPrecision:t.StandardObjectProperties.labelPrecision,duration:{type:{numeric:!0}}}},valueAxis:{displayName:e.data.createDisplayNameGetter("Visual_YAxis"),properties:{show:t.StandardObjectProperties.show,position:t.StandardObjectProperties.yAxisPosition,showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_YTitleDescription"),type:{bool:!0}},axisStyle:t.StandardObjectProperties.axisStyle,labelColor:t.StandardObjectProperties.labelColor,labelDisplayUnits:t.StandardObjectProperties.labelDisplayUnits,labelPrecision:t.StandardObjectProperties.labelPrecision}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:t.StandardObjectProperties.defaultColor,fill:t.StandardObjectProperties.fill}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),description:e.data.createDisplayNameGetter("Visual_DataPointsLabelsDescription"),properties:{show:t.StandardObjectProperties.show,showSeries:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:t.StandardObjectProperties.dataColor,labelDisplayUnits:t.StandardObjectProperties.dataLabelDisplayUnits,labelPrecision:__assign({},t.StandardObjectProperties.labelPrecision,{suppressFormatPainterCopy:!0}),showAll:{displayName:e.data.createDisplayNameGetter("Visual_LabelSeriesShowAll"),type:{bool:!0}},fontSize:t.StandardObjectProperties.fontSize,labelDensity:{displayName:e.data.createDisplayNameGetter("Visual_LabelDensity"),type:{formatting:{labelDensity:!0}}}}},plotArea:{displayName:e.data.createDisplayNameGetter("Visual_Plot"),properties:{transparency:t.StandardObjectProperties.transparency,image:t.StandardObjectProperties.image}}},dataViewMappings:[{conditions:[{Category:{max:1},Series:{max:0}},{Category:{max:1},Series:{min:1,max:1},Y:{max:1}}],categorical:{categories:{for:{in:"Category"},dataReductionAlgorithm:{top:{}}},values:{group:{by:"Series",select:[{for:{in:"Y"}}],dataReductionAlgorithm:{top:{}}}}}}],sorting:{implicit:{clauses:[{role:"Category",direction:1}]}}}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.scriptVisualCapabilities={dataRoles:[{name:"Values",kind:e.VisualDataRoleKind.GroupingOrMeasure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values")}],dataViewMappings:[{scriptResult:{dataInput:{table:{rows:{for:{in:"Values"},dataReductionAlgorithm:{top:{}}}}},script:{source:{objectName:"script",propertyName:"source"},provider:{objectName:"script",propertyName:"provider"}}}}],objects:{script:{properties:{provider:{type:{text:!0}},source:{type:{scripting:{source:!0}}}}}}}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){t.consoleWriterCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Axis"),description:e.data.createDisplayNameGetter("Role_DisplayName_AxisDescription")},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Y"),description:e.data.createDisplayNameGetter("Role_DisplayName_YDescription")}],dataViewMappings:[{categorical:{categories:{for:{in:"Category"}}}}]}})(a=t.samples||(t.samples={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t=(function(){function e(){}return e.converter=function(e){return window.console.log("converter"),window.console.log(e),{}},e.prototype.init=function(e){var t=d3.select(e.element.get(0)).append("div");t.append("h1").text("ConsoleWriter"),t.append("p").text("This IVisual writes messages passed to it to the javscript console output. Check your console for the actual messages passed. For more information, click below");var a=t.append("a");a.attr("href","http://microsoft.github.io/PowerBI-visuals/modules/powerbi.html").text("Online help"),window.console.log("init"),window.console.log(e)},e.prototype.onResizing=function(e){},e.prototype.update=function(e){window.console.log("update"),window.console.log(e)},e})();e.ConsoleWriter=t})(t=e.samples||(e.samples={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.cartesianRoleNames={category:"Category",series:"Series",y:"Y",gradient:"Gradient",tooltips:"Tooltips"},t.cartesianChartProps={scalarKey:{scalarKeyMin:e.data.scalarKeyMinPropertyIdentifier},filters:{filteredToUniqueValue:{objectName:"filters",propertyName:"filteredToUniqueValue"}},categoryAxis:{show:{objectName:"categoryAxis",propertyName:"show"},fontFamily:{objectName:"categoryAxis",propertyName:"fontFamily"},fontSize:{objectName:"categoryAxis",propertyName:"fontSize"},showAxisTitle:{objectName:"categoryAxis",propertyName:"showAxisTitle"},titleFontFamily:{objectName:"categoryAxis",propertyName:"titleFontFamily"},titleFontSize:{objectName:"categoryAxis",propertyName:"titleFontSize"},concatenateLabels:{objectName:"categoryAxis",propertyName:"concatenateLabels"},start:{objectName:"categoryAxis",propertyName:"start"},end:{objectName:"categoryAxis",propertyName:"end"},position:{objectName:"categoryAxis",propertyName:"position"},axisType:{objectName:"categoryAxis",propertyName:"axisType"},axisScale:{objectName:"categoryAxis",propertyName:"axisScale"},axisStyle:{objectName:"categoryAxis",propertyName:"axisStyle"},labelDisplayUnits:{objectName:"categoryAxis",propertyName:"labelDisplayUnits"},labelPrecision:{objectName:"categoryAxis",propertyName:"labelPrecision"},labelColor:{objectName:"categoryAxis",propertyName:"labelColor"},titleText:{objectName:"categoryAxis",propertyName:"titleText"},preferredCategoryWidth:{objectName:"categoryAxis",propertyName:"preferredCategoryWidth"},titleColor:{objectName:"categoryAxis",propertyName:"titleColor"}},valueAxis:{show:{objectName:"valueAxis",propertyName:"show"},fontFamily:{objectName:"valueAxis",propertyName:"fontFamily"},fontSize:{objectName:"valueAxis",propertyName:"fontSize"},showAxisTitle:{objectName:"valueAxis",propertyName:"showAxisTitle"},titleFontFamily:{objectName:"valueAxis",propertyName:"titleFontFamily"},titleFontSize:{objectName:"valueAxis",propertyName:"titleFontSize"},secShow:{objectName:"valueAxis",propertyName:"secShow"},secShowAxisTitle:{objectName:"valueAxis",propertyName:"secShowAxisTitle"},secFontFamily:{objectName:"valueAxis",propertyName:"secFontFamily"},secFontSize:{objectName:"valueAxis",propertyName:"secFontSize"},secTitleFontFamily:{objectName:"valueAxis",propertyName:"secTitleFontFamily"},secTitleFontSize:{objectName:"valueAxis",propertyName:"secTitleFontSize"}},general:{responsive:{objectName:"general",propertyName:"responsive"},responsiveLegacy:{objectName:"general",propertyName:"responsiveLegacy"}}}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function a(a,i){var r={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Axis"),description:e.data.createDisplayNameGetter("Role_DisplayName_AxisDescription"),cartesianKind:0},{name:"Series",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Legend"),description:e.data.createDisplayNameGetter("Role_DisplayName_LegendDescription")},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values"),description:e.data.createDisplayNameGetter("Role_DisplayName_ValuesDescription"),requiredTypes:[{numeric:!0},{integer:!0}],cartesianKind:1},{name:"Tooltips",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Tooltips"),joinPredicate:0}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:t.StandardObjectProperties.formatString,responsive:{displayName:e.data.createDisplayNameGetter("Visual_General_ResponsiveLabel"),description:e.data.createDisplayNameGetter("Visual_General_ResponsiveLabelDescription"),type:{bool:!0}},responsiveLegacy:{type:{bool:!0}}}},legend:t.StandardObjectProperties.legend,categoryAxis:{displayName:e.data.createDisplayNameGetter("Visual_XAxis"),properties:{show:t.StandardObjectProperties.show,axisScale:t.StandardObjectProperties.axisScale,start:t.StandardObjectProperties.axisStart,end:t.StandardObjectProperties.axisEnd,axisType:t.StandardObjectProperties.axisType,showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_XTitleDescription"),type:{bool:!0}},axisStyle:t.StandardObjectProperties.axisStyle,labelColor:t.StandardObjectProperties.labelColor,fontFamily:t.StandardObjectProperties.fontFamily,fontSize:t.StandardObjectProperties.fontSize,labelDisplayUnits:t.StandardObjectProperties.labelDisplayUnits,labelPrecision:t.StandardObjectProperties.labelPrecision,concatenateLabels:{displayName:e.data.createDisplayNameGetter("Visual_Axis_ConcatenateLabels"),description:e.data.createDisplayNameGetter("Visual_Axis_ConcatenateLabelsDescription"),type:{bool:!0}},preferredCategoryWidth:{displayName:e.data.createDisplayNameGetter("Visual_Category_Width"),type:{numeric:!0}},titleColor:t.StandardObjectProperties.titleColor,titleFontFamily:t.StandardObjectProperties.fontFamily,titleFontSize:t.StandardObjectProperties.titleFontSize,titleText:t.StandardObjectProperties.titleText}},valueAxis:{displayName:e.data.createDisplayNameGetter("Visual_YAxis"),properties:{show:t.StandardObjectProperties.show,position:t.StandardObjectProperties.yAxisPosition,axisScale:t.StandardObjectProperties.axisScale,start:t.StandardObjectProperties.axisStart,end:t.StandardObjectProperties.axisEnd,showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_YTitleDescription"),type:{bool:!0}},axisStyle:t.StandardObjectProperties.axisStyle,labelColor:t.StandardObjectProperties.labelColor,fontFamily:t.StandardObjectProperties.fontFamily,fontSize:t.StandardObjectProperties.fontSize,labelDisplayUnits:t.StandardObjectProperties.labelDisplayUnits,labelPrecision:t.StandardObjectProperties.labelPrecision,titleColor:t.StandardObjectProperties.titleColor,titleFontFamily:t.StandardObjectProperties.fontFamily,titleFontSize:t.StandardObjectProperties.titleFontSize,titleText:t.StandardObjectProperties.titleText}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:t.StandardObjectProperties.defaultColor,fill:t.StandardObjectProperties.fill}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),description:e.data.createDisplayNameGetter("Visual_DataPointsLabelsDescription"),properties:{show:t.StandardObjectProperties.show,showSeries:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:t.StandardObjectProperties.dataColor,labelDisplayUnits:t.StandardObjectProperties.dataLabelDisplayUnits,labelPrecision:__assign({},t.StandardObjectProperties.labelPrecision,{suppressFormatPainterCopy:!0}),showAll:{displayName:e.data.createDisplayNameGetter("Visual_LabelSeriesShowAll"),type:{bool:!0}},fontSize:t.StandardObjectProperties.fontSize,labelDensity:{displayName:e.data.createDisplayNameGetter("Visual_LabelDensity"),type:{formatting:{labelDensity:!0}}}}},lineStyles:{displayName:e.data.createDisplayNameGetter("Visual_Shapes"),description:e.data.createDisplayNameGetter("Visual_ShapesDescription"),properties:{strokeWidth:t.StandardObjectProperties.strokeWidth,strokeLineJoin:t.StandardObjectProperties.strokeLineJoin}},plotArea:{displayName:e.data.createDisplayNameGetter("Visual_Plot"),properties:{transparency:t.StandardObjectProperties.transparency,image:t.StandardObjectProperties.image}},trend:{displayName:e.data.createDisplayNameGetter("Visual_Trend_Line"),suppressFormatPainterCopy:!0,properties:{show:t.StandardObjectProperties.show,displayName:{displayName:e.data.createDisplayNameGetter("Visual_Trend_Line_DisplayName"),description:e.data.createDisplayNameGetter("Visual_Trend_Line_DisplayName_Description"),type:{text:!0}},lineColor:{displayName:e.data.createDisplayNameGetter("Visual_Trend_Line_Color"),description:e.data.createDisplayNameGetter("Visual_Trend_Line_Color_Description"),type:{fill:{solid:{color:!0}}}},transparency:{displayName:e.data.createDisplayNameGetter("Visual_Trend_Line_Transparency"),description:e.data.createDisplayNameGetter("Visual_Trend_Line_Transparency_Description"),type:{numeric:!0}},style:{displayName:e.data.createDisplayNameGetter("Visual_Trend_Line_Style"),description:e.data.createDisplayNameGetter("Visual_Trend_Line_Style_Description"),type:{enumeration:t.lineStyle.type}},combineSeries:{displayName:e.data.createDisplayNameGetter("Visual_Trend_Line_Combine_Series"),description:e.data.createDisplayNameGetter("Visual_Trend_Line_Combine_Series_Description"),type:{bool:!0}},useHighlightValues:{displayName:e.data.createDisplayNameGetter("Visual_Trend_Line_UseHighlightValues"),description:e.data.createDisplayNameGetter("Visual_Trend_Line_UseHighlightValues_Description"),type:{bool:!0}}}},scalarKey:{properties:{min:{type:{dateTime:!0}}}},y1AxisReferenceLine:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Description"),suppressFormatPainterCopy:!0,properties:{show:t.StandardObjectProperties.show,displayName:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_DisplayName"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_DisplayName_Description"),type:{text:!0}},value:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Value"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Value_Description"),type:{numeric:!0}},lineColor:t.StandardObjectProperties.lineColor,transparency:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency_Description"),type:{numeric:!0}},style:t.StandardObjectProperties.referenceLineStyle,position:t.StandardObjectProperties.referenceLinePosition,dataLabelShow:t.StandardObjectProperties.dataLabelShow,dataLabelColor:t.StandardObjectProperties.dataLabelColor,dataLabelText:t.StandardObjectProperties.dataLabelText,dataLabelDecimalPoints:t.StandardObjectProperties.dataLabelDecimalPoints,dataLabelHorizontalPosition:t.StandardObjectProperties.dataLabelHorizontalPosition,dataLabelVerticalPosition:t.StandardObjectProperties.dataLabelVerticalPosition,dataLabelDisplayUnits:t.StandardObjectProperties.dataLabelDisplayUnits}},filters:{properties:{filteredToUniqueValue:{type:{bool:!0}}}}},dataViewMappings:[{conditions:[{Series:{max:0}},{Series:{min:1,max:1},Y:{max:1}}],categorical:{categories:{for:{in:"Category"},dataReductionAlgorithm:{window:{count:100}}},values:{group:{by:"Series",select:[{for:{in:"Y"}},{for:{in:"Tooltips"}}],dataReductionAlgorithm:{top:{count:60}}}}}},{conditions:[{Series:{max:0}},{Series:{min:1,max:1},Y:{max:1}}],requiredProperties:[{objectName:"trend",propertyName:"show"}],usage:{regression:{combineSeries:{objectName:"trend",propertyName:"combineSeries"}}},categorical:{categories:{for:{in:"regression.X"}},values:{group:{by:"regression.Series",select:[{for:{in:"regression.Y"}}]}}}},{conditions:[{Series:{max:0},Y:{max:1}}],requiredProperties:[{objectName:"forecast",propertyName:"show"}],usage:{forecast:{}},categorical:{categories:{for:{in:"Category"}},values:{group:{by:"Series",select:[{for:{in:"forecast.ForecastValue"}},{for:{in:"forecast.ConfidenceHighBound"}},{for:{in:"forecast.ConfidenceLowBound"}}]}}}}],sorting:{default:{}},drilldown:{roles:["Category"]}};return a||(r.objects.referenceLine={displayName:e.data.createDisplayNameGetter("Visual_Reference_Line"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Description"),suppressFormatPainterCopy:!0,properties:{show:t.StandardObjectProperties.show,displayName:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_DisplayName"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_DisplayName_Description"),type:{text:!0}},value:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Value"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Value_Description"),type:{numeric:!0}},lineColor:t.StandardObjectProperties.lineColor,transparency:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency_Description"),type:{numeric:!0}},style:t.StandardObjectProperties.referenceLineStyle,position:t.StandardObjectProperties.referenceLinePosition,dataLabelShow:t.StandardObjectProperties.dataLabelShow,dataLabelColor:t.StandardObjectProperties.dataLabelColor,dataLabelText:t.StandardObjectProperties.dataLabelText,dataLabelDecimalPoints:t.StandardObjectProperties.dataLabelDecimalPoints,dataLabelHorizontalPosition:t.StandardObjectProperties.dataLabelHorizontalPosition,dataLabelVerticalPosition:t.StandardObjectProperties.dataLabelVerticalPosition,dataLabelDisplayUnits:t.StandardObjectProperties.dataLabelDisplayUnits}}),a||i||(r.objects.forecast={displayName:e.data.createDisplayNameGetter("Visual_Forecast"),suppressFormatPainterCopy:!0,properties:{show:t.StandardObjectProperties.show,displayName:{displayName:e.data.createDisplayNameGetter("Visual_Forecast_DisplayName"),description:e.data.createDisplayNameGetter("Visual_Forecast_DisplayName_Description"),type:{text:!0}},confidenceBandStyle:{displayName:e.data.createDisplayNameGetter("Visual_Forecast_Confidence_Band_Style"),description:e.data.createDisplayNameGetter("Visual_Forecast_Confidence_Band_Style_Description"),type:{enumeration:t.confidenceBandStyle.type}},lineColor:{displayName:e.data.createDisplayNameGetter("Visual_Forecast_Line_Color"),description:e.data.createDisplayNameGetter("Visual_Forecast_Line_Color_Description"),type:{fill:{solid:{color:!0}}}},transparency:t.StandardObjectProperties.transparency,style:t.StandardObjectProperties.referenceLineStyle,transform:{type:{queryTransform:{}}}}}),r}t.getLineChartCapabilities=a,t.lineChartProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"}},trend:{show:{objectName:"trend",propertyName:"show"}},forecast:{show:{objectName:"forecast",propertyName:"show"}},categoryAxis:{axisType:{objectName:"categoryAxis",propertyName:"axisType"}},legend:{labelColor:{objectName:"legend",propertyName:"labelColor"}},labels:{labelDensity:{objectName:"labels",propertyName:"labelDensity"}},plotArea:{image:{objectName:"plotArea",propertyName:"image"},transparency:{objectName:"plotArea",propertyName:"transparency"}},lineStyles:{strokeWidth:{objectName:"lineStyles",propertyName:"strokeWidth"},strokeLineJoin:{objectName:"lineStyles",propertyName:"strokeLineJoin"}}}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function a(t,a,i){if(!a)return t;var r=e.Prototype.inherit(t);return r.capabilities=e.Prototype.inherit(t.capabilities),r.capabilities.dataViewMappings=_.map(t.capabilities.dataViewMappings,(function(e){return _.cloneDeep(e)})),i?(r.capabilities.dataViewMappings[0].conditions=[{Category:{max:1},Series:{max:1},X:{max:1},Y:{max:1},Size:{min:1,max:1}},{Category:{max:1},Series:{max:1},X:{min:1,max:1},Y:{max:1},Size:{max:1}},{Category:{max:1},Series:{max:1},X:{max:1},Y:{min:1,max:1},Size:{max:1}},{Category:{max:1},Series:{max:1},X:{max:1},Y:{max:1},Size:{max:1},Tooltips:{min:1}},{Category:{max:1},Series:{max:0},X:{max:1},Y:{max:1},Size:{max:1}}],r.capabilities.dataViewMappings.push({conditions:[{Category:{max:1},Series:{max:1,min:1},X:{max:0},Y:{max:0},Size:{max:0},Tooltips:{max:0}}],matrix:{rows:{select:[{bind:{to:"Series"}},{composite:[{for:{in:"Category"}}]}],dataReductionAlgorithm:{top:{}}},dataVolume:4}})):(r.capabilities.dataViewMappings[0].conditions=[{Category:{min:1,max:1},Series:{max:1},X:{max:1,kind:e.VisualDataRoleKind.Measure},Y:{max:1,kind:e.VisualDataRoleKind.Measure},Size:{max:1,min:1},Gradient:{max:0}},{Category:{min:1,max:1},Series:{max:1},X:{max:1,min:1,kind:e.VisualDataRoleKind.Measure},Y:{max:1,kind:e.VisualDataRoleKind.Measure},Size:{max:1},Gradient:{max:0}},{Category:{min:1,max:1},Series:{max:1},X:{max:1,kind:e.VisualDataRoleKind.Measure},Y:{max:1,min:1,kind:e.VisualDataRoleKind.Measure},Size:{max:1},Gradient:{max:0}},{Category:{min:1,max:1},Series:{max:1},X:{max:1,kind:e.VisualDataRoleKind.Measure},Y:{max:1,kind:e.VisualDataRoleKind.Measure},Size:{max:1},Gradient:{max:0},Tooltips:{min:1}},{Category:{min:1,max:1},Series:{max:0},X:{max:1,kind:e.VisualDataRoleKind.Measure},Y:{max:1,kind:e.VisualDataRoleKind.Measure},Size:{max:1},Gradient:{max:1}}],r.capabilities.dataViewMappings[1].conditions=[{Category:{max:0},Series:{max:1},X:{max:1,kind:e.VisualDataRoleKind.Grouping},Y:{max:1,kind:e.VisualDataRoleKind.Grouping},Size:{max:1,min:1},Gradient:{max:0}},{Category:{max:0},Series:{max:1},X:{max:1,kind:e.VisualDataRoleKind.Grouping},Y:{max:1,kind:e.VisualDataRoleKind.Grouping},Size:{max:1},Gradient:{max:0},Tooltips:{min:1}},{Category:{max:0},Series:{max:0},X:{max:1,kind:e.VisualDataRoleKind.Grouping},Y:{max:1,kind:e.VisualDataRoleKind.Grouping},Size:{max:1},Gradient:{max:1}}],r.capabilities.dataViewMappings.push({conditions:[{Category:{max:1,min:1},Series:{max:1,min:1},X:{max:0},Y:{max:0},Size:{max:0},Gradient:{max:0},Tooltips:{max:0}}],matrix:{rows:{select:[{bind:{to:"Series"}},{composite:[{for:{in:"Category"}}]}],dataReductionAlgorithm:{top:{}}},dataVolume:4}}),r.capabilities.dataViewMappings.push({conditions:[{Category:{max:0},Series:{max:1,min:1},X:{max:1,kind:e.VisualDataRoleKind.Grouping},Y:{max:1,kind:e.VisualDataRoleKind.Grouping},Size:{max:0},Gradient:{max:0},Tooltips:{max:0}}],matrix:{rows:{select:[{bind:{to:"Series"}},{composite:[{bind:{to:"X"}},{bind:{to:"Y"}}]}],dataReductionAlgorithm:{top:{}}},dataVolume:4}})),r}t.mapCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Location"),description:e.data.createDisplayNameGetter("Role_DisplayName_LocationMapDescription"),preferredTypes:[{
geography:{address:!0}},{geography:{city:!0}},{geography:{continent:!0}},{geography:{country:!0}},{geography:{county:!0}},{geography:{place:!0}},{geography:{postalCode:!0}},{geography:{region:!0}},{geography:{stateOrProvince:!0}}]},{name:"Series",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Legend"),description:e.data.createDisplayNameGetter("Role_DisplayName_LegendDescription")},{name:"Y",kind:e.VisualDataRoleKind.GroupingOrMeasure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Latitude"),description:e.data.createDisplayNameGetter("Role_DisplayName_LatitudeMapDescription"),preferredTypes:[{geography:{latitude:!0}}]},{name:"X",kind:e.VisualDataRoleKind.GroupingOrMeasure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Longitude"),description:e.data.createDisplayNameGetter("Role_DisplayName_LongitudeMapDescription"),preferredTypes:[{geography:{longitude:!0}}]},{name:"Size",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Size"),description:e.data.createDisplayNameGetter("Role_DisplayName_SizeDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"Gradient",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Gradient"),description:e.data.createDisplayNameGetter("Role_DisplayName_GradientDescription"),requiredTypes:[{numeric:!0},{integer:!0}],joinPredicate:0},{name:"Tooltips",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Tooltips"),joinPredicate:0}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:t.StandardObjectProperties.formatString}},legend:t.StandardObjectProperties.legend,dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:t.StandardObjectProperties.defaultColor,showAllDataPoints:t.StandardObjectProperties.showAllDataPoints,fill:t.StandardObjectProperties.fill,fillRule:{displayName:e.data.createDisplayNameGetter("Visual_Gradient"),type:{fillRule:{}},rule:{inputRole:"Gradient",output:{property:"fill",selector:["Category","X","Y"]}}}}},categoryLabels:{displayName:e.data.createDisplayNameGetter("Visual_CategoryLabels"),description:e.data.createDisplayNameGetter("Visual_CategoryLabelsDescription"),properties:{show:t.StandardObjectProperties.show,color:t.StandardObjectProperties.dataColor,fontSize:t.StandardObjectProperties.fontSize}},bubbles:{displayName:e.data.createDisplayNameGetter("Visual_Bubbles"),description:e.data.createDisplayNameGetter("Visual_BubblesDescription"),properties:{bubbleSize:{displayName:e.data.createDisplayNameGetter("Visual_BubbleSize"),type:{formatting:{bubbleSize:!0}}}}},mapControls:{displayName:e.data.createDisplayNameGetter("Visual_MapControls"),description:e.data.createDisplayNameGetter("Visual_MapControlsDescription"),properties:{autoZoom:{displayName:e.data.createDisplayNameGetter("Visual_AutoZoom"),type:{bool:!0}},zoomLevel:{type:{numeric:!0}},centerLatitude:{type:{numeric:!0}},centerLongitude:{type:{numeric:!0}}}}},dataViewMappings:[{conditions:[{Category:{min:1,max:1},Series:{max:1},X:{max:1,kind:e.VisualDataRoleKind.Measure},Y:{max:1,kind:e.VisualDataRoleKind.Measure},Size:{max:1},Gradient:{max:0}},{Category:{min:1,max:1},Series:{max:0},X:{max:1,kind:e.VisualDataRoleKind.Measure},Y:{max:1,kind:e.VisualDataRoleKind.Measure},Size:{max:1},Gradient:{max:1}}],categorical:{categories:{for:{in:"Category"},dataReductionAlgorithm:{top:{}}},values:{group:{by:"Series",select:[{bind:{to:"X"}},{bind:{to:"Y"}},{bind:{to:"Size"}},{bind:{to:"Gradient"}},{for:{in:"Tooltips"}}],dataReductionAlgorithm:{top:{}}}},rowCount:{preferred:{min:2}},dataVolume:4}},{conditions:[{Category:{max:0},Series:{max:1},X:{max:1,kind:e.VisualDataRoleKind.Grouping},Y:{max:1,kind:e.VisualDataRoleKind.Grouping},Size:{max:1},Gradient:{max:0}},{Category:{max:0},Series:{max:0},X:{max:1,kind:e.VisualDataRoleKind.Grouping},Y:{max:1,kind:e.VisualDataRoleKind.Grouping},Size:{max:1},Gradient:{max:1}}],categorical:{categories:{select:[{bind:{to:"X"}},{bind:{to:"Y"}}],dataReductionAlgorithm:{top:{}}},values:{group:{by:"Series",select:[{bind:{to:"Size"}},{bind:{to:"Gradient"}},{for:{in:"Tooltips"}}],dataReductionAlgorithm:{top:{}}}},rowCount:{preferred:{min:2}},dataVolume:4}}],sorting:{custom:{},implicit:{clauses:[{role:"Size",direction:2}]}},drilldown:{roles:["Category"]},grouping:{groupingRules:[{condition:{Category:{min:1,max:1},X:{max:1},Y:{max:1},Gradient:{max:0}},groupingTargetRole:"Series",kind:0}]}},t.mapProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"},showAllDataPoints:{objectName:"dataPoint",propertyName:"showAllDataPoints"}},legend:{show:{objectName:"legend",propertyName:"show"},position:{objectName:"legend",propertyName:"position"},showTitle:{objectName:"legend",propertyName:"showTitle"},titleText:{objectName:"legend",propertyName:"titleText"}},bubbles:{bubbleSize:{objectName:"bubbles",propertyName:"bubbleSize"}},mapControls:{autoZoom:{objectName:"mapControls",propertyName:"autoZoom"},zoomLevel:{objectName:"mapControls",propertyName:"zoomLevel"},centerLatitude:{objectName:"mapControls",propertyName:"centerLatitude"},centerLongitude:{objectName:"mapControls",propertyName:"centerLongitude"}}},t.applyImprovedMapLegendMappings=a})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.multiRowCardCapabilities={dataRoles:[{name:"Values",kind:e.VisualDataRoleKind.GroupingOrMeasure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Fields"),description:e.data.createDisplayNameGetter("Role_DisplayName_FieldsDescription")}],objects:{general:{properties:{formatString:t.StandardObjectProperties.formatString}},dataLabels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),description:e.data.createDisplayNameGetter("Visual_DataPointsLabelsDescription"),properties:{color:t.StandardObjectProperties.dataColor,fontSize:t.StandardObjectProperties.fontSize}},categoryLabels:{displayName:e.data.createDisplayNameGetter("Visual_CategoryLabels"),description:e.data.createDisplayNameGetter("Visual_CategoryLabelsDescription"),properties:{show:t.StandardObjectProperties.show,color:t.StandardObjectProperties.dataColor,fontSize:t.StandardObjectProperties.fontSize}},cardTitle:{displayName:e.data.createDisplayNameGetter("Visual_CardTitle"),description:e.data.createDisplayNameGetter("Visual_CardTitleDescription"),properties:{color:t.StandardObjectProperties.dataColor,fontSize:t.StandardObjectProperties.fontSize}},card:{displayName:e.data.createDisplayNameGetter("Card_ToolTip"),properties:{outline:{displayName:e.data.createDisplayNameGetter("Visual_Outline"),type:{enumeration:t.outline.type}},outlineColor:{displayName:e.data.createDisplayNameGetter("Visual_OutlineColor"),description:e.data.createDisplayNameGetter("Visual_OutlineColor_Desc"),type:{fill:{solid:{color:!0}}}},outlineWeight:{displayName:e.data.createDisplayNameGetter("Visual_OutlineWeight"),description:e.data.createDisplayNameGetter("Visual_OutlineWeight_Desc"),type:{numeric:!0}},barShow:{displayName:e.data.createDisplayNameGetter("Visual_MultiRowCard_BarShow"),description:e.data.createDisplayNameGetter("Visual_MultiRowCard_BarShow_Desc"),type:{bool:!0}},barColor:{displayName:e.data.createDisplayNameGetter("Visual_MultiRowCard_BarColor"),type:{fill:{solid:{color:!0}}}},barWeight:{displayName:e.data.createDisplayNameGetter("Visual_MultiRowCard_BarWeight"),description:e.data.createDisplayNameGetter("Visual_MultiRowCard_BarWeight_Desc"),type:{numeric:!0}},cardPadding:{displayName:e.data.createDisplayNameGetter("Visual_MultiRowCard_CardPadding"),description:e.data.createDisplayNameGetter("Visual_MultiRowCard_CardBackground"),type:{numeric:!0}},cardBackground:{displayName:e.data.createDisplayNameGetter("Visual_Background"),type:{fill:{solid:{color:!0}}}}}}},dataViewMappings:[{table:{rows:{for:{in:"Values"},dataReductionAlgorithm:{window:{}}},rowCount:{preferred:{min:1}}}}],sorting:{default:{}},suppressDefaultTitle:!0,supportsSelection:!1,disableVisualDetails:!0},t.multiRowCardProps={card:{outline:{objectName:"card",propertyName:"outline"},outlineColor:{objectName:"card",propertyName:"outlineColor"},outlineWeight:{objectName:"card",propertyName:"outlineWeight"},barShow:{objectName:"card",propertyName:"barShow"},barColor:{objectName:"card",propertyName:"barColor"},barWeight:{objectName:"card",propertyName:"barWeight"},cardPadding:{objectName:"card",propertyName:"cardPadding"},cardBackground:{objectName:"card",propertyName:"cardBackground"}}}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){e.textboxCapabilities={objects:{general:{properties:{paragraphs:{type:{paragraphs:{}},suppressFormatPainterCopy:!0}}}},suppressDefaultTitle:!0,supportsSelection:!1}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.cheerMeterCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Axis"),description:e.data.createDisplayNameGetter("Role_DisplayName_AxisDescription")},{name:"Y",kind:e.VisualDataRoleKind.Measure,requiredTypes:[{numeric:!0},{integer:!0}],displayName:e.data.createDisplayNameGetter("Role_DisplayName_Y"),description:e.data.createDisplayNameGetter("Role_DisplayName_YDescription")}],dataViewMappings:[{categorical:{categories:{for:{in:"Category"}}}}],objects:{dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{fill:t.StandardObjectProperties.fill}}}}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.scatterChartCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Details"),description:e.data.createDisplayNameGetter("Role_DisplayName_DetailsScatterChartDescription")},{name:"Series",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Legend"),description:e.data.createDisplayNameGetter("Role_DisplayName_LegendDescription")},{name:"X",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_X"),description:e.data.createDisplayNameGetter("Role_DisplayName_XScatterChartDescription"),requiredTypes:[{numeric:!0},{integer:!0}],cartesianKind:0},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Y"),description:e.data.createDisplayNameGetter("Role_DisplayName_YScatterChartDescription"),requiredTypes:[{numeric:!0},{integer:!0}],cartesianKind:1},{name:"Size",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Size"),description:e.data.createDisplayNameGetter("Role_DisplayName_SizeDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"Gradient",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Gradient"),description:e.data.createDisplayNameGetter("Role_DisplayName_GradientDescription"),requiredTypes:[{numeric:!0},{integer:!0}],joinPredicate:0},{name:"Play",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Play")},{name:"Tooltips",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Tooltips"),joinPredicate:0}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:t.StandardObjectProperties.formatString,responsive:{displayName:e.data.createDisplayNameGetter("Visual_General_ResponsiveLabel"),description:e.data.createDisplayNameGetter("Visual_General_ResponsiveLabelDescription"),type:{bool:!0}},responsiveLegacy:{type:{bool:!0}}}},legend:t.StandardObjectProperties.legend,categoryAxis:{displayName:e.data.createDisplayNameGetter("Visual_XAxis"),properties:{show:t.StandardObjectProperties.show,axisScale:t.StandardObjectProperties.axisScale,start:t.StandardObjectProperties.axisStart,end:t.StandardObjectProperties.axisEnd,showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_XTitleDescription"),type:{bool:!0}},axisStyle:t.StandardObjectProperties.axisStyle,labelColor:t.StandardObjectProperties.labelColor,fontFamily:t.StandardObjectProperties.fontFamily,fontSize:t.StandardObjectProperties.fontSize,labelDisplayUnits:t.StandardObjectProperties.labelDisplayUnits,labelPrecision:t.StandardObjectProperties.labelPrecision,titleColor:t.StandardObjectProperties.titleColor,titleFontFamily:t.StandardObjectProperties.fontFamily,titleFontSize:t.StandardObjectProperties.titleFontSize,titleText:t.StandardObjectProperties.titleText}},valueAxis:{displayName:e.data.createDisplayNameGetter("Visual_YAxis"),properties:{show:t.StandardObjectProperties.show,position:t.StandardObjectProperties.yAxisPosition,axisScale:t.StandardObjectProperties.axisScale,start:t.StandardObjectProperties.axisStart,end:t.StandardObjectProperties.axisEnd,showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_YTitleDescription"),type:{bool:!0}},axisStyle:t.StandardObjectProperties.axisStyle,labelColor:t.StandardObjectProperties.labelColor,fontFamily:t.StandardObjectProperties.fontFamily,fontSize:t.StandardObjectProperties.fontSize,labelDisplayUnits:t.StandardObjectProperties.labelDisplayUnits,labelPrecision:t.StandardObjectProperties.labelPrecision,titleColor:t.StandardObjectProperties.titleColor,titleFontFamily:t.StandardObjectProperties.fontFamily,titleFontSize:t.StandardObjectProperties.titleFontSize,titleText:t.StandardObjectProperties.titleText}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:t.StandardObjectProperties.defaultColor,showAllDataPoints:t.StandardObjectProperties.showAllDataPoints,fill:t.StandardObjectProperties.fill,fillRule:{displayName:e.data.createDisplayNameGetter("Visual_Gradient"),type:{fillRule:{}},rule:{inputRole:"Gradient",output:{property:"fill",selector:["Category"]}}}}},bubbles:{displayName:e.data.createDisplayNameGetter("Visual_Bubbles"),description:e.data.createDisplayNameGetter("Visual_BubblesDescription"),properties:{bubbleSize:{displayName:e.data.createDisplayNameGetter("Visual_BubbleSize"),type:{formatting:{bubbleSize:!0}}}}},plotArea:{displayName:e.data.createDisplayNameGetter("Visual_Plot"),properties:{transparency:t.StandardObjectProperties.transparency,image:t.StandardObjectProperties.image}},categoryLabels:{displayName:e.data.createDisplayNameGetter("Visual_CategoryLabels"),description:e.data.createDisplayNameGetter("Visual_CategoryLabelsDescription"),properties:{show:t.StandardObjectProperties.show,color:t.StandardObjectProperties.dataColor,fontSize:t.StandardObjectProperties.fontSize}},trend:{displayName:e.data.createDisplayNameGetter("Visual_Trend_Line"),suppressFormatPainterCopy:!0,properties:{show:t.StandardObjectProperties.show,displayName:{displayName:e.data.createDisplayNameGetter("Visual_Trend_Line_DisplayName"),description:e.data.createDisplayNameGetter("Visual_Trend_Line_DisplayName_Description"),type:{text:!0}},lineColor:{displayName:e.data.createDisplayNameGetter("Visual_Trend_Line_Color"),description:e.data.createDisplayNameGetter("Visual_Trend_Line_Color_Description"),type:{fill:{solid:{color:!0}}}},transparency:{displayName:e.data.createDisplayNameGetter("Visual_Trend_Line_Transparency"),description:e.data.createDisplayNameGetter("Visual_Trend_Line_Transparency_Description"),type:{numeric:!0}},style:{displayName:e.data.createDisplayNameGetter("Visual_Trend_Line_Style"),description:e.data.createDisplayNameGetter("Visual_Trend_Line_Style_Description"),type:{enumeration:t.lineStyle.type}},combineSeries:{displayName:e.data.createDisplayNameGetter("Visual_Trend_Line_Combine_Series"),description:e.data.createDisplayNameGetter("Visual_Trend_Line_Combine_Series_Description"),type:{bool:!0}}}},xAxisReferenceLine:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_X"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Description"),suppressFormatPainterCopy:!0,properties:{show:t.StandardObjectProperties.show,displayName:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_DisplayName"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_DisplayName_Description"),type:{text:!0}},value:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Value"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Value_Description"),type:{numeric:!0}},lineColor:t.StandardObjectProperties.lineColor,transparency:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency_Description"),type:{numeric:!0}},style:t.StandardObjectProperties.referenceLineStyle,position:t.StandardObjectProperties.referenceLinePosition,dataLabelShow:t.StandardObjectProperties.dataLabelShow,dataLabelColor:t.StandardObjectProperties.dataLabelColor,dataLabelText:t.StandardObjectProperties.dataLabelText,dataLabelDecimalPoints:t.StandardObjectProperties.dataLabelDecimalPoints,dataLabelHorizontalPosition:t.StandardObjectProperties.dataLabelHorizontalPosition,dataLabelVerticalPosition:t.StandardObjectProperties.dataLabelVerticalPosition,dataLabelDisplayUnits:t.StandardObjectProperties.dataLabelDisplayUnits}},y1AxisReferenceLine:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Y"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Description"),suppressFormatPainterCopy:!0,properties:{show:t.StandardObjectProperties.show,displayName:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_DisplayName"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_DisplayName_Description"),type:{text:!0}},value:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Value"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Value_Description"),type:{numeric:!0}},lineColor:t.StandardObjectProperties.lineColor,transparency:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency_Description"),type:{numeric:!0}},style:t.StandardObjectProperties.referenceLineStyle,position:t.StandardObjectProperties.referenceLinePosition,dataLabelShow:t.StandardObjectProperties.dataLabelShow,dataLabelColor:t.StandardObjectProperties.dataLabelColor,dataLabelText:t.StandardObjectProperties.dataLabelText,dataLabelDecimalPoints:t.StandardObjectProperties.dataLabelDecimalPoints,dataLabelHorizontalPosition:t.StandardObjectProperties.dataLabelHorizontalPosition,dataLabelVerticalPosition:t.StandardObjectProperties.dataLabelVerticalPosition,dataLabelDisplayUnits:t.StandardObjectProperties.dataLabelDisplayUnits}},referenceLine:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Description"),suppressFormatPainterCopy:!0,properties:{show:t.StandardObjectProperties.show,displayName:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_DisplayName"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_DisplayName_Description"),type:{text:!0}},value:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Value"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Value_Description"),type:{numeric:!0}},lineColor:t.StandardObjectProperties.lineColor,transparency:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency_Description"),type:{numeric:!0}},style:t.StandardObjectProperties.referenceLineStyle,position:t.StandardObjectProperties.referenceLinePosition,dataLabelShow:t.StandardObjectProperties.dataLabelShow,dataLabelColor:t.StandardObjectProperties.dataLabelColor,dataLabelText:t.StandardObjectProperties.dataLabelText,dataLabelDecimalPoints:t.StandardObjectProperties.dataLabelDecimalPoints,dataLabelHorizontalPosition:t.StandardObjectProperties.dataLabelHorizontalPosition,dataLabelVerticalPosition:t.StandardObjectProperties.dataLabelVerticalPosition,dataLabelDisplayUnits:t.StandardObjectProperties.dataLabelDisplayUnits}},colorBorder:{displayName:e.data.createDisplayNameGetter("Visual_ColorBorder"),properties:{show:t.StandardObjectProperties.show}},fillPoint:{displayName:e.data.createDisplayNameGetter("Visual_FillPoint"),properties:{show:t.StandardObjectProperties.show}},colorByCategory:{displayName:e.data.createDisplayNameGetter("Visual_ColorByCategory"),properties:{show:t.StandardObjectProperties.show}},currentFrameIndex:{properties:{index:{type:{numeric:!0}}}},clustering:{suppressFormatPainterCopy:!0,properties:{transform:{type:{queryTransform:{}}}}}},dataViewMappings:[{conditions:[{Category:{max:1},Series:{max:1},X:{max:1},Y:{max:1},Size:{max:1},Gradient:{max:0},Play:{max:0}},{Category:{max:1},Series:{max:0},X:{max:1},Y:{max:1},Size:{max:1},Gradient:{max:1},Play:{max:0}}],categorical:{categories:{for:{in:"Category"}},values:{group:{by:"Series",select:[{bind:{to:"X"}},{bind:{to:"Y"}},{bind:{to:"Size"}},{bind:{to:"Gradient"}},{for:{in:"Tooltips"}}]}},rowCount:{preferred:{min:2}},dataReductionAlgorithm:{sample:{}},dataVolume:4}},{conditions:[{Category:{max:1},Series:{max:1},X:{max:1},Y:{max:1},Size:{max:1},Gradient:{max:0},Play:{min:1,max:1}}],matrix:{rows:{select:[{bind:{to:"Play"}},{bind:{to:"Category"}}],dataReductionAlgorithm:{bottom:{count:5e3}}},columns:{for:{in:"Series"},dataReductionAlgorithm:{top:{count:60}}},values:{select:[{bind:{to:"X"}},{bind:{to:"Y"}},{bind:{to:"Size"}},{for:{in:"Tooltips"}}]}}},{conditions:[{Category:{max:1},Series:{max:1},X:{max:1},Y:{max:1},Size:{max:0},Gradient:{max:0},Play:{max:0}},{Category:{max:1},Series:{max:0},X:{max:1},Y:{max:1},Size:{max:0},Gradient:{max:1},Play:{max:0}}],requiredProperties:[{objectName:"trend",propertyName:"show"}],usage:{regression:{combineSeries:{objectName:"trend",propertyName:"combineSeries"}}},categorical:{categories:{for:{in:"regression.X"}},values:{group:{by:"regression.Series",select:[{for:{in:"regression.Y"}}]}},dataReductionAlgorithm:{sample:{}},dataVolume:4}}],sorting:{custom:{},implicit:{clauses:[{role:"Play",direction:1}]}},drilldown:{roles:["Category"]},grouping:{groupingRules:[{condition:{Category:{min:1,max:1},X:{min:1,max:1},Y:{min:1,max:1},Play:{max:1}},groupingTargetRole:"Category",kind:1},{condition:{Category:{min:1,max:1},X:{max:1},Y:{max:1},Play:{max:1}},groupingTargetRole:"Series",kind:0},{condition:{Category:{min:1,max:1},X:{min:1,max:1},Y:{min:1,max:1},Series:{max:0},Gradient:{max:1},Play:{max:1}},groupingTargetRole:"Category",kind:1}],cluster:{clusteringRole:"Series",conditions:[{Category:{min:1,max:1},X:{min:1,max:1},Y:{min:1,max:1},Series:{max:0},Size:{max:1},Gradient:{max:0},Play:{max:0}}]}}},t.scatterChartProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"}},bubbles:{bubbleSize:{objectName:"bubbles",propertyName:"bubbleSize"}},trend:{show:{objectName:"trend",propertyName:"show"}},colorBorder:{show:{objectName:"colorBorder",propertyName:"show"}},fillPoint:{show:{objectName:"fillPoint",propertyName:"show"}},colorByCategory:{show:{objectName:"colorByCategory",propertyName:"show"}},currentFrameIndex:{index:{objectName:"currentFrameIndex",propertyName:"index"}},legend:{labelColor:{objectName:"legend",propertyName:"labelColor"}},plotArea:{image:{objectName:"plotArea",propertyName:"image"},transparency:{objectName:"plotArea",propertyName:"transparency"}}}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.slicerRoles={value:"Values"},t.slicerCapabilities={dataRoles:[{name:t.slicerRoles.value,kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Field"),description:e.data.createDisplayNameGetter("Role_DisplayName_FieldDescription")}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{filter:{type:{filter:{}}},selfFilter:{type:{filter:{selfFilter:!0}}},defaultValue:{type:{expression:{defaultValue:!0}}},formatString:t.StandardObjectProperties.formatString,outlineColor:t.StandardObjectProperties.outlineColor,outlineWeight:t.StandardObjectProperties.outlineWeight,orientation:{displayName:e.data.createDisplayNameGetter("Slicer_Orientation"),type:{enumeration:t.slicerOrientation.type}},count:{type:{integer:!0}},selfFilterEnabled:{type:{operations:{searchEnabled:!0}}}}},data:{properties:{startDate:{type:{dateTime:!0}},endDate:{type:{dateTime:!0}},numericStart:{type:{numeric:!0}},numericEnd:{type:{numeric:!0}},relativeRange:{type:{enumeration:t.relativeSlicerRelativeQualifier.type}},relativePeriod:{type:{enumeration:t.relativeSlicerPeriod.type}},relativeDuration:{type:{numeric:!0}},mode:{type:{enumeration:t.slicerMode.type}}}},selection:{displayName:e.data.createDisplayNameGetter("Visual_SelectionControls"),properties:{selectAllCheckboxEnabled:{displayName:e.data.createDisplayNameGetter("Visual_SelectAll"),type:{bool:!0}},singleSelect:{displayName:e.data.createDisplayNameGetter("Visual_SingleSelect"),type:{bool:!0}}}},header:{displayName:e.data.createDisplayNameGetter("Visual_Header"),properties:{show:t.StandardObjectProperties.show,fontColor:t.StandardObjectProperties.fontColor,background:{displayName:e.data.createDisplayNameGetter("Visual_Background"),type:{fill:{solid:{color:!0}}}},outline:t.StandardObjectProperties.outline,textSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{numeric:!0}}}},items:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_Items"),properties:{fontColor:t.StandardObjectProperties.fontColor,background:{displayName:e.data.createDisplayNameGetter("Visual_Background"),type:{fill:{solid:{color:!0}}}},outline:t.StandardObjectProperties.outline,textSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{numeric:!0}}}},date:{displayName:e.data.createDisplayNameGetter("Slicer_DateInputs"),properties:{fontColor:t.StandardObjectProperties.fontColor,textSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{numeric:!0}},background:{displayName:e.data.createDisplayNameGetter("Visual_Background"),type:{fill:{solid:{color:!0}}}}}},numericInputStyle:{displayName:e.data.createDisplayNameGetter("Slicer_NumericInputs"),properties:{fontColor:t.StandardObjectProperties.fontColor,textSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{numeric:!0}},background:{displayName:e.data.createDisplayNameGetter("Visual_Background"),type:{fill:{solid:{color:!0}}}}}},slider:{displayName:e.data.createDisplayNameGetter("Slicer_Slider"),properties:{show:t.StandardObjectProperties.show,color:{displayName:e.data.createDisplayNameGetter("Visual_LegendTitleColor"),type:{fill:{solid:{color:!0}}}}}},dateRange:{displayName:e.data.createDisplayNameGetter("Slicer_DateRange"),properties:{includeToday:{displayName:e.data.createDisplayNameGetter("Visual_IncludeToday"),type:{bool:!0}}}}},dataViewMappings:[{conditions:[(a={},a[t.slicerRoles.value]={max:1},a)],categorical:{categories:{for:{in:t.slicerRoles.value},dataReductionAlgorithm:{window:{}}},includeEmptyGroups:!0}}],sorting:{default:{}},suppressDefaultTitle:!0,disableVisualDetails:!0},t.slicerProps={general:{filter:{objectName:"general",propertyName:"filter"},outlineColor:{objectName:"general",propertyName:"outlineColor"},outlineWeight:{objectName:"general",propertyName:"outlineWeight"},orientation:{objectName:"general",propertyName:"orientation"},count:{objectName:"general",propertyName:"count"},selfFilterEnabled:{objectName:"general",propertyName:"selfFilterEnabled"}},data:{startDate:{objectName:"data",propertyName:"startDate"},endDate:{objectName:"data",propertyName:"endDate"},numericStart:{objectName:"data",propertyName:"numericStart"},numericEnd:{objectName:"data",propertyName:"numericEnd"},relativeRange:{objectName:"data",propertyName:"relativeRange"},relativePeriod:{objectName:"data",propertyName:"relativePeriod"},relativeDuration:{objectName:"data",propertyName:"relativeDuration"},mode:{objectName:"data",propertyName:"mode"}},selection:{selectAllCheckboxEnabled:{objectName:"selection",propertyName:"selectAllCheckboxEnabled"},singleSelect:{objectName:"selection",propertyName:"singleSelect"}},header:{show:{objectName:"header",propertyName:"show"},fontColor:{objectName:"header",propertyName:"fontColor"},background:{objectName:"header",propertyName:"background"},outline:{objectName:"header",propertyName:"outline"},textSize:{objectName:"header",propertyName:"textSize"}},items:{fontColor:{objectName:"items",propertyName:"fontColor"},background:{objectName:"items",propertyName:"background"},outline:{objectName:"items",propertyName:"outline"},textSize:{objectName:"items",propertyName:"textSize"}},date:{fontColor:{objectName:"date",propertyName:"fontColor"},textSize:{objectName:"date",propertyName:"textSize"},background:{objectName:"date",propertyName:"background"}},numericInputStyle:{fontColor:{objectName:"numericInputStyle",propertyName:"fontColor"},textSize:{objectName:"numericInputStyle",propertyName:"textSize"},background:{objectName:"numericInputStyle",propertyName:"background"}},slider:{show:{objectName:"slider",propertyName:"show"},color:{objectName:"slider",propertyName:"color"}},dateRange:{includeToday:{objectName:"dateRange",propertyName:"includeToday"}},filterPropertyIdentifier:{objectName:"general",propertyName:"filter"},selfFilterPropertyIdentifier:{objectName:"general",propertyName:"selfFilter"},formatString:{objectName:"general",propertyName:"formatString"},defaultValue:{objectName:"general",propertyName:"defaultValue"}};var a})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.tableCapabilities={dataRoles:[{name:"Values",kind:e.VisualDataRoleKind.GroupingOrMeasure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values")}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:t.StandardObjectProperties.formatString,columnWidth:{type:{numeric:!0}},totals:{type:{bool:!0},displayName:e.data.createDisplayNameGetter("Visual_Totals"),suppressFormatPainterCopy:!0},autoSizeColumnWidth:{type:{bool:!0},displayName:e.data.createDisplayNameGetter("Visual_Adjust_Column_Width"),suppressFormatPainterCopy:!0},textSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{numeric:!0}}}},grid:{displayName:e.data.createDisplayNameGetter("Visual_Grid"),properties:{outlineColor:t.StandardObjectProperties.outlineColor,outlineWeight:t.StandardObjectProperties.outlineWeight,gridVertical:{displayName:e.data.createDisplayNameGetter("Visual_GridVertical"),description:e.data.createDisplayNameGetter("Visual_GridVertical_Desc"),type:{bool:!0}},gridVerticalColor:{displayName:e.data.createDisplayNameGetter("Visual_GridVertical_Color"),description:e.data.createDisplayNameGetter("Visual_GridVertical_Color_Desc"),type:{fill:{solid:{color:!0}}}},gridVerticalWeight:{displayName:e.data.createDisplayNameGetter("Visual_GridVertical_Weight"),description:e.data.createDisplayNameGetter("Visual_GridVertical_Weight_Desc"),type:{numeric:!0}},
gridHorizontal:{displayName:e.data.createDisplayNameGetter("Visual_GridHorizontal"),description:e.data.createDisplayNameGetter("Visual_GridHorizontal_Desc"),type:{bool:!0}},gridHorizontalColor:{displayName:e.data.createDisplayNameGetter("Visual_GridHorizontal_Color"),description:e.data.createDisplayNameGetter("Visual_GridHorizontal_Color_Desc"),type:{fill:{solid:{color:!0}}}},gridHorizontalWeight:{displayName:e.data.createDisplayNameGetter("Visual_GridHorizontal_Weight"),description:e.data.createDisplayNameGetter("Visual_GridHorizontal_Weight_Desc"),type:{numeric:!0}},rowPadding:{displayName:e.data.createDisplayNameGetter("Visual_RowPadding"),description:e.data.createDisplayNameGetter("Visual_RowPadding_Desc"),type:{numeric:!0}},imageHeight:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ImageHeight"),description:e.data.createDisplayNameGetter("Visual_Tablix_ImageHeight_Desc"),type:{numeric:!0}}}},columnHeaders:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ColumnHeaders"),properties:{outline:t.StandardObjectProperties.outline,fontColor:t.StandardObjectProperties.fontColor,backColor:t.StandardObjectProperties.backColor,wordWrap:{displayName:e.data.createDisplayNameGetter("Visual_Word_Wrap"),type:{bool:!0}}}},values:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_Values"),properties:{outline:t.StandardObjectProperties.outline,backColor:{type:{fill:{solid:{color:!0}}}},fontColorPrimary:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_FontColorPrimary"),description:e.data.createDisplayNameGetter("Visual_Tablix_FontColorPrimary_Desc"),type:{fill:{solid:{color:!0}}}},backColorPrimary:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_BackColorPrimary"),description:e.data.createDisplayNameGetter("Visual_Tablix_BackColorPrimary_Desc"),type:{fill:{solid:{color:!0}}}},fontColorSecondary:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_FontColorSecondary"),description:e.data.createDisplayNameGetter("Visual_Tablix_FontColorSecondary_Desc"),type:{fill:{solid:{color:!0}}}},backColorSecondary:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_BackColorSecondary"),description:e.data.createDisplayNameGetter("Visual_Tablix_BackColorSecondary_Desc"),type:{fill:{solid:{color:!0}}}},urlIcon:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_UrlIcon"),description:e.data.createDisplayNameGetter("Visual_Tablix_UrlIcon_Desc"),type:{bool:!0}}}},total:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_TotalGrand"),properties:{outline:t.StandardObjectProperties.outline,fontColor:t.StandardObjectProperties.fontColor,backColor:t.StandardObjectProperties.backColor}},columnFormatting:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ColumnFormatting"),properties:{fontColor:t.StandardObjectProperties.fontColor,backColor:t.StandardObjectProperties.backColor,styleHeader:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ColumnFormatting_ColorHeader"),type:{bool:!0}},styleValues:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ColumnFormatting_ColorValues"),type:{bool:!0}},styleTotal:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ColumnFormatting_ColorTotal"),type:{bool:!0}}}},clustering:{suppressFormatPainterCopy:!0,properties:{transform:{type:{queryTransform:{}}}}}},dataViewMappings:[{table:{rows:{for:{in:"Values"},dataReductionAlgorithm:{window:{count:500}}},rowCount:{preferred:{min:1}}}}],sorting:{custom:{}},suppressDefaultTitle:!0,supportsSelection:!1,disableVisualDetails:!0,grouping:{cluster:{clusteringRole:"Values",conditions:[{Values:{min:2}}]}}}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.matrixRoleNames={rows:"Rows",columns:"Columns",values:"Values"},t.matrixCapabilities={dataRoles:[{name:t.matrixRoleNames.rows,kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Rows"),description:e.data.createDisplayNameGetter("Role_DisplayName_RowsDescription")},{name:t.matrixRoleNames.columns,kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Columns"),description:e.data.createDisplayNameGetter("Role_DisplayName_ColumnsDescription")},{name:t.matrixRoleNames.values,kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values")}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:t.StandardObjectProperties.formatString,columnWidth:{type:{numeric:!0}},rowSubtotals:{type:{bool:!0},displayName:e.data.createDisplayNameGetter("Visual_TotalRow"),suppressFormatPainterCopy:!0},columnSubtotals:{type:{bool:!0},displayName:e.data.createDisplayNameGetter("Visual_TotalColumn"),suppressFormatPainterCopy:!0},autoSizeColumnWidth:{type:{bool:!0},displayName:e.data.createDisplayNameGetter("Visual_Adjust_Column_Width"),suppressFormatPainterCopy:!0},textSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{numeric:!0}}}},grid:{displayName:e.data.createDisplayNameGetter("Visual_Grid"),properties:{outlineColor:t.StandardObjectProperties.outlineColor,outlineWeight:t.StandardObjectProperties.outlineWeight,gridVertical:{displayName:e.data.createDisplayNameGetter("Visual_GridVertical"),description:e.data.createDisplayNameGetter("Visual_GridVertical_Desc"),type:{bool:!0}},gridVerticalColor:{displayName:e.data.createDisplayNameGetter("Visual_GridVertical_Color"),description:e.data.createDisplayNameGetter("Visual_GridVertical_Color_Desc"),type:{fill:{solid:{color:!0}}}},gridVerticalWeight:{displayName:e.data.createDisplayNameGetter("Visual_GridVertical_Weight"),description:e.data.createDisplayNameGetter("Visual_GridVertical_Weight_Desc"),type:{numeric:!0}},gridHorizontal:{displayName:e.data.createDisplayNameGetter("Visual_GridHorizontal"),description:e.data.createDisplayNameGetter("Visual_GridHorizontal_Desc"),type:{bool:!0}},gridHorizontalColor:{displayName:e.data.createDisplayNameGetter("Visual_GridHorizontal_Color"),description:e.data.createDisplayNameGetter("Visual_GridHorizontal_Color_Desc"),type:{fill:{solid:{color:!0}}}},gridHorizontalWeight:{displayName:e.data.createDisplayNameGetter("Visual_GridHorizontal_Weight"),description:e.data.createDisplayNameGetter("Visual_GridHorizontal_Weight_Desc"),type:{numeric:!0}},rowPadding:{displayName:e.data.createDisplayNameGetter("Visual_RowPadding"),description:e.data.createDisplayNameGetter("Visual_RowPadding_Desc"),type:{numeric:!0}},imageHeight:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ImageHeight"),description:e.data.createDisplayNameGetter("Visual_Tablix_ImageHeight_Desc"),type:{numeric:!0}}}},columnHeaders:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ColumnHeaders"),properties:{outline:t.StandardObjectProperties.outline,fontColor:t.StandardObjectProperties.fontColor,backColor:t.StandardObjectProperties.backColor}},rowHeaders:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_RowHeaders"),properties:{outline:t.StandardObjectProperties.outline,fontColor:t.StandardObjectProperties.fontColor,backColor:t.StandardObjectProperties.backColor,wordWrap:{displayName:e.data.createDisplayNameGetter("Visual_Word_Wrap"),type:{bool:!0}}}},values:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_Values"),properties:{outline:t.StandardObjectProperties.outline,backColor:{type:{fill:{solid:{color:!0}}}},fontColorPrimary:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_FontColorPrimary"),description:e.data.createDisplayNameGetter("Visual_Tablix_FontColorPrimary_Desc"),type:{fill:{solid:{color:!0}}}},backColorPrimary:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_BackColorPrimary"),description:e.data.createDisplayNameGetter("Visual_Tablix_BackColorPrimary_Desc"),type:{fill:{solid:{color:!0}}}},fontColorSecondary:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_FontColorSecondary"),description:e.data.createDisplayNameGetter("Visual_Tablix_FontColorSecondary_Desc"),type:{fill:{solid:{color:!0}}}},backColorSecondary:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_BackColorSecondary"),description:e.data.createDisplayNameGetter("Visual_Tablix_BackColorSecondary_Desc"),type:{fill:{solid:{color:!0}}}}}},subTotals:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_TotalSub"),properties:{outline:t.StandardObjectProperties.outline,fontColor:t.StandardObjectProperties.fontColor,backColor:t.StandardObjectProperties.backColor}},total:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_Matrix_TotalGrand"),properties:{outline:t.StandardObjectProperties.outline,fontColor:t.StandardObjectProperties.fontColor,backColor:t.StandardObjectProperties.backColor,applyToHeaders:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ApplyToHeaders"),type:{bool:!0}}}},columnFormatting:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ColumnFormatting"),properties:{fontColor:t.StandardObjectProperties.fontColor,backColor:t.StandardObjectProperties.backColor,styleHeader:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ColumnFormatting_ColorHeader"),type:{bool:!0}},styleValues:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ColumnFormatting_ColorValues"),type:{bool:!0}},styleSubtotals:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ColumnFormatting_ColorSubTotals"),type:{bool:!0}},styleTotal:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ColumnFormatting_ColorTotal"),type:{bool:!0}}}}},dataViewMappings:[{conditions:[{Rows:{max:0},Columns:{max:0},Values:{min:1}},{Rows:{min:1},Columns:{min:0},Values:{min:0}},{Rows:{min:0},Columns:{min:1},Values:{min:0}}],matrix:{rows:{for:{in:"Rows"},dataReductionAlgorithm:{window:{count:500}}},columns:{for:{in:"Columns"},dataReductionAlgorithm:{top:{count:100}}},values:{for:{in:"Values"}}}}],filterMappings:{measureFilter:{targetRoles:[t.matrixRoleNames.rows]}},sorting:{custom:{}},dataRoleTotals:[{roles:[t.matrixRoleNames.columns],displayName:e.data.createDisplayNameGetter("DisplayName_QuickCalc_PercentOfColumnTotal"),shortDisplayName:e.data.createDisplayNameGetter("DisplayName_QuickCalc_PercentOfColumnTotalShort"),tooltip:e.data.createDisplayNameGetter("DisplayName_QuickCalc_PercentOfColumnTotalTooltip")},{roles:[t.matrixRoleNames.rows],displayName:e.data.createDisplayNameGetter("DisplayName_QuickCalc_PercentOfRowTotal"),shortDisplayName:e.data.createDisplayNameGetter("DisplayName_QuickCalc_PercentOfRowTotalShort"),tooltip:e.data.createDisplayNameGetter("DisplayName_QuickCalc_PercentOfRowTotalTooltip")}],suppressDefaultTitle:!0,supportsSelection:!1,disableVisualDetails:!0}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.treemapRoles={group:"Group",details:"Details",values:"Values",gradient:"Gradient"},t.treemapCapabilities={dataRoles:[{name:"Group",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Group"),description:e.data.createDisplayNameGetter("Role_DisplayName_GroupTreemapDescription")},{name:"Details",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Details")},{name:"Values",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values"),description:e.data.createDisplayNameGetter("Role_DisplayName_ValuesDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"Gradient",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Gradient"),description:e.data.createDisplayNameGetter("Role_DisplayName_GradientDescription"),requiredTypes:[{numeric:!0},{integer:!0}],joinPredicate:0},{name:"Tooltips",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Tooltips"),joinPredicate:0}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:t.StandardObjectProperties.formatString}},legend:t.StandardObjectProperties.legend,dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{fill:{type:{fill:{solid:{color:!0}}}},fillRule:{displayName:e.data.createDisplayNameGetter("Visual_Gradient"),type:{fillRule:{}},rule:{inputRole:"Gradient",output:{property:"fill",selector:["Group"]}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),description:e.data.createDisplayNameGetter("Visual_DataPointsLabelsDescription"),properties:{show:t.StandardObjectProperties.show,color:t.StandardObjectProperties.dataColor,labelDisplayUnits:t.StandardObjectProperties.labelDisplayUnits,labelPrecision:t.StandardObjectProperties.labelPrecision}},categoryLabels:{displayName:e.data.createDisplayNameGetter("Visual_CategoryLabels"),description:e.data.createDisplayNameGetter("Visual_CategoryLabelsDescription"),properties:{show:t.StandardObjectProperties.show}}},dataViewMappings:[{conditions:[{Group:{max:1},Details:{max:0},Gradient:{max:1}},{Group:{max:1},Details:{min:1,max:1},Values:{max:1},Gradient:{max:0}}],categorical:{categories:{for:{in:"Group"},dataReductionAlgorithm:{top:{}}},values:{group:{by:"Details",select:[{bind:{to:"Values"}},{bind:{to:"Gradient"}},{for:{in:"Tooltips"}}],dataReductionAlgorithm:{top:{}}}},rowCount:{preferred:{min:2}}}}],supportsHighlight:!0,sorting:{custom:{},implicit:{clauses:[{role:"Values",direction:2}]}},drilldown:{roles:["Group"]},grouping:{groupingRules:[{condition:{Group:{min:1,max:1},Details:{max:1},Values:{min:1,max:1},Gradient:{min:0}},groupingTargetRole:"Group",kind:1},{condition:{Group:{min:1,max:1},Details:{max:1},Values:{min:1,max:1},Gradient:{min:0}},groupingTargetRole:"Group",groupSourceTargetRole:"Details",kind:0},{condition:{Group:{min:1,max:1},Details:{min:0},Values:{min:1,max:1},Gradient:{min:1,max:1}},groupingTargetRole:"Group",kind:1}]}},t.treemapProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{fill:{objectName:"dataPoint",propertyName:"fill"}},legend:{show:{objectName:"legend",propertyName:"show"},position:{objectName:"legend",propertyName:"position"},showTitle:{objectName:"legend",propertyName:"showTitle"},titleText:{objectName:"legend",propertyName:"titleText"},labelColor:{objectName:"legend",propertyName:"labelColor"}},labels:{show:{objectName:"labels",propertyName:"show"},color:{objectName:"labels",propertyName:"color"},labelDisplayUnits:{objectName:"labels",propertyName:"labelDisplayUnits"},labelPrecision:{objectName:"labels",propertyName:"labelPrecision"}},categoryLabels:{show:{objectName:"categoryLabels",propertyName:"show"}}}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.cardCapabilities={dataRoles:[{name:"Values",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Fields"),description:e.data.createDisplayNameGetter("Role_DisplayName_FieldsDescription")}],objects:{general:{properties:{formatString:t.StandardObjectProperties.formatString}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointLabel"),properties:{color:t.StandardObjectProperties.dataColor,labelDisplayUnits:t.StandardObjectProperties.labelDisplayUnits,labelPrecision:t.StandardObjectProperties.labelPrecision,fontSize:t.StandardObjectProperties.fontSize}},categoryLabels:{displayName:e.data.createDisplayNameGetter("Visual_CategoryLabel"),properties:{show:t.StandardObjectProperties.show,color:t.StandardObjectProperties.dataColor,fontSize:t.StandardObjectProperties.fontSize}},wordWrap:{displayName:e.data.createDisplayNameGetter("Visual_Word_Wrap"),properties:{show:t.StandardObjectProperties.show}}},dataViewMappings:[{conditions:[{Values:{max:1}}],single:{role:"Values"}}],suppressDefaultTitle:!0,supportsSelection:!1},t.cardProps={categoryLabels:{show:{objectName:"categoryLabels",propertyName:"show"},color:{objectName:"categoryLabels",propertyName:"color"},fontSize:{objectName:"categoryLabels",propertyName:"fontSize"}},labels:{color:{objectName:"labels",propertyName:"color"},labelPrecision:{objectName:"labels",propertyName:"labelPrecision"},labelDisplayUnits:{objectName:"labels",propertyName:"labelDisplayUnits"},fontSize:{objectName:"labels",propertyName:"fontSize"}},wordWrap:{show:{objectName:"wordWrap",propertyName:"show"}}}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.waterfallChartCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Category"),description:e.data.createDisplayNameGetter("Role_DisplayName_CategoryWaterfallDescription")},{name:"Y",kind:e.VisualDataRoleKind.Measure,requiredTypes:[{numeric:!0},{integer:!0}],displayName:e.data.createDisplayNameGetter("Role_DisplayName_Y")},{name:"Tooltips",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Tooltips"),joinPredicate:0}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:t.StandardObjectProperties.formatString,responsive:{displayName:e.data.createDisplayNameGetter("Visual_General_ResponsiveLabel"),description:e.data.createDisplayNameGetter("Visual_General_ResponsiveLabelDescription"),type:{bool:!0}},responsiveLegacy:{type:{bool:!0}}}},legend:t.StandardObjectProperties.legend,categoryAxis:{displayName:e.data.createDisplayNameGetter("Visual_XAxis"),properties:{show:t.StandardObjectProperties.show,showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_XTitleDescription"),type:{bool:!0}},axisStyle:t.StandardObjectProperties.axisStyle,labelColor:t.StandardObjectProperties.labelColor,fontFamily:t.StandardObjectProperties.fontFamily,fontSize:t.StandardObjectProperties.fontSize,preferredCategoryWidth:{displayName:e.data.createDisplayNameGetter("Visual_Category_Width"),type:{numeric:!0}},titleColor:t.StandardObjectProperties.titleColor,titleFontSize:t.StandardObjectProperties.titleFontSize,titleText:t.StandardObjectProperties.titleText}},valueAxis:{displayName:e.data.createDisplayNameGetter("Visual_YAxis"),properties:{show:t.StandardObjectProperties.show,position:t.StandardObjectProperties.yAxisPosition,start:t.StandardObjectProperties.axisStart,end:t.StandardObjectProperties.axisEnd,showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_YTitleDescription"),type:{bool:!0}},axisStyle:t.StandardObjectProperties.axisStyle,labelColor:t.StandardObjectProperties.labelColor,fontFamily:t.StandardObjectProperties.fontFamily,fontSize:t.StandardObjectProperties.fontSize,labelDisplayUnits:t.StandardObjectProperties.labelDisplayUnits,labelPrecision:t.StandardObjectProperties.labelPrecision,titleFontSize:t.StandardObjectProperties.titleFontSize,titleColor:t.StandardObjectProperties.titleColor,titleText:t.StandardObjectProperties.titleText}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),description:e.data.createDisplayNameGetter("Visual_DataPointsLabelsDescription"),properties:{show:t.StandardObjectProperties.show,color:t.StandardObjectProperties.dataColor,labelDisplayUnits:t.StandardObjectProperties.dataLabelDisplayUnits,labelPrecision:__assign({},t.StandardObjectProperties.labelPrecision,{suppressFormatPainterCopy:!0}),fontSize:t.StandardObjectProperties.fontSize,labelOrientation:{displayName:e.data.createDisplayNameGetter("Visual_LabelOrientation"),type:{enumeration:t.labelOrientation.type}},labelPosition:{displayName:e.data.createDisplayNameGetter("Visual_Position"),type:{enumeration:t.labelPosition.type}}}},plotArea:{displayName:e.data.createDisplayNameGetter("Visual_Plot"),properties:{transparency:t.StandardObjectProperties.transparency,image:t.StandardObjectProperties.image}},sentimentColors:{displayName:e.data.createDisplayNameGetter("Waterfall_SentimentColors"),properties:{increaseFill:{displayName:e.data.createDisplayNameGetter("Waterfall_IncreaseLabel"),type:{fill:{solid:{color:!0}}}},decreaseFill:{displayName:e.data.createDisplayNameGetter("Waterfall_DecreaseLabel"),type:{fill:{solid:{color:!0}}}},totalFill:{displayName:e.data.createDisplayNameGetter("Waterfall_TotalLabel"),type:{fill:{solid:{color:!0}}}}}},y1AxisReferenceLine:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Description"),properties:{show:t.StandardObjectProperties.show,displayName:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_DisplayName"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_DisplayName_Description"),type:{text:!0}},value:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Value"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Value_Description"),type:{numeric:!0}},lineColor:t.StandardObjectProperties.lineColor,transparency:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency_Description"),type:{numeric:!0}},style:t.StandardObjectProperties.referenceLineStyle,position:t.StandardObjectProperties.referenceLinePosition,dataLabelShow:t.StandardObjectProperties.dataLabelShow,dataLabelColor:t.StandardObjectProperties.dataLabelColor,dataLabelText:t.StandardObjectProperties.dataLabelText,dataLabelDecimalPoints:t.StandardObjectProperties.dataLabelDecimalPoints,dataLabelHorizontalPosition:t.StandardObjectProperties.dataLabelHorizontalPosition,dataLabelVerticalPosition:t.StandardObjectProperties.dataLabelVerticalPosition,dataLabelDisplayUnits:t.StandardObjectProperties.dataLabelDisplayUnits}}},dataViewMappings:[{conditions:[{Category:{max:1},Y:{max:1}}],categorical:{categories:{for:{in:"Category"},dataReductionAlgorithm:{top:{}}},values:{select:[{bind:{to:"Y"}},{for:{in:"Tooltips"}}]}}}],sorting:{default:{}},drilldown:{roles:["Category"]},grouping:{groupingRules:[{condition:{Category:{min:1,max:1},Y:{min:1,max:1}},groupingTargetRole:"Category",kind:1}]}},t.waterfallChartProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},sentimentColors:{increaseFill:{objectName:"sentimentColors",propertyName:"increaseFill"},decreaseFill:{objectName:"sentimentColors",propertyName:"decreaseFill"},totalFill:{objectName:"sentimentColors",propertyName:"totalFill"}},legend:{labelColor:{objectName:"legend",propertyName:"labelColor"}}}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.sunburstCapabilities={dataRoles:[{name:"Nodes",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Group")},{name:"Values",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values"),description:e.data.createDisplayNameGetter("Role_DisplayName_ValuesDescription")}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:t.StandardObjectProperties.formatString}},legend:{displayName:e.data.createDisplayNameGetter("Visual_Legend"),description:e.data.createDisplayNameGetter("Visual_LegendDescription"),properties:{show:t.StandardObjectProperties.show,position:t.StandardObjectProperties.legendPosition,showTitle:t.StandardObjectProperties.showLegendTitle,titleText:t.StandardObjectProperties.legendTitle,labelColor:t.StandardObjectProperties.labelColor,fontSize:t.StandardObjectProperties.fontSize}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{fill:{type:{fill:{solid:{color:!0}}}},fillRule:{displayName:e.data.createDisplayNameGetter("Visual_Gradient"),type:{fillRule:{}},rule:{inputRole:"Gradient",output:{property:"fill",selector:["Group"]}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),description:e.data.createDisplayNameGetter("Visual_DataPointsLabelsDescription"),properties:{show:t.StandardObjectProperties.show,color:t.StandardObjectProperties.dataColor,labelDisplayUnits:t.StandardObjectProperties.labelDisplayUnits,labelPrecision:t.StandardObjectProperties.labelPrecision}},categoryLabels:{displayName:e.data.createDisplayNameGetter("Visual_CategoryLabels"),description:e.data.createDisplayNameGetter("Visual_CategoryLabelsDescription"),properties:{show:t.StandardObjectProperties.show}}},dataViewMappings:[{conditions:[{Nodes:{min:0},Values:{max:1}}],matrix:{rows:{for:{in:"Nodes"}},columns:{for:{in:""}},values:{for:{in:"Values"}}}}],supportsHighlight:!0,sorting:{custom:{},implicit:{clauses:[{role:"Values",direction:2}]}}},t.sunburstProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{fill:{objectName:"dataPoint",propertyName:"fill"}},legend:{show:{objectName:"legend",propertyName:"show"},position:{objectName:"legend",propertyName:"position"},showTitle:{objectName:"legend",propertyName:"showTitle"},titleText:{objectName:"legend",propertyName:"titleText"},labelColor:{objectName:"legend",propertyName:"labelColor"}},labels:{show:{objectName:"labels",propertyName:"show"},color:{objectName:"labels",propertyName:"color"},labelDisplayUnits:{objectName:"labels",propertyName:"labelDisplayUnits"},labelPrecision:{objectName:"labels",propertyName:"labelPrecision"}},categoryLabels:{show:{objectName:"categoryLabels",propertyName:"show"}}}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){e.bingSocialNewsCapabilities={dataViewMappings:[]}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){e.bingSocialTweetsCapabilities={dataViewMappings:[]}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.KPIStatusWithHistoryCapabilities={dataRoles:[{name:"Indicator",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_KPI_Indicator"),description:e.data.createDisplayNameGetter("Role_DisplayName_KPI_IndicatorDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"TrendLine",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_KPI_TrendLine"),description:e.data.createDisplayNameGetter("Role_DisplayName_KPI_Trendline_Description")},{name:"Goal",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_KPI_Goal"),description:e.data.createDisplayNameGetter("Role_DisplayName_KPI_GoalDescription"),requiredTypes:[{numeric:!0},{integer:!0}]}],dataViewMappings:[{conditions:[{Indicator:{max:1},TrendLine:{max:1},Goal:{max:2}}],categorical:{categories:{for:{in:"TrendLine"},dataReductionAlgorithm:{bottom:{}}},values:{select:[{bind:{to:"Indicator"}},{bind:{to:"Goal"}}]}}}],objects:{general:{properties:{formatString:t.StandardObjectProperties.formatString}},indicator:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_KPI_Indicator"),description:e.data.createDisplayNameGetter("Role_DisplayName_KPI_IndicatorDescription"),properties:{indicatorDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),description:e.data.createDisplayNameGetter("Visual_DisplayUnitsDescription"),type:{formatting:{labelDisplayUnits:!0}}},indicatorPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),description:e.data.createDisplayNameGetter("Visual_PrecisionDescription"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}},kpiFormat:{displayName:e.data.createDisplayNameGetter("TaskPane_Format"),type:{text:!0}}}},trendline:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_KPI_TrendLine"),description:e.data.createDisplayNameGetter("Role_DisplayName_KPI_Trendline_Description"),properties:{show:t.StandardObjectProperties.show}},goals:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_KPI_Goals"),description:e.data.createDisplayNameGetter("Role_DisplayName_KPI_Goals"),properties:{showGoal:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_KPI_Show_Goal"),type:{bool:!0}},showDistance:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_KPI_Show_Distance"),type:{bool:!0}}}},status:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_KPI_Color_Coding"),description:e.data.createDisplayNameGetter("Role_DisplayName_KPI_Color_Coding"),properties:{direction:{displayName:e.data.createDisplayNameGetter("Visual_KPI_Direction"),type:{enumeration:t.kpiDirection.type}},goodColor:{displayName:e.data.createDisplayNameGetter("Visual_KPI_Good_Color"),type:{fill:{solid:{color:!0}}}},neutralColor:{displayName:e.data.createDisplayNameGetter("Visual_KPI_Neutral_Color"),type:{fill:{solid:{color:!0}}}},badColor:{displayName:e.data.createDisplayNameGetter("Visual_KPI_Bad_Color"),type:{fill:{solid:{color:!0}}}}}}}}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=t.ShapeMapType.Role;t.shapeMapCapabilities={dataRoles:[{name:a.category,kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Location"),description:e.data.createDisplayNameGetter("Role_DisplayName_LocationMapDescription"),preferredTypes:[{geography:{address:!0}},{geography:{city:!0}},{geography:{continent:!0}},{geography:{country:!0}},{geography:{county:!0}},{geography:{place:!0}},{geography:{postalCode:!0}},{geography:{region:!0}},{geography:{stateOrProvince:!0}}]},{name:a.series,kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Legend"),description:e.data.createDisplayNameGetter("Role_DisplayName_LegendDescription")},{name:a.value,kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Gradient"),description:e.data.createDisplayNameGetter("Role_DisplayName_GradientDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:a.tooltips,kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Tooltips"),joinPredicate:0}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:t.StandardObjectProperties.formatString}},legend:t.StandardObjectProperties.legend,dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:t.StandardObjectProperties.defaultColor,showAllDataPoints:t.StandardObjectProperties.showAllDataPoints,fill:t.StandardObjectProperties.fill,fillRule:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values"),description:e.data.createDisplayNameGetter("Role_DisplayName_ValuesDescription"),type:{fillRule:{}},rule:{conditions:[{Series:{max:0}}],inputRole:a.value,output:{property:"fill",selector:[a.category]}}}}},shape:{displayName:e.data.createDisplayNameGetter("Visual_ShapeMap_Shape"),description:e.data.createDisplayNameGetter("Visual_ShapeMap_Shape_Desc"),properties:{map:{type:{geoJson:{}}},projectionEnum:{displayName:e.data.createDisplayNameGetter("Visual_ShapeMap_Projection"),description:e.data.createDisplayNameGetter("Visual_ShapeMap_Projection_Desc"),type:{enumeration:t.ShapeMapType.Projection.type}}}},defaultColors:{displayName:e.data.createDisplayNameGetter("Visual_ShapeMap_DefaultColor"),description:e.data.createDisplayNameGetter("Visual_ShapeMap_DefaultColor_Desc"),properties:{defaultShow:{displayName:e.data.createDisplayNameGetter("Visual_ShapeMap_DefaultShow"),description:e.data.createDisplayNameGetter("Visual_ShapeMap_DefaultShow_Desc"),type:{bool:!0}},defaultColor:{displayName:e.data.createDisplayNameGetter("Visual_ShapeMap_DefaultColorColor"),description:e.data.createDisplayNameGetter("Visual_ShapeMap_DefaultColorColor_Desc"),
type:{fill:{solid:{color:!0}}}},borderColor:{displayName:e.data.createDisplayNameGetter("Visual_ShapeMap_BorderColor"),description:e.data.createDisplayNameGetter("Visual_ShapeMap_BorderColor_Desc"),type:{fill:{solid:{color:!0}}}},borderThickness:{displayName:e.data.createDisplayNameGetter("Visual_ShapeMap_BorderThickness"),description:e.data.createDisplayNameGetter("Visual_ShapeMap_BorderThickness_Desc"),type:{numeric:!0}}}},zoom:{displayName:e.data.createDisplayNameGetter("Visual_ShapeMap_Zoom"),description:e.data.createDisplayNameGetter("Visual_ShapeMap_Zoom_Desc"),properties:{autoZoom:{displayName:e.data.createDisplayNameGetter("Visual_ShapeMap_AutoZoom"),description:e.data.createDisplayNameGetter("Visual_ShapeMap_AutoZoom_Desc"),type:{bool:!0}},selectionZoom:{displayName:e.data.createDisplayNameGetter("Visual_ShapeMap_SelectionZoom"),description:e.data.createDisplayNameGetter("Visual_ShapeMap_SelectionZoom_Desc"),type:{bool:!0}},manualZoom:{displayName:e.data.createDisplayNameGetter("Visual_ShapeMap_ManualZoom"),description:e.data.createDisplayNameGetter("Visual_ShapeMap_ManualZoom_Desc"),type:{bool:!0}}}}},dataViewMappings:[{conditions:[(i={},i[a.category]={min:0,max:1},i[a.series]={min:0,max:1},i[a.value]={min:0,max:1},i)],categorical:{categories:{for:{in:a.category},dataReductionAlgorithm:{top:{}}},values:{group:{by:a.series,select:[{bind:{to:a.value}},{for:{in:a.tooltips}}],dataReductionAlgorithm:{top:{}}}},rowCount:{preferred:{min:2}}}}],sorting:{custom:{},implicit:{clauses:[{role:a.value,direction:2}]}}},t.shapeMapProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},legend:{show:{objectName:"legend",propertyName:"show"},position:{objectName:"legend",propertyName:"position"},showTitle:{objectName:"legend",propertyName:"showTitle"},titleText:{objectName:"legend",propertyName:"titleText"}},dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"},showAllDataPoints:{objectName:"dataPoint",propertyName:"showAllDataPoints"}},shape:{mapId:{objectName:"shape",propertyName:"mapId"},projectionEnum:{objectName:"shape",propertyName:"projectionEnum"},map:{objectName:"shape",propertyName:"map"}},zoom:{autoZoom:{objectName:"zoom",propertyName:"autoZoom"},selectionZoom:{objectName:"zoom",propertyName:"selectionZoom"},manualZoom:{objectName:"zoom",propertyName:"manualZoom"}},defaultColors:{defaultShow:{objectName:"defaultColors",propertyName:"defaultShow"},defaultColor:{objectName:"defaultColors",propertyName:"defaultColor"},borderColor:{objectName:"defaultColors",propertyName:"borderColor"},borderThickness:{objectName:"defaultColors",propertyName:"borderThickness"}}};var i})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.tableExCapabilities={dataRoles:[{name:"Values",kind:e.VisualDataRoleKind.GroupingOrMeasure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values")}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:t.StandardObjectProperties.formatString}},grid:{displayName:e.data.createDisplayNameGetter("Visual_Grid"),properties:{outlineColor:t.StandardObjectProperties.outlineColor,outlineWeight:t.StandardObjectProperties.outlineWeight,gridVertical:{displayName:e.data.createDisplayNameGetter("Visual_GridVertical"),description:e.data.createDisplayNameGetter("Visual_GridVertical_Desc"),type:{bool:!0}},gridVerticalColor:{displayName:e.data.createDisplayNameGetter("Visual_GridVertical_Color"),description:e.data.createDisplayNameGetter("Visual_GridVertical_Color_Desc"),type:{fill:{solid:{color:!0}}}},gridVerticalWeight:{displayName:e.data.createDisplayNameGetter("Visual_GridVertical_Weight"),description:e.data.createDisplayNameGetter("Visual_GridVertical_Weight_Desc"),type:{numeric:!0}},gridHorizontal:{displayName:e.data.createDisplayNameGetter("Visual_GridHorizontal"),description:e.data.createDisplayNameGetter("Visual_GridHorizontal_Desc"),type:{bool:!0}},gridHorizontalColor:{displayName:e.data.createDisplayNameGetter("Visual_GridHorizontal_Color"),description:e.data.createDisplayNameGetter("Visual_GridHorizontal_Color_Desc"),type:{fill:{solid:{color:!0}}}},gridHorizontalWeight:{displayName:e.data.createDisplayNameGetter("Visual_GridHorizontal_Weight"),description:e.data.createDisplayNameGetter("Visual_GridHorizontal_Weight_Desc"),type:{numeric:!0}},rowPadding:{displayName:e.data.createDisplayNameGetter("Visual_RowPadding"),description:e.data.createDisplayNameGetter("Visual_RowPadding_Desc"),type:{numeric:!0}},textSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{numeric:!0}},imageHeight:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ImageHeight"),description:e.data.createDisplayNameGetter("Visual_Tablix_ImageHeight_Desc"),type:{numeric:!0}}}},columnHeaders:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ColumnHeaders"),properties:{outline:t.StandardObjectProperties.outline,fontColor:t.StandardObjectProperties.fontColor,backColor:t.StandardObjectProperties.backColor,autoSizeColumnWidth:{type:{bool:!0},displayName:e.data.createDisplayNameGetter("Visual_Adjust_Column_Width"),suppressFormatPainterCopy:!0},wordWrap:{displayName:e.data.createDisplayNameGetter("Visual_Word_Wrap"),type:{bool:!0}}}},values:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_Values"),properties:{outline:t.StandardObjectProperties.outline,backColor:{type:{fill:{solid:{color:!0}}}},fontColorPrimary:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_FontColorPrimary"),description:e.data.createDisplayNameGetter("Visual_Tablix_FontColorPrimary_Desc"),type:{fill:{solid:{color:!0}}}},backColorPrimary:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_BackColorPrimary"),description:e.data.createDisplayNameGetter("Visual_Tablix_BackColorPrimary_Desc"),type:{fill:{solid:{color:!0}}}},fontColorSecondary:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_FontColorSecondary"),description:e.data.createDisplayNameGetter("Visual_Tablix_FontColorSecondary_Desc"),type:{fill:{solid:{color:!0}}}},backColorSecondary:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_BackColorSecondary"),description:e.data.createDisplayNameGetter("Visual_Tablix_BackColorSecondary_Desc"),type:{fill:{solid:{color:!0}}}},urlIcon:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_UrlIcon"),description:e.data.createDisplayNameGetter("Visual_Tablix_UrlIcon_Desc"),type:{bool:!0}},wordWrap:{displayName:e.data.createDisplayNameGetter("Visual_Word_Wrap"),type:{bool:!0}}}},total:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_TotalGrand"),properties:{totals:{type:{bool:!0},displayName:e.data.createDisplayNameGetter("Visual_Totals"),suppressFormatPainterCopy:!0},outline:t.StandardObjectProperties.outline,fontColor:t.StandardObjectProperties.fontColor,backColor:t.StandardObjectProperties.backColor}},columnFormatting:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ColumnFormatting"),properties:{fontColor:t.StandardObjectProperties.fontColor,backColor:t.StandardObjectProperties.backColor,styleHeader:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ColumnFormatting_ColorHeader"),type:{bool:!0}},styleValues:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ColumnFormatting_ColorValues"),type:{bool:!0}},styleTotal:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ColumnFormatting_ColorTotal"),type:{bool:!0}}}},columnWidth:{properties:{value:{type:{numeric:!0}}}},clustering:{suppressFormatPainterCopy:!0,properties:{transform:{type:{queryTransform:{}}}}}},dataViewMappings:[{table:{rows:{for:{in:"Values"},dataReductionAlgorithm:{window:{count:500}}},rowCount:{preferred:{min:1}}}}],sorting:{custom:{}},suppressDefaultTitle:!0,disableVisualDetails:!0,grouping:{cluster:{clusteringRole:"Values",conditions:[{Values:{min:2}}]}}}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.pivotTableCapabilities={dataRoles:[{name:t.matrixRoleNames.rows,kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Rows"),description:e.data.createDisplayNameGetter("Role_DisplayName_RowsDescription")},{name:t.matrixRoleNames.columns,kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Columns"),description:e.data.createDisplayNameGetter("Role_DisplayName_ColumnsDescription")},{name:t.matrixRoleNames.values,kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values")}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:t.StandardObjectProperties.formatString}},grid:{displayName:e.data.createDisplayNameGetter("Visual_Grid"),properties:{outlineColor:t.StandardObjectProperties.outlineColor,outlineWeight:t.StandardObjectProperties.outlineWeight,gridVertical:{displayName:e.data.createDisplayNameGetter("Visual_GridVertical"),description:e.data.createDisplayNameGetter("Visual_GridVertical_Desc"),type:{bool:!0}},gridVerticalColor:{displayName:e.data.createDisplayNameGetter("Visual_GridVertical_Color"),description:e.data.createDisplayNameGetter("Visual_GridVertical_Color_Desc"),type:{fill:{solid:{color:!0}}}},gridVerticalWeight:{displayName:e.data.createDisplayNameGetter("Visual_GridVertical_Weight"),description:e.data.createDisplayNameGetter("Visual_GridVertical_Weight_Desc"),type:{numeric:!0}},gridHorizontal:{displayName:e.data.createDisplayNameGetter("Visual_GridHorizontal"),description:e.data.createDisplayNameGetter("Visual_GridHorizontal_Desc"),type:{bool:!0}},gridHorizontalColor:{displayName:e.data.createDisplayNameGetter("Visual_GridHorizontal_Color"),description:e.data.createDisplayNameGetter("Visual_GridHorizontal_Color_Desc"),type:{fill:{solid:{color:!0}}}},gridHorizontalWeight:{displayName:e.data.createDisplayNameGetter("Visual_GridHorizontal_Weight"),description:e.data.createDisplayNameGetter("Visual_GridHorizontal_Weight_Desc"),type:{numeric:!0}},rowPadding:{displayName:e.data.createDisplayNameGetter("Visual_RowPadding"),description:e.data.createDisplayNameGetter("Visual_RowPadding_Desc"),type:{numeric:!0}},textSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{numeric:!0}},imageHeight:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ImageHeight"),description:e.data.createDisplayNameGetter("Visual_Tablix_ImageHeight_Desc"),type:{numeric:!0}}}},columnHeaders:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ColumnHeaders"),properties:{outline:t.StandardObjectProperties.outline,fontColor:t.StandardObjectProperties.fontColor,backColor:t.StandardObjectProperties.backColor,autoSizeColumnWidth:{type:{bool:!0},displayName:e.data.createDisplayNameGetter("Visual_Adjust_Column_Width"),suppressFormatPainterCopy:!0},urlIcon:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_UrlIcon"),description:e.data.createDisplayNameGetter("Visual_Tablix_UrlIcon_Desc"),type:{bool:!0}},wordWrap:{displayName:e.data.createDisplayNameGetter("Visual_Word_Wrap"),type:{bool:!0}}}},rowHeaders:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_RowHeaders"),properties:{outline:t.StandardObjectProperties.outline,fontColor:t.StandardObjectProperties.fontColor,backColor:t.StandardObjectProperties.backColor,stepped:{displayName:e.data.createDisplayNameGetter("Visual_PivotTable_SteppedLayout"),description:e.data.createDisplayNameGetter("Visual_PivotTable_SteppedLayout_Description"),type:{bool:!0}},steppedLayoutIndentation:{displayName:e.data.createDisplayNameGetter("Visual_PivotTable_SteppedLayoutIndentation"),description:e.data.createDisplayNameGetter("Visual_PivotTable_SteppedLayoutIndentation_Description"),type:{numeric:!0}},urlIcon:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_UrlIcon"),description:e.data.createDisplayNameGetter("Visual_Tablix_UrlIcon_Desc"),type:{bool:!0}},wordWrap:{displayName:e.data.createDisplayNameGetter("Visual_Word_Wrap"),type:{bool:!0}}}},values:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_Values"),properties:{outline:t.StandardObjectProperties.outline,backColor:{type:{fill:{solid:{color:!0}}}},fontColorPrimary:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_FontColorPrimary"),description:e.data.createDisplayNameGetter("Visual_Tablix_FontColorPrimary_Desc"),type:{fill:{solid:{color:!0}}}},backColorPrimary:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_BackColorPrimary"),description:e.data.createDisplayNameGetter("Visual_Tablix_BackColorPrimary_Desc"),type:{fill:{solid:{color:!0}}}},fontColorSecondary:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_FontColorSecondary"),description:e.data.createDisplayNameGetter("Visual_Tablix_FontColorSecondary_Desc"),type:{fill:{solid:{color:!0}}}},backColorSecondary:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_BackColorSecondary"),description:e.data.createDisplayNameGetter("Visual_Tablix_BackColorSecondary_Desc"),type:{fill:{solid:{color:!0}}}},wordWrap:{displayName:e.data.createDisplayNameGetter("Visual_Word_Wrap"),type:{bool:!0}}}},subTotals:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_TotalSub"),properties:{outline:t.StandardObjectProperties.outline,fontColor:t.StandardObjectProperties.fontColor,backColor:t.StandardObjectProperties.backColor,rowSubtotals:{type:{bool:!0},displayName:e.data.createDisplayNameGetter("Visual_TotalRow"),suppressFormatPainterCopy:!0},columnSubtotals:{type:{bool:!0},displayName:e.data.createDisplayNameGetter("Visual_TotalColumn"),suppressFormatPainterCopy:!0}}},total:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_Matrix_TotalGrand"),properties:{outline:t.StandardObjectProperties.outline,fontColor:t.StandardObjectProperties.fontColor,backColor:t.StandardObjectProperties.backColor,applyToHeaders:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ApplyToHeaders"),type:{bool:!0}}}},columnFormatting:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ColumnFormatting"),properties:{fontColor:t.StandardObjectProperties.fontColor,backColor:t.StandardObjectProperties.backColor,styleHeader:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ColumnFormatting_ColorHeader"),type:{bool:!0}},styleValues:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ColumnFormatting_ColorValues"),type:{bool:!0}},styleSubtotals:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ColumnFormatting_ColorSubTotals"),type:{bool:!0}},styleTotal:{displayName:e.data.createDisplayNameGetter("Visual_Tablix_ColumnFormatting_ColorTotal"),type:{bool:!0}}}},columnWidth:{properties:{value:{type:{numeric:!0}}}}},dataViewMappings:[{conditions:[{Rows:{max:0},Columns:{max:0},Values:{min:1}},{Rows:{min:1},Columns:{min:0},Values:{min:0}},{Rows:{min:0},Columns:{min:1},Values:{min:0}}],matrix:{rows:{for:{in:"Rows"},dataReductionAlgorithm:{window:{count:500}}},columns:{for:{in:"Columns"},dataReductionAlgorithm:{top:{count:100}}},values:{for:{in:"Values"}}}}],dataRoleTotals:[{roles:[t.matrixRoleNames.columns],displayName:e.data.createDisplayNameGetter("DisplayName_QuickCalc_PercentOfColumnTotal"),shortDisplayName:e.data.createDisplayNameGetter("DisplayName_QuickCalc_PercentOfColumnTotalShort"),tooltip:e.data.createDisplayNameGetter("DisplayName_QuickCalc_PercentOfColumnTotalTooltip")},{roles:[t.matrixRoleNames.rows],displayName:e.data.createDisplayNameGetter("DisplayName_QuickCalc_PercentOfRowTotal"),shortDisplayName:e.data.createDisplayNameGetter("DisplayName_QuickCalc_PercentOfRowTotalShort"),tooltip:e.data.createDisplayNameGetter("DisplayName_QuickCalc_PercentOfRowTotalTooltip")}],filterMappings:{measureFilter:{targetRoles:[t.matrixRoleNames.rows]}},sorting:{custom:{}},drilldown:{roles:[t.matrixRoleNames.rows,t.matrixRoleNames.columns]},suppressDefaultTitle:!0,disableVisualDetails:!0}})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){t.animatedNumber=e.visuals.animatedNumberCapabilities,t.areaChart=e.visuals.getLineChartCapabilities(!1,!0),t.barChart=e.visuals.getColumnChartCapabilities(!0,!0),t.card=e.visuals.cardCapabilities,t.multiRowCard=e.visuals.multiRowCardCapabilities,t.clusteredBarChart=e.visuals.getColumnChartCapabilities(!0),t.clusteredColumnChart=e.visuals.getColumnChartCapabilities(),t.columnChart=e.visuals.getColumnChartCapabilities(!1,!0),t.comboChart=e.visuals.getComboChartCapabilities(!1),t.dataDotChart=e.visuals.dataDotChartCapabilities,t.dataDotClusteredColumnComboChart=e.visuals.getComboChartCapabilities(!1),t.dataDotStackedColumnComboChart=e.visuals.getComboChartCapabilities(!0),t.donutChart=e.visuals.donutChartCapabilities,t.funnel=e.visuals.funnelChartCapabilities,t.gauge=e.visuals.gaugeCapabilities,t.hundredPercentStackedBarChart=e.visuals.getColumnChartCapabilities(!0,!0),t.hundredPercentStackedColumnChart=e.visuals.getColumnChartCapabilities(!1,!0),t.image=e.visuals.imageVisualCapabilities,t.lineChart=e.visuals.getLineChartCapabilities(!1,!1),t.stackedAreaChart=e.visuals.getLineChartCapabilities(!0,!0),t.lineStackedColumnComboChart=e.visuals.getComboChartCapabilities(!0),t.lineClusteredColumnComboChart=e.visuals.getComboChartCapabilities(!1),t.map=e.visuals.mapCapabilities,t.filledMap=e.visuals.filledMapCapabilities,t.shapeMap=e.visuals.shapeMapCapabilities,t.treemap=e.visuals.treemapCapabilities,t.pieChart=e.visuals.donutChartCapabilities,t.scatterChart=e.visuals.scatterChartCapabilities,t.table=e.visuals.tableCapabilities,t.matrix=e.visuals.matrixCapabilities,t.slicer=e.visuals.slicerCapabilities,t.textbox=e.visuals.textboxCapabilities,t.waterfallChart=e.visuals.waterfallChartCapabilities,t.cheerMeter=e.visuals.cheerMeterCapabilities,t.heatMap=e.visuals.mapCapabilities,t.sunburst=e.visuals.sunburstCapabilities,t.scriptVisual=e.visuals.scriptVisualCapabilities,t.kpi=e.visuals.KPIStatusWithHistoryCapabilities,t.realTimeLineChart=e.visuals.realTimeLineChartCapabilities})(a=t.capabilities||(t.capabilities={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function t(){}return t.prototype.bindEvents=function(t,a){this.options=t;var i=t.eventGroup;i.on("click",(function(){e.InteractivityUtils.tryToSelectD3Target((function(e){return a.handleSelection(e,d3.event.ctrlKey)}))})),i.on("contextmenu",(function(){if(!d3.event.ctrlKey){d3.event.preventDefault();var t=e.InteractivityUtils.getPositionOfLastInputEvent();e.InteractivityUtils.tryToSelectD3Target((function(e){return a.handleContextMenu(e,t)}))}}))},t.prototype.renderSelection=function(t){var a=this.options;a.bars.style("fill-opacity",(function(i){return e.ColumnUtil.getFillOpacity(i.selected,i.highlight,!i.highlight&&t,!i.selected&&a.hasHighlights)}))},t})();e.ColumnChartWebBehavior=t})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function t(){}return t.prototype.bindEvents=function(t,a){var i=this.dots=t.dots,r=t.dotLabels;e.InteractivityUtils.registerStandardInteractivityHandlers(i,a),r&&e.InteractivityUtils.registerStandardInteractivityHandlers(r,a)},t.prototype.renderSelection=function(t){this.dots.style("fill-opacity",(function(a){return e.ColumnUtil.getFillOpacity(a.selected,a.highlight,t,!1)}))},t})();e.DataDotChartWebBehavior=t})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function t(){}return t.prototype.bindEvents=function(t,a){var i=this.slices=t.slices,r=this.highlightSlices=t.highlightSlices,o=t.clearCatcher;this.hasHighlights=t.hasHighlights;var n=function(e){a.handleSelection(e.data,d3.event.ctrlKey)},s=function(t){if(!d3.event.ctrlKey){var i=e.InteractivityUtils.getPositionOfLastInputEvent();a.handleContextMenu(t.data,i),d3.event.preventDefault()}};i.on("click",n),i.on("contextmenu",s),r&&(r.on("click",n),r.on("contextmenu",s)),o.on("click",(function(){d3.event.ctrlKey||a.handleClearSelection()}))},t.prototype.renderSelection=function(t){var a=this.hasHighlights;this.slices.style("fill-opacity",(function(i){return e.ColumnUtil.getFillOpacity(i.data.selected,!1,t,a&&!i.data.selected)})),this.highlightSlices&&this.highlightSlices.style("fill-opacity",(function(t){return e.ColumnUtil.getFillOpacity(t.data.selected,!0,!1,a)}))},t})();e.DonutChartWebBehavior=t})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function t(){}return t.prototype.bindEvents=function(t,a){var i=this.bars=t.bars,r=this.interactors=t.interactors,o=t.clearCatcher;this.hasHighlights=t.hasHighlights,e.InteractivityUtils.registerStandardInteractivityHandlers(i,a),e.InteractivityUtils.registerStandardInteractivityHandlers(r,a),o.on("click",(function(){d3.event.ctrlKey||a.handleClearSelection()}))},t.prototype.renderSelection=function(t){var a=this.hasHighlights;this.bars.style("fill-opacity",(function(i){return e.ColumnUtil.getFillOpacity(i.selected,i.highlight,!i.highlight&&t,!i.selected&&a)}))},t})();e.FunnelWebBehavior=t})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(e,t,a,i,r){var o=e.getCategoryIndex(i,a),n=_.find(i.data,(function(e){return e&&e.categoryIndex===o}));n?t.handleSelection(n,d3.event.ctrlKey):t.handleSelection({selected:i.selected,identity:i.identity,specificIdentity:e.categoryIdentities[o]},d3.event.ctrlKey)}function a(t,a,i,r,o){if(!d3.event.ctrlKey){d3.event.preventDefault();var n=e.InteractivityUtils.getPositionOfLastInputEvent(),s=t.getCategoryIndex(r,i),l=_.find(r.data,(function(e){return e&&e.categoryIndex===s}));l?a.handleContextMenu(l,n):a.handleContextMenu({selected:r.selected,identity:r.identity,specificIdentity:t.categoryIdentities[s]},n)}}var i=(function(){function i(){}return i.prototype.bindEvents=function(i,r){var o=this;this.lines=i.lines;var n=i.interactivityLines,s=this.dots=i.dots,l=this.areas=i.areas,c=this.tooltipOverlay=i.tooltipOverlay,u=function(e){return o.getPointX(e)};n.on("click",(function(e,a){t(i,r,u(this),e,a)})),n.on("contextmenu",(function(e,t){a(i,r,u(this),e,t)})),e.InteractivityUtils.registerStandardInteractivityHandlers(s,r),l&&(l.on("click",(function(e,a){t(i,r,u(this),e,a)})),l.on("contextmenu",(function(e,t){a(i,r,u(this),e,t)}))),c&&(_.isEmpty(i.categoryIdentities)?c.on("click",(function(){d3.event.ctrlKey||r.handleClearSelection()})):(c.on("click",(function(){var e=i.getCategoryIndex(void 0,u(this));r.handleSelection({selected:!1,identity:void 0,specificIdentity:i.categoryIdentities[e]},d3.event.ctrlKey)})),c.on("contextmenu",(function(){if(!d3.event.ctrlKey){d3.event.preventDefault();var t=e.InteractivityUtils.getPositionOfLastInputEvent(),a=i.getCategoryIndex(void 0,u(this));r.handleContextMenu({selected:!1,identity:void 0,specificIdentity:i.categoryIdentities[a]},t)}}))))},i.prototype.renderSelection=function(t){this.lines.style("stroke-opacity",(function(a){return e.ColumnUtil.getFillOpacity(a.selected,!1,t,!1)})),this.dots.style("fill-opacity",(function(a){return e.ColumnUtil.getFillOpacity(a.selected,!1,t,!1)})),this.areas&&this.areas.style("fill-opacity",(function(a){return t&&!a.selected?e.LineChart.DimmedAreaFillOpacity:e.LineChart.AreaFillOpacity}))},i.prototype.getPointX=function(e){for(var t,a=d3.event;t=a.sourceEvent;)a=t;var i=e.getBoundingClientRect();return a.clientX-i.left-e.clientLeft},i})();e.LineChartWebBehavior=i})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=(function(){function a(){this.mapPointerEventsDisabled=!1,this.mapPointerTimeoutSet=!1,this.viewChangedSinceLastClearMouseDown=!1,this.receivedZoomOrPanEvent=!1}return a.prototype.bindEvents=function(a,i){var r=this,o=this.bubbles=a.bubbles,n=this.slices=a.slices,s=this.shapes=a.shapes,l=a.clearCatcher,c=function(){var a=d3.event;e.visuals.EventBubblingUtil.handled(a)||t.InteractivityUtils.tryToSelectD3Target((function(e){o&&o.style("pointer-events","all"),s&&s.style("pointer-events","all"),i.handleSelection(e,d3.event.ctrlKey)}))};this.mapPointerEventsDisabled||(o&&o.style("pointer-events","all"),n&&n.style("pointer-events","all"),s&&s.style("pointer-events","all")),o&&(a.bubbleEventGroup.on("click",c),a.bubbleEventGroup.on("mousewheel",(function(){r.mapPointerEventsDisabled||o.style("pointer-events","none"),r.mapPointerEventsDisabled=!0,r.mapPointerTimeoutSet||(r.mapPointerTimeoutSet=!0,setTimeout((function(){o&&o.style("pointer-events","all"),r.mapPointerEventsDisabled=!1,r.mapPointerTimeoutSet=!1}),200))})),t.InteractivityUtils.registerGroupContextMenuHandler(a.bubbleEventGroup,i)),n&&(a.sliceEventGroup.on("click",(function(){e.visuals.EventBubblingUtil.handled(d3.event)||(n.style("pointer-events","all"),r.mapPointerEventsDisabled=!1,t.InteractivityUtils.tryToSelectD3Target((function(e){i.handleSelection(e.data,d3.event.ctrlKey)})))})),a.sliceEventGroup.on("mousewheel",(function(){r.mapPointerEventsDisabled||n.style("pointer-events","none"),r.mapPointerEventsDisabled=!0,r.mapPointerTimeoutSet||(r.mapPointerTimeoutSet=!0,setTimeout((function(){n&&n.style("pointer-events","all"),r.mapPointerEventsDisabled=!1,r.mapPointerTimeoutSet=!1}),200))})),a.sliceEventGroup.on("contextmenu",(function(){if(!d3.event.ctrlKey){d3.event.preventDefault();var e=t.InteractivityUtils.getPositionOfLastInputEvent();t.InteractivityUtils.tryToSelectD3Target((function(t){i.handleContextMenu(t.data,e)}))}}))),s&&(a.shapeEventGroup.on("click",c),a.shapeEventGroup.on("mousewheel",(function(){r.mapPointerEventsDisabled||s.style("pointer-events","none"),r.mapPointerEventsDisabled=!0,r.mapPointerTimeoutSet||(r.mapPointerTimeoutSet=!0,setTimeout((function(){s&&s.style("pointer-events","all"),r.mapPointerEventsDisabled=!1,r.mapPointerTimeoutSet=!1}),200))})),t.InteractivityUtils.registerGroupContextMenuHandler(a.shapeEventGroup,i)),l&&(l.on("mouseup",(function(){r.viewChangedSinceLastClearMouseDown||d3.event.ctrlKey||(i.handleClearSelection(),r.receivedZoomOrPanEvent=!0)})),l.on("mousedown",(function(){r.viewChangedSinceLastClearMouseDown=!1})),l.on("mousewheel",(function(){r.receivedZoomOrPanEvent=!0})))},a.prototype.renderSelection=function(e){this.bubbles&&this.bubbles.style({"fill-opacity":function(a){return t.ColumnUtil.getFillOpacity(a.selected,!1,e,!1)},"stroke-opacity":function(a){return t.ColumnUtil.getFillOpacity(a.selected,!1,e,!1)}}),this.slices&&this.slices.style({"fill-opacity":function(a){return t.ColumnUtil.getFillOpacity(a.data.selected,!1,e,!1)},"stroke-opacity":function(a){return t.ColumnUtil.getFillOpacity(a.data.selected,!1,e,!1)}}),this.shapes&&this.shapes.style({"fill-opacity":function(a){return t.ColumnUtil.getFillOpacity(a.selected,!1,e,!1)},"stroke-opacity":function(a){return t.ColumnUtil.getFillOpacity(a.selected,!1,e,!1)}})},a.prototype.viewChanged=function(){this.viewChangedSinceLastClearMouseDown=!0},a.prototype.resetZoomPan=function(){this.receivedZoomOrPanEvent=!1},a.prototype.hasReceivedZoomOrPanEvent=function(){return this.receivedZoomOrPanEvent},a})();t.MapBehavior=a})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=jsCommon.CssConstants.createClassAndSelector,a=jsCommon.PerfTimer,i=(function(){function t(){}return t.prototype.bindEvents=function(t,a){var i=this.bubbles=t.dataPointsSelection,r=t.data,o=t.eventGroup;!this.playOptions||!this.playOptions.traceLineRenderer||t.playOptions&&t.playOptions.traceLineRenderer||this.playOptions.traceLineRenderer.remove(),this.playOptions=t.playOptions,this.shouldEnableFill=(!r.sizeRange||!r.sizeRange.min)&&r.fillPoint,this.colorBorder=r.colorBorder,this.hitTester=new e.ScatterChartHitTester(t.data.dataPoints),this.selectionHandler=a,o?e.InteractivityUtils.registerGroupInteractivityHandlers(o,a):e.InteractivityUtils.registerStandardInteractivityHandlers(i,a)},t.prototype.renderSelection=function(t){var a=this.shouldEnableFill,i=this.colorBorder;if(this.bubbles.style({"fill-opacity":function(i){return e.ScatterChart.getMarkerFillOpacity(null!=i.size,a,t,i.selected)},"stroke-opacity":function(a){return e.ScatterChart.getMarkerStrokeOpacity(null!=a.size,i,t,a.selected)}}),this.playOptions&&this.bubbles){var r=this.bubbles.filter((function(e){return e.selected})).data(),o=this.playOptions.traceLineRenderer;r&&r.length>0&&null!=o?o.render(r,!0):o.remove()}},t.prototype.lassoSelect=function(e,t){var a=this.hitTester.queryRegion(t),i=0;e.ctrlKey?i=1:e.altKey?i=3:e.shiftKey&&(i=2),this.selectionHandler.handleMultipleSelection(a,i)},t})();e.ScatterChartWebBehavior=i;var r=(function(){function t(){}return t.prototype.bindEvents=function(e,t){this.setOptions(e),e.visualInitOptions&&e.visualInitOptions.interactivity.isInteractiveLegend&&(this.makeDataPointsSelectable(e.dataPointsSelection),this.makeRootSelectable(e.root),this.makeDragable(e.root),this.disableDefaultTouchInteractions(e.root),this.selectRoot())},t.prototype.renderSelection=function(e){},t.prototype.setSelectionHandler=function(e){},t.prototype.makeDataPointsSelectable=function(){for(var e=this,t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];for(var i=0,r=t.length;i<r;i++){var o=t[i];o.on("click",(function(t,a){e.select(a)}))}},t.prototype.makeRootSelectable=function(e){var t=this;e.on("click",(function(e,a){t.selectRoot()}))},t.prototype.makeDragable=function(){for(var e=this,t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];for(var i=0,r=t.length;i<r;i++){var o=t[i],n=d3.behavior.drag().on("drag",(function(t){e.drag(0)})).on("dragend",(function(t){e.drag(1)}));o.call(n)}},t.prototype.disableDefaultTouchInteractions=function(e){e.style("touch-action","none")},t.prototype.setOptions=function(e){this.data=e.data,this.mainGraphicsContext=e.plotContext,this.xAxisProperties=e.xAxisProperties,this.yAxisProperties=e.yAxisProperties,this.host=e.host},t.prototype.select=function(e){this.selectDotByIndex(e)},t.prototype.selectRoot=function(){var e=a.start("selectRoot");this.onClick(),e()},t.prototype.drag=function(e){switch(e){case 0:this.onDrag();break;case 1:this.onClick()}},t.prototype.onDrag=function(){var e=this.getMouseCoordinates();this.moveCrosshairToXY(e.x,e.y);var t=this.findClosestDotIndex(e.x,e.y);this.selectDot(t),this.updateLegend(t)},t.prototype.onClick=function(){var e=this.getMouseCoordinates(),t=this.findClosestDotIndex(e.x,e.y);t!==-1&&this.selectDotByIndex(t)},t.prototype.getMouseCoordinates=function(){var e=this.mainGraphicsContext,t=0,a=parseInt(e.attr("height"),10);a=a||0;try{var i=d3.mouse(e.node());t=i[0],a=i[1]}catch(e){}return{x:t,y:a}},t.prototype.selectDotByIndex=function(e){this.selectDot(e),this.moveCrosshairToIndexDot(e),this.updateLegend(e)},t.prototype.selectDot=function(e){var a=this,i=this.mainGraphicsContext;i.selectAll(t.ScatterChartCircleTagName+t.DotClassSelector).classed({selected:!1,notSelected:!0}),i.selectAll(t.ScatterChartCircleTagName+t.DotClassSelector).filter((function(t,i){var r=a.data.dataPoints,o=r[e];return t.x===o.x&&t.y===o.y})).classed({selected:!0,notSelected:!1})},t.prototype.moveCrosshairToIndexDot=function(e){var a=this.data.dataPoints,i=this.mainGraphicsContext,r=this.xAxisProperties.scale(a[e].x),o=this.yAxisProperties.scale(a[e].y);if(null==this.crosshair){var n=+i.attr("width"),s=+i.attr("height");this.crosshair=this.drawCrosshair(i,r,o,n,s),this.crosshairHorizontal=this.crosshair.select(t.Horizontal.selector),this.crosshairVertical=this.crosshair.select(t.Vertical.selector)}else this.moveCrosshairToXY(r,o)},t.prototype.moveCrosshairToXY=function(e,t){this.crosshairHorizontal.attr({y1:t,y2:t}),this.crosshairVertical.attr({x1:e,x2:e})},t.prototype.drawCrosshair=function(e,a,i,r,o){var n=e.append("g");return n.classed(t.CrosshairClassName,!0),n.append("line").classed(t.Horizontal.class,!0).attr({x1:0,x2:r,y1:i,y2:i}),n.append("line").classed(t.Vertical.class,!0).attr({x1:a,x2:a,y1:o,y2:0}),n},t.prototype.findClosestDotIndex=function(e,t){var a=-1,i=Number.MAX_VALUE,r=this.data.dataPoints,o=this.xAxisProperties.scale,n=this.yAxisProperties.scale;
for(var s in r){var l=r[s],c=o(l.x),u=n(l.y),d=c-e,p=u-t,h=d*d+p*p;i===Number.MAX_VALUE?(a=s,i=h):i&&i>h&&(a=s,i=h)}return a},t.prototype.updateLegend=function(e){if(null==this.lastDotIndex||this.lastDotIndex!==e){var t=this.createLegendDataPoints(e);this.host.updateLegend(t),this.lastDotIndex=e}},t.prototype.createLegendDataPoints=function(t){var a=e.scatterChartProps.general.formatString,i=[],r=this.data,o=r.dataPoints[t],n=e.valueFormatter.format(null),s=n,l=r.legendData,c=l.dataPoints,u=o.formattedCategory.getValue();u!==n?(s=u,null!=o&&null!=o.radius&&null!=o.radius.sizeMeasure&&(s+="; "+e.valueFormatter.format(o.radius.sizeMeasure.source.groupName))):null!=o.radius.sizeMeasure?s=e.valueFormatter.format(o.radius.sizeMeasure.source.groupName):c.length>=t&&c[t].label!==n&&(s=c[t].label),null!=r.xCol&&i.push({category:s,color:o.fill,identity:e.SelectionIdBuilder.builder().withMeasure(r.xCol.queryName).createSelectionId(),selected:o.selected,icon:e.LegendIcon.Box,label:e.valueFormatter.format(this.data.axesLabels.x),measure:e.valueFormatter.format(o.x,e.valueFormatter.getFormatString(r.xCol,a)),iconOnlyOnLabel:!0}),null!=r.yCol&&i.push({category:s,color:o.fill,identity:e.SelectionIdBuilder.builder().withMeasure(r.yCol.queryName).createSelectionId(),selected:o.selected,icon:e.LegendIcon.Box,label:e.valueFormatter.format(r.axesLabels.y),measure:e.valueFormatter.format(o.y,e.valueFormatter.getFormatString(r.yCol,a)),iconOnlyOnLabel:!0}),null!=r.size&&i.push({category:s,color:o.fill,identity:e.SelectionIdBuilder.builder().withMeasure(r.size.queryName).createSelectionId(),selected:o.selected,icon:e.LegendIcon.Box,label:e.valueFormatter.format(r.size.displayName),measure:e.valueFormatter.format(o.radius.sizeMeasure.values[o.radius.index],e.valueFormatter.getFormatString(r.size,a)),iconOnlyOnLabel:!0});var d=e.Legend.getDefaultLegendData();return d.dataPoints=i,d},t})();r.CrosshairClassName="crosshair",r.ScatterChartCircleTagName="circle",r.DotClassName="dot",r.DotClassSelector="."+r.DotClassName,r.Horizontal=t("horizontal"),r.Vertical=t("vertical"),e.ScatterChartMobileBehavior=r})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function t(){}return t.prototype.bindEvents=function(t,a){this.itemLabels=t.itemLabels,this.dataPoints=t.dataPoints,this.interactivityService=t.interactivityService,this.slicerSettings=t.settings,e.SlicerWebBehavior.bindSlicerEvents(t,this.itemLabels,a,this.slicerSettings,this.interactivityService)},t.prototype.renderSelection=function(t){e.SlicerWebBehavior.setSelectionOnSlicerItems(this.itemLabels,this.itemLabels,t,this.interactivityService,this.slicerSettings)},t})();e.HorizontalSlicerWebBehavior=t})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function t(){}return t.prototype.bindEvents=function(t,a){var i=t.itemContainers;this.itemLabels=t.itemLabels,this.itemInputs=t.itemInputs,this.dataPoints=t.dataPoints,this.interactivityService=t.interactivityService,this.settings=t.settings,e.SlicerWebBehavior.bindSlicerEvents(t,i,a,this.settings,this.interactivityService)},t.prototype.renderSelection=function(t){e.SlicerWebBehavior.setSelectionOnSlicerItems(this.itemInputs,this.itemLabels,t,this.interactivityService,this.settings)},t})();e.VerticalSlicerWebBehavior=t})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=jsCommon.DOMConstants,a=jsCommon.KeyUtils,i=(function(){function i(){}return i.prototype.bindEvents=function(e,t){this.behavior=this.createWebBehavior(e),this.behavior.bindEvents(e.behaviorOptions,t)},i.prototype.renderSelection=function(e){this.behavior.renderSelection(e)},i.bindSlicerEvents=function(e,t,a,r,o){i.bindSlicerItemSelectionEvent(t,a,r,o),e.searchInput&&i.bindSlicerSearchEvent(e.searchInput,e.clearSearchTextButton,a,e.slicerValueHandler),i.styleSlicerContainer(e.slicerContainer,o)},i.setSelectionOnSlicerItems=function(e,t,a,r,o){if(a||r.isSelectionModeInverted())i.styleSlicerItems(e,a,r.isSelectionModeInverted());else{e.filter(".selected").classed("selected",!1),e.filter(".partiallySelected").classed("partiallySelected",!1);var n=e.selectAll("input");n&&n.property("checked",!1),t.style("color",o.slicerText.color)}},i.styleSlicerItems=function(e,t,a){e.each((function(e,i){var r=this,o=!1;e.isSelectAllDataPoint?t?(r.classList.add("partiallySelected"),o=!1):(r.classList.remove("partiallySelected"),o=a):o=jsCommon.LogicExtensions.XOR(e.selected,a),o?r.classList.add("selected"):r.classList.remove("selected");var n=r.getElementsByTagName("input")[0];n&&(n.checked=o)}))},i.bindSlicerItemSelectionEvent=function(t,a,r,o){t.on("click",(function(t){d3.event.preventDefault(),t.isSelectAllDataPoint?a.toggleSelectionModeInversion():a.handleSelection(t,i.isMultiSelect(d3.event,r,o)),a.persistSelectionFilter(e.slicerProps.filterPropertyIdentifier)}))},i.bindSlicerSearchEvent=function(e,r,o,n){var s=this;e.empty()||(e.on(t.keyDownEventName,(function(){d3.event.ctrlKey&&a.isCtrlShortcutKey(d3.event.keyCode)?d3.event.stopPropagation():a.isArrowKey(d3.event.keyCode)||a.isDeleteKey(d3.event.keyCode)?d3.event.stopPropagation():27===d3.event.keyCode?(s.clearSearch(o),d3.event.stopPropagation()):13===d3.event.keyCode&&(i.startSearch(e,o,n),d3.event.stopPropagation())})).on(t.keyUpEventName,_.debounce((function(){i.startSearch(e,o,n)}),i.searchInputTimeoutDuration)),r&&!r.empty()&&r.on(t.mouseClickEventName,(function(){s.clearSearch(o),d3.event.stopPropagation()})))},i.clearSearch=function(t){t.persistSelfFilter(e.slicerProps.selfFilterPropertyIdentifier,null)},i.startSearch=function(t,a,i){var r=t.node(),o=r&&r.value;if(o=_.trim(o),_.isEmpty(o))return void a.persistSelfFilter(e.slicerProps.selfFilterPropertyIdentifier,null);var n=i.getUpdatedSelfFilter(o);n&&a.persistSelfFilter(e.slicerProps.selfFilterPropertyIdentifier,n)},i.styleSlicerContainer=function(e,t){var a=t.hasSelection()&&void 0===t.isDefaultValueEnabled()||t.isDefaultValueEnabled()===!1;e.classed("hasSelection",a)},i.isMultiSelect=function(e,t,a){return a.isSelectionModeInverted()||!t.selection.singleSelect||e.ctrlKey},i.prototype.createWebBehavior=function(t){var a,i=t.orientation;switch(i){case 1:a=new e.HorizontalSlicerWebBehavior;break;case 0:default:a=new e.VerticalSlicerWebBehavior}return a},i})();i.searchInputTimeoutDuration=500,e.SlicerWebBehavior=i})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function t(){}return t.prototype.bindEvents=function(t,a){var i=t.legendItems;this.legendIcons=t.legendIcons;var r=t.clearCatcher;e.InteractivityUtils.registerStandardSelectionHandler(i,a),r.on("click",(function(){d3.event.ctrlKey||a.handleClearSelection()}))},t.prototype.renderSelection=function(e){e?this.legendIcons.style({fill:function(e){return e.selected?e.color:t.dimmedLegendColor}}):this.legendIcons.style({fill:function(e){return e.color}})},t})();t.dimmedLegendColor="#A6A6A6",e.LegendBehavior=t})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={})),define("Visuals/behaviours/treemapBehaviors",["require","exports","Visuals/visuals/treemap/util"],(function(e,t,a){var i=powerbi,r=i.visuals,o=r.InteractivityUtils,n=(function(){function e(){}return e.prototype.bindEvents=function(e,t){var a=this.shapes=e.shapes,i=this.highlightShapes=e.highlightShapes,r=e.majorLabels,n=e.minorLabels;this.hasHighlights=e.hasHighlights,o.registerStandardInteractivityHandlers(a,t),o.registerStandardInteractivityHandlers(i,t),r&&o.registerStandardInteractivityHandlers(r,t),n&&o.registerStandardInteractivityHandlers(n,t)},e.prototype.renderSelection=function(e){var t=this.hasHighlights;this.shapes.style("fill",(function(e){return a.getFill(e,!1)})).style("fill-opacity",(function(i){return a.getFillOpacity(i,e,!i.selected&&t,!1)})),this.highlightShapes.style("fill",(function(e){return a.getFill(e,!0)})).style("fill-opacity",(function(i){return a.getFillOpacity(i,e,!i.selected&&t,!0)}))},e})();t.TreemapWebBehavior=n}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function t(){}return t.prototype.bindEvents=function(t,a){var i=this.bars=t.bars;i.on("click",(function(e){e.isTotal||a.handleSelection(e,d3.event.ctrlKey)})),i.on("contextmenu",(function(t){if(!d3.event.ctrlKey&&(d3.event.preventDefault(),!t.isTotal)){var i=e.InteractivityUtils.getPositionOfLastInputEvent();a.handleContextMenu(t,i)}}))},t.prototype.renderSelection=function(t){this.bars.style("fill-opacity",(function(a){return a.isTotal?e.ColumnUtil.DefaultOpacity:e.ColumnUtil.getFillOpacity(a.selected,a.highlight,t,!1)}))},t})();e.WaterfallChartWebBehavior=t})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function t(){}return t.prototype.bindEvents=function(t,a){this.labelItems=t.labelItems,e.InteractivityUtils.registerStandardSelectionHandler(this.labelItems,a)},t.prototype.renderSelection=function(e){e?this.labelItems.style({opacity:function(e){return e.selected?t.DefaultLabelOpacity:t.DimmedLabelOpacity}}):this.labelItems.style({opacity:t.DefaultLabelOpacity})},t})();t.DefaultLabelOpacity=1,t.DimmedLabelOpacity=.6,e.LabelsBehavior=t})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e){this.behaviors=e}return e.prototype.bindEvents=function(e,t){for(var a=this.behaviors,i=0,r=a.length;i<r;i++)a[i].bindEvents(e.layerOptions[i],t);this.selectionHandler=t,e.clearCatcher.on("mousedown",(function(){d3.event.ctrlKey||t.handleClearSelection()}))},e.prototype.renderSelection=function(e){for(var t=0,a=this.behaviors;t<a.length;t++){var i=a[t];i.renderSelection(e)}},e.prototype.hoverLassoRegion=function(e,t){for(var a=0,i=this.behaviors;a<i.length;a++){var r=i[a];r.hoverLassoRegion&&r.hoverLassoRegion(e,t)}},e.prototype.lassoSelect=function(e,t){for(var a=0,i=this.behaviors;a<i.length;a++){var r=i[a];r.lassoSelect&&r.lassoSelect(e,t)}},e})();e.CartesianChartBehavior=t})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={})),define("Visuals/behaviours/sunburstBehaviour",["require","exports"],(function(e,t){function a(e,a,i){return e.color?i?t.maxOpacity.toString():!a||e.selected?null:e.depth>1&&e.parent.selected?null:t.maxOpacity.toString():t.zeroOpacity.toString()}var i=powerbi,r=i.visuals,o=r.InteractivityUtils;t.maxOpacity=1,t.minOpacity=.2,t.zeroOpacity=0;var n=(function(){function e(){}return e.prototype.bindEvents=function(e,t){this.options=e;var a=e.slices;o.registerStandardInteractivityHandlers(a,t)},e.prototype.renderSelection=function(e){var t=this.options;t.slices.style("fill-opacity",(function(t){return a(t,e,t.selected)}))},e})();t.SunburstBehavior=n})),define("Visuals/behaviours/shapeMapBehaviors",["require","exports"],(function(e,t){var a=powerbi.visuals,i=a.InteractivityUtils,r=(function(){function e(){}return e.prototype.bindEvents=function(e,t){var a=this;e.clearCatcher.on("click",(function(){d3.event.ctrlKey||t.handleClearSelection(),a.shapeMap.zoomOnClick()})),this.shapes=e.shapes,this.shapes.on("click",(function(e,i){var r=a.shapeMap.getDataPointFromShape(e);r?t.handleSelection({identity:r.categoryIdentity,selected:r.selected},d3.event.ctrlKey):t.handleClearSelection(),a.shapeMap.zoomOnClick(e)})),this.shapes.on("contextmenu",(function(){if(!d3.event.ctrlKey){d3.event.preventDefault();var e=d3.event.target,r=d3.select(e).datum();if(r){var o=a.shapeMap.getDataPointFromShape(r);if(o){var n=i.getPositionOfLastInputEvent();t.handleContextMenu(o,n)}}}}))},e.prototype.renderSelection=function(e){var t=this;this.shapes.transition().duration(600).style("opacity",(function(a){var i=t.shapeMap.getDataPointFromShape(a);return i&&i.selected||!e?1:.4}))},e})();t.ShapeMapBehavior=r}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t=(function(){function e(){}return e.prototype.willCollide=function(e){return!1},e.prototype.addItem=function(e){},e.prototype.skipItem=function(e){},e})();e.NoCollisionDetector=t;var a=(function(){function e(e,t,a){this.fontOffsetLeft=t,this.fontOffsetRight=a,this.previousLabelRightEdge=e}return e.prototype.willCollide=function(e){var t=e-this.fontOffsetLeft;return t<=this.previousLabelRightEdge},e.prototype.addItem=function(e){this.previousLabelRightEdge=e+this.fontOffsetRight},e.prototype.skipItem=function(e){},e})();e.CollisionDetector=a;var i=(function(){function e(t,a,i,r,o,n,s){this.fontOffsetLeft=a,this.fontOffsetRight=i,this.currentNode=r,this.scale=o,this.halfCategoryThickness=n,this.rotationPadding=s,this.previousLabelRightEdge=t,this.index=0;var l=e.getLastChildIndex(r,0);this.groupEndPosition=o(l)+n-s}return e.prototype.willCollide=function(t){if(!e.isLastChild(this.currentNode)){var a=t+this.fontOffsetRight;return a>this.groupEndPosition}var i=t-this.fontOffsetLeft;return i<=this.previousLabelRightEdge},e.prototype.addItem=function(e){this.moveToNextNode(e)},e.prototype.skipItem=function(e){this.moveToNextNode(e)},e.prototype.moveToNextNode=function(t){var a=this.currentNode,i=this.currentNode=this.currentNode.next;if(this.index++,e.isLastChild(a)){this.previousLabelRightEdge=this.groupEndPosition+2*this.rotationPadding;var r=e.getLastChildIndex(i,this.index);this.groupEndPosition=this.scale(r)+this.halfCategoryThickness-this.rotationPadding}else this.previousLabelRightEdge=t+this.fontOffsetRight},e.isLastChild=function(e){return null==e.next||e.parent!==e.next.parent},e.getLastChildIndex=function(t,a){for(var i=t,r=a;!e.isLastChild(i);)r++,i=i.next;return r},e})();e.HierarchicalCollisionDetector=i})(t=e.AxisTickCollisionUtils||(e.AxisTickCollisionUtils={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=e.visuals.AxisTickCollisionUtils,i=jsCommon.API,r=jsCommon.FreezeUtility,o=jsCommon.PixelConverter;t.emptyDomain=[0,0];var n;!(function(e){e[e.top=0]="top",e[e.bottom=1]="bottom",e[e.left=2]="left",e[e.right=3]="right"})(n=t.AxisOrientation||(t.AxisOrientation={}));var s;!(function(s){function l(e){return e<300?3:e<500?5:8}function c(e){return e<150?3:e<300?5:8}function u(e,t,a,i,r,o){return isNaN(e)||isNaN(t)?me:e===t?o||r?1:me:i<=1||t<=1&&e>=-1?i:d(a)?i:Math.min(t-e+1,i)}function d(e){for(var t=0,a=e.length;t<a;t++){var i=e[t];if(i&&i.type&&!i.type.integer)return!0}return!1}function p(e,t,a,i,r){return!i||P(t)?h(e,t.domain()):D(a)?y(e,t.domain()):g(e,t,r)}function h(e,t){var a=[];if(e<=0)return a;var i=t.length;if(e>i)return t;for(var r=0,o=Math.ceil(i/e);r<i;r+=o)a.push(t[r]);return a}function g(e,t,a){var i=[];if(0===e)return i;var r=t;if(r.ticks){if(i=r.ticks(e),i.length>e&&e>1&&(i=r.ticks(e-1)),i.length<ge&&(i=r.ticks(e+1)),i=m(i),a&&i.length>1){for(var o=i[1]-i[0];o>0&&o<a;){for(var n=1;n<i.length;n++)i.splice(n,1);o=2*o}1===i.length&&i.push(i[0]+a)}return i}return i}function m(e,t){if(void 0===t&&(t=1e-5),!e||e.length<2)return e;var a=t*Math.abs(e[1]-e[0]);return e.map((function(e){return Math.abs(e)<=a?0:e}))}function y(t,a){var i=[];if(0===a[0]&&0===a[1])return[];var r=e.DateTimeSequence.calculate(new Date(a[0]),new Date(a[1]),t).sequence;return i=r.map((function(e){return e.getTime()})),i=O(i,a[0],a[1])}function f(e){return isNaN(e.min)||isNaN(e.max)?(e.min=t.emptyDomain[0],e.max=t.emptyDomain[1]):e.min===e.max?(e.min=e.min<0?1.2*e.min:.8*e.min,e.max=e.max<0?.8*e.max:1.2*e.max):Math.abs(e.min)<1e-4&&e.min/(e.max-e.min)<1e-4&&(e.min=0),e}function v(e,t,a,i){return 0===l(e-a)||0===c(t-i)?{top:0,right:a,bottom:i,left:0}:{top:20,right:30,bottom:40,left:30}}function b(e,a,r,o,n,u,d,p,h,g,m,y){var f,v,b=e,C=!1;if(b.plotArea)f=b.plotArea,a=b.yMarginLimit,r=b.textWidthMeasurer,o=b.textHeightMeasurer,n=b.axes,u=b.bottomMarginLimit,v=b.axesFontProperties,p=b.scrollbarVisible,h=b.showOnRight,g=b.renderXAxis,m=b.renderY1Axis,y=b.renderY2Axis,C=null!=b.numHierarchyLevels&&b.numHierarchyLevels>0;else{i.deprecated("Calling getTickLabelMargins without a property bag is deprecated"),f=e;var S=d.fontFamily,x=parseInt(d.fontSize,10);v={x:{tickLabels:t.FontProperties.create({family:S,size:{px:x}}),title:t.FontProperties.create({family:S,size:{px:x}})},y:{tickLabels:t.FontProperties.create({family:S,size:{px:x}}),title:t.FontProperties.create({family:S,size:{px:x}})},y2:{tickLabels:t.FontProperties.create({family:S,size:{px:x}}),title:t.FontProperties.create({family:S,size:{px:x}})}},(d.fontWeight||d.fontStyle||d.fontVariant||d.whiteSpace)&&i.deprecated('getTickLabelMargins now ignores the following properties in the "properties" object: fontWeight, fontStyle, fontVariant, whiteSpace')}var w=n.x,D=n.y1,T=n.y2,V=w.values,L=0,N=0,M=0,A=0,R=0,F=0,O=0,I=w.categoryThickness?w.categoryThickness/2:0,H=P(w.scale),j=-5,z=0;void 0!==w.outerPadding?z=w.outerPadding:void 0!==w.xLabelMaxWidth&&(z=Math.max(0,(f.width-w.xLabelMaxWidth*V.length)/2));var k,G=g&&!_.isEmpty(V);if(0!==l(f.width)||0!==c(f.height)){var E=void 0;if(E=p||C?ve.DefaultRotationWithScrollbar:ve.DefaultRotation,m){var W=t.AxesLayoutUtils.getAxisTickLabelMargins(D,v.y.tickLabels,r,o);R=W.maxWidth,M=Math.max(M,W.overflow.top),A=Math.max(A,W.overflow.bottom)}if(T&&y){var W=t.AxesLayoutUtils.getAxisTickLabelMargins(T,v.y2.tickLabels,r,o);F=W.maxWidth,M=Math.max(M,W.overflow.top),A=Math.max(A,W.overflow.bottom)}var B=v.x.tickLabels,U=B.toTextProperties(),K=w.scale,Y=K.domain();if(k=o(U),G){for(var q=Math.floor(u/k),X=0,$=V.length;X<$;X++){var Q=void 0;U.text=V[X];var Z=r(U);if(w.willLabelsWordBreak){var J=_.isEmpty(w.xLabelMaxWidths)?w.xLabelMaxWidth:w.xLabelMaxWidths[X],ee=jsCommon.WordBreaker.splitByWidth(U.text,U,r,J,q);Q=ee.length*k,Z=J}else if(!w.willLabelsFit&&H){var te=B.sizePx<=t.CartesianChart.DefaultAxisFontSizeInPx,ae=te?0:k*E.sine,ie=te?0:k*E.cosine;Q=Z*E.sine+ie,Z=Z*E.cosine+ae}else Q=k+j;if(0===X){if(H)L=w.willLabelsFit?Z/2-I-z:Z-I-z,L=Math.max(L,0);else if(Y.length>1){var re=K(Y[0]);L=Z/2-re,L=Math.max(L,0)}}else if(X===$-1)if(H)(w.willLabelsFit||w.willLabelsWordBreak)&&(N=Z/2-I-z,N=Math.max(N,0));else if(Y.length>1){var re=K(Y[1]);N=Z/2-(f.width-re),N=Math.max(N,0)}O=Math.max(O,Q)}L=Math.min(L,he),N=Math.min(N,he)}}var oe=0,ne=0,se=Math.min(Math.max(A,Math.ceil(O)),u);return h?(ne=Math.min(Math.max(L,F),a),oe=Math.min(Math.max(N,R),a)):(ne=Math.min(Math.max(L,R),a),oe=Math.min(Math.max(N,F),a)),C&&G&&(se+=(k+s.stackedAxisPadding)*(b.numHierarchyLevels-1)),{yTop:Math.ceil(M),yLeft:Math.ceil(ne),yBottom:Math.ceil(A),yRight:Math.ceil(oe),xMax:Math.ceil(se),stackHeight:C?k+s.stackedAxisPadding:void 0}}function C(e,t,a,i,r){var n=e.scale,l=e.axis.tickValues();if(_.isEmpty(l))return{maxWidth:0,overflow:{top:0,bottom:0}};var c,u;if(s.isOrdinalScale(n))D=n.rangeExtent(),c=D[0],u=D[1];else{var d=n.range();c=_.first(d),u=_.last(d)}var p,h,g,m,y=e.values;c<u?(p=c,h=n(_.first(l)),g=u,m=n(_.last(l))):(p=u,h=n(_.last(l)),g=c,m=n(_.first(l)));for(var f={text:""+_.first(y),fontFamily:t,fontSize:o.toString(a)},v=r(f),b=Math.max(0,-(h-v/2-p)),C=Math.max(0,m+v/2-g),S=0,x=0,w=y.length;x<w;x++){var P={text:""+y[x],fontFamily:t,fontSize:o.toString(a)};S=Math.max(S,i(P))}return{maxWidth:S,overflow:{top:b,bottom:C}};var D}function S(e){return e&&(e.bool||e.numeric||e.text||e.dateTime)}function x(){return e.ValueType.fromDescriptor({text:!0})}function w(e){return!(!e||!(e.text||e.bool||e.misc&&e.misc.barcode||e.geography&&e.geography.postalCode))}function P(e){return"function"==typeof e.rangePoints}function D(e){return!(!e||!e.dateTime)}function T(e,t){return P(e)?N(e,t):e.invert(t)}function V(e){return P(e)?e.rangeExtent():e.range()}function L(e){var t=e.range();if(t.length<2&&s.isOrdinalScale(e)){var a=e.rangeExtent();return a[1]-a[0]}return t[1]-t[0]}function N(e,t){var a=e.range();if(a.length<2)return 0;var i=e.rangeBand(),r=(a[1]-a[0]-i)/2,o=e.range(),n=e.domain();return o[0]>t?n[0]:n[d3.bisect(o,t+r)-1]}function M(e,t){var a=-1,i=Number.MAX_VALUE;for(var r in t){var o=Math.abs(e-t[r].categoryValue);o<i&&(i=o,a=parseInt(r,10))}return a}function A(e,t){var a=-1,i=Number.MAX_VALUE,r=e.domain();if(r.length<2)return 0;var o=(e(1)-e(0))/2;for(var n in r){var s=e(n),l=s+o,c=Math.abs(t-l);c<i&&(i=c,a=parseInt(n,10))}return a}function R(e,t,a){var i=e(t)-e(a);return 0===i?0:i<0?Math.min(i,-1):Math.max(i,1)}function F(e,t,a,i,r){if(a&&!w(t)){var o=void 0,n=void 0;return i&&2===i.length&&(o=i[0],n=i[1]),$(e,o,n,t,r)}return Z(e)}function O(e,t,a){var i=e.filter((function(e){return e>=t&&e<=a}));return i.length<2&&(i=[t,a]),i}function I(t,a){return t&&S(t.type)?t.type:a?e.ValueType.fromDescriptor({numeric:!0}):e.ValueType.fromDescriptor({text:!0})}function H(e){var a=e.pixelSpan,i=e.dataDomain,r=e.metaDataColumn,o=e.formatString,n=e.outerPadding||0,l=e.outerPaddingRatio||0,c=!!e.isCategoryAxis,u=!!e.isScalar,d=!!e.isVertical,h=!!e.useTickIntervalForDisplayUnits,g=e.getValueFn,m=e.categoryThickness,y=e.axisDisplayUnits,f=e.axisPrecision,v=!!e.is100Pct,b=e.margin,C=r instanceof Array?r[0]:r,S=s.getCategoryValueType(C,u);c&&j(S,o,y,i)&&(o="0",h=!1);var x=s.createScale(e),w=x.scale,P=x.bestTickCount,D=w.domain(),T=s.isLogScalePossible(i,S);if(m&&u&&i&&2===i.length){var V=i[1]-i[0],L=D[1]-D[0];V>0&&L>0&&(m=m*V/L)}var N;if(u&&!_.isEmpty(i)&&1===P)N=[i[0]];else{var M=u?X(o,S,v):void 0;N=p(P,w,S,u,M)}e.scaleType&&e.scaleType===t.axisScale.log&&T&&(N=N.filter((function(e){return s.powerOfTen(e)})));var A=s.createFormatter({scaleDomain:D,dataDomain:i,dataType:S,isScalar:u,formatString:o,bestTickCount:P,tickValues:N,useTickIntervalForDisplayUnits:h,axisDisplayUnits:y,axisPrecision:f}),R=d3.svg.axis().scale(w).tickSize(6,0).orient(d?"left":"bottom").ticks(P).tickValues(N),F=[];_.isEmpty(r)||(F=q(R,N,A,S,g));var O,I;return!u&&m?O=Math.max(1,m-2*t.CartesianChart.TickLabelPadding):N.length>1?(O=G(w,N),O-=2*fe,b&&(I=E(w,N,b,n,O),O=void 0)):O=a-2*fe,{scale:w,axis:R,formatter:A,values:F,axisType:S,axisLabel:t.converterHelper.createAxisLabel(r),isCategoryAxis:c,xLabelMaxWidth:O,xLabelMaxWidths:I,categoryThickness:m,outerPadding:n,outerPaddingRatio:l,usingDefaultDomain:x.usingDefaultDomain,isLogScaleAllowed:T,dataDomain:i}}function j(e,t,a,i){return!!e&&((!t||"g"===t||"G"===t)&&((!a||1===a)&&(!(!e.temporal||!e.temporal.year)||!!(e.integer&&i&&2===i.length&&z(i[0])&&z(i[1])))))}function z(e){return _.isNumber(e)&&e===Math.floor(e)&&e>-1e4&&e<1e4}function k(e){var t=e.axis,a=null!=e.orient?n[e.orient]:n[n.bottom];return d3.svg.axis().scale(e.scale).tickSize(e.innerTickSize||0,e.outerTickSize||0).orient(a).ticks(t.ticks()).tickValues(t.tickValues()).tickFormat(e.tickFormat)}function G(e,t){return e&&!_.isEmpty(t)?Math.abs(e(t[1])-e(t[0])):1}function E(e,t,a,i,r){var o=_.times(t.length,_.constant(r)),n=a.left,s=a.right,l=e(_.first(t)),c=e(_.last(t)),u=e.range(),d=u[0],p=u[1],h=2*(Math.abs(l-d)+n+i),g=2*(Math.abs(c-p)+s+i);return o[0]=Math.min(h,r),o[t.length-1]=Math.min(g,r),o}function W(e){var a=e.pixelSpan,i=e.dataDomain,r=e.metaDataColumn,o=e.outerPadding||0,n=!!e.isScalar,u=!!e.isVertical,d=e.forcedTickCount,p=e.categoryThickness,h=!!e.shouldClamp,g=e.maxTickCount,m=e.allowSingleScalarTick,y=r instanceof Array?r:[r],v=y[0],b=s.getCategoryValueType(v,n),C=u?c(a):l(a);g&&C>g&&(C=g);var S,x=i?i.slice():null,P=C,D=!1;if(null==i||2===i.length&&null==i[0]&&null==i[1]||2!==i.length&&n)D=!0,i=b.dateTime||!w(b)?t.emptyDomain:[],S=w(b)?J(a,i,p?o/p:0):te(e.scaleType,a,i,b,o,P);else{if(n&&i.length>0){P=void 0!==d?0!==C?d:0:s.getBestNumberOfTicks(i[0],i[i.length-1],y,C,b.dateTime,m);var T=f({min:i[0],max:i[i.length-1]});x=[T.min,T.max]}if(n&&b.numeric&&!b.dateTime){x&&2===x.length&&0===x[0]&&0===x[1]&&e.zeroScalarDomain&&(x[0]=e.zeroScalarDomain[0],x[1]=e.zeroScalarDomain[1],void 0===d&&(P=s.getBestNumberOfTicks(x[0],x[1],y,C,b.dateTime,m)));var V=m&&2===x.length&&x[0]===x[1]?0:P;S=te(e.scaleType,a,x,b,o,V,h)}else n&&b.dateTime?S=ie(a,x,o,null,h):(b.text||b.dateTime||b.numeric||b.bool)&&(S=J(a,x,p?o/p:0),P=0===C?0:Math.min(x.length,(a-2*o)/t.CartesianChart.MinOrdinalRectThickness))}return u&&n&&S.range(S.range().reverse()),t.ColumnUtil.normalizeInfinityInScale(S),{scale:S,bestTickCount:P,usingDefaultDomain:D}}function B(e,a,r,o,n,s,l,c,u,d,p){var h,g=e;g.scaleDomain?(h=g.scaleDomain,a=g.dataDomain,r=g.dataType,o=g.isScalar,n=g.formatString,s=g.bestTickCount,l=g.tickValues,u=g.useTickIntervalForDisplayUnits||!1,d=g.axisDisplayUnits,p=g.axisPrecision):(i.deprecated("Calling createFormatter without a property bag is deprecated."),h=e,u=u||!1);var m;if(r.dateTime)if(o){var y=new Date(h[0]),f=new Date(h[1]);1===s&&(y=f=new Date(a[0])),m=t.valueFormatter.create({format:n,value:y,value2:f,tickCount:s,columnType:r})}else m=t.valueFormatter.createDefaultFormatter(n,!0);else if(u&&o&&l.length>1){var v=d?d:l[1]-l[0],b={format:n,value:v,value2:0,allowFormatBeautification:!0,columnType:r};p?b.precision=p:b.precision=U(l[0],l[1],d,n),m=t.valueFormatter.create(b)}else m=o&&1===l.length?t.valueFormatter.create({format:n,value:d?d:_.first(l),allowFormatBeautification:!0,precision:p||U(0,l[0],d,n)}):t.valueFormatter.createDefaultFormatter(n,!0);return m}function U(a,i,r,o){if(!r){var n=t.valueFormatter.createDisplayUnitSystem();n.update(i-a),r=n.displayUnit&&n.displayUnit.value||1}var s=(a||0)/r,l=(i||0)/r;if(o){var c=e.NumberFormat.getCustomFormatMetadata(o,!1,!1,!0).partsPerScale;s*=c,l*=c}return Math.max(K(s),K(l))}function K(t){if(0===t)return 0;t<0&&(t=-t);var a=Math.floor(e.Double.log10(t)),i=5;if(a>=0){var r=a+1,o=i-r;return o<=0?0:Y(t,o)}var n=t/e.Double.pow10(a+1),s=Y(n,i),l=-a-1;return l+s}function Y(e,t){var a=e.toFixed(t),i=a.indexOf(".");if(i!==-1)for(var r=a.length;r-- >i;)if("0"!==a[r])return r-i;return 0}function q(e,t,a,i,r){var o=[];return r||(r=function(e){return e}),a?(e.tickFormat((function(e){return a.format(r(e,i))})),o=t.map((function(e){return a.format(r(e,i))}))):o=t.map((function(e){return r(e,i)})),o}function X(t,a,i){var r=t&&!e.NumberFormat.isStandardFormat(t);if(r){var o=e.NumberFormat.getCustomFormatMetadata(t,!0).precision;return t.indexOf("%")>-1&&(o+=2),Math.pow(10,-o)}return i?.01:a.integer?1:0}function $(e,t,a,i,r){if(0===e.length)return null;var o=d3.min(e,(function(e){return d3.min(e.data,(function(e){return e&&e.categoryValue}))})),n=d3.max(e,(function(e){return d3.max(e.data,(function(e){return e&&e.categoryValue}))}));return ne([t,a],[o,n],r)}function Q(e,t){if(0===e.length)return null;var a=d3.min(e,(function(e){return d3.min(e.data,(function(e){return e&&e.value}))})),i=d3.max(e,(function(e){return d3.max(e.data,(function(e){return e&&e.value}))}));return t?[Math.min(a,0),Math.max(i,0)]:[a,i]}function Z(e){if(_.isEmpty(e))return[];for(var t=[],a=e[0],i=0,r=a.data;i<r.length;i++){var o=r[i];o.highlight||t.push(o.categoryIndex)}return t}function J(e,a,i){void 0===i&&(i=0);var r=d3.scale.ordinal().rangeBands([0,e],t.CartesianChart.InnerPaddingRatio,i).domain(a);return r}function ee(e,t){return null!=e&&(!D(t)&&(e[0]>0&&e[1]>0||e[0]<0&&e[1]<0))}function te(e,a,i,r,o,n,s){return void 0===o&&(o=0),e===t.axisScale.log&&ee(i,r)?ae(a,i,o,n):ie(a,i,o,n,s)}function ae(e,t,a,i){void 0===a&&(a=0);var r=d3.scale.log().range([a,e-a]).domain([t[0],t[1]]).clamp(!0);return i&&r.nice(i),r}function ie(e,t,a,i,r){void 0===a&&(a=0);var o=d3.scale.linear().range([a,e-a]).domain([t[0],t[1]]).clamp(r);return i&&o.nice(i),o}function re(e){var t={};return e&&(t.min=null==e.min?null==e.minLocal?d3.min(e.values):e.minLocal:e.min,t.max=null==e.max?null==e.maxLocal?d3.max(e.values):e.maxLocal:e.max),t}function oe(e,t){var a=[void 0,void 0];return t&&2===t.length&&(a=[t[0],t[1]]),e&&2===e.length&&(null!=e[0]&&(a[0]=e[0]),null!=e[1]&&(a[1]=e[1])),null==a[0]&&null==a[1]?t:null!=a[0]&&null!=a[1]&&a[0]>a[1]?t:a}function ne(e,t,a){var i=t?[t[0],t[1]]:[];a&&((null==i[0]||a.min<i[0])&&(i[0]=a.min),(null==i[1]||a.max>i[1])&&(i[1]=a.max));var r=[i[0],i[1]];return e&&2===e.length&&(null!=e[0]&&(i[0]=e[0]),null!=e[1]&&(i[1]=e[1]),i[0]>i[1]&&(i=r)),i}function se(e,a,i,r){void 0===r&&(r=!1);var o=r?"secAxisStyle":"axisStyle";if(!e||!e[o])return a;var n;return n=e[o]===t.axisStyle.showBoth?a+" ("+i+")":e[o]===t.axisStyle.showUnitOnly?i:a}function le(e,t){return!(!e||!t||e.length<2||t.length<2)&&(e[0]!==t[0]||e[1]!==t[1])}function ce(e){return isNaN(e)?null:e===Number.POSITIVE_INFINITY?Number.MAX_VALUE:e===Number.NEGATIVE_INFINITY?-Number.MAX_VALUE:e}function ue(e){var t=Math.abs(e),a=Math.log(t)/Math.LN10;return a=Math.ceil(a-1e-12),t/Math.pow(10,a)===1}function de(e){var t=e;return t.isHierarchical}function pe(e){var t=e;return t.isStacked===!0}var he=35,ge=2,me=3,ye=10,fe=3;s.stackedAxisPadding=5,s.getRecommendedNumberOfTicksForXAxis=l,s.getRecommendedNumberOfTicksForYAxis=c,s.getBestNumberOfTicks=u,s.hasNonIntegerData=d,s.getRecommendedTickValues=p,s.getRecommendedTickValuesForAnOrdinalRange=h,s.getRecommendedTickValuesForAQuantitativeRange=g,s.getMargin=v,s.getTickLabelMargins=b,s.getTickLabelMarginsForAxis=C,s.columnDataTypeHasValue=S,s.createOrdinalType=x,s.isOrdinal=w,s.isOrdinalScale=P,s.isDateTime=D,s.invertScale=T,s.extent=V,s.getCategoryThickness=L,s.invertOrdinalScale=N,s.findClosestXAxisIndex=M,s.lookupOrdinalIndex=A,s.diffScaled=R,s.createDomain=F,s.ensureValuesInRange=O,s.getCategoryValueType=I,s.createAxis=H,s.createStackedAxis=k,s.createScale=W,s.createFormatter=B,s.calculateAxisPrecision=U,s.getMinTickValueInterval=X,s.createValueDomain=Q;var ve;!(function(r){function o(e,t,a,i){var r=e.values;if(0===r.length)return!1;var o=void 0!==e.xLabelMaxWidth?e.xLabelMaxWidth:t/r.length;return!r.some((function(e){return i.text=e,a(i)>o}))}function n(e,a,i,o,n,s,l){var c=e.values,u=void 0!==e.xLabelMaxWidth?e.xLabelMaxWidth:i/c.length,d=a.bottom/r.DefaultRotation.sine,p=n(l),h=Math.max(1,Math.floor(a.bottom/p));if(0===c.length)return!1;var g=c.some((function(e){return l.text=e,!jsCommon.WordBreaker.hasBreakers(e)&&o(l)>u}));if(g)return!1;var m=c.filter((function(i,n){var c=a.left+e.outerPadding+e.categoryThickness*(n+.5)-ye,p=c/r.DefaultRotation.cosine,g=Math.min(p,d),m=jsCommon.WordBreaker.splitByWidth(i,l,o,u,h,s).join(" ");l.text=i;var y=s(l,g);return t.TextUtil.removeEllipses(m).length>=t.TextUtil.removeEllipses(y).length}));return m.length>=c.length>>1}function l(o,n,l,c,u,d,p,h,g){var m,y,f,v=0;if("object"==typeof n){var b=n;l=b.textTruncator,c=b.textProperties,u=b.needRotate,d=b.needEllipsis,p=b.axisProperties,h=b.margin,g=b.scrollbarVisible,m=b.firstVisibleNode,v=b.rotationPadding||0,y=b.dropLabelsOnOverlap,f=b.height}else f=n,i.deprecated("Calling rotate without using the property bag is deprecated.");var C;if(!u)return void o.each((function(e){var t=d3.select(this),a=t.text();c.text=a;var i;if(pe(p))i=_.isEmpty(p.xLabelMaxWidths)?p.xLabelMaxWidth:p.xLabelMaxWidths[e];else{var r=p.axis.tickValues(),o=r.indexOf(e);i=_.isEmpty(p.xLabelMaxWidths)?p.xLabelMaxWidth:p.xLabelMaxWidths[o]}var n=l(c,i);n!==a&&t.text(n),t.style("text-anchor","middle").attr({dx:"0em",dy:"1em",transform:"rotate(0)"})}));C=g?r.DefaultRotationWithScrollbar:r.DefaultRotation;var S,x,w=e.Double.equalWithPrecision(Math.abs(C.cosine),0,1e-10),P=h.left-(w?ye:0),D=t.CartesianChart.DefaultAxisFontSizeInPx,T=c.fontSize,V=parseInt(T,10),L=V<=D,N=e.TextMeasurementService.estimateSvgTextHeight(c),M=p.scale,A=M.range(),R=s.getCategoryThickness(M),F=N*C.sine,O=w?0:N*C.cosine,I=w?0:O/C.tangent,H=F/2,j=I+H,z=H;if(L)S=f/C.sine,x="-5.5px";else{var k=D/2,G=(k+O)*C.sine;x="-"+G+"px";var E=f-k-O-(g?k:0);S=u?E/C.sine:void 0}var W,B=M.rangeBand()/2,U=R/2,K=!!m;if(y)if(K){var Y=v+A[0]+B-U;W=new a.HierarchicalCollisionDetector(Y,j,z,m,M,U,v)}else{var Y=v-(g?0:P);W=new a.CollisionDetector(Y,j,z)}else W=new a.NoCollisionDetector;o.each((function(e,t){var a=d3.select(this),i=A[t]+B;if(y&&W.willCollide(i))return W.skipItem(i),void a.text(null);W.addItem(i);var r=a.text();c.text=r;var o;if(w)o=S;else{var n=L?p.outerPadding+p.categoryThickness*(t+.5):i,s=n+P-F;o=s/C.cosine}(g||d||o<S)&&(r=l(c,Math.min(o,S)),a.text(r)),a.style("text-anchor","end").attr({y:c.fontSize,dx:x,dy:C.dy,transform:C.transform})}))}function c(a,i,r){var o=i.xLabelMaxWidth,n=10,s=null;a.each((function(){if(null==s){var a=e.TextMeasurementService.getSvgMeasurementProperties(this),i=e.TextMeasurementService.estimateSvgTextHeight(a),l=e.TextMeasurementService.estimateSvgTextBaselineDelta(a);
s=n+i-l}var c=d3.select(this);c.style("text-anchor","middle").attr({dx:null,dy:null,y:s+"px",transform:"rotate(0)"}),t.TextUtil.wordBreak(this,o,r)}))}function u(e,t,a){0!==e.size()&&e.each((function(){var e=d3.select(this);a(e[0][0],t)}))}r.willLabelsFit=o,r.willLabelsWordBreak=n,r.DefaultRotation={sine:Math.sin(Math.PI*(35/180)),cosine:Math.cos(Math.PI*(35/180)),tangent:Math.tan(Math.PI*(35/180)),transform:"rotate(-35)",dy:"-0.5em"},r.DefaultRotationWithScrollbar={sine:Math.sin(.5*Math.PI),cosine:Math.cos(.5*Math.PI),tangent:Math.tan(.5*Math.PI),transform:"rotate(-90)",dy:"-0.8em"},r.rotate=l,r.wordBreak=c,r.clip=u})(ve=s.LabelLayoutStrategy||(s.LabelLayoutStrategy={})),s.createOrdinalScale=J,s.isLogScalePossible=ee,s.createNumericalScale=te,s.createLinearScale=ie,s.getRangeForColumn=re,s.applyCustomizedDomain=oe,s.combineDomain=ne,s.createAxisLabel=se,s.scaleShouldClamp=le,s.normalizeNonFiniteNumber=ce,s.powerOfTen=ue,s.isHierarchical=de,s.isStackedAxisProperties=pe;var be=(function(){function a(e,i,o){this.AxisDataDefaults={show:!0,position:t.yAxisPosition.left,fontSize:t.CartesianChart.DefaultAxisFontSizeInPx,fontFamily:t.CartesianChart.DefaultAxisFontFamily,labelColor:null,showAxisTitle:!1,start:void 0,end:void 0,axisType:void 0,axisScale:t.DEFAULT_AXIS_SCALE_TYPE,axisStyle:t.axisStyle.showTitleOnly,labelDisplayUnits:0,labelPrecision:t.dataLabelUtils.defaultLabelPrecision,titleText:void 0,preferredCategoryWidth:t.CartesianChart.MinOrdinalRectThickness,concatenateLabels:t.CartesianChart.DefaultConcatenateLabelsValue,titleFontSize:t.CartesianChart.DefaultAxisFontSizeInPx,titleColor:null,titleFontFamily:t.CartesianChart.DefaultAxisFontFamily},r.deepFreeze(this.AxisDataDefaults),this.isCategoryAxisSet=!!i,this.isValueAxisSet=!!e;var n=o?e:i,s=o?i:e,l=e;this.x=a.createSingleAxisFromObject(n,this.AxisDataDefaults),this.y=a.createSingleAxisFromObject(s,this.AxisDataDefaults),this.categoryAxis=o?this.y:this.x,this.valueAxis=o?this.x:this.y;var c=_.clone(this.AxisDataDefaults);c.show=void 0,c.position=t.yAxisPosition.right,c.labelColor=o?this.x.labelColor:this.y.labelColor,c.fontSize=o?this.x.fontSize:this.y.fontSize,c.fontFamily=o?this.x.fontFamily:this.y.fontFamily,this.y2=a.createSingleAxisFromObject(l,c,!0)}return a.createDefault=function(){return new a((void 0),(void 0),(!1))},a.createSingleAxisFromObject=function(a,i,o){var n=e.DataViewObject.getValue,s=o?function(e){return _.camelCase("sec "+e)}:function(e){return e},l=t.cartesianChartProps.categoryAxis,c=n(a,s(l.show.propertyName),i.show),u=n(a,s(l.showAxisTitle.propertyName),i.showAxisTitle),d=n(a,s(l.start.propertyName),i.start),p=n(a,s(l.end.propertyName),i.end),h=n(a,s(l.position.propertyName),i.position),g=n(a,s(l.axisType.propertyName),i.axisType),m=n(a,s(l.axisScale.propertyName),i.axisScale),y=n(a,s(l.axisStyle.propertyName),i.axisStyle),f=n(a,s(l.fontSize.propertyName),i.fontSize),v=n(a,s(l.fontFamily.propertyName),i.fontFamily),b=n(a,s(l.labelDisplayUnits.propertyName),i.labelDisplayUnits),C=n(a,s(l.labelPrecision.propertyName),i.labelPrecision);(!C||C<0)&&(C=i.labelPrecision);var S=n(a,s(l.labelColor.propertyName),i.labelColor),x=n(a,s(l.titleText.propertyName),i.titleText),w=n(a,s(l.preferredCategoryWidth.propertyName),i.preferredCategoryWidth),P=n(a,s(l.concatenateLabels.propertyName),i.concatenateLabels),D=n(a,s(l.titleFontSize.propertyName),f),T=n(a,s(l.titleColor.propertyName),S),V=n(a,s(l.titleFontFamily.propertyName),v),L={show:c,showAxisTitle:u,start:d,end:p,position:h,axisType:g,axisScale:m,axisStyle:y,fontSize:f,fontFamily:v,labelDisplayUnits:b,labelPrecision:C,labelColor:S,titleText:x,preferredCategoryWidth:w,concatenateLabels:P,titleFontSize:D,titleColor:T,titleFontFamily:V};return r.deepFreeze(L),L},a})();s.AxesData=be})(s=t.AxisHelper||(t.AxisHelper={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(e,t,a,i,r){var o=a*c.PaddingConstRatio+e.lineWeight/2,n=t*c.PaddingConstRatio+e.lineWeight/2,u=a*c.ShapeConstRatio-e.lineWeight,d=t*c.ShapeConstRatio-e.lineWeight,p={x:o,y:n,width:u,height:d,rx:e.roundEdge,ry:e.roundEdge},h=l(u,d,r);s(e,t,a,i,r,h,"rect",p)}function a(e,t,a,i,r){var o=(a/c.OvalRadiusConst).toString(),n=(t/c.OvalRadiusConst).toString(),u=a/(c.OvalRadiusConst+c.OvalRadiusConstPadding)-e.lineWeight,d=t/(c.OvalRadiusConst+c.OvalRadiusConstPadding)-e.lineWeight,p={cx:o,cy:n,rx:u,ry:d},h=l(a,t,r);s(e,t,a,i,r,h,"ellipse",p)}function i(e,t,a,i,r){var o,n,s,l,u,d=a-c.SmallPaddingConstValue-c.SmallPaddingConstValue,p=t-c.SmallPaddingConstValue-c.SmallPaddingConstValue;r<=45?(u=r/90,o=a/2+d*u,n=c.SmallPaddingConstValue,s=a/2-d*u,l=t-c.SmallPaddingConstValue):r<=135?(u=(r-45)/90,o=a-c.SmallPaddingConstValue,n=c.SmallPaddingConstValue+p*u,s=c.SmallPaddingConstValue,l=t-c.SmallPaddingConstValue-p*u):r<=225?(u=(r-135)/90,o=a-c.SmallPaddingConstValue-d*u,n=t-c.SmallPaddingConstValue,s=c.SmallPaddingConstValue+d*u,l=c.SmallPaddingConstValue):r<=315?(u=(r-225)/90,o=c.SmallPaddingConstValue,n=t-c.SmallPaddingConstValue-p*u,s=a-c.SmallPaddingConstValue,l=c.SmallPaddingConstValue+p*u):r<=360&&(u=(r-315)/90,o=c.SmallPaddingConstValue+d*u,n=c.SmallPaddingConstValue,s=a-c.SmallPaddingConstValue-d*u,l=t-c.SmallPaddingConstValue),i.append("svg").attr({width:a,height:t}).append("line").attr({x1:o,y1:n,x2:s,y2:l}).style({"vector-effect":"non-scaling-stroke","stroke-width":e.lineWeight+"px","stroke-opacity":(100-e.lineTransparency)/100,stroke:e.lineColor})}function r(e,t,a,i,r){var o=e.lineWeight,s=t-o,l=a-o,u=[{x:(l*c.ArrowLeftHeadPoint.x).toString(),y:(s*c.ArrowLeftHeadPoint.y).toString()},{x:(l*c.ArrowMiddleHeadPoint.x).toString(),y:(s*c.ArrowMiddleHeadPoint.y).toString()},{x:(l*c.ArrowRightHeadPoint.x).toString(),y:(s*c.ArrowRightHeadPoint.y).toString()},{x:(l*c.ArrowRightMiddleHeadPoint.x).toString(),y:(s*c.ArrowRightMiddleHeadPoint.y).toString()},{x:(l*c.ArrowBottomRightPoint.x).toString(),y:(s*c.ArrowBottomRightPoint.y).toString()},{x:(l*c.ArrowBottomLeftPoint.x).toString(),y:(s*c.ArrowBottomLeftPoint.y).toString()},{x:(l*c.ArrowLeftMiddleHeadPoint.x).toString(),y:(s*c.ArrowLeftMiddleHeadPoint.y).toString()}];n(e,u,i,t,a,r)}function o(e,t,a,i,r){var o=e.lineWeight;o>3&&(o-=3);var s=(a+o)*c.TrianglePaddingConstRatio,l=t-c.SmallPaddingConstValue-o<0?t-c.SmallPaddingConstValue:t-c.SmallPaddingConstValue-o,u=(t+o)*c.TrianglePaddingConstRatio,d=(a-o)*c.TriangleEndPaddingConstRatio<0?a*c.TriangleEndPaddingConstRatio:(a-o)*c.TriangleEndPaddingConstRatio,p=t-c.SmallPaddingConstValue-o<0?t-c.SmallPaddingConstValue:t-o-c.SmallPaddingConstValue,h=(s+d)/2;s<10&&(s=c.SmallPaddingConstValue),u<10&&(u=c.SmallPaddingConstValue);var g=[{x:s,y:l},{x:h,y:u},{x:d,y:p}];n(e,g,i,t,a,r)}function n(e,t,a,i,r,o){var n=d3.svg.line().x((function(e){return e.x})).y((function(e){return e.y})).interpolate("linear"),c={d:n(t)+" Z"},u=l(r,i,o);s(e,i,r,a,o,u,"path",c)}function s(e,t,a,i,r,o,n,s){i.append("div").style({transform:"rotate("+r+"deg) scale("+o+")","transform-origin":"center","-webkit-transform":"rotate("+r+"deg) scale("+o+")","-webkit-transform-origin":"center",width:a+"px",height:t+"px"}).append("svg").attr({width:a,height:t}).append(n).attr(s).style({"vector-effect":"non-scaling-stroke","stroke-width":e.lineWeight+"px",stroke:e.lineColor,"stroke-opacity":(100-e.lineTransparency)/100,fill:e.fillColor,"fill-opacity":e.showFill===!0?(100-e.shapeTransparency)/100:0})}function l(e,t,a){var i=e,r=t,o=Math.atan2(t,e),n=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),s=a/180*Math.PI;return e>=t?(a<90?s+=o:a<180?s-=o:a<270?s+=o:s-=o,r/Math.abs(Math.sin(s))/n):(a<90?s-=o:a<180?s+=o:a<270?s-=o:s+=o,i/Math.abs(Math.cos(s))/n)}var c;!(function(e){e.PaddingConstRatio=.01,e.TrianglePaddingConstRatio=.15,e.TriangleEndPaddingConstRatio=.85,e.ShapeConstRatio=1-2*e.PaddingConstRatio,e.SmallPaddingConstValue=10,e.OvalRadiusConst=2,e.OvalRadiusConstPadding=.2,e.ArrowLeftHeadPoint={x:.05,y:.42},e.ArrowMiddleHeadPoint={x:.5,y:.016},e.ArrowRightHeadPoint={x:.95,y:.42},e.ArrowRightMiddleHeadPoint={x:.764,y:.42},e.ArrowBottomRightPoint={x:.764,y:.993},e.ArrowBottomLeftPoint={x:.246,y:.993},e.ArrowLeftMiddleHeadPoint={x:.246,y:.42}})(c=e.ShapeFactoryConsts||(e.ShapeFactoryConsts={})),e.createRectangle=t,e.createOval=a,e.createLine=i,e.createUpArrow=r,e.createTriangle=o})(t=e.ShapeFactory||(e.ShapeFactory={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a,i=jsCommon.PixelConverter,r="rect";!(function(a){function o(a,i,r,o,n,s,l,c,u,d,p){var h=r.categoryThickness,g=r.isScalar,m=r.outerPaddingRatio,y=t.AxisHelper.createDomain(a.series,a.categoryMetadata?a.categoryMetadata.type:e.ValueType.fromDescriptor({text:!0}),g,[n,s],d),f=t.AxisHelper.createAxis({pixelSpan:i,dataDomain:y,metaDataColumn:a.categoryMetadata,formatString:t.valueFormatter.getFormatString(a.categoryMetadata,t.columnChartProps.general.formatString),outerPadding:h*m,outerPaddingRatio:m,isCategoryAxis:!0,isScalar:g,isVertical:o,categoryThickness:h,useTickIntervalForDisplayUnits:!0,getValueFn:function(e,i){return t.CartesianHelper.lookupXValue(a,e,i,g)},scaleType:l,axisDisplayUnits:c,axisPrecision:u,margin:p,allowSingleScalarTick:g});return r.categoryThickness=f.categoryThickness,f}function n(e,t){t&&e.attr("draggable","true").on("dragstart",t)}function s(e,t,i,r){return r&&!t||i&&!e?a.DimmedOpacity:a.DefaultOpacity}function l(e,t){for(var a=0,i=Number.MAX_VALUE,r=0,o=t.length;r<o;r++){var n=Math.abs(e-t[r]);n<i&&(i=n,a=r)}return a}function c(e,i,o,n,s){var l=!s,c=e.selectAll(t.ColumnChart.SeriesClasses.selector).selectAll(r+i),u=c.filter((function(e){return e.categoryIndex===o}));u.transition().duration(0).style("fill-opacity",a.DefaultOpacity);var d=c.filter((function(e){var t=void 0===n;if(t||s)return e.categoryIndex!==o;var a=e.categoryIndex===n,i=e.categoryIndex!==o;return a&&i})),p=l?d.transition():d;p.style("fill-opacity",a.DimmedOpacity)}function u(e,a,i){var r=a.selectAll(t.ColumnChart.SeriesClasses.selector),o=r.data(e.series,(function(e){return e.key}));return o.enter().append("g").classed(t.ColumnChart.SeriesClasses.class,!0),o.style({fill:function(e){return e.color}}),o.exit().remove(),o}function d(e,t,i,o,n,s){var l;l=n?function(e){var t=_.filter(e.data,(function(e){return!!e.value}));return t}:function(e){return e.data};var c=t.selectAll(o.selector),u=c.data(l,(function(e){return e.key}));return u.enter().append(r).attr("class",(function(e){return o.class.concat(e.highlight?" highlight":"")})),u.style("fill-opacity",(function(t){return a.getFillOpacity(t.selected,t.highlight,s,e.hasHighlights)})).style("fill",(function(t){return t.color!==e.series[t.seriesIndex].color?t.color:null})).attr(i.shapeLayout),u.exit().remove(),u}function p(e,a,i,r,o,n){if(void 0===o&&(o=!1),e){for(var s=e.data(),l=[],c=0,u=s.length;c<u;c++)Array.prototype.push.apply(l,s[c].data);return t.dataLabelUtils.drawDefaultLabelsForDataPointChart(l,a,i,r,o,n)}t.dataLabelUtils.cleanDataLabels(a)}function h(e){for(var t=e.domain(),a=0,i=t.length;a<i;++a)t[a]===Number.POSITIVE_INFINITY?t[a]=Number.MAX_VALUE:t[a]===Number.NEGATIVE_INFINITY&&(t[a]=-Number.MAX_VALUE);e.domain(t)}function g(e,a){var i=a.xScale,r=a.yScale,o=r(0),n=i(0);switch(e.chartType){case t.ColumnChartType.stackedBar:case t.ColumnChartType.hundredPercentStackedBar:return n+Math.abs(t.AxisHelper.diffScaled(i,0,e.valueAbsolute))+t.AxisHelper.diffScaled(i,e.position-e.valueAbsolute,0)+t.dataLabelUtils.defaultColumnLabelMargin;case t.ColumnChartType.clusteredBar:return n+t.AxisHelper.diffScaled(i,Math.max(0,e.value),0)+t.dataLabelUtils.defaultColumnLabelMargin;case t.ColumnChartType.stackedColumn:case t.ColumnChartType.hundredPercentStackedColumn:return o+t.AxisHelper.diffScaled(r,e.position,0)-t.dataLabelUtils.defaultColumnLabelMargin;case t.ColumnChartType.clusteredColumn:return o+t.AxisHelper.diffScaled(r,Math.max(0,e.value),0)-t.dataLabelUtils.defaultColumnLabelMargin}}function m(a,r,o,n,s,l){for(var c=[],u=a.series,d=t.NewDataLabelUtils.createColumnFormatterCacheManager(),p=r.shapeLayout,h=a.scalarCategoryAxis,g=function(r,g){var m=u[r],v=m.labelSettings?m.labelSettings:a.labelSettings;if(!v.show)return c[r]={labelDataPoints:[],maxNumberOfLabels:0},"continue";var b="100"===v.labelDensity,C=void 0;if(!b&&h){var S=t.NewDataLabelUtils.getNumberOfLabelsToRender(o.viewportWidth,_.parseInt(v.labelDensity),t.ColumnChart.minimumLabelsToRender,t.MinMaxLabelDataPointSorter.estimatedLabelWidth);C=S}else C=m.data.length;var x=t.NewDataLabelUtils.getLabelUnitAndPrecisionForAxis(n,v),w=m.data,P=[],D=function(r,n){if(null==r||null==r.value||a.hasHighlights&&!r.highlight)return null;var c;c=o.is100Pct?t.NewDataLabelUtils.hundredPercentFormat:r.labelFormatString;var u,h=d.getOrCreate(c,v,x.units,x.getPrecision(!!c,m.type)),g=t.NewDataLabelUtils.getLabelFormattedText(h.format(r.value)),b={text:g,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:i.fromPoint(v.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},C=e.TextMeasurementService.measureSvgTextWidth(b),S=e.TextMeasurementService.estimateSvgTextHeight(b,!0),w={left:p.x(r),top:p.y(r),width:p.width(r),height:p.height(r)};u=l?y(v.position):f(v.position);var P;P=s?r.value>=0?3:4:r.value>=0?1:2;var D={isPreferred:!1,text:g,textSize:{width:C,height:S},outsideFill:t.ColumnChart.getLabelFill(v.labelColor,!1,o.isComboChart),insideFill:t.ColumnChart.getLabelFill(v.labelColor,!0,o.isComboChart),parentType:1,parentShape:{rect:w,orientation:P,validPositions:u},identity:r.identity,fontSize:v.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt};return D};if(!_.isEmpty(w))for(var T=0,V=w.length;T<V;T++){var L=D(w[T],T);L&&P.push(L)}c[r]={labelDataPoints:P,maxNumberOfLabels:C}},m=0,v=u.length;m<v;m++)g(m,v);if(a&&a.scalarCategoryAxis){var b=new t.MinMaxLabelDataPointSorter({unsortedLabelDataPointGroups:c,series:u,viewport:{width:o.viewportWidth,height:o.viewportHeight},yAxisProperties:n});return b.getSortedDataLabels()}return c}function y(e){switch(e){case t.labelPosition.insideEnd:return[4];case t.labelPosition.insideCenter:return[1];case t.labelPosition.insideBase:return[2];case t.labelPosition.outsideEnd:return[16];default:return t.ColumnChart.validLabelPositionsAutoClustered}}function f(e){switch(e){case t.labelPosition.insideEnd:return[4];case t.labelPosition.insideBase:return[2];case t.labelPosition.insideCenter:return[1];default:return t.ColumnChart.validLabelPositionsAutoStacked}}a.DimmedOpacity=.4,a.DefaultOpacity=1,a.getCategoryAxis=o,a.applyInteractivity=n,a.getFillOpacity=s,a.getClosestColumnIndex=l,a.setSelectedColumnOpacity=c,a.drawSeries=u,a.drawDefaultShapes=d,a.drawDefaultLabels=p,a.normalizeInfinityInScale=h,a.calculatePosition=g,a.createLabelDataPoints=m})(a=t.ColumnUtil||(t.ColumnUtil={}));var o;!(function(e){function t(e,t){var a=e.selectAll(t.selector).data([]);a.exit().remove()}e.clearColumns=t})(o=t.ClusteredUtil||(t.ClusteredUtil={}));var n;!(function(a){function i(e,a,i){return void 0===i&&(i=0),t.AxisHelper.diffScaled(e,i,a)}function r(t,a){var i={min:0,max:10};if(0===t.length)return i;var r=d3.min(t,(function(e){return d3.min(e.data,(function(e){return e.position-e.valueAbsolute}))})),o=d3.max(t,(function(e){return d3.max(e.data,(function(e){return e.position}))}));return a&&(r=e.Double.roundToPrecision(r,s),o=e.Double.roundToPrecision(o,s)),{min:r,max:o}}function o(e,a){for(var i=0,r=0,o=0,n=e.length;o<n;o++){var s=e[o][a];s=t.AxisHelper.normalizeNonFiniteNumber(s),s>0?i+=s:s<0&&(r-=s)}var l=i+r;return{pos:i?i/l/i:1,neg:r?r/l/r:1}}function n(e,t){var a=e.selectAll(t.selector).data([]);a.exit().remove()}var s=1e-4;a.getSize=i,a.calcValueDomain=r,a.getStackedMultiplier=o,a.clearColumns=n})(n=t.StackedUtil||(t.StackedUtil={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a,i=e.data.HierarchyVisitor;!(function(a){function i(t,a,i){if(!t||!t.categorical||_.isEmpty(t.categorical.categories))return t;var r=t.categorical.categories,s=o(r,a),l=n(r,i),c=e.Prototype.inheritSingle(t),u=e.Prototype.inheritSingle(c.metadata.columns);u.push(l);var d=e.Prototype.inheritSingle(c.metadata);d.columns=u,c.metadata=d;var p=t.categorical,h=e.data.DataViewCategoricalUtils.getCategoriesDataViewObjects(p.categories),g={source:l,values:s},m=t.categorical.categories[0];m.identity&&(g.identity=m.identity),m.identityFields&&(g.identityFields=m.identityFields),h&&(g.objects=h);var y=[g],f=e.Prototype.inheritSingle(p);return f.categories=y,c.categorical=f,c}function o(a,i){for(var r=[],o=0,n=a;o<n.length;o++)for(var s=n[o],l=s.values,c=t.valueFormatter.getFormatString(s.source,i),u=t.valueFormatter.create({format:c,value:l[0],value2:l[l.length-1],displayUnitSystemType:e.DisplayUnitSystemType.Verbose,columnType:s.source.type}),d=0,p=s.values.length;d<p;d++){var h=s.values[d],g=u.format(h),m=r[d];m||(m=[],r.splice(d,0,m)),m.push(g)}return _.map(r,(function(e){return e.join(" ")}))}function n(t,a){var i=r.getCategoryLevels(t),o=r.concatenateCategoryLevels(i),n={};n[a]=!0;var s={displayName:o.displayName,roles:n,type:e.ValueType.fromPrimitiveTypeAndCategory(1)},l=_.last(t).source;return void 0!==l.isMeasure&&(s.isMeasure=l.isMeasure),s.queryName=l.queryName,s}a.concatenateCategories=i,a.buildConcatenatedValues=o,a.buildConcatenatedMetadataColumn=n})(a=t.DataViewConcatenateUtil||(t.DataViewConcatenateUtil={}));var r;!(function(e){function a(e){return{displayName:_.map(e,(function(e){return e.displayName})).join(" "),value:_.map(e,(function(e){return e.value})).join(" ")}}function r(e,a,r){for(var o=null!=a,n=null,s=null,l=null,c=[],u=0;u<e.length;u++){var d=e[u],p=d.source;if(p){var h=p.expr?i.getProperty(p.expr):null;null!=h?(h===n?s=p.displayName:(null!==n&&c.push({displayName:n+" "+s,value:l.join(" ")}),n=h,s=p.displayName,l=null,o&&(l=[])),o&&l.push(t.converterHelper.formatFromMetadataColumn(d.values[a],p,r,!1))):null!=n?(c.push({displayName:n+" "+s,value:l?l.join(" "):null}),n=null,s=null,l=null,c.push({displayName:p.displayName,value:o?t.converterHelper.formatFromMetadataColumn(d.values[a],p,r,!1):null})):c.push({displayName:p.displayName,value:o?t.converterHelper.formatFromMetadataColumn(d.values[a],p,r,!1):null})}}return null!=n&&c.push({displayName:n+" "+s,value:o?l.join(" "):null}),c}e.concatenateCategoryLevels=a,e.getCategoryLevels=r})(r=t.CategoryLevelUtils||(t.CategoryLevelUtils={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a,i=e.data.DataRoleHelper;!(function(a){function r(e,t,a){if(e.categories&&e.categories.length>0){var r=e.categories[0];return r.source&&i.hasRole(r.source,t)&&i.hasRole(r.source,a)}return!1}function o(a,i){if(a.categories&&a.categories.length>0){var r=_.last(a.categories),o=r.values;return r.values.length>0?{categories:o,categoryFormatter:t.valueFormatter.create({format:t.valueFormatter.getFormatString(r.source,i),value:o[0],value2:o[o.length-1],displayUnitSystemType:e.DisplayUnitSystemType.Verbose,columnType:r.source.type}),categoryIdentities:r.identity,categoryObjects:r.objects}:{categories:[],categoryFormatter:{format:t.valueFormatter.format}}}return l()}function n(e){return void 0!==e.groupName?e.groupName:e.queryName}function s(e,a,i){var r=e,o=e.displayName;return void 0!==e.groupName&&(r=a.source,o=e.groupName),t.valueFormatter.format(o,t.valueFormatter.getFormatString(r,i))}function l(){return{categories:[null],categoryFormatter:{format:t.valueFormatter.format}}}function c(e){var a;if(e instanceof Array){var i=[];i=e.map((function(e){return e?e.displayName:""})).filter((function(e,t,a){return""!==e&&a.indexOf(e)===t})),a=t.valueFormatter.formatListAnd(i)}else e&&(a=e.displayName);return a}function u(e,a,i,r){var o=null,n=null;if(e&&i&&i.displayName&&(o=i.displayName),a){var s=[];r&&(s=r.map((function(e){return e?e.displayName:""})).filter((function(e,t,a){return""!==e&&a.indexOf(e)===t})),n=t.valueFormatter.formatListAnd(s))}return{xAxisLabel:o,yAxisLabel:n}}function d(e){var t=h(e);return null!=t&&t.imageUrl===!0}function p(e){var t=h(e);return null!=t&&t.webUrl===!0}function h(e){return e&&e.type&&e.type.misc}function g(e){return!(!e||!e.metadata||_.isEmpty(e.metadata.columns))&&_.any(e.metadata.columns,(function(e){return d(e)===!0}))}function m(e,a,i,r){void 0===r&&(r=!0),!r&&a&&a.format&&(r=!0);var o=t.valueFormatter.getFormatString(a,i,r);return!o&&a&&(o=a.format),t.valueFormatter.format(e,o)}a.categoryIsAlsoSeriesRole=r,a.getPivotedCategories=o,a.getSeriesName=n,a.getFormattedLegendLabel=s,a.createAxisLabel=c,a.createAxesLabels=u,a.isImageUrlColumn=d,a.isWebUrlColumn=p,a.hasImageUrlColumn=g,a.formatFromMetadataColumn=m})(a=t.converterHelper||(t.converterHelper={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a,i=jsCommon.CssConstants.createClassAndSelector,r=t.labelStyle,o=jsCommon.PixelConverter;!(function(a){function n(e,t,i){e&&(void 0!==e.show&&(t.show=e.show),void 0!==e.showSeries&&(t.show=e.showSeries),void 0!==e.color&&(t.labelColor=e.color.solid.color),void 0!==e.labelDisplayUnits&&(t.displayUnits=e.labelDisplayUnits),void 0!==e.labelPrecision&&(t.precision=e.labelPrecision>=0?e.labelPrecision:a.defaultLabelPrecision),void 0!==e.fontSize&&(t.fontSize=e.fontSize),void 0!==e.showAll&&(t.showLabelPerSeries=e.showAll),void 0!==e.labelStyle&&(t.labelStyle=e.labelStyle),void 0!==e.labelOrientation&&(t.labelOrientation=i?e.labelOrientation:t.labelOrientation),e.labelPosition&&(t.position=e.labelPosition))}function s(e,t,i){return void 0===e&&(e=!1),{show:e,position:0,displayUnits:0,precision:a.defaultLabelPrecision,labelColor:t||a.defaultLabelColor,fontSize:i||a.DefaultFontSizeInPt}}function l(e,t,a){var i=s(!0,e,a);return i.showCategory=!0,i.categoryLabelColor=t,i}function c(){return{show:!1,displayUnits:0,precision:a.defaultLabelPrecision,labelColor:a.defaultInsideLabelColor,showCategory:!0}}function u(){return{show:!1,labelColor:a.defaultInsideLabelColor,fontSize:a.DefaultFontSizeInPt,displayUnits:0,precision:a.defaultLabelPrecision,showCategory:!0}}function d(e,i,r){return void 0===e&&(e=!1),{show:e,labelOrientation:1,position:t.labelPosition.auto,displayUnits:0,precision:a.defaultLabelPrecision,labelColor:i||a.defaultLabelColor,fontSize:r||a.DefaultFontSizeInPt}}function p(e){var t=s(!1,void 0);return t.position=null,t.labelColor=void 0,t.labelDensity=a.defaultLabelDensity,t.labelOrientation=1,t}function h(){return{show:!1,position:0,displayUnits:0,precision:a.defaultLabelPrecision,labelColor:a.defaultLabelColor,fontSize:a.DefaultFontSizeInPt}}function g(e){return{show:!1,position:0,displayUnits:0,precision:a.defaultLabelPrecision,labelColor:a.defaultLabelColor,fontSize:a.DefaultFontSizeInPt,labelDensity:a.defaultLabelDensity}}function m(){return{show:!1,showCategory:!1,position:0,displayUnits:0,precision:a.defaultLabelPrecision,labelColor:a.defaultInsideLabelColor,fontSize:a.DefaultFontSizeInPt}}function y(){var e=a.getDefaultLabelSettings(!0,a.defaultLabelColor,a.DefaultFontSizeInPt);return e.labelStyle=r.category,e}function f(){return{show:!0,displayUnits:0,precision:a.defaultLabelPrecision,labelColor:null,position:null,fontSize:a.minLabelFontSize}}function v(){return{show:!1,displayUnits:0,precision:a.defaultLabelPrecision,labelColor:a.defaultLabelColor,position:null,showCategory:!0}}function b(t,i){if(t!==a.defaultLabelPrecision)return t;if("g"!==i&&"G"!==i){if(i){var r=e.NumberFormat.getComponents(i).positive,o=e.NumberFormat.getCustomFormatMetadata(r,!0);if(o.hasDots){if(o.optionalPrecision)return;return o.precision}}return E}}function C(a,i,r,o,n,s,l){void 0===n&&(n=!1);var c=new e.DataLabelManager,u=c.hideCollidedLabels(o,a,r),d=n&&!!s,p=S(u,i,!1,d);if(p)return d?(p.text((function(e){return e.labeltext})).transition().duration(s).style(r.style).style("opacity",l?function(e){return t.ColumnUtil.getFillOpacity(e.selected,!1,l,!1)}:1).attr({x:function(e){return e.labelX},y:function(e){return e.labelY}}),p.exit().transition().duration(s).style("opacity",0).remove()):(p.attr({x:function(e){return e.labelX},y:function(e){return e.labelY}}).text((function(e){return e.labeltext})).style(r.style),p.exit().remove()),p}function S(e,t,a,i){if(void 0===a&&(a=!1),void 0===i&&(i=!1),0===e.length)return x(t,!0),null;t.select(W.selector).empty()&&t.append("g").classed(W.class,!0);var r=null!=e[0].key,o=null!=e[0].identity,n=r?function(e){return e.key}:o?function(e){return e.identity.getKey()}:void 0,s=a?t.select(W.selector).selectAll(U.selector).data(e,(function(e){return e.data.identity.getKey()})):null!=n?t.select(W.selector).selectAll(U.selector).data(e,n):t.select(W.selector).selectAll(U.selector).data(e),l=s.enter().append("text").classed(U.class,!0);return i&&l.style("opacity",0),s}function x(e,t){void 0===t&&(t=!1);var a=[],i=e.selectAll(U.selector).data(a);if(i.exit().remove(),e.selectAll(W.selector).remove(),t){var r=e.selectAll(K.selector).data(a);r.exit().remove(),e.selectAll(B.selector).remove()}}function w(e,a,i){e.selectAll(U.selector).style("fill-opacity",(function(e){var r=t.ColumnUtil.getFillOpacity(e.selected,e.highlight,!e.highlight&&a,!e.selected&&i)<1?0:1;return r}))}function P(t){var i={text:t.formatter?t.formatter.format(t.label):e.formattingService.formatValue(t.label,t.format),fontFamily:a.LabelTextProperties.fontFamily,fontSize:o.fromPoint(t.fontSize),fontWeight:a.LabelTextProperties.fontWeight};return e.TextMeasurementService.getTailoredTextOrDefault(i,t.maxWidth?t.maxWidth:a.maxLabelWidth)}function D(e,t,a,i){return{x:function(a){return e.scale(a.categoryIndex)+t/2},y:function(e){return T(a.scale,e,i)}}}function T(t,i,r){var o=t(0)-t(Math.abs(i.value)),n=t(i.position),s=t(r[0]),l=t(i.position+i.value);if(i.value<0){var c={text:i.labeltext,fontFamily:a.LabelTextProperties.fontFamily,fontSize:a.LabelTextProperties.fontSize,fontWeight:a.LabelTextProperties.fontWeight},u=n+o+e.TextMeasurementService.estimateSvgTextHeight(c);if(s>u)return u}else{var d=n-o-a.labelMargin;if(d>0)return d}return i.isLabelInside=!0,V(n,l,s)}function V(e,t,a){return e=e<0?0:e,e=e>a?a:e,t=t<0?0:t,t=t>a?a:t,Math.abs(t-e)/2+Math.min(e,t)}function L(i,r,o){if(null==i||null===i.value)return!1;var n={text:o.labelText(i),fontFamily:a.LabelTextProperties.fontFamily,fontSize:a.LabelTextProperties.fontSize,fontWeight:a.LabelTextProperties.fontWeight},s=t.WaterfallChart.getRectTop(r.scale,i.position,i.value)-a.labelMargin;if(s>0)return!0;var l=e.TextMeasurementService.measureSvgTextWidth(n),c=e.TextMeasurementService.estimateSvgTextHeight(n),u=o.categoryWidth,d=Math.abs(t.AxisHelper.diffScaled(r.scale,Math.max(0,Math.abs(i.value)),0));return!(l>u||c>d)}function _(e){return{labelText:function(t){return P({label:t.labeltext,fontSize:e.fontSize})},labelLayout:{x:function(e){return e.x},y:function(t){var i=t.radius+a.labelMargin;return 0===e.position?t.y-i:t.y+i}},filter:function(e){return null!=e&&null!=e.labeltext},style:{fill:function(e){return e.labelFill},"font-size":o.fromPoint(e.fontSize)}}}function N(e,t,i,r,o,n,s,l){var c=r?a.hundredPercentFormat:null,u=j(),d=!!s&&s.hasSelection();return{labelText:function(e){var t=null!=c?c:e.labelFormatString,i=H(o,e.labelSettings),r=u.getOrCreate(t,e.labelSettings,i);return P({label:r.format(e.value),maxWidth:a.maxLabelWidth})},labelLayout:t,filter:function(t){return a.getColumnChartLabelFilter(t,d,e.hasHighlights,n,l)},style:{fill:function(e){return e.labelFill},"text-anchor":i?"middle":"start"}}}function M(i,r,o){var n,s,l=r.xScale,c=r.yScale,u=r.columnWidth,d={text:i.labeltext,fontFamily:a.LabelTextProperties.fontFamily,fontSize:a.LabelTextProperties.fontSize,fontWeight:a.LabelTextProperties.fontWeight},p=e.TextMeasurementService.measureSvgTextWidth(d),h=e.TextMeasurementService.estimateSvgTextHeight(d),g=!1,m=t.ColumnUtil.calculatePosition(i,r);switch(i.chartType){case t.ColumnChartType.stackedBar:case t.ColumnChartType.hundredPercentStackedBar:(!i.lastSeries||m+p>o||i.chartType===t.ColumnChartType.hundredPercentStackedBar)&&(n=-t.StackedUtil.getSize(l,i.valueAbsolute),s=u,g=!0);break;case t.ColumnChartType.clusteredBar:m+p>o&&(n=Math.abs(t.AxisHelper.diffScaled(l,0,i.value)),s=u,g=!0);break;case t.ColumnChartType.stackedColumn:case t.ColumnChartType.hundredPercentStackedColumn:(!i.lastSeries||m<=0||i.chartType===t.ColumnChartType.hundredPercentStackedColumn)&&(n=u,s=t.StackedUtil.getSize(c,i.valueAbsolute),g=!0);break;case t.ColumnChartType.clusteredColumn:m<=0&&(n=u,s=Math.abs(t.AxisHelper.diffScaled(c,0,i.value)),g=!0);break;default:return!0}return!g||!(p>n||h>s)}function A(e,a,i,r,o){var n=a?t.ColumnUtil.getFillOpacity(e.selected,e.highlight,!e.highlight&&a,!e.selected&&i):t.ColumnUtil.getFillOpacity(e.selected,e.highlight,a,i);return null!=e&&null!=e.value&&M(e,r,o)&&1===n}function R(e,i,r,o,n){return{labelText:function(e){return P({label:e.formattedCategory.getValue(),maxWidth:2*a.maxLabelWidth})},labelLayout:{x:function(t){return e(t.x)},y:function(e){var s=t.ScatterChart.getBubbleRadius(e.radius,n,o,t.shapeUtil.MinBubbleMultiplier)+a.labelMargin;return 0===r.position?i(e.y)-s:i(e.y)+s}},filter:function(e){return null!=e&&null!=e.formattedCategory.getValue()},style:{fill:function(e){return e.labelFill}}}}function F(e,t,i,r,n){var s=j();return{labelText:function(e){var t=H(n,e.labelSettings),a=s.getOrCreate(e.labelFormatString,e.labelSettings,t);return P({label:a.format(e.value)})},labelLayout:{x:function(t){return e(r?t.categoryValue:t.categoryIndex)},y:function(e){return 0===i.position?t(e.value)-a.labelMargin:t(e.value)+a.labelMargin}},filter:function(e){return null!=e&&null!=e.value},style:{fill:function(e){return e.labelFill},"font-size":function(e){return o.fromPoint(e.labelSettings.fontSize)}}}}function O(e){if(e.dataLabelsSettings){var t={objectName:"labels",selector:e.selector,properties:{}};if(e.show&&e.selector?t.properties.showSeries=e.dataLabelsSettings.show:e.show&&(t.properties.show=e.dataLabelsSettings.show),t.properties.color=e.dataLabelsSettings.labelColor||a.defaultLabelColor,e.displayUnits&&(t.properties.labelDisplayUnits=e.dataLabelsSettings.displayUnits),e.precision){var i=e.dataLabelsSettings.precision;t.properties.labelPrecision=i===a.defaultLabelPrecision?null:i}if(e.labelOrientation&&(t.properties.labelOrientation=e.dataLabelsSettings.labelOrientation),e.position&&(t.properties.labelPosition=e.dataLabelsSettings.position,e.positionObject&&(t.validValues={labelPosition:e.positionObject})),e.labelStyle&&(t.properties.labelStyle=e.dataLabelsSettings.labelStyle,e.donutChartLabelPercentEnabled||(t.validValues={labelStyle:[r.category,r.data,r.categoryAndData]})),e.fontSize&&(t.properties.fontSize=e.dataLabelsSettings.fontSize),e.labelDensity){var o=e.dataLabelsSettings;o&&(t.properties.labelDensity=o.labelDensity)}return e.showAll&&(t.properties.showAll=!!e.dataLabelsSettings.showLabelPerSeries),e.enumeration.pushInstance(t)}}function I(e,t,i,r,o){void 0===r&&(r=!1);var n=t?t:h(),s={objectName:"categoryLabels",selector:null,properties:{show:r?n.showCategory:n.show,fontSize:t?t.fontSize:a.DefaultFontSizeInPt}};i&&(s.properties.color=n.categoryLabelColor?n.categoryLabelColor:n.labelColor),o&&(s.properties.fontSize=o),e.pushInstance(s)}function H(e,t){return e&&e.displayUnit&&0===t.displayUnits?e.displayUnit.value:null}function j(){return new Y}function z(t,a,i,r){return{displayUnitSystemType:e.DisplayUnitSystemType.DataLabels,format:a,precision:r,value:t.displayUnits,value2:i,allowFormatBeautification:!0}}function k(e,t){return e>t}function G(e,t){return e>t}a.minLabelFontSize=8,a.labelMargin=8,a.maxLabelWidth=50,a.defaultColumnLabelMargin=5,a.defaultColumnHalfLabelHeight=4,a.defaultLabelDensity="50",a.DefaultDy="-0.15em",a.DefaultFontSizeInPt=9,a.StandardFontFamily=t.Font.Family.regular.css,a.LabelTextProperties={fontFamily:t.Font.Family.regularSecondary.css,fontSize:o.fromPoint(a.DefaultFontSizeInPt),fontWeight:"normal"},a.defaultLabelColor="#777777",a.defaultInsideLabelColor="#ffffff",a.hundredPercentFormat="0.00 %;-0.00 %;0.00 %",
a.defaultLabelPrecision=void 0;var E=0,W=i("labels"),B=i("lines"),U=i("data-labels"),K=i("line-label");a.updateLabelSettingsFromLabelsObject=n,a.getDefaultLabelSettings=s,a.getDefaultCardLabelSettings=l,a.getDefaultTreemapLabelSettings=c,a.getDefaultSunburstLabelSettings=u,a.getDefaultWaterfallLabelSettings=d,a.getDefaultColumnLabelSettings=p,a.getDefaultPointLabelSettings=h,a.getDefaultLineChartLabelSettings=g,a.getDefaultMapLabelSettings=m,a.getDefaultDonutLabelSettings=y,a.getDefaultGaugeLabelSettings=f,a.getDefaultKpiLabelSettings=v,a.getLabelPrecision=b,a.drawDefaultLabelsForDataPointChart=C,a.cleanDataLabels=x,a.setHighlightedLabelsOpacity=w,a.getLabelFormattedText=P,a.getLabelLayoutXYForWaterfall=D,a.doesDataLabelFitInShape=L,a.getMapLabelLayout=_,a.getColumnChartLabelLayout=N,a.getColumnChartLabelFilter=A,a.getScatterChartLabelLayout=R,a.getLineChartLabelLayout=F,a.enumerateDataLabels=O,a.enumerateCategoryLabels=I,a.createColumnFormatterCacheManager=j,a.getOptionsForLabelFormatter=z,a.isTextWidthOverflows=k,a.isTextHeightOverflows=G;var Y=(function(){function e(){this.cache={}}return e.prototype.getOrCreate=function(e,a,i){var r={formatString:e,displayUnits:a.displayUnits,precision:e?b(a.precision,e):a.precision,value2:i},o=JSON.stringify(r);return this.cache[o]||(this.cache[o]=t.valueFormatter.create(z(a,e,i,r.precision))),this.cache[o]},e})()})(a=t.dataLabelUtils||(t.dataLabelUtils={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function a(t,a,i,r){void 0===r&&(r=0);var o,n,s,l=2.05;if(r){var c=r,u=a.radius*a.outerArcRadiusRatio,d=a.radius/2*a.innerArcRadiusRatio;n=[Math.cos(c)*u,Math.sin(c)*u],s=[Math.cos(c)*d,Math.sin(c)*d]}else n=a.outerArc.centroid(t),s=a.arc.centroid(t);var p=i.x,h=e.NewDataLabelUtils.maxLabelOffset/2;return p+=p<0?-h:h,o=[p,i.y],s[0]*=l,s[1]*=l,[s,n,o]}function i(e){if(e&&e.length>2){var a={width:Math.abs(e[1][0]-e[0][0]),height:Math.abs(e[1][1]-e[0][1])},i={width:Math.abs(e[2][0]-e[1][0]),height:t.LineStrokeWidth};return[a,i]}return null}function r(t){var a=t<0?-e.NewDataLabelUtils.maxLabelOffset:e.NewDataLabelUtils.maxLabelOffset;return t+=a}function o(t,a){return a.width/2-Math.abs(t)-e.NewDataLabelUtils.maxLabelOffset}function n(t){switch(t){case e.labelStyle.data:return e.labelStyle.labelStyleFlagEnum.data;case e.labelStyle.percent:return e.labelStyle.labelStyleFlagEnum.percent;case e.labelStyle.categoryAndData:return e.labelStyle.labelStyleFlagEnum.categoryAndData;case e.labelStyle.categoryAndPercent:return e.labelStyle.labelStyleFlagEnum.categoryAndPercent;case e.labelStyle.dataAndPercent:return e.labelStyle.labelStyleFlagEnum.dataAndPercent;case e.labelStyle.categoryAndDataAndPercent:return e.labelStyle.labelStyleFlagEnum.categoryAndDataAndPercent;case e.labelStyle.category:return e.labelStyle.labelStyleFlagEnum.category;default:return e.labelStyle.labelStyleFlagEnum.category}}t.LineStrokeWidth=1,t.DiagonalLineIndex=0,t.HorizontalLineIndex=1,t.getLabelLeaderLineForDonutChart=a,t.getLabelLeaderLinesSizeForDonutChart=i,t.getXPositionForDonutLabel=r,t.getSpaceAvailableForDonutLabels=o,t.getDonutChartLabelStyleFlagType=n})(t=e.DonutLabelUtils||(e.DonutLabelUtils={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(e){if(e){var t=e,a=t.handled;return!!a}}function a(e){if(e){var t=e;t.handled=!0}}e.handled=t,e.markAsHandled=a})(t=e.EventBubblingUtil||(e.EventBubblingUtil={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a,i=jsCommon.PixelConverter,r=e,o=r.DataViewObject;!(function(e){function t(e){var t=e;return t&&null!=t.px}function a(e){var t=e;return t&&null!=t.pt}e.isPixel=t,e.isPoint=a})(a=t.Units||(t.Units={}));var n=(function(){function e(e,t,i,r,o,n,s){this.color=e,this.family=t,this.style=r,this.variant=o,this.weight=n,this.whiteSpace=s,a.isPixel(i)?this.sizePx=i.px:a.isPoint(i)&&(this.sizePt=i.pt)}return e.create=function(t){if(t&&null!=t.family&&null!=t.size)return new e(t.color,t.family,t.size,t.style,t.variant,t.weight,t.whiteSpace)},e.createFromDataViewObject=function(t,a,i){var r=!!i,n=r&&null!=i.family;if((a.family||n)&&(a.size||r))return e.create({color:a.color?o.getFillColorByPropertyName(t,a.color,i&&i.color):i&&i.color,family:e.getValueOrDefault(a.family,t,i&&i.family),size:a.size?a.sizeInPixels?{px:+o.getValue(t,a.size,i&&i.sizePx)}:{pt:+o.getValue(t,a.size,i&&i.sizePt)}:{px:i.sizePx},style:e.getValueOrDefault(a.style,t,i&&i.style),variant:e.getValueOrDefault(a.variant,t,i&&i.variant),weight:e.getValueOrDefault(a.weight,t,i&&i.weight),whiteSpace:e.getValueOrDefault(a.whiteSpace,t,i&&i.whiteSpace)})},e.getValueOrDefault=function(e,t,a){return null==e?a:o.getValue(t,e,a)},Object.defineProperty(e.prototype,"size",{set:function(e){a.isPixel(e)?this.sizePx=e.px:a.isPoint(e)&&(this.sizePt=e.pt)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sizePt",{get:function(){return i.toPoint(this.fontSizePx)},set:function(e){this.fontSizePx=i.fromPointToPixel(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sizePx",{get:function(){return this.fontSizePx},set:function(e){this.fontSizePx=e},enumerable:!0,configurable:!0}),e.prototype.toTextProperties=function(e){return{text:e,fontFamily:this.family,fontSize:null!=this.sizePx?i.toString(this.sizePx):null,fontWeight:this.weight,fontStyle:this.style,fontVariant:this.variant,whiteSpace:this.whiteSpace}},e.prototype.toHTMLStyle=function(){var e={};return this.color&&(e.color=this.color),this.family&&(e["font-family"]=this.family),null!=this.sizePx&&(e["font-size"]=i.toString(this.sizePx)),this.style&&(e["font-style"]=this.style),this.variant&&(e["font-variant"]=this.variant),this.weight&&(e["font-weight"]=this.weight),this.whiteSpace&&(e["white-space"]=this.whiteSpace),e},e.prototype.toSVGStyle=function(){var e={};return this.color&&(e.fill=this.color),this.family&&(e["font-family"]=this.family),null!=this.sizePx&&(e["font-size"]=i.toString(this.sizePx)),this.style&&(e["font-style"]=this.style),this.variant&&(e["font-variant"]=this.variant),this.weight&&(e["font-weight"]=this.weight),this.whiteSpace&&(e["white-space"]=this.whiteSpace),e},e})();t.FontProperties=n})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(e){try{for(var t=e.objects[Object.keys(e.objects)[0]].geometries,a=!1,i={},r=0,o=t;r<o.length;r++){var n=o[r];if(a=a||null!=n.id,n.properties)for(var s=Object.keys(n.properties),l=0,c=s;l<c.length;l++){var u=c[l];i[u]=!0}}var d=Object.keys(i).sort();_.pull(d,"id");for(var p=[],h=0,g=t;h<g.length;h++){var n=g[h],m=[];if(a&&m.push(n.id),n.properties)for(var y=0,f=d;y<f.length;y++){var v=f[y];m.push(n.properties[v])}p.push(m)}if(d=(a?["id"]:[]).concat(d),!_.isEmpty(d)&&!_.isEmpty(p))return{names:d,values:p}}catch(e){}}e.getTopoJsonShapeKeys=t})(t=e.GeoJsonHelper||(e.GeoJsonHelper={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a,i=jsCommon.CssConstants.createClassAndSelector,r=jsCommon.PixelConverter;!(function(a){function o(e){return 0===e.labelOrientation?e.boundingBox.left+e.boundingBox.width:e.boundingBox.left+e.boundingBox.width/2}function n(e){return e.hasBackground?0===e.labelOrientation?e.boundingBox.top+e.boundingBox.height/2-a.horizontalLabelBackgroundPadding:e.boundingBox.top+e.boundingBox.height-a.verticalLabelBackgroundPadding:0===e.labelOrientation?e.boundingBox.top+e.boundingBox.height/2:e.boundingBox.top+e.boundingBox.height}function s(e){return e.boundingBox.left+e.boundingBox.width/2}function l(e){var t=void 0!==e.text?e.boundingBox.height/2:e.boundingBox.height;return e.hasBackground?e.boundingBox.top+t-a.verticalLabelBackgroundPadding:e.boundingBox.top+t}function c(e,t,i,c,u){void 0===i&&(i=!1),void 0===c&&(c=!1),void 0===u&&(u=!1);var d=e.selectAll(L.selector).data(t,x);d.enter().append("text").classed(L.class,!0);var p={transform:function(e){var t="translate("+o(e)+","+n(e)+")";return 0===e.labelOrientation?t+"rotate(-90)":t},dy:"-0.15em"};i&&(p.dy=void 0),d.interrupt().text((function(e){return e.text})).attr(p).style({fill:function(e){return e.fill},"font-size":function(e){return r.fromPoint(e.fontSize||a.DefaultLabelFontSizeInPt)},"text-anchor":function(e){return e.textAnchor}}),d.exit().remove();var h=_.filter(c?t:[],(function(e){return!_.isEmpty(e.secondRowText)})),g=e.selectAll(N.selector).data(h,(function(e,t){return e.identity?e.identity.getKeyWithoutHighlight():t}));return g.enter().append("text").classed(N.class,!0),p={transform:function(e){return"translate("+s(e)+","+l(e)+")"},dy:"-0.15em"},i&&(p.dy=void 0),g.interrupt().text((function(e){return e.secondRowText})).attr(p).style({fill:function(e){return e.fill},"font-size":function(e){return r.fromPoint(e.fontSize||a.DefaultLabelFontSizeInPt)},"text-anchor":function(e){return e.textAnchor}}),g.exit().remove(),u&&(d.append("title").text((function(e){return e.tooltip})),g.append("title").text((function(e){return e.tooltip})),d.style("pointer-events","all"),g.style("pointer-events","all")),d}function u(e,t,i,s,l){void 0===s&&(s=!1),void 0===l&&(l="cubic-in-out");var c=e.selectAll(L.selector).data(t,x),u={transform:function(e){var t="translate("+o(e)+","+n(e)+")";return 0===e.labelOrientation?t+"rotate(-90)":t},dy:"-0.15em"};return s&&(u.dy=void 0),c.enter().append("text").classed(L.class,!0).style("opacity",0).attr(u),c.text((function(e){return e.text})).style({fill:function(e){return e.fill},"font-size":function(e){return r.fromPoint(e.fontSize||a.DefaultLabelFontSizeInPt)}}).transition().ease(l).duration(i).attr(u).style("opacity",1),c.exit().transition().duration(i).style("opacity",0).remove(),c}function d(e,t,i,r){var o=e.selectAll("rect").data(t,x);return o.enter().append("rect"),o.attr({x:function(e){return e.boundingBox.left-a.horizontalLabelBackgroundPadding},y:function(e){return e.boundingBox.top-a.verticalLabelBackgroundPadding},rx:D,ry:D,width:function(e){return e.boundingBox.width+2*a.horizontalLabelBackgroundPadding},height:function(e){return void 0===e.text&&void 0===e.secondRowText?0:e.boundingBox.height+2*a.verticalLabelBackgroundPadding}}).style("fill",i?i:"#000000").style("fill-opacity",null!=r?r:1),o.exit().remove(),o}function p(e,a,i,r){e.select(M.selector).empty()&&e.append("g").classed(M.class,!0);var o=e.select(M.selector).selectAll("polyline").data(a,i);o.enter().append("polyline").classed(A.class,!0),o.attr("points",(function(e){return e.leaderLinePoints})).style({stroke:function(e){return r?r:e.fill},"stroke-width":t.DonutLabelUtils.LineStrokeWidth}),o.exit().remove()}function h(t,a,i){return i?i.format(t):e.formattingService.formatValue(t,a)}function g(e,t){return new R(e,t)}function m(e,t){return e&&e.displayUnit&&0===t.displayUnits?e.displayUnit.value:null}function y(t,a){if(t!==T)return t;if("g"!==a&&"G"!==a){if(a){var i=a.split(";")[0],r=e.NumberFormat.getCustomFormatMetadata(i,!0);if(r.hasDots){if(r.optionalPrecision)return;return r.precision}}return V}}function f(){return new F}function v(t,a,i,r){return{displayUnitSystemType:e.DisplayUnitSystemType.DataLabels,format:a,precision:r,value:t.displayUnits,value2:i,allowFormatBeautification:!0}}function b(e){for(var a=[],i={},r=function(e,a,i){return a.some((function(a){return i?t.shapes.Rect.equals(e.parentShape.rect,a.rect):t.shapes.Point.equals(e.parentShape.point,a.point)}))},o=0,n=e;o<n.length;o++){var s=n[o],l=1===s.parentType,c=i[s.text];c?r(s,c,l)||(a.push(s),c.push(s.parentShape)):(a.push(s),i[s.text]=[s.parentShape])}return a}function C(e){switch(e){case 9:return{maximumOffset:t.ScatterChart.dataLabelLayoutMaximumOffset,startingOffset:t.ScatterChart.dataLabelLayoutStartingOffset,offsetIterationDelta:t.ScatterChart.dataLabelLayoutOffsetIterationDelta,allowLeaderLines:!0,attemptToMoveLabelsIntoViewport:!0};default:return{maximumOffset:a.maxLabelOffset,startingOffset:a.startingLabelOffset,attemptToMoveLabelsIntoViewport:!0}}}function S(t,i){var r=a.LabelTextProperties,o={text:t,fontFamily:r.fontFamily,fontSize:jsCommon.PixelConverter.fromPoint(i),fontWeight:r.fontWeight};return{width:e.TextMeasurementService.measureSvgTextWidth(o),height:e.TextMeasurementService.estimateSvgTextHeight(o)}}function x(e,t){return e.key?e.key:e.identity?e.identity.getKeyWithoutHighlight():t}function w(e,t,a,i){if(null==t||0===t)return a;var r=t/100,o=Math.ceil(e/i);return 1===r?o:a+Math.floor(r*(o-a))}function P(e,a,i){t.dataLabelUtils.updateLabelSettingsFromLabelsObject(e,a,i),e&&void 0!==e.labelDensity&&(a.labelDensity=e.labelDensity)}a.DefaultLabelFontSizeInPt=9,a.MapPolylineOpacity=.5,a.LabelDensityBufferFactor=3,a.LabelDensityPadding=6,a.startingLabelOffset=8,a.maxLabelOffset=8,a.maxLabelWidth=50,a.hundredPercentFormat="0.00 %;-0.00 %;0.00 %",a.LabelTextProperties={fontFamily:t.Font.Family.regularSecondary.css,fontSize:r.fromPoint(a.DefaultLabelFontSizeInPt),fontWeight:"normal"},a.defaultLabelColor="#777777",a.defaultInsideLabelColor="#ffffff",a.horizontalLabelBackgroundPadding=4,a.verticalLabelBackgroundPadding=2;var D=4,T=void 0,V=0;a.labelGraphicsContextClass=i("labelGraphicsContext"),a.labelBackgroundGraphicsContextClass=i("labelBackgroundGraphicsContext");var L=i("label"),N=i("label-second-line"),M=i("leader-lines"),A=i("line-label");a.drawDefaultLabels=c,a.animateDefaultLabels=u,a.drawLabelBackground=d,a.drawLabelLeaderLines=p,a.getLabelFormattedText=h;var R=(function(){function e(e,a){if(this.noPrecision=!0,0===a.displayUnits){var i=e.formatter;if(this.units=i&&i.displayUnit&&i.displayUnit.value,null==a.precision){this.noPrecision=!1;var r=i&&i.options;if(r&&r.precision)this.precisionForAxis=e.formatter.options.precision+1;else{var o=e.axis.tickValues();if(o&&o.length){var n=o[0],s=o.length>1?o[1]:void 0,l=this.units||1;this.precisionForAxis=t.AxisHelper.calculateAxisPrecision(n,s,10*l,r&&r.format)}}}}}return e.prototype.getPrecision=function(e,t){if(!this.noPrecision){if(this.units)return this.precisionForAxis;if(!e)return t&&t.integer?0:this.precisionForAxis}},e})();a.UnitsAndPrecision=R,a.getLabelUnitAndPrecisionForAxis=g,a.getDisplayUnitValueFromAxisFormatter=m,a.createColumnFormatterCacheManager=f,a.removeDuplicates=b,a.getDataLabelLayoutOptions=C,a.getTextSize=S,a.getNumberOfLabelsToRender=w,a.updateLabelSettingsFromLabelsObjectWithLabelDensity=P;var F=(function(){function e(){this.cache={}}return e.prototype.getOrCreate=function(e,a,i,r){null==r&&(r=a.precision);var o={formatString:e,displayUnits:a.displayUnits,precision:e?y(r,e):r,value2:i},n=JSON.stringify(o);return this.cache[n]||(this.cache[n]=t.valueFormatter.create(v(a,e,i,o.precision))),this.cache[n]},e})()})(a=t.NewDataLabelUtils||(t.NewDataLabelUtils={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(e,t){var a=parseFloat(t);if(e){var i=h[e.graphic.toUpperCase()];if(i&&!isNaN(a)){var r=i.statusValues;e.normalizedFiveStateKpiRange&&5===r.length&&(a=2*a);var o=a+(r.length>>1);return[i.kpiIconClass,r[o]].join(" ").trim()}}}function a(e,t){if(e)return 1===t?[o,n,e].join(" "):[o,e].join(" ")}function i(e,i,r){var o=t(e,i);return a(o,r)}function r(e,i,r){var o=e&&e.kpi;if(o){var n=t(o,i);if(n)return{caption:n,statusGraphic:o.graphic,class:a(n,r)}}}var o="powervisuals-glyph",n="big-kpi",s=["kpi-red","kpi-yellow","kpi-green"],l={kpiIconClass:"circle",statusValues:s},c={kpiIconClass:"",statusValues:["circle-x kpi-red","circle-exclamation kpi-yellow","circle-checkmark kpi-green"]},u={kpiIconClass:"traffic-light",statusValues:s},d={kpiIconClass:"",statusValues:["rhombus kpi-red","triangle kpi-yellow","circle kpi-green"]},p={kpiIconClass:"",statusValues:["circle-empty","circle-one-quarter","circle-half","circle-three-quarters","circle-full"]},h={"THREE CIRCLES COLORED":l,"TRAFFIC LIGHT - SINGLE":l,"THREE FLAGS COLORED":{kpiIconClass:"flag",statusValues:s},"ROAD SIGNS":c,"THREE SYMBOLS CIRCLED COLORED":c,"TRAFFIC LIGHT":u,"THREE TRAFFIC LIGHTS RIMMED COLORED":u,"THREE SYMBOLS UNCIRCLED COLORED":{kpiIconClass:"",statusValues:["x kpi-red","exclamation kpi-yellow","checkmark kpi-green"]},SHAPES:d,"SMILEY FACE":d,THERMOMETER:d,CYLINDER:d,"THREE SIGNS COLORED":d,"THREE STARS COLORED":{kpiIconClass:"star-stacked",statusValues:["star-empty","star-half-full","star-full"]},"FIVE BARS COLORED":{kpiIconClass:"bars-stacked",statusValues:["bars-zero","bars-one","bars-two","bars-three","bars-four"]},"FIVE BOXES COLORED":{kpiIconClass:"boxes-stacked",statusValues:["boxes-zero","boxes-one","boxes-two","boxes-three","boxes-four"]},"FIVE QUARTERS COLORED":p,"GAUGE - ASCENDING":p,"GAUGE - DESCENDING":{kpiIconClass:"",statusValues:["circle-full","circle-three-quarters","circle-half","circle-one-quarter","circle-empty"]},"STANDARD ARROW":{kpiIconClass:"",statusValues:["arrow-down","arrow-right-down","arrow-right","arrow-right-up","arrow-up"]},"VARIANCE ARROW":{kpiIconClass:"",statusValues:["arrow-down kpi-red","arrow-right kpi-yellow","arrow-up kpi-green"]},"STATUS ARROW - ASCENDING":{kpiIconClass:"",statusValues:["arrow-down kpi-red","arrow-right-down kpi-yellow","arrow-right kpi-yellow","arrow-right-up kpi-yellow","arrow-up kpi-green"]},"STATUS ARROW - DESCENDING":{kpiIconClass:"",statusValues:["arrow-up kpi-green","arrow-right-up kpi-yellow","arrow-right kpi-yellow","arrow-right-down kpi-yellow","arrow-down kpi-red"]}};e.getClassForKpi=i,e.getKpiImageMetadata=r})(t=e.KpiUtil||(e.KpiUtil={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(e,t){return null==e&&null==t||null!=e&&null!=t&&e.getTime()===t.getTime()}e.isEqual=t})(t=e.DateUtil||(e.DateUtil={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){e[e.Minimum=0]="Minimum",e[e.Maximum=1]="Maximum",e[e.Neither=2]="Neither"})(t||(t={}));var a=(function(){function e(e){this.unsortedLabelDataPointGroups=e.unsortedLabelDataPointGroups,this.series=e.series,this.yScale=e.yAxisProperties.scale,this.viewport=e.viewport}return e.prototype.getSortedDataLabels=function(){for(var t=this.unsortedLabelDataPointGroups,a=[],i=0,r=t.length;i<r;i++){var o=t[i],n=e.maxNumberToSortFactor*o.maxNumberOfLabels;if(!_.isEmpty(o.labelDataPoints)){var s=o.labelDataPoints,l=[],c=_.filter(this.series[i].data,(function(e){return e&&null!=e.value})),u=e.getMinMaxInRange(0,c.length-1,c),d=this.addFirstLastMaxMin(s,l,u.maxIndex,u.minIndex),p=void 0;if(!(d>=n)){p=this.calculateWeights(s,c,n,u);var h=Math.max(n-d,0);d+=this.addLocalMinMaxes(p,l,u.maxIndex,u.minIndex,h)}if(!(d>=n)){var g=Math.max(n-d,0);this.addNonMinMaxes(p,l,g)}a.push({labelDataPoints:l,maxNumberOfLabels:o.maxNumberOfLabels})}}return a},e.prototype.calculateWeights=function(t,a,i,r){for(var o,n,s=a.length,l=this.yScale,c=this.findMinMaxesBasedOnSmoothedValues(t,a),u=Math.abs(l(r.maxValue)-l(r.minValue)),d=0,p=c.length;d<p;d++){n=c[d];var h=void 0;if(o){var g=Math.abs((l(o.value)-l(n.value))/u),m=Math.abs(o.index-n.index)/(s-1);h=(g+m)/2}if(null!=h&&o){var y=t[o.index];null!=y.weight?y.weight=(y.weight+h)/2:y.weight=h,t[n.index].weight=h}o=n}for(var f=0,v=t;f<v.length;f++){var b=v[f];b.weight<e.minimumWeightToConsiderMinMax&&(b.weight=void 0)}return t},e.prototype.findMinMaxesBasedOnSmoothedValues=function(a,i){for(var r=[],o=this.getWindowSize(i),n=o>>1,s=this.calculateSmoothedValues(i,o),l=0,c=a.length;l<c;l++){var u=this.getMinMaxType(l,s);if(u!==t.Neither){var d={index:l,type:u,value:i[l].value};r.push(d)}}for(var p,h,g,m=0,y=r.length;m<y;m++)if(p=r[m-1],h=r[m],g=r[m+1],p&&g){var f=e.getMinMaxInRange(Math.max(p.index,h.index-n),Math.min(g.index,h.index+n),i);if(h.type===t.Maximum){var v=f.maxIndex;h.index=v,h.value=i[v].value}else{var v=f.minIndex;h.index=v,h.value=i[v].value}}return r},e.getMinMaxInRange=function(e,t,a){for(var i,r,o,n,s=e,l=a.length;s<=t&&s<l;s++){var c=a[s].value;null!=c&&((void 0===i||c<i)&&(i=c,o=s),(void 0===r||c>r)&&(r=c,n=s))}return{minIndex:o,minValue:i,maxIndex:n,maxValue:r}},e.prototype.getWindowSize=function(t){var a=t.length/this.viewport.width*e.estimatedLabelWidth,i=1|a;return i},e.prototype.calculateSmoothedValues=function(t,a){for(var i=e.getGaussianDistribution(a),r=[],o=0,n=t.length;o<n;o++)if(1===a)r.push(t[o].value);else{var s=this.getSmoothedValue(t,o,a,i);r.push(s)}return r},e.getGaussianDistribution=function(e){for(var t=[],a=e>>1,i=1,r=a,o=a/2,n=0;n<a;n++){var s=i*Math.pow(Math.E,-1*((n-r)*(n-r))/(2*o*o));t.push(s)}t.push(1);for(var n=a-1;n>=0;n--)t.push(t[n]);return t},e.prototype.getSmoothedValue=function(e,t,a,i){if(null==e[t].value)return e[t].value;for(var r=a>>1,o=t-r,n=t+r,s=0,l=0,c=e.length-1,u=o,d=0;u<=n;u++,d++){var p=Math.max(0,Math.min(u,c)),h=e[p].value;null!=h&&(s+=h*i[d],l++)}return s/l},e.prototype.addFirstLastMaxMin=function(e,t,a,i){var r=0;if(_.isEmpty(e))return r;t.push(e[0]),r++;var o=e.length-1;return 0!==o&&(t.push(e[o]),r++),0!==a&&a!==o&&(t.push(e[a]),r++),0!==i&&i!==o&&(t.push(e[i]),r++),r},e.prototype.addLocalMinMaxes=function(e,t,a,i,r){for(var o=e.length-1,n=_.filter(e,(function(e,t){return 0!==t&&t!==o&&t!==a&&t!==i&&null!=e.weight})),s=_.sortBy(n,(function(e){return-e.weight})),l=0,c=0,u=Math.min(s.length,r);c<u;c++)t.push(s[c]),l++;return l},e.prototype.addNonMinMaxes=function(e,t,a){for(var i,r=[],o=0,n=e.length;o<n;o++)null==e[o].weight?i?i.count++:i={startingIndex:o,count:1}:i&&i.count>0&&(r.push(i),i=null);for(var s=0;r.length>0&&s<a;){for(var l=0,c=0,u=0,d=r.length;u<d;u++){var p=r[u].count;p>l&&(l=p,c=u)}var h=r.splice(c,1)[0];if(1===h.count)t.push(e[h.startingIndex]);else{var g=(h.count>>1)+h.startingIndex;t.push(e[g]);var m=g-h.startingIndex;m>0&&r.push({startingIndex:h.startingIndex,count:m});var y=h.startingIndex+h.count-g-1;y>0&&r.push({startingIndex:g+1,count:y})}s++}},e.prototype.getMinMaxType=function(e,a){var i=a[e];if(null==a[e])return t.Neither;if(a.length<2)return t.Neither;if(null==a[e-1])return a[e+1]>i?t.Minimum:t.Maximum;if(null==a[e+1])return a[e-1]>i?t.Minimum:t.Maximum;var r=a[e-1],o=a[e+1];return null==r&&null==o?t.Neither:null==r?o>i?t.Minimum:t.Maximum:null==o?r>i?t.Minimum:t.Maximum:r>i&&i<o?t.Minimum:r<i&&i>o?t.Maximum:t.Neither},e})();a.estimatedLabelWidth=40,a.minimumWeightToConsiderMinMax=.015,a.maxNumberToSortFactor=2,e.MinMaxLabelDataPointSorter=a})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e,t,a,i,r){void 0===t&&(t=!0),void 0===a&&(a=250),void 0===i&&(i=1700),void 0===r&&(r=100),this.callback=e,this.enabled=t,this.distanceFactor=a,this.timeFactor=i,this.sampleTime=r,this.points=[]}return e.prototype.addPoint=function(e,t){for(var a=this.points,i=Date.now();!(_.isEmpty(a)||i-a[0].timestamp<this.sampleTime);)a.shift();a.push({x:e,y:t,timestamp:i})},e.prototype.hasStarted=function(){return this.started},e.prototype.start=function(){var e=this;if(this.enabled&&!(this.points.length<=1)){this.started&&this.stop();var t=d3.ease("cubic-out"),a=_.last(this.points),i=_.first(this.points),r=a.x-i.x,o=a.y-i.y,n=a.timestamp-i.timestamp,s=r/n,l=o/n,c=window.distanceFactor||this.distanceFactor,u=s*c,d=l*c,p=Math.sqrt(Math.pow(s,2)+Math.pow(l,2))*window.timeFactor||this.timeFactor,h=0,g=0;this.started=!0,d3.timer((function(a){if(e.stopRequested)return e.clearState(),!0;var i=t(1*a/p),r=i*u-h,o=i*d-g;h+=r,g+=o,e.callback&&e.callback(r,o);var n=a>p;return n&&e.clearState(),n}))}},e.prototype.stop=function(){this.started&&(this.stopRequested=!0)},e.prototype.clearState=function(){this.started=!1,this.stopRequested=!1},e})();e.Inertia=t})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(){return{x:d3.event.clientX,y:d3.event.clientY}}function a(e,t){i(e,t),r(e,t)}function i(e,t){e.on("click",(function(e){return u(e,t)}))}function r(e,t){e.on("contextmenu",(function(e){return c(e,t)}))}function o(e,t){n(e,t),s(e,t)}function n(e,t){e.on("click",(function(){l((function(e){return u(e,t)}))}))}function s(e,t){e.on("contextmenu",(function(){l((function(e){return c(e,t)}))}))}function l(e){var t=d3.event.target,a=d3.select(t).datum();a&&e(a)}function c(t,a){if(!d3.event.ctrlKey){d3.event.preventDefault();var i=e.getPositionOfLastInputEvent();a.handleContextMenu(t,i)}}function u(e,t){t.handleSelection(e,d3.event.ctrlKey)}e.getPositionOfLastInputEvent=t,e.registerStandardInteractivityHandlers=a,e.registerStandardSelectionHandler=i,e.registerStandardContextMenuHandler=r,e.registerGroupInteractivityHandlers=o,e.registerGroupSelectionHandler=n,e.registerGroupContextMenuHandler=s,e.tryToSelectD3Target=l})(t=e.InteractivityUtils||(e.InteractivityUtils={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(e,t,i,r,o){var n=new a(t,i,r,o);return n.getWarningMessages(e)}e.getInvalidValueWarnings=t;var a=(function(){function t(e,t,a,i){this.supportsNaN=e,this.supportsNegativeInfinity=t,this.supportsPositiveInfinity=a,this.ignoreRoles=i}return t.prototype.getWarningMessages=function(t){this.loadWarningStatus(t);var a=[];return this.hasNaN&&!this.supportsNaN&&a.push(new e.NaNNotSupportedWarning),(this.hasNegativeInfinity&&!this.supportsNegativeInfinity||this.hasPositiveInfinity&&!this.supportsPositiveInfinity)&&a.push(new e.InfinityValuesNotSupportedWarning),this.hasOutOfRange&&a.push(new e.ValuesOutOfRangeWarning),a},t.prototype.loadWarningStatus=function(e){var t=this;this.hasNaN=!1,this.hasNegativeInfinity=!1,this.hasOutOfRange=!1,this.hasPositiveInfinity=!1;for(var a=0,i=e;a<i.length;a++){var r=i[a],o=r&&r.categorical&&r.categorical.values?r.categorical.values:null;if(!o)return;for(var n=0,s=o;n<s.length;n++){var l=s[n];if(!_.isEmpty(this.ignoreRoles)){var c=Object.keys(l.source.roles);if(!_.isEmpty(c)&&_.all(c,(function(e){return _.contains(t.ignoreRoles,e)})))continue}if(l.values)for(var u=0,d=l.values;u<d.length;u++){var p=d[u];isNaN(p)?this.hasNaN=!0:p===Number.POSITIVE_INFINITY?this.hasPositiveInfinity=!0:p===Number.NEGATIVE_INFINITY?this.hasNegativeInfinity=!0:(p<-1e300||p>1e300)&&(this.hasOutOfRange=!0)}}}},t})()})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(e,t){var a;if(t){for(var i=d3.event,r=void 0;r=i.sourceEvent;)i=r;var o=e.getBoundingClientRect();a=[i.clientX-o.left-e.clientLeft,i.clientY-o.top-e.clientTop]}else{var n=d3.touches(e);n&&n.length>0&&(a=n[0])}return a}e.getCoordinates=t})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function t(){}return t.prototype.init=function(e){this.surface=e,this.initDragEvents(e),this.enabled=!0,this.behaviors=[]},t.prototype.enable=function(e){this.enabled=e},t.prototype.initDragEvents=function(e){var t=this;e.on("mousedown.lasso",(function(){t.enabled&&t.startDrag(d3.event)}),!0),e.on("mousemove.lasso",(function(){t.enabled&&t.dragging&&t.drag(d3.event)}),!0),e.on("mouseup.lasso",(function(){t.enabled&&t.dragging&&t.endDrag(d3.event)}),!0)},t.prototype.startDrag=function(t){var a=this;if(this.onRectStart(t)){this.dragging=!0;var i=e.getCoordinates(this.surface.node(),!0);this.dragStart={x:i[0],y:i[1]},this.dragRect=this.surface.append("rect").classed("lasso-select",!0),this.updateDragRect(t,i),t.stopPropagation(),d3.select("body").on("mousemove.lasso",(function(){a.drag(d3.event)})).on("mouseup.lasso",(function(){a.endDrag(d3.event)}))}},t.prototype.endDrag=function(t){var a=e.getCoordinates(this.surface.node(),!0),i={left:Math.min(a[0],this.dragStart.x),top:Math.min(a[1],this.dragStart.y),right:Math.max(a[0],this.dragStart.x),bottom:Math.max(a[1],this.dragStart.y)};this.onRectEnd(t,i),this.dragging=!1,this.dragRect&&(this.dragRect.remove(),this.dragRect=null),d3.select("body").on(".lasso",null)},t.prototype.drag=function(t){var a=e.getCoordinates(this.surface.node(),!0);this.updateDragRect(t,a)},t.prototype.updateDragRect=function(e,t){var a=this.getDragRect(t);this.dragRect.attr({x:a.left,y:a.top,width:a.width,height:a.height}),this.onRectHover(e,{left:a.left,top:a.top,right:a.left+a.width,bottom:a.top+a.height})},t.prototype.onRectHover=function(e,t){for(var a=0,i=this.behaviors;a<i.length;a++){var r=i[a];r.onRectHover&&r.onRectHover(e,t)}},t.prototype.onRectEnd=function(e,t){for(var a=0,i=this.behaviors;a<i.length;a++){var r=i[a];r.onRectEnd&&r.onRectEnd(e,t)}},t.prototype.onRectStart=function(e){for(var t=!0,a=0,i=this.behaviors;a<i.length;a++){var r=i[a];r.onDragStart&&(t=t&&r.onDragStart(e))}return t},t.prototype.getDragRect=function(e){var t=e[0]-this.dragStart.x,a=e[1]-this.dragStart.y;return{left:Math.min(this.dragStart.x,e[0]),top:Math.min(this.dragStart.y,e[1]),width:Math.abs(t),height:Math.abs(a)}},t})();e.LassoManager=t;var a;!(function(t){function a(t,a){var i=t.left-a.margin.left,r=t.top-a.margin.top,o=t.right-a.margin.left,n=t.bottom-a.margin.top;return{left:e.AxisHelper.invertScale(a.axes.x.scale,i),top:e.AxisHelper.invertScale(a.axes.y1.scale,r),right:e.AxisHelper.invertScale(a.axes.x.scale,o),bottom:e.AxisHelper.invertScale(a.axes.y1.scale,n)}}t.getScaledRegion=a})(a=e.CartesianPlotHelper||(e.CartesianPlotHelper={}));var i=(function(){function e(e){this.behavior=e}return e.prototype.update=function(e){this.axesLayout=e},e.prototype.onRectEnd=function(e,t){var i=a.getScaledRegion(t,this.axesLayout);this.selectRegion(e,i)},e.prototype.onRectHover=function(e,t){if(this.behavior.hoverLassoRegion){var i=a.getScaledRegion(t,this.axesLayout);this.behavior.hoverLassoRegion(e,i)}},e.prototype.onDragStart=function(e){return 0===e.button},e.prototype.selectRegion=function(e,t){this.behavior.lassoSelect&&this.behavior.lassoSelect(e,t)},e})();e.LassoSelectionBehavior=i;var r=(function(){function e(e){this.hostServices=e}return e.prototype.update=function(e){this.axesLayout=e},e.prototype.onRectEnd=function(e,t){if(2===e.button)this.unzoomRegion();else{var i=a.getScaledRegion(t,this.axesLayout);this.zoomRegion(i)}},e.prototype.zoomRegion=function(e){this.hostServices.persistProperties({replace:[{objectName:"categoryAxis",properties:{start:e.left,end:e.right},selector:null},{objectName:"valueAxis",properties:{start:e.bottom,end:e.top},selector:null}]})},e.prototype.unzoomRegion=function(){this.hostServices.persistProperties({remove:[{objectName:"categoryAxis",properties:{start:null,end:null},selector:null},{objectName:"valueAxis",properties:{start:null,end:null},selector:null}]})},e})();e.LassoZoomBehavior=r})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(e){return new a(e)}e.createListView=t})(t=e.ListViewFactory||(e.ListViewFactory={}));var a=(function(){function t(e){var a=this;this.options=$.extend(!0,{},e),this.scrollbarInner=e.baseContainer.append("div").classed("scrollbar-inner",!0).on("scroll",(function(){return a.renderImpl(a.options.rowHeight)})),this.scrollContainer=this.scrollbarInner.append("div").classed("scrollRegion",!0).on("touchstart",(function(){return a.stopTouchPropagation()})).on("touchmove",(function(){return a.stopTouchPropagation()})),this.visibleGroupContainer=this.scrollContainer.append("div").classed("visibleGroup",!0);var i=$(this.scrollbarInner.node());i.scrollbar({ignoreOverlay:!1,ignoreMobile:!1,onDestroy:function(){return i.off("scroll")}}),$(e.baseContainer.node()).find(".scroll-element").attr("drag-resize-disabled","true"),t.SetDefaultOptions(e)}return t.prototype.getContainerHeight=function(){return $(this.options.baseContainer.node()).outerHeight()},t.SetDefaultOptions=function(e){e.rowHeight=e.rowHeight||t.defaultRowHeight},t.prototype.rowHeight=function(e){return this.options.rowHeight=Math.ceil(e),this},t.prototype.data=function(e,t,a){return void 0===a&&(a=!1),this._data=e,this.getDatumIndex=t,this.setTotalRows(),a&&$(this.scrollbarInner.node()).scrollTop(0),this.render(),this},t.prototype.viewport=function(e){
return this.render(),this},t.prototype.empty=function(){this._data=[],this.render()},t.prototype.render=function(){var e=this;this.renderTimeoutId&&window.clearTimeout(this.renderTimeoutId),this.renderTimeoutId=window.setTimeout((function(){e.getRowHeight().then((function(t){e.renderImpl(t)})),e.renderTimeoutId=void 0}),0)},t.prototype.renderImpl=function(e){var t=this.options.scrollEnabled?Math.max(0,this._totalRows*e):this.getContainerHeight();this.scrollContainer.style("height",t+"px").attr("height",t),this.scrollToFrame(!0)},t.prototype.stopTouchPropagation=function(){if(this.options.isReadMode()){if("touchstart"===d3.event.type){var e=d3.event;e.touches&&1===e.touches.length&&d3.event.stopPropagation()}"touchmove"===d3.event.type&&d3.event.stopPropagation()}},t.prototype.scrollToFrame=function(a){var i=this.options,r=this.visibleGroupContainer,o=this._totalRows,n=i.rowHeight||t.defaultRowHeight,s=this.getVisibleRows(),l=this.scrollbarInner.node().scrollTop,c=0===l?0:Math.floor(l/n),u=e.SVGUtil.translateWithPixels(0,c*n);r.style({transform:function(e){return u},"-webkit-transform":u});var d=Math.max(0,Math.min(c,o-s+1)),p=d+s,h=r.selectAll(".row").data(this._data.slice(d,Math.min(p,o)),this.getDatumIndex);h.enter().append("div").classed("row",!0).call((function(e){return i.enter(e)})),h.order();var g=r.selectAll(".row:not(.transitioning)");g.call((function(e){return i.update(e)})),h.exit().call((function(e){return i.exit(e)})).remove(),a&&s!==o&&p>=o*t.loadMoreDataThreshold&&i.loadMoreData()},t.prototype.setTotalRows=function(){var e=this._data;this._totalRows=e?e.length:0},t.prototype.getVisibleRows=function(){var e=1,t=this.options,a=t.rowHeight,i=this.getContainerHeight();if(!a||a<1)return e;var r=i/a;return this.options.scrollEnabled?Math.min(Math.ceil(r)+1,this._totalRows)||e:Math.min(Math.floor(r),this._totalRows)||e},t.prototype.getRowHeight=function(){var e=$.Deferred(),a=this,i=a.options;if(this.cancelMeasurePass&&this.cancelMeasurePass(),!(this._data&&this._data.length&&i))return a.rowHeight(t.defaultRowHeight),e.resolve(i.rowHeight).promise();this.scrollToFrame(!1);var r=window.requestAnimationFrame((function(){var t=a.visibleGroupContainer.selectAll(".row").filter((function(){return""!==this.textContent}));if(t.empty()&&(t=a.visibleGroupContainer.select(".row")),!t.empty()){var i=t.node(),o=Math.max($(i).outerHeight(!0),$(i).children().first().outerHeight(!0));a.rowHeight(o),e.resolve(o)}a.cancelMeasurePass=void 0,window.cancelAnimationFrame(r)}));return this.cancelMeasurePass=function(){window.cancelAnimationFrame(r),e.reject()},e.promise()},t})();a.loadMoreDataThreshold=.8,a.defaultRowHeight=1})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a,i=11;!(function(t){function a(){var e;if(Microsoft&&Microsoft.Maps&&Microsoft.Maps.Map&&_.isFunction(Microsoft.Maps.Map.getVersion))try{var t=Microsoft.Maps.Map.getVersion();e=/^7\./.test(t)?7:8}catch(e){jsCommon.Trace.error("Error getting Bing maps version: "+(e&(e.message||e.toString())))}return e}function i(t,a){return{ensureMap:function(i){return e.ensureMap(t,a,y,i)}}}function r(e,t,a){return Math.min(Math.max(e,t),a)}function o(e){return 23===e?2147483648:Math.floor(e)===e?256<<e:256*Math.pow(2,e)}function n(e,a,i){void 0===i&&(i=!1);for(var n=[],s={array:new Float64Array(e.length),arrayString:""},l=0;l<e.length;l+=2){var c=r(e[l],t.MinAllowedLatitude,t.MaxAllowedLatitude),u=r(e[l+1],t.MinAllowedLongitude,t.MaxAllowedLongitude),d=(u+180)/360,p=Math.sin(c*Math.PI/180),h=.5-Math.log((1+p)/(1-p))/(4*Math.PI),g=o(a);s.array[l]=r(d*g+.5,0,g-1),s.array[l+1]=r(h*g+.5,0,g-1),i&&(n.push(s.array[l],s.array[l+1]),n.length>=v&&(s.arrayString+=n.join(" ")+" ",n=[]))}return i&&(s.arrayString+=n.join(" ")+" "),s}function s(e){for(var t={latitude:-90,longitude:180},a={latitude:90,longitude:-180},i=0;i<e.length;i+=2)t.latitude=Math.max(e[i],t.latitude),t.longitude=Math.min(e[i+1],t.longitude),a.latitude=Math.min(e[i],a.latitude),a.longitude=Math.max(e[i+1],a.longitude);return t.longitude=r(t.longitude,-180,180),a.longitude=r(a.longitude,-180,180),Microsoft.Maps.LocationRect.fromCorners(new Microsoft.Maps.Location(t.latitude,t.longitude),new Microsoft.Maps.Location(a.latitude,a.longitude))}function l(e){for(var t=[],a=0,i=0,r=0,o=4294967296;a<e.length;){for(var n=0,s=0;;){if(a>=e.length)return null;var l=f.indexOf(e.charAt(a++));if(l===-1)return null;var c=(31&l)*Math.pow(2,s),u=c/o,d=c%o,p=n/o,h=n%o,g=(d|h)>>>0;if(n=(u|p)*o+g,s+=5,l<32)break}var m=Math.floor((Math.sqrt(8*n+5)-1)/2);n-=m*(m+1)/2;var y=Math.floor(n),v=m-y;v=v>>1^-(1&v),y=y>>1^-(1&y),i+=v,r+=y;var b=1e-5*r,C=1e-5*i;t.push(b),t.push(C)}return new Float64Array(t)}function c(e){for(var a=e.locations,i=0;i<a.length;i++){var r=a[i];r.geographic||(r.geographic=t.parseEncodedSpatialValueArray(r.nativeBing));var o=r.geographic;if(o&&!r.absolute){var n=t.latLongToPixelXYArray(o,t.DefaultLevelOfDetail,!0);r.absolute=n.array,r.absoluteString=n.arrayString;var s=t.getLocationBoundaries(o);r.absoluteBounds=t.locationRectToRectXY(s,t.DefaultLevelOfDetail)}}}function u(e,t){return p(e.latitude,e.longitude,t)}function d(t,a){var i=u(t.getNorthwest(),a),r=u(t.getSoutheast(),a);return new e.visuals.Rect(i.x,i.y,r.x-i.x,r.y-i.y)}function p(t,a,i){var r=n(new Float64Array([t,a]),i).array;return new e.visuals.Point(r[0],r[1])}function h(e,t,a){var i=o(a),n=r(e,0,i-1)/i-.5,s=.5-r(t,0,i-1)/i,l=90-360*Math.atan(Math.exp(2*-s*Math.PI))/Math.PI,c=360*n;return new Microsoft.Maps.Location(l,c)}function g(e,t,a,i){void 0===i&&(i=!1);var r=new Microsoft.Maps.Point(t,a),o=e.tryPixelToLocation(r,Microsoft.Maps.PixelReference.page);e.setView({center:o,animate:i})}function m(e,t,a,i){void 0===i&&(i=!1);var r=e.tryLocationToPixel(e.getCenter(),Microsoft.Maps.PixelReference.page),o=r.x-t,n=r.y-a;g(e,o,n,i)}t.getBingMapsVersion=a,t.Settings={MaxBingRequest:6,MaxCacheSize:3e3,MaxCacheSizeOverflow:100,BingKey:"AoW85FdF-eTJavFmWhZjaQ970kwG1FuainbyVSlP5HglkbhVVIFOyNwlaQxAIj-S"};var y="https://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0&s=1";t.mapControlFactory=i,t.MinAllowedLatitude=-85.05112878,t.MaxAllowedLatitude=85.05112878,t.MinAllowedLongitude=-180,t.MaxAllowedLongitude=180,t.TileSize=256,t.MaxLevelOfDetail=23,t.MinLevelOfDetail=1,t.MaxAutoZoomLevel=5,t.DefaultLevelOfDetail=11,t.WorkerErrorName="___error___",t.CategoryTypes={Address:"Address",City:"City",Continent:"Continent",CountryRegion:"Country",County:"County",Longitude:"Longitude",Latitude:"Latitude",Place:"Place",PostalCode:"PostalCode",StateOrProvince:"StateOrProvince"};var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_-";t.clip=r,t.getMapSize=o;var v=15e3;t.latLongToPixelXYArray=n,t.getLocationBoundaries=s,t.parseEncodedSpatialValueArray=l,t.calcGeoData=c,t.locationToPixelXY=u,t.locationRectToRectXY=d,t.latLongToPixelXY=p,t.pixelXYToLocation=h;var b;!(function(e){function t(e){var t='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><circle fill="#FF5F00" cx="12" cy="12" r="6"/><circle fill="none" stroke="#FF5F00" stroke-width="2" cx="12" cy="12" r="10"/></svg>',a={draggable:!1,htmlContent:t,height:24,width:24};return new Microsoft.Maps.Pushpin(e,a)}e.createPushpin=t})(b=t.CurrentLocation||(t.CurrentLocation={})),t.moveMap=g,t.moveMapDelta=m})(a=t.MapUtil||(t.MapUtil={}));var r=(function(){function e(){this._locationRect=new Microsoft.Maps.LocationRect(new Microsoft.Maps.Location(30,(-30)),60,60)}return e.prototype.reCalc=function(e,r,o){var n=[this._locationRect.getNorthwest(),this._locationRect.getSoutheast()];if(r/=2,o/=2,!this._baseRect){var s=a.locationToPixelXY(this._locationRect.getNorthwest(),i),l=a.locationToPixelXY(this._locationRect.getSoutheast(),i);this._baseRect=new t.Rect(s.x,s.y,l.x-s.x,l.y-s.y)}var c=e.tryLocationToPixel(n);this._currentRect=new t.Rect(c[0].x+r,c[0].y+o,c[1].x-c[0].x,c[1].y-c[0].y)},Object.defineProperty(e.prototype,"scale",{get:function(){return this._baseRect?this._currentRect.width/this._baseRect.width:1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transform",{get:function(){var e=this._baseRect,a=this._currentRect,i=new t.Transform;return i.translate(a.left,a.top),i.scale(a.width/e.width,a.height/e.height),i.translate(-e.left,-e.top),i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outherTransform",{get:function(){var e=this._baseRect,a=this._currentRect,i=new t.Transform;i.translate(a.left,a.top);var r=Math.sqrt(a.width/e.width);return i.scale(r,r),i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerTransform",{get:function(){var e=this._baseRect,a=this._currentRect,i=new t.Transform,r=a.width/e.width;return i.scale(r,r),i.translate(-e.left,-e.top),i},enumerable:!0,configurable:!0}),e.prototype.transformToString=function(e){var t=e.matrix;return"matrix("+t.m00+" "+t.m10+" "+t.m01+" "+t.m11+" "+t.m02+" "+t.m12+")"},e})();t.MapPolygonInfo=r})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a,i=jsCommon.CssConstants.createClassAndSelector;!(function(a){function r(e,t){return 1===e.axis&&!t.y1.isCategoryAxis}function o(e,a,i,r){if(_.isEmpty(a)){var o={selector:{id:"0"},properties:{show:!1,value:"",lineColor:{solid:{color:i}},transparency:50,style:t.lineStyle.dashed,position:t.referenceLinePosition.front,dataLabelShow:!1},objectName:r};return void e.pushInstance(o)}for(var n=0,s=a;n<s.length;n++){var l=s[n],c=l.dataLabelProperties&&l.dataLabelProperties.show,o={selector:l.selector,properties:{show:l.show,displayName:l.displayName,value:l.value,lineColor:l.color,transparency:l.transparency,style:l.style,position:l.position,dataLabelShow:c},objectName:l.type};if(c){var u=l.dataLabelProperties;o.properties[d.dataLabelColor]=u.color,o.properties[d.dataLabelText]=u.text,o.properties[d.dataLabelHorizontalPosition]=u.horizontalPosition,o.properties[d.dataLabelVerticalPosition]=u.verticalPosition,o.properties[d.dataLabelDisplayUnits]=u.displayUnits,o.properties[d.dataLabelDecimalPoints]=u.decimalPoints}e.pushInstance(o)}}function n(e){function r(i){if(i.show&&_.isNumber(i.value)){var r=a.isHorizontal(i,e.axes),s=e.viewport,l=i.value,c=d3.select(this);c.attr("x1",r?0:o(l)),c.attr("y1",r?n(l):0),c.attr("x2",r?s.width:o(l)),c.attr("y2",r?n(l):s.height);var u={};u.stroke=i.color.solid.color;var d=i.transparency;switch(u["stroke-opacity"]=(100-d)/100,i.style){case t.lineStyle.dotted:u["stroke-dasharray"]="1, 5",u["stroke-linecap"]="round";break;case t.lineStyle.solid:u["stroke-dasharray"]=null,u["stroke-linecap"]=null;break;case t.lineStyle.dashed:default:u["stroke-dasharray"]="5, 5",u["stroke-linecap"]=null}c.style(u)}}var o=e.axes.x.scale,n=e.axes.y1.scale,s=e.graphicContext,l=i("reference-line-front"),c=_.filter(e.referenceLines,(function(e){return e.position===t.referenceLinePosition.front&&e.show})),u=s.selectAll(l.selector).data(c);u.enter().append("line").classed(l.class,!0),u.each(r),u.exit().remove();var d=i("reference-line-back"),p=_.filter(e.referenceLines,(function(e){return e.position!==t.referenceLinePosition.front&&e.show})),h=s.selectAll(d.selector).data(p);h.enter().insert("line",":first-child").classed(d.class,!0),h.each(r),h.exit().remove()}function s(a,i,r,o,n){if(!a)return[];var s=[];for(var l in a){var c=a[l],u=e.DataViewObject.getValue(c,d.show,!1),p=e.DataViewObject.getValue(c,d.displayName,void 0),h=e.DataViewObject.getValue(c,d.value,0),g=e.DataViewObject.getValue(c,d.lineColor,{solid:{color:i}}),m=e.DataViewObject.getValue(c,d.transparency,50),y=e.DataViewObject.getValue(c,d.style,t.lineStyle.dashed),f=e.DataViewObject.getValue(c,d.position,t.referenceLinePosition.front),v=e.DataViewObject.getValue(c,d.dataLabelShow,!1),b=e.DataViewObject.getValue(c,d.dataLabelColor,{solid:{color:i}}),C=e.DataViewObject.getValue(c,d.dataLabelText,t.labelText.value),S=e.DataViewObject.getValue(c,d.dataLabelHorizontalPosition,t.referenceLineDataLabelHorizontalPosition.left),x=e.DataViewObject.getValue(c,d.dataLabelVerticalPosition,t.referenceLineDataLabelVerticalPosition.above),w=e.DataViewObject.getValue(c,d.dataLabelDecimalPoints,void 0),P=w<0?void 0:w,D=e.DataViewObject.getValue(c,d.dataLabelDisplayUnits,0),T={id:l,metadata:n};s.push({type:r,selector:T,show:u,displayName:p,value:h,color:g,transparency:m,style:y,position:f,dataLabelProperties:{show:v,color:b,text:C,horizontalPosition:S,verticalPosition:x,decimalPoints:P,displayUnits:D},axis:o})}return s}function l(i){if(_.isEmpty(i.referenceLines))return[];for(var r=[],o=5,n=i.axes,s=i.viewport,l=n.x.scale,c=n.y1.scale,u=0,d=i.referenceLines;u<d.length;u++){var p=d[u];if(p.show&&_.isNumber(p.value)&&p.dataLabelProperties.show){var h=a.isHorizontal(p,n),g=h?n.y1.formatter:n.x.formatter,m=g,y=p.value,f=p.dataLabelProperties;if(null!=g.options){var v=e.Prototype.inherit(g.options);v.precision=f.decimalPoints,v.value=f.displayUnits,m=t.valueFormatter.create(v)}var b="";switch(f.text){case t.labelText.name:b=p.displayName;break;case t.labelText.nameAndValue:if(!_.isNumber(y))continue;var C=i.hostServices.getLocalizedString("Visual_LabelText_Name_Value_Format");b=jsCommon.StringExtensions.format(C,p.displayName,t.NewDataLabelUtils.getLabelFormattedText(m.format(y)));break;case t.labelText.value:default:if(!_.isNumber(y))continue;b=t.NewDataLabelUtils.getLabelFormattedText(m.format(y))}var S={text:b,fontFamily:t.dataLabelUtils.LabelTextProperties.fontFamily,fontSize:t.dataLabelUtils.LabelTextProperties.fontSize,fontWeight:t.dataLabelUtils.LabelTextProperties.fontWeight},x=e.TextMeasurementService.measureSvgTextWidth(S),w=e.TextMeasurementService.estimateSvgTextHeight(S),P=void 0,D=void 0,T=h?0:l(y),V=h?c(y):0,L=h?s.width:l(y),N=h?c(y):s.height,M=[1];h?(P=f.horizontalPosition===t.referenceLineDataLabelHorizontalPosition.left?T+o:L-x/2-o,D=V,M=f.verticalPosition===t.referenceLineDataLabelVerticalPosition.above?[1]:[2]):(P=T,D=f.verticalPosition===t.referenceLineDataLabelVerticalPosition.above?V+w/2+o:N-w/2-o,M=f.horizontalPosition===t.referenceLineDataLabelHorizontalPosition.left?[4]:[8]);var A=e.TextMeasurementService.measureSvgTextWidth(S),R=e.TextMeasurementService.estimateSvgTextHeight(S,!0),F=void 0;F={point:{x:P,y:D},radius:0,validPositions:M},r.push({isPreferred:!0,text:b,textSize:{width:A,height:R},outsideFill:f.color.solid.color,insideFill:null,parentShape:F,parentType:0,fontSize:9,identity:null,secondRowText:null,key:JSON.stringify({type:p.type,id:p.selector.id})})}}return r}function c(t){var a=null;return t&&e.DataViewObject.getValue(t,d.show,!1)&&(a=e.DataViewObject.getValue(t,d.value,null)),a}function u(e,t,a){if(!_.isEmpty(e))for(var i=0,r=e;i<r.length;i++){var o=r[i];if(o.show){var n=o.value;0===o.axis?t.push(n):a.push(n)}}}var d;!(function(e){e.show="show",e.lineColor="lineColor",e.transparency="transparency",e.displayName="displayName",e.value="value",e.style="style",e.position="position",e.dataLabelShow="dataLabelShow",e.dataLabelColor="dataLabelColor",e.dataLabelText="dataLabelText",e.dataLabelDecimalPoints="dataLabelDecimalPoints",e.dataLabelHorizontalPosition="dataLabelHorizontalPosition",e.dataLabelVerticalPosition="dataLabelVerticalPosition",e.dataLabelDisplayUnits="dataLabelDisplayUnits"})(d=a.ReferenceLineProps||(a.ReferenceLineProps={})),a.isHorizontal=r,a.enumerateObjectInstances=o,a.render=n,a.readDataView=s,a.createLabelDataPoint=l,a.extractReferenceLineValue=c,a.gatherDomainExtents=u})(a=t.ReferenceLineHelper||(t.ReferenceLineHelper={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(a){var i=(function(){function a(e){this.dataPointObjectName="dataPoint",this.hostServices=e.hostServices,this.selectedIds=[]}return a.prototype.select=function(e,t){void 0===t&&(t=!1);var a=$.Deferred();return this.hostServices.shouldRetainSelection()?this.sendSelectionToHost([e]):(this.selectInternal(e,t),this.sendSelectionToHost(this.selectedIds)),a.resolve(this.selectedIds),a},a.prototype.showContextMenu=function(e,a){var i=$.Deferred();return a=a||t.InteractivityUtils.getPositionOfLastInputEvent(),this.sendContextMenuToHost(e,a),i.resolve(),i},a.prototype.hasSelection=function(){return this.selectedIds.length>0},a.prototype.clear=function(){var e=$.Deferred();return this.selectedIds=[],this.sendSelectionToHost([]),e.resolve(),e},a.prototype.getSelectionIds=function(){return this.selectedIds},a.prototype.sendSelectionToHost=function(e){var t=this.dataPointObjectName,a={visualObjects:_.chain(e).filter((function(e){return e.hasIdentity()})).map((function(e){return{objectName:t,selectorsByColumn:e.getSelectorsByColumn()}})).value(),selectors:void 0},i=!1;_.isEmpty(e)||(i=e[0].getSelector()&&!e[0].getSelectorsByColumn()),i&&(a.selectors=_.chain(e).filter((function(e){return e.hasIdentity()})).map((function(e){return e.getSelector()})).value()),this.hostServices.onSelect(a)},a.prototype.sendContextMenuToHost=function(e,t){var a=this.getSelectorsByColumn([e]);if(!_.isEmpty(a)){var i={data:a,position:t};this.hostServices.onContextMenu(i)}},a.prototype.getSelectorsByColumn=function(e){return _(e).filter((function(e){return e.hasIdentity})).map((function(e){return e.getSelectorsByColumn()})).compact().value()},a.prototype.selectInternal=function(t,i){a.containsSelection(this.selectedIds,t)?this.selectedIds=i?this.selectedIds.filter((function(a){return!e.data.Selector.equals(a.getSelector(),t.getSelector())})):this.selectedIds.length>1?[t]:[]:i?this.selectedIds.push(t):this.selectedIds=[t]},a.containsSelection=function(t,a){return t.some((function(t){return e.data.Selector.equals(t.getSelector(),a.getSelector())}))},a})();a.SelectionManager=i})(a=t.utility||(t.utility={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(t){return null!=t?e.MinBubbleMultiplier+t/100*e.MaxBubbleMultiplier:e.MinBubbleMultiplier}function a(t){return Math.round((t-e.MinBubbleMultiplier)/e.MaxBubbleMultiplier*100).toString()}e.MinBubbleMultiplier=1,e.MaxBubbleMultiplier=3,e.getBubbleSizeMultiplier=t,e.invertBubbleSizeMultiplier=a})(t=e.shapeUtil||(e.shapeUtil={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a,i=jsCommon.Color,r=jsCommon.PixelConverter,o=e.data.SQExprBuilder,n=e.data.SemanticFilter;!(function(e){e[e.top=0]="top",e[e.bottom=1]="bottom",e[e.left=2]="left",e[e.right=4]="right"})(a=t.WidgetPosition||(t.WidgetPosition={}));var s;!(function(s){function l(e,t){var a=o.text(t),i=o.contains(e,a);return n.fromSQExpr(i)}function c(t,a,i){if(!t||_.isEmpty(a))return!1;for(var r=0,o=a.length;r<o;r++){var n=a[r];if(e.DataViewScopeIdentity.equals(t,n,i))return a.splice(r,1),!0}return!1}function u(e,t,i,r,o){if(void 0===i&&(i=null),void 0===r&&(r=!1),void 0===o&&(o=null),e&&t){var n="",l="",c="",u="",d="",h=s.getScale(t),g=t.get(0),m=e.offsetParent(),y=s.getScale(m);r&&e.css({transform:"scale("+h+")"});var f=g.getBoundingClientRect();if(null==o&&(o=p(f)),(o&a.bottom)===a.bottom){var v=f.top+f.height;n=v/y,d="top"}else{var b=window.innerHeight-f.top;c=b/y,n="auto",d="bottom"}if((o&a.left)===a.left){var C=f.left;u=C/y,s.isWidgetPositionExceedsBoundaries(e,h,u)&&(u=window.innerWidth-e.innerWidth()*h),d="left "+d}else{var S=window.innerWidth-f.left-f.width;l=S/y,u="auto",s.isWidgetPositionExceedsBoundaries(e,h,l)&&(l=window.innerWidth-e.innerWidth()*h),d="right "+d}var x={left:u,top:n,right:l,bottom:c,"transform-origin":d};i&&("auto"!==x.top?x.top+=i.top*h:x.bottom+=i.top*h,"auto"!==x.left?x.left+=i.left*h:x.right+=i.left*h),e.css(x)}}function d(e,t,a){return e.innerWidth()*t+a>window.innerWidth}function p(e){var t=a.bottom|a.left,i=window.innerHeight,r=window.innerWidth;return i-e.top<i/2&&(t&=~a.bottom,t|=a.top),r-e.left<r/2&&(t&=~a.left,t|=a.right),t}function h(e){if(!e)return 1;var t=e.outerWidth();if(0===t)return 1;var a=e.get(0).getBoundingClientRect().width;return a/t}function g(e,t){if(t&&!_.isEmpty(e)){var a=_.first(t.columns);return a&&a.expr?s.getContainsFilter(a.expr,e):void 0}}function m(e,a){var i={remove:[{objectName:"general",selector:null,properties:{filter:!0}}],replace:[{objectName:"data",selector:null,properties:(r={},r[t.slicerProps.data.mode.propertyName]=a,r)}]};e.persistProperties(i),e.onSelect({visualObjects:[]});var r}var y;!(function(e){var t=jsCommon.CssConstants.createClassAndSelector;e.ClearSearchTextButton=t("clearSearchTextButton"),e.HeaderContainer=t("headerContainer"),e.Header=t("slicerHeader"),e.Hidden=t("hidden"),e.Icon=t("icon"),e.TitleHeader=t("titleHeader"),e.HeaderText=t("headerText"),e.Body=t("slicerBody"),e.Label=t("slicerLabel"),e.LabelText=t("slicerText"),e.LabelImage=t("slicerImage"),e.CountText=t("slicerCountText"),e.Clear=t("clear"),e.SearchHeader=t("searchHeader"),e.SearchIconClass=t("searchIcon"),e.SearchInput=t("searchInput"),e.SearchHeaderCollapsed=t("collapsed"),e.SearchHeaderShow=t("show"),e.MultiSelectEnabled=t("isMultiSelectEnabled")})(y=s.Selectors||(s.Selectors={}));var f;!(function(e){e.Clear="Slicer_Clear",e.SelectAll="Slicer_SelectAll",e.Search="SearchBox_Text"})(f=s.DisplayNameKeys||(s.DisplayNameKeys={}));var v;!(function(e){function t(e){return null!=e&&null!=e.slicerSettings}e.areSettingsDefined=t})(v=s.SettingsHelper||(s.SettingsHelper={}));var b;!(function(e){function t(e){if(e){var t=e.categorical;if(t&&!_.isEmpty(t.categories))return t.categories[0].identityFields}}e.getIdentityFields=t})(b=s.DefaultValueHandler||(s.DefaultValueHandler={})),s.getContainsFilter=l,s.tryRemoveValueFromRetainedList=c,s.fixWidgetPosition=u,s.isWidgetPositionExceedsBoundaries=d,s.getScale=h,s.getUpdatedSelfFilter=g,s.clearSlicerFilter=m;var C=(function(){function e(){}return e.prototype.onPopupHideEvent=function(e){return this.popupHideEventHandler=e,this.bindPopupHideHandlers(),$.proxy(this.unbindPopupHideHandlers,this)},e.prototype.popupHideEventReceived=function(e){this.popupHideEventHandler(e)},e.prototype.bindPopupHideHandlers=function(){$(e.exploreCanvasSelector).on("mousedown",$.proxy(this.popupHideEventReceived,this)),$(e.exploreCanvasSelector).on("touchstart",$.proxy(this.popupHideEventReceived,this)),$(e.exploreCanvasSelector).on("scroll",$.proxy(this.popupHideEventReceived,this)),$(window).on("resize",$.proxy(this.popupHideEventReceived,this))},e.prototype.unbindPopupHideHandlers=function(){$(e.exploreCanvasSelector).off("mousedown",this.popupHideEventReceived),$(e.exploreCanvasSelector).off("touchstart",this.popupHideEventReceived),$(e.exploreCanvasSelector).off("scroll",this.popupHideEventReceived),$(window).off("resize",this.popupHideEventReceived)},e})();C.exploreCanvasSelector=".exploreCanvas",s.EventsHelper=C;var S=(function(){function a(){}return a.prototype.addSearch=function(e,t){var a=t.append("div").classed(y.SearchHeader.class,!0).classed(y.SearchHeaderCollapsed.class,!0);return a.append("span").classed("powervisuals-glyph search",!0).classed(y.Icon.class,!0).classed(y.SearchIconClass.class,!0).attr("title",e.getLocalizedString(f.Search)),a.append("input").attr("type","text").classed(y.SearchInput.class,!0).attr("drag-resize-disabled","true"),a},a.prototype.addClearSearchButton=function(e,t){var a=t.append("span").classed("powervisuals-glyph x",!0).classed(y.Icon.class,!0).classed(y.ClearSearchTextButton.class,!0),i=t.select(s.Selectors.SearchInput.selector);return i.attr("placeholder",e.getLocalizedString(f.Search)),a},a.prototype.configureSearchBoxIcon=function(e,t){var a=_.isEmpty(t);e.select(s.Selectors.SearchIconClass.selector).classed(s.Selectors.Hidden.class,!a),e.select(s.Selectors.ClearSearchTextButton.selector).classed(s.Selectors.Hidden.class,a)},a.prototype.getRowHeight=function(t,a){return e.TextMeasurementService.estimateSvgTextHeight(this.getTextProperties(t.slicerText.textSize,a))+this.getRowsOutlineWidth(t.slicerText.outline,t.general.outlineWeight)},a.prototype.setSlicerTextStyle=function(e,a){var i=1.79;e.style({color:a.slicerText.color,"background-color":a.slicerText.background,"border-style":"solid","border-color":a.general.outlineColor,"border-width":t.VisualBorderUtil.getBorderWidth(a.slicerText.outline,a.general.outlineWeight),"font-size":r.fromPoint(a.slicerText.textSize),"line-height":Math.floor(i*a.slicerText.textSize)+"px"});var o=this.calculateSlicerTextHighlightColor(a.slicerText.color);e.on("mouseover",(function(e){d3.select(this).style({color:o})})),e.on("mouseout",(function(e){d3.select(this).style({color:a.slicerText.color})}))},a.prototype.getRowsOutlineWidth=function(e,a){switch(e){case t.outline.none:case t.outline.leftRight:return 0;case t.outline.bottomOnly:case t.outline.topOnly:return a;case t.outline.topBottom:case t.outline.frame:return 2*a;default:return 0}},a.prototype.calculateSlicerTextHighlightColor=function(e){var t=i.parseColorString(e);return 255===t.R&&255===t.G&&255===t.B?"#C8C8C8":i.calculateHighlightColor(t,.8,.2)},a.prototype.getTextProperties=function(e,t){return t.fontSize=r.fromPoint(e),t},a})();s.DOMHelper=S})(s=t.SlicerUtil||(t.SlicerUtil={})),(function(e){var t;!(function(t){function a(e,t,a,n){if(t)switch(e.objectName){case"items":return o(t,a);case"selection":if(i(n))return r(t,a)}}function i(e){return!(e&&e.metadata&&e.metadata.columns&&_.some(e.metadata.columns,(function(e){return e.discourageAggregationAcrossGroups})))}function r(t,a){var i=a,r=e.SettingsHelper.areSettingsDefined(t)&&t.slicerSettings.selection,o=r&&t.slicerSettings.selection.selectAllCheckboxEnabled?t.slicerSettings.selection.selectAllCheckboxEnabled:i.selection.selectAllCheckboxEnabled,n=t&&t.slicerSettings&&t.slicerSettings.selection&&void 0!==t.slicerSettings.selection.singleSelect?t.slicerSettings.selection.singleSelect:i.selection.singleSelect;return[{selector:null,objectName:"selection",properties:{selectAllCheckboxEnabled:o,singleSelect:n}}]}function o(t,a){var i=a,r=e.SettingsHelper.areSettingsDefined(t)&&t.slicerSettings.slicerText,o=r&&t.slicerSettings.slicerText.color?t.slicerSettings.slicerText.color:i.slicerText.color,n=r&&t.slicerSettings.slicerText.background?t.slicerSettings.slicerText.background:i.slicerText.background;return[{selector:null,objectName:"items",properties:{fontColor:o,background:n,outline:i.slicerText.outline,textSize:i.slicerText.textSize}}]}t.enumerateObjectInstances=a})(t=e.ObjectEnumerator||(e.ObjectEnumerator={}))})(s=t.SlicerUtil||(t.SlicerUtil={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(e,t){if(0!==t.length){var a=e.selectAll("title"),i=a.data((function(e,a){return[t[a]]}));i.enter().append("title"),i.exit().remove(),i.text((function(e){return e}))}}e.tooltipUpdate=t})(t=e.tooltipUtils||(e.tooltipUtils={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){function a(e){return e.toString().replace(new RegExp(" ","g"),"&nbsp")}function i(e){return e.replace(//g,"")}function r(e){if(null!=e)return e.replace(/ /g,"")}function o(t,a,i,r){void 0===r&&(r=0);var o=e.TextMeasurementService.getSvgMeasurementProperties(t),n=e.TextMeasurementService.estimateSvgTextHeight(o)+r,s=Math.max(1,Math.floor(i/n)),l=d3.select(t),c=t.textContent;t.textContent=null;for(var u=jsCommon.WordBreaker.splitByWidth(c,o,e.TextMeasurementService.measureSvgTextWidth,a,s),d=0,p=u.length;d<p;d++)o.text=u[d],l.append("tspan").attr({x:0,dy:0===d?0:n}).text(e.TextMeasurementService.getTailoredTextOrDefault(o,a))}t.removeBreakingSpaces=a,t.removeEllipses=i,t.replaceSpaceWithNBSP=r,t.wordBreak=o})(a=t.TextUtil||(t.TextUtil={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a,i=e.data.DataRoleHelper;!(function(t){function a(e){if(e)for(var t in e){var a=e[t];for(var i in a.properties){var r=a.properties[i];if(r.type&&r.type[F])return r.rule.inputRole}}}function r(e){var t=!!(e&&e.query&&e.query.projections&&e.query.projections.Gradient);return t}function o(e){var t;if(e&&!$.isEmptyObject(e)){t=c();for(var a in t){var i=e.hasOwnProperty(a);if(i){var r=e[a];r&&r.solid&&r.solid.color&&(r=r.solid.color),t[a]=r}}}return t}function n(e){if(e&&e.values&&e.values.grouped){var t=e.values.grouped();return i.getMeasureIndexOfRole(t,"Gradient")}return-1}function s(e){if(null==e)return null;var a=t.getGradientMeasureIndex(e),i=a===-1?null:e.values[a];return i}function l(e){var t=n(e);return t>=0}function c(){var e=g(),a={diverging:!1,minColor:e.minColor,midColor:M,maxColor:e.maxColor,minValue:void 0,midValue:void 0,maxValue:void 0,nullStrategy:t.DefaultNullStrategy,nullColor:t.DefaultNullColor};return a}function u(){return f()}function d(t,a,i){var r,o,n=e.data.DataViewObjectDefinitions.ensure(i,R,null),s=h(i);if(s)switch($.isNumeric(a)&&(r=void 0!==a?N.double(+a):void 0),_.contains(["minColor","midColor","maxColor","nullColor"],t)&&(o=C(s,t,a)),t){case"minColor":S(s,o);break;case"midColor":x(s,o);break;case"maxColor":w(s,o);break;case"nullColor":L(s,o);break;case"minValue":P(s,r);break;case"midValue":D(s,r);break;case"maxValue":T(s,r);break;case"nullStrategy":V(s,a);break;case"diverging":s=a?v(s):f(s),n.properties[F]=s;break;case"revertToDefault":s=u(),n.properties[F]=s}}function p(e){return e?m(e):c()}function h(t){var a=e.data.DataViewObjectDefinitions.getValue(t,{objectName:R,propertyName:F},null);return a}function g(){var a=new e.visuals.DataColorPalette,i=a.getColorByIndex(0),r=d3.scale.linear().domain([0,100]).range(["#ffffff",i.value]);return{minColor:r(20),midColor:M,maxColor:i.value,nullColor:t.DefaultNullColor}}function m(e){var a,i,r,o,n,s,l=M,c=t.DefaultNullColor,u=t.DefaultNullStrategy,d=void 0!==e.linearGradient3,p=e.linearGradient2,h=e.linearGradient3;if(p){a=p.max.color.value,i=p.min.color.value;var g=p.max.value;g&&(r=g.value);var m=p.min.value;m&&(n=m.value),s=p.nullColoringStrategy}else if(h){a=h.max.color.value,l=h.mid.color.value,i=h.min.color.value;var g=h.max.value;g&&(r=g.value);var y=h.mid.value;y&&(o=y.value);var m=h.min.value;m&&(n=m.value),s=h.nullColoringStrategy}if(s){u=s.strategy.value;var f=s.color;f&&(c=f.value)}var v={diverging:d,minColor:i,midColor:l,maxColor:a,nullStrategy:u};return null!=n&&(v.minValue=n),null!=o&&(v.midValue=o),null!=r&&(v.maxValue=r),null!=c?v.nullColor=c:v.nullColor=t.DefaultNullColor,v}function y(e){var t=[];return e.minColor=e.minColor||A,t.push(e.minColor),e.diverging&&(e.midColor=e.midColor||A,t.push(e.midColor||A)),e.maxColor=e.maxColor||A,t.push(e.maxColor||A),t.join(",")}function f(t){var a=p(t),i={linearGradient2:{min:{color:N.text(a.minColor)},max:{color:N.text(a.maxColor)},nullColoringStrategy:{strategy:N.text(a.nullStrategy)}}},r=i.linearGradient2;return null!=a.minValue&&(r.min.value=N.double(a.minValue)),null!=a.maxValue&&(r.max.value=N.double(a.maxValue)),a.nullStrategy===e.NullStrategy.specificColor&&a.nullColor&&(r.nullColoringStrategy.color=N.text(a.nullColor)),i}function v(t){var a=p(t),i={linearGradient3:{min:{color:N.text(a.minColor)},mid:{color:N.text(a.midColor)},max:{color:N.text(a.maxColor)},nullColoringStrategy:{strategy:N.text(a.nullStrategy)}}},r=i.linearGradient3;return null!=a.minValue&&(r.min.value=N.double(a.minValue)),null!=a.midValue&&(r.mid.value=N.double(a.midValue)),null!=a.maxValue&&(r.max.value=N.double(a.maxValue)),a.nullStrategy===e.NullStrategy.specificColor&&a.nullColor&&(r.nullColoringStrategy.color=N.text(a.nullColor)),i}function b(e,t){var a;if(e.linearGradient3){var i=v().linearGradient3;switch(t){case"minColor":a=i.min.color;break;case"midColor":a=i.mid.color;break;case"maxColor":a=i.max.color;break;case"nullColor":a=i.nullColoringStrategy.color}}else if(e.linearGradient2){var i=f().linearGradient2;switch(t){case"minColor":a=i.min.color;break;case"maxColor":a=i.max.color;break;case"nullColor":a=i.nullColoringStrategy.color}}return a}function C(e,t,a){var i;return i=a?N.text(a):b(e,t)}function S(e,t){e.linearGradient2?e.linearGradient2.min.color=t:e.linearGradient3&&(e.linearGradient3.min.color=t)}function x(e,t){e.linearGradient3&&(e.linearGradient3.mid.color=t);
}function w(e,t){e.linearGradient2?e.linearGradient2.max.color=t:e.linearGradient3&&(e.linearGradient3.max.color=t)}function P(e,t){e.linearGradient2?e.linearGradient2.min.value=t:e.linearGradient3&&(e.linearGradient3.min.value=t)}function D(e,t){e.linearGradient3&&(e.linearGradient3.mid.value=t)}function T(e,t){e.linearGradient2?e.linearGradient2.max.value=t:e.linearGradient3&&(e.linearGradient3.max.value=t)}function V(e,t){e.linearGradient2?e.linearGradient2.nullColoringStrategy.strategy=t:e.linearGradient3&&(e.linearGradient3.nullColoringStrategy.strategy=t)}function L(e,t){e.linearGradient2?e.linearGradient2.nullColoringStrategy.color=t:e.linearGradient3&&(e.linearGradient3.nullColoringStrategy.color=t)}var N=e.data.SQExprBuilder,M="#ffffff";t.DefaultNullColor="#FF7F48",t.DefaultNullStrategy=e.NullStrategy.asZero;var A=M,R="dataPoint",F="fillRule";t.getFillRuleRole=a,t.shouldShowGradient=r,t.getUpdatedGradientSettings=o,t.getGradientMeasureIndex=n,t.getGradientValueColumn=s,t.hasGradientRole=l,t.getDefaultGradientSettings=c,t.getDefaultFillRuleDefinition=u,t.updateFillRule=d,t.getGradientSettings=p,t.getFillRule=h,t.getGradientSettingsFromRule=m,t.getGradientBarColors=y,t.getLinearGradient2FillRuleDefinition=f,t.getLinearGradient3FillRuleDefinition=v})(a=t.GradientUtils||(t.GradientUtils={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(e){e[e.Leaf=0]="Leaf",e[e.NonLeaf=1]="NonLeaf"})(a=t.HierarchyNodeType||(t.HierarchyNodeType={}));var i;!(function(t){function i(e){return t.isKind(e,a.Leaf)}function r(e){return t.isKind(e,a.NonLeaf)}function o(e,t){return e&&e.kind===t}function n(e,a,i){if(0===i)return e;for(var r=e,o=1;o<=i;o++){var n=r.children,s=_.first(n);r=t.getNodeAtCategoryIndex(s,a)}return r}function s(e,a){var i=u(e);if(i===a)return e;if(i<a){var r=e.next;l(e);var o=t.getNodeAtCategoryIndex(r,a);return c(e),o}var n=e.previous;if(n&&u(n)>=a){l(e);var o=t.getNodeAtCategoryIndex(n,a);return c(e),o}return e}function l(e){var t=e;t.visited=!0}function c(e){var t=e;delete t.visited}function u(e){return t.isLeaf(e)?e.categoryIndex:t.isNonLeaf(e)?e.maxCategoryIndex:void 0}function d(e){if(e.parent){var t=e.parent;if(!_.isEmpty(t.children))return _.last(t.children);var a=d(t);return a&&_.last(a.children)}}t.isLeaf=i,t.isNonLeaf=r,t.isKind=o,t.getNodeAtCategoryIndexForDepth=n,t.getNodeAtCategoryIndex=s,t.getLastLevelNode=d;var p;!(function(t){function i(e){for(var t=_.first(e).values.length,i={categorySpan:t,children:[],kind:a.NonLeaf,maxCategoryIndex:t,parent:null},o=0;o<t;)o+=r(i,e,0,o);return i}function r(e,t,i,s,l){l||(l=[]);var c=t[i],u=l[i],p=void 0;if(!u){var h=c.source.identityExprs;u=l[i]=i>0?l[i-1].slice():[],u.push.apply(u,h)}var g=o(c,s,u),m={categorySpan:g,children:[],kind:a.NonLeaf,maxCategoryIndex:null,parent:e};void 0===p&&(p=d(m)),p&&(m.previous=p,p.next=m);var y=i+1;if(y>=t.length-1)n(m,t[y],s,g);else for(var f=0;f<g;){var v=f+s;f+=r(m,t,y,v,l)}var b=_.last(m.children);switch(b.kind){case a.Leaf:m.maxCategoryIndex=b.categoryIndex;break;case a.NonLeaf:m.maxCategoryIndex=b.maxCategoryIndex}return e.children.push(m),g}function o(t,a,i){for(var r,o=0,n=t.values.length,l=a;l<n;l++){var c=s(t,l,i);if(r&&!e.DataViewScopeIdentity.equals(r,c))break;r||(r=c),o++}return o}function n(e,t,i,r){for(var o=void 0,n=i,s=i+r;n<s;n++){var l={categoryIndex:n,kind:a.Leaf,parent:e,previous:o};void 0===o&&(o=d(l)),o&&(o.next=l,l.previous=o),o=l,e.children.push(l)}}function s(t,a,i){var r=t.identity,o=r[a],n=e.data.ScopeIdentityExtractor.getSubset(o.expr,i),s=e.data.createDataViewScopeIdentity(n);return s}t.build=i})(p=t.Builder||(t.Builder={}))})(i=t.HierarchyNodeHelpers||(t.HierarchyNodeHelpers={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function a(){return"#FFF"}function i(){return 50}function r(){return!1}function o(){return{color:a(),transparency:i(),show:r()}}function n(e,t){var a=t&&t.transparency;null==a&&(a=i());var r={selector:null,properties:{transparency:a,image:t&&t.image},objectName:"plotArea"};e.pushInstance(r)}function s(t,a,i){var r=t&&t.image,o=r&&r.url,n=r&&r.scaling,s=t&&t.transparency,l=a.children(".background-image");if(!o)return void(0!==l.length&&l.remove());switch(0===l.length&&(a.prepend('<div class="background-image"></div>'),l=a.children(".background-image"),l.css("position","absolute")),l.css({width:i.width,height:i.height,"margin-left":i.left,"margin-top":i.top}),l.css({"background-image":"url("+o+")","background-repeat":"no-repeat",opacity:(100-s)/100}),n){case e.imageScalingType.normal:l.css({"background-size":"","background-position":"50% 50%"});break;case e.imageScalingType.fit:l.css({"background-size":"100% 100%","background-position":""});break;case e.imageScalingType.fill:l.css({"background-size":"100%","background-position":"50% 50%"});break;default:l.css({"background-size":"","background-position":"50% 50%"})}}t.getDefaultColor=a,t.getDefaultTransparency=i,t.getDefaultShow=r,t.getDefaultValues=o,t.enumeratePlot=n,t.renderBackgroundImage=s})(t=e.visualBackgroundHelper||(e.visualBackgroundHelper={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=e.data.Selector,i=(function(){function e(){}return e.prototype.pushInstance=function(e){var t=this.instances;t||(t=this.instances=[]);var a=this.containerIdx;null!=a&&(e.containerIdx=a);for(var i=0,r=t;i<r.length;i++){var o=r[i];if(this.canMerge(o,e))return this.extend(o,e,"properties"),this.extend(o,e,"validValues"),this}return t.push(e),this},e.prototype.pushContainer=function(e){var t=this.containers;t||(t=this.containers=[]);var a=t.push(e);return this.containerIdx=a-1,this},e.prototype.popContainer=function(){return this.containerIdx=void 0,this},e.prototype.complete=function(){if(this.instances){var e={instances:this.instances},t=this.containers;return t&&(e.containers=t),e}},e.prototype.canMerge=function(e,t){return e.objectName===t.objectName&&e.containerIdx===t.containerIdx&&a.equals(e.selector,t.selector)},e.prototype.extend=function(e,t,a){var i=t[a];if(i){var r=e[a];r||(r=e[a]={});for(var o in i)r[o]||(r[o]=i[o])}},e.merge=function(t,a){var i=e.normalize(t),r=e.normalize(a);if(!i||!r)return i||r;for(var o=i.containers?i.containers.length:0,n=0,s=r.instances;n<s.length;n++){var l=s[n];i.instances.push(l),null!=l.containerIdx&&(l.containerIdx+=o)}var c=r.containers;return _.isEmpty(c)||(i.containers?Array.prototype.push.apply(i.containers,c):i.containers=c),i},e.normalize=function(e){return _.isArray(e)?{instances:e}:e},e.getContainerForInstance=function(e,t){return e.containers[t.containerIdx]},e})();t.ObjectEnumerationBuilder=i})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function a(t,a){switch(t){case e.outline.none:return"0px";case e.outline.bottomOnly:return"0px 0px "+a+"px 0px";case e.outline.topOnly:return a+"px 0px 0px 0px";case e.outline.leftOnly:return"0px 0px 0px "+a+"px";case e.outline.rightOnly:return"0px "+a+"px 0px 0px";case e.outline.topBottom:return a+"px 0px";case e.outline.leftRight:return"0px "+a+"px";case e.outline.frame:return a+"px";default:return"0px"}}t.getBorderWidth=a})(t=e.VisualBorderUtil||(e.VisualBorderUtil={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(e,t){return{m00:1,m01:0,m02:e,m10:0,m11:1,m12:t}}function a(e,t){return{m00:e,m01:0,m02:0,m10:0,m11:t,m12:0}}function i(e){var t=e,a=Math.sin(t),i=Math.cos(t);return{m00:i,m01:-a,m02:0,m10:a,m11:i,m12:0}}function r(e){var t=e.m00*e.m11-e.m01*e.m10,a=1/t;return{m00:e.m11*a,m01:-e.m01*a,m02:(e.m01*e.m12-e.m02*e.m11)*a,m10:-e.m10*a,m11:e.m00*a,m12:-(e.m00*e.m12-e.m10*e.m02)*a}}function o(e,t){return{m00:e.m00*t.m00+e.m01*t.m10,m01:e.m00*t.m01+e.m01*t.m11,m02:e.m00*t.m02+e.m01*t.m12+e.m02,m10:e.m10*t.m00+e.m11*t.m10,m11:e.m10*t.m01+e.m11*t.m11,m12:e.m10*t.m02+e.m11*t.m12+e.m12}}var n=(function(){function e(e){this.matrix=e||{m00:1,m01:0,m02:0,m10:0,m11:1,m12:0}}return e.prototype.applyToPoint=function(e){if(!e)return e;var t=this.matrix;return{x:t.m00*e.x+t.m01*e.y+t.m02,y:t.m10*e.x+t.m11*e.y+t.m12}},e.prototype.applyToRect=function(e){if(!e)return e;var t=e.left,a=e.top,i=this.matrix,r=1!==i.m00||1!==i.m11,o=0!==i.m01||0!==i.m10;if(!o&&!r)return{left:t+i.m02,top:a+i.m12,width:e.width,height:e.height};var n,s,l,c,u=e.left+e.width,d=e.top+e.height;if(o){var p=i.m00*t+i.m01*a+i.m02,h=i.m10*t+i.m11*a+i.m12,g=i.m00*t+i.m01*d+i.m02,m=i.m10*t+i.m11*d+i.m12,y=i.m00*u+i.m01*a+i.m02,f=i.m10*u+i.m11*a+i.m12,v=i.m00*u+i.m01*d+i.m02,b=i.m10*u+i.m11*d+i.m12;n=Math.min(p,g,y,v),s=Math.max(p,g,y,v),l=Math.min(h,m,f,b),c=Math.max(h,m,f,b)}else{var p=i.m00*t+i.m02,h=i.m11*a+i.m12,v=i.m00*u+i.m02,b=i.m11*d+i.m12;n=Math.min(p,v),s=Math.max(p,v),l=Math.min(h,b),c=Math.max(h,b)}return{left:n,top:l,width:s-n,height:c-l}},e.prototype.translate=function(e,a){if(0!==e||0!==a){var i=t(e,a);this.matrix=o(this.matrix,i),this._inverse=null}},e.prototype.scale=function(e,t){if(1!==e||1!==t){var i=a(e,t);this.matrix=o(this.matrix,i),this._inverse=null}},e.prototype.rotate=function(e){if(0!==e){var t=i(e);this.matrix=o(this.matrix,t),this._inverse=null}},e.prototype.add=function(e){e&&(this.matrix=o(this.matrix,e.matrix),this._inverse=null)},e.prototype.getInverse=function(){return this._inverse||(this._inverse=new e(r(this.matrix))),this._inverse},e})();e.Transform=n,e.createTranslateMatrix=t,e.createScaleMatrix=a,e.createRotationMatrix=i,e.createInverseMatrix=r})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a,i=jsCommon.Color,r=e.data.DataRoleHelper;!(function(a){function o(e,t){if(_.isEmpty(t))return void e.pushInstance({selector:null,properties:{show:!1,lineColor:a.defaults.lineColor,transparency:a.defaults.transparency,style:a.defaults.lineStyle,combineSeries:a.defaults.combineSeries},objectName:d});var i=t[0],r={};r.show=i.show,r.displayName=i.displayName,i.combineSeries&&(r.lineColor=i.lineColor),r.transparency=i.transparency,r.style=i.style,r.combineSeries=i.combineSeries,r.useHighlightValues=i.useHighlightValues,e.pushInstance({selector:null,properties:r,objectName:d})}function n(e){return r.hasRoleInDataView(e,"regression.X")}function s(i,r,o,n){if(i&&i.categorical){var s=i.categorical;if(!_.isEmpty(s.categories)&&!_.isEmpty(s.values)){var c=s.categories[0].values,p=s.values.grouped();if(c&&p){var h=e.DataViewObjects.getObject(i.metadata.objects,d,{}),g=e.DataViewObject.getValue(h,u.show,!1),m=e.DataViewObject.getValue(h,u.displayName),y=e.DataViewObject.getValue(h,u.lineColor),f=e.DataViewObject.getValue(h,u.transparency,a.defaults.transparency),v=e.DataViewObject.getValue(h,u.style,a.defaults.lineStyle),b=e.DataViewObject.getValue(h,u.combineSeries,a.defaults.combineSeries),C=e.DataViewObject.getValue(h,u.useHighlightValues,a.defaults.useHighlightValues),S=e.DataViewObjects.getValue(s.values[0].source.objects,t.lineChartProps.dataPoint.fill);S&&(y=S);for(var x=r.metadata.objects,w=e.DataViewObjects.getFillColor(x,{objectName:"dataPoint",propertyName:"defaultColor"}),P=new t.ColorHelper(n,{objectName:"dataPoint",propertyName:"fill"},w),D=[],T=0;T<p.length;T++){for(var V=p[T],L=[],N=0;N<c.length;N++){var M=t.AxisHelper.normalizeNonFiniteNumber(c[N]),A=V.values[0],R=void 0;R=C&&A.highlights?A.highlights:A.values;var F=t.AxisHelper.normalizeNonFiniteNumber(R[N]);null!=M&&null!=F&&L.push({x:M,y:F})}var O=void 0;if(b)O=y||a.defaults.lineColor;else if(r.categorical.values.source){var I=r.categorical.values.grouped(),H=P.getColorForSeriesValue(I[T].objects,r.categorical.values.identityFields,V.name);H=l(H),O={solid:{color:H}}}else{var j=r.categorical.values[T],H=P.getColorForMeasure(j.source.objects,V.name);H=l(H),O={solid:{color:H}}}D.push({points:L,show:g,displayName:m,lineColor:O,transparency:f,style:v,combineSeries:b,useHighlightValues:C,y2Axis:o})}return D}}}}function l(e){var t=i.parseColorString(e);return t=i.darken(t,20),i.rgbString(t)}function c(e,a,i,r){var o=a.select(h.selector);o.empty()&&(o=a.append("svg").classed(h.class,!0)),o.attr({height:r.height,width:r.width});var n=o.selectAll(p.selector).data(e||[]);n.enter().append("path").classed(p.class,!0),n.attr("d",(function(e){var t=i.x.scale,a=e.y2Axis&&i.y2?i.y2.scale:i.y1.scale,r=d3.svg.line().x((function(e){return t(e.x)})).y((function(e){return a(e.y)}));return r(_.filter(e.points,(function(e){return null!=e.x&&null!=e.y})))})),n.each((function(e){var a=d3.select(this),i={};i.stroke=e.lineColor.solid.color,null!=e.transparency&&(i["stroke-opacity"]=(100-e.transparency)/100),e.style===t.lineStyle.dashed?i["stroke-dasharray"]="5, 5":e.style===t.lineStyle.dotted?(i["stroke-dasharray"]="1, 5",i["stroke-linecap"]="round"):e.style===t.lineStyle.solid&&(i["stroke-dasharray"]=null,i["stroke-linecap"]=null),a.style(i)})),n.exit().remove()}var u;!(function(e){e.show="show",e.displayName="displayName",e.lineColor="lineColor",e.transparency="transparency",e.style="style",e.combineSeries="combineSeries",e.useHighlightValues="useHighlightValues"})(u||(u={}));var d="trend";a.defaults={lineColor:{solid:{color:"#000"}},lineStyle:t.lineStyle.dashed,transparency:0,combineSeries:!0,useHighlightValues:!0};var p=jsCommon.CssConstants.createClassAndSelector("trend-line"),h=jsCommon.CssConstants.createClassAndSelector("trend-line-layer");a.enumerateObjectInstances=o,a.isDataViewForRegression=n,a.readDataView=s,a.darkenTrendLineColor=l,a.render=c})(a=t.TrendLineHelper||(t.TrendLineHelper={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(e){return e.is(":visible")}e.partiallyVisible=t})(t=e.visibilityHelper||(e.visibilityHelper={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t,a=e.data.Selector;!(function(e){function t(e,t){return e=e||null,t=t||null,e===t||!e==!t&&(!!a.equals(e.selector,t.selector)&&_.isEqual(e.objects,t.objects))}e.equals=t})(t=e.VisualObjectRepetition||(e.VisualObjectRepetition={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a,i=jsCommon.CssConstants.createClassAndSelector,r=e.data.DataRoleHelper;!(function(a){function o(e,t){var i;if(_.isEmpty(t)||(i=t[0]),!i)return void e.pushInstance({selector:{id:"0"},properties:{show:!1,lineColor:a.defaults.lineColor,style:a.defaults.style,confidenceBandStyle:a.defaults.confidenceBandStyle,transparency:a.defaults.transparency},objectName:a.forecastObjectName});var r=(o={},o[u.show]=i.show,o[u.displayName]=i.displayName,o[u.lineColor]=i.lineColor,o[u.style]=i.style,o[u.confidenceBandStyle]=i.confidenceBandStyle,o[u.transparency]=i.transparency,o);e.pushInstance({selector:i.selector,properties:r,objectName:a.forecastObjectName});var o}function n(e){if(!e||!e.categorical||!e.categorical.values)return!1;for(var t=e.categorical.values.grouped(),a=0,i=t;a<i.length;a++){var o=i[a],n=_.any(o.values,(function(e){return r.hasRoleInValueColumn(e,"forecast.ForecastValue")}));if(n)return!0}return!1}function s(i,o,n){if(!(i&&i.categorical&&o&&o.categorical))return[];var s=i.categorical;if(_.isEmpty(s.categories)||_.isEmpty(s.values))return[];var c=t.CartesianChart.getScalarKeys(s.categories[0]),d=c?_.map(c.values,(function(e){return e.min})):s.categories[0].values,p=s.values.grouped();if(_.isEmpty(d)||_.isEmpty(p))return[];var h=r.getMeasureIndexOfRole(p,a.forecastValueRole),g=r.getMeasureIndexOfRole(p,a.forecastConfidenceHighBoundRole),m=r.getMeasureIndexOfRole(p,a.forecastConfidenceLowBoundRole),y=[],f=l(o),v=0;for(var b in f){var C=f[b];for(var S in C){for(var x=C[S],w=e.DataViewObject.getValue(x,u.show,!1),P=e.DataViewObject.getValue(x,u.displayName),D=e.DataViewObject.getValue(x,u.lineColor,a.defaults.lineColor),T=e.DataViewObject.getValue(x,u.confidenceBandStyle,a.defaults.confidenceBandStyle),V=e.DataViewObject.getValue(x,u.transparency,a.defaults.transparency),L=e.DataViewObject.getValue(x,u.style,a.defaults.style),N=new t.ColorHelper(n,{objectName:"dataPoint",propertyName:"fill"},a.defaults.lineColor.solid.color),M=p[v],A=[],R=M.values[h].highlights?M.values[h].highlights:M.values[h].values,F=M.values[g].highlights?M.values[g].highlights:M.values[g].values,O=M.values[m].highlights?M.values[m].highlights:M.values[m].values,I=0;I<d.length;I++){var H=t.AxisHelper.normalizeNonFiniteNumber(d[I]),j=t.AxisHelper.normalizeNonFiniteNumber(R[I]);if(null!=H&&null!=j){var z=t.AxisHelper.normalizeNonFiniteNumber(F[I]),k=t.AxisHelper.normalizeNonFiniteNumber(O[I]);A.push({point:{x:H,y:j},upperBound:{x:H,y:z},lowerBound:{x:H,y:k}})}}var G=void 0;if(D)G=D;else if(o.categorical.values.source){var E=o.categorical.values.grouped(),W=N.getColorForSeriesValue(E[v].objects,o.categorical.values.identityFields,M.name);G={solid:{color:W}}}else{var B=o.categorical.values[v],W=N.getColorForMeasure(B.source.objects,M.name);G={solid:{color:W}}}y.push({selector:{id:S,metadata:b},points:A,show:w,displayName:P,lineColor:G,confidenceBandStyle:T,transparency:V,style:L}),v++}}return y}function l(t){var i=[];if(t&&t.categorical&&t.categorical.values){var r=_.first(t.categorical.values.grouped());if(r)for(var o=0,n=r.values;o<n.length;o++){var s=n[o],l=s.source.queryName,c=e.DataViewObjects.getUserDefinedObjects(s.source.objects,a.forecastObjectName);i[l]=c}}return i}function c(e,a,i,r,o,n){var s=a.select(h.selector);s.empty()&&(s=a.insert("g",":first-child").classed(h.class,!0));var l=s.selectAll(p.selector).data(e||[]);l.enter().insert("path",":first-child").classed(p.class,!0),l.transition().ease("linear").duration(n).attr("d",(function(e){for(var t=d3.svg.line().x((function(e){return i(e.x)})).y((function(e){return r(e.y)})),a=[],o=0,n=e.points.slice().reverse();o<n.length;o++){var s=n[o];a.push({x:s.lowerBound.x,y:s.lowerBound.y})}for(var l=0,c=e.points;l<c.length;l++){var s=c[l];a.push({x:s.upperBound.x,y:s.upperBound.y})}return t(a)})),l.each((function(e){var a=d3.select(this),i={},r=(100-e.transparency)/100;i["fill-opacity"]=r,i["stroke-opacity"]=r,e.confidenceBandStyle===t.confidenceBandStyle.fill?(i.stroke="transparent",i.fill=e.lineColor.solid.color):e.confidenceBandStyle===t.confidenceBandStyle.line?(i.stroke=e.lineColor.solid.color,i.fill="transparent"):e.confidenceBandStyle===t.confidenceBandStyle.none&&(i.stroke="transparent",i.fill="transparent"),a.style(i)})),l.exit().remove();var c=s.selectAll(d.selector).data(e||[]);c.enter().append("path").classed(d.class,!0),c.transition().ease("linear").duration(n).attr("d",(function(e){var t=d3.svg.line().x((function(e){return i(e.point.x)})).y((function(e){return r(e.point.y)}));return t(e.points)})),c.each((function(e){var a=d3.select(this),i={};i.stroke=e.lineColor.solid.color,i.fill="transparent",e.style===t.lineStyle.dashed?i["stroke-dasharray"]="5, 5":e.style===t.lineStyle.dotted?(i["stroke-dasharray"]="1, 5",i["stroke-linecap"]="round"):e.style===t.lineStyle.solid&&(i["stroke-dasharray"]=null,i["stroke-linecap"]=null),a.style(i)})),c.exit().remove()}var u;!(function(e){e.show="show",e.displayName="displayName",e.lineColor="lineColor",e.confidenceBandStyle="confidenceBandStyle",e.transparency="transparency",e.style="style"})(u||(u={})),a.forecastObjectName="forecast",a.forecastValueRole="forecast.ForecastValue",a.forecastConfidenceHighBoundRole="forecast.ConfidenceHighBound",a.forecastConfidenceLowBoundRole="forecast.ConfidenceLowBound",a.defaults={lineColor:{solid:{color:"#000"}},displayName:"",confidenceBandStyle:t.confidenceBandStyle.fill,transparency:80,style:t.lineStyle.solid},a.quarterHierarchyLevelPrefixResorceKey="Visual_Quarter_Abbreviated";var d=i("forecast-line"),p=i("forecast-error-range"),h=i("forecast-line-layer");a.enumerateObjectInstances=o,a.isDataViewForForecast=n,a.readDataView=s,a.render=c})(a=t.ForecastHelper||(t.ForecastHelper={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(a){function i(t){var a;switch(t.dateTimeUnit){case e.DateTimeUnit.Day:a=r(t);break;case e.DateTimeUnit.Week:a=t.calendarPeriod?n(t):o(t);break;case e.DateTimeUnit.Month:a=t.calendarPeriod?l(t):s(t);break;case e.DateTimeUnit.Year:a=t.calendarPeriod?u(t):c(t)}return a}function r(e){var a,i,r={min:null,max:null};return e.relativeQualifier===t.relativeSlicerRelativeQualifier.current?(a=e.date,i=e.date):e.relativeQualifier===t.relativeSlicerRelativeQualifier.next?(a=new Date(e.date.getFullYear(),e.date.getMonth(),e.date.getDate()+1),i=new Date(e.date.getFullYear(),e.date.getMonth(),e.date.getDate()+e.duration)):(i=new Date(e.date.getFullYear(),e.date.getMonth(),e.date.getDate()-1),a=new Date(e.date.getFullYear(),e.date.getMonth(),e.date.getDate()+e.duration)),r.min=a,r.max=i,r}function o(e){var a,i,r={min:null,max:null};if(e.relativeQualifier===t.relativeSlicerRelativeQualifier.current){var o=e.date.getDay();a=new Date(e.date.getFullYear(),e.date.getMonth(),e.date.getDate()-o),i=new Date(e.date.getFullYear(),e.date.getMonth(),e.date.getDate()+(6-o))}else e.relativeQualifier===t.relativeSlicerRelativeQualifier.next?(a=e.date,e.includeToday||a.setDate(a.getDate()+1),i=new Date(a.getFullYear(),a.getMonth(),a.getDate()+7*e.duration-1)):(i=e.date,e.includeToday||i.setDate(i.getDate()-1),a=new Date(i.getFullYear(),i.getMonth(),i.getDate()+7*e.duration+1));return r.min=a,r.max=i,r}function n(e){var a,i,r={min:null,max:null};if(e.relativeQualifier===t.relativeSlicerRelativeQualifier.current){var o=e.date.getDay();a=new Date(e.date.getFullYear(),e.date.getMonth(),e.date.getDate()-o),i=new Date(e.date.getFullYear(),e.date.getMonth(),e.date.getDate()+(6-o))}else if(e.relativeQualifier===t.relativeSlicerRelativeQualifier.next){var n=new Date(e.date.getFullYear(),e.date.getMonth(),e.date.getDate()+7),s=n.getDay();a=new Date(n.getFullYear(),n.getMonth(),n.getDate()-s),i=new Date(a.getFullYear(),a.getMonth(),a.getDate()+7*e.duration-1)}else{var l=new Date(e.date.getFullYear(),e.date.getMonth(),e.date.getDate()-7),c=l.getDay();i=new Date(l.getFullYear(),l.getMonth(),l.getDate()+(7-c-1)),a=new Date(i.getFullYear(),i.getMonth(),i.getDate()+7*e.duration+1)}return r.min=a,r.max=i,r}function s(e){var a,i,r={min:null,max:null};return e.relativeQualifier===t.relativeSlicerRelativeQualifier.current?(a=new Date(e.date.getFullYear(),e.date.getMonth(),1),i=new Date(e.date.getFullYear(),e.date.getMonth()+1,0)):e.relativeQualifier===t.relativeSlicerRelativeQualifier.next?(a=e.date,e.includeToday||a.setDate(a.getDate()+1),i=new Date(a.getFullYear(),a.getMonth()+e.duration,a.getDate()-1)):(i=e.date,e.includeToday||i.setDate(i.getDate()-1),a=new Date(i.getFullYear(),i.getMonth()+e.duration,i.getDate()+1)),r.min=a,r.max=i,r}function l(e){var a,i,r={min:null,max:null};return e.relativeQualifier===t.relativeSlicerRelativeQualifier.current?(a=new Date(e.date.getFullYear(),e.date.getMonth(),1),i=new Date(e.date.getFullYear(),e.date.getMonth()+1,0)):e.relativeQualifier===t.relativeSlicerRelativeQualifier.next?(a=new Date(e.date.getFullYear(),e.date.getMonth()+1,1),i=new Date(e.date.getFullYear(),e.date.getMonth()+1+e.duration,0)):(i=new Date(e.date.getFullYear(),e.date.getMonth(),0),a=new Date(i.getFullYear(),e.date.getMonth()+e.duration,1)),r.min=a,r.max=i,r}function c(e){var a,i,r={min:null,max:null};return e.relativeQualifier===t.relativeSlicerRelativeQualifier.current?(a=new Date(e.date.getFullYear(),0,1),i=new Date(e.date.getFullYear(),11,31)):e.relativeQualifier===t.relativeSlicerRelativeQualifier.next?(a=e.date,e.includeToday||a.setDate(a.getDate()+1),i=new Date(a.getFullYear()+e.duration,a.getMonth(),a.getDate()-1)):(i=e.date,e.includeToday||i.setDate(i.getDate()-1),a=new Date(i.getFullYear()+e.duration,i.getMonth(),i.getDate()+1)),r.min=a,r.max=i,r}function u(e){var a,i,r={min:null,max:null};return e.relativeQualifier===t.relativeSlicerRelativeQualifier.current?(a=new Date(e.date.getFullYear(),0,1),i=new Date(e.date.getFullYear(),11,31)):e.relativeQualifier===t.relativeSlicerRelativeQualifier.next?(a=new Date(e.date.getFullYear()+1,0,1),i=new Date(e.date.getFullYear()+e.duration,11,31)):(i=new Date(e.date.getFullYear()-1,11,31),a=new Date(e.date.getFullYear()+e.duration,0,1)),r.min=a,r.max=i,r}a.getDateRange=i})(a=t.RelativeSlicerDateRangeHelper||(t.RelativeSlicerDateRangeHelper={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=jsCommon.PixelConverter,i=1,r=0,o="#00B8AA",n="#666666",s=(function(){function s(){}return s.convert=function(e,a){var i=e.columns,r=e.objects.getStaticObjects(),s=i.getValueMetadataColumn(t.gaugeRoleNames.y),l=this.parseGaugeData(e),c=this.convertDataLabelSettings(r,"labels"),u=this.convertDataLabelSettings(r,"target"),d=a&&a.colorPalette.dataColors.getAllColors(),p=d&&d.length>=1&&d[0].value||o,h=d&&d.length>=2&&d[1].value||n;return{maxLabel:this.createLabel(l.max,i.getValueMetadataColumn(t.gaugeRoleNames.maxValue),c,s),minLabel:this.createLabel(l.min,i.getValueMetadataColumn(t.gaugeRoleNames.minValue),c,s,l.max),target:{label:this.createLabel(l.target,i.getValueMetadataColumn(t.gaugeRoleNames.targetValue),u,s),ratio:this.getTargetRatio(l)},calloutLabel:this.createLabel(l.value,s,this.convertDataLabelSettings(r,"calloutValue"),s),tooltipInfo:l.tooltipItems,ratio:this.getValueRatio(l),dataPointSettings:this.convertDataPointSettings(r,l,p,h)}},s.parseGaugeData=function(e){var a=e.columns,o=e.objects.getStaticObjects(),n=a.getValueMetadataColumn(t.gaugeRoleNames.y),s=o?o.axis:null,l=e.data.hasValues(t.gaugeRoleNames.y),c=e.data.hasValues(t.gaugeRoleNames.maxValue),u=e.data.hasValues(t.gaugeRoleNames.minValue),d=0,p={max:null,min:null,target:null,value:null,tooltipItems:[]};if(l){p.value=e.data.getValue(t.gaugeRoleNames.y,d);var h=t.converterHelper.formatFromMetadataColumn(p.value,n,this.formatStringProp,!1);p.tooltipItems.push({displayName:e.data.getValueDisplayName(t.gaugeRoleNames.y),value:h})}if(e.data.hasValues(t.gaugeRoleNames.targetValue)){var g=a.getValueMetadataColumn(t.gaugeRoleNames.targetValue);p.target=e.data.getValue(t.gaugeRoleNames.targetValue,d);var h=t.converterHelper.formatFromMetadataColumn(p.target,g,this.formatStringProp,!1);p.tooltipItems.push({displayName:e.data.getValueDisplayName(t.gaugeRoleNames.targetValue),value:h})}else s&&(p.target=s.target);if(c)p.max=e.data.getValue(t.gaugeRoleNames.maxValue,d);else if(s&&null!=s.max)p.max=s.max;else if(p.max=i,l&&p.value&&0!==p.value){var m=!1;if(n){var y=t.valueFormatter.getFormatString(n,this.formatStringProp,!0);null!=y&&(m=t.valueFormatter.getFormatMetadata(y).hasPercent)}m||(p.max=p.value<0?r:2*p.value)}return u?p.min=e.data.getValue(t.gaugeRoleNames.minValue,d):s&&null!=s.min?p.min=s.min:(p.min=r,l&&null!=p.value&&p.value<0&&(p.min=2*p.value)),t.TooltipBuilder.addTooltipMeasures(e,p.tooltipItems,d),p},s.createLabel=function(i,r,o,n,s){var l={fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:a.fromPoint(o.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},c=this.getFormatter(o,r,n,s||i);return l.text=c.format(i),{value:i,requiredSpace:{width:e.TextMeasurementService.measureSvgTextWidth(l),height:e.TextMeasurementService.estimateSvgTextHeight(l)},text:l.text,formatter:c,settings:o}},s.getFormatter=function(a,i,r,o){var n=0===a.displayUnits?o:null;i&&i.objects&&!_.isEmpty(e.DataViewObjects.getValue(i.objects,this.formatStringProp))||(i=r);var s=t.valueFormatter.getFormatString(i,this.formatStringProp),l=t.dataLabelUtils.getLabelPrecision(a.precision,s),c=t.dataLabelUtils.getOptionsForLabelFormatter(a,s,n,l);return c.formatSingleValues=!(a.displayUnits>0),0===a.displayUnits&&(c.value=n),t.valueFormatter.create(c)},s.getValueRatio=function(e){if(!_.isNumber(e.value)||!this.isValid(e)||e.value<=e.min)return 0;if(e.value>=e.max)return 1;var t=e.max-e.min,a=(e.value-e.min)/t;return a},s.isValid=function(e){return _.isNumber(e.min)&&_.isNumber(e.max)&&e.min<=e.max},s.getTargetRatio=function(e){if(!this.isValid(e)||!_.isNumber(e.target))return-1;var t=e.max-e.min;return 0!==t?(e.target-e.min)/t:0},s.convertDataLabelSettings=function(e,a){var i=t.dataLabelUtils.getDefaultGaugeLabelSettings();if(e){var r=e[a];t.dataLabelUtils.updateLabelSettingsFromLabelsObject(r,i)}return i},s.convertDataPointSettings=function(a,i,r,o){return{fillColor:e.DataViewObjects.getFillColor(a,t.gaugeProps.dataPoint.fill,r),targetColor:e.DataViewObjects.getFillColor(a,t.gaugeProps.dataPoint.target,o)}},s})();s.formatStringProp={objectName:"general",propertyName:"formatString"},t.GaugeConverter=s})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a,i=e.data.DefaultSQExprVisitor,r=e.data.SemanticFilter,o=jsCommon.UrlUtils;!(function(a){function n(){return{general:{outlineWeight:1,outlineColor:"#808080"},slicerText:{color:"#666666",outline:t.outline.none,textSize:10},selection:{selectAllCheckboxEnabled:!1,singleSelect:!0},search:{enabled:!1}}}function s(a,i,o,n){if(a&&a.categorical&&!_.isEmpty(a.categorical.categories)){var s=a.categorical.categories[0].identityFields;if(s){var c=a.metadata&&a.metadata.objects&&e.DataViewObjects.getValue(a.metadata.objects,t.slicerProps.filterPropertyIdentifier),u=n.analyzeFilter({dataView:a,defaultValuePropertyId:t.slicerProps.defaultValue,filter:c,fieldSQExprs:s});if(u){var d=u.filter;if(d&&!r.isSameFilter(d,c)){o.handleClearSelection();var p=t.slicerProps.filterPropertyIdentifier,h={};h[p.propertyName]=u.filter;var g={objectName:p.objectName,selector:void 0,properties:h},m={merge:[g]};n.persistProperties(m)}var y=l(u,a.metadata,a.categorical,i,o,n);return y}}}}function l(a,i,n,s,l,p){var h=l&&l.isSelectionModeInverted(),g=a.selectedIdentities,m=!_.isEmpty(g)||h===!0;!h&&a.filter&&(h=a.isNotFilter),l&&(l.setSelectionModeInverted(h),l.setDefaultValueMode(r.isDefaultFilter(a.filter)));for(var y=n.categories[0],f=y&&y.values?y.values.length:0,v=[],b=t.valueFormatter.getFormatString(y.source,t.slicerProps.formatString),C=0,S=y.objects,x=i&&!_.isEmpty(i.columns)&&t.converterHelper.isImageUrlColumn(i.columns[0]),w=[],P=0;P<f;P++){var D=y.identity&&y.identity[P],T=y.values&&y.values[P],V=void 0;if(S){var L=S[P];V=e.DataViewObjects.getValue(L,t.slicerProps.general.count,V)}var N=!!m&&t.SlicerUtil.tryRemoveValueFromRetainedList(D,g),M=t.valueFormatter.format(T,b),A=x===!0&&o.isValidImageUrl(M),R={value:M,tooltip:M,identity:t.SelectionIdBuilder.builder().withCategory(y,P).createSelectionId(),selected:N,count:V,isImage:A};if(N){var F={displayName:M,identity:D};w.push(F)}v.push(R),R.selected&&C++}if(_.isEmpty(w)||p.setIdentityDisplayNames(w),m&&!_.isEmpty(g)){var O=p.getIdentityDisplayNames(g);if(!_.isEmpty(O))for(var I=0,H=O;I<H.length;I++){var j=H[I],M=t.valueFormatter.format(j.displayName,b),z={value:M,tooltip:M,identity:t.SelectionIdBuilder.builder().withCategoryIdentity(y,j.identity).createSelectionId(),selected:!0,count:null!=S?0:void 0};v.push(z),C++}}var k=u(i),G=d(i);G.selection.selectAllCheckboxEnabled&&_.isEmpty(k)&&v.unshift({value:s,tooltip:s,identity:t.SelectionId.createWithMeasure(s),selected:!!h&&0===C,isSelectAllDataPoint:!0,count:void 0});var E={categorySourceName:y.source.displayName,slicerSettings:G,slicerDataPoints:v,hasSelectionOverride:m,defaultValue:a.defaultValue,searchKey:k,restatement:c(p,w,h)};return E}function c(e,t,a){return _.isEmpty(t)?e.getLocalizedString("Slicer_Restatement_All"):1!==t.length||a?e.getLocalizedString("Slicer_Restatement_Multiple"):t[0].displayName}function u(a){var i=e.DataViewObjects.getValue(a.objects,t.slicerProps.selfFilterPropertyIdentifier,void 0);if(!i)return"";var r=i.conditions(),o=r[0];if(o){var n=new p;return o.accept(n),n.getValueForField()}}function d(i){var r=a.DefaultSlicerProperties(),o=i.objects,n=i.columns&&_.some(i.columns,(function(e){return e.discourageAggregationAcrossGroups}));if(o){r.slicerText.color=e.DataViewObjects.getFillColor(o,t.slicerProps.items.fontColor,r.slicerText.color),
r.general.outlineWeight=e.DataViewObjects.getValue(o,t.slicerProps.general.outlineWeight,r.general.outlineWeight),r.general.outlineColor=e.DataViewObjects.getFillColor(o,t.slicerProps.general.outlineColor,r.general.outlineColor);var s=e.DataViewObjects.getFillColor(o,t.slicerProps.items.background);s&&(r.slicerText.background=s),r.slicerText.outline=e.DataViewObjects.getValue(o,t.slicerProps.items.outline,r.slicerText.outline),r.slicerText.textSize=e.DataViewObjects.getValue(o,t.slicerProps.items.textSize,r.slicerText.textSize),r.selection.selectAllCheckboxEnabled=!n&&e.DataViewObjects.getValue(o,t.slicerProps.selection.selectAllCheckboxEnabled,r.selection.selectAllCheckboxEnabled),r.selection.singleSelect=n||e.DataViewObjects.getValue(o,t.slicerProps.selection.singleSelect,r.selection.singleSelect),r.search.enabled=e.DataViewObjects.getValue(o,t.slicerProps.general.selfFilterEnabled,r.search.enabled)}return r}a.DefaultSlicerProperties=n,a.convert=s,a.getRestatement=c;var p=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.visitConstant=function(e){e.type&&e.type.text&&(this.value=e.value)},t.prototype.visitContains=function(e){e.left.accept(this),e.right.accept(this)},t.prototype.visitColumnRef=function(e){this.fieldExpr=e},t.prototype.visitDefault=function(e){this.value=void 0,this.fieldExpr=void 0},t.prototype.getValueForField=function(){return this.fieldExpr&&this.value},t})(i)})(a=t.DataConversion||(t.DataConversion={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t,a=e.visuals.shapes;!(function(e){e[e.None=0]="None",e[e.VerticalBottomTop=1]="VerticalBottomTop",e[e.VerticalTopBottom=2]="VerticalTopBottom",e[e.HorizontalLeftRight=3]="HorizontalLeftRight",e[e.HorizontalRightLeft=4]="HorizontalRightLeft"})(t=e.RectOrientation||(e.RectOrientation={}));var i;!(function(e){e[e.Allowed=0]="Allowed",e[e.Disallowed=1]="Disallowed",e[e.Partial=2]="Partial"})(i=e.OutsidePlacement||(e.OutsidePlacement={}));var r=(function(){function r(){this.movingStep=3,this.hideOverlapped=!0,this.defaultDataLabelSettings={anchorMargin:r.DefaultAnchorMargin,anchorRectOrientation:t.None,contentPosition:128,outsidePlacement:i.Disallowed,maximumMovingDistance:r.DefaultMaximumMovingDistance,minimumMovingDistance:r.DefaultMinimumMovingDistance,validContentPositions:128,opacity:1}}return Object.defineProperty(r.prototype,"defaultSettings",{get:function(){return this.defaultDataLabelSettings},enumerable:!0,configurable:!0}),r.prototype.hideCollidedLabels=function(e,t,a,i){void 0===i&&(i=!1);var n=new o(e,t,a),s=[],l={x:0,y:0};i&&(l.x=e.width/2,l.y=e.height/2);for(var c=0,u=t.length;c<u;c++)if(a.filter(t[c])){var d=this.getLabelInfo(t[c]);d.anchorPoint={x:a.labelLayout.x(t[c])+l.x,y:a.labelLayout.y(t[c])+l.y};var p=this.calculateContentPosition(d,d.contentPosition,t[c].size,d.anchorMargin);r.isValid(p)&&!this.hasCollisions(n,d,p,e)&&(t[c].labelX=p.left-l.x,t[c].labelY=p.top-l.y,n.add(d,p),s.push(t[c]))}return s},r.prototype.getLabelInfo=function(e){var t=this.defaultDataLabelSettings;return e.anchorMargin=void 0!==e.anchorMargin?e.anchorMargin:t.anchorMargin,e.anchorRectOrientation=void 0!==e.anchorRectOrientation?e.anchorRectOrientation:t.anchorRectOrientation,e.contentPosition=void 0!==e.contentPosition?e.contentPosition:t.contentPosition,e.maximumMovingDistance=void 0!==e.maximumMovingDistance?e.maximumMovingDistance:t.maximumMovingDistance,e.minimumMovingDistance=void 0!==e.minimumMovingDistance?e.minimumMovingDistance:t.minimumMovingDistance,e.outsidePlacement=void 0!==e.outsidePlacement?e.outsidePlacement:t.outsidePlacement,e.validContentPositions=void 0!==e.validContentPositions?e.validContentPositions:t.validContentPositions,e.opacity=void 0!==e.opacity?e.opacity:t.opacity,e.maximumMovingDistance+=e.anchorMargin,e},r.prototype.calculateContentPositionFromPoint=function(e,t,a,i){var r={x:0,y:0};if(e){if(void 0!==e.x&&isFinite(e.x))switch(r.x=e.x,t){case 1:case 8:case 64:r.x-=a.width/2;break;case 4:case 32:case 256:r.x+=a.width/2}if(void 0!==e.y&&isFinite(e.y))switch(r.y=e.y,t){case 8:case 16:case 32:r.y-=a.height/2;break;case 4:case 1:case 2:r.y-=a.height}if(void 0!==i&&isFinite(i))switch(t){case 1:r.x-=i,r.y-=i;break;case 8:r.x-=i;break;case 64:r.x-=i,r.y+=i;break;case 2:r.y-=i;break;case 16:break;case 128:r.y+=i;break;case 4:r.x+=i,r.y-=i;break;case 32:r.x+=i;break;case 256:r.x+=i,r.y+=i}}return{left:r.x,top:r.y,width:a.width,height:a.height}},r.prototype.calculateContentPositionFromRect=function(e,t,a,i,r){switch(a){case 512:return this.handleInsideCenterPosition(t,i,e,r);case 2048:return this.handleInsideEndPosition(t,i,e,r);case 1024:return this.handleInsideBasePosition(t,i,e,r);case 8192:return this.handleOutsideEndPosition(t,i,e,r);case 4096:return this.handleOutsideBasePosition(t,i,e,r)}return{left:0,top:0,width:-1,height:-1}},r.prototype.handleInsideCenterPosition=function(e,a,i,r){switch(e){case t.VerticalBottomTop:case t.VerticalTopBottom:return n.middleVertical(a,i,r);case t.HorizontalLeftRight:case t.HorizontalRightLeft:default:return n.middleHorizontal(a,i,r)}},r.prototype.handleInsideEndPosition=function(e,a,i,r){switch(e){case t.VerticalBottomTop:return n.topInside(a,i,r);case t.VerticalTopBottom:return n.bottomInside(a,i,r);case t.HorizontalRightLeft:return n.leftInside(a,i,r);case t.HorizontalLeftRight:default:return n.rightInside(a,i,r)}},r.prototype.handleInsideBasePosition=function(e,a,i,r){switch(e){case t.VerticalBottomTop:return n.bottomInside(a,i,r);case t.VerticalTopBottom:return n.topInside(a,i,r);case t.HorizontalRightLeft:return n.rightInside(a,i,r);case t.HorizontalLeftRight:default:return n.leftInside(a,i,r)}},r.prototype.handleOutsideEndPosition=function(e,a,i,r){switch(e){case t.VerticalBottomTop:return n.topOutside(a,i,r);case t.VerticalTopBottom:return n.bottomOutside(a,i,r);case t.HorizontalRightLeft:return n.leftOutside(a,i,r);case t.HorizontalLeftRight:default:return n.rightOutside(a,i,r)}},r.prototype.handleOutsideBasePosition=function(e,a,i,r){switch(e){case t.VerticalBottomTop:return n.bottomOutside(a,i,r);case t.VerticalTopBottom:return n.topOutside(a,i,r);case t.HorizontalRightLeft:return n.rightOutside(a,i,r);case t.HorizontalLeftRight:default:return n.leftOutside(a,i,r)}},r.prototype.calculateContentPosition=function(e,t,a,i){return 2048!==t&&512!==t&&1024!==t&&4096!==t&&8192!==t?this.calculateContentPositionFromPoint(e.anchorPoint,t,a,i):this.calculateContentPositionFromRect(e.anchorRect,e.anchorRectOrientation,t,a,i)},r.prototype.hasCollisions=function(t,o,n,s){var l=a.Rect;if(t.hasConflict(n))return!0;var c={left:0,top:n.height/2,width:s.width,height:s.height};if(c=l.inflate(c,{left:r.InflateAmount,top:0,right:r.InflateAmount,bottom:0}),c=l.intersect(c,n),l.isEmpty(c))return!0;var u=e.Double.lessWithPrecision;switch(o.outsidePlacement){case i.Disallowed:return u(c.width,n.width)||u(c.height,n.height/2);case i.Partial:return u(c.width,n.width/2)||u(c.height,n.height/4)}return!1},r.isValid=function(e){return!a.Rect.isEmpty(e)&&e.width>0&&e.height>0},r})();r.DefaultAnchorMargin=0,r.DefaultMaximumMovingDistance=12,r.DefaultMinimumMovingDistance=3,r.InflateAmount=5,e.DataLabelManager=r;var o=(function(){function t(a,i,r){this.grid=[],0!==a.width&&0!==a.height||(this.cellSize=a,this.rowCount=this.colCount=0);var o={fontFamily:e.visuals.dataLabelUtils.LabelTextProperties.fontFamily,fontSize:e.visuals.dataLabelUtils.LabelTextProperties.fontSize,fontWeight:e.visuals.dataLabelUtils.LabelTextProperties.fontWeight};this.cellSize={width:0,height:0};for(var n=0,s=i.length;n<s;n++){var l=i[n];l.labeltext=r.labelText(l);var c=e.Prototype.inherit(o);c.text=l.labeltext,c.fontSize=l.data?l.data.labelFontSize:l.labelFontSize?l.labelFontSize:e.visuals.dataLabelUtils.LabelTextProperties.fontSize,l.size={width:e.TextMeasurementService.measureSvgTextWidth(c),height:e.TextMeasurementService.estimateSvgTextHeight(c)};var u=2*l.size.width,d=2*l.size.height;u>this.cellSize.width&&(this.cellSize.width=u),d>this.cellSize.height&&(this.cellSize.height=d)}0===this.cellSize.width&&(this.cellSize.width=a.width),0===this.cellSize.height&&(this.cellSize.height=a.height),this.colCount=this.getGridRowColCount(this.cellSize.width,a.width,t.ARRANGEGRID_MIN_COUNT,t.ARRANGEGRID_MAX_COUNT),this.rowCount=this.getGridRowColCount(this.cellSize.height,a.height,t.ARRANGEGRID_MIN_COUNT,t.ARRANGEGRID_MAX_COUNT),this.cellSize.width=a.width/this.colCount,this.cellSize.height=a.height/this.rowCount;for(var p=this.grid,h=0;h<this.colCount;h++){p[h]=[];for(var g=0;g<this.rowCount;g++)p[h][g]=[]}}return t.prototype.add=function(e,t){for(var a=this.getGridIndexRect(t),i=this.grid,r=a.left;r<a.right;r++)for(var o=a.top;o<a.bottom;o++)i[r][o].push({element:e,rect:t})},t.prototype.hasConflict=function(e){for(var t=this.getGridIndexRect(e),i=this.grid,r=a.Rect.isIntersecting,o=t.left;o<t.right;o++)for(var n=t.top;n<t.bottom;n++)for(var s=0;s<i[o][n].length;s++){var l=i[o][n][s];if(r(l.rect,e))return!0}return!1},t.prototype.getGridRowColCount=function(e,t,a,i){return Math.min(Math.max(Math.ceil(t/e),a),i)},t.prototype.getGridIndexRect=function(e){var t=function(e,t,a){return Math.min(Math.max(e,t),a)};return{left:t(Math.floor(e.left/this.cellSize.width),0,this.colCount),top:t(Math.floor(e.top/this.cellSize.height),0,this.rowCount),right:t(Math.ceil((e.left+e.width)/this.cellSize.width),0,this.colCount),bottom:t(Math.ceil((e.top+e.height)/this.cellSize.height),0,this.rowCount)}},t})();o.ARRANGEGRID_MIN_COUNT=1,o.ARRANGEGRID_MAX_COUNT=100,e.DataLabelArrangeGrid=o;var n;!(function(e){function t(e,t,a){return{left:t.left+t.width/2-e.width/2,top:t.top+a,width:e.width,height:e.height}}function a(e,t,a){return{left:t.left+t.width/2-e.width/2,top:t.top+t.height-e.height-a,width:e.width,height:e.height}}function i(e,t,a){return{left:t.left+t.width-e.width-a,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function r(e,t,a){return{left:t.left+a,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function o(e,t,a){return{left:t.left+t.width/2-e.width/2,top:t.top-e.height-a,width:e.width,height:e.height}}function n(e,t,a){return{left:t.left+t.width/2-e.width/2,top:t.top+t.height+a,width:e.width,height:e.height}}function s(e,t,a){return{left:t.left+t.width+a,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function l(e,t,a){return{left:t.left-e.width-a,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function c(e,t,a){return{left:t.left+t.width/2-e.width/2+a,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function u(e,t,a){return{left:t.left+t.width/2-e.width/2,top:t.top+t.height/2-e.height/2+a,width:e.width,height:e.height}}e.topInside=t,e.bottomInside=a,e.rightInside=i,e.leftInside=r,e.topOutside=o,e.bottomOutside=n,e.rightOutside=s,e.leftOutside=l,e.middleHorizontal=c,e.middleVertical=u})(n||(n={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t=e.visuals.NewDataLabelUtils,a=e.visuals.shapes.Rect,i=e.visuals.shapes,r=(function(){function e(t,a){this.viewport=a;for(var i=0,r=0,o=0,n=t;o<n.length;o++)for(var s=n[o],l=0,c=s.labelDataPoints;l<c.length;l++){var u=c[l],d=u.labelSize;d.width>i&&(i=d.width),d.height>r&&(r=d.height)}0===i&&(i=a.width),0===r&&(r=a.height);var p=this.cellSize={width:i*e.cellSizeMultiplier,height:r*e.cellSizeMultiplier};this.columnCount=e.getCellCount(p.width,a.width,1,100),this.rowCount=e.getCellCount(p.height,a.height,1,100);for(var h=[],g=0,m=this.columnCount;g<m;g++){h[g]=[];for(var y=0,f=this.rowCount;y<f;y++)h[g][y]=[]}this.grid=h}return e.prototype.add=function(e){for(var t=this.getContainingGridSubsection(e),a=t.xMin;a<t.xMax;a++)for(var i=t.yMin;i<t.yMax;i++)this.grid[a][i].push(e)},e.prototype.hasConflict=function(e){return!this.isWithinGridViewport(e)||this.hasCollision(e)},e.prototype.tryPositionInViewport=function(e){if(this.isCloseToGridViewport(e))return this.isWithinGridViewport(e)||(e=this.tryMoveInsideViewport(e)),e&&!this.hasCollision(e)?e:void 0},e.prototype.hasCollision=function(e){for(var t=this.getContainingGridSubsection(e),a=this.grid,r=i.Rect.isIntersecting,o=t.xMin;o<t.xMax;o++)for(var n=t.yMin;n<t.yMax;n++)for(var s=0,l=a[o][n];s<l.length;s++){var c=l[s];if(r(c,e))return!0}return!1},e.prototype.isWithinGridViewport=function(e){return e.left>=0&&e.top>=0&&e.left+e.width<=this.viewport.width&&e.top+e.height<=this.viewport.height},e.prototype.isCloseToGridViewport=function(e){return e.left+e.width>=0-e.width&&e.top+e.height>=-e.height&&e.left<=this.viewport.width+e.width&&e.top<=this.viewport.height+e.height},e.prototype.tryMoveInsideViewport=function(e){var t=a.clone(e),i=this.viewport;if(!(e.width>i.width||e.height>i.height))return e.left<0?t.left=0:e.left+e.width>i.width&&(t.left-=e.left+e.width-i.width),e.top<0?t.top=0:e.top+e.height>i.height&&(t.top-=e.top+e.height-i.height),t},e.prototype.getContainingGridSubsection=function(t){return{xMin:e.bound(Math.floor(t.left/this.cellSize.width),0,this.columnCount),xMax:e.bound(Math.ceil((t.left+t.width)/this.cellSize.width),0,this.columnCount),yMin:e.bound(Math.floor(t.top/this.cellSize.height),0,this.rowCount),yMax:e.bound(Math.ceil((t.top+t.height)/this.cellSize.height),0,this.rowCount)}},e.getCellCount=function(t,a,i,r){return e.bound(Math.ceil(a/t),i,r)},e.bound=function(e,t,a){return Math.max(Math.min(e,a),t)},e})();r.cellSizeMultiplier=2,e.LabelArrangeGrid=r;var o=(function(){function e(t){this.startingOffset=t.startingOffset,this.maximumOffset=t.maximumOffset,null!=t.offsetIterationDelta?this.offsetIterationDelta=t.offsetIterationDelta:this.offsetIterationDelta=e.defaultOffsetIterationDelta,null!=t.horizontalPadding?this.horizontalPadding=t.horizontalPadding:this.horizontalPadding=e.defaultHorizontalPadding,null!=t.verticalPadding?this.verticalPadding=t.verticalPadding:this.verticalPadding=e.defaultVerticalPadding,this.allowLeaderLines=!!t.allowLeaderLines,this.attemptToMoveLabelsIntoViewport=!!t.attemptToMoveLabelsIntoViewport}return e.prototype.layout=function(e,a){for(var i=[],o=0,n=e;o<n.length;o++){for(var s=n[o],l=_.map(s.labelDataPoints,(function(e){return{labelDataPoint:e}})),c=s.labelOrientation,u=0,d=l;u<d.length;u++){var p=d[u],h=p.labelDataPoint;p.hasBeenRendered=!1;var g=h.textSize.width,m=h.textSize.height;0===c&&(g=h.textSize.height,m=h.textSize.width),h.hasBackground?p.labelSize={width:g+2*t.horizontalLabelBackgroundPadding,height:m+2*t.verticalLabelBackgroundPadding}:p.labelSize={width:g,height:m}}i.push({labelDataPoints:l,maxNumberOfLabels:s.maxNumberOfLabels,labelOrientation:s.labelOrientation})}for(var y=[],f=new r(i,a),v=0,b=i;v<b.length;v++){for(var C=b[v],S=C.maxNumberOfLabels,l=_.clone(C.labelDataPoints),x=[],c=C.labelOrientation,w=l.length-1,P=S;w>=0&&P>0;w--){var h=l[w].labelDataPoint;h.isPreferred&&(x.unshift(l.splice(w,1)[0]),P--)}if(x.length>0){var D=this.positionDataLabels(x,a,f,S,c);S-=D.length,y=y.concat(D)}if(l.length>0){var T=this.positionDataLabels(l,a,f,S,c);y=y.concat(T)}}return _.filter(y,(function(e){return e.isVisible}))},e.prototype.positionDataLabels=function(e,t,a,i,r){for(var o,n=[],s=this.offsetIterationDelta,l=this.startingOffset,c=0,u=0;l<=this.maximumOffset&&u<i;){o=this.allowLeaderLines&&l>this.startingOffset;for(var d=0,p=e;d<p.length;d++){var h=p[d],g=h.labelDataPoint;if(!h.hasBeenRendered){var m=void 0;if(m=1===g.parentType?this.tryPositionForRectPositions(h,a,l,c,r):this.tryPositionForPointPositions(h,a,l,o,r),m&&(n.push(m),u++),!(u<i))break}}l+=s,c+=s}return n},e.prototype.tryPositionForRectPositions=function(t,a,i,r,o){for(var s=this,l=t.labelDataPoint,c=function(c,u){var d=7&c;if(!d||n.canFitWithinParent(t,s.horizontalPadding,s.verticalPadding)){var p=e.tryPositionRect(a,c,t,i,r,u);if(p){if(d&&!n.isLabelWithinParent(p,l,s.horizontalPadding,s.verticalPadding))return;return a.add(p),t.hasBeenRendered=!0,{boundingBox:p,text:l.text,tooltip:l.tooltip,isVisible:!0,fill:d?l.insideFill:l.outsideFill,identity:l.identity,key:l.key,fontSize:l.fontSize,selected:!1,hasBackground:!!l.hasBackground,labelOrientation:o}}}},u=0,d=l.parentShape.validPositions;u<d.length;u++){var p=d[u],h=c(p,!1);if(h)return h}if(this.attemptToMoveLabelsIntoViewport)for(var g=0,m=l.parentShape.validPositions;g<m.length;g++){var p=m[g],h=c(p,!0);if(h)return h}return null},e.tryPositionRect=function(e,t,a,i,r,o){var s=i;1&t&&(s=r);var l=n.getLabelRect(a,t,s),c=a.labelDataPoint;if(1!==t||0===c.parentShape.orientation){if(!e.hasConflict(l))return l;if(o)return e.tryPositionInViewport(l)}else{if(!e.hasConflict(l))return l;if(l=n.getLabelRect(a,t,-s),!e.hasConflict(l))return l}return null},e.prototype.tryPositionForPointPositions=function(t,a,i,r,o){for(var n=t.labelDataPoint,l=function(l,c,u){var d=e.tryPositionPoint(a,l,t,i,u);if(d)return a.add(d),t.hasBeenRendered=!0,{boundingBox:d,text:n.text,tooltip:n.tooltip,isVisible:!0,fill:256===l?n.insideFill:n.outsideFill,isInsideParent:256===l,identity:n.identity,key:n.key,fontSize:n.fontSize,selected:!1,leaderLinePoints:r?s.getLabelLeaderLineEndingPoint(d,l,c):null,hasBackground:!!n.hasBackground,labelOrientation:o}},c=n.parentShape,u=c.validPositions,d=0,p=u;d<p.length;d++){var h=p[d],g=l(h,c,!1);if(g)return g}if(this.attemptToMoveLabelsIntoViewport&&!_.isEmpty(u)){var g=l(u[0],c,!0);if(g)return g}return null},e.tryPositionPoint=function(e,t,a,i,r){var o=s.getLabelRect(a.labelSize,a.labelDataPoint.parentShape,t,i);return e.hasConflict(o)?r?e.tryPositionInViewport(o):null:o},e})();o.defaultOffsetIterationDelta=2,o.defaultHorizontalPadding=2,o.defaultVerticalPadding=2,e.LabelLayout=o;var n;!(function(e){function t(t,a,i){var r=t.labelDataPoint,o=r.parentShape;if(null!=o)switch(a){case 1:switch(o.orientation){case 1:case 2:return e.middleVertical(t.labelSize,o.rect,i);case 3:case 4:return e.middleHorizontal(t.labelSize,o.rect,i);case 0:}case 2:switch(o.orientation){case 1:return e.bottomInside(t.labelSize,o.rect,i);case 2:return e.topInside(t.labelSize,o.rect,i);case 3:return e.leftInside(t.labelSize,o.rect,i);case 4:return e.rightInside(t.labelSize,o.rect,i);case 0:}case 4:switch(o.orientation){case 1:return e.topInside(t.labelSize,o.rect,i);case 2:return e.bottomInside(t.labelSize,o.rect,i);case 3:return e.rightInside(t.labelSize,o.rect,i);case 4:return e.leftInside(t.labelSize,o.rect,i);case 0:}case 8:switch(o.orientation){case 1:return e.bottomOutside(t.labelSize,o.rect,i);case 2:return e.topOutside(t.labelSize,o.rect,i);case 3:return e.leftOutside(t.labelSize,o.rect,i);case 4:return e.rightOutside(t.labelSize,o.rect,i);case 0:}case 16:switch(o.orientation){case 1:return e.topOutside(t.labelSize,o.rect,i);case 2:return e.bottomOutside(t.labelSize,o.rect,i);case 3:return e.rightOutside(t.labelSize,o.rect,i);case 4:return e.leftOutside(t.labelSize,o.rect,i);case 0:}}return null}function a(e,t,a){var i=e.labelDataPoint;return e.labelSize.width+2*t<i.parentShape.rect.width||e.labelSize.height+2*a<i.parentShape.rect.height}function r(e,t,a,r){var o=t.parentShape.rect,n=i.Rect.inflate(e,{left:a,right:a,top:r,bottom:r});return i.Rect.containsPoint(o,{x:n.left,y:n.top})&&i.Rect.containsPoint(o,{x:n.left+n.width,y:n.top+n.height})}function o(e,t,a){return{left:t.left+t.width/2-e.width/2,top:t.top+a,width:e.width,height:e.height}}function n(e,t,a){return{left:t.left+t.width/2-e.width/2,top:t.top+t.height-a-e.height,width:e.width,height:e.height}}function s(e,t,a){return{left:t.left+t.width-e.width-a,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function l(e,t,a){return{left:t.left+a,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function c(e,t,a){return{left:t.left+t.width/2-e.width/2,top:t.top-e.height-a,width:e.width,height:e.height}}function u(e,t,a){return{left:t.left+t.width/2-e.width/2,top:t.top+t.height+a,width:e.width,height:e.height}}function d(e,t,a){return{left:t.left+t.width+a,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function p(e,t,a){return{left:t.left-e.width-a,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function h(e,t,a){return{left:t.left+t.width/2-e.width/2+a,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function g(e,t,a){return{left:t.left+t.width/2-e.width/2,top:t.top+t.height/2-e.height/2+a,width:e.width,height:e.height}}e.getLabelRect=t,e.canFitWithinParent=a,e.isLabelWithinParent=r,e.topInside=o,e.bottomInside=n,e.rightInside=s,e.leftInside=l,e.topOutside=c,e.bottomOutside=u,e.rightOutside=d,e.leftOutside=p,e.middleHorizontal=h,e.middleVertical=g})(n=e.DataLabelRectPositioner||(e.DataLabelRectPositioner={}));var s;!(function(e){function t(t,a,i,r){switch(i){case 1:return e.above(t,a.point,a.radius+r);case 2:return e.below(t,a.point,a.radius+r);case 4:return e.left(t,a.point,a.radius+r);case 8:return e.right(t,a.point,a.radius+r);case 32:return e.belowLeft(t,a.point,a.radius+r);case 16:return e.belowRight(t,a.point,a.radius+r);case 128:return e.aboveLeft(t,a.point,a.radius+r);case 64:return e.aboveRight(t,a.point,a.radius+r);case 256:return e.center(t,a.point)}return null}function a(e,t,a){return{left:t.x-e.width/2,top:t.y-a-e.height,width:e.width,height:e.height}}function i(e,t,a){return{left:t.x-e.width/2,top:t.y+a,width:e.width,height:e.height}}function r(e,t,a){return{left:t.x-a-e.width,top:t.y-e.height/2,width:e.width,height:e.height}}function o(e,t,a){return{left:t.x+a,top:t.y-e.height/2,width:e.width,height:e.height}}function n(t,a,i){return{left:a.x-e.sin45*i-t.width,top:a.y+e.cos45*i,width:t.width,height:t.height}}function s(t,a,i){return{left:a.x+e.sin45*i,top:a.y+e.cos45*i,width:t.width,height:t.height}}function l(t,a,i){return{left:a.x-e.sin45*i-t.width,top:a.y-e.cos45*i-t.height,width:t.width,height:t.height}}function c(t,a,i){return{left:a.x+e.sin45*i,top:a.y-e.cos45*i-t.height,width:t.width,height:t.height}}function u(e,t){return{left:t.x-e.width/2,top:t.y-e.height/2,width:e.width,height:e.height}}function d(e,t,a){var i=e.left,r=e.top;switch(t){case 1:i+=e.width/2,r+=e.height;break;case 2:i+=e.width/2;break;case 4:i+=e.width,r+=2*e.height/3;break;case 8:r+=2*e.height/3;break;case 32:i+=e.width,r+=e.height/2;break;case 16:r+=e.height/2;break;case 128:i+=e.width,r+=e.height;break;case 64:r+=e.height}return[[a.point.x,a.point.y],[i,r]]}e.cos45=Math.cos(45),e.sin45=Math.sin(45),e.getLabelRect=t,e.above=a,e.below=i,e.left=r,e.right=o,e.belowLeft=n,e.belowRight=s,e.aboveLeft=l,e.aboveRight=c,e.center=u,e.getLabelLeaderLineEndingPoint=d})(s=e.DataLabelPointPositioner||(e.DataLabelPointPositioner={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t=e.visuals.NewDataLabelUtils,a=e.visuals.labelStyle,i=e.visuals.DonutLabelUtils,r=jsCommon.EnumExtensions,o=a.labelStyleFlagEnum,n=[a.categoryAndDataAndPercent,a.categoryAndData,a.categoryAndPercent,a.dataAndPercent],s="",l=(function(){function l(t,a){this.startingOffset=t.startingOffset,this.maximumOffset=t.maximumOffset,null!=t.offsetIterationDelta&&(this.offsetIterationDelta=t.offsetIterationDelta),this.donutChartProperties=a,this.center={x:a.viewport.width/2,y:a.viewport.height/2},this.outerRadius=this.donutChartProperties.radius*this.donutChartProperties.outerArcRadiusRatio,this.innerRadius=this.donutChartProperties.radius/2*this.donutChartProperties.innerArcRadiusRatio;var i=a.dataLabelsSettings.fontSize;this.additionalParenthesesWidth=e.TextMeasurementService.measureSvgTextWidth(this.getTextProperties("()",i)),this.additionalSpaceWidth=e.TextMeasurementService.measureSvgTextWidth(this.getTextProperties(" ",i)),this.ellipsisWidth=e.TextMeasurementService.measureSvgTextWidth(this.getTextProperties(s,i))}return l.prototype.getTextProperties=function(e,a,i,r){return void 0===i&&(i=t.LabelTextProperties.fontFamily),void 0===r&&(r=t.LabelTextProperties.fontWeight),{text:e,fontFamily:i,fontSize:jsCommon.PixelConverter.fromPoint(a),fontWeight:r}},l.prototype.layout=function(t){for(var a=[],i=0,r=t;i<r.length;i++){var o=r[i];a.push({labelDataPoint:o,hasBeenRendered:!1,labelSize:o.textSize})}for(var n=[],s=[],l=this.donutChartProperties.viewport,c={labelDataPoints:a,maxNumberOfLabels:t.length},u=new e.LabelArrangeGrid([c],l),d=a.length-1;d>=0;d--){var p=a[d].labelDataPoint;if(p.isPreferred){var h=a.splice(d,1);s=h.concat(s)}}if(s.length>0&&(n=this.positionLabels(s,u)),t.length>0){var g=this.positionLabels(a,u);n=n.concat(g)}return _.filter(n,(function(e){return e.isVisible}))},l.prototype.positionLabels=function(e,t){for(var a=[],i=this.offsetIterationDelta,r=this.startingOffset,o=0;r<=this.maximumOffset;){for(var n=0,s=e;n<s.length;n++){var l=s[n];if(!l.hasBeenRendered){var c=this.tryPositionForDonut(l,t,r);c&&a.push(c)}}r+=i,o+=i}return a},l.prototype.tryPositionForDonut=function(e,t,a){var i=e.labelDataPoint,r=i.parentShape;if(!_.isEmpty(r.validPositions)&&0!==r.validPositions[0]){var o=r.validPositions[0],s=this.tryAllPositions(e,t,o,a);if(s&&0===s.score)return this.buildLabel(s,t);if(_.contains(n,this.donutChartProperties.dataLabelsSettings.labelStyle)){var l=this.splitDonutDataPoint(e,this.donutChartProperties.dataLabelsSettings.labelStyle),c=this.tryAllPositions(l,t,o,a);if(c&&(!s||c.score<s.score))return this.buildLabel(c,t)}return s?this.buildLabel(s,t):void 0}},l.prototype.generateCandidate=function(e,t,a,r){var o=e.labelDataPoint,n=this.generateCandidateAngleForPosition(o.donutArcDescriptor,t),s=this.getPointPositionForAngle(n),c=s.point,u=this.score(o,c),d=i.getLabelLeaderLineForDonutChart(o.donutArcDescriptor,this.donutChartProperties,c,n),p=i.getLabelLeaderLinesSizeForDonutChart(d),h=_.clone(o);h.angle=n,h.parentShape=s,h.leaderLinePoints=d,h.linesSize=p;var g=l.tryPositionPoint(a,s.validPositions[0],h,r,this.center,this.donutChartProperties.viewport),m={labelDataPoint:h,hasBeenRendered:e.hasBeenRendered,labelSize:e.labelSize};return{angle:n,point:s,score:u,labelRects:g,donutLabelDataPointLayoutInfo:m}},l.prototype.tryAllPositions=function(e,t,a,i){var r=e.labelDataPoint,o=l.tryPositionPoint(t,a,r,i,this.center,this.donutChartProperties.viewport),n=r.parentShape,s={point:n,angle:r.angle,score:this.score(r,n.point),labelRects:o,donutLabelDataPointLayoutInfo:e};if(o&&o.textRect&&0===s.score)return s;var c,u=[];o&&o.textRect?(u=this.getLabelPointPositions(r,!0),c=s):u=this.getLabelPointPositions(r,!1);for(var d=0,p=u;d<p.length;d++){var h=p[d],g=this.generateCandidate(e,h,t,i);if(g.labelRects&&g.labelRects.textRect&&(null==c||g.score<c.score)&&(c=g,0===c.score))return c}return c},l.prototype.buildLabel=function(t,n){var l,c=t.labelRects.textRect,u=t.donutLabelDataPointLayoutInfo,d=u.labelDataPoint;null==d.categoryLabel&&null==d.dataLabel&&null==d.percentLabel||(l=!0),n.add(c),n.add(t.labelRects.horizontalLineRect),n.add(t.labelRects.diagonalLineRect),u.hasBeenRendered=!0;var p=c.left-this.center.x;p<0?p+=c.width/2:p-=c.width/2;var h,g,m,y,f=8===d.parentShape.validPositions[0]?"start":"end",v={left:p,top:c.top-this.center.y,height:c.height,width:c.width},b=i.getDonutChartLabelStyleFlagType(this.donutChartProperties.dataLabelsSettings.labelStyle),C=i.getSpaceAvailableForDonutLabels(d.parentShape.point.x,this.donutChartProperties.viewport),S=C,x=e.visuals.dataLabelUtils.getLabelFormattedText,w=d.fontSize;if(b===a.labelStyleFlagEnum.categoryAndDataAndPercent?null==d.secondRowText?(C/=3,S=C):S/=2:b===o.categoryAndData?null==d.secondRowText&&(C/=2,S=C):b!==o.categoryAndPercent&&b!==o.dataAndPercent||null==d.secondRowText&&(C/=2,S=C),r.hasFlag(b,a.flagLabelStyleData)){var P=void 0;P=b!==a.labelStyleFlagEnum.categoryAndDataAndPercent&&b!==o.categoryAndData||null!=d.secondRowText?S:S-this.additionalSpaceWidth,P<this.ellipsisWidth&&(l=!1),h=x({label:d.dataLabel,maxWidth:P,fontSize:w})}if(r.hasFlag(b,a.flagLabelStyleCategory)&&(C<this.ellipsisWidth&&(l=!1),g=x({label:d.categoryLabel,maxWidth:C,fontSize:w})),r.hasFlag(b,a.flagLabelStylePercent)){var P=void 0;switch(b){case o.categoryAndDataAndPercent:P=S-this.additionalParenthesesWidth-this.additionalSpaceWidth;break;case o.dataAndPercent:P=null==d.secondRowText?S-this.additionalParenthesesWidth-this.additionalSpaceWidth:S-this.additionalParenthesesWidth;break;case o.categoryAndPercent:P=S-this.additionalSpaceWidth;break;case o.percent:P=S;break;default:P=S}P<this.ellipsisWidth&&(l=!1),m=x({label:d.percentLabel,maxWidth:P,fontSize:w})}switch(h&&h!==s||g&&g!==s||m&&m!==s||(l=!1),b){case o.categoryAndDataAndPercent:m=m?" ("+m+")":null,null==d.secondRowText?(h=h?" "+h:null,y=g,h&&(y+=h),m&&(y+=m)):(y=m?h+m:h,d.secondRowText=g);break;case o.categoryAndData:null==d.secondRowText?(h=h?" "+h:null,y=h?g+h:g):(y=h,d.secondRowText=g);break;case o.categoryAndPercent:null==d.secondRowText?(m=m?" "+m:null,y=m?g+m:g):(y=m,d.secondRowText=g);break;case o.dataAndPercent:null==d.secondRowText?(m=m?" ("+m+")":null,y=m?h+m:h):(m=m?"("+m+")":null,y=m,d.secondRowText=h);break;case o.data:y=h;break;case o.percent:y=m;break;case o.category:y=g;break;default:y=g}var D;return D=b===o.categoryAndDataAndPercent&&null==d.secondRowText?C+S+S:b===o.categoryAndData||b===o.categoryAndPercent?C+S:b===o.dataAndPercent?S+S:C,d.textSize.width=Math.min(d.textSize.width,D),{boundingBox:v,text:y,tooltip:d.tooltip,isVisible:l,fill:d.outsideFill,identity:d.identity,fontSize:w,selected:!1,textAnchor:f,leaderLinePoints:d.leaderLinePoints,hasBackground:!1,secondRowText:d.secondRowText}},l.tryPositionPoint=function(t,a,r,o,n,s){var l=r.parentShape,c=_.clone(r.textSize);c.width=Math.min(c.width,i.getSpaceAvailableForDonutLabels(l.point.x,s));var u=e.DataLabelPointPositioner.getLabelRect(c,l,a,o),d={point:{x:r.leaderLinePoints[0][0],y:r.leaderLinePoints[0][1]<0?r.leaderLinePoints[1][1]:r.leaderLinePoints[0][1]},radius:0,validPositions:null},p=e.DataLabelPointPositioner.getLabelRect(r.linesSize[i.DiagonalLineIndex],d,a,o),h={point:{x:r.leaderLinePoints[1][0],y:r.leaderLinePoints[1][1]},radius:0,validPositions:null},g=e.DataLabelPointPositioner.getLabelRect(r.linesSize[i.HorizontalLineIndex],h,a,o);if(u&&p&&g){u.left+=n.x,u.top+=n.y;var m=n.x-u.width/2;return p.left+=m,p.top+=n.y,g.left+=m,g.top+=n.y,t.hasConflict(u)||t.hasConflict(p)||t.hasConflict(g)?void 0:{textRect:u,diagonalLineRect:p,horizontalLineRect:g}}},l.prototype.getLabelPointPositions=function(e,t){var a=e.parentShape,i=a.validPositions[0];return t?a.point.y<0?8===i?[64]:[128]:8===i?[16]:[32]:4===i?[128,32]:[16,64]},l.prototype.splitDonutDataPoint=function(e,t){var i,r=e.labelDataPoint,o=r.categoryLabelSize?r.categoryLabelSize.width:0,n=r.dataLabelSize?r.dataLabelSize.width:0;i=r.percentLabelSize?t===a.dataAndPercent?r.percentLabelSize.width+this.additionalParenthesesWidth:t===a.categoryAndDataAndPercent?r.percentLabelSize.width+this.additionalParenthesesWidth+this.additionalSpaceWidth:r.percentLabelSize.width:0;var s=r.categoryLabelSize?r.categoryLabelSize.height:0,l=r.dataLabelSize?r.dataLabelSize.height:0,c=r.percentLabelSize?r.percentLabelSize.height:0,u={width:t===a.dataAndPercent?Math.max(n,i):Math.max(o,n+i),height:2*Math.max(s,Math.max(l,c))},d=_.clone(r);d.textSize=u,d.secondRowText=t===a.dataAndPercent?r.dataLabel:r.categoryLabel;var p={labelDataPoint:d,hasBeenRendered:e.hasBeenRendered,labelSize:e.labelSize};return p},l.prototype.generateCandidateAngleForPosition=function(e,t){var a=e.startAngle+(e.endAngle-e.startAngle)/2;switch(t){case 64:case 32:return(e.startAngle+a-Math.PI)/2;case 128:case 16:return(a+e.endAngle-Math.PI)/2}},l.prototype.getPointPositionForAngle=function(e){var t=i.getXPositionForDonutLabel(Math.cos(e)*this.outerRadius),a=Math.sin(e)*this.outerRadius,r=t<0?4:8,o={point:{x:t,y:a},validPositions:[r],radius:0};return o},l.prototype.score=function(e,t){var r,o=i.getSpaceAvailableForDonutLabels(t.x,this.donutChartProperties.viewport),n=this.donutChartProperties.dataLabelsSettings.labelStyle,s=e.categoryLabelSize?e.categoryLabelSize.width:0,l=e.dataLabelSize?e.dataLabelSize.width:0,c=e.percentLabelSize?e.percentLabelSize.width:0;if(n===a.categoryAndDataAndPercent){if(null!=e.secondRowText){var u=Math.max(s-o,0),d=Math.max(Math.max(l,c+this.additionalParenthesesWidth+this.additionalSpaceWidth)-o/2,0);
return Math.max(u,d)}r=Math.max(s,l+this.additionalSpaceWidth,c+this.additionalParenthesesWidth+this.additionalSpaceWidth),o/=3}else n===a.categoryAndData&&null==e.secondRowText?(r=Math.max(s,l+this.additionalSpaceWidth),o/=2):n===a.categoryAndPercent&&null==e.secondRowText?(r=Math.max(s,c+this.additionalSpaceWidth),o/=2):n===a.dataAndPercent?(r=null==e.secondRowText?Math.max(l,c+this.additionalParenthesesWidth+this.additionalSpaceWidth):Math.max(l,c+this.additionalParenthesesWidth),o/=2):r=e.textSize.width;return Math.max(r-o,0)},l})();e.DonutLabelLayout=l})(powerbi||(powerbi={}));var powerbi;!(function(e){var t=e.visuals.NewDataLabelUtils,a=5,i=10,r=60,o=5,n=(function(){function n(){}return n.prototype.layout=function(a,i,r,o){var n=_.map(a,(function(e){return{labelDataPoint:e}}));if(o||void 0===this.labels){for(var l={labelDataPoints:n,maxNumberOfLabels:n.length},c=0,u=n;c<u.length;c++){var d=u[c],p=d.labelDataPoint;d.labelSize={width:p.textSize.width+2*t.horizontalLabelBackgroundPadding,height:p.textSize.height+2*t.verticalLabelBackgroundPadding}}for(var h=new e.LabelArrangeGrid([l],i),g=[],m=[],y=0,f=a;y<f.length;y++){var p=f[y],v=p.parentShape.polygon;m.push(v),v.pixelBoundingRect=r.applyToRect(v.absoluteBoundingRect())}for(var b=new s(m,i),C=0,S=a;C<S.length;C++){var p=S[C],x=this.getLabelByPolygonPositions(p,r,h,b);null!=x&&g.push(x)}this.labels=g}else this.updateLabelOffsets(r);return _.filter(this.labels,(function(e){return e.isVisible}))},n.prototype.getLabelPolygon=function(e,t,a,i){var r={width:e.textSize.width,height:e.textSize.height};return this.getLabelBoundingBox(r,t,a,i)},n.prototype.getLabelBoundingBox=function(t,a,i,r){switch(a){case 1:return e.DataLabelPointPositioner.above(t,i,r);case 2:return e.DataLabelPointPositioner.below(t,i,r);case 4:return e.DataLabelPointPositioner.left(t,i,r);case 8:return e.DataLabelPointPositioner.right(t,i,r);case 128:return e.DataLabelPointPositioner.aboveLeft(t,i,r);case 64:return e.DataLabelPointPositioner.aboveRight(t,i,r);case 32:return e.DataLabelPointPositioner.belowLeft(t,i,r);case 16:return e.DataLabelPointPositioner.belowRight(t,i,r);case 256:return e.DataLabelPointPositioner.center(t,i)}return null},n.prototype.getLabelByPolygonPositions=function(e,t,o,n){for(var s=0,l=t.getInverse(),c=0;c<2;c++){1===c&&(s=a);for(var u=0,d=e.parentShape.validPositions;u<d.length;u++){var p=d[u],h=this.tryPositionForPolygonPosition(p,e,t,s,l);if((256!==p||0===c)&&h){var g=t.applyToRect(h),m={text:e.text,secondRowText:e.secondRowText,boundingBox:g,isVisible:!0,fill:e.insideFill,identity:null,selected:!1,hasBackground:!0,textAnchor:"middle",originalPixelOffset:s,isPlacedInsidePolygon:!0,absoluteBoundingBoxCenter:{x:h.left+h.width/2,y:h.top+h.height/2}};return m}}}for(var y=6;y<=r;){for(var f=0,v=e.parentShape.validPositions;f<v.length;f++){var p=v[f];if(256!==p){var b=e.parentShape.polygon,C=t.applyToPoint(b.absoluteCentroid()),S=this.tryPlaceLabelOutsidePolygon(o,p,e,y,C,n,l);if(S){var g=t.applyToRect(S),m={text:e.text,secondRowText:e.secondRowText,boundingBox:g,isVisible:!0,fill:e.insideFill,identity:null,selected:!1,hasBackground:!0,isPlacedInsidePolygon:!1,textAnchor:"middle",originalPixelOffset:y,originalPosition:p,originalAbsoluteCentroid:b.absoluteCentroid(),absoluteBoundingBoxCenter:{x:S.left+S.width/2,y:S.top+S.height/2}},x=this.calculateStemSource(t,l,b,g,p,C);return m.leaderLinePoints=this.setLeaderLinePoints(x,this.calculateStemDestination(g,p)),m.absoluteStemSource=l.applyToPoint(x),o.add(g),m}}}y+=i}return null},n.prototype.setLeaderLinePoints=function(e,t){return[[e.x,e.y],[t.x,t.y]]},n.prototype.calculateStemSource=function(t,a,i,r,n,s){var l=i.lineIntersectionPoint(i.absoluteCentroid(),a.applyToPoint({x:r.left+r.width/2,y:r.top+r.height/2}));if(null==l)return s;var c=t.applyToPoint(l);switch(n){case 1:c.y+=o;break;case 2:c.y-=o;break;case 4:c.x+=o;break;case 8:c.x-=o;break;case 128:c.x+=o/e.DataLabelPointPositioner.cos45,c.y+=o/e.DataLabelPointPositioner.sin45;break;case 64:c.x-=o/e.DataLabelPointPositioner.cos45,c.y+=o/e.DataLabelPointPositioner.sin45;break;case 32:c.x+=o/e.DataLabelPointPositioner.cos45,c.y-=o/e.DataLabelPointPositioner.sin45;break;case 16:c.x-=o/e.DataLabelPointPositioner.cos45,c.y-=o/e.DataLabelPointPositioner.sin45;break;case 256:}return c},n.prototype.calculateStemDestination=function(e,t){var a,i;switch(t){case 1:a=e.left+e.width/2,i=e.top+e.height;break;case 2:a=e.left+e.width/2,i=e.top;break;case 4:a=e.left+e.width,i=e.top+e.height/2;break;case 8:a=e.left,i=e.top+e.height/2;break;case 128:a=e.left+e.width,i=e.top+e.height;break;case 64:a=e.left,i=e.top+e.height;break;case 32:a=e.left+e.width,i=e.top;break;case 16:a=e.left,i=e.top;break;case 256:}return{x:a,y:i}},n.prototype.tryPositionForPolygonPosition=function(e,t,a,i,r){var o=t.parentShape.polygon,n=a.applyToPoint(o.absoluteCentroid()),s=this.getLabelPolygon(t,e,n,i),l=this.getAbsoluteRectangle(r,s);return o.contains(l)?l:null},n.prototype.tryPlaceLabelOutsidePolygon=function(e,t,a,i,r,o,n){var s=i,l=this.getLabelPolygon(a,t,r,s),c=e.hasConflict(l);if(!c){var u=this.getAbsoluteRectangle(n,l);if(!o.hasConflict(u,l))return u}return null},n.prototype.updateLabelOffsets=function(e){for(var t=0,a=this.labels;t<a.length;t++){var i=a[t];if(i.isVisible)if(i.isPlacedInsidePolygon){var r=e.applyToPoint(i.absoluteBoundingBoxCenter),o=i.boundingBox.left+i.boundingBox.width/2-r.x,n=i.boundingBox.top+i.boundingBox.height/2-r.y;i.boundingBox.top-=n,i.boundingBox.left-=o}else{var s=e.applyToPoint(i.absoluteStemSource),l=e.applyToPoint(i.originalAbsoluteCentroid);i.boundingBox=this.getLabelBoundingBox({width:i.boundingBox.width,height:i.boundingBox.height},i.originalPosition,l,i.originalPixelOffset),void 0!==i.leaderLinePoints&&(i.leaderLinePoints=this.setLeaderLinePoints(s,this.calculateStemDestination(i.boundingBox,i.originalPosition)))}}},n.prototype.getAbsoluteRectangle=function(e,t){return e.applyToRect(t)},n})();e.FilledMapLabelLayout=n;var s=(function(){function e(t,a){this.viewport=a;for(var i=0,r=0,o=0,n=t;o<n.length;o++){var s=n[o],l=s.pixelBoundingRect;l.width>i&&(i=l.width),l.height>r&&(r=l.height)}0===i&&(i=a.width),0===r&&(r=a.height);var c=this.cellSize={width:i*e.cellSizeMultiplier,height:r*e.cellSizeMultiplier};this.columnCount=e.getCellCount(c.width,a.width,1,100),this.rowCount=e.getCellCount(c.height,a.height,1,100);for(var u=[],d=0,p=this.columnCount;d<p;d++){u[d]=[];for(var h=0,g=this.rowCount;h<g;h++)u[d][h]=[]}this.grid=u;for(var m=0,y=t;m<y.length;m++){var s=y[m];this.add(s)}}return e.prototype.hasConflict=function(e,t){for(var a=this.getContainingGridSubsection(t),i=this.grid,r=a.xMin;r<a.xMax;r++)for(var o=a.yMin;o<a.yMax;o++)for(var n=0,s=i[r][o];n<s.length;n++){var l=s[n];if(l.conflicts(e))return!0}return!1},e.prototype.add=function(e){for(var t=this.getContainingGridSubsection(e.pixelBoundingRect),a=t.xMin;a<t.xMax;a++)for(var i=t.yMin;i<t.yMax;i++)this.grid[a][i].push(e)},e.prototype.getContainingGridSubsection=function(t){return{xMin:e.bound(Math.floor(t.left/this.cellSize.width),0,this.columnCount),xMax:e.bound(Math.ceil((t.left+t.width)/this.cellSize.width),0,this.columnCount),yMin:e.bound(Math.floor(t.top/this.cellSize.height),0,this.rowCount),yMax:e.bound(Math.ceil((t.top+t.height)/this.cellSize.height),0,this.rowCount)}},e.getCellCount=function(t,a,i,r){return e.bound(Math.ceil(a/t),i,r)},e.bound=function(e,t,a){return Math.max(Math.min(e,a),t)},e})();s.cellSizeMultiplier=2,e.LabelPolygonArrangeGrid=s})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function a(t){return function(a,i){return e.converterHelper.formatFromMetadataColumn(a,i,t,!0)}}function i(t){return function(a,i){return e.converterHelper.formatFromMetadataColumn(a,i,t,!1)}}t.defaultFormatter=a,t.fallbackBasedOnType=i})(t=e.FormattingStrategies||(e.FormattingStrategies={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=e.data.DataViewTransform,i={"0.00 %;-0.00 %;0.00 %":"Percentage","0.0 %;-0.0 %;0.0 %":"Percentage1"},r={NullValue:"(Blank)",BooleanTrue:"True",BooleanFalse:"False",NaNValue:"NaN",InfinityValue:"+Infinity",NegativeInfinityValue:"-Infinity",Restatement_Comma:"{0}, {1}",Restatement_CompoundAnd:"{0} and {1}",DisplayUnitSystem_EAuto_Title:"Auto",DisplayUnitSystem_E0_Title:"None",DisplayUnitSystem_E3_LabelFormat:"{0}K",DisplayUnitSystem_E3_Title:"Thousands",DisplayUnitSystem_E6_LabelFormat:"{0}M",DisplayUnitSystem_E6_Title:"Millions",DisplayUnitSystem_E9_LabelFormat:"{0}bn",DisplayUnitSystem_E9_Title:"Billions",DisplayUnitSystem_E12_LabelFormat:"{0}T",DisplayUnitSystem_E12_Title:"Trillions",Percentage:"#,0.##%",Percentage1:"#,0.#%",RichTextbox_Link_DefaultText:"Link",TableTotalLabel:"Total",ListJoin_Separator:", ",Tooltip_HighlightedValueDisplayName:"Highlighted",Funnel_PercentOfFirst:"Percent of first",Funnel_PercentOfPrevious:"Percent of previous",Funnel_PercentOfFirst_Highlight:"Percent of first (highlighted)",Funnel_PercentOfPrevious_Highlight:"Percent of previous (highlighted)",GeotaggingString_Continent:"continent",GeotaggingString_Continents:"continents",GeotaggingString_Country:"country",GeotaggingString_Countries:"countries",GeotaggingString_State:"state",GeotaggingString_States:"states",GeotaggingString_City:"city",GeotaggingString_Cities:"cities",GeotaggingString_Town:"town",GeotaggingString_Towns:"towns",GeotaggingString_Province:"province",GeotaggingString_Provinces:"provinces",GeotaggingString_County:"county",GeotaggingString_Counties:"counties",GeotaggingString_Village:"village",GeotaggingString_Villages:"villages",GeotaggingString_Post:"post",GeotaggingString_Zip:"zip",GeotaggingString_Code:"code",GeotaggingString_Place:"place",GeotaggingString_Places:"places",GeotaggingString_Address:"address",GeotaggingString_Addresses:"addresses",GeotaggingString_Street:"street",GeotaggingString_Streets:"streets",GeotaggingString_Longitude:"longitude",GeotaggingString_Longitude_Short:"lon",GeotaggingString_Longitude_Short2:"long",GeotaggingString_Latitude:"latitude",GeotaggingString_Latitude_Short:"lat",GeotaggingString_PostalCode:"postal code",GeotaggingString_PostalCodes:"postal codes",GeotaggingString_ZipCode:"zip code",GeotaggingString_ZipCodes:"zip codes",GeotaggingString_Territory:"territory",GeotaggingString_Territories:"territories",Waterfall_IncreaseLabel:"Increase",Waterfall_DecreaseLabel:"Decrease",Waterfall_TotalLabel:"Total",Slicer_SelectAll:"Select All",Visual_Quarter_Abbreviated:"Qtr {0}"},o=(function(){function o(){}return o.initialize=function(){t.valueFormatter.setLocaleOptions(o.createLocaleOptions()),t.TooltipManager.setLocalizedStrings(o.createTooltipLocaleOptions()),a.setLocalizationOptions(o.createDataViewTransformLocalizationOptions())},o.createLocaleOptions=function(){return{null:r.NullValue,true:r.BooleanTrue,false:r.BooleanFalse,NaN:r.NaNValue,infinity:r.InfinityValue,negativeInfinity:r.NegativeInfinityValue,beautify:function(e){return o.beautify(e)},describe:function(e){return o.describeUnit(e)},restatementComma:r.Restatement_Comma,restatementCompoundAnd:r.Restatement_CompoundAnd,restatementCompoundOr:r.Restatement_CompoundOr}},o.createTooltipLocaleOptions=function(){return{highlightedValueDisplayName:r.Tooltip_HighlightedValueDisplayName}},o.createDataViewTransformLocalizationOptions=function(){return{quarterPrefix:r.Visual_Quarter_Abbreviated}},o.prototype.getLocalizedString=function(e){return r[e]},o.prototype.onDragStart=function(){},o.prototype.canSelect=function(){return!1},o.prototype.onSelecting=function(e){e.action=0},o.prototype.onSelect=function(){},o.prototype.onContextMenu=function(){},o.prototype.loadMoreData=function(){},o.prototype.persistProperties=function(e){},o.prototype.onCustomSort=function(e){},o.prototype.getViewMode=function(){return 0},o.prototype.getEditMode=function(){return 0},o.prototype.setWarnings=function(e){},o.prototype.setToolbar=function(e){},o.prototype.shouldRetainSelection=function(){return!1},o.prototype.geocoder=function(){return t.services.createGeocoder()},o.prototype.geolocation=function(){return t.services.createGeolocation()},o.prototype.promiseFactory=function(){return e.createJQueryPromiseFactory()},o.prototype.visualCapabilitiesChanged=function(){},o.prototype.analyzeFilter=function(e){return{isNotFilter:!1,selectedIdentities:[],filter:void 0,defaultValue:void 0}},o.prototype.getIdentityDisplayNames=function(e){},o.prototype.setIdentityDisplayNames=function(e){},o.prototype.tooltips=function(){},o.prototype.locale=function(){return navigator.language},o.prototype.allowInteractions=function(){return!0},o.prototype.loader=function(){return e.createModuleLoader(this.promiseFactory(),_.noop,null)},o.prototype.getUIComponentFactory=function(){return null},o.beautify=function(e){var t=i[e];return t?r[t]||e:e},o.describeUnit=function(e){var t=e===-1?"Auto":e.toString(),a=r["DisplayUnitSystem_E"+t+"_Title"],i=e<=0?"{0}":r["DisplayUnitSystem_E"+t+"_LabelFormat"];if(a||i)return{title:a,format:i}},o})();t.DefaultVisualHostServices=o,t.defaultVisualHostServices=new o})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function a(e){return new l(e)}function i(e){return e.append("rect").classed("clearCatcher",!0).attr({width:"100%",height:"100%"})}function r(t,a,i){return null!=a.objects&&a.objects[i]&&e.DataViewObjects.getValue(a.objects[i],t)}function o(e){for(var t=0,a=e.length;t<a;t++)if(e[t].selected)return!0;return!1}var n=jsCommon.ArrayExtensions,s=e.data.SemanticFilter;t.createInteractivityService=a,t.appendClearCatcher=i,t.isCategoryColumnSelected=r,t.dataHasSelection=o;var l=(function(){function t(e){this.renderSelectionInVisual=_.noop,this.renderSelectionInLegend=_.noop,this.renderSelectionInLabels=_.noop,this.selectedIds=[],this.isInvertedSelectionMode=!1,this.dataPointObjectName="dataPoint",this.hostService=e}return t.prototype.bind=function(e,t,a,i){var r=this;i&&i.overrideSelectionFromData&&this.takeSelectionStateFromDataPoints(e),i?(i.isLegend?(this.selectableLegendDataPoints=e,this.renderSelectionInLegend=function(){return t.renderSelection(r.legendHasSelection())}):i.isLabels?(this.selectableLabelsDataPoints=e,this.renderSelectionInLabels=function(){return t.renderSelection(r.labelsHasSelection())}):(this.selectableDataPoints=e,this.renderSelectionInVisual=function(){return t.renderSelection(r.hasSelection())}),null!=i.hasSelectionOverride&&(this.hasSelectionOverride=i.hasSelectionOverride),i.slicerValueHandler&&(this.slicerValueHandler=i.slicerValueHandler)):(this.selectableDataPoints=e,this.renderSelectionInVisual=function(){return t.renderSelection(r.hasSelection())}),this.behavior=t,t.bindEvents(a,this),this.syncSelectionState()},t.prototype.clearSelection=function(){return this.slicerValueHandler&&this.slicerValueHandler.getDefaultValue()&&this.useDefaultValue?void(this.isInvertedSelectionMode=!1):(this.hasSelectionOverride=void 0,n.clear(this.selectedIds),this.isInvertedSelectionMode=!1,this.applyToAllSelectableDataPoints((function(e){return e.selected=!1})),void this.renderAll())},t.prototype.applySelectionStateToData=function(e){for(var a=0,i=e;a<i.length;a++){var r=i[a];r.selected=t.checkDatapointAgainstSelectedIds(r,this.selectedIds)}return this.hasSelection()},t.prototype.hasSelection=function(){return this.selectedIds.length>0},t.prototype.legendHasSelection=function(){return!!this.selectableLegendDataPoints&&o(this.selectableLegendDataPoints)},t.prototype.labelsHasSelection=function(){return!!this.selectableLabelsDataPoints&&o(this.selectableLabelsDataPoints)},t.prototype.isSelectionModeInverted=function(){return this.isInvertedSelectionMode},t.prototype.setSelectionModeInverted=function(e){this.isInvertedSelectionMode=e},t.prototype.handleSelection=function(e,t){if(e){var a;e.specificIdentity?a=e.specificIdentity.getSelectorsByColumn():e.identity&&(a=e.identity.getSelectorsByColumn());var i={visualObjects:[{objectName:this.dataPointObjectName,selectorsByColumn:a}]};_.isEmpty(a)||this.hostService.onSelecting(i),0!==i.action&&null!=i.action||(e.identity?(this.useDefaultValue=!1,this.select(e,t),this.sendSelectionToHost(),this.renderAll()):this.handleClearSelection())}},t.prototype.handleMultipleSelection=function(e,t){this.useDefaultValue=!1,this.selectMultiple(e,t),this.sendSelectionToHost(),this.renderAll()},t.prototype.handleContextMenu=function(e,t){this.sendContextMenuToHost(e,t)},t.prototype.handleClearSelection=function(){this.useDefaultValue=!0,this.clearSelection(),this.sendSelectionToHost()},t.prototype.toggleSelectionModeInversion=function(){return this.useDefaultValue=!1,this.isInvertedSelectionMode=!this.isInvertedSelectionMode,n.clear(this.selectedIds),this.applyToAllSelectableDataPoints((function(e){return e.selected=!1})),this.sendSelectionToHost(),this.isInvertedSelectionMode?this.syncSelectionStateInverted():this.syncSelectionState(),this.renderAll(),this.isInvertedSelectionMode},t.prototype.persistSelectionFilter=function(e){this.hostService.persistProperties(t.createChangeForFilterProperty(e,this.getFilterFromSelectors()))},t.prototype.persistSelfFilter=function(e,a){this.hostService.persistProperties(t.createChangeForFilterProperty(e,a))},t.prototype.setDefaultValueMode=function(e){this.useDefaultValue=e},t.prototype.isDefaultValueEnabled=function(){return this.useDefaultValue},t.prototype.renderAll=function(){this.renderSelectionInVisual(),this.renderSelectionInLegend(),this.renderSelectionInLabels()},t.prototype.selectMultiple=function(e,t){0!==t&&2!==t||(this.selectedIds=[]);for(var a=0,i=e;a<i.length;a++){var r=i[a],o=r.identity;o.highlight||(1===t||0===t?(r.selected=!0,this.selectedIds.push(o)):3===t?(r.selected=!1,this.removeId(o)):2===t&&r.selected&&this.selectedIds.push(o))}if(2===t)for(var n=0,s=this.selectableDataPoints;n<s.length;n++){var r=s[n];_.contains(this.selectedIds,r.identity)||(r.selected=!1)}this.syncSelectionState()},t.prototype.select=function(e,t){if(this.isInvertedSelectionMode)return this.selectInverted(e,t);e.identity&&e.identity.highlight&&(e=_.find(this.selectableDataPoints,(function(t){return!t.identity.highlight&&e.identity.includes(t.identity,!0)})));var a=e.identity;if(a){var i=!e.selected||!t&&this.selectedIds.length>1;t&&(i?(e.selected=!0,this.selectedIds.push(a),a.hasIdentity()?this.removeSelectionIdsWithOnlyMeasures():this.removeSelectionIdsExceptOnlyMeasures()):(e.selected=!1,this.removeId(a))),t&&this.hostService.canSelect(this.createSelectEventArgs(this.selectedIds))||(this.clearSelection(),i&&(e.selected=!0,this.selectedIds.push(a))),this.syncSelectionState()}},t.prototype.selectInverted=function(e,t){var a=e.selected,i=e.identity;e.selected=!a,a?this.removeId(i):(this.selectedIds.push(i),i.hasIdentity()?this.removeSelectionIdsWithOnlyMeasures():this.removeSelectionIdsExceptOnlyMeasures()),this.syncSelectionStateInverted()},t.prototype.removeId=function(e){for(var t=this.selectedIds,a=t.length-1;a>-1;a--){var i=t[a];e.includes(i)&&t.splice(a,1)}},t.prototype.getFilterFromSelectors=function(){var t=[];this.selectedIds.length>0&&(t=_.chain(this.selectedIds).filter((function(e){return e.hasIdentity()})).map((function(e){return e.getSelector()})).value());var a=e.data.Selector.filterFromSelector(t,this.isInvertedSelectionMode);return this.slicerValueHandler&&this.slicerValueHandler.getDefaultValue()&&(this.useDefaultValue===!0?a=s.getDefaultValueFilter(this.slicerValueHandler.getIdentityFields()):_.isEmpty(t)&&(a=s.getAnyValueFilter(this.slicerValueHandler.getIdentityFields()))),a},t.createChangeForFilterProperty=function(e,t){var a={},i={objectName:e.objectName,selector:void 0,properties:a};return null==t?(a[e.propertyName]={},{remove:[i]}):(a[e.propertyName]=t,{merge:[i]})},t.prototype.sendContextMenuToHost=function(e,t){var a=this.hostService;if(a.onContextMenu){var i;e.specificIdentity?i=e.specificIdentity:e.identity&&(i=e.identity);var r;r=!i||_.size(this.selectedIds)>1&&_.any(this.selectedIds,(function(e){return e.equals(i)}))?this.selectedIds:[i];for(var o=[],n=0,s=r;n<s.length;n++){var l=s[n],c=l.getSelectorsByColumn();_.isEmpty(c)||o.push(c)}if(!_.isEmpty(o)){var u={data:o,position:t};a.onContextMenu(u)}}},t.prototype.sendSelectionToHost=function(){var e=this.hostService;if(e.onSelect){var t=this.createSelectEventArgs(this.selectedIds);e.onSelect(t)}},t.prototype.createSelectEventArgs=function(e){var t=!1,a=this.dataPointObjectName;_.isEmpty(e)||(t=e[0].getSelector()&&!e[0].getSelectorsByColumn());var i=_.chain(e).filter((function(e){return e.hasIdentity()})),r={visualObjects:i.map((function(e){return{objectName:a,selectorsByColumn:e.getSelectorsByColumn()}})).value()};return t&&(r.selectors=i.map((function(e){return e.getSelector()})).value()),r},t.prototype.takeSelectionStateFromDataPoints=function(e){var t=this.selectedIds;n.clear(t);for(var a=0,i=e;a<i.length;a++){var r=i[a];r.selected&&t.push(r.identity)}},t.prototype.syncSelectionState=function(){if(this.isInvertedSelectionMode)return this.syncSelectionStateInverted();var e=this.selectedIds,a=this.selectableDataPoints,i=this.selectableLegendDataPoints,r=this.selectableLabelsDataPoints,o=!1;if(a||i){if(a&&t.updateSelectableDataPointsBySelectedIds(a,e)&&(o=!0),i&&t.updateSelectableDataPointsBySelectedIds(i,e)&&(o=!0),r)for(var n,s=0,l=r.length;s<l;s++)n=r[s],e.some((function(e){return e.includes(n.identity)}))?n.selected=!0:n.selected=!1;!o&&e.length>0&&(this.clearSelection(),this.sendSelectionToHost())}},t.prototype.syncSelectionStateInverted=function(){var e=this.selectedIds,t=this.selectableDataPoints;if(t)if(0===e.length)for(var a=0,i=t;a<i.length;a++){var r=i[a];r.selected=!1}else for(var o=0,n=t;o<n.length;o++){var s=n[o];e.some((function(e){return e.includes(s.identity)}))?s.selected=!0:s.selected&&(s.selected=!1)}},t.prototype.applyToAllSelectableDataPoints=function(e){var t=this.selectableDataPoints,a=this.selectableLegendDataPoints,i=this.selectableLabelsDataPoints;if(t)for(var r=0,o=t;r<o.length;r++){var n=o[r];e(n)}if(a)for(var s=0,l=a;s<l.length;s++){var n=l[s];e(n)}if(i)for(var c=0,u=i;c<u.length;c++){var n=u[c];e(n)}},t.updateSelectableDataPointsBySelectedIds=function(e,a){for(var i=!1,r=0,o=e;r<o.length;r++){var n=o[r];n.selected=t.checkDatapointAgainstSelectedIds(n,a),n.selected&&(i=!0)}return i},t.checkDatapointAgainstSelectedIds=function(e,t){return t.some((function(t){return t.includes(e.identity)}))},t.prototype.removeSelectionIdsWithOnlyMeasures=function(){this.selectedIds=_.filter(this.selectedIds,(function(e){return e.hasIdentity()}))},t.prototype.removeSelectionIdsExceptOnlyMeasures=function(){this.selectedIds=_.filter(this.selectedIds,(function(e){return!e.hasIdentity()}))},t})();t.InteractivityService=l})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(a){function i(){return new p}function r(e){return a.CategoryTypeArray.indexOf(e)>-1}function o(e,t){var a=e&&!_.isEmpty(e.resourceSets)&&e.resourceSets[0].resources;if(Array.isArray(a)){var i=_.chain(a).map((function(e){return{location:e,value:t(e)}})).max((function(e){return e.value})).value().location;return i}}function n(e){switch(e.toLowerCase()){case"fr":return"fr-FR";case"de":return"de-DE";case"da":return"da-DK";case"es":return"es-ES";default:return e}}function s(e){void 0!==e&&S.reset(e),b.reset(),h.reset(),g.reset()}var l=t.MapUtil.CategoryTypes,c=e.JQueryPromiseState,u=t.MapUtil.Settings;a.createGeocoder=i;var d=(function(){function e(){}return e.prototype.geocode=function(e,t,a){return void 0===t&&(t=""),this.geocodeCore("geocode",new y(this.bingGeocodingUrl(),this.bingSpatialDataUrl(),e,t),a)},e.prototype.geocodeBoundary=function(e,t,a,i,r,o){return void 0===a&&(a=""),void 0===i&&(i=2),void 0===r&&(r=3),this.geocodeCore("geocodeBoundary",new v(this.bingGeocodingUrl(),this.bingSpatialDataUrl(),e,t,a,i,r,o&&o.entityType),o)},e.prototype.geocodePoint=function(e,t,a,i){return this.geocodeCore("geocodePoint",new f(this.bingGeocodingUrl(),this.bingSpatialDataUrl(),e,t,a),i)},e.prototype.tryGeocodeImmediate=function(e,t){var a=S.getCoordinates(new y(this.bingGeocodingUrl(),this.bingSpatialDataUrl(),e,t).key);return a},e.prototype.tryGeocodeBoundaryImmediate=function(e,t,a,i,r,o){void 0===r&&(r=3);var n=S.getCoordinates(new v(this.bingGeocodingUrl(),this.bingSpatialDataUrl(),e,t,a,i,r,o).key);return n},e.prototype.geocodeCore=function(e,t,a){var i=S.getCoordinates(t.getKey()),r=$.Deferred();if(i)r.resolve(i);else{var o={query:t,deferred:r};b.enqueue(e,o),a&&a.timeout&&a.timeout.finally((function(){o.deferred.state()===c[c.pending]&&o.deferred.reject()}))}return r},e})();a.BingMapsGeocoder=d;var p=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.bingSpatialDataUrl=function(){return"https://platform.bing.com/geo/spatial/v1/public/Geodata"},t.prototype.bingGeocodingUrl=function(){return"https://dev.virtualearth.net/REST/v1/Locations"},t})(d);a.DefaultGeocoder=p,a.safeCharacters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_-",a.BingAjaxCall=$.ajax,a.CategoryTypeArray=["Address","City","Continent","Country","County","Longitude","Latitude","Place","PostalCode","StateOrProvince"],a.isCategoryType=r,a.BingEntities={Continent:"Continent",Sovereign:"Sovereign",CountryRegion:"CountryRegion",AdminDivision1:"AdminDivision1",AdminDivision2:"AdminDivision2",PopulatedPlace:"PopulatedPlace",Postcode:"Postcode",Postcode1:"Postcode1",Neighborhood:"Neighborhood",Address:"Address"};var h;!(function(e){function t(){r=void 0}function i(e){return r||(r={},r[l.Continent.toLowerCase()]=a.BingEntities.Continent,r[l.CountryRegion.toLowerCase()]=a.BingEntities.Sovereign,r[l.StateOrProvince.toLowerCase()]=a.BingEntities.AdminDivision1,r[l.County.toLowerCase()]=a.BingEntities.AdminDivision2,r[l.City.toLowerCase()]=a.BingEntities.PopulatedPlace,r[l.PostalCode.toLowerCase()]=a.BingEntities.Postcode,r[l.Address.toLowerCase()]=a.BingEntities.Address),e&&r[e.toLowerCase()]||""}var r;e.reset=t,e.find=i})(h||(h={}));var g;!(function(e){function t(){r=void 0}function i(e){return r||(r={},r[l.CountryRegion.toLowerCase()]=a.BingEntities.CountryRegion,r[l.StateOrProvince.toLowerCase()]=a.BingEntities.AdminDivision1,r[l.County.toLowerCase()]=a.BingEntities.AdminDivision2,r[l.City.toLowerCase()]=a.BingEntities.PopulatedPlace,r[l.PostalCode.toLowerCase()]=a.BingEntities.Postcode1),e&&r[e.toLowerCase()]||""}var r;e.reset=t,e.find=i})(g||(g={}));var m=(function(){function e(e,t,a,i,r){this.bingGeocodingUrl=e,this.bingSpatialDataUrl=t,this.query=null!=a?a:"",this.category=null!=i?i:"",this.key=("G:"+this.bingGeocodingUrl+"; S:"+this.bingSpatialDataUrl+";"+this.query+"/"+this.category).toLowerCase(),r&&(this.key+="V:"+r+this.key)}return e.prototype.getKey=function(){return this.key},e})();a.GeocodeQueryBase=m;var y=(function(e){function t(a,i,r,o){return e.call(this,a,i,r,o,t.CacheKeyVersion)||this}return __extends(t,e),t.prototype.getBingEntity=function(){return h.find(this.category)},t.prototype.getUrl=function(){var e={key:u.BingKey},i=this.getBingEntity(),r=!1;if(i)if(i===a.BingEntities.Postcode)e.includeEntityTypes="Postcode,Postcode1,Postcode2,Postcode3,Postcode4";else if(this.query.indexOf(",")!==-1||i!==a.BingEntities.AdminDivision1&&i!==a.BingEntities.AdminDivision2){if(e.includeEntityTypes=i,i===a.BingEntities.Sovereign)try{var o=decodeURIComponent(this.query);e.countryRegion=t.Iso3166Substitutions[o]||o,r=!0}catch(e){return null}}else{r=!0;try{e.adminDistrict=decodeURIComponent(this.query)}catch(e){return null}}if(!r)try{e.q=decodeURIComponent(this.query)}catch(e){return null}var s=navigator.userLanguage||navigator.language;return s=n(s),s&&(e.c=s),e.maxRes="20",2===this.query.length&&this.category===l.CountryRegion&&(e.include="ciso2"),jsCommon.UrlUtils.setQueryParameters(this.bingGeocodingUrl,e,!0)},t.prototype.getResult=function(e){var t=this,a=o(e,(function(e){return t.locationQuality(e)}));if(a){var i=a.point.coordinates,r={latitude:i&&i[0],longitude:i&&i[1],entityType:a.entityType};return{coordinates:r}}return{error:new Error("Geocode result is empty.")}},t.prototype.locationQuality=function(e){var t=0;if(this.category===l.CountryRegion){var a=e.address&&e.address.countryRegionIso2;if(a){var i=this.query.toLowerCase();2===i.length&&i===a.toLowerCase()&&(t+=2)}}return e.entityType&&e.entityType.toLowerCase()===this.getBingEntity().toLowerCase()&&(t+=1),t},t})(m);y.CacheKeyVersion="1",y.Iso3166Substitutions={BI:"Burundi",BQ:"Bonaire",SJ:"Svalbard",BES:"Bonaire",NGA:"Nigeria",NAM:"Namibia",SJM:"Svalbard",MAF:"MF"},a.GeocodeQuery=y;var f=(function(e){function t(t,a,i,r,o){var n=e.call(this,t,a,[i,r].join(),"Point")||this;return n.latitude=i,n.longitude=r,n.entities=o,n}return __extends(t,e),t.prototype.getKey=function(){return null},t.prototype.getUrl=function(){var e=jsCommon.UrlUtils.splitUrlAndQuery(this.bingGeocodingUrl),t=_.endsWith(e.baseUrl,"/")?e.baseUrl:e.baseUrl+"/";t+=[this.latitude,this.longitude].join();var a={key:u.BingKey,include:"ciso2"};return _.isEmpty(this.entities)||(a.includeEntityTypes=this.entities.join()),jsCommon.UrlUtils.setQueryParameters(t,a,!0)},t.prototype.getResult=function(e){var t=this,a=o(e,(function(e){return t.entities.indexOf(e.entityType)===-1?0:1}));if(a){var i=a.point.coordinates,r=a.address||{},n=a.name,s={latitude:i[0],longitude:i[1],addressLine:r.addressLine,locality:r.locality,neighborhood:r.neighborhood,adminDistrict:r.adminDistrict,adminDistrict2:r.adminDistrict2,formattedAddress:r.formattedAddress,postalCode:r.postalCode,countryRegionIso2:r.countryRegionIso2,countryRegion:r.countryRegion,landmark:r.landmark,name:n};return{coordinates:s}}return{coordinates:null}},t})(m);a.GeocodePointQuery=f;var v=(function(e){function t(t,a,i,r,o,n,s,l){void 0===s&&(s=3);var c=e.call(this,t,a,[i,r,n,s].join(",")+(l!==g.find(o)?","+l:""),o)||this;return c.latitude=i,c.longitude=r,c.levelOfDetail=n,c.maxGeoData=s,c.entityType=l,c}return __extends(t,e),t.prototype.getBingEntity=function(){return g.find(this.category)},t.prototype.getUrl=function(){var e={key:u.BingKey,$format:"json"},t=this.entityType||this.getBingEntity();if(!t)return null;var a=navigator.userLanguage||navigator.language;a=n(a);var i=a.split("-"),r=[this.latitude,this.longitude,this.levelOfDetail,"'"+t+"'",1,0,"'"+a+"'"];return i.length>1&&r.push("'"+i[1]+"'"),e.SpatialFilter="GetBoundary("+r.join(", ")+")",jsCommon.UrlUtils.setQueryParameters(this.bingSpatialDataUrl,e,!0)},t.prototype.getResult=function(e){var t=e;if(t&&t.d&&Array.isArray(t.d.results)&&t.d.results.length>0){var a=t.d.results[0],i=a.Primitives;if(i&&i.length>0){var r={latitude:this.latitude,longitude:this.longitude,locations:[]};i.sort((function(e,t){return e.Shape.length<t.Shape.length?1:e.Shape.length>t.Shape.length?-1:0}));for(var o=Math.min(i.length,this.maxGeoData),n=0;n<o;n++)for(var s=i[n].Shape,l=s.split(","),c=1;c<l.length;c++)r.locations.push({nativeBing:l[c]});return{coordinates:r}}}return{error:new Error("Geocode result is empty.")}},t})(m);a.GeocodeBoundaryQuery=v;var b;!(function(e){function t(e){var t=r[e];return t||(r[e]=t=new C),t}function a(e,a){t(e).enqueue(a)}function i(){for(var e in r)r[e].reset();r={}}var r={};e.enqueue=a,e.reset=i})(b||(b={}));var C=(function(){function e(){this.entries=[],this.activeEntries=[],this.inDequeue=!1}return e.prototype.reset=function(){var e=this.dequeueTimeout;e&&(this.dequeueTimeout=void 0,clearTimeout(e));for(var t=0,a=this.entries.concat(this.activeEntries);t<a.length;t++){var i=a[t];this.cancel(i)}this.entries=[],this.activeEntries=[]},e.prototype.enqueue=function(e){var t=this,a={item:e};this.entries.push(a),e.deferred.always((function(){t.cancel(a)})),this.dequeue()},e.prototype.dequeue=function(){if(!this.inDequeue&&!this.dequeueTimeout)try{for(this.inDequeue=!0;0!==this.entries.length&&this.activeEntries.length<u.MaxBingRequest;){var e=this.entries.shift();e.isCompleted||this.makeRequest(e)}}finally{this.inDequeue=!1}},e.prototype.scheduleDequeue=function(){var e=this;this.dequeueTimeout||0===this.entries.length||(this.dequeueTimeout=setTimeout((function(){
e.dequeueTimeout=void 0,e.dequeue()})))},e.prototype.cancel=function(e){if(!e.jsonp){var t=e.request;t&&(e.request=null,t.abort())}this.complete(e,{error:new Error("cancelled")})},e.prototype.complete=function(e,t){e.isCompleted||(e.isCompleted=!0,e.item.deferred.state()===c[c.pending]&&(!t||t.error?e.item.deferred.reject(t&&t.error||new Error("cancelled")):(t.coordinates&&S.registerCoordinates(e.item.query.getKey(),t.coordinates),e.item.deferred.resolve(t.coordinates)))),this.scheduleDequeue()},e.prototype.makeRequest=function(e){var t=this,i=S.getCoordinates(e.item.query.getKey());if(i)return void this.complete(e,{coordinates:i});var r={type:"GET",dataType:"jsonp",jsonp:"jsonp"};e.jsonp=!0;var o=e.item.query.getUrl();return o?(this.activeEntries.push(e),e.request=a.BingAjaxCall(o,r),e.request.always((function(){_.pull(t.activeEntries,e)})),void e.request.then((function(a){e.request=null;try{t.complete(e,e.item.query.getResult(a))}catch(a){t.complete(e,{error:a})}}),(function(a){e.request=null,t.complete(e,{error:new Error(a&&a.statusText||"cancelled")})}))):void this.complete(e,{error:new Error("Unsupported query.")})},e})();a.GeocodeQueue=C;var S;!(function(e){function t(){return n||(n=a.createGeocodingCache(u.MaxCacheSize,u.MaxCacheSizeOverflow)),n}function i(e){if(e)return t().getCoordinates(e)}function r(e,a){if(e)return t().registerCoordinates(e,a)}function o(e){n=e}var n;e.getCoordinates=i,e.registerCoordinates=r,e.reset=o})(S||(S={})),a.resetStaticGeocoderState=s,s()})(a=t.services||(t.services={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){function a(t,a,r){return r||(r=e.localStorageService),new i(t,a,r)}t.createGeocodingCache=a;var i=(function(){function e(e,t,a){this.geocodeCache={},this.geocodeCacheCount=0,this.maxCacheSize=e,this.maxCacheSizeOverflow=t,this.localStorageService=a}return e.prototype.getCoordinates=function(e){var t=this.geocodeCache[e];return t?(++t.hitCount,t.coordinate):(t=this.localStorageService.getData(e),t?(this.registerInMemory(e,t.coordinate),t.coordinate):void 0)},e.prototype.registerCoordinates=function(e,t){this.registerInMemory(e,t),this.registerInStorage(e,t)},e.prototype.registerInMemory=function(e,t){var a=this.geocodeCache,i=this.maxCacheSize,r=i+this.maxCacheSizeOverflow;if(this.geocodeCacheCount>=r){var o=Object.keys(a),n=o.length;if(o.sort((function(e,t){var i=a[e],r=a[t],o=i?i.hitCount:0,n=r?r.hitCount:0;return o<n?1:o>n?-1:0})),n<2*r)for(var s=i;s<n;s++)a[o[s]]=void 0;else{for(var l={},s=0;s<i;++s)l[o[s]]=a[o[s]];a=this.geocodeCache=l}this.geocodeCacheCount=i}a[e]={coordinate:t,hitCount:1},++this.geocodeCacheCount},e.prototype.registerInStorage=function(e,t){this.localStorageService.setData(e,{coordinate:t})},e})()})(a=t.services||(t.services={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(){return new a}e.createGeolocation=t;var a=(function(){function e(){this.webGeolocation=navigator.geolocation}return e.prototype.watchPosition=function(e,t){return this.webGeolocation.watchPosition((function(t){e(t)}),(function(e){null!=t&&t(e)}))},e.prototype.clearWatch=function(e){this.webGeolocation.clearWatch(e)},e.prototype.getCurrentPosition=function(e,t){this.webGeolocation.getCurrentPosition((function(t){e(t)}),(function(e){null!=t&&t(e)}))},e})()})(t=e.services||(e.services={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(e,t){if(e)for(var a=0;a<e.length;a++){var i=e[a];i(t)}}var a="unselectable";e.fire=t;var i=(function(){function t(e,t){this._owner=e,this._direction=t,this._timerHandle=void 0,this.createView();var i=this;this._element.addEventListener("mousedown",(function(e){i.onMouseDown(e)})),$(this._element).addClass(a),$(this._svg).addClass(a),$(this._polygon).addClass(a)}return Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),t.prototype.createView=function(){var e="http://www.w3.org/2000/svg";this._polygon=document.createElementNS(e,"polygon"),this._polygon.setAttributeNS(null,"points","3,3 6,3 13,8 6,13 3,13 10,8"),this._polygon.setAttributeNS(null,"fill",t.ARROW_COLOR),this._svg=document.createElementNS(e,"svg");var a=this._svg.style;a.position="absolute",a.left="0px",a.top="0px",this._svg.appendChild(this._polygon),this._element=document.createElement("div"),this._element.className=r.arrowClassName,this._element.appendChild(this._svg),this._owner.element.appendChild(this._element)},t.prototype.onMouseDown=function(e){var t=this;if(clearTimeout(this._timerHandle),!this._mouseUpWrapper){e.cancelBubble=!0;var a=this;this._mouseUpWrapper=function(e){a.onMouseUp(e)},r.addDocumentMouseUpEvent(this._mouseUpWrapper)}this._owner._scrollSmallIncrement(this._direction),this._owner.refresh(),this._timerHandle=setTimeout((function(){t.onMouseDown(e)}),100),e.preventDefault&&e.preventDefault()},t.prototype.onMouseUp=function(e){clearTimeout(this._timerHandle),r.removeDocumentMouseUpEvent(this._mouseUpWrapper),this._mouseUpWrapper=void 0},t.prototype.arrange=function(t,a,i){var r=Math.min(t,a),o=r/16,n=(t-r)/2,s=(a-r)/2;this._polygon.setAttributeNS(null,"transform","translate("+n+", "+s+") scale("+o+") rotate("+i+",8,8)"),this._svg.setAttributeNS(null,"width",t+"px"),this._svg.setAttributeNS(null,"height",a+"px"),e.HTMLElementUtils.setElementWidth(this._element,t),e.HTMLElementUtils.setElementHeight(this._element,a)},t})();i.MIN_WIDTH=26,i.ARROW_COLOR="#404040",e.ScrollbarButton=i;var r=(function(){function r(e,t){this.MIN_BAR_SIZE=10,this.min=0,this.max=10,this.viewMin=0,this.viewSize=2,this.smallIncrement=1,this._onscroll=[],this._screenToOffsetScale=1,this.createView(e,t);var i=this;this._element.addEventListener("mousedown",(function(e){i.onBackgroundMouseDown(e)})),this._middleBar.addEventListener("mousedown",(function(e){i.onMiddleBarMouseDown(e)})),this._timerHandle=void 0,this._visible=!0,this.element.winControl=this,$(this._touchPanel).addClass(a)}return r.prototype.scrollBy=function(e){this.scrollTo(this.viewMin+e)},r.prototype.scrollUp=function(){this.scrollBy(-this.smallIncrement)},r.prototype.scrollDown=function(){this.scrollBy(this.smallIncrement)},r.prototype.scrollPageUp=function(){this.scrollBy(-this.viewSize)},r.prototype.scrollPageDown=function(){this.scrollBy(this.viewSize)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,this._element.style.width=e,this.invalidateArrange()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._element.style.height=e,this.invalidateArrange()},enumerable:!0,configurable:!0}),r.prototype.refresh=function(){},Object.defineProperty(r.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxButton",{get:function(){return this._maxButton},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"middleBar",{get:function(){return this._middleBar},enumerable:!0,configurable:!0}),r.prototype._scrollSmallIncrement=function(e){this.scrollBy(this.smallIncrement*e)},Object.defineProperty(r.prototype,"visible",{get:function(){return this._visible},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isInMouseCapture",{get:function(){return void 0!==this._timerHandle},enumerable:!0,configurable:!0}),r.prototype.show=function(e){this._visible=e,this.element.style.visibility=e?"visible":"hidden",this.invalidateArrange()},r.prototype._getMouseOffset=function(e){return void 0!==e.offsetX?{x:e.offsetX,y:e.offsetY}:void 0!==e.layerX?{x:e.layerX,y:e.layerY}:{x:e.screenX,y:e.screenY}},r.prototype._getOffsetXDelta=function(e){return(e.screenX-this._screenPrevMousePos.x)/this._screenToOffsetScale},r.prototype._getOffsetYDelta=function(e){return(e.screenY-this._screenPrevMousePos.y)/this._screenToOffsetScale},r.prototype._getOffsetXTouchDelta=function(e){return this._getMouseOffset(e).x-this._offsetTouchPrevPos.x},r.prototype._getOffsetYTouchDelta=function(e){return this._getMouseOffset(e).y-this._offsetTouchPrevPos.y},r.prototype.initTouch=function(e,t){var a=this;this._touchPanel=e,this._allowMouseDrag=void 0===t||t,"ontouchmove"in e?(e.addEventListener("touchstart",(function(e){return a.onTouchStart(e)})),e.addEventListener("touchmove",(function(e){return a.onTouchMove(e)})),e.addEventListener("touchend",(function(e){return a.onTouchEnd(e)}))):(e.addEventListener("mousedown",(function(e){return a.onTouchMouseDown(e)})),e.addEventListener("mousemove",(function(e){return a.onTouchMouseMove(e)})),e.addEventListener("mouseup",(function(e){return a.onTouchMouseUp(e)})))},r.prototype.onTouchStart=function(e){1===e.touches.length&&this.onTouchMouseDown(e.touches[0])},r.prototype.onTouchMove=function(e){1===e.touches.length&&(e.preventDefault&&e.preventDefault(),this.onTouchMouseMove(e.touches[0]))},r.prototype.onTouchEnd=function(e){this.onTouchMouseUp(1===e.touches.length?e.touches[0]:e,!0)},r.prototype.onTouchMouseDown=function(e){(this._allowMouseDrag||e.pointerType!==MSPointerEvent.MSPOINTER_TYPE_MOUSE)&&("setCapture"in this._touchPanel&&this._touchPanel.setCapture(!0),this._offsetTouchPrevPos=this._offsetTouchStartPos=null,this._touchStarted=!0)},r.prototype._getOffsetTouchDelta=function(e){return null},r.prototype.onTouchMouseMove=function(e){if(this._touchStarted){this._offsetTouchStartPos||(this._offsetTouchPrevPos=this._offsetTouchStartPos=this._getMouseOffset(e));var t=this._getOffsetTouchDelta(e);0!==t&&(this.scrollBy(-t/this._getRunningSize(!1)*this.viewSize),this._offsetTouchPrevPos=this._getMouseOffset(e)),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0}},r.prototype.onTouchMouseUp=function(e,t){if(this._touchStarted&&this._offsetTouchStartPos){var a=this._getMouseOffset(e);!t&&(Math.abs(this._offsetTouchStartPos.x-a.x)>3||Math.abs(this._offsetTouchStartPos.y-a.y)>3)&&(e.preventDefault&&e.preventDefault(),e.cancelBubble=!0)}"releaseCapture"in this._touchPanel&&this._touchPanel.releaseCapture(),this._touchStarted=!1},r.prototype.createView=function(e,t){this._element=document.createElement("div"),this._element.className=r.className,this._element.setAttribute("drag-resize-disabled","true"),0===t&&e.appendChild(this._element),this._minButton=new i(this,(-1)),this._maxButton=new i(this,1),this._middleBar=document.createElement("div"),this._middleBar.className=r.barClassName,this._element.appendChild(this._middleBar)},r.prototype.scrollTo=function(e){var a=Math.min(this.max-this.viewSize,Math.max(this.min,e));a!==this.viewMin&&(this.viewMin=a,t(this._onscroll,null))},r.prototype._scrollByPage=function(e){},r.prototype._getRunningSize=function(e){return null},r.prototype._getOffsetDelta=function(e){return null},r.prototype.scroll=function(e){var t=this._getOffsetDelta(e)/this._getRunningSize(!0)*(this.max-this.min);if(t<0){if(this._getScreenMousePos(e)>=this._screenMaxMousePos)return}else if(t>0&&this._getScreenMousePos(e)<=this._screenMinMousePos)return;this.scrollBy(t)},Object.defineProperty(r.prototype,"actualWidth",{get:function(){return void 0===this._actualWidth&&this.arrange(),this._actualWidth},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"actualHeight",{get:function(){return void 0===!this._actualHeight&&this.arrange(),this._actualHeight},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"actualButtonWidth",{get:function(){return void 0===!this._actualButtonWidth&&this.arrange(),this._actualButtonWidth},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"actualButtonHeight",{get:function(){return void 0===!this._actualButtonHeight&&this.arrange(),this._actualButtonHeight},enumerable:!0,configurable:!0}),r.prototype.arrange=function(){this._actualWidth||(this._actualWidth=this._element.offsetWidth,this._actualHeight=this._element.offsetHeight,this._actualButtonWidth=this._calculateButtonWidth(),this._actualButtonHeight=this._calculateButtonHeight(),this._minButton.arrange(this._actualButtonWidth,this._actualButtonHeight,this._getMinButtonAngle()),this._maxButton.arrange(this._actualButtonWidth,this._actualButtonHeight,this._getMaxButtonAngle()),this._setMaxButtonPosition())},r.prototype._calculateButtonWidth=function(){return null},r.prototype._calculateButtonHeight=function(){return null},r.prototype._getMinButtonAngle=function(){return null},r.prototype._getMaxButtonAngle=function(){return null},r.prototype._setMaxButtonPosition=function(){},r.prototype.invalidateArrange=function(){this._actualWidth=void 0,this._actualHeight=void 0,this._actualButtonWidth=void 0,this._actualButtonHeight=void 0},r.prototype.onHoldBackgroundMouseDown=function(e){var t=this,a=this._timerHandle?r.ScrollbarBackgroundMousedownHoldDelay:r.ScrollbarBackgroundFirstTimeMousedownHoldDelay;this._timerHandle=setTimeout((function(){t.onBackgroundMouseDown(e)}),a)},r.prototype.onBackgroundMouseDown=function(e){var t=this;clearTimeout(this._timerHandle),this._backgroundMouseUpWrapper||(e.cancelBubble=!0,this._backgroundMouseUpWrapper=function(e){t.onBackgroundMouseUp(e)},r.addDocumentMouseUpEvent(this._backgroundMouseUpWrapper)),this._scrollByPage(e),this.refresh(),this.onHoldBackgroundMouseDown(e),e.preventDefault&&e.preventDefault()},r.prototype.onBackgroundMouseUp=function(e){clearTimeout(this._timerHandle),this._timerHandle=void 0,r.removeDocumentMouseUpEvent(this._backgroundMouseUpWrapper),this._backgroundMouseUpWrapper=void 0},r.prototype.getPinchZoomY=function(){return document.documentElement.clientHeight/window.innerHeight},r.prototype.onMiddleBarMouseDown=function(t){t.cancelBubble=!0,this._screenPrevMousePos={x:t.screenX,y:t.screenY},this._screenMinMousePos=this._getScreenMousePos(t)-(this._getScreenContextualLeft(this._middleBar)-this._getScreenContextualRight(this._minButton.element)),this._screenMaxMousePos=this._getScreenMousePos(t)+(this._getScreenContextualLeft(this._maxButton.element)-this._getScreenContextualRight(this._middleBar)),this._screenToOffsetScale=e.HTMLElementUtils.getAccumulatedScale(this.element)*this.getPinchZoomY();var a=this;this._middleBarMouseMoveWrapper=function(e){a.onMiddleBarMouseMove(e)},r.addDocumentMouseMoveEvent(this._middleBarMouseMoveWrapper),this._middleBarMouseUpWrapper=function(e){a.onMiddleBarMouseUp(e)},r.addDocumentMouseUpEvent(this._middleBarMouseUpWrapper),t.preventDefault&&t.preventDefault()},r.prototype.onMiddleBarMouseMove=function(e){this._screenPrevMousePos&&(this.scroll(e),this.refresh(),this._screenPrevMousePos={x:e.screenX,y:e.screenY})},r.prototype.onMiddleBarMouseUp=function(e){this._screenPrevMousePos=void 0,r.removeDocumentMouseMoveEvent(this._middleBarMouseMoveWrapper),this._middleBarMouseMoveWrapper=void 0,r.removeDocumentMouseUpEvent(this._middleBarMouseUpWrapper),this._middleBarMouseUpWrapper=void 0,e.preventDefault&&e.preventDefault()},r.prototype._getScreenContextualLeft=function(e){return null},r.prototype._getScreenContextualRight=function(e){return null},r.prototype.onMouseWheel=function(e){e&&this.mouseWheel(e)},r.prototype.mouseWheel=function(e){this.visible&&(e<0?e=Math.min(-r.MouseWheelRange,e):e>0&&(e=Math.max(r.MouseWheelRange,e)),this.scrollBy(-e/r.MouseWheelRange*this.smallIncrement))},r.prototype._getScreenMousePos=function(e){return null},r.addDocumentMouseUpEvent=function(e){document.addEventListener("mouseup",e)},r.removeDocumentMouseUpEvent=function(e){document.removeEventListener("mouseup",e)},r.addDocumentMouseMoveEvent=function(e){document.addEventListener("mousemove",e)},r.removeDocumentMouseMoveEvent=function(e){document.removeEventListener("mousemove",e)},r})();r.DefaultScrollbarWidth="15px",r.ScrollbarBackgroundFirstTimeMousedownHoldDelay=500,r.ScrollbarBackgroundMousedownHoldDelay=50,r.MouseWheelRange=120,r.className="scroll-bar-div",r.barClassName="scroll-bar-part-bar",r.arrowClassName="scroll-bar-part-arrow",e.Scrollbar=r;var o=(function(t){function a(e,a){var i=t.call(this,e,a)||this;return i.height=r.DefaultScrollbarWidth,i}return __extends(a,t),a.prototype._calculateButtonWidth=function(){return Math.min(this.actualWidth/2,Math.max(this.actualHeight,i.MIN_WIDTH))},a.prototype._calculateButtonHeight=function(){return this.actualHeight},a.prototype._getMinButtonAngle=function(){return-180},a.prototype._getMaxButtonAngle=function(){return 0},a.prototype._setMaxButtonPosition=function(){e.HTMLElementUtils.setElementLeft(this.maxButton.element,this.actualWidth-this.actualButtonWidth)},a.prototype.refresh=function(){this.arrange();var t=this.actualWidth-2*this.actualButtonWidth-2,a=this.viewSize/(this.max-this.min)*t;a<this.MIN_BAR_SIZE&&(t-=this.MIN_BAR_SIZE-a,a=this.MIN_BAR_SIZE),t<0&&(t=0,a=0),a=Math.min(a,t);var i=this.viewMin/(this.max-this.min)*t;e.HTMLElementUtils.setElementWidth(this.middleBar,a),e.HTMLElementUtils.setElementHeight(this.middleBar,this.actualHeight),e.HTMLElementUtils.setElementLeft(this.middleBar,this.actualButtonWidth+1+i)},a.prototype.show=function(a){a!==this.visible&&(t.prototype.show.call(this,a),a?this.element.style.height=this.height:e.HTMLElementUtils.setElementHeight(this.element,0))},a.prototype._scrollByPage=function(e){var t=this.middleBar.offsetLeft,a=t+this.middleBar.offsetWidth,i=void 0===e.offsetX?e.layerX:e.offsetX;i>a?this.scrollPageDown():i<t&&this.scrollPageUp()},a.prototype._getRunningSize=function(e){var t=this.actualWidth;if(e){var a=this.actualButtonWidth+1;t-=2*a;var i=t*(this.viewSize/(this.max-this.min));i<this.MIN_BAR_SIZE&&(t-=this.MIN_BAR_SIZE-i)}return t},a.prototype._getOffsetDelta=function(e){return this._getOffsetXDelta(e)},a.prototype._getOffsetTouchDelta=function(e){return this._getOffsetXTouchDelta(e)},a.prototype._getScreenContextualLeft=function(e){return e.getBoundingClientRect().left},a.prototype._getScreenContextualRight=function(e){return e.getBoundingClientRect().right},a.prototype._getScreenMousePos=function(e){return e.screenX},a})(r);e.HorizontalScrollbar=o;var n=(function(t){function a(e,a){var i=t.call(this,e,a)||this;return i.width=r.DefaultScrollbarWidth,i}return __extends(a,t),a.prototype._calculateButtonWidth=function(){return this.actualWidth},a.prototype._calculateButtonHeight=function(){return Math.min(this.actualHeight/2,Math.max(this.actualWidth,i.MIN_WIDTH))},a.prototype._getMinButtonAngle=function(){return-90},a.prototype._getMaxButtonAngle=function(){return 90},a.prototype._setMaxButtonPosition=function(){e.HTMLElementUtils.setElementTop(this.maxButton.element,this.actualHeight-this.actualButtonHeight)},a.prototype.refresh=function(){this.arrange();var t=this.actualHeight-2*this.actualButtonHeight-2,a=this.viewSize/(this.max-this.min)*t;a<this.MIN_BAR_SIZE&&(t-=this.MIN_BAR_SIZE-a,a=this.MIN_BAR_SIZE),t<0&&(t=0,a=0);var i=this.viewMin/(this.max-this.min)*t;e.HTMLElementUtils.setElementWidth(this.middleBar,this.actualWidth),e.HTMLElementUtils.setElementHeight(this.middleBar,a),e.HTMLElementUtils.setElementTop(this.middleBar,this.actualButtonHeight+1+i)},a.prototype.show=function(a){a!==this.visible&&(t.prototype.show.call(this,a),a?this.element.style.width=this.width:e.HTMLElementUtils.setElementWidth(this.element,0))},a.prototype._scrollByPage=function(e){var t=this.middleBar.offsetTop,a=t+this.middleBar.offsetHeight,i=void 0===e.offsetY?e.layerY:e.offsetY;i>a?this.scrollPageDown():i<t&&this.scrollPageUp()},a.prototype._getRunningSize=function(e){var t=this.actualHeight;if(e){var a=this.actualButtonHeight+1;t-=2*a;var i=t*(this.viewSize/(this.max-this.min));i<this.MIN_BAR_SIZE&&(t-=this.MIN_BAR_SIZE-i)}return t},a.prototype._getOffsetDelta=function(e){return this._getOffsetYDelta(e)},a.prototype._getOffsetTouchDelta=function(e){return this._getOffsetYTouchDelta(e)},a.prototype._getScreenContextualLeft=function(e){return e.getBoundingClientRect().top},a.prototype._getScreenContextualRight=function(e){return e.getBoundingClientRect().bottom},a.prototype._getScreenMousePos=function(e){return e.screenY},a})(r);e.VerticalScrollbar=n})(t=e.controls||(e.controls={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){var a=e.visuals.SlicerUtil,i="drag-resize-disabled",r=0,o=0,n=(function(){function e(e){this.settings=e,this.init(),this.applyStyles(),this.setValue(this.settings.selectedValue)}return e.prototype.update=function(t){_.extend(this.settings,t),e.populateOptions(this.select,this.settings.options),null!=this.settings.selectedValue&&this.setValue(this.settings.selectedValue),this.select.selectmenu("refresh"),this.applyStyles(),this.applyState()},e.prototype.disableOption=function(e){for(var t=this.select.find("option"),a=0;a<t.length;a++){var i=t[a],r=i.getAttribute("value");r===e&&i.setAttribute("disabled","true")}this.select.selectmenu("refresh")},e.prototype.enableOption=function(e){for(var t=this.select.find("option"),a=0;a<t.length;a++){var i=t[a],r=i.getAttribute("value");r===e&&i.setAttribute("disabled","false")}this.select.selectmenu("refresh")},e.prototype.close=function(){this.select.selectmenu("close")},e.prototype.setValue=function(e){this.select.val(e)},e.prototype.init=function(){var t=this;this.select=InJs.DomFactory.select(),this.select.attr(i,"true").appendTo(this.settings.container),e.populateOptions(this.select,this.settings.options),this.select.selectmenu({open:function(){a.fixWidgetPosition(t.menuWidget,t.widget,{left:-o,top:r},!0)},select:function(e){e.stopPropagation()},width:"auto"}),this.settings.onChange&&this.select.on("selectmenuchange",(function(e,a){var i=a.item.value;t.settings.onChange(i)})),this.applyState(),this.widget=this.select.selectmenu("widget"),this.menuWidget=this.select.selectmenu("menuWidget").parent(),this.menuWidget.addClass(this.settings.className)},e.prototype.applyState=function(){this.settings.disabled?this.select.selectmenu("disable"):this.select.selectmenu("enable")},e.prototype.applyStyles=function(){this.settings.css&&this.widget.css(this.settings.css)},e.populateOptions=function(e,t){e.find("option").remove();for(var a=0,i=t;a<i.length;a++){var r=i[a];$("<option />").attr("value",r.value).text(r.text).appendTo(e)}},e})();t.SelectMenu=n})(a=t.controls||(t.controls={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(a){var i=e.visuals.SlicerUtil.DisplayNameKeys,r=e.visuals.controls.SelectMenu,o=jsCommon.PixelConverter,n="slicer-header",s="slicer-select-menu",l="slicer-header-title",c="slicer-header-clear",u="slicer-header-text",d="slicer-header-selectmenu",p=(function(){function a(e,t){this.services=t,this.settings=e,this.data=a.DefaultData(),this.render()}return a.DefaultData=function(){return{borderStyle:"solid",borderBottomWidth:1,show:!0,outline:t.outline.none,fontColor:"#000000",textSize:9,outlineColor:"#808080",outlineWeight:1,searchEnabled:!1,background:null,menu:{fontColor:"#666666"}}},a.InFocusModeData=function(){var e=a.DefaultData();return e.borderStyle="none",e.background="#EAEAEA",e.textSize=o.toPoint(13),e.fontColor="#212121",e},a.prototype.enumerateObjectInstances=function(e){if(this.data)return"header"===e.objectName?[{selector:null,objectName:"header",properties:{show:this.data.show,fontColor:this.data.fontColor,background:this.data.background,outline:this.data.outline,textSize:this.data.textSize,outlineColor:this.data.outlineColor,outlineWeight:this.data.outlineWeight}}]:"general"===e.objectName?[{selector:null,objectName:"general",properties:{outlineColor:this.data.outlineColor,outlineWeight:this.data.outlineWeight}}]:void 0},a.prototype.update=function(e,t){$.extend(this.settings,t),this.data=this.settings.enableInFocusRenderers&&this.settings.isInFocus?a.InFocusModeData():a.converter(e),this.updateTitle(),this.updateSelectMenu()},a.converter=function(i){var r=a.DefaultData(),o=i.objects.getStaticObjects();return o&&(r.show=e.DataViewObjects.getValue(o,t.slicerProps.header.show,r.show),r.fontColor=e.DataViewObjects.getFillColor(o,t.slicerProps.header.fontColor,r.fontColor),r.menu.fontColor=e.DataViewObjects.getFillColor(o,t.slicerProps.header.fontColor,r.menu.fontColor),r.background=e.DataViewObjects.getFillColor(o,t.slicerProps.header.background,r.background),r.outlineColor=e.DataViewObjects.getFillColor(o,t.slicerProps.general.outlineColor,r.outlineColor),r.outlineWeight=e.DataViewObjects.getValue(o,t.slicerProps.general.outlineWeight,r.outlineWeight),r.outline=e.DataViewObjects.getValue(o,t.slicerProps.header.outline,r.outline),r.textSize=e.DataViewObjects.getValue(o,t.slicerProps.header.textSize,r.textSize),r.searchEnabled=e.DataViewObjects.getValue(o,t.slicerProps.general.selfFilterEnabled,r.searchEnabled)),r},a.prototype.render=function(){this.header=InJs.DomFactory.div().addClass(n).appendTo(this.settings.host),this.addTitle(),this.addSelectMenu()},a.prototype.addSelectMenu=function(){var e=this;this.selectMenuContainer=InJs.DomFactory.div().addClass(d).appendTo(this.title);var t={onChange:function(t){e.settings.onChange&&e.settings.onChange(t)},container:this.selectMenuContainer,options:this.getSelectMenuOptions(),selectedValue:this.settings.selectedValue,className:s,disabled:2===this.settings.visibilityState};this.selectMenu=new r(t),this.settings.hoverContainer.hover((function(){0!==e.services.getViewMode()&&e.selectMenuContainer.show()}),(function(){e.selectMenuContainer.hide()}))},a.prototype.addTitle=function(){var e=this;this.title=InJs.DomFactory.div().addClass(l).appendTo(this.header),this.clearButton=InJs.DomFactory.span().addClass(c).attr("title",this.services.localize(i.Clear)).appendTo(this.title),this.clearButton.click((function(){e.settings.onClear&&e.settings.onClear()})),this.settings.hoverContainer.hover((function(){e.clearButton.show()}),(function(){e.clearButton.hide()})),this.textElement=$("<h2 />").addClass(u).appendTo(this.title)},a.prototype.updateTitle=function(){if(this.data.show){var e=!1;if(this.data.searchEnabled){var i=a.DefaultData();e=this.data.outline===i.outline&&this.data.outlineWeight===i.outlineWeight&&this.data.outlineColor===i.outlineColor}this.title.show(),this.title.css({"border-style":e?"none":this.data.borderStyle,"border-color":this.data.outlineColor,"border-width":t.VisualBorderUtil.getBorderWidth(this.data.outline,this.data.outlineWeight),"background-color":_.isEmpty(this.data.background)?"":this.data.background}),this.textElement.css({"font-size":o.fromPoint(this.data.textSize),color:this.data.fontColor}),this.textElement.text(this.settings.text).attr("title",this.settings.text)}else this.title.hide()},a.prototype.updateSelectMenu=function(){0===this.services.getViewMode()?this.selectMenuContainer.hide():this.selectMenu.update({options:this.getSelectMenuOptions(),selectedValue:this.settings.selectedValue,disabled:2===this.settings.visibilityState})},a.prototype.getSelectMenuOptions=function(){for(var e=[],t=this.settings.slicerModeOptions,a=0,i=t;a<i.length;a++){var r=i[a],o=r.displayName({get:this.services.localize});e.push({text:o,value:r.value})}return e},a})();a.SlicerHeader=p})(a=t.controls||(t.controls={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(t){var a="unselectable",i=(function(){function e(e,t){this._element=e,this._handler=t,this._elementMouseDownWrapper=null,this._elementMouseMoveWrapper=null,this._elementMouseOutWrapper=null,this._documentMouseMoveWrapper=null,this._documentMouseUpWrapper=null,this._startMousePosition=null,this._originalCursor=null}return e.addDocumentMouseUpEvent=function(e){document.addEventListener("mouseup",e)},e.removeDocumentMouseUpEvent=function(e){document.removeEventListener("mouseup",e)},e.addDocumentMouseMoveEvent=function(e){document.addEventListener("mousemove",e)},e.removeDocumentMouseMoveEvent=function(e){document.removeEventListener("mousemove",e)},e.getMouseCoordinates=function(e){return{x:e.pageX,y:e.pageY}},e.getMouseCoordinateDelta=function(e,t){return{x:t.x-e.x,y:t.y-e.y}},e.prototype.initialize=function(){var e=this;this._elementMouseDownWrapper=function(t){return e.onElementMouseDown(t)},this._element.addEventListener("mousedown",this._elementMouseDownWrapper),this._elementMouseMoveWrapper=function(t){return e.onElementMouseMove(t)},this._element.addEventListener("mousemove",this._elementMouseMoveWrapper),this._elementMouseOutWrapper=function(t){return e.onElementMouseOut(t)},this._element.addEventListener("mouseout",this._elementMouseOutWrapper),this._elementMouseDoubleClickOutWrapper=function(t){return e.onElementMouseDoubleClick(t)},this._element.addEventListener("dblclick",this._elementMouseDoubleClickOutWrapper)},e.prototype.uninitialize=function(){this._element.removeEventListener("mousedown",this._elementMouseDownWrapper),this._elementMouseDownWrapper=null,this._element.removeEventListener("mousemove",this._elementMouseMoveWrapper),this._elementMouseMoveWrapper=null,this._element.removeEventListener("mouseout",this._elementMouseOutWrapper),this._elementMouseOutWrapper=null,this._element.removeEventListener("dblclick",this._elementMouseDoubleClickOutWrapper),this._elementMouseDoubleClickOutWrapper=null},Object.defineProperty(e.prototype,"cell",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),e.prototype._hotSpot=function(e){return!1},e.prototype.onElementMouseDown=function(t){var a=this,i=e.getMouseCoordinates(t);this._hotSpot(i)&&("setCapture"in this._element&&this._element.setCapture(),t.cancelBubble=!0,this._startMousePosition=i,this._documentMouseMoveWrapper=function(e){return a.onDocumentMouseMove(e)},e.addDocumentMouseMoveEvent(this._documentMouseMoveWrapper),this._documentMouseUpWrapper=function(e){return a.onDocumentMouseUp(e)},e.addDocumentMouseUpEvent(this._documentMouseUpWrapper),document.documentElement&&(this._originalCursor=document.documentElement.style.cursor,document.documentElement.style.cursor=e.resizeCursor),this._handler.onStartResize(this.cell,this._startMousePosition.x,this._startMousePosition.y))},e.prototype.onElementMouseMove=function(t){this._startMousePosition||(this._hotSpot(e.getMouseCoordinates(t))?null===this._originalCursor&&(this._originalCursor=this._element.style.cursor,this._element.style.cursor=e.resizeCursor):null!==this._originalCursor&&(this._element.style.cursor=this._originalCursor,this._originalCursor=null))},e.prototype.onElementMouseOut=function(e){this._startMousePosition||null!==this._originalCursor&&(this._element.style.cursor=this._originalCursor,this._originalCursor=null)},e.prototype.onElementMouseDoubleClick=function(t){this._hotSpot(e.getMouseCoordinates(t))&&this._handler.onReset(this.cell)},e.prototype.onDocumentMouseMove=function(t){if(this._startMousePosition){var a=e.getMouseCoordinateDelta(this._startMousePosition,e.getMouseCoordinates(t));this._handler.onResize(this.cell,a.x,a.y),t.preventDefault()}},e.prototype.onDocumentMouseUp=function(t){this._startMousePosition=null,"releaseCapture"in this._element&&this._element.releaseCapture(),e.removeDocumentMouseMoveEvent(this._documentMouseMoveWrapper),this._documentMouseMoveWrapper=null,e.removeDocumentMouseUpEvent(this._documentMouseUpWrapper),this._documentMouseUpWrapper=null,document.documentElement&&(document.documentElement.style.cursor=this._originalCursor),t.preventDefault&&t.preventDefault(),this._handler.onEndResize(this.cell)},e})();i.resizeHandleSize=4,i.resizeCursor="e-resize",t.TablixResizer=i;var r=(function(e){function t(t,a,i){var r=e.call(this,a,i)||this;return r._cell=t,r}return __extends(t,e),Object.defineProperty(t.prototype,"cell",{get:function(){return this._cell},enumerable:!0,configurable:!0}),t.prototype._hotSpot=function(e){return e.x>=this.element.getBoundingClientRect().right-i.resizeHandleSize},t})(i);t.TablixDomResizer=r;var o=(function(){function a(e,a){this._tableCell=null,
this._contentElement=t.TablixUtils.createDiv(),this._contentHost=t.TablixUtils.createDiv(),this.layoutKind=a,this._contentElement.appendChild(this._contentHost),this._resizer=null}return a.prototype.initialize=function(e){this._owner=e},Object.defineProperty(a.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),a.prototype.registerTableCell=function(e){this._tableCell=e,e.appendChild(this._contentElement)},Object.defineProperty(a.prototype,"tableCell",{get:function(){return this._tableCell},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"contentElement",{get:function(){return this._contentElement},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"contentHost",{get:function(){return this._contentHost},enumerable:!0,configurable:!0}),a.prototype.registerClickHandler=function(e){this._contentElement.onclick=e},a.prototype.unregisterClickHandler=function(){this._contentElement.onclick=null},a.prototype.onContainerWidthChanged=function(t){e.HTMLElementUtils.setElementWidth(this._contentElement,t)},a.prototype.onContinerHeightChanged=function(t){e.HTMLElementUtils.setElementHeight(this._contentElement,t)},a.prototype.onColumnSpanChanged=function(e){this._tableCell.colSpan=e},a.prototype.onRowSpanChanged=function(e){this._tableCell.rowSpan=e},a.prototype.onTextAlignChanged=function(e){this._tableCell.style.textAlign=e},a.prototype.onClear=function(){this._contentHost.className="",this._tableCell.className=""},a.prototype.onHorizontalScroll=function(t,a){e.HTMLElementUtils.setElementLeft(this._contentHost,a),e.HTMLElementUtils.setElementWidth(this._contentHost,t)},a.prototype.onVerticalScroll=function(t,a){e.HTMLElementUtils.setElementTop(this._contentHost,a),e.HTMLElementUtils.setElementHeight(this._contentHost,t)},a.prototype.onInitializeScrolling=function(){e.HTMLElementUtils.setElementLeft(this._contentHost,0),e.HTMLElementUtils.setElementTop(this._contentHost,0),e.HTMLElementUtils.setElementWidth(this._contentHost,-1),e.HTMLElementUtils.setElementHeight(this._contentHost,-1)},a.prototype.enableHorizontalResize=function(e,t){e!==(null!==this._resizer)&&(e?(this._resizer=new r(this._owner,this._tableCell,t),this._resizer.initialize()):(this._resizer.uninitialize(),this._resizer=null))},a.prototype.disableDragResize=function(){this._tableCell.setAttribute(a._dragResizeDisabledAttributeName,"true")},a})();o._dragResizeDisabledAttributeName="drag-resize-disabled",t.TablixCellPresenter=o;var n=(function(){function e(e){this._tableRow=null,this._fitProportionally=e}return e.prototype.initialize=function(e){this._row=e},e.prototype.createCellPresenter=function(e){return new o(this._fitProportionally,e)},e.prototype.registerRow=function(e){this._tableRow=e},e.prototype.onAppendCell=function(e){var t=e._presenter;if(null===t.tableCell){var a=this._tableRow.insertCell(-1);t.registerTableCell(a)}else this._tableRow.appendChild(t.tableCell)},e.prototype.onInsertCellBefore=function(e,t){var a=e._presenter;if(null===a.tableCell){var i=this._tableRow.insertCell(Math.max(0,t._presenter.tableCell.cellIndex-1));a.registerTableCell(i)}else this._tableRow.insertBefore(e._presenter.tableCell,t._presenter.tableCell)},e.prototype.onRemoveCell=function(e){this._tableRow.removeChild(e._presenter.tableCell)},e.prototype.getHeight=function(){return this.getCellHeight(this._row.getTablixCell())},e.prototype.getCellHeight=function(e){return-1},e.prototype.getCellContentHeight=function(e){return-1},Object.defineProperty(e.prototype,"tableRow",{get:function(){return this._tableRow},enumerable:!0,configurable:!0}),e})();t.TablixRowPresenter=n;var s=(function(e){function t(t,a){var i=e.call(this,a)||this;return i._gridPresenter=t,i}return __extends(t,e),t.prototype.getCellHeight=function(e){return e.containerHeight},t.prototype.getCellContentHeight=function(e){return e.contentHeight},t})(n);t.DashboardRowPresenter=s;var l=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getCellHeight=function(e){return e.containerHeight},t.prototype.getCellContentHeight=function(e){return e.contentHeight},t})(n);t.CanvasRowPresenter=l;var c=(function(){function e(){}return e.prototype.initialize=function(e){this._column=e},e.prototype.getWidth=function(){var e=this.getPersistedWidth();return null==e&&(e=this.getCellWidth(this._column.getTablixCell())),e},e.prototype.getPersistedWidth=function(){return-1},e.prototype.getCellWidth=function(e){return-1},e})();t.TablixColumnPresenter=c;var u=(function(e){function t(t){var a=e.call(this)||this;return a._gridPresenter=t,a}return __extends(t,e),t.prototype.getPersistedWidth=function(){return this._gridPresenter.sizeComputationManager.cellWidth},t.prototype.getCellWidth=function(e){return this._gridPresenter.sizeComputationManager.cellWidth},t})(c);t.DashboardColumnPresenter=u;var d=(function(e){function t(t,a){var i=e.call(this)||this;return i._gridPresenter=t,i._columnIndex=a,i}return __extends(t,e),t.prototype.getPersistedWidth=function(){return this._gridPresenter.getPersistedColumnWidth(this._column)},t.prototype.getCellWidth=function(e){var t=e;return t._presenter?e.contentWidth:0},t})(c);t.CanvasColumnPresenter=d;var p=(function(){function i(e){this._table=t.TablixUtils.createTable(),this._table.className=a,this._footerTable=t.TablixUtils.createTable(),this._footerTable.className=a,this._columnWidthManager=e}return i.prototype.initialize=function(e,t,a,i){this._owner=e,t.appendChild(this._table),a.appendChild(this._footerTable)},i.prototype.getWidth=function(){return-1},i.prototype.getHeight=function(){return-1},i.prototype.getScreenToCssRatioX=function(){return 1},i.prototype.getScreenToCssRatioY=function(){return 1},i.prototype.createRowPresenter=function(){return null},i.prototype.createColumnPresenter=function(e){return null},i.prototype.onAppendRow=function(e){var t=e.presenter;if(null===t.tableRow){var a=this._table.insertRow(-1);t.registerRow(a)}else this._table.tBodies[0].appendChild(e.presenter.tableRow)},i.prototype.onInsertRowBefore=function(e,t){var a=e.presenter;if(null===a.tableRow){var i=this._table.insertRow(Math.max(0,t.presenter.tableRow.rowIndex-1));a.registerRow(i)}else this._table.tBodies[0].insertBefore(e.presenter.tableRow,t.presenter.tableRow)},i.prototype.onRemoveRow=function(e){this._table.tBodies[0].removeChild(e.presenter.tableRow)},i.prototype.onAddFooterRow=function(e){var t=e.presenter;if(null===t.tableRow){var a=this._footerTable.insertRow(-1);t.registerRow(a)}else this._footerTable.tBodies[0].appendChild(e.presenter.tableRow)},i.prototype.onClear=function(){e.HTMLElementUtils.clearChildren(this._table),e.HTMLElementUtils.clearChildren(this._footerTable)},i.prototype.onFillColumnsProportionallyChanged=function(e){e?(this._table.style.width="100%",this._footerTable.style.width="100%"):(this._table.style.width="auto",this._footerTable.style.width="auto")},i.prototype.invokeColumnResizeEndCallback=function(t,a){this._columnWidthManager&&this._columnWidthManager.onColumnWidthChanged(e.TablixColumnWidthManager.getColumnQueryName(t),a)},i.prototype.getPersistedColumnWidth=function(t){if(this._columnWidthManager)return this._columnWidthManager.getPersistedColumnWidth(e.TablixColumnWidthManager.getColumnQueryName(t))},i})();t.TablixGridPresenter=p;var h=(function(e){function t(t){var a=e.call(this)||this;return a._sizeComputationManager=t,a}return __extends(t,e),t.prototype.createRowPresenter=function(){return new s(this,this._owner.fillColumnsProportionally)},t.prototype.createColumnPresenter=function(e){return new u(this)},Object.defineProperty(t.prototype,"sizeComputationManager",{get:function(){return this._sizeComputationManager},enumerable:!0,configurable:!0}),t.prototype.getWidth=function(){return this._sizeComputationManager.gridWidth},t.prototype.getHeight=function(){return this._sizeComputationManager.gridHeight},t})(p);t.DashboardTablixGridPresenter=h;var g=(function(t){function a(e){return t.call(this,e)||this}return __extends(a,t),a.prototype.createRowPresenter=function(){return new l(this._owner.fillColumnsProportionally)},a.prototype.createColumnPresenter=function(e){return new d(this,e)},a.prototype.getWidth=function(){return e.HTMLElementUtils.getElementWidth(this._table)},a.prototype.getHeight=function(){return e.HTMLElementUtils.getElementHeight(this._table)},a})(p);t.CanvasTablixGridPresenter=g})(t=e.internal||(e.internal={}))})(t=e.controls||(e.controls={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){var a;!(function(t){var a=(function(){function e(e){this._binder=e,this._adjustmentFactor=1}return e.prototype._getOwner=function(){return null},Object.defineProperty(e.prototype,"binder",{get:function(){return this._binder},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adjustmentFactor",{get:function(){return this._adjustmentFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsToRealizeCount",{get:function(){return this._itemsToRealizeCount},set:function(e){this._itemsToRealizeCount=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsEstimatedContextualWidth",{get:function(){return this._itemsEstimatedContextualWidth},set:function(e){this._itemsEstimatedContextualWidth=e},enumerable:!0,configurable:!0}),e.prototype.onStartRenderingIteration=function(){var e=this._getOwner();e.measureEnabled&&!e.done&&this._getEstimatedItemsToRealizeCount(),this._realizedLeavesCount=0},e.prototype.onEndRenderingIteration=function(e,t){t||this._getOwner().allItemsRealized||(this._adjustmentFactor*=this._getSizeAdjustment(e))},e.prototype.onEndRenderingSession=function(){this._adjustmentFactor=1},e.prototype.onCornerCellRealized=function(e,t){},e.prototype.onHeaderRealized=function(e,t,a){a&&this._realizedLeavesCount++},Object.defineProperty(e.prototype,"needsToRealize",{get:function(){return this._realizedLeavesCount<this._itemsToRealizeCount},enumerable:!0,configurable:!0}),e.prototype._getEstimatedItemsToRealizeCount=function(){},e.prototype._getSizeAdjustment=function(e){return 1},e})();t.TablixDimensionRealizationManager=a;var i=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"owner",{set:function(e){this._owner=e},enumerable:!0,configurable:!0}),t.prototype._getOwner=function(){return this._owner},t.prototype._getEstimatedItemsToRealizeCount=function(){this.estimateRowsToRealizeCount()},t.prototype.estimateRowsToRealizeCount=function(){return this._owner.dimension.model?void(this._owner.alignToEnd?this.itemsToRealizeCount=this._owner.dimension.getItemsCount()-this._owner.dimension.getIntegerScrollOffset()+1:this.itemsToRealizeCount=Math.ceil(this._owner.contextualWidthToFill/(this._owner.owner.getEstimatedRowHeight()*this.adjustmentFactor)+this._owner.dimension.getFractionScrollOffset())-this._owner.otherLayoutManager.dimension.getDepth()+1):void(this.itemsToRealizeCount=0)},t.prototype.getEstimatedRowHierarchyWidth=function(){if(!this._owner.dimension.model||0===this._owner.dimension.getItemsCount())return 0;var e=new o;this.updateRowHiearchyEstimatedWidth(this._owner.dimension.model,this._owner.dimension._hierarchyNavigator.getIndex(this._owner.dimension.getFirstVisibleItem(0)),e);for(var t=e.items,a=t.length,i=0,r=0;r<a;r++){var n=t[r];i+=0!==n.maxNonLeafWidth?n.maxNonLeafWidth:n.maxLeafWidth}return i},t.prototype.updateRowHiearchyEstimatedWidth=function(e,t,a){if(!(t<0))for(var i=this._owner.owner.owner.hierarchyNavigator,r=this.binder,o=i.getCount(e),s=t;s<o;s++){if(a.leafCount===this.itemsToRealizeCount)return;var l=i.getAt(e,s),c=r.getHeaderLabel(l),u=this._owner.getEstimatedHeaderWidth(c,t),d=i.isLeaf(l),p=i.getLevel(l),h=a.items[p];h||(h=new n,a.items[p]=h),d?(h.maxLeafWidth=Math.max(h.maxLeafWidth,u),a.leafCount=a.leafCount+1):(h.maxNonLeafWidth=Math.max(h.maxNonLeafWidth,u),this.updateRowHiearchyEstimatedWidth(i.getChildren(l),this._owner.dimension.getFirstVisibleChildIndex(l),a))}},t.prototype._getSizeAdjustment=function(e){return e/((this._owner.getRealizedItemsCount()-this._owner.dimension.getFractionScrollOffset())*this._owner.owner.getEstimatedRowHeight())},t})(a);t.RowRealizationManager=i;var r=(function(a){function i(){return a.apply(this,arguments)||this}return __extends(i,a),Object.defineProperty(i.prototype,"owner",{set:function(e){this._owner=e},enumerable:!0,configurable:!0}),i.prototype._getOwner=function(){return this._owner},i.prototype._getEstimatedItemsToRealizeCount=function(){this.estimateColumnsToRealizeCount(this.getEstimatedRowHierarchyWidth())},Object.defineProperty(i.prototype,"rowRealizationManager",{get:function(){return this._owner.otherLayoutManager.realizationManager},enumerable:!0,configurable:!0}),i.prototype.getEstimatedRowHierarchyWidth=function(){return this._owner.otherLayoutManager.done?this._owner.getOtherHierarchyContextualHeight():this.rowRealizationManager.getEstimatedRowHierarchyWidth()*this.adjustmentFactor},i.prototype.estimateColumnsToRealizeCount=function(a){var i=this._owner.contextualWidthToFill-a;if(!this._owner.dimension.model||e.Double.lessOrEqualWithPrecision(i,0,t.DimensionLayoutManager._pixelPrecision))return void(this.itemsToRealizeCount=0);var r=this.binder,o=this._owner.owner.owner.hierarchyNavigator,n=this._owner.dimension.getIntegerScrollOffset(),s=this._owner.dimension.getItemsCount(),l=s-n,c=this._owner.otherLayoutManager.dimension.getIntegerScrollOffset(),u=this._owner.otherLayoutManager.dimension.getItemsCount();if(this.itemsEstimatedContextualWidth=0,this._owner.alignToEnd)return void(this.itemsToRealizeCount=l);for(var d=n;d<s;d++){if(e.Double.greaterOrEqualWithPrecision(this.itemsEstimatedContextualWidth,i,t.DimensionLayoutManager._pixelPrecision))return void(this.itemsToRealizeCount=d-n);var p=0,h=void 0;h=d===n?this._owner.getVisibleSizeRatio():1;var g=o.getLeafAt(this._owner.dimension.model,d),m=r.getHeaderLabel(g);p=Math.max(p,this._owner.getEstimatedHeaderWidth(m,d));for(var y=c;y<u;y++){var f=o.getIntersection(o.getLeafAt(this._owner.otherLayoutManager.dimension.model,y),g);m=r.getCellContent(f),p=Math.max(p,this._owner.getEstimatedBodyCellWidth(m))}this.itemsEstimatedContextualWidth+=p*h*this.adjustmentFactor}this.itemsToRealizeCount=l},i.prototype._getSizeAdjustment=function(e){return e/(this.getEstimatedRowHierarchyWidth()+this.itemsEstimatedContextualWidth)},i})(a);t.ColumnRealizationManager=r;var o=(function(){function e(){this.items=[],this.leafCount=0}return e})();t.RowWidths=o;var n=(function(){function e(){this.maxLeafWidth=0,this.maxNonLeafWidth=0}return e})();t.RowWidth=n})(a=t.internal||(t.internal={}))})(a=t.controls||(t.controls={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(e){var t=(function(){function t(t,a,i){this._scrollable=!1,this._presenter=t,this.extension=a,this._presenter.initialize(this),this._row=i,this.item=null,this.type=null,this._horizontalOffset=0,this._verticalOffset=0,this._colSpan=1,this._rowSpan=1,this._containerWidth=-1,this._containerHeight=-1,this.contentHeight=this.contentWidth=0,this.position=new e.TablixUtils.CellPosition}return t.prototype.unfixRowHeight=function(){this._row.unfixSize()},Object.defineProperty(t.prototype,"colSpan",{get:function(){return this._colSpan},set:function(e){this._colSpan!==e&&(this._presenter.onColumnSpanChanged(e),this._colSpan=e,this._presenter.onContainerWidthChanged(-1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowSpan",{get:function(){return this._rowSpan},set:function(e){this._rowSpan!==e&&(this._presenter.onRowSpanChanged(e),this._rowSpan=e,this._row.unfixSize())},enumerable:!0,configurable:!0}),t.prototype.getCellSpanningHeight=function(){return this._row.getCellSpanningHeight(this)},Object.defineProperty(t.prototype,"textAlign",{get:function(){return this._textAlign},set:function(e){e!==this._textAlign&&(this._presenter.onTextAlignChanged(e),this._textAlign=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalOffset",{get:function(){return this._horizontalOffset},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalOffset",{get:function(){return this._verticalOffset},enumerable:!0,configurable:!0}),t.prototype.isScrollable=function(){return this._scrollable},t.prototype.clear=function(){this.isScrollable()&&this.initializeScrolling(),this._presenter.onClear(),this.setContainerWidth(-1),this.setContainerHeight(-1),this.contentHeight=this.contentWidth=0},t.prototype.initializeScrolling=function(){this._presenter.onInitializeScrolling(),this._horizontalOffset=0,0!==this._verticalOffset&&(this._verticalOffset=0),1===this.colSpan&&this.setContainerWidth(-1),1===this.rowSpan&&this.setContainerHeight(-1)},t.prototype.prepare=function(e){this.isScrollable()&&this.initializeScrolling(),this._scrollable=e},t.prototype.scrollVertically=function(e,t){var a=Math.ceil(-e*t);this._verticalOffset=a,this.isScrollable()?(this._presenter.onVerticalScroll(e,a),this.setContainerHeight(e+a)):this.setContainerHeight(this._row.getCellSpanningHeight(this)+a)},t.prototype.scrollHorizontally=function(e,t){this.isScrollable()&&(this._presenter.onHorizontalScroll(e,t),this.setContainerWidth(e+t))},t.prototype.setContainerWidth=function(e){e!==this._containerWidth&&(this._containerWidth=e,this._presenter.onContainerWidthChanged(e))},Object.defineProperty(t.prototype,"containerWidth",{get:function(){return this._containerWidth},enumerable:!0,configurable:!0}),t.prototype.setContainerHeight=function(e){if(e<0&&(e=-1),e!==this._containerHeight){this._containerHeight=e;var t=this._row.owner.owner,a=t.getBinder();t.wordWrapRowHeaders&&null!=a.applyWordWrapping&&e!==-1&&1===this.type&&!this.position.column.isLast&&a.applyWordWrapping(this.item,this),this._presenter.onContinerHeightChanged(e)}},Object.defineProperty(t.prototype,"containerHeight",{get:function(){return this._containerHeight},enumerable:!0,configurable:!0}),t.prototype.applyStyle=function(e){e&&(e.applyStyle(this),this.contentHeight+=e.getExtraBottom()+e.getExtraTop(),this.contentWidth+=e.getExtraLeft()+e.getExtraRight())},t.prototype.enableHorizontalResize=function(e,t){this._presenter.enableHorizontalResize(e,t)},t.prototype.isColumnResizing=function(){return this._column&&this._column.isResizing()},t})();e.TablixCell=t;var a=(function(){function e(e,t){this._presenter=e,this._presenter.initialize(this),this._containerWidth=-1,this._width=-1,this._sizeFixed=!1,this._aligningWidth=-1,this._fixedToAligningWidth=!1,this._items=[],this._itemType=null,this._footerCell=null,this._columnIndex=t,this.isColumnResizing=!1}return e.prototype.initialize=function(e){this._owner=e,this._realizedRowHeaders=[],this._realizedColumnHeaders=[],this._realizedCornerCells=[],this._realizedBodyCells=[]},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),e.prototype.getType=function(){return this._realizedCornerCells.length>0?0:2},e.prototype.getColumnHeadersOrCorners=function(){return this._realizedCornerCells.length>0?this._realizedCornerCells:this._realizedColumnHeaders},e.prototype.columnHeadersOrCornersEqual=function(e,t,a){if(this._items.length!==t.length)return!1;for(var i=this._items.length,r=0;r<i;r++)if(!this.columnHeaderOrCornerEquals(this._itemType,this._items[r],e,t[r].item,a))return!1;return!0},Object.defineProperty(e.prototype,"itemType",{get:function(){return this._itemType},enumerable:!0,configurable:!0}),e.prototype.getLeafItem=function(){return 0===this._items.length?null:this._items[this._items.length-1]},e.prototype.columnHeaderOrCornerEquals=function(e,t,a,i,r){if(e!==a)return!1;if(0===e){if(!r.cornerCellItemEquals(t,i))return!1}else if(!r.headerItemEquals(t,i))return!1;return!0},e.prototype.OnLeafRealized=function(e){var t=this.getType(),a=this.getColumnHeadersOrCorners();if(this.columnHeadersOrCornersEqual(t,a,e))this.clearSpanningCellsWidth(this._realizedColumnHeaders);else{var i=a.length;this._items=[];for(var r=0;r<i;r++)this._items.push(a[r].item);this._itemType=t,this.clearSize()}},e.prototype.clearSpanningCellsWidth=function(e){for(var t=0;t<e.length;t++){var a=e[t];a.colSpan>1&&a.setContainerWidth(-1)}},e.prototype.addCornerCell=function(e){e._column=this,this._realizedCornerCells.push(e),e.setContainerWidth(this._containerWidth)},e.prototype.addRowHeader=function(e){e._column=this,this._realizedRowHeaders.push(e),e.setContainerWidth(this._containerWidth)},e.prototype.addColumnHeader=function(e,t){e._column=this,this._realizedColumnHeaders.push(e),t&&e.setContainerWidth(this._containerWidth)},e.prototype.addBodyCell=function(e){e._column=this,this._realizedBodyCells.push(e),e.setContainerWidth(this._containerWidth)},Object.defineProperty(e.prototype,"footer",{get:function(){return this._footerCell},set:function(e){this._footerCell=e,e._column=this,e.setContainerWidth(this._containerWidth)},enumerable:!0,configurable:!0}),e.prototype.isResizing=function(){return this.isColumnResizing},e.prototype.onResize=function(e){this.isColumnResizing=!0,e!==this.getContentContextualWidth()&&(this._containerWidth=e,this.setContainerWidth(this._containerWidth),this._sizeFixed=!0,this._fixedToAligningWidth=!1,this._aligningWidth=-1)},e.prototype.onResizeEnd=function(e){this.isColumnResizing=!1;var t=this.owner._presenter;t&&t.invokeColumnResizeEndCallback(this,e)},e.prototype.fixSize=function(){var e=this._aligningWidth!==-1,t=e!==this._fixedToAligningWidth;(!this._sizeFixed||t||e)&&(this._aligningWidth===-1?this.setContainerWidth(this._containerWidth):this.setContainerWidth(this._aligningWidth),this._sizeFixed=!0,this._fixedToAligningWidth=this._aligningWidth!==-1)},e.prototype.clearSize=function(){this._containerWidth=-1,this.setContainerWidth(this._containerWidth),this._sizeFixed=!1},e.prototype.getContentContextualWidth=function(){return this._containerWidth},e.prototype.getCellIContentContextualWidth=function(e){return this._presenter.getCellWidth(e)},e.prototype.getContextualWidth=function(){return this._width!==-1&&this._containerWidth!==-1||(this._width=this._presenter.getWidth()),this._width},e.prototype.calculateSize=function(){if(this._sizeFixed)return this._containerWidth;var e=0,t=this._presenter.getPersistedWidth();if(null!=t){e=t;for(var a=0,i=this._realizedColumnHeaders.length;a<i-1;a++){var r=this._realizedColumnHeaders[a];1===r.colSpan&&(e=Math.max(e,this._presenter.getCellWidth(r)))}return this._containerWidth=e}for(var o=0,n=this._realizedColumnHeaders;o<n.length;o++){var r=n[o];1===r.colSpan&&(e=Math.max(e,this._presenter.getCellWidth(r)))}for(var s=0,l=this._realizedRowHeaders;s<l.length;s++){var r=l[s];1===r.colSpan&&(e=Math.max(e,this._presenter.getCellWidth(r)))}for(var c=0,u=this._realizedCornerCells;c<u.length;c++){var r=u[c];e=Math.max(e,this._presenter.getCellWidth(r))}for(var d=0,p=this._realizedBodyCells;d<p.length;d++){var r=p[d];e=Math.max(e,this._presenter.getCellWidth(r))}return null!==this._footerCell&&1===this._footerCell.colSpan&&(e=Math.max(e,this._presenter.getCellWidth(this._footerCell))),this._containerWidth=e},e.prototype.setAligningContextualWidth=function(e){this._aligningWidth=e},e.prototype.getAligningContextualWidth=function(){return this._aligningWidth},e.prototype.setContainerWidth=function(e){for(var t=0,a=this._realizedColumnHeaders;t<a.length;t++){var i=a[t];1===i.colSpan&&i.setContainerWidth(e)}for(var r=0,o=this._realizedRowHeaders;r<o.length;r++){var i=o[r];1===i.colSpan&&i.setContainerWidth(e)}for(var n=0,s=this._realizedCornerCells;n<s.length;n++){var i=s[n];i.setContainerWidth(e)}for(var l=0,c=this._realizedBodyCells;l<c.length;l++){var i=c[l];i.setContainerWidth(e)}null!==this._footerCell&&1===this._footerCell.colSpan&&this._footerCell.setContainerWidth(e),this._width=e},e.prototype.getTablixCell=function(){var e=this._realizedColumnHeaders.length>0?this._realizedColumnHeaders:this._realizedCornerCells;return e[e.length-1]},e.prototype.getIndex=function(e){return e.realizedColumns.indexOf(this)},e.prototype.getHeaders=function(){return this._realizedColumnHeaders},e.prototype.getOtherDimensionHeaders=function(){return this._realizedRowHeaders},e.prototype.getCellContextualSpan=function(e){return e.colSpan},e.prototype.getOtherDimensionOwner=function(e){return e._row},e})();e.TablixColumn=a;var i=(function(){function e(e){this._containerHeight=-1,this._presenter=e,this._presenter.initialize(this),this._allocatedCells=[],this._heightFixed=!1,this._containerHeight=-1,this._height=-1}return e.prototype.initialize=function(e){this._owner=e,this._realizedRowHeaders=[],this._realizedBodyCells=[],this._realizedCornerCells=[],this._realizedColumnHeaders=[],this._realizedCellsCount=0},Object.defineProperty(e.prototype,"presenter",{get:function(){return this._presenter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),e.prototype.releaseUnusedCells=function(e){this.releaseCells(e,this._realizedCellsCount)},e.prototype.releaseAllCells=function(e){this.releaseCells(e,0)},e.prototype.releaseCells=function(e,t){for(var a=this._allocatedCells,i=a.length,r=t;r<i;r++){var o=a[r];e._unbindCell(o),o.clear()}},e.prototype.moveScrollableCellsToEnd=function(e){for(var t=Math.max(this._realizedRowHeaders.length,this._realizedCornerCells.length),a=t;a<t+e;a++){var i=this._allocatedCells[a];this._presenter.onRemoveCell(i),this._presenter.onAppendCell(i),this._allocatedCells.push(i)}this._allocatedCells.splice(t,e)},e.prototype.moveScrollableCellsToStart=function(e){for(var t=Math.max(this._realizedRowHeaders.length,this._realizedCornerCells.length),a=t;a<t+e;a++){var i=this._allocatedCells.pop();this._presenter.onRemoveCell(i),this._presenter.onInsertCellBefore(i,this._allocatedCells[t]),this._allocatedCells.splice(t,0,i)}},e.prototype.getOrCreateCornerCell=function(e){var t=this.getOrCreateCell();return t.prepare(!1),e.addCornerCell(t),this._realizedCornerCells.push(t),t.setContainerHeight(this._containerHeight),t},e.prototype.getOrCreateRowHeader=function(e,t,a){var i=this.getOrCreateCell();return i.prepare(t),e.addRowHeader(i),this._realizedRowHeaders.push(i),a&&i.setContainerHeight(this._containerHeight),i},e.prototype.getOrCreateColumnHeader=function(e,t,a){var i=this.getOrCreateCell();return i.prepare(t),e.addColumnHeader(i,a),this._realizedColumnHeaders.push(i),i.setContainerHeight(this._containerHeight),i},e.prototype.getOrCreateBodyCell=function(e,t){var a=this.getOrCreateCell();return a.prepare(t),e.addBodyCell(a),this._realizedBodyCells.push(a),a.setContainerHeight(this._containerHeight),a},e.prototype.getOrCreateFooterRowHeader=function(e){var t=this.getOrCreateCell();return t.prepare(!1),e.footer=t,this._realizedRowHeaders.push(t),t.setContainerHeight(this._containerHeight),t},e.prototype.getOrCreateFooterBodyCell=function(e,t){var a=this.getOrCreateCell();return a.prepare(t),e.footer=a,this._realizedBodyCells.push(a),a.setContainerHeight(this._containerHeight),a},e.prototype.getRowHeaderLeafIndex=function(){for(var e=-1,t=this._allocatedCells.length,a=0;a<t&&1===this._allocatedCells[a].type;a++)e++;return e},e.prototype.getAllocatedCellAt=function(e){return this._allocatedCells[e]},e.prototype.moveCellsBy=function(e){if(0!==this._allocatedCells.length)if(e>0)for(var t=this._allocatedCells[0],a=0;a<e;a++){var i=this.createCell(this);this._presenter.onInsertCellBefore(i,t),this._allocatedCells.unshift(i),t=i}else{e=-e;for(var a=0;a<e;a++)this._presenter.onRemoveCell(this._allocatedCells[a]);this._allocatedCells.splice(0,e)}},e.prototype.getRealizedCellCount=function(){return this._realizedCellsCount},e.prototype.getRealizedHeadersCount=function(){return this._realizedRowHeaders.length},e.prototype.getRealizedHeaderAt=function(e){return this._realizedRowHeaders[e]},e.prototype.getTablixCell=function(){var e;return e=this._realizedRowHeaders.length>0?this._realizedRowHeaders:this._realizedCornerCells.length>0?this._realizedCornerCells:this._realizedColumnHeaders,e[e.length-1]},e.prototype.getOrCreateEmptySpaceCell=function(){var e=this._allocatedCells[this._realizedCellsCount];return void 0===e&&(e=this.createCell(this),this._allocatedCells[this._realizedCellsCount]=e,this._presenter.onAppendCell(e)),e},e.prototype.createCell=function(e){var a=this._presenter.createCellPresenter(this._owner.owner.layoutManager.getLayoutKind());return new t(a,a,this)},e.prototype.getOrCreateCell=function(){var e=this._allocatedCells[this._realizedCellsCount];return void 0===e?(e=this.createCell(this),this._allocatedCells[this._realizedCellsCount]=e,this._presenter.onAppendCell(e)):(e.colSpan=1,e.rowSpan=1),this._realizedCellsCount=this._realizedCellsCount+1,e},e.prototype.isResizing=function(){return!1},e.prototype.onResize=function(e){e!==this.getContentContextualWidth()&&(this._containerHeight=e,this.setContentHeight(),this._heightFixed=!0,this.setAligningContextualWidth(-1))},e.prototype.onResizeEnd=function(e){},e.prototype.fixSize=function(){this.setContentHeight(),this._heightFixed=!0},e.prototype.unfixSize=function(){this._heightFixed=!1,this._height=-1},e.prototype.getContentContextualWidth=function(){return this._containerHeight},e.prototype.getCellIContentContextualWidth=function(e){return this.presenter.getCellContentHeight(e)},e.prototype.getCellSpanningHeight=function(e){var t=this.getContextualWidth();if(e.rowSpan>1)for(var a=this.getIndex(this.owner),i=this.owner.realizedRows,r=1;r<e.rowSpan;r++)t+=i[r+a].getContextualWidth();return t},e.prototype.getContextualWidth=function(){return this._height!==-1&&this._containerHeight!==-1||(this._height=this._presenter.getHeight()),this._height},e.prototype.sizeFixed=function(){return this._heightFixed},e.prototype.calculateSize=function(){if(this._heightFixed)return this._containerHeight;for(var e=0,t=this._realizedRowHeaders.length,a=0;a<t;a++){var i=this._realizedRowHeaders[a];1===i.rowSpan&&(e=Math.max(e,this._presenter.getCellContentHeight(i)))}t=this._realizedCornerCells.length;for(var a=0;a<t;a++)e=Math.max(e,this._presenter.getCellContentHeight(this._realizedCornerCells[a]));t=this._realizedColumnHeaders.length;for(var a=0;a<t;a++){var i=this._realizedColumnHeaders[a];1===i.rowSpan&&(e=Math.max(e,this._presenter.getCellContentHeight(i)))}t=this._realizedBodyCells.length;for(var a=0;a<t;a++)e=Math.max(e,this._presenter.getCellContentHeight(this._realizedBodyCells[a]));return this._containerHeight=e},e.prototype.setAligningContextualWidth=function(e){},e.prototype.getAligningContextualWidth=function(){return-1},e.prototype.setContentHeight=function(){for(var e=this._realizedRowHeaders.length,t=e-1;t>=0;t--){var a=this._realizedRowHeaders[t];a.containerHeight!==-1&&a._row.sizeFixed()||(a.setContainerHeight(this._containerHeight),a.rowSpan>1&&a.setContainerHeight(this.getCellSpanningHeight(a)))}for(var i=0,r=this._realizedCornerCells;i<r.length;i++){var a=r[i];a.containerHeight!==-1&&a._row.sizeFixed()||a.setContainerHeight(this._containerHeight)}for(var o=0,n=this._realizedColumnHeaders;o<n.length;o++){var a=n[o];a.containerHeight!==-1&&a._row.sizeFixed()||(a.setContainerHeight(this._containerHeight),a.rowSpan>1&&a.setContainerHeight(this.getCellSpanningHeight(a)))}e=this._realizedBodyCells.length;for(var s=0,l=this._realizedBodyCells;s<l.length;s++){var a=l[s];a.containerHeight!==-1&&a._row.sizeFixed()||a.setContainerHeight(this._containerHeight)}this._height=-1},e.prototype.getIndex=function(e){return e.realizedRows.indexOf(this)},e.prototype.getHeaders=function(){return this._realizedRowHeaders},e.prototype.getOtherDimensionHeaders=function(){return this._realizedColumnHeaders},e.prototype.getCellContextualSpan=function(e){return e.rowSpan},e.prototype.getOtherDimensionOwner=function(e){return e._column},e})();e.TablixRow=i;var r=(function(){function e(e){this._presenter=e,this._footerRow=null;
}return e.prototype.initialize=function(e,t,a){this._owner=e,this._presenter.initialize(this,t,a,e),this.fillColumnsProportionally=!1,this._realizedRows=[],this._realizedColumns=[],this._emptySpaceHeaderCell=null,this._emptyFooterSpaceCell=null},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillColumnsProportionally",{get:function(){return this._fillColumnsProportionally},set:function(e){this._fillColumnsProportionally!==e&&(this._fillColumnsProportionally=e,this._presenter.onFillColumnsProportionallyChanged(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realizedColumns",{get:function(){return this._realizedColumns},set:function(e){this._realizedColumns=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realizedRows",{get:function(){return this._realizedRows},set:function(e){this._realizedRows=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footerRow",{get:function(){return this._footerRow},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"emptySpaceHeaderCell",{get:function(){return this._emptySpaceHeaderCell},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"emptySpaceFooterCell",{get:function(){return this._emptyFooterSpaceCell},enumerable:!0,configurable:!0}),e.prototype.ShowEmptySpaceCells=function(e,t){0!==this._realizedRows.length&&(0===this._realizedRows.length||this._emptySpaceHeaderCell||(this._emptySpaceHeaderCell=this._realizedRows[0].getOrCreateEmptySpaceCell(),this._emptySpaceHeaderCell.rowSpan=e,this._emptySpaceHeaderCell.colSpan=1,this._emptySpaceHeaderCell.setContainerWidth(t)),this._footerRow&&null===this._emptyFooterSpaceCell&&(this._emptyFooterSpaceCell=this._footerRow.getOrCreateEmptySpaceCell(),this._emptyFooterSpaceCell.rowSpan=1,this._emptyFooterSpaceCell.colSpan=1,this._emptyFooterSpaceCell.setContainerWidth(t)))},e.prototype.HideEmptySpaceCells=function(){this._emptySpaceHeaderCell&&(this._emptySpaceHeaderCell.clear(),this._emptySpaceHeaderCell=null),this._emptyFooterSpaceCell&&(this._emptyFooterSpaceCell.clear(),this._emptyFooterSpaceCell=null)},e.prototype.onStartRenderingSession=function(e){e&&(this.clearRows(),this.clearColumns())},e.prototype.onStartRenderingIteration=function(){this.initializeRows(),this.initializeColumns()},e.prototype.onEndRenderingIteration=function(){var e=this._rows;if(void 0!==e)for(var t=e.length,a=0;a<t;a++)e[a].releaseUnusedCells(this._owner);this._footerRow&&this._footerRow.releaseUnusedCells(this._owner)},e.prototype.getOrCreateRow=function(e){var t=this._rows[e];return void 0===t&&(t=new i(this._presenter.createRowPresenter()),t.initialize(this),this._presenter.onAppendRow(t),this._rows[e]=t),void 0===this._realizedRows[e]&&(this._realizedRows[e]=t),t},e.prototype.getOrCreateFootersRow=function(){return null===this._footerRow&&(this._footerRow=new i(this._presenter.createRowPresenter()),this._footerRow.initialize(this),this._presenter.onAddFooterRow(this._footerRow)),this._footerRow},e.prototype.moveRowsToEnd=function(e,t){for(var a=0;a<t;a++){var i=this._rows[a+e];i.unfixSize(),this._presenter.onRemoveRow(i),this._presenter.onAppendRow(i),this._rows.push(i)}this._rows.splice(e,t)},e.prototype.moveRowsToStart=function(e,t){for(var a=this._rows[e],i=0;i<t;i++){var r=this._rows.pop();r.unfixSize(),this._presenter.onRemoveRow(r),this._presenter.onInsertRowBefore(r,a),this._rows.splice(e+i,0,r)}},e.prototype.moveColumnsToEnd=function(e,t){for(var a=this._rows[0]._realizedCornerCells.length,i=Math.max(this._columns[a]._realizedColumnHeaders.length-1,0),r=i;r<this._rows.length;r++)this._rows[r].moveScrollableCellsToEnd(t);for(var r=0;r<t;r++){var o=this._columns[r+e];this._columns.push(o)}this._columns.splice(e,t)},e.prototype.moveColumnsToStart=function(e,t){for(var a=this._rows[0]._realizedCornerCells.length,i=Math.max(this._columns[a]._realizedColumnHeaders.length-1,0),r=i;r<this._rows.length;r++)this._rows[r].moveScrollableCellsToStart(t);for(var r=0;r<t;r++){var o=this._columns.pop();this._columns.splice(e+r,0,o)}},e.prototype.getOrCreateColumn=function(e){var t=this._columns[e];return void 0===t&&(t=new a(this._presenter.createColumnPresenter(e),e),t.initialize(this),this._columns[e]=t),void 0===this._realizedColumns[e]&&(this._realizedColumns[e]=t),t},e.prototype.initializeColumns=function(){this._columns||(this._columns=[]);for(var e=this._columns.length,t=0;t<e;t++)this._columns[t].initialize(this);this._realizedColumns=[]},e.prototype.clearColumns=function(){this._columns=null,this._realizedColumns=null},e.prototype.initializeRows=function(){var e=this._owner.rowDimension.hasFooter()&&null!==this._footerRow;this._realizedRows=[],this._rows||(this._rows=[]);for(var t=this._rows,a=t.length,i=0;i<a;i++)t[i].initialize(this);e&&(this._footerRow||this.getOrCreateFootersRow(),this._footerRow.initialize(this))},e.prototype.clearRows=function(){var e=this._rows;if(e){for(var t=e.length,a=0;a<t;a++)e[a].releaseAllCells(this._owner);this._footerRow&&this._footerRow.releaseAllCells(this._owner),this._presenter.onClear(),this._footerRow=null,this._rows=null,this._realizedRows=null}},e.prototype.getWidth=function(){return this._presenter.getWidth()},e.prototype.getHeight=function(){return this._presenter.getHeight()},e})();e.TablixGrid=r})(t=e.internal||(e.internal={}))})(t=e.controls||(e.controls={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){var a;!(function(a){var i=jsCommon.PixelConverter,r=(function(){function e(){}return Object.defineProperty(e.prototype,"visibleWidth",{get:function(){return this._viewport?this._viewport.width:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleHeight",{get:function(){return this._viewport?this._viewport.height:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridWidth",{get:function(){return this.visibleWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridHeight",{get:function(){return this.visibleHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowHeight",{get:function(){return this._cellHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellWidth",{get:function(){return this._cellWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellHeight",{get:function(){return this._cellHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentWidth",{get:function(){return this._cellWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentHeight",{get:function(){return this._cellHeight},enumerable:!0,configurable:!0}),e.prototype.updateColumnCount=function(e){this._columnCount=e},e.prototype.updateRowHeight=function(e){this._cellHeight=e},e.prototype.updateScalingFactor=function(e){this._scalingFactor=e,this._cellWidth=this.computeColumnWidth(this._columnCount)},e.prototype.updateViewport=function(e){this._viewport=e,this._cellWidth=this.computeColumnWidth(this._columnCount),this._cellHeight=this.computeColumnHeight()},e.prototype.computeColumnWidth=function(t){var a=this._scalingFactor;a||(a=1);var i=a*e.TablixMinimumColumnWidth,r=Math.floor(this._viewport.width/i);return this.fitToColumnCount(r,t)},e.prototype.computeColumnHeight=function(){if(!this.hasImageContent)return this._cellHeight;var e=this._viewport.width;return e<=250?20:e<=510?51:e<=770?52:void 0},e.prototype.fitToColumnCount=function(e,t){var a=Math.min(e,t);return Math.floor(this._viewport.width/a)},e})();r.TablixMinimumColumnWidth=75,a.SizeComputationManager=r;var o=(function(){function t(e,t,a){this._owner=e,this._grid=t,this._lastScrollOffset=null,this._isScrolling=!1,this._fixedSizeEnabled=!0,this._done=!1,this._realizationManager=a}return Object.defineProperty(t.prototype,"owner",{get:function(){return this._owner},set:function(e){this._owner=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"realizationManager",{get:function(){return this._realizationManager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fixedSizeEnabled",{get:function(){return this._fixedSizeEnabled},set:function(e){this._fixedSizeEnabled=e},enumerable:!0,configurable:!0}),t.prototype.onCornerCellRealized=function(e,t,a){this._realizationManager.onCornerCellRealized(e,t)},t.prototype.onHeaderRealized=function(e,t,a){this._realizationManager.onHeaderRealized(e,t,a)},Object.defineProperty(t.prototype,"needsToRealize",{get:function(){return this._realizationManager.needsToRealize},enumerable:!0,configurable:!0}),t.prototype.getVisibleSizeRatio=function(){return 1-this.dimension.getFractionScrollOffset()},Object.defineProperty(t.prototype,"alignToEnd",{get:function(){return this._alignToEnd},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"done",{get:function(){return this._done},enumerable:!0,configurable:!0}),t.prototype._requiresMeasure=function(){return!0},t.prototype.startScrollingSession=function(){this._isScrolling=!0},t.prototype.endScrollingSession=function(){this._isScrolling=!1},t.prototype.isScrolling=function(){return this._isScrolling},t.prototype.isResizing=function(){return!1},t.prototype.getOtherHierarchyContextualHeight=function(){var e=this.dimension.otherDimension,t=e.getDepth(),a=0,i=this._getRealizedItems();if(i.length>0)for(var r=0;r<t;r++)a+=i[r].getContextualWidth();return a},t.prototype._isAutoSized=function(){return!1},t.prototype.onStartRenderingSession=function(){this._measureEnabled=this._requiresMeasure(),this._gridOffset=this.dimension.otherDimension.getDepth()},t.prototype.onEndRenderingSession=function(){this._realizationManager.onEndRenderingSession(),this._alignToEnd=!1,this._done=!1,this._measureEnabled=!0,this._sendDimensionsToControl()},t.prototype._sendDimensionsToControl=function(){},Object.defineProperty(t.prototype,"measureEnabled",{get:function(){return this._measureEnabled},enumerable:!0,configurable:!0}),t.prototype.getFooterContextualWidth=function(){return 0},t.prototype.onStartRenderingIteration=function(e,t){this._measureEnabled&&!this._done&&(this._contextualWidthToFill=(t-this.otherScrollbarContextualWidth)*this.getGridScale()-this.getFooterContextualWidth()),this._realizationManager.onStartRenderingIteration(),e?this._lastScrollOffset=null:null!==this._lastScrollOffset&&this.swapElements()},Object.defineProperty(t.prototype,"allItemsRealized",{get:function(){return this.getRealizedItemsCount()-this._gridOffset===this.dimension.getItemsCount()||0===this.dimension.getItemsCount()},enumerable:!0,configurable:!0}),t.prototype.onEndRenderingIteration=function(){if(!this._done){if(!this._measureEnabled)return this._lastScrollOffset=this.dimension.scrollOffset,void(this._done=!0);var a,i=this.getGridContextualWidth(),r=e.Double.greaterOrEqualWithPrecision(i,this._contextualWidthToFill,t._pixelPrecision),o=this.allItemsRealized;a=r?this.scrollForwardToAlignEnd(i):this.scrollBackwardToFill(i),this._realizationManager.onEndRenderingIteration(i,r);var n=this.dimension.scrollbar.visible;this.updateScrollbar(i),this._done=(r||o)&&this.dimension.scrollbar.visible===n&&e.Double.equalWithPrecision(a,this.dimension.scrollOffset,t._scrollOffsetPrecision),this.dimension.scrollOffset=a,this._lastScrollOffset=this.dimension.scrollOffset}},t.prototype.getScrollDeltaWithinPage=function(){if(null!==this._lastScrollOffset){var e=this.dimension.getIntegerScrollOffset()-Math.floor(this._lastScrollOffset);if(Math.abs(e)<this.getRealizedItemsCount()-this.dimension.otherDimension.getDepth())return e}return null},t.prototype.swapElements=function(){var e=this.getScrollDeltaWithinPage();if(null!==e){var t=this.dimension.otherDimension.getDepth();Math.abs(e)<this.getRealizedItemsCount()-t&&(e>0?this._moveElementsToBottom(t,e):e<0&&this._moveElementsToTop(t,-e))}},t.prototype._getRealizedItems=function(){return null},t.prototype.getRealizedItemsCount=function(){var e=this._getRealizedItems();return e.length},t.prototype._moveElementsToBottom=function(e,t){},t.prototype._moveElementsToTop=function(e,t){},t.prototype.isScrollingWithinPage=function(){return null!==this.getScrollDeltaWithinPage()},t.prototype.getGridContextualWidth=function(){return 0},t.prototype.updateScrollbar=function(e){var t=this.dimension.scrollbar;t.viewMin=this.dimension.scrollOffset,t.min=0,t.max=this.dimension.getItemsCount(),t.viewSize=this.getViewSize(e),this.dimension.scrollbar.show(this.canScroll(e))},t.prototype.getViewSize=function(a){var i=this.getRealizedItemsCount();if(0===i)return 0;for(var r=this._gridOffset,o=0,n=0,s=this._contextualWidthToFill,l=s-this.getOtherHierarchyContextualHeight(),c=this.getMeaurementError(a),u=r;u<i;u++){var d=void 0;d=u===r?this.getVisibleSizeRatio():1;var p=this.getItemContextualWidthWithScrolling(u)*c;if(n+=p,o+=d,e.Double.greaterWithPrecision(n,l,t._pixelPrecision)){o-=(n-l)/p*d;break}}return o},t.prototype.isScrollableHeader=function(e,t,a){if(0!==a||0===this.dimension.getFractionScrollOffset())return!1;var i=this.dimension._hierarchyNavigator;if(i.isLeaf(e))return!0;var r=e,o=t;do{if(o=i.getChildren(r),r=this.dimension.getFirstVisibleItem(i.getLevel(r)+1),void 0===r)break;if(!i.isLastItem(r,o))return!1}while(!i.isLeaf(r));return!0},t.prototype.reachedEnd=function(){return this.dimension.getIntegerScrollOffset()+(this.getRealizedItemsCount()-this._gridOffset)>=this.dimension.getItemsCount()},t.prototype.scrollBackwardToFill=function(a){var i=this.dimension.scrollOffset;if(this.reachedEnd()){var r=this._contextualWidthToFill-a;if(this.dimension.getItemsCount()>0){var o=a/(this.getRealizedItemsCount()-this.dimension.getFractionScrollOffset());i=this.dimension.getValidScrollOffset(Math.floor(this.dimension.scrollOffset-r/o))}this._alignToEnd=!e.Double.equalWithPrecision(i,this.dimension.scrollOffset,t._scrollOffsetPrecision)}return i},t.prototype.getItemContextualWidth=function(e){var t=this._getRealizedItems();return e>=t.length?null:t[e].getContextualWidth()},t.prototype.getItemContextualWidthWithScrolling=function(e){return this.getSizeWithScrolling(this.getItemContextualWidth(e),e)},t.prototype.getSizeWithScrolling=function(e,t){var a;return a=this._gridOffset===t?this.getVisibleSizeRatio():1,e*a},t.prototype.getGridContextualWidthFromItems=function(){for(var e=this.getRealizedItemsCount(),t=0,a=0;a<e;a++)t+=this.getItemContextualWidthWithScrolling(a);return t},t.prototype.getMeaurementError=function(e){return e/this.getGridContextualWidthFromItems()},t.prototype.scrollForwardToAlignEnd=function(a){var i=this.dimension.scrollOffset;if(this._alignToEnd){var r=e.Double.equalWithPrecision(a,this._contextualWidthToFill,t._pixelPrecision);if(!r)for(var o=this.getRealizedItemsCount(),n=this._gridOffset,s=a-this._contextualWidthToFill,l=this.getMeaurementError(a),c=n;c<o;c++){var u=this.getItemContextualWidth(c)*l;if(!e.Double.lessWithPrecision(u,s,t._pixelPrecision)){var d=n===c?1-this.dimension.getFractionScrollOffset():1;i=this.dimension.getValidScrollOffset(this.dimension.scrollOffset+(c-n)+s*d/u);break}s-=u}this._alignToEnd=!r}return i},Object.defineProperty(t.prototype,"dimension",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"otherLayoutManager",{get:function(){return this.dimension.otherDimension.layoutManager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contextualWidthToFill",{get:function(){return this._contextualWidthToFill},enumerable:!0,configurable:!0}),t.prototype.getGridScale=function(){return 0},Object.defineProperty(t.prototype,"otherScrollbarContextualWidth",{get:function(){return 0},enumerable:!0,configurable:!0}),t.prototype.getActualContextualWidth=function(e){return this._isAutoSized()&&!this.canScroll(e)?e:this._contextualWidthToFill},t.prototype.canScroll=function(e){return!1},t.prototype.calculateSizes=function(){this.fixedSizeEnabled&&(this.calculateContextualWidths(),this.calculateSpans())},t.prototype._calculateSize=function(e){return null},t.prototype.calculateContextualWidths=function(){for(var e=this._getRealizedItems(),t=e.length,a=0;a<t;a++){var i=e[a];this.measureEnabled&&i.setAligningContextualWidth(-1),this._calculateSize(i)}},t.prototype.calculateSpans=function(){this.measureEnabled&&(this.updateNonScrollableItemsSpans(),this.updateScrollableItemsSpans())},t.prototype.updateNonScrollableItemsSpans=function(){for(var e=this.otherLayoutManager._getRealizedItems(),t=e.length,a=this.dimension.getDepth(),i=a;i<t;i++){var r=e[i];this.updateSpans(r,r.getHeaders(),!1)}},t.prototype.updateScrollableItemsSpans=function(){for(var e=this.otherLayoutManager._getRealizedItems(),t=Math.min(this.dimension.getDepth(),e.length),a=0;a<t;a++){var i=e[a];this.updateSpans(i,i.getOtherDimensionHeaders(),!0)}},t.prototype.fixSizes=function(){if(this.fixedSizeEnabled)for(var e=this._getRealizedItems(),t=e.length,a=t-1;a>=0;a--)e[a].fixSize()},t.prototype.updateSpans=function(e,t,a){for(var i=this._getRealizedItems(),r=t.length,o=0;o<r;o++){var n=t[o],s=e.getOtherDimensionOwner(n),l=s.getCellContextualSpan(n);if(l>1)for(var c=0,u=s.getIndex(this._grid),d=0;d<l;d++){var p=i[d+u],h=p.getContentContextualWidth();a&&0===o&&0===d&&(h=Math.floor((1-this.dimension.getFractionScrollOffset())*h)),c+=h,d===l-1&&this.updateLastChildSize(n,p,c)}}},t.prototype.updateLastChildSize=function(e,t,a){var i=t.getCellIContentContextualWidth(e)-a;i>0&&t.setAligningContextualWidth(Math.max(t.getAligningContextualWidth(),i+t.getContentContextualWidth()))},t})();o._pixelPrecision=1.0001,o._scrollOffsetPrecision=.01,a.DimensionLayoutManager=o;var n=(function(){function e(e,t,a){this.column=e,this.item=e.getLeafItem(),this.itemType=e.itemType,this.startColumnWidth=t,this.resizingDelta=0,this.animationFrame=null,this.scale=a}return e.prototype.getNewSize=function(){return this.startColumnWidth+this.resizingDelta},e})();a.ResizeState=n;var s=(function(e){function a(t,a,i){var r=e.call(this,t,a,i)||this;return i.owner=r,r.fillProportionally=!1,r._resizeState=null,r}return __extends(a,e),Object.defineProperty(a.prototype,"dimension",{get:function(){return this.owner.owner.columnDimension},enumerable:!0,configurable:!0}),a.prototype.isResizing=function(){return null!==this._resizeState},Object.defineProperty(a.prototype,"fillProportionally",{get:function(){return this._grid.fillColumnsProportionally},set:function(e){this._grid.fillColumnsProportionally=e},enumerable:!0,configurable:!0}),a.prototype.getGridScale=function(){return this._grid._presenter.getScreenToCssRatioX()},Object.defineProperty(a.prototype,"otherScrollbarContextualWidth",{get:function(){return this.dimension.otherDimension.scrollbar.visible?t.HTMLElementUtils.getElementWidth(this.dimension.otherDimension.scrollbar.element):0},enumerable:!0,configurable:!0}),a.prototype._getRealizedItems=function(){return this._grid.realizedColumns||(this._grid.realizedColumns=[]),this._grid.realizedColumns},a.prototype._moveElementsToBottom=function(e,t){this._grid.moveColumnsToEnd(e,t)},a.prototype._moveElementsToTop=function(e,t){this._grid.moveColumnsToStart(e,t)},a.prototype._requiresMeasure=function(){return!this.isScrolling()&&!this.otherLayoutManager.isScrolling()||this.isScrolling()||this.isResizing()},a.prototype.getGridContextualWidth=function(){return this._grid.getWidth()},a.prototype.getFirstVisibleColumn=function(){return this._grid.realizedColumns[this._gridOffset]},a.prototype._isAutoSized=function(){return this.owner.owner.autoSizeWidth},a.prototype.applyScrolling=function(){var e=this.dimension.getFractionScrollOffset(),t=0,a=this.getFirstVisibleColumn();if(void 0!==a){t=a.getContextualWidth();var i=Math.ceil(-t*e);this.scroll(a,t,i)}},a.prototype.scroll=function(e,t,a){this.scrollCells(e._realizedColumnHeaders,t,a),this.scrollBodyCells(this._grid.realizedRows,t,a),null!==e.footer&&e.footer.scrollHorizontally(t,a)},a.prototype.scrollCells=function(e,t,a){for(var i=e.length,r=0;r<i;r++)e[r].scrollHorizontally(t,a)},a.prototype.scrollBodyCells=function(e,t,a){for(var i,r,o=e.length,n=0;n<o;n++)i=e[n]._realizedBodyCells,void 0!==i&&(r=i[0],void 0!==r&&r.scrollHorizontally(t,a))},a.prototype.onStartResize=function(e,a,i){this._resizeState=new n(e._column,e._column.getContentContextualWidth(),t.HTMLElementUtils.getAccumulatedScale(this.owner.owner.container))},a.prototype.onResize=function(e,t,i){var r=this;this.isResizing()&&(this.owner.owner.wordWrapColumnHeaders&&e.unfixRowHeight(),this._resizeState.resizingDelta=Math.round(Math.max(t/this._resizeState.scale,a.minColumnWidth-this._resizeState.startColumnWidth)),null===this._resizeState.animationFrame&&(this._resizeState.animationFrame=requestAnimationFrame((function(){return r.performResizing()}))))},a.prototype.onEndResize=function(e){this.isResizing()&&null!==this._resizeState.animationFrame&&this.performResizing(),this.endResizing(),this._resizeState=null},a.prototype.onReset=function(e){this.owner.owner.wordWrapColumnHeaders&&e.unfixRowHeight(),this._resizeState=new n(e._column,(-1),1),e._column.clearSize(),this.endResizing(),this.owner.owner.refresh(!1),this._resizeState=null},a.prototype.updateItemToResizeState=function(e){if(null!==this._resizeState)for(var t=e.length,a=this.owner.owner.hierarchyNavigator,i=this.otherLayoutManager.dimension.getDepth(),r=i;r<t;r++){var o=e[r];if(o.columnHeaderOrCornerEquals(this._resizeState.itemType,this._resizeState.item,o.itemType,o.getLeafItem(),a)&&o!==this._resizeState.column){this._resizeState.column=o,o.onResize(this._resizeState.getNewSize());break}}},a.prototype.performResizing=function(){if(null!==this._resizeState){this._resizeState.animationFrame=null;var e=this._resizeState.getNewSize();this._resizeState.column.onResize(e),this.owner.owner.refresh(!1)}},a.prototype.endResizing=function(){if(null!==this._resizeState){var e=this._resizeState.getNewSize();this._resizeState.column.onResizeEnd(e)}},a.prototype._sendDimensionsToControl=function(){var e=this.getGridContextualWidth(),t=this.getActualContextualWidth(e),a=this.getOtherHierarchyContextualHeight(),i=this.getGridScale();this.owner.owner.updateColumnDimensions(a/i,(t-a)/i,this.getViewSize(e))},a.prototype.getEstimatedHeaderWidth=function(e,t){return-1},a.prototype.getEstimatedBodyCellWidth=function(e){return-1},a})(o);s.minColumnWidth=10,a.ColumnLayoutManager=s;var l=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getEstimatedHeaderWidth=function(e,t){return this.ignoreColumn(t)?0:this.owner.getCellWidth(void 0)},t.prototype.getEstimatedBodyCellWidth=function(e){return this.owner.getCellWidth(void 0)},t.prototype.canScroll=function(e){return!1},t.prototype._calculateSize=function(e){var t=e.getIndex(this._grid),a=0;return this.ignoreColumn(t)||(a=this.owner.getContentWidth(void 0)),e.onResize(a),e.onResizeEnd(a),a},t.prototype.ignoreColumn=function(e){return 0===e&&!this.owner.binder.hasRowGroups()},t})(s);a.DashboardColumnLayoutManager=l;var c=(function(a){function i(){return a.apply(this,arguments)||this}return __extends(i,a),i.prototype.getEstimatedHeaderWidth=function(e,t){return this.owner.getEstimatedTextWidth(e)},i.prototype.getEstimatedBodyCellWidth=function(e){return this.owner.getEstimatedTextWidth(e)},i.prototype.calculateContextualWidths=function(){for(var e=this._getRealizedItems(),a=[],i=0,r=e.length;i<r;i++){var o=e[i];this.measureEnabled&&o.setAligningContextualWidth(-1);var n=t.TablixColumnWidthManager.getColumnQueryName(o);null!=n&&a.push({queryName:n,width:this._calculateSize(o),isFixed:!1})}this.owner.columnWidthsToPersist=a},i.prototype.canScroll=function(t){return!e.Double.equalWithPrecision(this.dimension.scrollOffset,0,o._scrollOffsetPrecision)||this.getRealizedItemsCount()-this._gridOffset<this.dimension.getItemsCount()&&this._contextualWidthToFill>0||e.Double.greaterWithPrecision(t,this._contextualWidthToFill,o._pixelPrecision)},i.prototype._calculateSize=function(e){return e.calculateSize()},i})(s);a.CanvasColumnLayoutManager=c;var u=(function(e){function a(t,a,i){var r=e.call(this,t,a,i)||this;return i.owner=r,r}return __extends(a,e),Object.defineProperty(a.prototype,"dimension",{get:function(){return this.owner.owner.rowDimension},enumerable:!0,configurable:!0}),a.prototype.getGridScale=function(){return this._grid._presenter.getScreenToCssRatioY()},Object.defineProperty(a.prototype,"otherScrollbarContextualWidth",{get:function(){return this.dimension.otherDimension.scrollbar.visible?t.HTMLElementUtils.getElementHeight(this.dimension.otherDimension.scrollbar.element):0},enumerable:!0,configurable:!0}),a.prototype.startScrollingSession=function(){e.prototype.startScrollingSession.call(this)},a.prototype._getRealizedItems=function(){return this._grid.realizedRows||(this._grid.realizedRows=[]),this._grid.realizedRows},a.prototype._moveElementsToBottom=function(e,t){this._grid.moveRowsToEnd(e,t)},a.prototype._moveElementsToTop=function(e,t){this._grid.moveRowsToStart(e,t)},a.prototype._requiresMeasure=function(){return!this.isScrolling()&&!this.otherLayoutManager.isScrolling()&&!this.otherLayoutManager.isResizing()||this.isScrolling()&&this.dimension.getIntegerScrollOffset()+(this.getRealizedItemsCount()-this._gridOffset)>=this.dimension.getItemsCount()},a.prototype.getGridContextualWidth=function(){return this._grid.getHeight()},a.prototype.getFirstVisibleRow=function(){return this._grid.realizedRows[this._gridOffset]},a.prototype._isAutoSized=function(){return this.owner.owner.autoSizeHeight},a.prototype.applyScrolling=function(){var e=this.dimension.getFractionScrollOffset(),t=0,a=this.getFirstVisibleRow();a&&(t=a.getContextualWidth(),this.scroll(a,t,e))},a.prototype.scroll=function(e,t,a){this.scrollCells(e._realizedRowHeaders,t,a),this.scrollCells(e._realizedBodyCells,t,a)},a.prototype.scrollCells=function(e,t,a){for(var i=e.length,r=0;r<i;r++)e[r].scrollVertically(t,a)},a.prototype.getFooterContextualWidth=function(){return this.owner.owner.rowDimension.hasFooter()&&this.owner.grid.footerRow?this.owner.grid.footerRow.getContextualWidth():0},a.prototype.calculateContextualWidths=function(){if(e.prototype.calculateContextualWidths.call(this),this.fixedSizeEnabled){var t=this._grid.footerRow;t&&this._calculateSize(t)}},a.prototype.fixSizes=function(){e.prototype.fixSizes.call(this),this.fixedSizeEnabled&&this._grid.footerRow&&this._grid.footerRow.fixSize()},a.prototype._sendDimensionsToControl=function(){var e=this.getGridContextualWidth(),t=this.getActualContextualWidth(e),a=this.getOtherHierarchyContextualHeight(),i=this.getGridScale();this.owner.owner.updateRowDimensions(a/i,(t-a)/i,e/i,this.getViewSize(e),this._grid.footerRow?this._grid.footerRow.getContextualWidth()/i:0)},a.prototype.getEstimatedHeaderWidth=function(e,t){return-1},a})(o);a.RowLayoutManager=u;var d=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getEstimatedHeaderWidth=function(e,t){return this.getHeaderWidth(t)},t.prototype.canScroll=function(e){return!1},t.prototype._calculateSize=function(e){return e.calculateSize()},t.prototype.getHeaderWidth=function(e){return 0!==e||this.owner.binder.hasRowGroups()?this.owner.getEstimatedTextWidth(void 0):0},t})(u);a.DashboardRowLayoutManager=d;var p=(function(t){function a(){return t.apply(this,arguments)||this}return __extends(a,t),a.prototype.getEstimatedHeaderWidth=function(e,t){return this.owner.getEstimatedTextWidth(e)},a.prototype.canScroll=function(t){return!e.Double.equalWithPrecision(this.dimension.scrollOffset,0,o._scrollOffsetPrecision)||this.getRealizedItemsCount()-this._gridOffset<this.dimension.getItemsCount()&&this._contextualWidthToFill>0||e.Double.greaterWithPrecision(t,this._contextualWidthToFill,o._pixelPrecision)},a.prototype._calculateSize=function(e){return e.calculateSize()},a})(u);a.CanvasRowLayoutManager=p;var h=(function(){function e(e,t,a,i){this._allowHeaderResize=!0,this._binder=e,this._grid=t,this._columnLayoutManager=a,this._rowLayoutManager=i,this._columnWidthsToPersist=[]}return e.prototype.initialize=function(e){this._owner=e,this._container=e.container,this._gridHost=e.contentHost,this._footersHost=e.footerHost,this._grid.initialize(e,this._gridHost,this._footersHost)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binder",{get:function(){return this._binder},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnWidthsToPersist",{get:function(){return this._columnWidthsToPersist},set:function(e){this._columnWidthsToPersist=e},enumerable:!0,configurable:!0}),e.prototype.getTablixClassName=function(){return null},e.prototype.getLayoutKind=function(){return null},e.prototype.getOrCreateColumnHeader=function(e,t,a,i){var r=this.owner.hierarchyNavigator,o=this._grid.getOrCreateRow(a),n=this._grid.getOrCreateColumn(i+this._columnLayoutManager._gridOffset),s=r.isLeaf(e),l=o.getOrCreateColumnHeader(n,this._columnLayoutManager.isScrollableHeader(e,t,i),s),c=r.getLevel(e);l.position.row.index=l.position.row.indexInSiblings=c,l.position.row.isFirst=0===c,l.position.row.isLast=s;var u=r.getIndex(e);return l.position.column.index=l.position.column.indexInSiblings=u,l.position.column.isFirst=r.areAllParentsFirst(e,t),l.position.column.isLast=r.areAllParentsLast(e,t),this.enableCellHorizontalResize(s,l),l},e.prototype.getOrCreateRowHeader=function(e,t,a,i){var r=this.owner.hierarchyNavigator,o=this._grid.getOrCreateRow(a+this._rowLayoutManager._gridOffset),n=this._grid.getOrCreateColumn(i),s=r.isLeaf(e),l=this._rowLayoutManager.isScrollableHeader(e,t,a);0===o.getRealizedCellCount()&&this.alignRowHeaderCells(e,o);var c=o.getOrCreateRowHeader(n,l,r.isLeaf(e)),u=r.getIndex(e);c.position.row.index=c.position.row.indexInSiblings=u,c.position.row.isFirst=r.areAllParentsFirst(e,t),c.position.row.isLast=r.areAllParentsLast(e,t);var d=r.getLevel(e);return c.position.column.index=c.position.column.indexInSiblings=d,c.position.column.isFirst=0===d,c.position.column.isLast=s,c.enableHorizontalResize(!1,this._columnLayoutManager),c},e.prototype.getOrCreateCornerCell=function(e,t,a){var i=this._grid.getOrCreateRow(a),r=this._grid.getOrCreateColumn(t),o=this._columnLayoutManager.dimension.getDepth(),n=a===o-1,s=i.getOrCreateCornerCell(r),l=a;s.position.row.index=s.position.row.indexInSiblings=l,s.position.row.isFirst=0===l,s.position.row.isLast=n;var c=t;return s.position.column.index=s.position.column.indexInSiblings=c,s.position.column.isFirst=0===c,s.position.column.isLast=c===this._rowLayoutManager.dimension.getDepth()-1,this.enableCellHorizontalResize(n,s),s},e.prototype.getOrCreateBodyCell=function(e,t,a,i,r){var o,n=this._grid.getOrCreateRow(i+this._rowLayoutManager._gridOffset),s=this._grid.getOrCreateColumn(r+this._columnLayoutManager._gridOffset);o=0===n._realizedBodyCells.length&&0!==this._owner.columnDimension.getFractionScrollOffset()||this._rowLayoutManager.isScrollableHeader(t,a,i);var l=n.getOrCreateBodyCell(s,o);return l.position=e.position,l.enableHorizontalResize(!1,this._columnLayoutManager),l},e.prototype.getOrCreateFooterBodyCell=function(e,t){var a,i=this._grid.getOrCreateFootersRow(),r=this._grid.getOrCreateColumn(t+this._columnLayoutManager._gridOffset);a=0===i._realizedBodyCells.length&&0!==this._owner.columnDimension.getFractionScrollOffset();var o=i.getOrCreateFooterBodyCell(r,a);return o.position=e.position,o.enableHorizontalResize(!1,this._columnLayoutManager),o},e.prototype.getOrCreateFooterRowHeader=function(e,t){var a=this._grid.getOrCreateFootersRow(),i=this._grid.getOrCreateColumn(0),r=a.getOrCreateFooterRowHeader(i);return r.position=void 0,r.enableHorizontalResize(!1,this._columnLayoutManager),r},e.prototype.getVisibleWidth=function(){return-1},e.prototype.getVisibleHeight=function(){return-1},e.prototype.updateColumnCount=function(e,t){},e.prototype.updateViewport=function(e){},e.prototype.getEstimatedRowHeight=function(){
return-1},e.prototype.getCellWidth=function(e){return-1},e.prototype.getContentWidth=function(e){return-1},e.prototype.adjustContentSize=function(e){},e.prototype.alignRowHeaderCells=function(e,t){var a=t.getRowHeaderLeafIndex();if(a!==-1){var i=this._owner.rowDimension,r=i.getFirstVisibleChildLeaf(e);this.owner.hierarchyNavigator.headerItemEquals(r,t.getAllocatedCellAt(a).item)&&t.moveCellsBy(this.owner.hierarchyNavigator.getLevel(r)-this.owner.hierarchyNavigator.getLevel(e)-a)}},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowLayoutManager",{get:function(){return this._rowLayoutManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnLayoutManager",{get:function(){return this._columnLayoutManager},enumerable:!0,configurable:!0}),e.prototype.showEmptySpaceHeader=function(){return!1},e.prototype.onStartRenderingSession=function(e,t,a){if(this.showEmptySpaceHeader()){var i=this._grid.emptySpaceHeaderCell;i&&this._binder.unbindEmptySpaceHeaderCell(i),i=this._grid.emptySpaceFooterCell,i&&this._binder.unbindEmptySpaceFooterCell(i),this._grid.HideEmptySpaceCells()}this._scrollingDimension=e,this._scrollingDimension&&this._scrollingDimension.layoutManager.startScrollingSession(),this._rowLayoutManager.onStartRenderingSession(),this._columnLayoutManager.onStartRenderingSession(),this._grid.onStartRenderingSession(a);var r=this._columnLayoutManager.measureEnabled||this._rowLayoutManager.measureEnabled;r&&this.measureSampleText(t)},e.prototype.onEndRenderingSession=function(){if(this._rowLayoutManager.onEndRenderingSession(),this._columnLayoutManager.onEndRenderingSession(),this._scrollingDimension&&this._scrollingDimension.layoutManager.endScrollingSession(),this._scrollingDimension=null,this.showEmptySpaceHeader()){var e=this._columnLayoutManager.contextualWidthToFill-this._columnLayoutManager.getGridContextualWidth();if(e>0){this._grid.ShowEmptySpaceCells(this._owner.columnDimension.getDepth(),e);var t=this._grid.emptySpaceHeaderCell;t&&this._binder.bindEmptySpaceHeaderCell(t),t=this._grid.emptySpaceFooterCell,t&&this._binder.bindEmptySpaceFooterCell(t)}}},e.prototype.onStartRenderingIteration=function(e){this._rowLayoutManager.onStartRenderingIteration(e,this.getVisibleHeight()),this._columnLayoutManager.onStartRenderingIteration(e,this.getVisibleWidth()),this._grid.onStartRenderingIteration()},e.prototype.onEndRenderingIteration=function(){return this._grid.onEndRenderingIteration(),this._columnLayoutManager.calculateSizes(),this._rowLayoutManager.calculateSizes(),this._columnLayoutManager.fixSizes(),this._rowLayoutManager.fixSizes(),this._columnLayoutManager.updateItemToResizeState(this._grid.realizedColumns),this._columnLayoutManager.applyScrolling(),this._rowLayoutManager.applyScrolling(),this._columnLayoutManager.onEndRenderingIteration(),this._rowLayoutManager.onEndRenderingIteration(),this._columnLayoutManager.done&&this._rowLayoutManager.done},e.prototype.onCornerCellRealized=function(e,t){var a=this.owner.hierarchyNavigator.isColumnHierarchyLeaf(e),i=this.owner.hierarchyNavigator.isRowHierarchyLeaf(e);a&&t._column.OnLeafRealized(this._owner.hierarchyNavigator),this._columnLayoutManager.onCornerCellRealized(e,t,a),this._rowLayoutManager.onCornerCellRealized(e,t,i)},e.prototype.onRowHeaderRealized=function(e,t){var a=this._owner.hierarchyNavigator,i=a.isLeaf(e),r=t;r.colSpan>1&&r.setContainerWidth(-1),this._rowLayoutManager.onHeaderRealized(e,t,i)},e.prototype.onRowHeaderFooterRealized=function(e,t){},e.prototype.onColumnHeaderRealized=function(e,t){var a=this._owner.hierarchyNavigator,i=a.isLeaf(e);i&&t._column.OnLeafRealized(this._owner.hierarchyNavigator),this._columnLayoutManager.onHeaderRealized(e,t,i)},e.prototype.onBodyCellRealized=function(e,t){},e.prototype.onBodyCellFooterRealized=function(e,t){},e.prototype.setAllowHeaderResize=function(e){this._allowHeaderResize=e},e.prototype.enableCellHorizontalResize=function(e,t){var a=e&&this._allowHeaderResize;t.enableHorizontalResize(a,this._columnLayoutManager)},e.prototype.getEstimatedTextWidth=function(e){return-1},e.prototype.measureSampleText=function(e){},e})();a.TablixLayoutManager=h;var g=(function(o){function n(e,t,a,i,r){var n,s=new l(null,a,r),c=new d(null,a,i);return n=o.call(this,e,a,s,c)||this,s.owner=n,c.owner=n,n._sizeComputationManager=t,n}return __extends(n,o),n.createLayoutManager=function(e){var t=new r;return new n(e,t,new a.TablixGrid(new a.DashboardTablixGridPresenter(t)),new a.RowRealizationManager(e),new a.ColumnRealizationManager(e))},n.prototype.getTablixClassName=function(){return"tablixDashboard"},n.prototype.getLayoutKind=function(){return 1},n.prototype.showEmptySpaceHeader=function(){return!1},n.prototype.measureSampleText=function(a){var r=e.TextMeasurementService.getSvgMeasurementProperties(a);this._characterHeight=e.TextMeasurementService.estimateSvgTextHeight(r),this._sizeComputationManager.updateRowHeight(this._characterHeight);var o=i.toPoint(parseFloat(r.fontSize)),n=o/t.TablixDefaultTextSize;this._sizeComputationManager.updateScalingFactor(e.Double.toIncrement(n,.05))},n.prototype.getVisibleWidth=function(){return this._sizeComputationManager.visibleWidth},n.prototype.getVisibleHeight=function(){return this._sizeComputationManager.visibleHeight},n.prototype.getCellWidth=function(e){return this._sizeComputationManager.cellWidth},n.prototype.getContentWidth=function(e){return this._sizeComputationManager.contentWidth},n.prototype.getEstimatedTextWidth=function(e){return this._sizeComputationManager.contentWidth},n.prototype.adjustContentSize=function(e){this._sizeComputationManager.hasImageContent=e},n.prototype.updateColumnCount=function(e,t){var a=e?e.getDepth():0,i=t?t.getItemsCount():0,r=a+i;this.binder.hasRowGroups()||r--,this._sizeComputationManager.updateColumnCount(r)},n.prototype.updateViewport=function(e){this._sizeComputationManager.updateViewport(e)},n.prototype.getEstimatedRowHeight=function(){return this._characterHeight},n})(h);a.DashboardTablixLayoutManager=g;var m=(function(e){function i(t,a,i,r){var o,n=new c(null,a,r),s=new p(null,a,i);return o=e.call(this,t,a,n,s)||this,n.owner=o,s.owner=o,o}return __extends(i,e),i.createLayoutManager=function(e,r){return new i(e,new a.TablixGrid(new t.internal.CanvasTablixGridPresenter(r)),new a.RowRealizationManager(e),new a.ColumnRealizationManager(e))},i.prototype.getTablixClassName=function(){return"tablixCanvas"},i.prototype.getLayoutKind=function(){return 0},i.prototype.measureSampleText=function(e){var a=t.internal.TablixUtils.createDiv();a.style.cssFloat="left",a.style.whiteSpace="nowrap",a.style.overflow="hidden",a.style.lineHeight="normal",e.appendChild(a);var i=document.createTextNode("a");a.appendChild(i),this.characterWidth=t.HTMLElementUtils.getElementWidth(a),this.characterHeight=t.HTMLElementUtils.getElementHeight(a),a.removeChild(i),e.removeChild(a)},i.prototype.showEmptySpaceHeader=function(){return!this._columnLayoutManager.fillProportionally},i.prototype.getVisibleWidth=function(){return this._columnLayoutManager.measureEnabled?this._owner.autoSizeWidth&&this._owner.maxWidth?this._owner.maxWidth:t.HTMLElementUtils.getElementWidth(this._container):-1},i.prototype.getVisibleHeight=function(){return this._rowLayoutManager.measureEnabled?this._owner.autoSizeHeight&&this._owner.maxHeight?this._owner.maxHeight:t.HTMLElementUtils.getElementHeight(this._container):-1},i.prototype.getCellWidth=function(e){return e.containerWidth},i.prototype.getContentWidth=function(e){return e.contentWidth},i.prototype.getEstimatedTextWidth=function(e){return e?e.length*this.characterWidth:0},i.prototype.updateColumnCount=function(e,t){},i.prototype.updateViewport=function(e){},i.prototype.getEstimatedRowHeight=function(){return this.characterHeight},i})(h);a.CanvasTablixLayoutManager=m})(a=t.internal||(t.internal={}))})(a=t.controls||(t.controls={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(e){function t(e){if(e)for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function a(e,t){e.style.top=t+"px"}function i(e,t){e.style.left=t+"px"}function r(t,a){e.isAutoSize(a)?t.style.height="":t.style.height=a+"px"}function o(t,a){e.isAutoSize(a)?t.style.width="":t.style.width=a+"px"}function n(e){return e.offsetWidth}function s(e){return e.offsetHeight}function l(e){return e===-1}function c(t){for(var a=1;t;)a*=e.getScale(t),t=t.parentElement;return a}function u(e){e=$(e);var t=e.css("-webkit-transform")||e.css("-moz-transform")||e.css("-ms-transform")||e.css("-o-transform")||e.css("transform");return t&&(t.match(/\d*\.\d*/)&&Number(t.match(/\d*\.\d*/)[0])||t.match(/\d+/)&&Number(t.match(/\d+/)[0]))||1}function d(t,a){var i=t.getBoundingClientRect(),r=e.getAccumulatedScale(t);return{x:(a.pageX-i.left)/r,y:(a.pageY-i.top)/r}}e.clearChildren=t,e.setElementTop=a,e.setElementLeft=i,e.setElementHeight=r,e.setElementWidth=o,e.getElementWidth=n,e.getElementHeight=s,e.isAutoSize=l,e.getAccumulatedScale=c,e.getScale=u,e.getRelativeMouseCoordinates=d})(t=e.HTMLElementUtils||(e.HTMLElementUtils={}))})(t=e.controls||(e.controls={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={})),(function(e){var t;!(function(t){var a;!(function(a){var i;!(function(i){var r,o=InJs.DomFactory,n=e.data.DataViewObjectDefinitions,s=e.data.DataViewRoleWildcard,l=e.data.DataViewMatrixUtils,c=jsCommon.UrlUtils.UrlScheme,u=jsCommon.UrlUtils;!(function(t){function i(e){return e&&e.metadata?e.metadata.objects:null}function r(e,i,r){var o,n=[];switch(r){case a.TablixType.Table:case a.TablixType.TableEx:o=u(i),n=[s.fromRoles(["Values"])];break;case a.TablixType.Matrix:case a.TablixType.PivotTable:o=d(i),n=[s.fromRoles(["Rows","Columns"])];break;default:return}if(o){for(var l=0,c=o;l<c.length;l++){var p=c[l],h={selector:{data:n,metadata:p.queryName},objects:(g={},g[t.ObjectValues]={formattingProperties:[t.PropValuesBackColor.propertyName]},g)};e.push(h)}var g}}function o(e,r,o,n){var s=i(o),l=!0;switch(l=n===a.TablixType.Table?L(o)&&V(s):I(o)&&A(s)||M(o)&&N(s),e.objectName){case t.ObjectGeneral:p(r,s,n,o);break;case t.ObjectGrid:h(r,s,n);break;case t.ObjectColumnHeaders:g(r,s,n);break;case t.ObjectRowHeaders:m(r,s,n);break;case t.ObjectValues:y(r,s,n);break;case t.ObjectTotal:n===a.TablixType.TableEx?f(r,s,a.TablixType.TableEx):l&&(n===a.TablixType.Table?f(r,s,a.TablixType.TableEx):v(r,s));break;case t.ObjectSubTotals:(l||n===a.TablixType.PivotTable)&&b(r,s,n,o);break;case t.ObjectColumnFormatting:C(r,c(o,n),n)}}function c(e,t){switch(t){case a.TablixType.Table:case a.TablixType.TableEx:return u(e);case a.TablixType.Matrix:case a.TablixType.PivotTable:return d(e);default:return}}function u(e){if(e&&e.table&&!_.isEmpty(e.table.columns))return e.table.columns}function d(e){if(e&&e.matrix&&!_.isEmpty(e.matrix.valueSources))return e.matrix.valueSources}function p(e,i,r,o){var n={selector:null,objectName:t.ObjectGeneral,properties:{}},s=n.properties;switch(r){case a.TablixType.Table:s[t.PropGeneralAutoSizeColumns.propertyName]=t.PropGeneralAutoSizeColumns.getValue(i),s[t.PropGeneralTextSize.propertyName]=t.PropGeneralTextSize.getValue(i),L(o)&&(s[t.PropGeneralTableTotals.propertyName]=V(i));break;case a.TablixType.Matrix:s[t.PropGeneralAutoSizeColumns.propertyName]=t.PropGeneralAutoSizeColumns.getValue(i),s[t.PropGeneralTextSize.propertyName]=t.PropGeneralTextSize.getValue(i),M(o)&&(s[t.PropGeneralMatrixRowSubtotals.propertyName]=N(i)),I(o)&&(s[t.PropGeneralMatrixColumnSubtotals.propertyName]=A(i))}e.pushInstance(n)}function h(e,i,r){var o={selector:null,objectName:t.ObjectGeneral,properties:{}},n=o.properties,s=t.PropGridVertical.getValue(i);n[t.PropGridVertical.propertyName]=s,s&&(n[t.PropGridVerticalColor.propertyName]=t.PropGridVerticalColor.getValue(i),n[t.PropGridVerticalWeight.propertyName]=t.PropGridVerticalWeight.getValue(i));var l=r===a.TablixType.Table||r===a.TablixType.TableEx,c=(l?t.PropGridHorizontalTable:t.PropGridHorizontalMatrix).getValue(i);n[(l?t.PropGridHorizontalTable:t.PropGridHorizontalMatrix).propertyName]=c,c&&(n[t.PropGridHorizontalColor.propertyName]=t.PropGridHorizontalColor.getValue(i),n[t.PropGridHorizontalWeight.propertyName]=t.PropGridHorizontalWeight.getValue(i)),n[t.PropGridRowPadding.propertyName]=t.PropGridRowPadding.getValue(i),n[t.PropGridOutlineColor.propertyName]=t.PropGridOutlineColor.getValue(i),n[t.PropGridOutlineWeight.propertyName]=t.PropGridOutlineWeight.getValue(i),r!==a.TablixType.PivotTable&&r!==a.TablixType.TableEx||(n[t.PropGridPivotTableTextSize.propertyName]=t.PropGridPivotTableTextSize.getValue(i)),n[t.PropGridImageHeight.propertyName]=t.PropGridImageHeight.getValue(i),e.pushInstance(o)}function g(e,i,r){var o={selector:null,objectName:t.ObjectColumnHeaders,properties:{fontColor:t.PropColumnsFontColor.getValue(i),backColor:t.PropColumnsBackColor.getValue(i),outline:t.PropColumnsOutline.getValue(i)}},n=o.properties;r!==a.TablixType.PivotTable&&r!==a.TablixType.TableEx||(n[t.PropColumnPivotTableAutoSizeColumns.propertyName]=t.PropColumnPivotTableAutoSizeColumns.getValue(i)),r===a.TablixType.PivotTable&&(o.properties[t.PropColumnsUrlIcon.propertyName]=t.PropColumnsUrlIcon.getValue(i)),r!==a.TablixType.Table&&r!==a.TablixType.TableEx&&r!==a.TablixType.PivotTable||(o.properties[t.PropColumnsWordWrap.propertyName]=t.PropColumnsWordWrap.getValue(i)),e.pushInstance(o)}function m(e,i,r){var o={selector:null,objectName:t.ObjectRowHeaders,properties:{fontColor:t.PropRowsFontColor.getValue(i),backColor:t.PropRowsBackColor.getValue(i),outline:t.PropRowsOutline.getValue(i)}};if(r===a.TablixType.PivotTable){var n=t.PropRowsSteppedLayout.getValue(i);o.properties[t.PropRowsSteppedLayout.propertyName]=n,n&&(o.properties[t.PropRowsSteppedLayoutIndentation.propertyName]=t.PropRowsSteppedLayoutIndentation.getValue(i))}r===a.TablixType.PivotTable&&(o.properties[t.PropRowsUrlIcon.propertyName]=t.PropRowsUrlIcon.getValue(i)),r!==a.TablixType.Matrix&&r!==a.TablixType.PivotTable||(o.properties[t.PropRowsWordWrap.propertyName]=t.PropRowsWordWrap.getValue(i)),e.pushInstance(o)}function y(e,i,r){var o={selector:null,objectName:t.ObjectValues,properties:{fontColorPrimary:t.PropValuesFontColorPrimary.getValue(i),backColorPrimary:t.PropValuesBackColorPrimary.getValue(i),fontColorSecondary:t.PropValuesFontColorSecondary.getValue(i),backColorSecondary:t.PropValuesBackColorSecondary.getValue(i),outline:t.PropValuesOutline.getValue(i)}};r!==a.TablixType.Table&&r!==a.TablixType.TableEx||(o.properties[t.PropValuesUrlIconProp.propertyName]=t.PropValuesUrlIconProp.getValue(i)),r!==a.TablixType.PivotTable&&r!==a.TablixType.TableEx||(o.properties[t.PropValuesWordWrap.propertyName]=t.PropValuesWordWrap.getValue(i)),e.pushInstance(o)}function f(e,i,r){var o,n={selector:null,objectName:t.ObjectTotal,properties:{}};r===a.TablixType.TableEx?(o=t.PropTotalTableExTotals.getValue(i),n.properties[t.PropTotalTableExTotals.propertyName]=o):o=!0,o&&(n.properties[t.PropTotalFontColor.propertyName]=t.PropTotalFontColor.getValue(i),n.properties[t.PropTotalBackColor.propertyName]=t.PropTotalBackColor.getValue(i),n.properties[t.PropTotalOutline.propertyName]=t.PropTotalOutline.getValue(i)),e.pushInstance(n)}function v(e,a){e.pushInstance({selector:null,objectName:t.ObjectTotal,properties:{fontColor:t.PropGrandTotalFontColor.getValue(a),backColor:t.PropGrandTotalBackColor.getValue(a),applyToHeaders:t.PropGrandTotalApplyToHeaders.getValue(a)}})}function b(e,i,r,o){var n={selector:null,objectName:t.ObjectSubTotals,properties:{fontColor:t.PropSubTotalsFontColor.getValue(i),backColor:t.PropSubTotalsBackColor.getValue(i)}},s=n.properties;r===a.TablixType.PivotTable&&(M(o)&&(s[t.PropSubTotalsPivotTableRowSubtotals.propertyName]=R(i)),I(o)&&(s[t.PropSubTotalsPivotTableColumnSubtotals.propertyName]=F(i))),e.pushInstance(n)}function C(e,i,r){if(!_.isEmpty(i))for(var o=0,n=i;o<n.length;o++){var s=n[o];e.pushContainer({displayName:s.displayName});var l=s&&s.objects,c={selector:{metadata:s.queryName},objectName:t.ObjectColumnFormatting,properties:{fontColor:t.PropColumnFormattingFontColor.getValue(l),backColor:t.PropColumnFormattingBackColor.getValue(l),styleHeader:t.PropColumnFormattingStyleHeader.getValue(l),styleValues:t.PropColumnFormattingStyleValues.getValue(l)}};r!==a.TablixType.Matrix&&r!==a.TablixType.PivotTable||(c.properties[t.PropColumnFormattingStyleSubtotals.propertyName]=t.PropColumnFormattingStyleSubtotals.getValue(l)),c.properties[t.PropColumnFormattingStyleTotal.propertyName]=t.PropColumnFormattingStyleTotal.getValue(l),e.pushInstance(c),e.popContainer()}}function S(e){var a=i(e),r={general:{autoSizeColumnWidth:t.PropGeneralAutoSizeColumns.getValue(a),textSize:t.PropGeneralTextSize.getValue(a),totals:V(a)}};r.grid={gridVertical:t.PropGridVertical.getValue(a),gridVerticalColor:t.PropGridVerticalColor.getValue(a),gridVerticalWeight:t.PropGridVerticalWeight.getValue(a),gridHorizontal:t.PropGridHorizontalTable.getValue(a),gridHorizontalColor:t.PropGridHorizontalColor.getValue(a),gridHorizontalWeight:t.PropGridHorizontalWeight.getValue(a),outlineColor:t.PropGridOutlineColor.getValue(a),outlineWeight:t.PropGridOutlineWeight.getValue(a),rowPadding:t.PropGridRowPadding.getValue(a),imageHeight:t.PropGridImageHeight.getValue(a)},r.columnHeaders={fontColor:t.PropColumnsFontColor.getValue(a),backColor:t.PropColumnsBackColor.getValue(a),outline:t.PropColumnsOutline.getValue(a),wordWrap:t.PropColumnsWordWrap.getValue(a)},r.values={fontColorPrimary:t.PropValuesFontColorPrimary.getValue(a),backColorPrimary:t.PropValuesBackColorPrimary.getValue(a),fontColorSecondary:t.PropValuesFontColorSecondary.getValue(a),backColorSecondary:t.PropValuesBackColorSecondary.getValue(a),outline:t.PropValuesOutline.getValue(a),urlIcon:t.PropValuesUrlIconProp.getValue(a)},r.total={fontColor:t.PropTotalFontColor.getValue(a),backColor:t.PropTotalBackColor.getValue(a),outline:t.PropTotalOutline.getValue(a)},r.columnFormatting={};var o=u(e);if(o)for(var n=0,s=o;n<s.length;n++){var l=s[n],c=l&&l.objects;r.columnFormatting[l.queryName]={fontColor:t.PropColumnFormattingFontColor.getValue(c),backColor:t.PropColumnFormattingBackColor.getValue(c),styleHeader:t.PropColumnFormattingStyleHeader.getValue(c),styleValues:t.PropColumnFormattingStyleValues.getValue(c),styleTotal:t.PropColumnFormattingStyleTotal.getValue(c)}}return r}function x(e){var a=i(e),r={general:{autoSizeColumnWidth:t.PropGeneralAutoSizeColumns.getValue(a),textSize:t.PropGeneralTextSize.getValue(a),rowSubtotals:N(a),columnSubtotals:A(a)}};r.grid={gridVertical:t.PropGridVertical.getValue(a),gridVerticalColor:t.PropGridVerticalColor.getValue(a),gridVerticalWeight:t.PropGridVerticalWeight.getValue(a),gridHorizontal:t.PropGridHorizontalMatrix.getValue(a),gridHorizontalColor:t.PropGridHorizontalColor.getValue(a),gridHorizontalWeight:t.PropGridHorizontalWeight.getValue(a),outlineColor:t.PropGridOutlineColor.getValue(a),outlineWeight:t.PropGridOutlineWeight.getValue(a),rowPadding:t.PropGridRowPadding.getValue(a),imageHeight:t.PropGridImageHeight.getValue(a)},r.columnHeaders={fontColor:t.PropColumnsFontColor.getValue(a),backColor:t.PropColumnsBackColor.getValue(a),outline:t.PropColumnsOutline.getValue(a)},r.rowHeaders={fontColor:t.PropRowsFontColor.getValue(a),backColor:t.PropRowsBackColor.getValue(a),outline:t.PropRowsOutline.getValue(a),wordWrap:t.PropRowsWordWrap.getValue(a)},r.values={fontColorPrimary:t.PropValuesFontColorPrimary.getValue(a),backColorPrimary:t.PropValuesBackColorPrimary.getValue(a),fontColorSecondary:t.PropValuesFontColorSecondary.getValue(a),backColorSecondary:t.PropValuesBackColorSecondary.getValue(a),outline:t.PropValuesOutline.getValue(a)},r.grandTotal={fontColor:t.PropGrandTotalFontColor.getValue(a),backColor:t.PropGrandTotalBackColor.getValue(a),applyToHeaders:t.PropGrandTotalApplyToHeaders.getValue(a)},r.subtotals={fontColor:t.PropSubTotalsFontColor.getValue(a),backColor:t.PropSubTotalsBackColor.getValue(a)},r.columnFormatting={};var o=d(e);if(o)for(var n=0,s=o;n<s.length;n++){var l=s[n],c=l&&l.objects;r.columnFormatting[l.queryName]={fontColor:t.PropColumnFormattingFontColor.getValue(c),backColor:t.PropColumnFormattingBackColor.getValue(c),styleHeader:t.PropColumnFormattingStyleHeader.getValue(c),styleValues:t.PropColumnFormattingStyleValues.getValue(c),styleTotal:t.PropColumnFormattingStyleTotal.getValue(c),styleSubTotals:t.PropColumnFormattingStyleSubtotals.getValue(c)}}return r}function w(e){var a=i(e),r={general:{autoSizeColumnWidth:t.PropColumnPivotTableAutoSizeColumns.getValue(a),textSize:t.PropGridPivotTableTextSize.getValue(a),rowSubtotals:R(a),columnSubtotals:F(a)},grid:{gridVertical:t.PropGridVertical.getValue(a),gridVerticalColor:t.PropGridVerticalColor.getValue(a),gridVerticalWeight:t.PropGridVerticalWeight.getValue(a),gridHorizontal:t.PropGridHorizontalMatrix.getValue(a),gridHorizontalColor:t.PropGridHorizontalColor.getValue(a),gridHorizontalWeight:t.PropGridHorizontalWeight.getValue(a),outlineColor:t.PropGridOutlineColor.getValue(a),outlineWeight:t.PropGridOutlineWeight.getValue(a),rowPadding:t.PropGridRowPadding.getValue(a),imageHeight:t.PropGridImageHeight.getValue(a)},columnHeaders:{fontColor:t.PropColumnsFontColor.getValue(a),backColor:t.PropColumnsBackColor.getValue(a),outline:t.PropColumnsOutline.getValue(a),urlIcon:t.PropColumnsUrlIcon.getValue(a),wordWrap:t.PropColumnsWordWrap.getValue(a)},rowHeaders:{fontColor:t.PropRowsFontColor.getValue(a),backColor:t.PropRowsBackColor.getValue(a),outline:t.PropRowsOutline.getValue(a),steppedLayout:t.PropRowsSteppedLayout.getValue(a),steppedLayoutIndentation:t.PropRowsSteppedLayoutIndentation.getValue(a),urlIcon:t.PropRowsUrlIcon.getValue(a),wordWrap:t.PropRowsWordWrap.getValue(a)},values:{fontColorPrimary:t.PropValuesFontColorPrimary.getValue(a),backColorPrimary:t.PropValuesBackColorPrimary.getValue(a),fontColorSecondary:t.PropValuesFontColorSecondary.getValue(a),backColorSecondary:t.PropValuesBackColorSecondary.getValue(a),outline:t.PropValuesOutline.getValue(a),wordWrap:t.PropValuesWordWrap.getValue(a)},grandTotal:{fontColor:t.PropGrandTotalFontColor.getValue(a),backColor:t.PropGrandTotalBackColor.getValue(a),applyToHeaders:t.PropGrandTotalApplyToHeaders.getValue(a)},subtotals:{fontColor:t.PropSubTotalsFontColor.getValue(a),backColor:t.PropSubTotalsBackColor.getValue(a)}};r.columnFormatting={};var o=d(e);if(o)for(var n=0,s=o;n<s.length;n++){var l=s[n],c=l&&l.objects;r.columnFormatting[l.queryName]={fontColor:t.PropColumnFormattingFontColor.getValue(c),backColor:t.PropColumnFormattingBackColor.getValue(c),styleHeader:t.PropColumnFormattingStyleHeader.getValue(c),styleValues:t.PropColumnFormattingStyleValues.getValue(c),styleTotal:t.PropColumnFormattingStyleTotal.getValue(c),styleSubTotals:t.PropColumnFormattingStyleSubtotals.getValue(c)}}return r}function P(e){var a=i(e),r={general:{autoSizeColumnWidth:t.PropColumnPivotTableAutoSizeColumns.getValue(a),textSize:t.PropGridPivotTableTextSize.getValue(a),totals:t.PropTotalTableExTotals.getValue(a)}};r.grid={gridVertical:t.PropGridVertical.getValue(a),gridVerticalColor:t.PropGridVerticalColor.getValue(a),gridVerticalWeight:t.PropGridVerticalWeight.getValue(a),gridHorizontal:t.PropGridHorizontalTable.getValue(a),gridHorizontalColor:t.PropGridHorizontalColor.getValue(a),gridHorizontalWeight:t.PropGridHorizontalWeight.getValue(a),outlineColor:t.PropGridOutlineColor.getValue(a),outlineWeight:t.PropGridOutlineWeight.getValue(a),rowPadding:t.PropGridRowPadding.getValue(a),imageHeight:t.PropGridImageHeight.getValue(a)},r.columnHeaders={fontColor:t.PropColumnsFontColor.getValue(a),backColor:t.PropColumnsBackColor.getValue(a),outline:t.PropColumnsOutline.getValue(a),wordWrap:t.PropColumnsWordWrap.getValue(a)},r.values={fontColorPrimary:t.PropValuesFontColorPrimary.getValue(a),backColorPrimary:t.PropValuesBackColorPrimary.getValue(a),fontColorSecondary:t.PropValuesFontColorSecondary.getValue(a),backColorSecondary:t.PropValuesBackColorSecondary.getValue(a),outline:t.PropValuesOutline.getValue(a),urlIcon:t.PropValuesUrlIconProp.getValue(a),wordWrap:t.PropValuesWordWrap.getValue(a)},r.total={fontColor:t.PropTotalFontColor.getValue(a),backColor:t.PropTotalBackColor.getValue(a),outline:t.PropTotalOutline.getValue(a)},r.columnFormatting={};var o=u(e);if(o)for(var n=0,s=o;n<s.length;n++){var l=s[n],c=l&&l.objects;r.columnFormatting[l.queryName]={fontColor:t.PropColumnFormattingFontColor.getValue(c),backColor:t.PropColumnFormattingBackColor.getValue(c),styleHeader:t.PropColumnFormattingStyleHeader.getValue(c),styleValues:t.PropColumnFormattingStyleValues.getValue(c),styleTotal:t.PropColumnFormattingStyleTotal.getValue(c)}}return r}function D(e){return{general:[{selector:null,properties:{textSize:n.encodePropertyValue(12,{numeric:!0}),totals:n.encodePropertyValue(!1,{bool:!0})}}]}}function T(e){return jsCommon.PixelConverter.fromPoint(e)}function V(e){return t.PropGeneralTableTotals.getValue(e)}function L(e){if(e&&e.table&&!_.isEmpty(e.table.columns)){var t=e.table.columns;if(_.some(t,(function(e){return e.discourageAggregationAcrossGroups})))return!1}return!0}function N(e){return t.PropGeneralMatrixRowSubtotals.getValue(e)}function M(e){return!(!e||l.getRowGroupingLevelsCount(e.matrix)<1)&&!H(e.matrix.rows.levels)}function A(e){return t.PropGeneralMatrixColumnSubtotals.getValue(e)}function R(e){return t.PropSubTotalsPivotTableRowSubtotals.getValue(e)}function F(e){return t.PropSubTotalsPivotTableColumnSubtotals.getValue(e)}function O(e){return t.PropRowsSteppedLayout.getValue(e)}function I(e){if(!e||l.getColumnGroupingLevelsCount(e.matrix)<1)return!1;var t=e.matrix.columns.levels;return e.matrix.valueSources.length>1&&(t=_.initial(t)),!H(t)}function H(e){var t=_.last(e);return t&&_.some(t.sources,(function(e){return e.discourageAggregationAcrossGroups}))}t.ObjectGeneral="general",t.ObjectGrid="grid",t.ObjectColumnHeaders="columnHeaders",t.ObjectRowHeaders="rowHeaders",t.ObjectValues="values",t.ObjectTotal="total",t.ObjectSubTotals="subTotals",t.ObjectColumnFormatting="columnFormatting",t.ObjectColumnWidth="columnWidth";var j=(function(){function e(e,t,a,i){this.objectName=e,this.propertyName=t,this.defaultValue=a,this.getterFuntion=i}return e.prototype.getPropertyID=function(){return{objectName:this.objectName,propertyName:this.propertyName}},e.prototype.getValue=function(e){return this.getterFuntion(e,this.getPropertyID(),this.defaultValue)},e})();t.TablixProperty=j,t.PropColumnFormatString=new j(t.ObjectGeneral,"formatString",(void 0),e.DataViewObjects.getValue),t.PropGeneralAutoSizeColumns=new j(t.ObjectGeneral,"autoSizeColumnWidth",(!0),e.DataViewObjects.getValue),t.PropGeneralTextSize=new j(t.ObjectGeneral,"textSize",8,e.DataViewObjects.getValue),t.PropGeneralTableTotals=new j(t.ObjectGeneral,"totals",(!0),e.DataViewObjects.getValue),t.PropGeneralMatrixRowSubtotals=new j(t.ObjectGeneral,"rowSubtotals",(!0),e.DataViewObjects.getValue),t.PropGeneralMatrixColumnSubtotals=new j(t.ObjectGeneral,"columnSubtotals",(!0),e.DataViewObjects.getValue),t.PropGridVertical=new j(t.ObjectGrid,"gridVertical",(!1),e.DataViewObjects.getValue),t.PropGridVerticalColor=new j(t.ObjectGrid,"gridVerticalColor","#E8E8E8",e.DataViewObjects.getFillColor),t.PropGridVerticalWeight=new j(t.ObjectGrid,"gridVerticalWeight",1,e.DataViewObjects.getValue),t.PropGridHorizontalTable=new j(t.ObjectGrid,"gridHorizontal",(!0),e.DataViewObjects.getValue),t.PropGridHorizontalMatrix=new j(t.ObjectGrid,"gridHorizontal",(!1),e.DataViewObjects.getValue),t.PropGridHorizontalColor=new j(t.ObjectGrid,"gridHorizontalColor","#E8E8E8",e.DataViewObjects.getFillColor),t.PropGridHorizontalWeight=new j(t.ObjectGrid,"gridHorizontalWeight",1,e.DataViewObjects.getValue),t.PropGridRowPadding=new j(t.ObjectGrid,"rowPadding",0,e.DataViewObjects.getValue),t.PropGridOutlineColor=new j(t.ObjectGrid,"outlineColor","#CCC",e.DataViewObjects.getFillColor),t.PropGridOutlineWeight=new j(t.ObjectGrid,"outlineWeight",1,e.DataViewObjects.getValue),t.PropGridImageHeight=new j(t.ObjectGrid,"imageHeight",75,e.DataViewObjects.getValue),t.PropGridPivotTableTextSize=new j(t.ObjectGrid,"textSize",8,e.DataViewObjects.getValue),t.PropColumnsFontColor=new j(t.ObjectColumnHeaders,"fontColor","#666",e.DataViewObjects.getFillColor),t.PropColumnsBackColor=new j(t.ObjectColumnHeaders,"backColor",(void 0),e.DataViewObjects.getFillColor),t.PropColumnsOutline=new j(t.ObjectColumnHeaders,"outline","BottomOnly",e.DataViewObjects.getValue),t.PropColumnPivotTableAutoSizeColumns=new j(t.ObjectColumnHeaders,"autoSizeColumnWidth",(!0),e.DataViewObjects.getValue),t.PropColumnsWordWrap=new j(t.ObjectColumnHeaders,"wordWrap",(!1),e.DataViewObjects.getValue),t.PropColumnsUrlIcon=new j(t.ObjectColumnHeaders,"urlIcon",(!1),e.DataViewObjects.getValue),t.PropRowsFontColor=new j(t.ObjectRowHeaders,"fontColor","#666",e.DataViewObjects.getFillColor),t.PropRowsBackColor=new j(t.ObjectRowHeaders,"backColor",(void 0),e.DataViewObjects.getFillColor),t.PropRowsOutline=new j(t.ObjectRowHeaders,"outline","RightOnly",e.DataViewObjects.getValue),t.PropRowsSteppedLayout=new j(t.ObjectRowHeaders,"stepped",(!0),e.DataViewObjects.getValue),t.PropRowsSteppedLayoutIndentation=new j(t.ObjectRowHeaders,"steppedLayoutIndentation",10,e.DataViewObjects.getValue),t.PropRowsWordWrap=new j(t.ObjectRowHeaders,"wordWrap",(!1),e.DataViewObjects.getValue),t.PropRowsUrlIcon=new j(t.ObjectRowHeaders,"urlIcon",(!1),e.DataViewObjects.getValue),t.PropValuesBackColor=new j(t.ObjectValues,"backColor",(void 0),e.DataViewObjects.getFillColor),t.PropValuesFontColorPrimary=new j(t.ObjectValues,"fontColorPrimary","#333",e.DataViewObjects.getFillColor),t.PropValuesBackColorPrimary=new j(t.ObjectValues,"backColorPrimary",(void 0),e.DataViewObjects.getFillColor),t.PropValuesFontColorSecondary=new j(t.ObjectValues,"fontColorSecondary","#333",e.DataViewObjects.getFillColor),t.PropValuesBackColorSecondary=new j(t.ObjectValues,"backColorSecondary",(void 0),e.DataViewObjects.getFillColor),t.PropValuesOutline=new j(t.ObjectValues,"outline","None",e.DataViewObjects.getValue),t.PropValuesUrlIconProp=new j(t.ObjectValues,"urlIcon",(!1),e.DataViewObjects.getValue),t.PropValuesWordWrap=new j(t.ObjectValues,"wordWrap",(!1),e.DataViewObjects.getValue),t.PropTotalTableExTotals=new j(t.ObjectTotal,"totals",(!0),e.DataViewObjects.getValue),t.PropTotalFontColor=new j(t.ObjectTotal,"fontColor","#333",e.DataViewObjects.getFillColor),t.PropTotalBackColor=new j(t.ObjectTotal,"backColor",(void 0),e.DataViewObjects.getFillColor),t.PropTotalOutline=new j(t.ObjectTotal,"outline","TopOnly",e.DataViewObjects.getValue),t.PropSubTotalsFontColor=new j(t.ObjectSubTotals,"fontColor",(void 0),e.DataViewObjects.getFillColor),t.PropSubTotalsBackColor=new j(t.ObjectSubTotals,"backColor",(void 0),e.DataViewObjects.getFillColor),t.PropSubTotalsPivotTableRowSubtotals=new j(t.ObjectSubTotals,"rowSubtotals",(!0),e.DataViewObjects.getValue),t.PropSubTotalsPivotTableColumnSubtotals=new j(t.ObjectSubTotals,"columnSubtotals",(!0),e.DataViewObjects.getValue),t.PropGrandTotalFontColor=new j(t.ObjectTotal,"fontColor",(void 0),e.DataViewObjects.getFillColor),t.PropGrandTotalBackColor=new j(t.ObjectTotal,"backColor",(void 0),e.DataViewObjects.getFillColor),t.PropGrandTotalApplyToHeaders=new j(t.ObjectTotal,"applyToHeaders",(!1),e.DataViewObjects.getValue),t.PropColumnFormattingFontColor=new j(t.ObjectColumnFormatting,"fontColor",(void 0),e.DataViewObjects.getFillColor),t.PropColumnFormattingBackColor=new j(t.ObjectColumnFormatting,"backColor",(void 0),e.DataViewObjects.getFillColor),t.PropColumnFormattingStyleHeader=new j(t.ObjectColumnFormatting,"styleHeader",(!1),e.DataViewObjects.getValue),t.PropColumnFormattingStyleValues=new j(t.ObjectColumnFormatting,"styleValues",(!0),e.DataViewObjects.getValue),t.PropColumnFormattingStyleSubtotals=new j(t.ObjectColumnFormatting,"styleSubtotals",(!0),e.DataViewObjects.getValue),t.PropColumnFormattingStyleTotal=new j(t.ObjectColumnFormatting,"styleTotal",(!1),e.DataViewObjects.getValue),
t.PropColumnWidthValue=new j(t.ObjectColumnWidth,"value",(void 0),e.DataViewObjects.getValue),t.getMetadadataObjects=i,t.enumerateObjectRepetition=r,t.enumerateObjectInstances=o,t.enumerateGeneralOptions=p,t.enumerateGridOptions=h,t.enumerateColumnHeadersOptions=g,t.enumerateRowHeadersOptions=m,t.enumerateValuesOptions=y,t.enumerateTotalOptions=f,t.enumerateGrandTotalOptions=v,t.enumerateSubTotalsOptions=b,t.enumerateColumnFormattingOptions=C,t.getTableObjects=S,t.getMatrixObjects=x,t.getPivotTableObjects=w,t.getTableExObjects=P,t.generateTablixDefaultObjects=D,t.getTextSizeInPx=T,t.shouldShowTableTotals=V,t.shouldShowRowSubtotals=N,t.shouldShowColumnSubtotals=A,t.shouldShowPivotTableRowSubtotals=R,t.shouldShowPivotTableColumnSubtotals=F,t.steppedLayout=O,t.shouldShowColumnSubtotalsOption=I,t.isDiscourageAggregationAcrossGroups=H})(r=i.TablixObjects||(i.TablixObjects={}));var d;!(function(e){function n(){return document.createElement("table")}function s(){var t=document.createElement("div");return t.className=e.CssClassTablixDiv,t}function l(t){t.extension.contentElement.className=e.CssClassTablixDiv+" "+e.CssClassContentElement,t.extension.contentHost.className=e.CssClassTablixDiv+" "+e.CssClassContentHost}function d(e,t){e.extension.contentHost.className+=" "+t}function p(e){e.extension.contentHost.className="",e.extension.contentHost.style.cssText=""}function h(e){e.extension.contentHost.textContent="",e.extension.contentHost.removeAttribute("title"),e.contentHeight=e.contentWidth=0,a.HTMLElementUtils.clearChildren(e.extension.contentHost)}function g(t,a,i){e.setCellText(t,a),e.setCellTooltip(t,i||a)}function m(e,a){a.textContent=t.TextUtil.replaceSpaceWithNBSP(e)}function y(e,t){t.title=e}function f(e,t){var a=s();return e.appendChild(a),t&&(a.textContent=t),a}function v(e){var t=e.target,a=e.offsetX;return a>=0&&a<t.offsetWidth-i.TablixResizer.resizeHandleSize}function b(t,a,i){var r=null;0===a.childElementCount?(r=document.createElement("a"),a.appendChild(r)):r=a.children[0],r.href=t,r.target="_blank",r.rel="noopener noreferrer",r.title=t,null!=i?(r.className=e.CssClassValueURLIcon+" "+i,$(a).addClass(e.CssClassValueURLIconContainer)):r.innerText=t}function C(t,a,i){var r=e.createDiv(),o=document.createElement("img");r.style.height=i+"px",r.style.width="100%",r.style.textAlign="center",o.src=t,o.style.maxHeight="100%",o.style.maxWidth="100%",r.appendChild(o),a.appendChild(r),a.title=t}function S(e,a){var i=t.KpiUtil.getClassForKpi(e,a)||"";return o.div().addClass(i).css({display:"inline-block","vertical-align":"bottom",margin:"0"})}function x(e,a){return t.converterHelper.isWebUrlColumn(e)?u.getUrlScheme(a):c.NONE}function w(e){switch(e){case c.file:case c.ftp:return"page2";case c.mailto:return"mail";case c.news:return"link";case c.telnet:return"pc1";case c.http:case c.https:return"link";default:return null}}function P(e,t,a){return D(e,t)&&u.isValidImageUrl(a)}function D(e,a){return t.converterHelper.isImageUrlColumn(a)&&!e.isSubtotal}function T(e,a){return!(!e||void 0===a)&&!!t.KpiUtil.getClassForKpi(e,a)}function V(e,t){var a=[{queryName:e,sortDirection:t}];return{sortDescriptors:a}}function L(e){return 2===e?1:2}function N(t,a){var i=e.createDiv();t?(i.appendChild(M(t,!0)),i.appendChild(M(L(t),!1))):i.appendChild(M(2,!1));var r=e.createDiv();return i.appendChild(r),a.appendChild(i),r}function M(e,t){var a=document.createElement("i");return a.className=F+" "+(t?"sorted":"future")+" "+(1===e?"powervisuals-glyph caret-up":"powervisuals-glyph caret-down"),a}function A(e){for(var t=0,a=e.extension.contentElement.childElementCount;t<a;t++){var i=e.extension.contentElement.children.item(t);if(i.classList.contains(F))return!0}return!1}function R(e){A(e)&&$(e.extension.contentElement).find("."+F).remove()}e.PreferredLoadMoreThreshold=.8,e.TotalLabel="TableTotalLabel",e.CssClassTablixDiv="tablixDiv",e.CssClassContentElement="tablixCellContentElement",e.CssClassContentHost="tablixCellContentHost",e.CssClassWrappingContainer="tablixWrappingContainer",e.CssClassTablixHeader="tablixHeader",e.CssClassTablixColumnHeaderLeaf="tablixColumnHeaderLeaf",e.CssClassTablixValueNumeric="tablixValueNumeric",e.CssClassTablixValueTotal="tablixValueTotal",e.CssClassValueURLIcon="powervisuals-glyph tablixUrlIconGlyph",e.CssClassValueURLIconContainer="tablixValueUrlIcon",e.CssClassMatrixRowHeaderLeaf="matrixRowHeaderLeaf",e.CssClassMatrixRowHeaderSubTotal="matrixRowHeaderSubTotal",e.CssClassTableFooter="tableFooterCell",e.CssClassTableBodyCell="tableBodyCell",e.CssClassTableBodyCellBottom="tableBodyCellBottom",e.CssClassPivotTableCell="tablixCell",e.StringNonBreakingSpace="&nbsp;",e.UnitOfMeasurement="px";var F="tablixSortIconContainer";e.CellPaddingLeft=10,e.CellPaddingRight=5,e.CellPaddingLeftMatrixTotal=5,e.SortIconPadding=5,e.ImageDefaultAspectRatio=1,e.FontFamilyCell=t.Font.Family.regular.css,e.FontFamilyHeader=t.Font.Family.regular.css,e.FontFamilyTotal=t.Font.Family.bold.css,e.FontFamilyGlyphs=t.Font.Family.glyphs.css,e.FontColorCells="#333",e.FontColorHeaders="#666",e.WordWrappingMaxLines=Number.POSITIVE_INFINITY,e.SortIconFontSizeRatio=.71;var O;!(function(e){e[e.Outline=0]="Outline",e[e.Gridline=1]="Gridline"})(O=e.EdgeType||(e.EdgeType={}));var I=(function(){function t(e,t){this.applyParams(!0,e,t)}return t.prototype.applyParams=function(e,t,a,i){e?(this.weight=null==t?0:t,this.color=null==a?"black":a,this.type=null==i?O.Gridline:i):(this.weight=0,this.color="black",this.type=O.Gridline)},t.prototype.getCSS=function(){var t=[];return _.isNumber(this.weight)&&(t.push(this.weight+e.UnitOfMeasurement),this.color&&t.push(this.color),t.push("solid")),t.join(" ")},t.prototype.getPriority=function(e){return this===e.top||this===e.bottom?this.type===O.Outline?2:0:this===e.right||this===e.left?this.type===O.Outline?3:1:-1},t.prototype.getShadowCss=function(t){var a="inset ";if(this===t.left)a+=this.weight+e.UnitOfMeasurement+" 0";else if(this===t.right)a+="-"+this.weight+e.UnitOfMeasurement+" 0";else if(this===t.top)a+="0 "+this.weight+e.UnitOfMeasurement;else{if(this!==t.bottom)return"";a+="0 -"+this.weight+e.UnitOfMeasurement}return a+" 0 0 "+this.color},t})();e.EdgeSettings=I;var H=(function(){function t(){this.borders={},this.paddings={top:0,left:e.CellPaddingLeft,bottom:0,right:e.CellPaddingRight},this.fontFamily="",this.fontColor="",this.backColor=""}return t.prototype.applyStyle=function(e){var t=e.extension.contentHost,a=t.style;a.fontFamily=this.fontFamily,a.color=this.fontColor,a.backgroundColor=this.backColor,a.boxShadow=this.getBoxShadow(),a.border="none",a.paddingTop=this.getPaddingTop(),a.paddingRight=this.getPaddingRight(),a.paddingBottom=this.getPaddingBottom(),a.paddingLeft=this.getPaddingLeft()},t.prototype.getPaddingTop=function(){return(null==this.paddings.top?0:this.paddings.top)+(null==this.borders.top?0:this.borders.top.weight)+e.UnitOfMeasurement},t.prototype.getPaddingBottom=function(){return(null==this.paddings.bottom?0:this.paddings.bottom)+(null==this.borders.bottom?0:this.borders.bottom.weight)+e.UnitOfMeasurement},t.prototype.getPaddingRight=function(){return(null==this.paddings.right?e.CellPaddingRight:this.paddings.right)+(null==this.borders.right?0:this.borders.right.weight)+e.UnitOfMeasurement},t.prototype.getPaddingLeft=function(){return(null==this.paddings.left?e.CellPaddingLeft:this.paddings.left)+(null==this.borders.left?0:this.borders.left.weight)+e.UnitOfMeasurement},t.prototype.getBoxShadow=function(){var e=this,t=[this.borders.top,this.borders.right,this.borders.bottom,this.borders.left];return t=_.sortBy(t,(function(t){return t?t.getPriority(e.borders):-1})).reverse(),_.map(t,(function(t){if(t)return t.getShadowCss(e.borders)})).join(", ")},t.prototype.getAttributes=function(){var e={"padding-top":this.getPaddingTop(),"padding-right":this.getPaddingRight(),"padding-bottom":this.getPaddingBottom(),"padding-left":this.getPaddingLeft()};_.isEmpty(this.fontFamily)||(e["font-family"]=this.fontFamily),_.isEmpty(this.fontColor)||(e.color=this.fontColor),_.isEmpty(this.backColor)||(e["background-color"]=this.backColor);var t=this.getBoxShadow();return _.isEmpty(t)||(e["box-shadow"]=t),e},t.prototype.getExtraTop=function(){var e=0;return this.paddings.top&&(e+=this.paddings.top),this.borders.top&&(e+=this.borders.top.weight),e},t.prototype.getExtraBottom=function(){var e=0;return this.paddings.bottom&&(e+=this.paddings.bottom),this.borders.bottom&&(e+=this.borders.bottom.weight),e},t.prototype.getExtraRight=function(){var e=0;return this.paddings.right&&(e+=this.paddings.right),this.borders.right&&(e+=this.borders.right.weight),e},t.prototype.getExtraLeft=function(){var e=0;return this.paddings.left&&(e+=this.paddings.left),this.borders.left&&(e+=this.borders.left.weight),e},t})();e.CellStyle=H;var j=(function(){function e(){}return e})();e.DimensionPosition=j;var z=(function(){function e(){this.row=new j,this.column=new j}return e.prototype.isMatch=function(e){return this.column.index===e.column.index&&this.row.index===e.row.index},e})();e.CellPosition=z;var k=(function(){function a(t,a,i,r,o,n,s,l){this.dataPoint=t,this.isRowSubTotal=a,this.isColumnSubTotal=i,this.isRowGrandTotal=r,this.isColumnGrandTotal=o,this.columnMetadata=n,this.formatter=s,this.nullsAreBlank=l,this.position=new e.CellPosition}return Object.defineProperty(a.prototype,"isTotal",{get:function(){return this.isSubtotal||this.isGrandTotal},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isSubtotal",{get:function(){return this.isColumnSubTotal||this.isRowSubTotal},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isGrandTotal",{get:function(){return this.isColumnGrandTotal||this.isRowGrandTotal},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"textContent",{get:function(){return this.formatter?this.formatter(this.dataPoint,this.columnMetadata,r.PropColumnFormatString.getPropertyID(),this.nullsAreBlank):null!=this.dataPoint?this.dataPoint:""},enumerable:!0,configurable:!0}),a.prototype.isKpi=function(){return this.columnMetadata&&T(this.columnMetadata.kpi,this.textContent)},Object.defineProperty(a.prototype,"kpiContent",{get:function(){if(this.isKpi())return S(this.columnMetadata.kpi,this.textContent)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isNumeric",{get:function(){if(this.columnMetadata)return this.columnMetadata.type.numeric&&!this.columnMetadata.kpi},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isUrl",{get:function(){if(this.columnMetadata)return t.converterHelper.isWebUrlColumn(this.columnMetadata)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isImage",{get:function(){if(this.columnMetadata)return t.converterHelper.isImageUrlColumn(this.columnMetadata)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isValidUrl",{get:function(){return e.getUrlScheme(this.columnMetadata,this.textContent)!==c.NONE},enumerable:!0,configurable:!0}),a.prototype.isMatch=function(e){return this.position.isMatch(e.position)&&this.backColor===e.backColor},a})();e.TablixVisualCell=k,e.createTable=n,e.createDiv=s,e.resetCellCssClass=l,e.addCellCssClass=d,e.clearCellStyle=p,e.clearCellTextAndTooltip=h,e.setCellTextAndTooltip=g,e.setCellText=m,e.setCellTooltip=y,e.appendDiv=f,e.isValidSortClick=v,e.appendATagToBodyCell=b,e.appendImgTagToBodyCell=C,e.createKpiDom=S,e.getUrlScheme=x,e.getUrlIconName=w,e.isValidImage=P,e.isImage=D,e.isValidStatusGraphic=T,e.getCustomSortEventArgs=V,e.reverseSort=L,e.addSortIconToColumnHeader=N,e.removeSortIcons=R})(d=i.TablixUtils||(i.TablixUtils={}))})(i=a.internal||(a.internal={}))})(a=t.controls||(t.controls={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={})),(function(e){var t;!(function(e){var t;!(function(e){function t(){return{scrolling:{enabled:!1},selection:{enabled:!1},sorting:{enabled:!1,showActiveSortIcon:!0},columnResizing:{enabled:!1}}}function a(){return{scrolling:{enabled:!0},selection:{enabled:!0},sorting:{enabled:!0,showActiveSortIcon:!0},columnResizing:{enabled:!0}}}e.createDashboardConstructorOptions=t,e.createDefaultConstructorOptions=a})(t=e.PivotTableOptions||(e.PivotTableOptions={}));var a;!(function(e){function t(){return{scrolling:{enabled:!1},selection:{enabled:!1},sorting:{enabled:!1,showActiveSortIcon:!0},columnResizing:{enabled:!1}}}function a(){return{scrolling:{enabled:!0},selection:{enabled:!0},sorting:{enabled:!0,showActiveSortIcon:!0},columnResizing:{enabled:!0}}}e.createDashboardConstructorOptions=t,e.createDefaultConstructorOptions=a})(a=e.TableExOptions||(e.TableExOptions={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){e.TablixDefaultTextSize=jsCommon.TextSizeDefaults.TextSizeMin;var t=(function(){function t(a,i,r,o,n){var s=this;this.scrollBarElementWidth=9,this.options=n;var l=n.interactive;this.isTouchEnabled=l&&n.enableTouchSupport,this.mainDiv=e.internal.TablixUtils.createDiv(),this.mainDiv.classList.add(t.TablixTableAreaClassName),this.footerDiv=e.internal.TablixUtils.createDiv(),this.footerDiv.classList.add(t.TablixFooterClassName),this.gridDimensions={},this.containerElement=e.internal.TablixUtils.createDiv(),this.className=i.getTablixClassName(),this.autoSizeWidth=!1,this.autoSizeHeight=!1,this.fontFamily=e.internal.TablixUtils.FontFamilyCell,this.fontColor=e.internal.TablixUtils.FontColorCells,this.fontSize=n.fontSize,o.className=t.TablixContainerClassName,o.appendChild(this.containerElement),this.containerElement.addEventListener("wheel",(function(e){s.onWheel(e)})),this.containerElement.appendChild(this.mainDiv),this.containerElement.appendChild(this.footerDiv),this.isTouchEnabled&&(this.InitializeTouchSupport(),this.bindTouchEvents()),this.controlLayoutManager=i,this.controlLayoutManager.initialize(this),this.hierarchyTablixNavigator=a,this.binder=r,this.columnDim=new e.TablixColumnDimension(this),this.rowDim=new e.TablixRowDimension(this),this.columnDim._otherDimension=this.rowDimension,this.rowDim._otherDimension=this.columnDimension,this.InitializeScrollbars(),l||(this.scrollbarWidth=0),this.updateHorizontalPosition(),this.updateVerticalPosition(),this.updateFooterVisibility(),this.lastRenderingArgs={}}return t.prototype.InitializeTouchSupport=function(){this.isTouchEventsBound=!1,this.touchManager=new e.TouchUtils.TouchManager,this.touchInterpreter=new e.TouchUtils.TouchEventInterpreter(this.touchManager),this.footerTouchInterpreter=new e.TouchUtils.TouchEventInterpreter(this.touchManager),this.columnTouchDelegate=new e.ColumnTouchDelegate(new e.TouchUtils.Rectangle),this.rowTouchDelegate=new e.RowTouchDelegate(new e.TouchUtils.Rectangle),this.bodyTouchDelegate=new e.BodyTouchDelegate(new e.TouchUtils.Rectangle),this.footerTouchDelegate=new e.ColumnTouchDelegate(new e.TouchUtils.Rectangle),this.columnTouchDelegate.setHandler(this,this.onTouchEvent),this.rowTouchDelegate.setHandler(this,this.onTouchEvent),this.bodyTouchDelegate.setHandler(this,this.onTouchEvent),this.footerTouchDelegate.setHandler(this,this.onTouchEvent),this.touchManager.addTouchRegion(this.columnTouchDelegate.dimension,this.columnTouchDelegate,this.columnTouchDelegate),this.touchManager.addTouchRegion(this.rowTouchDelegate.dimension,this.rowTouchDelegate,this.rowTouchDelegate),this.touchManager.addTouchRegion(this.bodyTouchDelegate.dimension,this.bodyTouchDelegate,this.bodyTouchDelegate),this.touchManager.addTouchRegion(this.footerTouchDelegate.dimension,this.footerTouchDelegate,this.footerTouchDelegate)},t.prototype.unBindTouchEvents=function(){this.isTouchEventsBound&&(this.touchInterpreter.clearAllTouchEvents(),this.footerTouchInterpreter.clearAllTouchEvents(),this.isTouchEventsBound=!1)},t.prototype.bindTouchEvents=function(){this.isTouchEventsBound||(this.touchInterpreter.initTouch(this.mainDiv,null),this.footerTouchInterpreter.initTouch(this.footerDiv,this.mainDiv),this.isTouchEventsBound=!0)},t.prototype.InitializeScrollbars=function(){this.rowDim._initializeScrollbar(this.containerElement,null,this.options.layoutKind);var e=this.rowDim.scrollbar.element.style;e.position="absolute",e.top="0"+t.UnitOfMeasurement,e.right="0"+t.UnitOfMeasurement,this.rowDim.scrollbar.width=this.scrollBarElementWidth+t.UnitOfMeasurement,this.rowDim.scrollbar.show(!0),this.columnDim._initializeScrollbar(this.containerElement,null,this.options.layoutKind);var a=this.columnDim.scrollbar.element.style;a.position="absolute",a.left="0"+t.UnitOfMeasurement,a.bottom="0"+t.UnitOfMeasurement,this.columnDim.scrollbar.height=this.scrollBarElementWidth+t.UnitOfMeasurement,this.columnDim.scrollbar.show(!1)},t.prototype.toggleTouchBindings=function(e){this.isTouchEnabled&&(e?this.bindTouchEvents():this.unBindTouchEvents())},Object.defineProperty(t.prototype,"container",{get:function(){return this.containerElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentHost",{get:function(){return this.mainDiv},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"footerHost",{get:function(){return this.footerDiv},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{set:function(e){this.containerElement.className=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hierarchyNavigator",{get:function(){return this.hierarchyTablixNavigator},enumerable:!0,configurable:!0}),t.prototype.getBinder=function(){return this.binder},Object.defineProperty(t.prototype,"autoSizeWidth",{get:function(){return this._autoSizeWidth},set:function(e){this._autoSizeWidth=e,e||(this.containerElement.style.minWidth=this.containerElement.style.maxWidth="none")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoSizeHeight",{get:function(){return this._autoSizeHeight},set:function(e){e||(this.containerElement.style.minHeight=this.containerElement.style.maxHeight="none")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this.maximumWidth},set:function(e){this.maximumWidth=e,this.containerElement.style.maxWidth=this.maximumWidth+t.UnitOfMeasurement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewport",{get:function(){return this.viewPort},set:function(e){this.viewPort=e,this.containerElement.style.width=this.viewPort.width+t.UnitOfMeasurement,this.containerElement.style.height=this.viewPort.height+t.UnitOfMeasurement,this.rowDim.scrollbar.invalidateArrange(),this.columnDim.scrollbar.invalidateArrange(),this.controlLayoutManager.updateViewport(this.viewPort)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxHeight",{get:function(){return this.maximumHeight},set:function(e){this.maximumHeight=e,this.containerElement.style.maxHeight=this.maximumHeight+t.UnitOfMeasurement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minWidth",{get:function(){return this.minimumWidth},set:function(e){this.minimumWidth=e,this.containerElement.style.minWidth=this.minimumWidth+t.UnitOfMeasurement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minHeight",{get:function(){return this.minimumHeight},set:function(e){this.minimumHeight=e,this.containerElement.style.minHeight=this.minimumHeight+t.UnitOfMeasurement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this.textFontSize},set:function(e){this.textFontSize=e?e:t.DefaultFontSize,this.containerElement.style.fontSize=this.textFontSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this.textFontFamily},set:function(e){this.textFontFamily=e,this.containerElement.style.fontFamily=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontColor",{get:function(){return this.textFontColor},set:function(e){this.textFontColor=e,this.containerElement.style.color=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollbarWidth",{set:function(e){this.scrollBarElementWidth=e,this.rowDim.scrollbar.width=this.scrollBarElementWidth+t.UnitOfMeasurement,this.columnDim.scrollbar.height=this.scrollBarElementWidth+t.UnitOfMeasurement},enumerable:!0,configurable:!0}),t.prototype.getIsTouchEventsBound=function(){return!!this.isTouchEventsBound},t.prototype.updateModels=function(e,t,a){this.rowDim.model=t,this.rowDim.modelDepth=this.hierarchyNavigator.getRowHierarchyDepth(),this.columnDim.model=a,this.columnDim.modelDepth=this.hierarchyNavigator.getColumnHierarchyDepth(),e&&(this.rowDim.scrollOffset=0,this.columnDim.scrollOffset=0),this.layoutManager.updateColumnCount(this.rowDim,this.columnDim)},t.prototype.updateColumnDimensions=function(e,t,a){var i=this.gridDimensions;i.columnCount=a,i.rowHierarchyWidth=e,i.columnHierarchyWidth=t},t.prototype.updateRowDimensions=function(e,t,a,i,r){var o=this.gridDimensions;o.rowCount=i,o.rowHierarchyHeight=t,o.rowHierarchyContentHeight=a,o.columnHierarchyHeight=e,o.footerHeight=r},t.prototype.updateTouchDimensions=function(){var e=this.gridDimensions;this.columnTouchDelegate.resize(e.rowHierarchyWidth,0,e.columnHierarchyWidth,e.columnHierarchyHeight),this.columnTouchDelegate.setScrollDensity(e.columnCount/e.columnHierarchyWidth),this.rowTouchDelegate.resize(0,e.columnHierarchyHeight,e.rowHierarchyWidth,e.rowHierarchyHeight),this.rowTouchDelegate.setScrollDensity(e.rowCount/e.rowHierarchyHeight),this.bodyTouchDelegate.resize(e.rowHierarchyWidth,e.columnHierarchyHeight,e.columnHierarchyWidth,e.rowHierarchyHeight),this.bodyTouchDelegate.setScrollDensity(e.columnCount/e.columnHierarchyWidth,e.rowCount/e.rowHierarchyHeight),this.footerTouchDelegate.resize(e.rowHierarchyWidth,e.columnHierarchyHeight+e.rowHierarchyHeight,e.columnHierarchyWidth,e.footerHeight),this.footerTouchDelegate.setScrollDensity(e.columnCount/e.columnHierarchyWidth)},t.prototype.onWheel=function(e){this.determineDimensionToScroll(e,(function(e,t){e.scrollbar.onMouseWheel(-1*t)})),0===this.options.layoutKind&&e.preventDefault()},t.prototype.determineDimensionToScroll=function(e,t){this.rowDim.scrollbar.visible?(e.deltaY&&t(this.rowDim,e.deltaY),e.deltaX&&this.columnDim.scrollbar.visible&&t(this.columnDim,e.deltaX)):this.columnDim.scrollbar.visible&&(e.deltaX?t(this.columnDim,e.deltaX):e.deltaY&&t(this.columnDim,e.deltaY))},Object.defineProperty(t.prototype,"layoutManager",{get:function(){return this.controlLayoutManager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnDimension",{get:function(){return this.columnDim},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowDimension",{get:function(){return this.rowDim},enumerable:!0,configurable:!0}),t.prototype.refresh=function(e){this.render(e,null)},t.prototype._onScrollAsync=function(e){var t=this;requestAnimationFrame((function(){t.performPendingScroll(e)}))},t.prototype.performPendingScroll=function(e){this.render(!1,e)},t.prototype.updateHorizontalPosition=function(){this.rowDim.scrollbar.visible?(this.columnDim.scrollbar.element.style.right=this.scrollBarElementWidth+t.UnitOfMeasurement,this.footerDiv.style.right=this.scrollBarElementWidth+t.UnitOfMeasurement,this.mainDiv.style.right=this.scrollBarElementWidth+t.UnitOfMeasurement):(this.columnDim.scrollbar.element.style.right="0"+t.UnitOfMeasurement,this.mainDiv.style.right="0"+t.UnitOfMeasurement,this.footerDiv.style.right="0"+t.UnitOfMeasurement)},t.prototype.updateFooterVisibility=function(){(this.rowDim.hasFooter()?"block"!==this.footerDiv.style.display:"none"!==this.footerDiv.style.display)&&(this.rowDim.hasFooter()?this.footerDiv.style.display="block":this.footerDiv.style.display="none")},t.prototype.updateVerticalPosition=function(){var e=this.rowDim.scrollbar.visible,a=1===this.controlLayoutManager.getLayoutKind(),i=e||a;if(i){var r=this.footerDiv.offsetHeight,o=0,n=0,s=this.columnDim.scrollbar.visible;s&&(r+=this.scrollBarElementWidth,o+=this.scrollBarElementWidth,n=this.scrollBarElementWidth),this.mainDiv.style.bottom=r+t.UnitOfMeasurement,this.rowDim.scrollbar.element.style.bottom=n+t.UnitOfMeasurement,this.footerDiv.style.bottom=o+t.UnitOfMeasurement,this.footerDiv.style.removeProperty("top")}else this.footerDiv.style.top=this.gridDimensions.rowHierarchyContentHeight+t.UnitOfMeasurement,this.footerDiv.style.removeProperty("bottom"),this.mainDiv.style.removeProperty("bottom")},t.prototype.alreadyRendered=function(e){return e===this.lastRenderingArgs.scrollingDimension&&this.rowDimension.scrollOffset===this.lastRenderingArgs.rowScrollOffset&&this.columnDimension.scrollOffset===this.lastRenderingArgs.columnScrollOffset},t.prototype.render=function(e,a){if(this.columnDim.makeScrollOffsetValid(),this.rowDim.makeScrollOffsetValid(),e||null===a)this.lastRenderingArgs={};else if(this.alreadyRendered(a))return;var i=!1;this.renderIterationCount=0,this.controlLayoutManager.onStartRenderingSession(a,this.mainDiv,e);var r=this.binder;r.onStartRenderingSession();for(var o=this.gridDimensions.footerHeight,n=this.gridDimensions.rowHierarchyHeight,s=this.gridDimensions.rowHierarchyContentHeight;!i&&this.renderIterationCount<t.MaxRenderIterationCount;){var l=this.columnDim.scrollbar.visible,c=this.rowDim.scrollbar.visible;this.columnDim._onStartRenderingIteration(),this.rowDim._onStartRenderingIteration(),this.controlLayoutManager.onStartRenderingIteration(e),this.renderCorner(),this.columnDim._render(),this.rowDim._render(),i=this.controlLayoutManager.onEndRenderingIteration(),this.columnDim._onEndRenderingIteration(),this.rowDim._onEndRenderingIteration(),l!==this.columnDim.scrollbar.visible&&this.updateVerticalPosition(),c!==this.rowDim.scrollbar.visible&&this.updateHorizontalPosition(),this.renderIterationCount++}this.controlLayoutManager.onEndRenderingSession(),r.onEndRenderingSession(),this.isTouchEnabled&&this.updateTouchDimensions(),this.lastRenderingArgs.rowScrollOffset=this.rowDimension.scrollOffset,this.lastRenderingArgs.columnScrollOffset=this.columnDimension.scrollOffset,this.updateContainerDimensions();var u=this.lastRenderingArgs;u.rowScrollOffset=this.rowDimension.scrollOffset,u.columnScrollOffset=this.columnDimension.scrollOffset,u.scrollingDimension=a,o===this.gridDimensions.footerHeight&&n===this.gridDimensions.rowHierarchyHeight&&s===this.gridDimensions.rowHierarchyContentHeight||this.updateVerticalPosition(),this.options.interactive&&(this.columnDim.scrollbar.refresh(),this.rowDim.scrollbar.refresh())},t.prototype.updateContainerDimensions=function(){var e=this.gridDimensions;if(this._autoSizeWidth){var a=this.rowDim.scrollbar.visible?this.scrollBarElementWidth:0;this.containerElement.style.width=e.rowHierarchyWidth+e.columnHierarchyWidth+a+t.UnitOfMeasurement}if(this._autoSizeHeight){var i=this.columnDim.scrollbar.visible?this.scrollBarElementWidth:0;this.containerElement.style.height=e.columnHierarchyHeight+e.rowHierarchyHeight+e.footerHeight+i+t.UnitOfMeasurement}},t.prototype.cornerCellMatch=function(e,t){var a=t.item;return 0===t.type&&a&&this.hierarchyTablixNavigator.cornerCellItemEquals(e,a)},t.prototype.renderCorner=function(){for(var e=this.columnDim.getDepth(),t=this.rowDim.getDepth(),a=0;a<e;a++)for(var i=0;i<t;i++){var r=this.hierarchyTablixNavigator.getCorner(i,a),o=this.controlLayoutManager.getOrCreateCornerCell(r,i,a),n=this.cornerCellMatch(r,o);n||(this._unbindCell(o),o.type=0,o.item=r,this.binder.bindCornerCell(r,o)),this.controlLayoutManager.onCornerCellRealized(r,o)}},t.prototype._unbindCell=function(e){switch(e.type){case 3:this.binder.unbindBodyCell(e.item,e);break;case 2:this.binder.unbindColumnHeader(e.item,e);break;case 1:this.binder.unbindRowHeader(e.item,e);break;case 0:this.binder.unbindCornerCell(e.item,e)}e.item=null,e.type=null},t.prototype.onTouchEvent=function(e){var t,a,i;e&&e.length>0&&"columnDim"in e[0]&&"rowDim"in e[0]&&(i=e[0],t=i.columnDim.scrollbar.visible?e[1]:0,a=i.rowDim.scrollbar.visible?e[2]:0,i.columnDim.scrollbar.viewMin=Math.max(0,i.columnDim.scrollbar.viewMin+t),i.columnDim.scrollOffset=Math.max(0,i.columnDim.scrollOffset+t),i.rowDim.scrollbar.viewMin=Math.max(0,i.rowDim.scrollbar.viewMin+a),i.rowDim.scrollOffset=Math.max(0,i.rowDim.scrollOffset+a),0===t?i._onScrollAsync(i.rowDim):0===a?i._onScrollAsync(i.columnDim):i._onScrollAsync(null))},t})();t.UnitOfMeasurement="px",t.TablixContainerClassName="tablixContainer",t.TablixTableAreaClassName="tablixTableArea",t.TablixFooterClassName="tableFooterArea",t.DefaultFontSize=jsCommon.PixelConverter.fromPoint(e.TablixDefaultTextSize),t.MaxRenderIterationCount=10,e.TablixControl=t})(t=e.controls||(e.controls={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t=(function(){function e(e){this._scrollStep=.1,this._owner=e,this._hierarchyNavigator=e.hierarchyNavigator,this._binder=e.getBinder(),this._tablixLayoutManager=e.layoutManager,this.scrollOffset=0}return e.prototype._onStartRenderingIteration=function(){this.updateScrollPosition()},e.prototype._onEndRenderingIteration=function(){},e.prototype.getValidScrollOffset=function(e){return Math.min(Math.max(e,0),Math.max(this.getItemsCount()-this._scrollStep,0))},e.prototype.makeScrollOffsetValid=function(){this.scrollOffset=this.getValidScrollOffset(this.scrollOffset)},e.prototype.getIntegerScrollOffset=function(){return Math.floor(this.scrollOffset)},e.prototype.getFractionScrollOffset=function(){return this.scrollOffset-this.getIntegerScrollOffset()},Object.defineProperty(e.prototype,"scrollbar",{get:function(){return this._scrollbar},enumerable:!0,configurable:!0}),e.prototype.getFirstVisibleItem=function(e){return this._scrollItems[e]},e.prototype.getFirstVisibleChild=function(e){return this._hierarchyNavigator.getAt(this._hierarchyNavigator.getChildren(e),this.getFirstVisibleChildIndex(e))},e.prototype.getFirstVisibleChildIndex=function(e){var t,a=this.getFirstVisibleItem(this._hierarchyNavigator.getLevel(e)+1);return t=void 0===a||void 0!==a&&this._hierarchyNavigator.getParent(a)!==e?0:this._hierarchyNavigator.getIndex(a)},e.prototype._initializeScrollbar=function(e,t,a){var i=this;this._scrollbar=this._createScrollbar(e,a),this._scrollbar._onscroll.push((function(e){return i.onScroll()})),t&&(this.scrollbar.initTouch(t,!0),t.style.setProperty("-ms-touch-action","pinch-zoom"))},e.prototype.getItemsCount=function(){return this.model?this._hierarchyNavigator.getLeafCount(this.model):0},e.prototype.getDepth=function(){return this.modelDepth},e.prototype.onScroll=function(){this.scrollOffset=this._scrollbar.viewMin,this._owner._onScrollAsync(this)},Object.defineProperty(e.prototype,"otherDimension",{get:function(){return this._otherDimension},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutManager",{get:function(){return this._layoutManager},enumerable:!0,configurable:!0}),e.prototype._createScrollbar=function(e,t){return null},e.prototype.updateScrollPosition=function(){if(this._scrollItems=[],this.model){var e=this.getIntegerScrollOffset(),t=this._hierarchyNavigator.getLeafAt(this.model,e);if(t){this._firstVisibleScrollIndex=e;do this._scrollItems[this._hierarchyNavigator.getLevel(t)]=t,t=this._hierarchyNavigator.getParent(t);while(null!==t)}}},e})();e.TablixDimension=t;var a=(function(t){function a(e){var a=t.call(this,e)||this;return a._layoutManager=a._tablixLayoutManager.rowLayoutManager,a._footer=null,a}return __extends(a,t),a.prototype.setFooter=function(e){this._footer=e,this._owner.updateFooterVisibility()},a.prototype.hasFooter=function(){return null!==this._footer},a.prototype._render=function(){var e=this.getFirstVisibleItem(0);this.hasFooter()&&(this.addFooterRowHeader(this._footer),this.addFooterBodyCells(this._footer)),void 0!==e&&this.addNodes(this.model,0,this.getDepth(),this._hierarchyNavigator.getIndex(e))},a.prototype._createScrollbar=function(t,a){return new e.VerticalScrollbar(t,a)},a.prototype.addNodes=function(e,t,a,i){for(var r=this._hierarchyNavigator.getCount(e),o=i;o<r;o++){if(!this._layoutManager.needsToRealize)return;var n=this._hierarchyNavigator.getAt(e,o),s=this.addNode(n,e,t,a);
t+=s.rowSpan}},a.prototype.getFirstVisibleChildLeaf=function(e){for(var t=e;!this._hierarchyNavigator.isLeaf(t);)t=this.getFirstVisibleChild(t);return t},a.prototype.bindRowHeader=function(e,t){this._binder.bindRowHeader(e,t)},a.prototype.addNode=function(e,t,a,i){var r,o=this._tablixLayoutManager.getOrCreateRowHeader(e,t,a,this._hierarchyNavigator.getLevel(e)),n=this.rowHeaderMatch(e,o);return n||(this._owner._unbindCell(o),o.type=1,o.item=e),this._hierarchyNavigator.isLeaf(e)?(o.colSpan=i-this._hierarchyNavigator.getLevel(e),o.rowSpan=1,n||this.bindRowHeader(e,o),this._tablixLayoutManager.onRowHeaderRealized(e,o),this.addBodyCells(e,t,a)):(r=this._layoutManager.getRealizedItemsCount(),this.addNodes(this._hierarchyNavigator.getChildren(e),a,i,this.getFirstVisibleChildIndex(e)),o.colSpan=1,o.rowSpan=this._layoutManager.getRealizedItemsCount()-r+1,n||this.bindRowHeader(e,o),this._tablixLayoutManager.onRowHeaderRealized(e,o)),o},a.prototype.rowHeaderMatch=function(e,t){var a=t.item;return 1===t.type&&a&&this._hierarchyNavigator.headerItemEquals(e,a)},a.prototype.addBodyCells=function(e,t,a){for(var i=this._otherDimension.getIntegerScrollOffset(),r=this._otherDimension._layoutManager.getRealizedItemsCount()-this.getDepth(),o=this._hierarchyNavigator,n=this._otherDimension.model,s=this._tablixLayoutManager,l=0;l<r;l++){var c=o.getIntersection(e,o.getLeafAt(n,i+l)),u=s.getOrCreateBodyCell(c,e,t,a,l);this.bindBodyCell(c,u),s.onBodyCellRealized(c,u)}},a.prototype.bindBodyCell=function(e,t){var a=this.bodyCelMatch(e,t);a||(this._owner._unbindCell(t),t.type=3,t.item=e,this._binder.bindBodyCell(e,t))},a.prototype.addFooterRowHeader=function(e){var t=this._tablixLayoutManager.getOrCreateFooterRowHeader(e,this.model);t.colSpan=this.getDepth();var a=this.rowHeaderMatch(e,t);a||(this._owner._unbindCell(t),t.type=1,t.item=e,this.bindRowHeader(e,t),this._tablixLayoutManager.onRowHeaderFooterRealized(e,t))},a.prototype.addFooterBodyCells=function(e){for(var t=this._otherDimension.getIntegerScrollOffset(),a=this._otherDimension.layoutManager.getRealizedItemsCount()-this.getDepth(),i=this._tablixLayoutManager,r=0;r<a;r++){var o=this._hierarchyNavigator.getLeafAt(this._otherDimension.model,t+r),n=this._hierarchyNavigator.getIntersection(e,o),s=i.getOrCreateFooterBodyCell(n,r);this.bindBodyCell(n,s),i.onBodyCellFooterRealized(n,s)}},a.prototype.bodyCelMatch=function(e,t){var a=t.item;return 3===t.type&&a&&this._hierarchyNavigator.bodyCellItemEquals(e,a)},a})(t);e.TablixRowDimension=a;var i=(function(t){function a(e){var a=t.call(this,e)||this;return a._layoutManager=a._tablixLayoutManager.columnLayoutManager,a}return __extends(a,t),a.prototype._render=function(){var e=this.getFirstVisibleItem(0);void 0!==e&&this.addNodes(this.model,0,this.getDepth(),this._hierarchyNavigator.getIndex(e))},a.prototype._createScrollbar=function(t,a){var i=new e.HorizontalScrollbar(t,a);return i.smallIncrement=.2,i},a.prototype.addNodes=function(e,t,a,i){for(var r=this._hierarchyNavigator.getCount(e),o=i;o<r;o++){if(!this._layoutManager.needsToRealize)return;var n=this.addNode(this._hierarchyNavigator.getAt(e,o),e,t,a);t+=n.colSpan}},a.prototype.addNode=function(e,t,a,i){var r=this._tablixLayoutManager.getOrCreateColumnHeader(e,t,this._hierarchyNavigator.getLevel(e),a),o=this.columnHeaderMatch(e,r);if(o||(this._owner._unbindCell(r),r.type=2,r.item=e),this._hierarchyNavigator.isLeaf(e))r.rowSpan=i-this._hierarchyNavigator.getLevel(e);else{var n=this._layoutManager.getRealizedItemsCount();this.addNodes(this._hierarchyNavigator.getChildren(e),a,i,this.getFirstVisibleChildIndex(e));var s=this._hierarchyNavigator.getChildrenLevelDifference(e);s===1/0?r.rowSpan=1:r.rowSpan=s,r.colSpan=this._layoutManager.getRealizedItemsCount()-n+1}return o||this._binder.bindColumnHeader(e,r),this._tablixLayoutManager.onColumnHeaderRealized(e,r),r},a.prototype.columnHeaderMatch=function(e,t){var a=t.item;return!this._owner.wordWrapColumnHeaders&&2===t.type&&a&&this._hierarchyNavigator.headerItemEquals(e,a)},a})(t);e.TablixColumnDimension=i})(t=e.controls||(e.controls={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t=(function(){function t(e){this.dim=e,this.averageSize=1,this.handlers=null,this.tablixControl=null}return Object.defineProperty(t.prototype,"dimension",{get:function(){return this.dim},enumerable:!0,configurable:!0}),t.prototype.setScrollDensity=function(e){this.averageSize=e},t.prototype.resize=function(e,t,a,i){this.dim.x=e,this.dim.y=t,this.dim.width=a,this.dim.height=i},t.prototype.getPixelToItem=function(t,a,i,r,o){return new e.TouchUtils.TouchEvent(t*this.averageSize,0,o,-i*this.averageSize,0)},t.prototype.touchEvent=function(t){var a=[];a[0]=this.tablixControl,a[1]=t.dx,a[2]=t.dy,this.handlers&&e.fire([this.handlers],a)},t.prototype.setHandler=function(e,t){this.handlers=t,this.tablixControl=e},t})();e.ColumnTouchDelegate=t;var a=(function(){function t(e){this.dim=e,this.averageSize=30,this.handlers=null,this.tablixControl=null}return Object.defineProperty(t.prototype,"dimension",{get:function(){return this.dim},enumerable:!0,configurable:!0}),t.prototype.setScrollDensity=function(e){this.averageSize=e},t.prototype.resize=function(e,t,a,i){this.dim.x=e,this.dim.y=t,this.dim.width=a,this.dim.height=i},t.prototype.getPixelToItem=function(t,a,i,r,o){var n=new e.TouchUtils.TouchEvent(0,a*this.averageSize,o,0,-r*this.averageSize);return n},t.prototype.touchEvent=function(t){var a=[];a[0]=this.tablixControl,a[1]=t.dx,a[2]=t.dy,this.handlers&&e.fire([this.handlers],a)},t.prototype.setHandler=function(e,t){this.handlers=t,this.tablixControl=e},t})();e.RowTouchDelegate=a;var i=(function(){function t(e){this.dim=e,this.averageSizeX=t.DefaultAverageSizeX,this.averageSizeY=t.DefaultAverageSizeY,this.handlers=null,this.tablixControl=null}return Object.defineProperty(t.prototype,"dimension",{get:function(){return this.dim},enumerable:!0,configurable:!0}),t.prototype.setScrollDensity=function(e,t){this.averageSizeX=e,this.averageSizeY=t},t.prototype.resize=function(e,t,a,i){var r=this.dim;r.x=e,r.y=t,r.width=a,r.height=i},t.prototype.getPixelToItem=function(t,a,i,r,o){return new e.TouchUtils.TouchEvent(t*this.averageSizeX,a*this.averageSizeY,o,-i*this.averageSizeX,-r*this.averageSizeY)},t.prototype.touchEvent=function(t){var a=[this.tablixControl,t.dx,t.dy];this.handlers&&e.fire([this.handlers],a)},t.prototype.setHandler=function(e,t){this.handlers=t,this.tablixControl=e},t})();i.DefaultAverageSizeX=30,i.DefaultAverageSizeY=30,e.BodyTouchDelegate=i})(t=e.controls||(e.controls={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(t){var a=(function(){function e(e,t){this.x=e||0,this.y=t||0}return e.prototype.offset=function(e,t){this.x+=e,this.y+=t},e})();t.Point=a;var i=(function(e){function t(t,a,i,r){var o=e.call(this,t,a)||this;return o.width=i||0,o.height=r||0,o}return __extends(t,e),Object.defineProperty(t.prototype,"point",{get:function(){return new a(this.x,this.y)},enumerable:!0,configurable:!0}),t.prototype.contains=function(e){return t.contains(this,e)},t.contains=function(e,a){return!(!a||t.isEmpty(e))&&(e.x<=a.x&&a.x<e.x+e.width&&e.y<=a.y&&a.y<e.y+e.height)},t.isEmpty=function(e){return!(void 0!==e&&e.width>=0&&e.height>=0)},t})(a);t.Rectangle=i;var r;!(function(e){e[e.NoClick=0]="NoClick",e[e.LeftClick=1]="LeftClick",e[e.RightClick=2]="RightClick",e[e.CenterClick=3]="CenterClick"})(r=t.MouseButton||(t.MouseButton={}));var o=(function(){function e(e,t,a,i,r){this._x=e,this._y=t,this.isMouseButtonDown=a,this._dx=i||0,this._dy=r||0}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dx",{get:function(){return this._dx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dy",{get:function(){return this._dy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMouseDown",{get:function(){return this.isMouseButtonDown},enumerable:!0,configurable:!0}),e})();t.TouchEvent=o;var n=(function(){function e(){this.touchList=[],this.swipeDirection=2,this.matchingDirectionCount=0,this.lockThreshold=!0,this.scrollThreshold=!0,this.lastTouchEvent=new o(0,0,(!1))}return Object.defineProperty(e.prototype,"lastEvent",{get:function(){return this.lastTouchEvent},enumerable:!0,configurable:!0}),e.prototype.addTouchRegion=function(e,t,a){var i={lastPoint:new o(0,0,(!1)),handler:t,region:e,converter:a};this.touchList=this.touchList.concat([i])},e.prototype.upAllTouches=function(){var e,t;t=this.touchList.length;for(var a=0;a<t;a++)this.touchList[a].lastPoint.isMouseDown&&(e=this.touchList[a].converter.getPixelToItem(this.touchList[a].lastPoint.x,this.touchList[a].lastPoint.y,0,0,!1),this.touchList[a].handler.touchEvent(e)),this.touchList[a].lastPoint=new o(this.touchList[a].lastPoint.x,this.touchList[a].lastPoint.y,(!1));this.lastTouchEvent=new o(0,0,(!1))},e.prototype.touchEvent=function(e){var t,a,i=0,r=0,n=0,s=0,l=0,c=null;t=this._getActive(),!this.lastTouchEvent.isMouseDown&&e.isMouseDown&&(t=this._findRegions(e)),n=this.lastTouchEvent.x-e.x,s=this.lastTouchEvent.y-e.y,this.lastTouchEvent=new o(e.x,e.y,e.isMouseDown,n,s),a=t.length;for(var u=0;u<a;u++)i=e.x-t[u].region.point.x,r=e.y-t[u].region.point.y,t[u].lastPoint.isMouseDown&&e.isMouseDown?(n=i-t[u].lastPoint.x,s=r-t[u].lastPoint.y,l=Math.abs(180/Math.PI*Math.atan(s/n)),this.scrollThreshold&&(this.lockThreshold&&this.matchingDirectionCount>5?1===this.swipeDirection?s=0:0===this.swipeDirection&&(n=0):l<20?(s=0,1===this.swipeDirection?this.matchingDirectionCount++:(this.matchingDirectionCount=1,this.swipeDirection=1)):(l=Math.abs(180/Math.PI*Math.atan(n/s)),l<20?(n=0,0===this.swipeDirection?this.matchingDirectionCount++:(this.matchingDirectionCount=1,this.swipeDirection=0)):2===this.swipeDirection?this.matchingDirectionCount++:(this.swipeDirection=2,this.matchingDirectionCount=1)))):(n=0,s=0,this.swipeDirection=2,this.matchingDirectionCount=0),t[u].lastPoint=new o(i,r,e.isMouseDown,n,s),c=t[u].converter.getPixelToItem(i,r,n,s,e.isMouseDown),t[u].handler.touchEvent(c)},e.prototype._findRegions=function(e){var t,i=[];t=this.touchList.length;for(var r=0;r<t;r++)this.touchList[r].region.contains(new a(e.x,e.y))&&(i=i.concat([this.touchList[r]]));return i},e.prototype._getActive=function(){var e,t=[];e=this.touchList.length;for(var a=0;a<e;a++)this.touchList[a].lastPoint.isMouseDown&&(t=t.concat([this.touchList[a]]));return t},e})();t.TouchManager=n;var s=80,l=600,c=(function(){function t(e){this.manager=e,this.touchPanel=null,this.scale=1,this.documentCallbacksWrapper=null,this.panelCallbacksWrapper=null,this.sliding=!1}return t.prototype.initTouch=function(e,t){e.style.setProperty("-ms-touch-action","pinch-zoom"),this.touchReferencePoint=t,this.touchPanel=e,this.startTouchPanelEvents()},t.prototype.startTouchPanelEvents=function(){var e=this;"ontouchmove"in this.touchPanel&&(this.panelCallbacksWrapper={startCallback:function(t){return e.onTouchStart(t)},endCallback:function(t){return e.onTouchEnd(t)}},this.touchPanel.addEventListener("touchstart",this.panelCallbacksWrapper.startCallback),this.touchPanel.addEventListener("touchend",this.panelCallbacksWrapper.endCallback))},t.prototype.clearTouchPanelEvents=function(){null!==this.panelCallbacksWrapper&&("ontouchmove"in this.touchPanel&&(this.touchPanel.removeEventListener("touchstart",this.panelCallbacksWrapper.startCallback),this.touchPanel.removeEventListener("touchend",this.panelCallbacksWrapper.endCallback)),this.panelCallbacksWrapper=null)},t.prototype.getXYByClient=function(e,t,i){var r=i.left,o=i.top;void 0!==window.scrollX&&(r+=window.scrollX,o+=window.scrollY);var n=new a(0,0);return n.offset(e-r,t-o),n},t.prototype.onTouchStart=function(e){if(1===e.touches.length){e.cancelBubble=!0;var t=e.touches[0];this.touchStartTime=(new Date).getTime(),this.touchStartPageY=t.pageY,this.onTouchMouseDown(t)}},t.prototype.onTouchMove=function(e){if(1===e.touches.length){e.preventDefault&&e.preventDefault();var t=e.touches[0];this.touchLastPageY=t.pageY,this.touchLastPageX=t.pageX,this.sliding||this.onTouchMouseMove(t)}},t.prototype.onTouchEnd=function(e){this.clearTouchDocumentEvents();var t=this.getSwipeInfo();this.didUserSwipe(t)?this.startSlideAffect(t):this.sliding||this.upAllTouches()},t.prototype.onTouchMouseDown=function(t){this.scale=e.HTMLElementUtils.getAccumulatedScale(this.touchPanel),document.getSelection().removeAllRanges(),this.rect=(this.touchReferencePoint?this.touchReferencePoint:this.touchPanel).getBoundingClientRect(),this.startTouchDocumentEvents()},t.prototype.startTouchDocumentEvents=function(){var e=this;"ontouchmove"in this.touchPanel&&(this.documentCallbacksWrapper={moveCallback:function(t){return e.onTouchMove(t)},endCallback:function(t){return e.onTouchEnd(t)}},document.addEventListener("touchend",this.documentCallbacksWrapper.endCallback),document.addEventListener("touchmove",this.documentCallbacksWrapper.moveCallback)),"setCapture"in this.touchPanel&&this.touchPanel.setCapture()},t.prototype.onTouchMouseMove=function(e){var t,a,i=this.rect,n=null!==i&&e.which!==r.NoClick;n&&!this.sliding&&(a=this.getXYByClient(e.pageX,e.pageY,i),t=new o(a.x/this.scale,a.y/this.scale,n),this.manager.touchEvent(t),e.preventDefault?e.preventDefault():"returnValue"in e&&(e.returnValue=!1))},t.prototype.onTouchMouseUp=function(e,t){this.upAllTouches(),this.clearTouchDocumentEvents()},t.prototype.getSwipeInfo=function(){var e=(new Date).getTime(),t=e-this.touchStartTime,a=this.touchLastPageY-this.touchStartPageY,i=a<0?-1:1;return{direction:i,distance:a,endTime:e,time:t}},t.prototype.didUserSwipe=function(e){return e.time<l&&e.distance*e.direction>s},t.prototype.startSlideAffect=function(e){var t=this;if(!this.sliding){this.sliding=!0;var a=this.getXYByClient(this.touchLastPageX,this.touchLastPageY,this.rect);this.slide(a,300,e),requestAnimationFrame((function(){t.didUserChangeDirection(e)||t.slide(a,200,e),t.clearSlide()}))}},t.prototype.didUserChangeDirection=function(e){if(this.touchStartTime<=e.endTime)return!1;var t=this.touchLastPageY-this.touchStartPageY,a=t<0?-1:1;return a!==e.direction},t.prototype.slide=function(e,t,a){var i=this.touchStartTime>a.endTime?this.touchLastPageY-this.touchStartPageY:0;e.y+=t*a.direction+i;var r=new o(e.x/this.scale,e.y/this.scale,(!0));this.manager.touchEvent(r)},t.prototype.clearSlide=function(){this.sliding=!1,this.upAllTouches()},t.prototype.upAllTouches=function(){null===this.documentCallbacksWrapper&&(this.rect=null,this.manager.upAllTouches())},t.prototype.clearTouchDocumentEvents=function(){"releaseCapture"in this.touchPanel&&this.touchPanel.releaseCapture(),null!==this.documentCallbacksWrapper&&("ontouchmove"in this.touchPanel&&(document.removeEventListener("touchmove",this.documentCallbacksWrapper.moveCallback),document.removeEventListener("touchend",this.documentCallbacksWrapper.endCallback)),this.documentCallbacksWrapper=null)},t.prototype.clearAllTouchEvents=function(){this.clearTouchDocumentEvents(),this.clearTouchPanelEvents()},t})();t.TouchEventInterpreter=c})(t=e.TouchUtils||(e.TouchUtils={}))})(t=e.controls||(e.controls={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(e){e[e.Matrix=0]="Matrix",e[e.Table=1]="Table",e[e.PivotTable=2]="PivotTable",e[e.TableEx=3]="TableEx"})(t=e.TablixType||(e.TablixType={}))})(t=e.controls||(e.controls={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){var a=t.internal.TablixObjects.PropGeneralAutoSizeColumns,i=t.internal.TablixObjects.getMetadadataObjects,r=(function(){function t(e,t,a,i){this.columnWidthObjects={},this.isMatrix=t,this.updateDataView(e,i),this.hostPersistCallBack=a,this.visualObjectInstancesToPersist={merge:[],remove:[]}}return t.prototype.updateDataView=function(e,t){this.previousDataView=this.currentDataView,this.previousDataView?this.previousAutoColumnSizePropertyValue=a.getValue(i(this.previousDataView)):this.previousAutoColumnSizePropertyValue=void 0,this.currentDataView=e,this.currentDataView?this.currentAutoColumnSizePropertyValue=a.getValue(i(this.currentDataView)):this.currentAutoColumnSizePropertyValue=void 0,this.matrixLeafNodes=t,this.updateColumnsMetadata(),this.updateTablixColumnWidths()},t.prototype.updateColumnsMetadata=function(){this.columnWidthObjects={},this.isMatrix?this.updateMatrixColumnsMetadata():this.updateTableColumnsMetadata()},t.prototype.updateTableColumnsMetadata=function(){if(this.currentDataView&&this.currentDataView.table)for(var e=this.currentDataView.table.columns,t=0,a=e.length;t<a;t++){var i=e[t].queryName;i&&(this.columnWidthObjects[i]={queryName:i,width:void 0,isFixed:!1})}},t.prototype.updateMatrixColumnsMetadata=function(){if(this.currentDataView&&this.currentDataView.matrix&&this.currentDataView.matrix.rows)for(var e=0,t=this.currentDataView.matrix.rows.levels.length;e<t;e++){var a=this.currentDataView.matrix.rows.levels[e];if(1===a.sources.length){var i=a.sources[0].queryName;i&&(this.columnWidthObjects[i]={queryName:i,width:void 0,isFixed:!1})}}if(this.matrixLeafNodes)for(var e=0,t=this.matrixLeafNodes.length;e<t;e++){var i=this.matrixLeafNodes[e].queryName;i&&(this.columnWidthObjects[i]={queryName:i,width:void 0,isFixed:!1})}},t.prototype.updateTablixColumnWidths=function(){var e=this.currentDataView&&this.currentDataView.metadata&&this.currentDataView.metadata.columns;if(e){if(this.shouldClearAllColumnWidths())return void this.autoSizeAllColumns();this.deserializeColumnsWidth(e)}},t.prototype.autoSizeAllColumns=function(){for(var e in this.columnWidthObjects)this.visualObjectInstancesToPersist.remove.push(this.generateColumnWidthObjectToPersist(e,void 0));this.callHostToPersist()},t.prototype.deserializeColumnsWidth=function(a){for(var i in this.columnWidthObjects)this.columnWidthObjects[i].isFixed=!this.currentAutoColumnSizePropertyValue,this.columnWidthObjects[i].width=void 0;for(var r=0,o=a.length;r<o;r++){var n=a[r],s=n.queryName,l=e.DataViewObjects.getValue(n.objects,t.columnWidthProp);this.columnWidthObjects.hasOwnProperty(s)&&null!=l&&(this.columnWidthObjects[s].width=l,this.columnWidthObjects[s].isFixed=!0)}},t.prototype.shouldClearAllColumnWidths=function(){return null!=this.previousDataView&&this.previousAutoColumnSizePropertyValue===!1&&null!=this.currentDataView&&this.currentAutoColumnSizePropertyValue===!0},t.getColumnQueryName=function(e){var t=e.getTablixCell();switch(t.type){case 0:if(null==t.item||null==t.item.metadata)return;return t.item.metadata.queryName;case 2:return t.item.queryName;default:return}},t.prototype.getColumnWidthObjects=function(){return this.columnWidthObjects},t.prototype.getFixedColumnWidthObjects=function(){var e={};for(var t in this.columnWidthObjects){var a=this.columnWidthObjects[t];a.isFixed&&(e[t]=a)}return e},t.prototype.getPersistedColumnWidth=function(e){var t=this.columnWidthObjects[e];return t&&t.width},t.prototype.callHostToPersist=function(){this.hostPersistCallBack&&this.hostPersistCallBack(this.visualObjectInstancesToPersist),this.visualObjectInstancesToPersist={merge:[],remove:[]}},t.prototype.onColumnWidthChanged=function(e,t){if(null!=e&&null!=this.columnWidthObjects[e]){var a=this.columnWidthObjects[e];t===-1?(a.width=void 0,a.isFixed=!this.currentAutoColumnSizePropertyValue,this.visualObjectInstancesToPersist.remove.push(this.generateColumnWidthObjectToPersist(a.queryName,void 0)),this.callHostToPersist()):(a.width=t,a.isFixed=!0,this.visualObjectInstancesToPersist.merge.push(this.generateColumnWidthObjectToPersist(e,t)),this.callHostToPersist())}},t.prototype.onColumnsRendered=function(e){for(var t={},a=0,i=e.length;a<i;a++){var r=e[a].queryName,o=e[a].width;null==t[r]?t[r]={queryName:r,width:o,isFixed:!1}:o>t[r].width&&(t[r].width=o)}var n=!1;for(var r in this.columnWidthObjects)if(t[r]){var s=this.columnWidthObjects[r];s.isFixed&&null==s.width&&(s.width=t[r].width,this.visualObjectInstancesToPersist.merge.push(this.generateColumnWidthObjectToPersist(r,s.width)),n=!0)}return n&&this.callHostToPersist(),n},t.prototype.generateColumnWidthObjectToPersist=function(e,t){return{selector:{metadata:e},objectName:"general",properties:{columnWidth:t}}},t})();r.columnWidthProp={objectName:"general",propertyName:"columnWidth"},t.TablixColumnWidthManager=r})(a=t.controls||(t.controls={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(e){var t=e.tooltips();return t?new i(t):new r}e.createTooltipService=t;var a=1e3,i=(function(){function t(e,t){void 0===t&&(t=a),this.visualHostTooltipService=e,this.handleTouchDelay=t}return t.prototype.addTooltip=function(t,a,i,r){var o=this;if(this.visualHostTooltipService.enabled()){var n=this.visualHostTooltipService.container();t.on("mouseover.tooltip",(function(){if(o.canDisplayTooltip(d3.event)){var e=o.makeTooltipEventArgs(n,!0,!1);if(e){var t=a(e);if(null!=t){var r=i(e),s=r&&r.getSelectorsByColumn();o.visualHostTooltipService.show({coordinates:e.coordinates,isTouchEvent:!1,dataItems:t,identities:s?[s]:[]})}}}})),t.on("mouseout.tooltip",(function(){o.visualHostTooltipService.hide({isTouchEvent:!1,immediately:!1})})),t.on("mousemove.tooltip",(function(){if(o.canDisplayTooltip(d3.event)){var e=o.makeTooltipEventArgs(n,!0,!1);if(e){var t;if(!r||(t=a(e),null!=t)){var s=i(e),l=s&&s.getSelectorsByColumn();o.visualHostTooltipService.move({coordinates:e.coordinates,isTouchEvent:!1,dataItems:t,identities:l?[l]:[]})}}}}));var s=e.TouchUtils.touchStartEventName(),l=e.TouchUtils.touchEndEventName(),c=e.TouchUtils.usePointerEvents();t.on(s+".tooltip",(function(){o.visualHostTooltipService.hide({isTouchEvent:!0,immediately:!0});var e=o.makeTooltipEventArgs(n,c,!0);if(e){var t=a(e),r=i(e),s=r&&r.getSelectorsByColumn();o.visualHostTooltipService.show({coordinates:e.coordinates,isTouchEvent:!0,dataItems:t,identities:s?[s]:[]})}})),t.on(l+".tooltip",(function(){o.visualHostTooltipService.hide({isTouchEvent:!0,immediately:!1}),o.handleTouchTimeoutId&&clearTimeout(o.handleTouchTimeoutId),o.handleTouchTimeoutId=setTimeout((function(){o.handleTouchTimeoutId=void 0}),o.handleTouchDelay)}))}},t.prototype.hide=function(){this.visualHostTooltipService.hide({immediately:!0,isTouchEvent:!1})},t.prototype.makeTooltipEventArgs=function(e,t,a){var i=d3.event.target,r=d3.select(i).datum(),o=this.getCoordinates(e,t),n=this.getCoordinates(i,t),s={data:r,coordinates:o,elementCoordinates:n,context:i,isTouchEvent:a};return s},t.prototype.canDisplayTooltip=function(e){var t=!0,a=e;if(void 0!==a.buttons){var i=0!==a.buttons;t=!i}return t=t&&null==this.handleTouchTimeoutId},t.prototype.getCoordinates=function(e,t){var a;if(t){for(var i=d3.event,r=void 0;r=i.sourceEvent;)i=r;var o=e.getBoundingClientRect();a=[i.clientX-o.left-e.clientLeft,i.clientY-o.top-e.clientTop]}else{var n=d3.touches(e);n&&n.length>0&&(a=n[0])}return a},t})();e.TooltipService=i;var r=(function(){function t(){}return t.prototype.addTooltip=function(t,a,i,r){e.TooltipManager.addTooltip(t,a,r)},t.prototype.hide=function(){e.TooltipManager.ToolTipInstance.hide()},t})();e.LegacyTooltipService=r})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=(function(){function a(e){this.mainText=jsCommon.CssConstants.createClassAndSelector("mainText"),this.name=e,this.visualConfiguration={maxFontSize:60}}return a.prototype.getMetaDataColumn=function(e){if(e&&e.metadata&&e.metadata.columns)for(var t=0,a=e.metadata.columns.length;t<a;t++){var i=e.metadata.columns[t];if(i.isMeasure){this.metaDataColumn=i;break}}},a.prototype.getAdjustedFontHeight=function(e,t,a){var i={fontFamily:null,fontSize:null,text:t},r=this.getAdjustedFontHeightCore(i,e,a,0);return r},a.prototype.getAdjustedFontHeightCore=function(t,a,i,r){if(r>10)return i;t.fontSize=jsCommon.PixelConverter.toString(i);var o=e.TextMeasurementService.measureSvgTextWidth(t);return o<a?i:this.getAdjustedFontHeightCore(t,a,.9*i,r+1)},a.prototype.clear=function(){this.svg.select(this.mainText.selector).text("")},a.prototype.doValueTransition=function(e,a,i,r,o,n,s){if(n||e!==a||null==a){e||(e=0);var l=this.svg,c=this.currentViewport,u=c.height,d=c.width,p=[a],h=this.getSeedFontHeight(d,u),g=this.getTranslateX(d),m=this.getTranslateY(h),y=this.metaDataColumn;s||(s=t.valueFormatter.create({format:this.getFormatString(y),value:a,displayUnitSystemType:i,formatSingleValues:!0,allowFormatBeautification:!0,columnType:y?y.type:void 0}));var f=s.format(e),v=s.format(a);l.attr("class",this.name);var b=l.selectAll("text").data(p);b.enter().append("text").attr("class",this.mainText.class);var C=this.getAdjustedFontHeight(d,v,h);m=this.getTranslateY(C+(u-C)/2);var S=b.text(f).attr({"text-anchor":this.getTextAnchor(),"font-size":C,transform:t.SVGUtil.translate(g,m)}).style({fill:this.style.titleText.color.value}).call(t.tooltipUtils.tooltipUpdate,[f]);if(null==a)S.text(v).call(t.tooltipUtils.tooltipUpdate,[v]);else if(y&&t.AxisHelper.isDateTime(y.type))S.text(v).call(t.tooltipUtils.tooltipUpdate,[v]);else{var x=e;S.transition().duration(o).tween("text",(function(e){var t=d3.interpolate(x,e);return function(e){var a=t(e);this.textContent=s.format(a)}}))}t.SVGUtil.flushAllD3TransitionsIfNeeded(r)}},a.prototype.setTextColor=function(e){this.style.titleText.color.value=e},a.prototype.getSeedFontHeight=function(e,t){var a=Math.floor(.75*Math.min(e,t)),i=this.visualConfiguration.maxFontSize;return i?Math.min(i,a):a},a.prototype.getTranslateX=function(e){if(this.visualConfiguration)switch(this.visualConfiguration.align){case"left":return 0;case"right":return e}return e/2},a.prototype.getTranslateY=function(e){return e},a.prototype.getTextAnchor=function(){if(this.visualConfiguration)switch(this.visualConfiguration.align){case"left":return"start";case"right":return"end"}return"middle"},a.prototype.getFormatString=function(e){return t.valueFormatter.getFormatString(e,a.formatStringProp)},a})();a.formatStringProp={objectName:"general",propertyName:"formatString"},t.AnimatedText=a})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(t){function a(e,a){var i=t.call(this,"animatedNumber")||this;return e&&(i.svg=e),a&&(i.animator=a),i}return __extends(a,t),a.prototype.init=function(e){this.options=e;var t=e.element;this.svg||(this.svg=d3.select(t.get(0)).append("svg")),this.currentViewport=e.viewport,this.hostServices=e.host,this.style=e.style,this.updateViewportDependantProperties()},a.prototype.updateViewportDependantProperties=function(){var e=this.currentViewport;this.svg.attr("width",e.width).attr("height",e.height)},a.prototype.update=function(e){this.currentViewport=e.viewport;var t=this.dataViews=e.dataViews;if(t&&t[0]){var a=t[0];this.updateViewportDependantProperties(),this.getMetaDataColumn(a);var i=a&&a.single?a.single.value:0;this.updateInternal(i,e.suppressAnimations,!0,this.formatter)}},a.prototype.setFormatter=function(e){this.formatter=e},a.prototype.onDataChanged=function(e){this.update({dataViews:e.dataViews,suppressAnimations:e.suppressAnimations,viewport:this.currentViewport})},a.prototype.onResizing=function(e){this.update({dataViews:this.dataViews,suppressAnimations:!0,viewport:e})},a.prototype.canResizeTo=function(e){return!0},a.prototype.updateInternal=function(t,a,i,r){void 0===i&&(i=!1);var o=this.value,n=e.AnimatorCommon.GetAnimationDuration(this.animator,a);this.doValueTransition(o,t,null,this.options.animation,n,i,r),this.value=t},a})(e.AnimatedText);e.AnimatedNumber=t})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=(function(){function a(e){}return Object.defineProperty(a.prototype,"shapeType",{get:function(){return this.data.shapeType},set:function(e){this.data.shapeType=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"lineColor",{get:function(){return this.data?this.data.lineColor:a.DefaultStrokeColor},set:function(e){this.data.lineColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"lineTransparency",{get:function(){return this.data?this.data.lineTransparency:a.DefaultLineTransValue},set:function(e){this.data.lineTransparency=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"lineWeight",{get:function(){return this.data?this.data.lineWeight:a.DefaultWeightValue},set:function(e){this.data.lineWeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"roundEdge",{get:function(){return this.data?this.data.roundEdge:a.DefaultRoundEdgeValue},set:function(e){this.data.roundEdge=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showFill",{get:function(){return this.data?this.data.showFill:a.DefaultFillShowValue},set:function(e){this.data.showFill=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fillColor",{get:function(){return this.data?this.data.fillColor:a.DefaultFillColor},set:function(e){this.data.fillColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"shapeTransparency",{get:function(){return this.data?this.data.shapeTransparency:a.DefaultFillTransValue},set:function(e){this.data.shapeTransparency=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"angle",{get:function(){return this.data?this.data.angle:a.DefaultAngle},set:function(e){this.data.angle=this.scaleTo360Deg(e)},enumerable:!0,configurable:!0}),a.prototype.init=function(e){this.element=e.element,this.selection=d3.select(this.element.context),this.currentViewport=e.viewport},a.prototype.update=function(e){this.currentViewport=e.viewport;var t=e.dataViews;if(!_.isEmpty(t)){var a=e.dataViews[0];if(a.metadata&&a.metadata.objects){var i=e.dataViews[0].metadata.objects;this.data=this.getDataFromDataView(i),this.render()}}},a.prototype.getDataFromDataView=function(i){return i?{shapeType:e.DataViewObjects.getValue(i,t.basicShapeProps.general.shapeType,a.DefaultShape),lineColor:this.getValueFromColor(e.DataViewObjects.getValue(i,t.basicShapeProps.line.lineColor,a.DefaultStrokeColor)),lineTransparency:e.DataViewObjects.getValue(i,t.basicShapeProps.line.transparency,a.DefaultLineTransValue),lineWeight:e.DataViewObjects.getValue(i,t.basicShapeProps.line.weight,a.DefaultWeightValue),roundEdge:e.DataViewObjects.getValue(i,t.basicShapeProps.line.roundEdge,a.DefaultRoundEdgeValue),shapeTransparency:e.DataViewObjects.getValue(i,t.basicShapeProps.fill.transparency,a.DefaultFillTransValue),fillColor:this.getValueFromColor(e.DataViewObjects.getValue(i,t.basicShapeProps.fill.fillColor,a.DefaultFillColor)),showFill:e.DataViewObjects.getValue(i,t.basicShapeProps.fill.show,a.DefaultFillShowValue),angle:this.scaleTo360Deg(e.DataViewObjects.getValue(i,t.basicShapeProps.rotation.angle,a.DefaultAngle))}:null},a.prototype.scaleTo360Deg=function(e){return 0!==e&&Math.abs(e)%360===0?e:(e%=360,e=(e+360)%360)},a.prototype.getValueFromColor=function(e){return e.solid?e.solid.color:e},a.prototype.enumerateObjectInstances=function(e){var a=[];if(!this.data)return a;switch(e.objectName){case"line":var i={selector:null,properties:{lineColor:this.lineColor,transparency:this.lineTransparency,weight:this.lineWeight},objectName:e.objectName};return this.shapeType===t.basicShapeType.rectangle&&(i.properties.roundEdge=this.roundEdge),a.push(i),a;case"fill":return this.shapeType!==t.basicShapeType.line&&a.push({selector:null,properties:{show:this.showFill,fillColor:this.fillColor,transparency:this.shapeTransparency},objectName:e.objectName}),a;case"rotation":return a.push({selector:null,properties:{angle:this.angle},objectName:e.objectName}),a}return null},a.prototype.render=function(){switch(this.selection.html(""),this.shapeType){case t.basicShapeType.rectangle:
t.ShapeFactory.createRectangle(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle);break;case t.basicShapeType.oval:t.ShapeFactory.createOval(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle);break;case t.basicShapeType.line:t.ShapeFactory.createLine(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle);break;case t.basicShapeType.arrow:t.ShapeFactory.createUpArrow(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle);break;case t.basicShapeType.triangle:t.ShapeFactory.createTriangle(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle)}},a})();a.DefaultShape=t.basicShapeType.rectangle,a.DefaultStrokeColor="#00B8AA",a.DefaultFillColor="#E6E6E6",a.DefaultFillShowValue=!0,a.DefaultFillTransValue=0,a.DefaultWeightValue=3,a.DefaultLineTransValue=0,a.DefaultRoundEdgeValue=0,a.DefaultAngle=0,t.BasicShapeVisual=a})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){var a,i=jsCommon.CssConstants.createClassAndSelector;!(function(e){e[e.None=0]="None",e[e.DraggingThumb=1]="DraggingThumb",e[e.BackgroundClicked=2]="BackgroundClicked",e[e.InitialPagingDelay=3]="InitialPagingDelay",e[e.Paging=4]="Paging"})(a||(a={}));var r=(function(){function t(e){this.scrollingMode=a.None,this.brush=d3.svg.brush(),this.brushWidth=e}return t.prototype.init=function(e){this.element=e},t.prototype.remove=function(){this.element.selectAll(t.Brush.selector).remove(),this.brush.on(t.events.brushStart,null).on(t.events.brush,null).on(t.events.brushEnd,null),this.brushGraphicsContext=void 0,null!=this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)},t.prototype.getExtent=function(){var e=this.brush.extent();return{start:e[0],end:e[1]}},t.prototype.setExtent=function(e){var i;null==e.start||null==e.end?(i=this.getExtentLength(),null==e.start?e.start=e.end-i:e.end=e.start+i):i=e.end-e.start;var r=this.getExtent().start;e=t.clampExtent(e,this.scrollBarLength,i),this.scrollingMode!==a.None&&(this.offset=e.start-r,this.previousBrushExtent=e),this.brush.extent([e.start,e.end])},t.prototype.getExtentLength=function(){var e=this.getExtent();return e.end-e.start},t.prototype.setExtentLength=function(e){var t=this.getExtent();t.end=t.start+e,this.setExtent(t)},t.prototype.setScale=function(e){this.isHorizontal?this.brush.x(e):this.brush.y(e)},t.prototype.setOrientation=function(e){this.isHorizontal=e},t.prototype.render=function(i,r,o){var n=this;this.brushGraphicsContext||(this.brushGraphicsContext=this.element.append("g").classed(t.Brush.class,!0)),this.onRefreshVisualCallback=o,this.brush.on(t.events.brushStart,(function(){n.previousBrushExtent=n.getExtent()})).on(t.events.brush,(function(){var e=n.getExtent();n.scrollingMode===a.None&&(e.start<0&&0===e.end?e.start=0:e.start===n.scrollBarLength&&e.end>n.scrollBarLength&&(e.end=n.scrollBarLength),n.scrollingMode=t.isBackgroundClickExtent(e)?a.BackgroundClicked:a.DraggingThumb,n.startBrushExtent=e),null!=n.offset&&(e.start+=n.offset,e.end+=n.offset);var i=n.getExtentLength();switch(e=t.clampExtent(e,n.scrollBarLength,i),n.pointerPosition=n.getPointerPosition(),n.scrollingMode){case a.DraggingThumb:n.refreshVisual();break;case a.BackgroundClicked:if(t.CenterOnBackgroundClick){var r=i/2;e.start=n.pointerPosition-r,e.end=n.pointerPosition+r,n.refreshVisual()}else{var o=e.start>n.previousBrushExtent.start;e=t.stepExtent(n.previousBrushExtent,o),n.refreshVisual(),n.scrollingMode=a.InitialPagingDelay,n.setStepTimeout(o,e)}break;case a.InitialPagingDelay:case a.Paging:e=n.previousBrushExtent}n.setExtent(e),n.refreshExtent(),n.previousBrushExtent=e})).on(t.events.brushEnd,(function(){n.setExtent(n.previousBrushExtent),n.refreshExtent(),n.previousBrushExtent=null,n.startBrushExtent=null,n.pointerPosition=null,n.scrollingMode=a.None,n.offset=null,null!=n.timeoutId&&(window.clearTimeout(n.timeoutId),n.timeoutId=null)}));var s=this.brushGraphicsContext.attr({transform:e.SVGUtil.translate(i,r),"drag-resize-disabled":"true"}).call(this.brush);s.selectAll(".resize").remove(),this.isHorizontal?s.selectAll("rect").attr("height",this.brushWidth):s.selectAll("rect").attr("width",this.brushWidth)},t.prototype.shouldContinueStepping=function(e,t){var a=this.pointerPosition>=t.start&&this.pointerPosition<=t.end;return 0!==t.start&&t.end!==e&&!a},t.prototype.getPointerPosition=function(){var e=this.getExtent();return t.isBackgroundClickExtent(this.startBrushExtent)?e.start<this.startBrushExtent.start?e.start:e.end:(e.end-e.start)/2},t.prototype.refreshExtent=function(){var e=this.getExtent(),t=this.getExtentLength();this.isHorizontal?(this.brushGraphicsContext.select(".extent").attr("width",t),this.brushGraphicsContext.select(".extent").attr("x",e.start)):(this.brushGraphicsContext.select(".extent").attr("height",t),this.brushGraphicsContext.select(".extent").attr("y",e.start))},t.prototype.refreshVisual=function(){this.onRefreshVisualCallback&&window.requestAnimationFrame(this.onRefreshVisualCallback)},t.prototype.refreshExtentAndVisual=function(){this.refreshExtent(),this.refreshVisual()},t.prototype.setStepTimeout=function(e,i){var r=this;if(this.shouldContinueStepping(this.scrollBarLength,i)){var o=this.scrollingMode===a.InitialPagingDelay?t.InitialPagingDelayMS:t.PagingDelayMS;this.timeoutId=_.delay((function(){r.onPagingTimeoutExpired(e)}),o)}},t.isBackgroundClickExtent=function(e){return e.start===e.end},t.stepExtent=function(e,t){var a=e.end-e.start;return e.start=t?e.start+a:e.start-a,e.end=t?e.end+a:e.end-a,e},t.prototype.onPagingTimeoutExpired=function(e){this.scrollingMode!==a.Paging&&(this.scrollingMode=a.Paging);var i=this.getExtent(),r=t.stepExtent(i,e);this.setExtent(r),this.refreshExtentAndVisual(),this.previousBrushExtent=i,this.setStepTimeout(e,r)},t.clampExtent=function(e,t,a){return e.start<0&&(e.start=0,e.end=a),e.end>t&&(e.end=t,e.start=t-a),e},t})();r.InitialPagingDelayMS=500,r.PagingDelayMS=50,r.CenterOnBackgroundClick=!1,r.events={brushStart:"brushstart",brush:"brush",brushEnd:"brushend"},r.Brush=i("brush"),t.SvgScrollbar=r})(t=e.controls||(e.controls={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function a(e){return _.isEmpty(e)?[]:_.filter(e,(function(e){return!t.TrendLineHelper.isDataViewForRegression(e)&&!t.ForecastHelper.isDataViewForForecast(e)}))}var i=e.data.CompiledDataViewMapping,r=e.visuals.DataViewConcatenateUtil,o=e.data.ScalarKeyUtils,n=e.visuals.controls.SvgScrollbar;t.DEFAULT_AXIS_SCALE_TYPE=t.axisScale.linear;var s=6;t.DEFAULT_AXIS_COLOR="#777",t.DEFAULT_FONT_FAMILY=e.visuals.Font.Family.regular.css,t.defaultLineStrokeWidth=2;var l;!(function(e){e[e.Scalar=0]="Scalar",e[e.CategoricalNotConcatenated=1]="CategoricalNotConcatenated",e[e.CategoricalConcatenated=2]="CategoricalConcatenated",e[e.Hierarchical=3]="Hierarchical"})(l=t.CartesianAxisRenderMode||(t.CartesianAxisRenderMode={}));var c=(function(){function c(e){var a=!1,i=!1,r=!1;this.trimOrdinalDataOnOverflow=!0,e&&(this.tooltipsEnabled=e.tooltipsEnabled,this.forecastEnabled=e.forecastEnabled,this.type=e.chartType,this.isLabelInteractivityEnabled=e.isLabelInteractivityEnabled,this.axisControlImprovements=e.axisControlImprovements,this.responsiveVisualEnabled=e.responsiveVisualEnabled,void 0!==e.trimOrdinalDataOnOverflow&&(this.trimOrdinalDataOnOverflow=e.trimOrdinalDataOnOverflow),e.isScrollable&&(a=e.isScrollable),this.animator=e.animator,this.responsiveVisualEnabled||(e.cartesianSmallViewPortProperties&&(this.cartesianSmallViewPortProperties=e.cartesianSmallViewPortProperties),e.legendSmallViewPortProperties&&(this.legendSmallViewPortProperties=e.legendSmallViewPortProperties)),e.behavior&&(this.behavior=e.behavior),e.viewModelAdapter&&(this.viewModelAdapter=e.viewModelAdapter),this.lassoSelectEnabled=e.lassoSelectEnabled,i=e.animateCategoryAxis,r=e.animateValueAxis,this.viewMode=0,this.customFontFamily=e.customFontFamily),this.axes=new t.CartesianAxes(a,d.ScrollbarWidth,this.trimOrdinalDataOnOverflow),this.svgAxes=new t.SvgCartesianAxes(this.axes),this.svgScrollbar=new n(d.ScrollbarWidth),this.scrollableAxes=new d(this.axes,this.svgScrollbar,i,r),this.lassoSelectEnabled&&(this.lassoManager=new t.LassoManager)}return c.getAxisLinesVisibility=function(e){switch(e){case 6:case 5:case 7:return 1;case 9:return 3;default:return 2}},c.shouldYAxisBeCategorical=function(e){switch(e){case 6:case 5:case 7:return!0}return!1},c.prototype.init=function(a){this.visualInitOptions=a,this.layers=[],this.referenceLines=[];var i=this.element=a.element;this.currentViewport=a.viewport,this.hostServices=a.host;var r=this.chartAreaSvg=d3.select(i.get(0)).append("svg");r.classed(c.ClassName,!0),r.style("position","absolute"),this.behavior&&(this.clearCatcher=t.appendClearCatcher(r),this.interactivityService=t.createInteractivityService(this.hostServices),this.lassoSelectEnabled&&(this.lassoManager.init(r),this.lassoSelectionBehavior=new t.LassoSelectionBehavior(this.behavior),this.lassoManager.behaviors.push(this.lassoSelectionBehavior))),this.axes.init({axisLinesVisibility:c.getAxisLinesVisibility(this.type),maxMarginFactor:a.style.maxMarginFactor,isYAxisCategorical:c.shouldYAxisBeCategorical(this.type)}),this.svgAxes.init(r),this.svgScrollbar.init(r),this.legend=t.createLegend(i,a.interactivity&&a.interactivity.isInteractiveLegend,12!==this.type?this.interactivityService:void 0,this.axes.isScrollable,void 0,this.legendSmallViewPortProperties,this.responsiveVisualEnabled),this.isMobileChart=a.interactivity&&a.interactivity.isInteractiveLegend,this.tooltipService=t.createTooltipService(a.host),this.viewMode=a.host.getViewMode();var o=this.visualInitOptions.style,n=e.Prototype.inherit(this.visualInitOptions.style);n.colorPalette=e.Prototype.inherit(o.colorPalette),n.colorPalette.dataColors=new g(a.style.colorPalette.dataColors),this.layerStyle=n},c.prototype.isPlayAxis=function(){if(!this.dataViews||!this.dataViews[0])return!1;var e=this.dataViews[0],t=e.categorical&&e.categorical.categories&&e.categorical.categories[0]&&e.categorical.categories[0].source&&e.categorical.categories[0].source.roles&&e.categorical.categories[0].source.roles.Play;return 9===this.type&&(this.animator||this.isMobileChart)&&null!=e.matrix&&(!e.categorical||t)},c.hasCategoryHierarchy=function(e){return e&&e.categorical&&e.categorical.categories&&e.categorical.categories.length>1},c.getIsScalar=function(a,i,r,o,n){if(n&&!o||!c.supportsScalar(r,o))return!1;var s=e.DataViewObjects.getValue(a,i);return!a||null==s||s===t.axisType.scalar},c.supportsScalar=function(e,a){return!(!a||_.isEmpty(a.values))||!t.AxisHelper.isOrdinal(e)},c.getScalarKeys=function(e){return o.getScalarKeys(e,t.cartesianChartProps.scalarKey.scalarKeyMin)},c.getAdditionalTelemetry=function(e){var a={},i=e&&e.categorical&&_.first(e.categorical.categories);return i&&(a.axisType=t.CartesianChart.getIsScalar(e.metadata.objects,t.columnChartProps.categoryAxis.axisType,i.source.type,void 0,c.hasCategoryHierarchy(e))?"scalar":"categorical"),a},c.detectScalarMapping=function(e){if(!e||!e.categorical||!e.categorical.categories)return!1;var a=e.categorical.categories,i=a.for.in.items;if(_.isEmpty(i))return!1;var r=a.for.in.activeItems,o=i[0];if(!_.isEmpty(r)){if(r.length>1)return!1;var n=_.find(i,(function(e){return e.queryName===r[0]}));o=n}var s=o.type;if(!e.metadata)return!1;var l=e.metadata.objects;return c.getIsScalar(l,t.columnChartProps.categoryAxis.axisType,s)},c.prototype.populateObjectProperties=function(e,a,i){if(e&&e.length>0){var r=e[0],o=r.metadata,n=!1;o&&(r.categorical&&!_.isEmpty(r.categorical.categories)&&(n=!!c.getScalarKeys(r.categorical.categories[0])),(s=this.referenceLines).push.apply(s,this.getStaticReferenceLines(o))),this.categoryAxisProperties=t.CartesianHelper.getCategoryAxisProperties(o,n||a),this.valueAxisProperties=t.CartesianHelper.getValueAxisProperties(o,i),this.lineStyleProperties=t.CartesianHelper.getLineStyleProperties(o)}var s},c.prototype.getStaticReferenceLines=function(a){var i=this.layerStyle.colorPalette.dataColors.getColorByIndex(0).value,r=[],o=e.DataViewObjects.getUserDefinedObjects(a.objects,"xAxisReferenceLine");r.push.apply(r,t.ReferenceLineHelper.readDataView(o,i,"xAxisReferenceLine",0));var n=e.DataViewObjects.getUserDefinedObjects(a.objects,"y1AxisReferenceLine");return r.push.apply(r,t.ReferenceLineHelper.readDataView(n,i,"y1AxisReferenceLine",1)),r},c.prototype.getDataBoundReferenceLines=function(a,i){var r=[],o=[];if(a)if(a.categorical&&a.categorical.values){var n=_.first(a.categorical.values.grouped());if(n)for(var s=0,l=n.values;s<l.length;s++){var c=l[s];o.push(c.source)}}else a.matrix&&a.matrix.valueSources&&(o=a.matrix.valueSources);for(var u=this.layerStyle.colorPalette.dataColors.getColorByIndex(0).value,d=0,p=o;d<p.length;d++){var h=p[d],g=e.DataViewObjects.getUserDefinedObjects(h.objects,"referenceLine"),m=this.getCartesianRoleKind(h,i);r.push.apply(r,t.ReferenceLineHelper.readDataView(g,u,"referenceLine",m,h.queryName))}return r},c.prototype.getCartesianRoleKind=function(e,t){var a=e.roles;if(t.getAxisLocationForRole&&a)for(var i in a)if(a[i])return t.getAxisLocationForRole(i);return 1},c.converter=function(t){var a={};if(!_.isEmpty(t)){var i=t[0],r=i.metadata;r&&(a=e.DataViewObjects.getObject(r.objects,"legend",{}))}return{legendObjectProperties:a}},c.prototype.updateInternal=function(i,o){var n=this.dataViews=i.dataViews;if(this.currentViewport=i.viewport,n){if(0===this.layers.length){var s=this.extractMetadataObjects(n);this.layers=this.createAndInitLayers(s)}var d=this.layers;null!=o&&(this.adaptedCartesianData=this.cartesianData=c.converter(this.dataViews)),this.viewModelAdapter&&!_.isEmpty(n)&&(this.adaptedCartesianData=this.viewModelAdapter.applyChanges(this.currentViewport,this.cartesianData,n[0]));var p=_.any(d,(function(e){return e.categoryAxisTitleOnByDefault&&e.categoryAxisTitleOnByDefault()})),h=_.any(d,(function(e){return e.valueAxisTitleOnByDefault&&e.valueAxisTitleOnByDefault()}));if(null!=o){if(this.referenceLines=[],!_.isEmpty(n)){var g=n[0];this.populateObjectProperties(n,p,h);var y=this.cartesianVisualCapabilities=this.getCartesianVisualCapabilitiesForLayers(),f=this.categoryAxisRenderMode=new u(g,y.supportsHierarchicalCategoryAxis).getRenderMode();g.metadata&&(this.background={image:e.DataViewObjects.getValue(g.metadata.objects,t.scatterChartProps.plotArea.image),transparency:e.DataViewObjects.getValue(g.metadata.objects,t.scatterChartProps.plotArea.transparency,t.visualBackgroundHelper.getDefaultTransparency())},f===l.Scalar&&this.loadMoreDataHandler?this.loadMoreDataHandler=null:f===l.Scalar||this.loadMoreDataHandler||(this.loadMoreDataHandler=new m(null,this.hostServices.loadMoreData,c.LoadMoreThreshold))),f===l.CategoricalConcatenated&&(g=r.concatenateCategories(g,t.columnChartProps.general.formatString,t.cartesianRoleNames.category),n=[g].concat(n.slice(1))),this.axes.update(g.categorical?g.categorical.categories:null,this.categoryAxisProperties,this.valueAxisProperties,f),this.svgAxes.update(this.categoryAxisProperties,this.valueAxisProperties)}var v=this.layerStyle.colorPalette.dataColors;v.clearPreferredScale();var b=a(n),C=_.filter(n,t.TrendLineHelper.isDataViewForRegression);this.trendLines=[];for(var S=_.filter(n,t.ForecastHelper.isDataViewForForecast),x=[],w=d.length>1&&!!(n[0]&&n[0].categorical&&n[0].categorical.values),P=0,D=d.length;P<D;P++){var T=b[P],V=d[P],L=T?[T]:[];null!=S[P]&&L.push(S[P]),d[P].setData(L);var N=void 0;if(V.calculateCustomLegend?N=V.calculateCustomLegend():T&&(N=t.Legend.buildSeriesLegendData({dataView:T,showByDefault:!0,staticSeriesRole:V.getStaticSeriesRole(),style:this.layerStyle,allowLegendWithNoSeries:w})),N&&x.push(N),(z=this.referenceLines).push.apply(z,this.getDataBoundReferenceLines(T,d[P])),this.supportsTrendLines(P)){var M=C[P];if(M){var A=P>0,R=t.TrendLineHelper.readDataView(M,T,A,v);(k=this.trendLines).push.apply(k,R)}}D>1&&v.rotateScale()}x.length>1?this.legendData=t.Legend.mergeLegendData(x,!0):1===x.length?this.legendData=x[0]:this.legendData=t.Legend.getDefaultLegendData()}if(this.loadMoreDataHandler&&null!=o&&this.loadMoreDataHandler.onLoadMoreDataCompleted(),this.render(!this.hasSetData||i.suppressAnimations,i.resizeMode,o),this.hasSetData=this.hasSetData||!_.isEmpty(n),!_.isEmpty(n)){var F=t.getInvalidValueWarnings(n,!1,!1,!1,["Tooltips"]);this.axes.addWarnings(F);var O=new t.VisualWarningBuilder;if(_.isEmpty(F)||O.add.apply(O,F),this.noLabelsCanBeRendered){var I={selector:null,warnings:[new t.DataLabelsNotRenderedWarning]};O.addForVisualObject("labels",I)}var g=_.first(n),H=[],j=this.cartesianVisualCapabilities&&this.cartesianVisualCapabilities.supportsHierarchicalCategoryAxis;new u(g,j).addObjectWarnings(H),_.isEmpty(H)||O.addForVisualObject.apply(O,["categoryAxis"].concat(H)),this.hostServices.setWarnings(O.complete())}var z,k}},c.prototype.onDataChanged=function(t){this.updateInternal({dataViews:t.dataViews,suppressAnimations:t.suppressAnimations,viewport:this.currentViewport},null!=t.operationKind?t.operationKind:e.VisualDataChangeOperationKind.Create)},c.prototype.onResizing=function(e,t){this.updateInternal({dataViews:this.dataViews,suppressAnimations:!0,viewport:e,resizeMode:t})},c.prototype.onViewModeChanged=function(e){this.viewMode=e},c.prototype.getCartesianVisualCapabilitiesForLayers=function(){for(var e=void 0,t=0,a=this.layers;t<a.length;t++){var i=a[t],r=i.getCartesianVisualCapabilities();r&&(e=(e||void 0===e)&&r.supportsHierarchicalCategoryAxis)}return{supportsHierarchicalCategoryAxis:e}},c.prototype.bindTouchEvents=function(e,t){var a=this,i={x:0,y:0};t.on("touchstart",(function(){if(0===a.viewMode&&(e.isXScrollBarVisible||e.isYScrollBarVisible)){var t=d3.event,r=t.changedTouches[0];i.x=r.pageX,i.y=r.pageY}})),t.on("touchmove",(function(){if(0===a.viewMode&&(e.isXScrollBarVisible||e.isYScrollBarVisible)){a.tooltipService.hide();var t=d3.event,r=t.changedTouches[0],o=i.x-r.pageX,n=i.y-r.pageY,s=e.isXScrollBarVisible?o:n;a.scrollableAxes.scrollDelta(s),i.x=r.pageX,i.y=r.pageY,t.preventDefault()}}))},c.prototype.bindScrollWheelEvents=function(e,t){var a=this;t.on("wheel",(function(){if(e.isXScrollBarVisible||e.isYScrollBarVisible){a.tooltipService.hide();var t=d3.event,i=t.deltaX,r=t.deltaY,o=Math.abs(i)>Math.abs(r)?i:r;a.scrollableAxes.scrollDelta(o),t.preventDefault()}}))},c.prototype.scrollTo=function(e){this.scrollableAxes.scrollTo(e)},c.prototype.enumerateObjectInstances=function(e){var a=new t.ObjectEnumerationBuilder,i=this.layers?this.layers.length:0;if("legend"===e.objectName){if(!this.shouldShowLegendCard())return;t.Legend.enumerate({enumeration:a,legendData:this.legendData,customFontFamily:this.customFontFamily})}else"categoryAxis"===e.objectName&&this.axes.hasCategoryAxis()?this.getCategoryAxisValues(a):"valueAxis"===e.objectName?this.getValueAxisValues(a):"lineStyles"===e.objectName?this.enumerateLineStyles(a):"y1AxisReferenceLine"===e.objectName||"xAxisReferenceLine"===e.objectName?this.enumerateReferenceLines(a,e.objectName):"referenceLine"===e.objectName?this.supportsDataBoundReferenceLines()&&this.enumerateReferenceLines(a,e.objectName):"trend"===e.objectName?this.supportsTrendLines()&&t.TrendLineHelper.enumerateObjectInstances(a,this.trendLines):("forecast"!==e.objectName||this.forecastEnabled)&&"plotArea"===e.objectName&&t.visualBackgroundHelper.enumeratePlot(a,this.background);if("dataPoint"===e.objectName&&t.ComboChart.isComboChart(this.type))t.ComboChart.enumerateDataPoints(a,e,this.layers);else for(var r=0,o=i;r<o;r++){var n=this.layers[r];n.enumerateObjectInstances&&n.enumerateObjectInstances(a,e)}if(this.viewModelAdapter){!this.dataViews||!this.dataViews[0];var s=this.dataViews[0];this.viewModelAdapter.enumerateObjectInstances(e,a,s)}return a.complete()},c.prototype.enumerateReferenceLines=function(e,a){var i=this.layerStyle.colorPalette.dataColors.getColorByIndex(0).value,r=_.filter(this.referenceLines,(function(e){return e.type===a}));t.ReferenceLineHelper.enumerateObjectInstances(e,r,i,a)},c.prototype.supportsTrendLines=function(e){return this.allLayerSupports((function(e){return e.supportsTrendLine&&e.supportsTrendLine()}),e)},c.prototype.supportsDataBoundReferenceLines=function(e){return this.allLayerSupports((function(e){return!e.isStacked||!e.isStacked()}),e)},c.prototype.allLayerSupports=function(e,t){var i=a(this.dataViews);if(_.isEmpty(this.layers))return!1;var r=null==t?this.layers:[this.layers[t]];return _.all(r,(function(t,a){return!i[a]||e(t)}))},c.prototype.shouldShowLegendCard=function(){var e=this.layers,t=this.dataViews;if(e&&t)for(var a=e.length,i=0,r=0;r<a;r++){if(e[r].hasLegend())return!0;var o=t[r];if(o&&o.categorical&&o.categorical.values&&o.categorical.values.length>0&&(i++,i>1))return!0}return!1},c.prototype.getAxisScaleOptions=function(e){var a=[t.DEFAULT_AXIS_SCALE_TYPE];return this.axes.isLogScaleAllowed(e)&&a.push(t.axisScale.log),a},c.prototype.getCategoryAxisValues=function(e){if(this.categoryAxisProperties){var a=t.cartesianChartProps.categoryAxis,i=this.categoryAxisRenderMode!==l.Hierarchical?t.axisType.both:t.axisType.categorical,r=!1,o=this.getAxisScaleOptions(0);i===t.axisType.both&&this.layers&&this.layers[0].getSupportedCategoryAxisType&&(i=this.layers[0].getSupportedCategoryAxisType(),i===t.axisType.scalar?r=!0:(r=t.CartesianHelper.isScalar(i===t.axisType.both,this.categoryAxisProperties),r&&(r=this.categoryAxisRenderMode===l.Scalar))),r||(this.categoryAxisProperties.start=null,this.categoryAxisProperties.end=null);var n={selector:null,properties:{},objectName:"categoryAxis",validValues:{axisScale:o,axisStyle:this.axes.categoryAxisHasUnitType?[t.axisStyle.showTitleOnly,t.axisStyle.showUnitOnly,t.axisStyle.showBoth]:[t.axisStyle.showTitleOnly]},propertyTypes:{}};if(n.properties.show=null==this.categoryAxisProperties.show||this.categoryAxisProperties.show,this.axes.isYAxisCategorical&&(n.properties.position=this.categoryAxisProperties&&null!=this.categoryAxisProperties.position?this.categoryAxisProperties.position:t.yAxisPosition.left),i===t.axisType.both&&(n.properties.axisType=r?t.axisType.scalar:t.axisType.categorical),r&&(n.properties.axisScale=this.categoryAxisProperties.axisScale||t.DEFAULT_AXIS_SCALE_TYPE,n.properties.start=this.categoryAxisProperties.start,n.properties.end=this.categoryAxisProperties.end),n.properties.labelColor=this.categoryAxisProperties.labelColor||t.DEFAULT_AXIS_COLOR,this.axisControlImprovements&&(n.properties.fontSize=this.categoryAxisProperties.fontSize||c.DefaultAxisFontSizeInPx),this.customFontFamily&&(n.properties.fontFamily=this.categoryAxisProperties[a.fontFamily.propertyName]||t.DEFAULT_FONT_FAMILY),r){n.properties.labelDisplayUnits=this.categoryAxisProperties.labelDisplayUnits?this.categoryAxisProperties.labelDisplayUnits:0;var s=this.categoryAxisProperties.labelPrecision;n.properties.labelPrecision=void 0===s||s<0?t.dataLabelUtils.defaultLabelPrecision:s}if(this.axes.isCategoryAxisDateTime()?(n.propertyTypes.start={dateTime:!0},n.propertyTypes.end={dateTime:!0}):(n.propertyTypes.start={numeric:!0},n.propertyTypes.end={numeric:!0}),this.axisControlImprovements&&!r&&(n.properties.preferredCategoryWidth=this.categoryAxisProperties.preferredCategoryWidth||c.MinOrdinalRectThickness),this.cartesianVisualCapabilities.supportsHierarchicalCategoryAxis&&!r){var u=t.cartesianChartProps.categoryAxis.concatenateLabels.propertyName,d=this.categoryAxisProperties[u];n.properties[u]=void 0!==d?d:c.DefaultConcatenateLabelsValue}n.properties.showAxisTitle=this.categoryAxisProperties.showAxisTitle||!1,n.properties.showAxisTitle&&(n.properties.axisStyle=this.categoryAxisProperties.axisStyle?this.categoryAxisProperties.axisStyle:t.axisStyle.showTitleOnly,n.properties.titleColor=this.categoryAxisProperties.titleColor||n.properties.labelColor,n.properties.titleText=this.categoryAxisProperties.titleText,this.axisControlImprovements&&(n.properties.titleFontSize=this.categoryAxisProperties.titleFontSize||n.properties.fontSize),this.customFontFamily&&(n.properties.titleFontFamily=this.categoryAxisProperties[a.titleFontFamily.propertyName]||t.DEFAULT_FONT_FAMILY)),e.pushInstance(n)}},c.prototype.getValueAxisValues=function(e){if(this.valueAxisProperties){var a=t.cartesianChartProps.valueAxis,i=this.getAxisScaleOptions(1),r=this.getAxisScaleOptions(2),o={selector:null,properties:{},objectName:"valueAxis",validValues:{axisScale:i,secAxisScale:r,axisStyle:this.axes.valueAxisHasUnitType?[t.axisStyle.showTitleOnly,t.axisStyle.showUnitOnly,t.axisStyle.showBoth]:[t.axisStyle.showTitleOnly],secAxisStyle:this.axes.secondaryValueAxisHasUnitType?[t.axisStyle.showTitleOnly,t.axisStyle.showUnitOnly,t.axisStyle.showBoth]:[t.axisStyle.showTitleOnly]},propertyTypes:{}};if(o.properties.show=null==this.valueAxisProperties.show||this.valueAxisProperties.show,o.properties.axisLabel=this.valueAxisProperties.axisLabel,this.axes.isYAxisCategorical||(o.properties.position=null!=this.valueAxisProperties.position?this.valueAxisProperties.position:t.yAxisPosition.left),o.properties.axisScale=this.valueAxisProperties.axisScale||t.DEFAULT_AXIS_SCALE_TYPE,o.properties.start=this.valueAxisProperties.start,o.properties.end=this.valueAxisProperties.end,o.properties.labelColor=this.valueAxisProperties.labelColor||t.DEFAULT_AXIS_COLOR,this.axisControlImprovements&&(o.properties.fontSize=this.valueAxisProperties.fontSize||c.DefaultAxisFontSizeInPx),this.customFontFamily&&(o.properties.fontFamily=this.valueAxisProperties[a.fontFamily.propertyName]||t.DEFAULT_FONT_FAMILY),7!==this.type&&8!==this.type){o.properties.labelDisplayUnits=this.valueAxisProperties.labelDisplayUnits?this.valueAxisProperties.labelDisplayUnits:0;var n=this.valueAxisProperties.labelPrecision;o.properties.labelPrecision=void 0===n||n<0?t.dataLabelUtils.defaultLabelPrecision:n}o.properties.showAxisTitle=this.valueAxisProperties.showAxisTitle||!1,o.properties.showAxisTitle&&(o.properties.axisStyle=null!=this.valueAxisProperties.axisStyle?this.valueAxisProperties.axisStyle:t.axisStyle.showTitleOnly,o.properties.titleColor=this.valueAxisProperties.titleColor||o.properties.labelColor,o.properties.titleText=this.valueAxisProperties.titleText,this.axisControlImprovements&&(o.properties.titleFontSize=this.valueAxisProperties.titleFontSize||o.properties.fontSize),this.customFontFamily&&(o.properties.titleFontFamily=this.valueAxisProperties[a.titleFontFamily.propertyName]||t.DEFAULT_FONT_FAMILY)),2===this.layers.length&&(o.properties.secShow=null!=this.valueAxisProperties.secShow?this.valueAxisProperties.secShow:this.axes.hasY2Axis()),this.axes.hasY2Axis()&&o.properties.secShow&&(o.properties.secAxisLabel="",o.properties.secPosition=null!=this.valueAxisProperties.secPosition?this.valueAxisProperties.secPosition:t.yAxisPosition.right,o.properties.secAxisScale=this.valueAxisProperties.secAxisScale||t.DEFAULT_AXIS_SCALE_TYPE,o.properties.secStart=this.valueAxisProperties.secStart,o.properties.secEnd=this.valueAxisProperties.secEnd,o.properties.secLabelColor=this.valueAxisProperties.secLabelColor||o.properties.labelColor,this.axisControlImprovements&&(o.properties.secFontSize=this.valueAxisProperties.secFontSize||o.properties.fontSize),this.customFontFamily&&(o.properties.secFontFamily=this.valueAxisProperties.secFontFamily||t.DEFAULT_FONT_FAMILY),o.properties.secLabelDisplayUnits=this.valueAxisProperties.secLabelDisplayUnits?this.valueAxisProperties.secLabelDisplayUnits:0,o.properties.secLabelPrecision=this.valueAxisProperties.secLabelPrecision<0?0:this.valueAxisProperties.secLabelPrecision,o.properties.secShowAxisTitle=this.valueAxisProperties.secShowAxisTitle||!1,o.properties.secShowAxisTitle&&(o.properties.secAxisStyle=this.valueAxisProperties.secAxisStyle?this.valueAxisProperties.secAxisStyle:t.axisStyle.showTitleOnly,o.properties.secTitleColor=this.valueAxisProperties.secTitleColor||o.properties.secLabelColor,o.properties.secTitleText=this.valueAxisProperties.secTitleText,this.axisControlImprovements&&(o.properties.secTitleFontSize=this.valueAxisProperties[a.secTitleFontSize.propertyName]||o.properties.secFontSize),this.customFontFamily&&(o.properties.secTitleFontFamily=this.valueAxisProperties[a.secTitleFontFamily.propertyName]||t.DEFAULT_FONT_FAMILY))),o.propertyTypes.start={numeric:!0},o.propertyTypes.end={numeric:!0},e.pushInstance(o)}},c.prototype.enumerateLineStyles=function(e){e.pushInstance({selector:null,properties:{strokeWidth:this.lineStyleProperties&&this.lineStyleProperties.strokeWidth,strokeLineJoin:this.lineStyleProperties&&this.lineStyleProperties.strokeLineJoin},objectName:"lineStyles"})},c.prototype.onClearSelection=function(){if(this.hasSetData)for(var e=0,t=this.layers.length;e<t;e++){var a=this.layers[e];a.onClearSelection(),a.render(!0)}},c.prototype.extractMetadataObjects=function(e){var t;if(e&&e.length>0){var a=e[0].metadata;a&&(t=a.objects)}return t},c.prototype.createAndInitLayers=function(t){var a=this,i=h.createLayers(this.type,t,this.interactivityService,this.animator,this.axes.isScrollable,this.tooltipsEnabled,this.axisControlImprovements),r=e.Prototype.inherit(this.visualInitOptions);r.svg=this.svgAxes.getScrollableRegion(),r.labelsContext=this.svgAxes.getLabelsRegion(),r.cartesianHost={updateLegend:function(e){return a.legend.drawLegend(e,a.currentViewport)},triggerRender:function(e){return a.render(e)}},r.chartType=this.type,r.services={tooltips:this.tooltipService},r.style=this.layerStyle;for(var o=0,n=i.length;o<n;o++)i[o].init(r);return i},c.prototype.renderLegend=function(){var e=this.legendData;null!=e.position?this.legend.changeOrientation(e.position):this.legend.changeOrientation(t.LegendPosition.Top),(1===e.dataPoints.length&&!e.grouped||this.hideLegends())&&(e.dataPoints=[]),this.legendData=e,this.legend.drawLegend(e,this.currentViewport)},c.prototype.hideLegends=function(){if(!this.responsiveVisualEnabled&&this.cartesianSmallViewPortProperties){var e=this.legend.getOrientation(),a=this.currentViewport.width<=this.cartesianSmallViewPortProperties.minWidthForLegend&&t.Legend.isLeftOrRight(e),i=this.currentViewport.height<=this.cartesianSmallViewPortProperties.minHeightForLegend&&t.Legend.isTopOrBottom(e);return a||i}return!1},c.prototype.isSideLegendExists=function(){return this.legend.isVisible()&&t.Legend.isLeftOrRight(this.legend.getOrientation())},c.prototype.render=function(a,i,r){var o=this;this.visualInitOptions.interactivity&&this.visualInitOptions.interactivity.isInteractiveLegend||this.renderLegend();var n,s=this.legendMargins=this.legend.getMargins(),l=this.legend.getOrientation(),u=c.shouldYAxisBeCategorical(this.type),d=this.showAxisTitles(this.categoryAxisProperties,this.valueAxisProperties,u),p=this.shouldRenderAxis(this.categoryAxisProperties,this.valueAxisProperties,u),h=this.getAxesFontProperties(),g={height:this.currentViewport.height-s.height,width:this.currentViewport.width-s.width},m=e.Prototype.inherit(t.SvgCartesianAxes.AxisPadding);this.isPlayAxis()&&(g.height-=c.PlayAxisBottomMargin,n={left:t.Legend.isLeft(l)?s.width:0,top:t.Legend.isTop(l)?s.height+g.height:g.height,height:c.PlayAxisBottomMargin,width:g.width}),this.chartAreaSvg.attr({width:g.width,height:g.height}),t.Legend.positionChartArea(this.chartAreaSvg,this.legend);var y=this.calculateInteractivityRightMargin(),f=this.getMinimumDomainExtents(),v=f[0],b=f[1],C=!this.renderedPlotArea||this.renderedPlotArea.height!==g.height||this.renderedPlotArea.width!==g.width;a=a||C;var S=this.axes.negotiateAxes(this.layers,g,m,n,d,p,h,y,v,b),x=S.axes.x.isCategoryAxis?S.axes.x:S.axes.y1;if(this.loadMoreDataHandler&&this.loadMoreDataHandler.setScale(x.scale),this.lassoSelectionBehavior&&this.lassoSelectionBehavior.update(S),this.renderedPlotArea=g,!(S.plotArea.width<1||S.plotArea.height<1)){var w=this.layers,P=function(e,t,a,r,n){return o.renderPlotArea(e,t,a,s,h,i,r,n)},D=this.loadMoreDataHandler,T=r===e.VisualDataChangeOperationKind.Append||null!=i;
this.scrollableAxes.render(S,w,a,P,D,T),this.bindScrollWheelEvents(S,this.chartAreaSvg),this.bindTouchEvents(S,this.chartAreaSvg)}},c.prototype.getMinimumDomainExtents=function(){var e=[],a=[];t.ReferenceLineHelper.gatherDomainExtents(this.referenceLines,e,a);var i={min:d3.min(e),max:d3.max(e)},r={min:d3.min(a),max:d3.max(a)};return[i,r]},c.prototype.getPlotAreaRect=function(e,a){var i={left:e.margin.left,top:e.margin.top,width:e.plotArea.width,height:e.plotArea.height};if(this.legend){var r=this.legend.getOrientation();t.Legend.isTop(r)?i.top+=a.height:t.Legend.isLeft(r)&&(i.left+=a.width)}return i},c.prototype.renderBackgroundImage=function(e){t.visualBackgroundHelper.renderBackgroundImage(this.background,this.element,e)},c.prototype.showAxisTitles=function(t,a,i){var r={x:e.DataViewObject.getValue(i?a:t,"showAxisTitle",!1),y:e.DataViewObject.getValue(i?t:a,"showAxisTitle",!1),y2:e.DataViewObject.getValue(a,"secShowAxisTitle",!1)};return this.responsiveVisualEnabled||this.cartesianSmallViewPortProperties&&(this.currentViewport.height<=this.cartesianSmallViewPortProperties.minHeightForAxisLabels&&(r.x=!1,r.y=!1,r.y2=!1),this.currentViewport.width<=this.cartesianSmallViewPortProperties.minWidthForAxisLabels&&(r.y=!1,r.y2=!1)),r},c.prototype.shouldRenderAxis=function(t,a,i){var r={x:e.DataViewObject.getValue(i?a:t,"show",!0),y:e.DataViewObject.getValue(i?t:a,"show",!0),y2:e.DataViewObject.getValue(a,"secShow",!0)};return this.responsiveVisualEnabled||this.cartesianSmallViewPortProperties&&(this.currentViewport.height<=this.cartesianSmallViewPortProperties.minHeightForAxis&&(r.x=!1),this.currentViewport.width<=this.cartesianSmallViewPortProperties.minWidthForAxis&&(r.y=!1,r.y2=!1),this.currentViewport.width<=this.cartesianSmallViewPortProperties.mediumWidthForAxis&&this.isSideLegendExists()&&(r.y=!1,r.y2=!1)),r},c.prototype.getAxesFontProperties=function(){var e=t.FontProperties.create({family:c.DefaultAxisFontFamily,size:{px:c.DefaultAxisFontSizeInPx}}),a=t.cartesianChartProps.categoryAxis,i=t.FontProperties.createFromDataViewObject(this.categoryAxisProperties,{family:a.fontFamily.propertyName,size:a.fontSize.propertyName,sizeInPixels:!0},e),r=t.FontProperties.createFromDataViewObject(this.categoryAxisProperties,{family:a.titleFontFamily.propertyName,size:a.titleFontSize.propertyName,sizeInPixels:!0},i),o={tickLabels:i,title:r},n=t.cartesianChartProps.valueAxis,s=t.FontProperties.createFromDataViewObject(this.valueAxisProperties,{family:n.fontFamily.propertyName,size:n.fontSize.propertyName,sizeInPixels:!0},e),l=t.FontProperties.createFromDataViewObject(this.valueAxisProperties,{family:n.titleFontFamily.propertyName,size:n.titleFontSize.propertyName,sizeInPixels:!0},s),u={tickLabels:s,title:l},d=t.FontProperties.createFromDataViewObject(this.valueAxisProperties,{family:n.secFontFamily.propertyName,size:n.secFontSize.propertyName,sizeInPixels:!0},s),p=t.FontProperties.createFromDataViewObject(this.valueAxisProperties,{family:n.secTitleFontFamily.propertyName,size:n.secTitleFontSize.propertyName,sizeInPixels:!0},d),h={tickLabels:d,title:p},g={x:this.axes.isYAxisCategorical?u:o,y:this.axes.isYAxisCategorical?o:u,y2:h};return this.responsiveVisualEnabled||this.cartesianSmallViewPortProperties&&this.currentViewport.width<=this.cartesianSmallViewPortProperties.maxWidthForMediumFont&&(g.x.tickLabels.sizePx=c.xAxisSmallFontSizeInPx,g.x.title.sizePx=c.xAxisSmallFontSizeInPx,g.y.tickLabels.sizePx=c.yAxisMediumFontSizeInPx,g.y.title.sizePx=c.yAxisMediumFontSizeInPx,g.y2.tickLabels.sizePx=c.yAxisMediumFontSizeInPx,g.y2.title.sizePx=c.yAxisMediumFontSizeInPx,this.currentViewport.width<=this.cartesianSmallViewPortProperties.maxWidthForSmallFont&&(g.y.tickLabels.sizePx=c.yAxisSmallFontSizeInPx,g.y.title.sizePx=c.yAxisSmallFontSizeInPx,g.y2.tickLabels.sizePx=c.yAxisSmallFontSizeInPx,g.x.title.sizePx=c.yAxisSmallFontSizeInPx)),g},c.prototype.calculateInteractivityRightMargin=function(){return this.visualInitOptions.interactivity&&this.visualInitOptions.interactivity.isInteractiveLegend&&!this.trimOrdinalDataOnOverflow?s:0},c.prototype.renderPlotArea=function(e,a,i,r,o,n,s,l){i=i||_.any(e,(function(e){return e.shouldSuppressAnimation&&e.shouldSuppressAnimation()}));var c=a.axes,u=a.plotArea,d=this.getPlotAreaRect(a,r),p=t.AnimatorCommon.GetAnimationDuration(this.animator,i),h=this.animator&&this.animator.getEasing();this.renderBackgroundImage(d),this.svgAxes.renderAxes({axesLayout:a,duration:p,axesFontProperties:o,animateCategoryAxis:s,animateValueAxis:l,easing:_.isEmpty(h)?void 0:h}),this.renderReferenceLines(a),this.renderLayers(e,u,c,i,n),this.renderTrendLines(a)},c.prototype.renderTrendLines=function(e){var a=this.svgAxes.getScrollableRegion();t.TrendLineHelper.render(this.trendLines,a,e.axes,e.plotArea)},c.prototype.renderReferenceLines=function(e){var a={graphicContext:this.svgAxes.getScrollableRegion(),axes:e.axes,viewport:e.plotArea,referenceLines:this.referenceLines};t.ReferenceLineHelper.render(a)},c.prototype.getReferenceLineLabels=function(e,a){var i={axes:e,viewport:a,referenceLines:this.referenceLines,hostServices:this.hostServices};return t.ReferenceLineHelper.createLabelDataPoint(i)},c.prototype.renderDataLabels=function(a,i,r,o,n,s){var l=this.svgAxes.getLabelBackground(),c=this.svgAxes.getLabelsRegion(),u=[];if(this.behavior){var d=t.NewDataLabelUtils.getDataLabelLayoutOptions(this.type),p=new e.LabelLayout(d);u=p.layout(a,r),n&&t.NewDataLabelUtils.drawLabelBackground(l,u,"#FFFFFF",.7);var h=void 0,g=this.animator;if(g&&!o&&s){var m=this.isPlayAxis(),y=m?t.PlayChart.FrameAnimationDuration:g.getDuration();h=t.NewDataLabelUtils.animateDefaultLabels(c,u,y,i,m?"linear":g.getEasing())}else h=t.NewDataLabelUtils.drawDefaultLabels(c,u,i);if(d.allowLeaderLines){var f=_.filter(u,(function(e){return null!=e.leaderLinePoints&&!_.isEmpty(e.leaderLinePoints)&&null!=e.identity}));t.NewDataLabelUtils.drawLabelLeaderLines(c,f,(function(e){return e.identity.getKey()}))}if(this.interactivityService&&this.isLabelInteractivityEnabled){var v={labelItems:h};this.interactivityService.bind(u,new t.LabelsBehavior,v,{isLabels:!0})}}else{var p=new e.LabelLayout({maximumOffset:t.NewDataLabelUtils.maxLabelOffset,startingOffset:t.NewDataLabelUtils.startingLabelOffset,attemptToMoveLabelsIntoViewport:!0});u=p.layout(a,r),n&&t.NewDataLabelUtils.drawLabelBackground(l,u,"#FFFFFF",.7),t.NewDataLabelUtils.drawDefaultLabels(c,u,i)}for(var b,C=0,S=a;C<S.length;C++){var x=S[C];if(!_.isEmpty(x.labelDataPoints)){b=!0;break}}return!_.isEmpty(u)||!b},c.prototype.renderLayers=function(e,a,i,r,o){var n=[],s=[],l=[],c=!0;r=r||_.any(e,(function(e){return e.shouldSuppressAnimation&&e.shouldSuppressAnimation()}));for(var u=!0,d=0,p=e;d<p.length;d++){var h=p[d],g=h.render(r,o);if(g){if(g.animateLabels||(u=!1),this.behavior&&(s=s.concat(g.dataPoints),l.push(g.behaviorOptions)),g.labelDataPointGroups)for(var m=g.labelDataPointGroups,y=0,f=m;y<f.length;y++){var v=f[y];v&&n.push({labelDataPoints:t.NewDataLabelUtils.removeDuplicates(v.labelDataPoints||[]),maxNumberOfLabels:v.maxNumberOfLabels,labelOrientation:g.labelOrientation})}else{var b=g.labelDataPoints||[];n.push({labelDataPoints:t.NewDataLabelUtils.removeDuplicates(b),maxNumberOfLabels:b.length,labelOrientation:g.labelOrientation})}c=c&&g.labelsAreNumeric}}var C=this.getReferenceLineLabels(i,a);if(_.isEmpty(C)||n.unshift({labelDataPoints:C,maxNumberOfLabels:C.length}),this.noLabelsCanBeRendered=!this.renderDataLabels(n,c,a,r,t.ComboChart.isComboChart(this.type),u),this.interactivityService){var S={layerOptions:l,clearCatcher:this.clearCatcher};this.interactivityService.bind(s,this.behavior,S)}},c.getPreferredPlotArea=function(e,t,a,i,r,o,n){o||(o={top:0,right:0,bottom:0,left:0});var s={height:a.height-o.top-o.bottom,width:a.width-o.left-o.right};if(!r&&i){var l=c.getPreferredCategorySpan(e,t,n);s.width=Math.max(l,s.width)}return s},c.getPreferredCategorySpan=function(e,t,a){var i=t*e;return i+t*(a||0)*2},c.getLayout=function(t,a){var i=a.categoryCount,r=a.availableWidth,o=a.domain,n=a.trimOrdinalDataOnOverflow,s=!!a.isScalar,l=!!a.isScrollable,u=a.preferredCategoryWidth,d=c.getCategoryWidth(t?t.series:null,i,r,o,s,n),p=c.getCustomizedCategoryWidthInfo(d,i,r,s,u),h=p.categoryWidth,g=p.outerPaddingRatio,m=h*g*2,y=e.Double.floorWithPrecision((r-m)/h),f=Math.min(y,i),v=f<i&&l;if(!s&&!v){var b=(r-h*f)/2;g=b/h}return!s&&l&&(f=i),{categoryCount:f,categoryThickness:h,outerPaddingRatio:g,isScalar:s}},c.getCustomizedCategoryWidthInfo=function(e,t,a,i,r){var o=e,n=c.DefaultOuterPaddingRatio;if(i||null==r||r<e)return{categoryWidth:o,outerPaddingRatio:n};var s=Math.floor((a-r*c.DefaultOuterPaddingRatio*2)/r);return s<=0?o=a/(1+2*c.DefaultOuterPaddingRatio):s<t?(n=(a-r*s)/(2*r),o=r):o=Math.min(r,a),{categoryWidth:o,outerPaddingRatio:n}},c.getCategoryWidth=function(e,t,a,i,r,o){var n;if(t<2)n=a*(1-c.DefaultOuterPaddingRatio);else if(r&&i&&i.length>1){var s=c.getMinInterval(e),l=i[i.length-1]-i[0],u=s/(l+s*c.DefaultOuterPaddingRatio*2);n=a*u,n=Math.max(n,c.MinScalarRectThickness)}else n=a/(t+2*c.DefaultOuterPaddingRatio),o&&(n=Math.max(n,c.MinOrdinalRectThickness));var d=a/(3+2*c.DefaultOuterPaddingRatio);return n=Math.min(n,d),!r&&t>=3&&o?Math.max(n,c.MinOrdinalRectThickness):n},c.getMinInterval=function(e){var t=Number.MAX_VALUE;if(e.length>0)for(var a=e[0].data.filter((function(e){return!e.highlight})),i=0,r=a.length-1;i<r;i++)t=Math.min(t,Math.abs(a[i+1].categoryValue-a[i].categoryValue));return t},c.expandCategoryWindow=function(e){var t=1e3;if(c.shouldExpandCategoryWindow(e))for(var a=0,i=e;a<i.length;a++){var r=i[a];if(!r.categorical)return;var o=r.categorical.categories;if(!o||!o.dataReductionAlgorithm||!o.dataReductionAlgorithm.window)return;o.dataReductionAlgorithm={window:{count:t}}}},c.requestFilteredToUniqueValue=function(a){for(var i=0,r=a;i<r.length;i++){var o=r[i],n=o.categorical.categories;e.data.CompiledDataViewMapping.visitCategoricalCategories(n,{visitRole:function(e){var a=e.items;if(!_.isEmpty(a)&&!_.isEmpty(e.activeItems))for(var i=_.filter(a,(function(t){return _.contains(e.activeItems,t.queryName)})),r=0,o=i;r<o.length;r++){var n=o[r];n.filteredToUniqueValueProperty=t.cartesianChartProps.filters.filteredToUniqueValue}}})}},c.applyHierarchicalSorts=function(e,t,a){void 0===a&&(a=1);for(var r=function(e){if(!(e&&e.categorical&&e.categorical.categories&&e.metadata))return"continue";var r=e.metadata.columns,o=e.categorical.categories;return _.any(r,(function(e){return void 0!==e.sort}))?"continue":void i.visitCategoricalCategories(o,{visitRole:function(e,i){if(_.contains(t,e.role)){var o=e.activeItems;if(!_.isEmpty(o))for(var n=0,s=function(e){var t=o[e],i=_.find(r,(function(e){return e.queryName===t}));i&&(i.sort=a,i.sortOrder=n++)},l=0;l<o.length;l++)s(l)}}})},o=0,n=e;o<n.length;o++){var s=n[o];r(s)}},c.shouldExpandCategoryWindow=function(e){if(_.isEmpty(e))return!1;var t=_.any(e,(function(e){var t=e.categorical;if(!t)return!1;var a=t.categories;if(!a)return!1;var i=t.values;return!(!(i&&i.group&&i.group.by)||_.isEmpty(i.group.by.items))}));return!t},c})();c.DefaultConcatenateLabelsValue=!0,c.MinOrdinalRectThickness=20,c.MinScalarRectThickness=2,c.DefaultOuterPaddingRatio=.4,c.InnerPaddingRatio=.2,c.TickLabelPadding=2,c.LoadMoreThreshold=1,c.DefaultAxisFontFamily=t.Font.Family.regular.css,c.DefaultAxisFontSizeInPx=11,c.xAxisSmallFontSizeInPx=9,c.yAxisSmallFontSizeInPx=9,c.yAxisMediumFontSizeInPx=11,c.ClassName="cartesianChart",c.PlayAxisBottomMargin=80,c.AxisFontFamily=t.Font.Family.regular.css,t.CartesianChart=c;var u=(function(){function a(e,t){this.processDataView(e,t)}return a.prototype.processDataView=function(i,r){if(!i||!i.metadata||!i.categorical||_.isEmpty(i.categorical.categories))return void(this.renderMode=l.CategoricalConcatenated);var o=i.metadata,n=i.categorical.categories,s=_.first(n),u=c.getScalarKeys(s),d=c.hasCategoryHierarchy(i),p=c.getIsScalar(o.objects,t.columnChartProps.categoryAxis.axisType,s.source.type,u,d);if(p)return void(this.renderMode=l.Scalar);if(!d)return void(this.renderMode=l.CategoricalNotConcatenated);var h=a.areNonLeafLevelsFilteredToUniqueValue(n),g=e.DataViewObjects.getValue(o.objects,t.cartesianChartProps.categoryAxis.concatenateLabels,c.DefaultConcatenateLabelsValue);if(h&&g)return void(this.renderMode=l.CategoricalNotConcatenated);var m=a.isSortedByCategoryFirst(i),y=_.any(i.categorical.categories,(function(e){return e.source&&e.source.identityExprs})),f=r&&!g&&y&&(m||h);this.renderMode=f?l.Hierarchical:l.CategoricalConcatenated,g||y||(this.warnings=[{selector:null,warnings:[new t.NoIdentityExprWarning]}])},a.prototype.getRenderMode=function(){return this.renderMode},a.prototype.addObjectWarnings=function(e){this.warnings&&e.push.apply(e,this.warnings)},a.isSortedByCategoryFirst=function(e){return!(!e||!e.categorical||_.isEmpty(e.categorical.categories)||!e.metadata||_.isEmpty(e.metadata.columns))&&_.all(e.categorical.categories,(function(e,t){var a=e.source;return a&&null!=a.sort&&a.sortOrder===t}))},a.areNonLeafLevelsFilteredToUniqueValue=function(a){if(_.isEmpty(a))return!1;for(var i=a.length-1,r=0;r<i;r++){var o=a[r].source;if(!o||!e.DataViewObjects.getValue(o.objects,t.cartesianChartProps.filters.filteredToUniqueValue,!1))return!1}return!0},a})();t.CartesianAxisRenderModeSelector=u;var d=(function(){function a(e,t,a,i){this.cartesianAxes=e,this.scrollbar=t,this.animateCategoryAxis=a,this.animateValueAxis=i}return a.filterDataToViewport=function(e){if(e&&e.scrollScale){var i,r=e.scrollScale,o=e.mainAxisScale,n=[],s=t.AxisHelper.invertOrdinalScale(r,e.extent.start),l=s+e.visibleCategoryCount,c=r.domain();if(i=c.slice(s,l),!_.isEqual(i,o.domain())){if(i&&i.length>0){for(var u=e.layers,d=0;d<u.length;d++)n[d]=u[d].setFilteredData(i[0],i[i.length-1]+1);o.domain(i);var p=e.axesLayout.axes,h=void 0;h=e.axesLayout.isXScrollBarVisible?p.x:p.y1,h.axis.scale(o),h.scale(o),h.axis.ticks(i.length),h.axis.tickValues(i);var g=t.SvgCartesianAxes.getTickFormatter(h.axis);if(h.values=_.map(i,(function(e){return g(e)})),!_.isEmpty(p.xStack))for(var m=e.axesLayout.tickLabelMargins,y=t.CartesianAxes.getLeafHeight(m.xMax,m.stackHeight,p.xStack.length),f=function(e){var r=p.xStack[e],o=t.AxisHelper.getCategoryThickness(r.scale),n=r.values,s=a.setLabelsAtEdges(i,n);if(r.axis.ticks(i.length).tickValues(i).tickFormat((function(e){var a=n[s[i.indexOf(e)]];return a===t.CartesianAxes.hierarchyPlaceholder?"":_.isString(a)?a:a+""})),0===e)return"continue";for(var l=[],c=[],u=[],d=void 0,h=0;h<s.length;h++){var g=i[h],f=s[h],v=r.values[f];if(v!==t.CartesianAxes.hierarchyPlaceholder){if(null!=d){var b=g-d;l[d]=t.CartesianAxes.getMaxCategoryWidth(b,o),c[d]=t.CartesianAxes.getHierarchyLineStyleInfo({levelIndex:e,stackHeight:m.stackHeight,leafHeight:y,categorySpanCount:b,categoryWidth:o})}u[g]=n[f],d=g}else u[g]=t.CartesianAxes.hierarchyPlaceholder}if(null!=d){var b=i[s.length-1]-d+1;l[d]=t.CartesianAxes.getMaxCategoryWidth(b,o),c[d]=t.CartesianAxes.getHierarchyLineStyleInfo({levelIndex:e,stackHeight:m.stackHeight,leafHeight:y,categorySpanCount:b,categoryWidth:o})}r.xLabelMaxWidths=l,r.lineStyleInfo=c,r.adjustedValues=u},v=0;v<p.xStack.length;v++)f(v)}return{startIndex:s,endIndex:l-1}}}},a.prototype.render=function(t,i,r,o,n,s){var l=this,u=t.plotArea;this.axisScale=null;var d,h,g,m,y,f,v,b=t.isXScrollBarVisible||t.isYScrollBarVisible;if(n||b)if(this.cartesianAxes.isYAxisCategorical){this.axisScale=t.axes.y1.scale,d=t.viewport.width,h=t.margin.top,y=t.axes.y1.categoryThickness,f=t.axes.y1.outerPaddingRatio;var C=y*f;v=u.height,m=Math.max(1,e.Double.floorWithPrecision((v-2*C)/y)),g=v}else{this.axisScale=t.axes.x.scale,d=t.margin.left,h=t.viewport.height,y=t.axes.x.categoryThickness,f=t.axes.x.outerPaddingRatio;var C=y*f;v=u.width,m=Math.max(1,e.Double.floorWithPrecision((v-2*C)/y)),g=v}if(!b)return n&&(n.viewportDataRange={startIndex:0,endIndex:m},n.shouldLoadMoreData()&&n.loadMoreData()),this.scrollbar.remove(),void o(i,t,r,this.animateCategoryAxis,this.animateValueAxis);this.scrollScale=this.axisScale.copy(),this.scrollScale.rangeBands([0,g],.1,0),this.extentLength=this.scrollScale(m-1)+this.scrollScale.rangeBand(),this.scrollHandler=new p({visibleScale:this.axisScale,fullScale:this.scrollScale,onScroll:function(e){var t=l.scrollScale(e),a={start:t,end:null};l.scrollbar.setExtent(a),l.scrollbar.refreshExtentAndVisual()}}),this.axisScale.rangeBands([0,v],c.InnerPaddingRatio,f),this.scrollbar.setOrientation(t.isXScrollBarVisible),this.scrollbar.setScale(this.scrollScale),this.scrollbar.scrollBarLength=g,this.scrollbar.setExtentLength(this.extentLength),s||this.scrollbar.setExtent({start:0,end:null}),this.renderVisualOptions={axesLayout:t,layers:i,loadMoreDataHandler:n,mainAxisScale:this.axisScale,renderDelegate:o,scrollScale:this.scrollScale,visibleCategoryCount:m,animateCategoryAxis:this.animateCategoryAxis,animateValueAxis:this.animateValueAxis};var S=function(){return l.onRefreshVisual((function(e,t){return a.renderVisual(l.renderVisualOptions,e,t)}))};if(this.scrollbar.render(d,h,S),s&&n){var x=n.viewportDataRange?n.viewportDataRange.startIndex:0;this.scrollTo(x)}else a.renderVisual(this.renderVisualOptions,this.scrollbar.getExtent(),r)},a.prototype.scrollDelta=function(e){this.scrollHandler.scrollDelta(e)},a.prototype.scrollTo=function(e){this.scrollHandler.scrollTo(e)},a.prototype.onRefreshVisual=function(e){var t=this.scrollbar.getExtent();e(t,!0)},a.setLabelsAtEdges=function(e,a){if(e.length<=1||a[e[0]]!==t.CartesianAxes.hierarchyPlaceholder)return e;var i=e[0],r=e.slice();if(i<a.length&&i>=0){for(;a[i]===t.CartesianAxes.hierarchyPlaceholder&&i>=0;i--);r[0]=i}return r},a.renderVisual=function(e,t,i){var r=a.filterDataToViewport({mainAxisScale:e.mainAxisScale,layers:e.layers,scrollScale:e.scrollScale,extent:t,visibleCategoryCount:e.visibleCategoryCount,axesLayout:e.axesLayout,animateCategoryAxis:e.animateCategoryAxis,animateValueAxis:e.animateValueAxis});if(r){if(e.loadMoreDataHandler){var o=e.loadMoreDataHandler;o.viewportDataRange=r,o.shouldLoadMoreData()&&o.loadMoreData()}e.renderDelegate(e.layers,e.axesLayout,i,e.animateCategoryAxis,e.animateValueAxis)}},a})();d.ScrollbarWidth=10,t.ScrollableAxes=d;var p=(function(){function e(t){this.visibleScale=t.visibleScale,this.fullScale=t.fullScale,this.onScroll=t.onScroll;var a=jsCommon.Utility.valueOrDefault(t.timeout,e.defaultTimeoutMs);this.extendScrollTimeout=_.debounce(this.onTimeout,a),this.totalScrollDistance=0}return e.prototype.scrollDelta=function(t){if(!_.isEmpty(this.visibleScale.domain())){this.totalScrollDistance<0&&t>0||this.totalScrollDistance>0&&t<0?this.totalScrollDistance=t:this.totalScrollDistance+=t;var a=e.getStepSize(this.visibleScale);if(Math.abs(this.totalScrollDistance)>=a){this.extendScrollTimeout&&this.extendScrollTimeout.cancel();var i=this.getNewStartIndex(this.totalScrollDistance);this.scrollTo(i),this.totalScrollDistance=0}else this.extendScrollTimeout()}},e.prototype.scrollTo=function(e){var t=this.clampIndex(e);this.onScroll(t)},e.getStepSize=function(e){var t=e.range();if(t.length>1)return t[1]-t[0];var a=e.rangeExtent();return a[1]-a[0]},e.prototype.getNewStartIndex=function(e){var a=e>=0;e=a?e:-e;var i,r=this.visibleScale,o=r.range(),n=r.domain(),s=n[0],l=o[0],c=l+e,u=r.rangeExtent()[1];if(c>u){var d=n.length;i=d}else{var p=t.AxisHelper.invertOrdinalScale(r,c);i=p-s}return(a?1:-1)*i+s},e.prototype.clampIndex=function(e){var t=this.fullScale.domain(),a=_.first(t),i=_.last(t);return Math.max(a,Math.min(i,e))},e.prototype.onTimeout=function(){this.totalScrollDistance=0},e})();p.defaultTimeoutMs=1e3,t.AxisScrollHandler=p;var h;!(function(e){function a(e,a,u,d,p,h,g){void 0===p&&(p=!1);var m=[],y={isScrollable:p,animator:d,interactivityService:u,tooltipsEnabled:h,axisControlImprovements:g};switch(e){case 1:m.push(i(2,!1,y));break;case 0:m.push(i(1,!1,y));break;case 2:m.push(i(16,!1,y));break;case 17:m.push(r(y));break;case 9:m.push(o(y));break;case 12:m.push(n(y));break;case 11:m.push(s(y));break;case 4:m.push(l(t.ColumnChartType.stackedColumn,y));break;case 3:m.push(l(t.ColumnChartType.clusteredColumn,y));break;case 8:m.push(l(t.ColumnChartType.hundredPercentStackedColumn,y));break;case 6:m.push(l(t.ColumnChartType.stackedBar,y));break;case 5:m.push(l(t.ColumnChartType.clusteredBar,y));break;case 7:m.push(l(t.ColumnChartType.hundredPercentStackedBar,y));break;case 10:var f=c();m.push(l(f,y)),m.push(i(1,!0,y));break;case 13:m.push(l(t.ColumnChartType.clusteredColumn,y)),m.push(i(1,!0,y));break;case 14:m.push(l(t.ColumnChartType.stackedColumn,y)),m.push(i(1,!0,y));break;case 15:m.push(l(t.ColumnChartType.clusteredColumn,y)),m.push(s(y));break;case 16:m.push(l(t.ColumnChartType.stackedColumn,y)),m.push(s(y))}return m}function i(e,a,i,r){var o={animator:i.animator,interactivityService:i.interactivityService,isScrollable:i.isScrollable,tooltipsEnabled:!r&&i.tooltipsEnabled,chartType:e,axisControlImprovements:i.axisControlImprovements};return a&&(o.chartType=8|o.chartType),new t.LineChart(o)}function r(e){return e.isScrollable=!1,new t.RealTimeLineChart(e)}function o(e){return e.isScrollable=!1,new t.ScatterChart(e)}function n(e){return new t.WaterfallChart(e)}function s(e){return new t.DataDotChart(e)}function l(e,a){var i={animator:a.animator,interactivityService:a.interactivityService,isScrollable:a.isScrollable,tooltipsEnabled:a.tooltipsEnabled,axisControlImprovements:a.axisControlImprovements,chartType:e};return new t.ColumnChart(i)}function c(e){var a=t.ColumnChartType.clusteredColumn;if(e){var i=e.general;if(i){switch(i.visualType1){case"Column":a=t.ColumnChartType.clusteredColumn;break;case"ColumnStacked":a=t.ColumnChartType.stackedColumn}i.visualType2}}return a}e.createLayers=a})(h||(h={}));var g=(function(){function e(e){this.palette=e,this.clearPreferredScale()}return e.prototype.getColorScaleByKey=function(e){return this.setPreferredScale(e),this.preferredScale},e.prototype.getNewColorScale=function(){return this.preferredScale},e.prototype.getColorByIndex=function(e){return this.palette.getColorByIndex(e)},e.prototype.getSentimentColors=function(){return this.palette.getSentimentColors()},e.prototype.getBasePickerColors=function(){return this.palette.getBasePickerColors()},e.prototype.clearPreferredScale=function(){this.preferredScale=this.palette.getNewColorScale(),this.rotated=!1},e.prototype.rotateScale=function(){this.preferredScale=this.preferredScale.clone(),this.preferredScale.clearAndRotateScale(),this.rotated=!0},e.prototype.setPreferredScale=function(e){this.rotated||(this.preferredScale=this.palette.getColorScaleByKey(e))},e})();t.SharedColorPalette=g;var m=(function(){function e(e,t,a){void 0===a&&(a=0),this.loadMoreThreshold=a,this.loadMoreCallback=t,this.setScale(e)}return e.prototype.setScale=function(e){e&&(this.loadMoreThresholdIndex=e.domain().length-1-this.loadMoreThreshold)},e.prototype.isLoadingMoreData=function(){return this.loadingMoreData},e.prototype.onLoadMoreDataCompleted=function(){this.loadingMoreData=!1},e.prototype.shouldLoadMoreData=function(){var e=this.viewportDataRange;return!(!e||this.isLoadingMoreData())&&e.endIndex>=this.loadMoreThresholdIndex},e.prototype.loadMoreData=function(){this.isLoadingMoreData()||(this.loadingMoreData=!0,this.loadMoreCallback())},e})();t.CartesianLoadMoreDataHandler=m})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function a(e){return e.length>1}function i(e,t){var a={domain:void 0,merged:!1,tickCount:void 0};if(e.length<2)return a;var i,r,o,s,l=e[0].calculateAxesProperties(t)[1],c=e[1].calculateAxesProperties(t)[1],u=l.scale.domain(),d=c.scale.domain();if(l.values&&l.values.length>0&&c.values&&c.values.length>0&&(a.tickCount=Math.max(l.values.length,c.values.length)),i=Math.min(u[0],d[0]),r=Math.max(u[1],d[1]),t.forceMerge)return{domain:[i,r],merged:!0,tickCount:a.tickCount};if(u[0]>d[1]||u[1]<d[0])return a;s=Math.max(u[0],d[0]),o=Math.min(u[1],d[1]);var p=r-i;if(0===p)return a;var h=Math.abs((o-s)/p);return h<n?a:{domain:[i,r],merged:!0,tickCount:a.tickCount}}var r=jsCommon.EnumExtensions,o=jsCommon.CssConstants.createClassAndSelector,n=.1,s=(function(){function a(e){this.axes=e}return a.prototype.getScrollableRegion=function(){return this.axisGraphicsContextScrollable},a.prototype.getLabelsRegion=function(){return this.labelRegion},a.prototype.getLabelBackground=function(){return this.labelBackgroundRegion},a.prototype.update=function(e,t){this.categoryAxisProperties=e,this.valueAxisProperties=t},a.prototype.init=function(e){var i=this.axisGraphicsContext=e.append("g").classed(a.AxisGraphicsContext.class,!0);this.svgScrollable=e.append("svg").classed("svgScrollable",!0).style("overflow","hidden");var r=this.axisGraphicsContextScrollable=this.svgScrollable.append("g").classed(a.AxisGraphicsContext.class,!0);this.labelBackgroundRegion=this.svgScrollable.append("g").classed(t.NewDataLabelUtils.labelBackgroundGraphicsContextClass.class,!0),this.labelRegion=this.svgScrollable.append("g").classed(t.NewDataLabelUtils.labelGraphicsContextClass.class,!0);var o=this.axes.showLinesOnX,n=this.axes.showLinesOnY,s=n,l=!s;l?(this.y1AxisGraphicsContext=r.append("g").attr("class","y axis"),this.y2AxisGraphicsContext=r.append("g").attr("class","y axis")):(this.y1AxisGraphicsContext=i.append("g").attr("class","y axis"),this.y2AxisGraphicsContext=i.append("g").attr("class","y axis")),s?this.xAxisGraphicsContext=r.append("g").attr("class","x axis"):this.xAxisGraphicsContext=i.append("g").attr("class","x axis"),this.xAxisGraphicsContext.classed("showLinesOnAxis",o),this.y1AxisGraphicsContext.classed("showLinesOnAxis",n),this.y2AxisGraphicsContext.classed("showLinesOnAxis",n),this.xAxisGraphicsContext.classed("hideLinesOnAxis",!o),this.y1AxisGraphicsContext.classed("hideLinesOnAxis",!n),this.y2AxisGraphicsContext.classed("hideLinesOnAxis",!n)},a.updateTickTooltips=function(e,t){var i=t.axis.tickValues(),r=a.getTickFormatter(t.axis);e.selectAll("text").each((function(e){var t=d3.select(this),a=i.indexOf(e);a<0||t.append("title").text(r(e))}))},a.getTickFormatter=function(e){return e.tickFormat()||a.defaultTickFormat},a.defaultTickFormat=function(e){return debug.warn('Using default (unformatted) tickFormat for value "'+e+'"'),""+e},a.prototype.renderXAxis=function(i){var r=i.graphicsElement,o=i.layout,n=i.fontProperties,s=i.axisProps,l=i.duration,c=i.easing,u=i.labelColor,d=i.isStacked,p=i.height,h=o.margin,g=!!l&&i.animate;if(s.axis.orient("bottom"),!s.willLabelsFit&&t.AxisHelper.isOrdinalScale(s.scale)&&s.axis.tickPadding(a.TickPaddingRotatedX),g?r.transition().duration(l).ease(c).call(s.axis):r.call(s.axis),r.call(a.darkenZeroLine,!t.AxisHelper.isOrdinalScale(s.axis.scale())).call(a.setAxisLabelColor,u),d){var m=s;a.removeUnwantedLines(r,m),_.isEmpty(s.xLabelMaxWidths)?r.selectAll("g.tick").selectAll("line").remove():(a.centerHierarchyTicks(r,m),a.styleHierarchyTicks(r,m))}var y=r.selectAll("text"),f=n.toTextProperties();y.style(n.toSVGStyle()),s.willLabelsWordBreak?y.call(t.AxisHelper.LabelLayoutStrategy.wordBreak,s,p):y.call(t.AxisHelper.LabelLayoutStrategy.rotate,{textTruncator:e.TextMeasurementService.getTailoredTextOrDefault,textProperties:f,needRotate:!s.willLabelsFit&&t.AxisHelper.isOrdinalScale(s.scale),needEllipsis:!0,axisProperties:s,margin:h,scrollbarVisible:o.isXScrollBarVisible||o.isYScrollBarVisible||!s.willLabelsFit&&!!d,firstVisibleNode:i.firstVisibleNode,rotationPadding:t.CartesianChart.TickLabelPadding,height:p}),a.updateTickTooltips(r,s)},a.prototype.renderHierarchicalAxis=function(e,a,i,r,o,n,s){var c=a.axes,u=a.tickLabelMargins;this.axisGraphicsContextScrollable.selectAll(".x.axis > .tick").remove();var d=e.selectAll(".stack").data(c.xStack);d.enter().append("g").classed({showLinesOnAxis:!0,stack:!0}),d.exit().remove();var p=c.xStack.length,h=l.getLeafHeight(u.xMax,u.stackHeight,p),g=r.sizePx<=t.CartesianChart.DefaultAxisFontSizeInPx,m=g?a.marginLimits.bottom:h,y=this;d.each((function(e,l){var c=0,d=0===l;d||(c=h+(l-1)*u.stackHeight);var g=d3.select(this);g.attr("transform",t.SVGUtil.translate(0,c));var f=p-l,v=e.scale.domain()[0],b=t.HierarchyNodeHelpers.getNodeAtCategoryIndexForDepth(e.rootNode,v,f),C={graphicsElement:g,axisProps:e,layout:a,labelColor:n,duration:i,easing:o,fontProperties:r,isStacked:!0,firstVisibleNode:b,height:d?m:u.stackHeight,animate:s};y.renderXAxis(C)}))},a.prototype.removeHierarchicalAxis=function(e){e.selectAll(".stack").remove()},a.prototype.renderYAxis=function(i,r,o,n,s,l){var c=i.marginLimits,u=i.plotArea,d=i.axes,p=i.tickLabelMargins,h=c.left,g=this.axes.shouldShowY1OnRight(),m=!!r&&l,y=g?i.tickPadding.right:i.tickPadding.left;d.y1.axis.tickSize(-u.width).tickPadding(y).orient(this.axes.getYAxisOrientation().toLowerCase());var f=this.y1AxisGraphicsContext;m?f.transition().duration(r).ease(n).call(d.y1.axis):f.call(d.y1.axis),f.style(o.toSVGStyle()).call(a.darkenZeroLine,!t.AxisHelper.isOrdinalScale(d.y1.axis.scale())).call(a.setAxisLabelColor,s);var v=f.selectAll("text"),b=g?p.yRight>=h:p.yLeft>=h;b&&v.call(t.AxisHelper.LabelLayoutStrategy.clip,h-y,e.TextMeasurementService.svgEllipsis),a.updateTickTooltips(f,d.y1)},a.prototype.removeYAxis=function(){this.y1AxisGraphicsContext.selectAll("*").remove()},a.prototype.renderY2Axis=function(i,r,o,n,s,l){var c=i.marginLimits,u=i.axes,d=i.tickLabelMargins,p=c.left,h=this.axes.shouldShowY1OnRight(),g=h?i.tickPadding.left:i.tickPadding.right;u.y2.axis.tickSize(a.Y2TickSize).tickPadding(g).orient(h?t.yAxisPosition.left.toLowerCase():t.yAxisPosition.right.toLowerCase());var m=this.y2AxisGraphicsContext,y=!!r&&l;y?m.transition().duration(r).ease(n).call(u.y2.axis):m.call(u.y2.axis),m.style(o.toSVGStyle()).call(a.darkenZeroLine,!t.AxisHelper.isOrdinalScale(u.y2.axis.scale())).call(a.setAxisLabelColor,s);var f=h?d.yLeft>=p:d.yRight>=p;f&&m.selectAll("text").call(t.AxisHelper.LabelLayoutStrategy.clip,p-g,e.TextMeasurementService.svgEllipsis),a.updateTickTooltips(m,u.y2)},a.prototype.removeY2Axis=function(){this.y2AxisGraphicsContext.selectAll("*").remove()},a.prototype.renderAxes=function(a,i,r,o){void 0===o&&(o="cubic-in-out");var n,s,c=a,u=!1,d=!1;c.axesLayout?(n=c.axesLayout,i=c.duration,s=c.axesFontProperties,u=c.animateCategoryAxis,d=c.animateValueAxis,o=c.easing||o):(n=a,r&&(s={x:{tickLabels:t.FontProperties.create({family:t.CartesianChart.AxisFontFamily,size:{px:r.x}}),title:t.FontProperties.create({family:t.CartesianChart.AxisFontFamily,size:{px:r.xTitle}})},y:{tickLabels:t.FontProperties.create({family:t.CartesianChart.AxisFontFamily,size:{px:r.y}}),title:t.FontProperties.create({family:t.CartesianChart.AxisFontFamily,size:{px:r.yTitle}})},y2:{tickLabels:t.FontProperties.create({family:t.CartesianChart.AxisFontFamily,size:{px:r.y2}}),title:t.FontProperties.create({family:t.CartesianChart.AxisFontFamily,size:{px:r.y2Title}})}}));var p,h,g,m=n.viewport,y=n.margin,f=n.axes,v=n.axisLabels,b=null==v.x;if(n.shouldRenderAxis.x){p=f.x.isCategoryAxis?this.categoryAxisProperties&&this.categoryAxisProperties.labelColor?this.categoryAxisProperties.labelColor:null:this.valueAxisProperties&&this.valueAxisProperties.labelColor?this.valueAxisProperties.labelColor:null;var C=this.xAxisGraphicsContext;if(_.isEmpty(f.xStack)){this.removeHierarchicalAxis(C);var S=s.x.tickLabels.sizePx<=t.CartesianChart.DefaultAxisFontSizeInPx,x=S?n.marginLimits.bottom:y.bottom;if(!S&&!b){var w=e.TextMeasurementService.estimateSvgTextHeight(s.x.tickLabels.toTextProperties()),P=w+l.XAxisLabelPadding;x-=P}var D=f.x.isCategoryAxis,T=u&&D||d&&!D,V={graphicsElement:C,axisProps:f.x,layout:n,labelColor:p,duration:i,easing:o,fontProperties:s.x.tickLabels,isStacked:!1,height:x,animate:T};this.renderXAxis(V)}else this.renderHierarchicalAxis(C,n,i,s.x.tickLabels,o,p,u)}else this.xAxisGraphicsContext.selectAll("*").remove();if(n.shouldRenderAxis.y){h=f.y1.isCategoryAxis?this.categoryAxisProperties&&this.categoryAxisProperties.labelColor?this.categoryAxisProperties.labelColor:null:this.valueAxisProperties&&this.valueAxisProperties.labelColor?this.valueAxisProperties.labelColor:null;
var L=f.y1.isCategoryAxis,N=u&&L||d&&!L;if(this.renderYAxis(n,i,s.y.tickLabels,o,h,N),!f.y2||this.valueAxisProperties&&null!=this.valueAxisProperties.secShow&&!this.valueAxisProperties.secShow)this.removeY2Axis();else{g=this.valueAxisProperties&&this.valueAxisProperties.secLabelColor?this.valueAxisProperties.secLabelColor:h;var M=f.y2.isCategoryAxis,A=u&&M||d&&!M;this.renderY2Axis(n,i,s.y2.tickLabels,o,g,A)}}else this.removeYAxis();var R=null!=v.x||null!=v.y||null!=v.y2;if(R){var F=null==v.y,O=null==v.y2,I=void 0,H=void 0,j=void 0;f.x.isCategoryAxis?(I=this.categoryAxisProperties&&this.categoryAxisProperties.titleColor?this.categoryAxisProperties.titleColor:p,H=this.valueAxisProperties&&this.valueAxisProperties.titleColor?this.valueAxisProperties.titleColor:h):(I=this.valueAxisProperties&&this.valueAxisProperties.titleColor?this.valueAxisProperties.titleColor:p,H=this.categoryAxisProperties&&this.categoryAxisProperties.titleColor?this.categoryAxisProperties.titleColor:h),j=this.valueAxisProperties&&this.valueAxisProperties.secTitleColor?this.valueAxisProperties.secTitleColor:g;var z={axisLabels:v,viewport:m,margin:y,hideXAxisTitle:b,hideYAxisTitle:F,hideY2AxisTitle:O,xLabelColor:I,yLabelColor:H,y2LabelColor:j,axesFontProperties:s};this.renderAxesLabels(z)}else this.axisGraphicsContext.selectAll(".xAxisLabel").remove(),this.axisGraphicsContext.selectAll(".yAxisLabel").remove();this.translateAxes(n)},a.prototype.renderAxesLabels=function(a){this.axisGraphicsContext.selectAll(".xAxisLabel").remove(),this.axisGraphicsContext.selectAll(".yAxisLabel").remove();var i=a.margin,r=a.viewport.width-(i.left+i.right),o=a.viewport.height-i.top,n=this.axes.shouldShowY1OnRight(),s=a.axesFontProperties,c=a.axisLabels;if(!a.hideXAxisTitle){var u=s.x.title,d=c.x,p=u.toTextProperties(d),h=e.TextMeasurementService.estimateSvgTextBaselineDelta(p),g=this.axisGraphicsContext.append("text").style("text-anchor","middle").style(u.toSVGStyle()).text(d).call((function(e){e.each((function(){var e=d3.select(this);e.attr({class:"xAxisLabel",transform:t.SVGUtil.translate(r/2,o-l.XAxisLabelPadding-h)})}))}));g.style("fill",a.xLabelColor?a.xLabelColor.solid.color:null),g.call(t.AxisHelper.LabelLayoutStrategy.clip,r,e.TextMeasurementService.svgEllipsis).call(t.tooltipUtils.tooltipUpdate,[a.axisLabels.x])}if(!a.hideYAxisTitle){var u=s.y.title,d=c.y,p=u.toTextProperties(d),m=e.TextMeasurementService.estimateSvgTextHeight(p),y=this.axisGraphicsContext.append("text").style("text-anchor","middle").style(u.toSVGStyle()).text(d).call((function(e){e.each((function(){var e=d3.select(this);e.attr({class:"yAxisLabel",transform:"rotate(-90)",y:n?r+i.right-m-l.YAxisLabelPadding:-i.left+l.YAxisLabelPadding,x:-((o-i.bottom)/2),dy:"1em"})}))}));y.style("fill",a.yLabelColor?a.yLabelColor.solid.color:null),y.call(t.AxisHelper.LabelLayoutStrategy.clip,o-i.bottom,e.TextMeasurementService.svgEllipsis).call(t.tooltipUtils.tooltipUpdate,[a.axisLabels.y])}if(!a.hideY2AxisTitle&&a.axisLabels.y2){var u=s.y2.title,d=c.y2,p=u.toTextProperties(d),f=e.TextMeasurementService.estimateSvgTextHeight(p),v=this.axisGraphicsContext.append("text").style("text-anchor","middle").style(u.toSVGStyle()).text(d).call((function(e){e.each((function(){var e=d3.select(this);e.attr({class:"yAxisLabel",transform:"rotate(-90)",y:n?-i.left+l.YAxisLabelPadding:r+i.right-f-l.YAxisLabelPadding,x:-((o-i.bottom)/2),dy:"1em"})}))}));v.style("fill",a.y2LabelColor?a.y2LabelColor.solid.color:null),v.call(t.AxisHelper.LabelLayoutStrategy.clip,o-i.bottom,e.TextMeasurementService.svgEllipsis).call(t.tooltipUtils.tooltipUpdate,[a.axisLabels.y2])}},a.prototype.translateAxes=function(e){var a=e.viewport,i=e.margin,r=a.width-(i.left+i.right),o=a.height-(i.top+i.bottom),n=this.axes.shouldShowY1OnRight();this.xAxisGraphicsContext.attr("transform",t.SVGUtil.translate(0,o)),this.y1AxisGraphicsContext.attr("transform",t.SVGUtil.translate(n?r:0,0)),this.y2AxisGraphicsContext.attr("transform",t.SVGUtil.translate(n?0:r,0)),this.svgScrollable.attr({x:0,width:a.width,height:a.height}),this.axisGraphicsContext.attr("transform",t.SVGUtil.translate(i.left,i.top)),this.axisGraphicsContextScrollable.attr("transform",t.SVGUtil.translate(i.left,i.top)),this.labelRegion.attr("transform",t.SVGUtil.translate(i.left,i.top)),this.labelBackgroundRegion.attr("transform",t.SVGUtil.translate(i.left,i.top)),e.isXScrollBarVisible?(this.svgScrollable.attr({x:i.left}),this.axisGraphicsContextScrollable.attr("transform",t.SVGUtil.translate(0,i.top)),this.labelRegion.attr("transform",t.SVGUtil.translate(0,i.top)),this.labelBackgroundRegion.attr("transform",t.SVGUtil.translate(0,i.top)),this.svgScrollable.attr("width",r)):e.isYScrollBarVisible&&this.svgScrollable.attr("height",o+i.top)},a.darkenZeroLine=function(e,t){if(e.selectAll("g.tick line").classed("zero-line",!1),t){var a=e.selectAll("g.tick").filter((function(e){return 0===e})).node();a&&d3.select(a).select("line").classed("zero-line",!0)}},a.setAxisLabelColor=function(e,t){e.selectAll("g.tick text").style("fill",t?t.solid.color:null)},a.removeUnwantedLines=function(e,t){e.selectAll("g.tick").filter((function(e){return t.adjustedValues[e]===l.hierarchyPlaceholder})).selectAll("line").remove()},a.centerHierarchyTicks=function(e,a){e.selectAll("g.tick").filter((function(e){return a.adjustedValues[e]!==l.hierarchyPlaceholder})).each((function(e){var i=d3.select(this),r=i.attr("transform"),o=t.SVGUtil.parseTranslateTransform(r);if(o&&+o.x>0){var n=+o.x+a.xLabelMaxWidths[e]/2-a.categoryThickness/2+t.CartesianChart.TickLabelPadding;i.attr("transform",t.SVGUtil.translate(n,+o.y))}}))},a.styleHierarchyTicks=function(e,t){var a=e.selectAll("g.tick").filter((function(e){return t.adjustedValues[e]!==l.hierarchyPlaceholder})).selectAll("line").data((function(e){return t.lineStyleInfo[e]}));a.enter().append("line"),a.attr("x1",(function(e){return e.x1})).attr("y1",(function(e){return e.y1})).attr("x2",(function(e){return e.x2})).attr("y2",(function(e){return e.y2})).attr("stroke",(function(e){return e.stroke})).attr("stroke-width",(function(e){return e.strokeWidth})),a.exit().remove()},a})();s.AxisPadding={left:10,right:10,top:0,bottom:13},s.AxisGraphicsContext=o("axisGraphicsContext"),s.TickPaddingRotatedX=5,s.Y2TickSize=-6,t.SvgCartesianAxes=s;var l=(function(){function o(e,a,i){this.scrollbarWidth=a,this.isScrollable=e,this.maxMarginFactor=o.MaxMarginFactor,this.yAxisOrientation=t.yAxisPosition.left,this.trimOrdinalDataOnOverflow=i}return o.prototype.init=function(e){var t=e.axisLinesVisibility;this.showLinesOnX=r.hasFlag(t,3)||r.hasFlag(t,1),this.showLinesOnY=r.hasFlag(t,3)||r.hasFlag(t,2),this.isYAxisCategorical=e.isYAxisCategorical,null!=e.maxMarginFactor&&(this.maxMarginFactor=e.maxMarginFactor)},o.prototype.shouldShowY1OnRight=function(){return this.yAxisOrientation===t.yAxisPosition.right},o.prototype.hasCategoryAxis=function(){var e=this.layout&&this.layout.axes;return!!e&&(this.isYAxisCategorical?e.y1&&null!=e.y1.axis:e.x&&null!=e.x.axis)},o.prototype.isCategoryAxisDateTime=function(){var e=this.layout&&this.layout.axes;if(!e)return!1;var t=this.isYAxisCategorical?e.y1:e.x;return t.axisType.dateTime},o.getLeafHeight=function(e,a,i){return e-a*(i-1)+t.AxisHelper.stackedAxisPadding+1},o.prototype.hasY2Axis=function(){return this.layout&&null!=this.layout.axes.y2},o.prototype.getYAxisOrientation=function(){return this.yAxisOrientation},o.prototype.update=function(e,a,i,r){this.categories=e,this.categoryAxisProperties=a,this.valueAxisProperties=i,this.isHierarchicalCategoryAxis=r===t.CartesianAxisRenderMode.Hierarchical;var o=this.isYAxisCategorical?this.categoryAxisProperties.position:this.valueAxisProperties.position;this.yAxisOrientation=o?o.toString():t.yAxisPosition.left},o.prototype.addWarnings=function(e){var a=this.layout&&this.layout.axes;(a&&a.x&&a.x.hasDisallowedZeroInDomain||a.y1&&a.y1.hasDisallowedZeroInDomain||a.y2&&a.y2.hasDisallowedZeroInDomain)&&e.unshift(new t.ZeroValueWarning)},o.prototype.getScrollbarWidth=function(){return this.scrollbarWidth},o.prototype.calculateAxes=function(r,n,s,l,c,u,d,p,h,g,m){var y,f={viewport:n,margin:s,forcedXDomain:[this.categoryAxisProperties?this.categoryAxisProperties.start:null,this.categoryAxisProperties?this.categoryAxisProperties.end:null],forceMerge:this.valueAxisProperties&&this.valueAxisProperties.secShow===!1,trimOrdinalDataOnOverflow:this.trimOrdinalDataOnOverflow,categoryAxisScaleType:this.categoryAxisProperties&&null!=this.categoryAxisProperties.axisScale?this.categoryAxisProperties.axisScale:t.DEFAULT_AXIS_SCALE_TYPE,valueAxisScaleType:this.valueAxisProperties&&null!=this.valueAxisProperties.axisScale?this.valueAxisProperties.axisScale:t.DEFAULT_AXIS_SCALE_TYPE,categoryAxisDisplayUnits:this.categoryAxisProperties&&null!=this.categoryAxisProperties.labelDisplayUnits?this.categoryAxisProperties.labelDisplayUnits:0,valueAxisDisplayUnits:this.valueAxisProperties&&null!=this.valueAxisProperties.labelDisplayUnits?this.valueAxisProperties.labelDisplayUnits:0,categoryAxisPrecision:this.categoryAxisProperties?t.CartesianHelper.getPrecision(this.categoryAxisProperties.labelPrecision):null,valueAxisPrecision:this.valueAxisProperties?t.CartesianHelper.getPrecision(this.valueAxisProperties.labelPrecision):null,playAxisControlLayout:l,ensureXDomain:h,ensureYDomain:g},v=this.valueAxisProperties&&this.valueAxisProperties.secShow===!0,b=!1;a(r)&&!v&&(y=i(r,f),b=y.merged,b?f.forcedYDomain=y.domain:f.forcedTickCount=y.tickCount),this.valueAxisProperties&&(f.forcedYDomain=t.AxisHelper.applyCustomizedDomain([this.valueAxisProperties.start,this.valueAxisProperties.end],f.forcedYDomain));for(var C,S=0,x=r.length;S<x;S++){var w=r[S];1!==S||b||(f.forcedYDomain=this.valueAxisProperties?[this.valueAxisProperties.secStart,this.valueAxisProperties.secEnd]:null,f.valueAxisScaleType=this.valueAxisProperties&&null!=this.valueAxisProperties.secAxisScale?this.valueAxisProperties.secAxisScale:t.DEFAULT_AXIS_SCALE_TYPE,f.valueAxisDisplayUnits=this.valueAxisProperties&&null!=this.valueAxisProperties.secLabelDisplayUnits?this.valueAxisProperties.secLabelDisplayUnits:0,f.valueAxisPrecision=this.valueAxisProperties?t.CartesianHelper.getPrecision(this.valueAxisProperties.secLabelPrecision):null);var P=w.calculateAxesProperties(f);if(0===S)C={x:P[0],y1:P[1]};else if(P&&!C.y2)if(C.x.usingDefaultDomain||_.isEmpty(C.x.dataDomain)){var D=w.calculateAxesProperties(f);C.x=D[0],C.y1=D[1]}else w.overrideXScale(C.x),b||P[1].usingDefaultDomain||_.isEmpty(P[1].values)||(C.y2=P[1]);var T=c.x.tickLabels.toTextProperties();if(d&&d.x)C.x.willLabelsFit=d.x.willLabelsFit,C.x.willLabelsWordBreak=d.x.willLabelsWordBreak;else{var V=n.width-(s.left+s.right);C.x.willLabelsFit=t.AxisHelper.LabelLayoutStrategy.willLabelsFit(C.x,V,e.TextMeasurementService.measureSvgTextWidth,T),C.x.willLabelsWordBreak=!C.x.willLabelsFit&&!u&&t.AxisHelper.LabelLayoutStrategy.willLabelsWordBreak(C.x,s,V,e.TextMeasurementService.measureSvgTextWidth,e.TextMeasurementService.estimateSvgTextHeight,e.TextMeasurementService.getTailoredTextOrDefault,T)}if(this.isHierarchicalCategoryAxis){var L=C.x;L.isHierarchical=!0,L.rootNode=t.HierarchyNodeHelpers.Builder.build(this.categories),L.numLevels=this.categories.length,m&&(C.xStack=o.createStackedAxis(this.categories,C.x,m.stackHeight,m.xMax))}}return this.overrideAxisTitles(C),!p.x&&C.x&&(C.x.axisLabel=null),!p.y&&C.y1&&(C.y1.axisLabel=null),!p.y2&&C.y2&&(C.y2.axisLabel=null),this.addUnitTypeToAxisLabels(C),C},o.createStackedAxis=function(a,i,r,n){if(!_.isEmpty(a)){for(var s=a.length,l=o.getLeafHeight(n,r,s),c=[],u=t.AxisHelper.getCategoryThickness(i.scale),d=[],p=function(n){var p=n===s-1,h=s-n-1,g=a[n];p||d.push.apply(d,g.source.identityExprs);for(var m=[],y=[],f=[],v=0,b=void 0,C=g.values.length,S=0;S<C;S++){var x=p?g.identity[S]:o.getSpecificIdentityFromCompositeIdentity(g,S,d),w=g.values[S],P=t.converterHelper.formatFromMetadataColumn(w,g.source,t.columnChartProps.general.formatString);if(!p&&b&&e.DataViewScopeIdentity.equals(b,x))m[S]=o.hierarchyPlaceholder,v++;else{if(v>0&&!p){var D=S-v;y[D]=o.getMaxCategoryWidth(v,u),f[D]=o.getHierarchyLineStyleInfo({levelIndex:h,stackHeight:r,leafHeight:l,categorySpanCount:v,categoryWidth:u})}v=1,m[S]=P}b=x}if(v>0&&!p){var D=C-v;y[D]=o.getMaxCategoryWidth(v,u),f[D]=o.getHierarchyLineStyleInfo({levelIndex:h,stackHeight:r,leafHeight:l,categorySpanCount:v,categoryWidth:u})}var T=e.Prototype.inherit(i);T.isStacked=!0,T.adjustedValues=m,T.axis=t.AxisHelper.createStackedAxis({axis:T.axis,scale:T.scale,tickFormat:function(e){return m[e]!==o.hierarchyPlaceholder?m[e]:null}}),T.categoryThickness=u,T.levelIndex=h,T.lineStyleInfo=f,T.values=m,T.xLabelMaxWidths=y,p?T.levelSize=l:(T.levelSize=r,T.willLabelsFit=!0,T.willLabelsWordBreak=!1),c.unshift(T)},h=0;h<s;h++)p(h);return c}},o.getSpecificIdentityFromCompositeIdentity=function(t,a,i){var r=t.identity,o=r[a],n=e.data.ScopeIdentityExtractor.getSubset(o.expr,i),s=e.data.createDataViewScopeIdentity(n);return s},o.getCategorySpanSize=function(e,t){return e*t},o.getMaxCategoryWidth=function(e,a){var i=o.getCategorySpanSize(e,a);return i-2*t.CartesianChart.TickLabelPadding},o.getHierarchyLineStyleInfo=function(e){var t=o.getCategorySpanSize(e.categorySpanCount,e.categoryWidth);return o.createHierarchyLineStyleInfo(e.levelIndex,e.stackHeight,e.leafHeight,t)},o.createHierarchyLineStyleInfo=function(e,t,a,i){if(0!==e){var r=[],n={x1:-i/2,y1:t,x2:-i/2,y2:1===e?-a:0,stroke:o.gridlineColor,strokeWidth:1},s={x1:i/2,y1:t,x2:i/2,y2:1===e?-a:0,stroke:o.gridlineColor,strokeWidth:1};if(r.push(n),r.push(s),e>1){var l={x1:-i/2,y1:0,x2:i/2,y2:0,stroke:o.gridlineColor,strokeWidth:1};r.push(l)}return r}},o.prototype.negotiateAxes=function(a,i,r,n,s,l,c,u,d,p){var h=e.Prototype.inherit(o.MinimumMargin),g=e.Prototype.inherit(i),m=g.width*this.maxMarginFactor,y=Math.max(o.MinimumMargin.bottom,Math.ceil(g.height*this.maxMarginFactor)),f={left:m,right:m,top:0,bottom:y},v=this.calculateAxes(a,g,h,n,c,!1,null,s,d,p),b={x:l.x&&v.x&&!_.isEmpty(v.x.values),y:l.y&&v.y1&&!_.isEmpty(v.y1.values),y2:l.y2&&v.y2&&!_.isEmpty(v.y2.values)},C=this.shouldShowY1OnRight(),S=t.AxisHelper.isHierarchical(v.x)?v.x.numLevels:void 0,x={width:g.width-(h.left+h.right),height:g.height-(h.top+h.bottom)},w=!1;_.isEmpty(a)||a[0].getVisualCategoryAxisIsScalar&&(w=a[0].getVisualCategoryAxisIsScalar());var P=void 0;P=t.AxisHelper.getTickLabelMargins({plotArea:x,yMarginLimit:f.left,textWidthMeasurer:e.TextMeasurementService.measureSvgTextWidth,textHeightMeasurer:e.TextMeasurementService.estimateSvgTextHeight,axes:v,bottomMarginLimit:f.bottom,axesFontProperties:c,scrollbarVisible:!1,showOnRight:C,renderXAxis:b.x,renderY1Axis:b.y,renderY2Axis:b.y2,numHierarchyLevels:S}),h=this.updateAxisMargins(v,P,r,C,w?0:u,s,b,c);var D=v.y1&&v.y1.values.length,T=v.y2&&v.y2.values.length,V=v.x&&v.x.willLabelsFit,L=v.x&&v.x.willLabelsWordBreak,N=v.x&&v.x.xLabelMaxWidth,M=v.x&&v.x.categoryThickness;v=this.calculateAxes(a,g,h,n,c,!1,null,s,d,p,P),x.width=g.width-(h.left+h.right),x.height=g.height-(h.top+h.bottom);var A=this.getPreferredPlotArea(v,a,w),R=!this.willAllCategoriesFitInPlotArea(x,A),F=!(v.y1&&v.y1.values.length!==D||v.y2&&v.y2.values.length!==T||v.x&&v.x.willLabelsFit!==V||v.x&&v.x.willLabelsWordBreak!==L||v.x&&v.x.xLabelMaxWidth!==N||R||this.isHierarchicalCategoryAxis||v.x&&v.x.categoryThickness!==M),O=!1,I=!1;if(!F){P=t.AxisHelper.getTickLabelMargins({plotArea:x,yMarginLimit:f.left,textWidthMeasurer:e.TextMeasurementService.measureSvgTextWidth,textHeightMeasurer:e.TextMeasurementService.estimateSvgTextHeight,axes:v,bottomMarginLimit:f.bottom,axesFontProperties:c,scrollbarVisible:R,showOnRight:C,renderXAxis:b.x,renderY1Axis:b.y,renderY2Axis:b.y2,numHierarchyLevels:S}),h=this.updateAxisMargins(v,P,r,C,w?0:u,s,b,c),v=this.calculateAxes(a,g,h,n,c,R,v,s,d,p,P),x.width=g.width-(h.left+h.right),x.height=g.height-(h.top+h.bottom),A=this.getPreferredPlotArea(v,a,w);var H=!this.willAllCategoriesFitInPlotArea(x,A);H&&(this.showLinesOnY&&(O=!0,x.height-=this.scrollbarWidth,g.height-=this.scrollbarWidth),this.showLinesOnX&&(I=!0,x.width-=this.scrollbarWidth,g.width-=this.scrollbarWidth),v=this.calculateAxes(a,g,h,n,c,!0,v,s,d,p,P))}var j=s.x&&v.x?v.x.axisLabel:null,z=s.y&&v.y1?v.y1.axisLabel:null,k=s.y2&&v.y2?v.y2.axisLabel:null,G={x:j,y:z,y2:k};return this.layout={axes:v,axisLabels:G,margin:h,marginLimits:f,viewport:g,plotArea:x,preferredPlotArea:A,tickLabelMargins:P,tickPadding:r,rotateXTickLabels90:R,shouldRenderAxis:b,isXScrollBarVisible:O,isYScrollBarVisible:I},this.layout},o.prototype.getPreferredPlotArea=function(e,t,a){var i;if(!a&&this.isScrollable&&!_.isEmpty(t)&&t[0].getPreferredPlotArea){var r=this.showLinesOnY?e.x.categoryThickness:e.y1.categoryThickness,o=this.showLinesOnY?e.x.dataDomain.length:e.y1.dataDomain.length;i=t[0].getPreferredPlotArea(a,o,r)}return i},o.prototype.willAllCategoriesFitInPlotArea=function(t,a){return!(this.showLinesOnY&&a&&e.Double.greaterWithPrecision(a.width,t.width))&&!(this.showLinesOnX&&a&&e.Double.greaterWithPrecision(a.height,t.height))},o.prototype.updateAxisMargins=function(t,a,i,r,n,s,l,c){var u=r?a.yRight:a.yLeft,d=r?a.yLeft:a.yRight,p=a.xMax;l.y&&(u+=r?i.right:i.left),l.y2&&(d+=r?i.left:i.right),l.x&&(p+=i.bottom);var h={x:t.x.axisLabel,y:t.y1.axisLabel,y2:t.y2?t.y2.axisLabel:null};if(null!=h.x&&s.x){var g=e.TextMeasurementService.estimateSvgTextHeight(c.x.title.toTextProperties());p+=g+o.XAxisLabelPadding}if(null!=h.y&&s.y){var g=e.TextMeasurementService.estimateSvgTextHeight(c.y.title.toTextProperties());u+=g+o.YAxisLabelPadding}if(null!=h.y2&&s.y2){var g=e.TextMeasurementService.estimateSvgTextHeight(c.y2.title.toTextProperties());d+=g+o.YAxisLabelPadding}var m=o.MinimumMargin,y={top:Math.max(a.yTop,m.top),left:r?d:u,right:(r?u:d)+n,bottom:p};return y},o.prototype.isLogScaleAllowed=function(e){var t=this.layout&&this.layout.axes;if(!t)return!1;switch(e){case 0:return t.x.isLogScaleAllowed;case 1:return t.y1.isLogScaleAllowed;case 2:return t.y2&&t.y2.isLogScaleAllowed}},o.prototype.axesHaveTicks=function(e){if(!this.layout)return!1;var a=this.layout.margin,i=e.width-(a.left+a.right),r=e.height-(a.top+a.bottom);return 0!==t.AxisHelper.getRecommendedNumberOfTicksForXAxis(i)||0!==t.AxisHelper.getRecommendedNumberOfTicksForYAxis(r)},o.prototype.overrideAxisTitles=function(t){if(t){if(this.categoryAxisProperties){var a=e.DataViewObject.getValue(this.categoryAxisProperties,"titleText",null);a&&(t.x&&t.x.isCategoryAxis?t.x.axisLabel=a:t.y1&&t.y1.isCategoryAxis&&(t.y1.axisLabel=a))}if(this.valueAxisProperties){var a=e.DataViewObject.getValue(this.valueAxisProperties,"titleText",null);a&&(t.x&&!t.x.isCategoryAxis?t.x.axisLabel=this.valueAxisProperties.titleText:t.y1&&!t.y1.isCategoryAxis&&(t.y1.axisLabel=this.valueAxisProperties.titleText));var i=e.DataViewObject.getValue(this.valueAxisProperties,"secTitleText",null);i&&t.y2&&(t.y2.axisLabel=i)}}},o.prototype.addUnitTypeToAxisLabels=function(e){var a=o.getUnitType(e.x.formatter);if(e.x.isCategoryAxis?this.categoryAxisHasUnitType=null!=a:this.valueAxisHasUnitType=null!=a,e.x.axisLabel&&a&&(e.x.isCategoryAxis?e.x.axisLabel=t.AxisHelper.createAxisLabel(this.categoryAxisProperties,e.x.axisLabel,a):e.x.axisLabel=t.AxisHelper.createAxisLabel(this.valueAxisProperties,e.x.axisLabel,a)),a=o.getUnitType(e.y1.formatter),e.y1.isCategoryAxis?this.categoryAxisHasUnitType=null!=a:this.valueAxisHasUnitType=null!=a,e.y1.axisLabel&&a&&(e.y1.isCategoryAxis?e.y1.axisLabel=t.AxisHelper.createAxisLabel(this.categoryAxisProperties,e.y1.axisLabel,a):e.y1.axisLabel=t.AxisHelper.createAxisLabel(this.valueAxisProperties,e.y1.axisLabel,a)),e.y2){var i=o.getUnitType(e.y2.formatter);this.secondaryValueAxisHasUnitType=null!=i,e.y2.axisLabel&&i&&(e.y2.axisLabel=t.AxisHelper.createAxisLabel(this.valueAxisProperties,e.y2.axisLabel,i,!0))}},o.getUnitType=function(e){if(e&&e.displayUnit&&e.displayUnit.value>1)return e.displayUnit.title},o})();l.hierarchyPlaceholder={placeholder:!0},l.gridlineColor="#d8d8d8",l.YAxisLabelPadding=5,l.XAxisLabelPadding=3,l.MaxMarginFactor=.25,l.MinimumMargin={left:1,right:1,top:8,bottom:25},t.CartesianAxes=l})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(a){function i(e,t){var a=t?{showAxisTitle:!0}:{};if(!e)return a;var i=e.objects;if(i){var r=i.categoryAxis;r&&(a=_.clone(r),a.showAxisTitle=null==r.showAxisTitle?t:r.showAxisTitle)}return a}function r(e,t){var a=t?{showAxisTitle:!0}:{};if(!e)return a;var i=e.objects;if(i){var r=i.valueAxis;r&&(a=_.clone(r),a.showAxisTitle=null==r.showAxisTitle?t:r.showAxisTitle)}return a}function o(a){var i={strokeWidth:t.defaultLineStrokeWidth,strokeLineJoin:t.strokeLineJoin.defaultValue};if(!a)return i;var r=a.objects;return r&&(i={strokeWidth:e.DataViewObjects.getValue(r,t.lineChartProps.lineStyles.strokeWidth,t.defaultLineStrokeWidth),strokeLineJoin:e.DataViewObjects.getValue(r,t.lineChartProps.lineStyles.strokeLineJoin,t.strokeLineJoin.defaultValue)}),i}function n(e,a){return!!e&&(!a||!a.axisType||a.axisType===t.axisType.scalar)}function s(e){var t=e.preferredCategoryWidth;return null==t?void 0:+t}function l(e){return null!=e?e<0?0:e:null}function c(e,a,i,r){var o=t.AxisHelper.isDateTime(i);if(r)return o?new Date(a):a;if(i.text)return e.categories[a];if(e&&e.series&&e.series.length>0){var n=e.series[0];if(n){var s=n.data;if(s){e.hasHighlights&&(a=2*a);var l=s[a];if(l)return o&&null!=l.categoryValue?new Date(l.categoryValue):l.categoryValue}}}return a}function u(e){if(_.isEmpty(e))return 0;for(var t=0,a=0,i=e;a<i.length;a++){var r=i[a];if(!_.isEmpty(r.data)){var o=r.data[r.data.length-1].categoryIndex;t=Math.max(o,t)}}return t}function d(e,a){var i,r,o=!1;if(a){var n=_.first(e.categories);r=t.CartesianChart.getScalarKeys(n),o=a&&r&&!_.isEmpty(r.values),i=o?n:_.last(e.categories)}else i=_.isEmpty(e.categories)?{source:void 0,values:[t.valueFormatter.format(null)],identity:void 0}:_.last(e.categories);return{category:i,useScalarKeys:o,scalarKeys:r}}a.getCategoryAxisProperties=i,a.getValueAxisProperties=r,a.getLineStyleProperties=o,a.isScalar=n,a.getPreferredCategoryWidth=s,a.getPrecision=l,a.lookupXValue=c,a.findMaxCategoryIndex=u,a.getScalarKeyinfo=d})(a=t.CartesianHelper||(t.CartesianHelper={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=(function(){function a(e){this.responsiveVisualEnabled=e.responsiveVisualEnabled}return a.prototype.applyChanges=function(e,t,a){if(this.responsiveVisualEnabled){var i=this.getResponsiveVisualProperties(a),r=i.responsive,o=i.responsiveLegacy;(r||o)&&(t=this.applyResponsiveChanges(e,t,r,o))}return t},a.prototype.enumerateObjectInstances=function(e,t,a){this.responsiveVisualEnabled&&"general"===e.objectName&&this.enumerateGeneral(t,a)},a.prototype.enumerateGeneral=function(e,t){var a=this.getResponsiveVisualProperties(t);e.pushInstance({selector:null,properties:{responsive:a.responsive},objectName:"general"})},a.prototype.getResponsiveVisualProperties=function(a){var i=a.metadata,r={responsive:!0,responsiveLegacy:!1};if(!i)return r;var o=i.objects;return o&&(r={responsive:e.DataViewObjects.getValue(o,t.cartesianChartProps.general.responsive,r.responsive),responsiveLegacy:e.DataViewObjects.getValue(o,t.cartesianChartProps.general.responsiveLegacy,r.responsiveLegacy)}),r},a.prototype.applyResponsiveChanges=function(e,t,a,i){var r=_.cloneDeep(t);return r},a})();t.CartesianViewModelAdapter=a})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a,i=jsCommon.EnumExtensions,r=e.data.DataRoleHelper,o=2,n=4,s=8,l=16,c=32|l;!(function(e){e[e.clusteredBar=o|s]="clusteredBar",e[e.clusteredColumn=n|s]="clusteredColumn",e[e.hundredPercentStackedBar=o|c]="hundredPercentStackedBar",e[e.hundredPercentStackedColumn=n|c]="hundredPercentStackedColumn",e[e.stackedBar=o|l]="stackedBar",e[e.stackedColumn=n|l]="stackedColumn"})(a=t.ColumnChartType||(t.ColumnChartType={}));var u={category:"Category",series:"Series",y:"Y"},d=(function(){function d(e){var t=e.chartType;this.chartType=t,this.categoryAxisType=null,this.animator=e.animator,this.isScrollable=e.isScrollable,this.tooltipsEnabled=e.tooltipsEnabled,this.interactivityService=e.interactivityService,this.axisControlImprovements=e.axisControlImprovements}return d.customizeQuery=function(e){var a=e.dataViewMappings[0];if(a&&a.categorical&&a.categorical.categories){if(a.categorical.dataVolume=4,t.CartesianChart.detectScalarMapping(a)){var i=a.categorical.categories;i.dataReductionAlgorithm={sample:{}};var r=a.categorical.values;r&&r.group&&(r.group.dataReductionAlgorithm={top:{}})}else t.CartesianChart.expandCategoryWindow([a]);t.CartesianChart.requestFilteredToUniqueValue(e.dataViewMappings);var o=d.getSortableRoles(e);t.CartesianChart.applyHierarchicalSorts(e.dataViewMappings,o)}},d.getSortableRoles=function(e){var a=e.dataViewMappings[0];if(!a||!a.categorical||!a.categorical.categories)return null;var i=a.categorical.categories,r=i.for.in,o=r.items,n=r.activeItems,s=["Category","Y"],l=[];if(!_.isEmpty(o)){var c=void 0;a.metadata&&(c=a.metadata.objects);var u=void 0;if(_.isEmpty(n))u=o[0].type;else if(1===n.length){var d=_.find(o,(function(e){return e.queryName===n[0]}));u=d.type}else if(n.length>1)return s;return t.CartesianChart.getIsScalar(c,t.lineChartProps.categoryAxis.axisType,u)?l:s}return null},d.prototype.init=function(e){this.svg=e.svg,this.svg.classed(d.ColumnChartClassName,!0),this.unclippedGraphicsContext=this.svg.append("g").classed("columnChartUnclippedGraphicsContext",!0),this.mainGraphicsContext=this.unclippedGraphicsContext.append("svg").classed("mainGraphicsContext",!0),this.style=e.style,this.currentViewport=e.viewport,this.hostService=e.host,this.interactivity=e.interactivity,this.cartesianVisualHost=e.cartesianHost,this.options=e,this.isComboChart=t.ComboChart.isComboChart(e.chartType),this.element=e.element,this.tooltipService=e.services.tooltips},d.prototype.getCategoryLayout=function(e,a){var i;i=d.isBar(this.chartType)?this.currentViewport.height-(this.margin.top+this.margin.bottom):this.currentViewport.width-(this.margin.left+this.margin.right);var r=this.data?this.data.preferredCategoryWidth:null,o=this.data?this.data.categoryMetadata:void 0,n=t.AxisHelper.getCategoryValueType(o),s=!!this.data&&this.data.scalarCategoryAxis,l=t.AxisHelper.createDomain(this.data.series,n,s,a.forcedXDomain,a.ensureXDomain);return t.CartesianChart.getLayout(this.data,{availableWidth:i,categoryCount:e,preferredCategoryWidth:r,domain:l,isScalar:s,isScrollable:this.isScrollable,trimOrdinalDataOnOverflow:a.trimOrdinalDataOnOverflow})},d.converter=function(a,i,r,o,n,s,l,c,h){void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===n&&(n=null),void 0===c&&(c=!0);var g=t.CartesianHelper.getCategoryAxisProperties(n,!1),m=t.CartesianHelper.getPreferredCategoryWidth(g);o=t.CartesianHelper.isScalar(o,g);var y=a.categorical,f=new p(a,i),v=t.converterHelper.getPivotedCategories(y,t.columnChartProps.general.formatString),b=v.categories,C=v.categoryFormatter,S=v.categoryIdentities,x=t.CartesianHelper.getScalarKeyinfo(y,o),w=x.category.source,P=t.dataLabelUtils.getDefaultColumnLabelSettings(r||d.isStacked(s)),D=t.Legend.DefaultLabelColor,T=void 0,V=void 0;if(n&&n.objects){var L=n.objects;T=e.DataViewObjects.getFillColor(L,t.columnChartProps.dataPoint.defaultColor),V=e.DataViewObjects.getValue(L,t.columnChartProps.dataPoint.showAllDataPoints),D=e.DataViewObjects.getFillColor(L,t.columnChartProps.legend.labelColor,t.Legend.DefaultLabelColor);var N=L.labels;t.NewDataLabelUtils.updateLabelSettingsFromLabelsObjectWithLabelDensity(N,P,!d.isBar(s))}var M=f.getLegend(D,T),A=M.legend.dataPoints,R=M.seriesSources,F=d.createDataPoints(a,b,S,A,M.seriesObjects,f,P,r,o,t.converterHelper.categoryIsAlsoSeriesRole(a,u.series,u.category),v.categoryObjects,T,s,w,c),O=F.series;this.canSupportOverflow(s,O.length)?null!=P.position&&_.include(this.clusteredValidLabelPositionOptions,P.position)||(P.position=t.labelPosition.auto):null!=P.position&&_.include(this.stackedValidLabelPositionOptions,P.position)||(P.position=t.labelPosition.auto);for(var I=[],H=0,j=A.length;H<j;H++)I.push(R[H]);if(l){for(var z=0,k=O;z<k.length;z++){var G=k[z];l.applySelectionStateToData(G.data)}l.applySelectionStateToData(M.legend.dataPoints)}return{categories:b,categoryFormatter:C,preferredCategoryWidth:m,series:O,valuesMetadata:I,legendData:M.legend,hasHighlights:F.hasHighlights,categoryMetadata:w,scalarCategoryAxis:o,labelSettings:P,hasDynamicSeries:F.hasDynamicSeries,isMultiMeasure:F.isMultiMeasure,defaultDataPointColor:T,showAllDataPoints:V}},d.canSupportOverflow=function(e,t){return!d.isStacked(e)||1===t},d.createDataPoints=function(a,i,o,n,s,l,c,u,p,h,g,m,y,f,v){void 0===u&&(u=!1),void 0===p&&(p=!1);var b=a.categorical,C=e.data.createDataViewCategoricalReaderAdvanced(a,{staticSeriesRole:t.cartesianRoleNames.y}),S=b&&b.values?b.values.grouped():void 0,x=i.length,w=C.data.hasValues("Y")?C.data.getSeriesCount():void 0,P=[];if(w<1||x<1)return{series:P,hasHighlights:!1,hasDynamicSeries:!1,isMultiMeasure:!1};var D=b.categories;f=_.isEmpty(D)?null:_.last(D).source;for(var T=t.AxisHelper.getCategoryValueType(f),V=t.AxisHelper.isDateTime(T),L=[],N=[],M=[],A=[],R=!(!b.values||!b.values.source),F=!R&&w>1,O=!1,I=C.data.hasHighlights(),H=0;H<w;H++){for(var j=[],z=[],k=0;k<x;k++){var G=l.getValueBySeriesAndCategory(H,k);if(j[k]=G,I){var E=l.getHighlightBySeriesAndCategory(H,k);z[k]=E,G>=0&&E>=0&&e.Double.greaterOrEqualWithPrecision(G,E)||G<=0&&E<=0&&e.Double.lessOrEqualWithPrecision(G,E)||(O=!0)}}M.push(j),I&&A.push(z)}O&&!d.canSupportOverflow(y,w)&&(O=!1,I=!1,M=A);for(var W=g,B=t.columnChartProps.general.formatString,H=0;H<w;H++){var U=[],K=n[H],Y=void 0;if(!R){var q=!_.isEmpty(S)&&S[0].values?S[0].values[H]:null,X=q&&q.source&&q.source.objects?q.source.objects.labels:null;X&&(Y=e.Prototype.inherit(c),t.NewDataLabelUtils.updateLabelSettingsFromLabelsObjectWithLabelDensity(X,Y))}var $=C.columns.getValueMetadataColumn("Y",H),Q={displayName:K.label,key:"series"+H,index:H,data:U,identity:K.identity,color:K.color,labelSettings:Y,type:$.type};P.push(Q),(C.columns.hasDynamicSeries()||w>1)&&(W=s[H]);for(var Z=t.GradientUtils.getGradientMeasureIndex(b),J=t.GradientUtils.getGradientValueColumn(b),ee=r.getMeasureIndexOfRole(S,"Y"),te=t.valueFormatter.getLocalizedString("Percentage"),k=0;k<x;k++){0===H&&(L.push(0),N.push(0));var G=t.AxisHelper.normalizeNonFiniteNumber(M[H][k]);if(!(null==G&&H>0)){var ae=G,ie=i[k];if((!V||null==ie||ie instanceof Date)&&(V&&ie&&(ie=ie.getTime()),!p||null!=ie&&!isNaN(ie))){var re=void 0;u&&(re=t.StackedUtil.getStackedMultiplier(M,k));var oe=G,ne=G<0;re&&(G*=ne?re.neg:re.pos);var se=Math.abs(G),le=void 0;ne?(le=N[k],isNaN(se)||(N[k]-=se)):(isNaN(se)||(L[k]+=se),le=L[k]);var ce=S&&S.length>H&&S[H].values?S[H].values[ee]:null,ue=_.isEmpty(b.categories)?null:b.categories[0],de=t.SelectionIdBuilder.builder().withCategory(ue,k).withSeries(b.values,ce).withMeasure(C.columns.getValueMetadataColumn("Y",H).queryName).createSelectionId(),pe=d.getDataPointColor(K,k,W),he=0===Z?null:J,ge=void 0,me=void 0,ye=void 0,E=void 0,fe=void 0,ve=void 0;if(I){ge=C.data.getHighlight("Y",k,H),me=ge;var be=!0;null===ge&&(ge=0,be=!1),u&&(ge*=ge>0?re.pos:re.neg),ye=Math.abs(ge),fe=le,ge>0?fe-=se-ye:0===ge&&G>0&&(fe-=se),ve=t.SelectionId.createWithHighlight(de);var Ce=void 0,Se=void 0;if(be&&null!=me&&null!=ge){var xe=t.valueFormatter.format(ge,te);Se=t.converterHelper.formatFromMetadataColumn(me,$,B,!1),Ce=Se+" ("+xe+")"}E=u?Ce:Se}var we=void 0;if(v){if(we=[],ue){var Pe=t.CategoryLevelUtils.getCategoryLevels(a.categorical.categories,k,B),De=t.CategoryLevelUtils.concatenateCategoryLevels(Pe);we.push({displayName:De.displayName,value:De.value})}if(R&&(ue&&ue.source===b.values.source||we.push({displayName:b.values.source.displayName,value:t.converterHelper.formatFromMetadataColumn(S[H].name,b.values.source,B)})),null!=ae){var Te=void 0,Ve=t.converterHelper.formatFromMetadataColumn(ae,$,B,!1);if(u){var Le=t.valueFormatter.format(se,te);
Te=Ve+" ("+Le+")"}else Te=Ve;we.push({displayName:$.displayName,value:Te})}null!=E&&we.push({displayName:t.ToolTipComponent.localizationOptions.highlightedValueDisplayName,value:E}),he&&null!=he.values[k]&&we.push({displayName:he.source.displayName,value:t.converterHelper.formatFromMetadataColumn(he.values[k],he.source,B,!1)}),t.TooltipBuilder.addTooltipMeasures(C,we,k,R?H:void 0)}var _e=P[H],Ne=_e.labelSettings?_e.labelSettings:c,Me=Ne.labelColor,Ae=void 0;d.isStacked(y)&&(Ae=this.getStackedLabelColor(ne,H,w,k,M),Me=Ae||H===w-1&&!ne?Me:t.dataLabelUtils.defaultInsideLabelColor);var Re={categoryValue:ie,value:G,position:le,valueAbsolute:se,valueOriginal:oe,seriesIndex:H,labelSettings:Ne,categoryIndex:k,color:pe,selected:!1,originalValue:G,originalPosition:le,originalValueAbsolute:se,identity:de,key:de.getKey(),tooltipInfo:we,labelFill:Me,labelFormatString:$.format,lastSeries:Ae,chartType:y};if(U.push(Re),I){var Fe={categoryValue:ie,value:ge,position:fe,valueAbsolute:ye,valueOriginal:me,seriesIndex:H,labelSettings:Ne,categoryIndex:k,color:pe,selected:!1,highlight:!0,originalValue:G,originalPosition:le,originalValueAbsolute:se,drawThinner:O,identity:ve,key:ve.getKey(),tooltipInfo:we,labelFormatString:$.format,labelFill:Me,lastSeries:Ae,chartType:y};U.push(Fe)}}}}}return{series:P,hasHighlights:I,hasDynamicSeries:R,isMultiMeasure:F}},d.getDataPointColor=function(a,i,r){if(r){var o=e.DataViewObjects.getFillColor(r[i],t.columnChartProps.dataPoint.fill);if(o)return o}return a.color},d.getStackedLabelColor=function(e,a,i,r,o){for(var n=!(e&&a===i-1&&1!==i),s=a+1;s<i;s++){var l=t.AxisHelper.normalizeNonFiniteNumber(o[s][r]);if(null!==l&&((!e||e&&0===a)&&l>0||e&&0!==a)){n=!1;break}}return n},d.sliceSeries=function(t,a,i){void 0===i&&(i=0);var r=[];if(t&&t.length>0)for(var o=0,n=t.length;o<n;o++){var s=r[o]=e.Prototype.inherit(t[o]);s.data=t[o].data.filter((function(e){return e.categoryIndex>=i&&e.categoryIndex<a}))}return r},d.getInteractiveColumnChartDomElement=function(e){return e.children("svg").get(0)},d.prototype.setData=function(e){var a=d.isStacked100(this.chartType);if(this.data={categories:[],categoryFormatter:null,series:[],valuesMetadata:[],legendData:null,hasHighlights:!1,categoryMetadata:null,scalarCategoryAxis:!1,labelSettings:t.dataLabelUtils.getDefaultColumnLabelSettings(a||d.isStacked(this.chartType)),hasDynamicSeries:!1,defaultDataPointColor:null,isMultiMeasure:!1},e.length>0){var i=this.dataView=e[0];if(i&&i.categorical){var r=i.categorical.categories,o=r&&r.length>0?r[0].source:null,n=t.AxisHelper.getCategoryValueType(o),s=t.CartesianChart.hasCategoryHierarchy(i),l=t.CartesianChart.getIsScalar(i.metadata?i.metadata.objects:null,t.columnChartProps.categoryAxis.axisType,n,void 0,s);this.data=d.converter(i,this.style,a,l,i.metadata,this.chartType,this.interactivityService,this.tooltipsEnabled,this.axisControlImprovements)}}this.setChartStrategy()},d.prototype.setChartStrategy=function(){switch(this.chartType){case a.clusteredBar:this.columnChart=new t.ClusteredBarChartStrategy;break;case a.clusteredColumn:this.columnChart=new t.ClusteredColumnChartStrategy;break;case a.stackedBar:case a.hundredPercentStackedBar:this.columnChart=new t.StackedBarChartStrategy;break;case a.stackedColumn:case a.hundredPercentStackedColumn:default:this.columnChart=new t.StackedColumnChartStrategy}if(d.isStacked(this.chartType)&&1===this.data.series.length)switch(this.chartType){case a.stackedBar:this.columnChart=new t.ClusteredBarChartStrategy;break;case a.stackedColumn:this.columnChart=new t.ClusteredColumnChartStrategy}},d.prototype.calculateLegend=function(){if(this.interactivity&&this.interactivity.isInteractiveLegend)return this.createInteractiveLegendDataPoints(0);var e=this.data?this.data.legendData:null,t=e?e.dataPoints:[];return _.isEmpty(t)?null:e},d.prototype.hasLegend=function(){return this.data&&(this.data.hasDynamicSeries||this.data.series&&this.data.series.length>1)},d.prototype.enumerateObjectInstances=function(e,a){switch(a.objectName){case"dataPoint":this.dataView&&!t.GradientUtils.hasGradientRole(this.dataView.categorical)&&this.enumerateDataPoints(e);break;case"labels":this.enumerateDataLabels(e)}},d.prototype.enumerateDataLabels=function(e){var a,i=this.data,r=this.data.labelSettings,o=i.series.length,n=!i.hasDynamicSeries&&(o>1||!i.categoryMetadata);if(a=d.canSupportOverflow(this.chartType,i.series.length)?d.clusteredValidLabelPositionOptions:d.stackedValidLabelPositionOptions,t.dataLabelUtils.enumerateDataLabels(this.getLabelSettingsOptions(e,r,null,n,a)),o>0&&n&&r.showLabelPerSeries)for(var s=0;s<o;s++){var l=i.series[s],c=l.labelSettings?l.labelSettings:this.data.labelSettings;e.pushContainer({displayName:l.displayName}),t.dataLabelUtils.enumerateDataLabels(this.getLabelSettingsOptions(e,c,l)),e.popContainer()}},d.prototype.getLabelSettingsOptions=function(e,t,a,i,r){return{enumeration:e,dataLabelsSettings:t,show:!0,positionObject:r,labelOrientation:!d.isBar(this.chartType)&&!a,position:!a,displayUnits:!d.isStacked100(this.chartType),precision:!0,selector:a&&a.identity?a.identity.getSelector():null,showAll:i,fontSize:!0,labelDensity:this.data&&this.data.scalarCategoryAxis}},d.prototype.enumerateDataPoints=function(e){var a=this.data;if(a){var i=a.series.length;if(0!==i)if(a.hasDynamicSeries||i>1||!a.categoryMetadata)for(var r=0;r<i;r++){var o=a.series[r];e.pushInstance({objectName:"dataPoint",displayName:o.displayName,selector:t.ColorHelper.normalizeSelector(o.identity.getSelector()),properties:{fill:{solid:{color:o.color}}}})}else{var n=a.series[0].data,s=a.categoryFormatter;if(e.pushInstance({objectName:"dataPoint",selector:null,properties:{defaultColor:{solid:{color:a.defaultDataPointColor||this.style.colorPalette.dataColors.getColorByIndex(0).value}}}}).pushInstance({objectName:"dataPoint",selector:null,properties:{showAllDataPoints:!!a.showAllDataPoints}}),a.showAllDataPoints)for(var r=0;r<n.length;r++){var l=n[r],c=a.categories[r];e.pushInstance({objectName:"dataPoint",displayName:s?s.format(c):c,selector:t.ColorHelper.normalizeSelector(l.identity.getSelector(),!0),properties:{fill:{solid:{color:l.color}}}})}}}},d.prototype.calculateAxesProperties=function(a){var i=this.data;this.currentViewport=a.viewport;var r=this.margin=a.margin,o=i&&i.categories?i.categories.length:0,n=i?this.getCategoryLayout(o,a):{categoryCount:0,categoryThickness:t.CartesianChart.MinOrdinalRectThickness,outerPaddingRatio:t.CartesianChart.DefaultOuterPaddingRatio,isScalar:!1};if(this.categoryAxisType=n.isScalar?t.axisType.scalar:null,i&&!n.isScalar&&!this.isScrollable&&a.trimOrdinalDataOnOverflow){var s=Math.min(o,n.categoryCount);s!==o&&(i=e.Prototype.inherit(i),i.series=d.sliceSeries(i.series,s),i.categories=i.categories.slice(0,s))}this.columnChart.setData(i);var l=this.getPreferredPlotArea(n.isScalar,n.categoryCount,n.categoryThickness,t.CartesianChart.DefaultOuterPaddingRatio),c=d.isStacked100(this.chartType),u={height:l.height,width:l.width,duration:0,hostService:this.hostService,unclippedGraphicsContext:this.unclippedGraphicsContext,mainGraphicsContext:this.mainGraphicsContext,margin:this.margin,layout:n,animator:this.animator,interactivityService:this.interactivityService,viewportHeight:this.currentViewport.height-(r.top+r.bottom),viewportWidth:this.currentViewport.width-(r.left+r.right),is100Pct:c,isComboChart:this.isComboChart};this.ApplyInteractivity(u),this.columnChart.setupVisualProps(u);var p,h,g=d.isBar(this.chartType);if(g){var m=a.forcedXDomain;a.forcedXDomain=a.forcedYDomain,a.forcedYDomain=m,p=a.ensureYDomain}else h=a.ensureYDomain;return this.xAxisProperties=this.columnChart.setXScale({is100Pct:c,forcedTickCount:a.forcedTickCount,forcedXDomain:a.forcedXDomain,axisScaleType:g?a.valueAxisScaleType:a.categoryAxisScaleType,axisDisplayUnits:g?a.valueAxisDisplayUnits:a.categoryAxisDisplayUnits,axisPrecision:g?a.valueAxisPrecision:a.categoryAxisPrecision,ensureXDomain:p,outerPaddingRatio:g?0:n.outerPaddingRatio,margin:r}),this.yAxisProperties=this.columnChart.setYScale({is100Pct:c,forcedTickCount:a.forcedTickCount,forcedYDomain:a.forcedYDomain,axisScaleType:g?a.categoryAxisScaleType:a.valueAxisScaleType,axisDisplayUnits:g?a.categoryAxisDisplayUnits:a.valueAxisDisplayUnits,axisPrecision:g?a.categoryAxisPrecision:a.valueAxisPrecision,ensureYDomain:h,outerPaddingRatio:g?n.outerPaddingRatio:0,margin:r}),[this.xAxisProperties,this.yAxisProperties]},d.prototype.getPreferredPlotArea=function(e,a,i,r){void 0===r&&(r=t.CartesianChart.DefaultOuterPaddingRatio);var o={height:this.currentViewport.height-this.margin.top-this.margin.bottom,width:this.currentViewport.width-this.margin.left-this.margin.right};if(this.isScrollable&&!e){var n=t.CartesianChart.getPreferredCategorySpan(a,i,r);d.isBar(this.chartType)?o.height=Math.max(n,o.height):o.width=Math.max(n,o.width)}return o},d.prototype.ApplyInteractivity=function(e){var t=this,a=this.interactivity;if(a&&(a.dragDataPoint&&(e.onDragStart=function(e){e.identity&&t.hostService.onDragStart({event:d3.event,data:{data:e.identity.getSelector()}})}),a.isInteractiveLegend)){var i=function(){var e=d3.mouse(t.mainGraphicsContext[0][0]),a=e[0],i=e[1],r=t.columnChart.getClosestColumnIndex(a,i);t.selectColumn(r)},r=d.getInteractiveColumnChartDomElement(this.element);this.svg.on("click",i),d3.select(r).on("click",i).style("touch-action","none");var o=d3.behavior.drag().origin(Object).on("drag",i);this.svg.call(o),d3.select(r).call(o)}},d.prototype.selectLastSelectedColumnOrDefault=function(e){void 0===e&&(e=!1);var a=void 0===this.lastInteractiveSelectedColumnIndex,i=a?t.CartesianHelper.findMaxCategoryIndex(this.data.series):this.lastInteractiveSelectedColumnIndex;this.selectColumn(i,e)},d.prototype.selectColumn=function(e,t){if(void 0===t&&(t=!1),t||this.lastInteractiveSelectedColumnIndex!==e){var a=this.createInteractiveLegendDataPoints(e);this.columnChart.selectColumn(e,this.lastInteractiveSelectedColumnIndex,t),this.cartesianVisualHost.updateLegend(a),this.lastInteractiveSelectedColumnIndex=e}},d.prototype.createInteractiveLegendDataPoints=function(e){var a=this.data,i=t.Legend.getDefaultLegendData();if(!a||_.isEmpty(a.series))return i;for(var r=t.columnChartProps.general.formatString,o=[],n=a.categories&&a.categories[e],s=a.series,l=a.legendData&&a.legendData.dataPoints,c=new p(this.dataView,this.style),u=0,d=s.length;u<d;u++){var h=c.getValueBySeriesAndCategory(u,e),g=a.valuesMetadata[u],m=t.converterHelper.getFormattedLegendLabel(g,this.dataView.categorical.values,r),y=void 0;if(1===s.length){var f=s[0];y=f.data.length>e&&f.data[e].color}else y=l.length>u&&l[u].color;o.push({color:y,icon:t.LegendIcon.Box,label:m,category:a.categoryFormatter?a.categoryFormatter.format(n):n,measure:t.valueFormatter.format(h,t.valueFormatter.getFormatString(g,r)),identity:t.SelectionId.createNull(),selected:!1})}return i.dataPoints=o,i},d.prototype.overrideXScale=function(e){this.xAxisProperties=e},d.prototype.render=function(e){var a=this.columnChart.drawColumns(!e),i=this.data,r=this.margin,o=this.currentViewport,n=o.height-(r.top+r.bottom),s=o.width-(r.left+r.right);this.mainGraphicsContext.attr("height",n).attr("width",s),this.tooltipsEnabled&&this.tooltipService.addTooltip(a.eventGroup,(function(e){return e.data&&e.data.tooltipInfo}),(function(e){return e.data&&e.data.identity}));var l=[],c=void 0;if(this.interactivityService){for(var u=0,d=i.series.length;u<d;u++)l=l.concat(i.series[u].data);c={datapoints:l,eventGroup:a.eventGroup,bars:a.shapesSelection,hasHighlights:i.hasHighlights,mainGraphicsContext:this.mainGraphicsContext,viewport:a.viewport,axisOptions:a.axisOptions,showLabel:i.labelSettings.show}}return this.interactivity&&this.interactivity.isInteractiveLegend&&this.selectLastSelectedColumnOrDefault(!0),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options),{dataPoints:l,behaviorOptions:c,labelDataPoints:[],labelDataPointGroups:a.labelDataPointGroups,labelsAreNumeric:!0,labelOrientation:i.labelSettings.labelOrientation,animateLabels:a.animateLabels}},d.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},d.prototype.getVisualCategoryAxisIsScalar=function(){return!!this.data&&this.data.scalarCategoryAxis},d.prototype.getSupportedCategoryAxisType=function(){var e=this.data?this.data.categoryMetadata:void 0,a=t.AxisHelper.getCategoryValueType(e),i=t.AxisHelper.isOrdinal(a);return i?t.axisType.categorical:t.axisType.both},d.prototype.setFilteredData=function(t,a){var i=e.Prototype.inherit(this.data);return i.series=d.sliceSeries(i.series,a,t),i.categories=i.categories.slice(t,a),this.columnChart.setData(i),i},d.getLabelFill=function(e,a,i){return e?e:a&&!i?t.NewDataLabelUtils.defaultInsideLabelColor:t.NewDataLabelUtils.defaultLabelColor},d.prototype.supportsTrendLine=function(){var t=this.dataView,i=e.data.createDataViewCategoricalReader(t),r=!!this.data&&this.data.scalarCategoryAxis;return this.chartType===a.clusteredColumn&&r&&i.data.hasValues("Y")},d.prototype.isStacked=function(){return d.isStacked(this.chartType)},d.isBar=function(e){return i.hasFlag(e,o)},d.isColumn=function(e){return i.hasFlag(e,n)},d.isClustered=function(e){return i.hasFlag(e,s)},d.isStacked=function(e){return i.hasFlag(e,l)},d.isStacked100=function(e){return i.hasFlag(e,c)},d.prototype.getCartesianVisualCapabilities=function(){return{supportsHierarchicalCategoryAxis:d.isColumn(this.chartType)}},d.prototype.getStaticSeriesRole=function(){return"Y"},d})();d.ColumnChartClassName="columnChart",d.AutoLabelPosition="Auto",d.validLabelPositionsAutoClustered=[16,4,1,2],d.validLabelPositionsAutoStacked=[1,4,2],d.clusteredValidLabelPositionOptions=[d.AutoLabelPosition,t.labelPosition.outsideEnd,t.labelPosition.insideEnd,t.labelPosition.insideCenter,t.labelPosition.insideBase],d.stackedValidLabelPositionOptions=[d.AutoLabelPosition,t.labelPosition.insideCenter,t.labelPosition.insideEnd,t.labelPosition.insideBase],d.minimumLabelsToRender=4,d.SeriesClasses=jsCommon.CssConstants.createClassAndSelector("series"),t.ColumnChart=d;var p=(function(){function a(t,a){this.dataView=t&&t.categorical,this.reader=e.data.createDataViewCategoricalReaderAdvanced(t,{staticSeriesRole:"Y",colorOptions:{valueRole:"Y",visualStyle:a}})}return a.prototype.getLegend=function(e,a){var i=[],o=[],n=[],s=!1,l=this.reader,c=void 0;if(this.dataView&&this.dataView.values){for(var u=this.dataView.values,d=u.grouped(),p=t.columnChartProps.general.formatString,h=0,g=d.length;h<g;h++)for(var m=d[h],y=m.values,f=0,v=y.length;f<v;f++){var b=y[f],C=b.source;if(!r.hasRole(C,"Gradient")&&!r.hasRole(C,"Tooltips")||r.hasRole(C,"Y")){o.push(C),n.push(b.objects);var S=new t.SelectionIdBuilder;S=S.withMeasure(C.queryName),l.columns.hasDynamicSeries()&&(S=S.withSeries(l.columns.getSeriesValueColumns(),l.columns.getSeriesValueColumnGroup(h)));var x=S.createSelectionId(),w=t.converterHelper.getFormattedLegendLabel(C,u,p),P=l.colors.createBySeries(l.columns.hasDynamicSeries()?h:f);i.push({icon:t.LegendIcon.Box,color:P,label:w,identity:x,selected:!1}),b.identity&&void 0!==C.groupName&&(s=!0)}}var D=this.dataView.values;c=D&&D.source?D.source.displayName:""}var T=t.Legend.getDefaultLegendData();return T.title=c,T.dataPoints=i,T.grouped=s,{legend:T,seriesSources:o,seriesObjects:n}},a.prototype.getValueBySeriesAndCategory=function(e,t){return this.reader.data.getValue("Y",t,e)},a.prototype.getHighlightBySeriesAndCategory=function(e,t){return this.reader.data.getHighlight("Y",t,e)},a})()})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function t(){}return t.prototype.setupVisualProps=function(e){this.graphicsContext=e,this.margin=e.margin,this.width=this.graphicsContext.width,this.height=this.graphicsContext.height,this.categoryLayout=e.layout,this.animator=e.animator,this.interactivityService=e.interactivityService,this.viewportHeight=e.viewportHeight,this.viewportWidth=e.viewportWidth,this.isComboChart=e.isComboChart},t.prototype.setData=function(e){this.data=e},t.prototype.setXScale=function(t){var a,i,r=t.forcedXDomain,o=t.axisScaleType,n=t.axisDisplayUnits,s=t.axisPrecision,l=t.ensureXDomain,c=t.margin,u=this.width;r&&2===r.length&&(a=r[0],i=r[1]);var d=this.xProps=e.ColumnUtil.getCategoryAxis(this.data,u,this.categoryLayout,!1,a,i,o,n,s,l,c),p=this.data.series.length,h=this.categoryLayout.categoryThickness*(1-e.CartesianChart.InnerPaddingRatio)/p;return this.seriesOffsetScale=d3.scale.ordinal().domain(this.data.series.map((function(e){return e.index}))).rangeBands([0,p*h]),d},t.prototype.setYScale=function(t){var a=(t.is100Pct,t.forcedTickCount),i=t.forcedYDomain,r=t.axisScaleType,o=t.axisDisplayUnits,n=t.axisPrecision,s=t.ensureYDomain,l=t.outerPaddingRatio,c=t.margin,u=this.viewportHeight,d=e.AxisHelper.createValueDomain(this.data.series,!0)||e.emptyDomain,p=e.AxisHelper.combineDomain(i,d,s),h=e.AxisHelper.scaleShouldClamp(p,d);return this.yProps=e.AxisHelper.createAxis({pixelSpan:u,dataDomain:p,zeroScalarDomain:[0,1],metaDataColumn:this.data.valuesMetadata,formatString:e.valueFormatter.getFormatString(this.data.valuesMetadata[0],e.columnChartProps.general.formatString),outerPadding:0,isScalar:!0,isVertical:!0,forcedTickCount:a,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,scaleType:r,axisDisplayUnits:o,axisPrecision:n,shouldClamp:h,outerPaddingRatio:l,margin:c}),this.yProps},t.prototype.createLabelDataPoints=function(){return e.ColumnUtil.createLabelDataPoints(this.data,this.layout,this.graphicsContext,this.yProps,!1,!0)},t.prototype.drawColumns=function(a){var i=this.data;this.columnsCenters=null;var r,o=this.categoryLayout.categoryThickness*(1-e.CartesianChart.InnerPaddingRatio),n=o/i.series.length,s={columnWidth:n,categoryWidth:o,xScale:this.xProps.scale,yScale:this.yProps.scale,seriesOffsetScale:this.seriesOffsetScale,isScalar:this.categoryLayout.isScalar,margin:this.margin},l=this.layout=t.getLayout(i,s),c=i.labelSettings;c&&c.show&&(r=this.createLabelDataPoints());var u,d,p=e.ColumnUtil.drawSeries(i,this.graphicsContext.mainGraphicsContext,s);return this.animator&&a&&(u=this.animator.animate({viewModel:i,series:p,layout:l,itemCS:t.classes.item,interactivityService:this.interactivityService,mainGraphicsContext:this.graphicsContext.mainGraphicsContext,viewPort:{height:this.height,width:this.width}}),d=u.shapes),this.animator&&a&&!u.failed||(d=e.ColumnUtil.drawDefaultShapes(i,p,l,t.classes.item,!this.animator,this.interactivityService&&this.interactivityService.hasSelection())),e.ColumnUtil.applyInteractivity(d,this.graphicsContext.onDragStart),{eventGroup:this.graphicsContext.mainGraphicsContext,shapesSelection:d,viewport:{height:this.height,width:this.width},axisOptions:s,labelDataPointGroups:r,animateLabels:u&&!u.failed}},t.prototype.selectColumn=function(a,i,r){e.ColumnUtil.setSelectedColumnOpacity(this.graphicsContext.mainGraphicsContext,t.classes.item.selector,a,i,r),this.moveHandle(a)},t.prototype.getClosestColumnIndex=function(t,a){return e.ColumnUtil.getClosestColumnIndex(t,this.getColumnsCenters())},t.prototype.getColumnsCenters=function(){var t=this;if(!this.columnsCenters){var a=this.categoryLayout.categoryThickness*(1-e.CartesianChart.InnerPaddingRatio);if(this.data.series.length>0){var i=0;this.categoryLayout.isScalar||(i=a/2);var r=this.data.series[0];this.columnsCenters=r.data.map((function(e){return t.xProps.scale(t.categoryLayout.isScalar?e.categoryValue:e.categoryIndex)+i}))}}return this.columnsCenters},t.prototype.moveHandle=function(e){var t=this.getColumnsCenters(),a=d3.select(".interactive-hover-line");if(a.empty()||this.columnSelectionLineHandle||(this.columnSelectionLineHandle=d3.select(a.node().parentNode)),!t||t.length<=1)return void(this.columnSelectionLineHandle&&this.columnSelectionLineHandle.remove());var i=t[e];if(this.columnSelectionLineHandle){var r=this.columnSelectionLineHandle;r.select("line").attr({x1:i,x2:i}),r.select("circle").attr({cx:i})}else{var r=this.columnSelectionLineHandle=this.graphicsContext.unclippedGraphicsContext.append("g");r.append("line").classed("interactive-hover-line",!0).attr({x1:i,x2:i,y1:0,y2:this.height}),r.append("circle").attr({cx:i,cy:this.height,r:"6px"}).classed("drag-handle",!0)}},t.getLayout=function(t,a){var i=a.columnWidth,r=.5*i,o=r/2,n=a.isScalar,s=a.xScale,l=a.yScale,c=a.seriesOffsetScale,u=l(0),d=0;return n&&(d=a.categoryWidth/2),{shapeLayout:{width:function(e){return e.drawThinner?r:i},x:function(e){return s(n?e.categoryValue:e.categoryIndex)+c(e.seriesIndex)-d+(e.drawThinner?o:0)},y:function(t){return u+e.AxisHelper.diffScaled(l,Math.max(0,t.value),0)},height:function(t){return Math.abs(e.AxisHelper.diffScaled(l,0,t.value))}},shapeLayoutWithoutHighlights:{width:function(e){return i},x:function(e){return s(n?e.categoryValue:e.categoryIndex)+c(e.seriesIndex)-d},y:function(t){return u+e.AxisHelper.diffScaled(l,Math.max(0,t.originalValue),0)},height:function(t){return Math.abs(e.AxisHelper.diffScaled(l,0,t.originalValue))}},zeroShapeLayout:{width:function(e){return e.drawThinner?r:i},x:function(e){return s(n?e.categoryValue:e.categoryIndex)+c(e.seriesIndex)-d+(e.drawThinner?o:0)},y:function(e){return u},height:function(e){return 0}}}},t})();t.classes={item:{class:"column",selector:".column"}},e.ClusteredColumnChartStrategy=t;var a=(function(){function t(){}return t.prototype.setupVisualProps=function(e){this.graphicsContext=e,this.margin=e.margin,this.width=this.graphicsContext.width,this.height=this.graphicsContext.height,this.categoryLayout=e.layout,this.animator=e.animator,this.interactivityService=e.interactivityService,this.viewportHeight=e.viewportHeight,this.viewportWidth=e.viewportWidth,this.isComboChart=e.isComboChart},t.prototype.setData=function(e){this.data=e},t.prototype.setYScale=function(t){var a,i,r=t.forcedYDomain,o=t.axisScaleType,n=t.axisDisplayUnits,s=t.axisPrecision,l=t.ensureYDomain,c=t.margin,u=this.height;r&&2===r.length&&(a=r[0],i=r[1]);var d=this.yProps=e.ColumnUtil.getCategoryAxis(this.data,u,this.categoryLayout,!0,a,i,o,n,s,l,c),p=this.data.series.length,h=this.categoryLayout.categoryThickness*(1-e.CartesianChart.InnerPaddingRatio)/p;return this.seriesOffsetScale=d3.scale.ordinal().domain(this.data.series.map((function(e){return e.index}))).rangeBands([0,p*h]),d},t.prototype.setXScale=function(t){var a=(t.is100Pct,t.forcedTickCount),i=t.forcedXDomain,r=t.axisScaleType,o=t.axisDisplayUnits,n=t.axisPrecision,s=t.ensureXDomain,l=t.outerPaddingRatio,c=t.margin,u=this.width,d=e.AxisHelper.createValueDomain(this.data.series,!0)||e.emptyDomain,p=e.AxisHelper.combineDomain(i,d,s),h=e.AxisHelper.scaleShouldClamp(p,d);return this.xProps=e.AxisHelper.createAxis({pixelSpan:u,dataDomain:p,zeroScalarDomain:[0,1],metaDataColumn:this.data.valuesMetadata,formatString:e.valueFormatter.getFormatString(this.data.valuesMetadata[0],e.columnChartProps.general.formatString),outerPadding:0,isScalar:!0,isVertical:!1,forcedTickCount:a,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,scaleType:r,axisDisplayUnits:o,axisPrecision:n,shouldClamp:h,outerPaddingRatio:l,margin:c}),this.xProps.axis.tickSize(-this.viewportHeight,0),this.xProps},t.prototype.createLabelDataPoints=function(){return e.ColumnUtil.createLabelDataPoints(this.data,this.layout,this.graphicsContext,this.xProps,!0,!0)},t.prototype.drawColumns=function(a){var i=this.data;this.barsCenters=null;var r,o=this.categoryLayout.categoryThickness*(1-e.CartesianChart.InnerPaddingRatio),n=o/i.series.length,s={columnWidth:n,categoryWidth:o,xScale:this.xProps.scale,yScale:this.yProps.scale,seriesOffsetScale:this.seriesOffsetScale,isScalar:this.categoryLayout.isScalar,margin:this.margin},l=this.layout=t.getLayout(i,s),c=i.labelSettings;c&&c.show&&(r=this.createLabelDataPoints());var u,d,p=e.ColumnUtil.drawSeries(i,this.graphicsContext.mainGraphicsContext,s);return this.animator&&a&&(u=this.animator.animate({viewModel:i,series:p,layout:l,itemCS:t.classes.item,interactivityService:this.interactivityService,mainGraphicsContext:this.graphicsContext.mainGraphicsContext,viewPort:{height:this.height,width:this.width}}),d=u.shapes),this.animator&&a&&!u.failed||(d=e.ColumnUtil.drawDefaultShapes(i,p,l,t.classes.item,!this.animator,this.interactivityService&&this.interactivityService.hasSelection())),e.ColumnUtil.applyInteractivity(d,this.graphicsContext.onDragStart),{eventGroup:this.graphicsContext.mainGraphicsContext,shapesSelection:d,viewport:{height:this.height,width:this.width},axisOptions:s,labelDataPointGroups:r,animateLabels:u&&!u.failed}},t.prototype.selectColumn=function(a,i,r){e.ColumnUtil.setSelectedColumnOpacity(this.graphicsContext.mainGraphicsContext,t.classes.item.selector,a,i,r),this.moveHandle(a)},t.prototype.getClosestColumnIndex=function(t,a){return e.ColumnUtil.getClosestColumnIndex(a,this.getBarsCenters())},t.prototype.getBarsCenters=function(){var t=this;if(!this.barsCenters){var a=this.categoryLayout.categoryThickness*(1-e.CartesianChart.InnerPaddingRatio);if(this.data.series.length>0){var i=0;this.categoryLayout.isScalar||(i=a/2);var r=this.data.series[0];this.barsCenters=r.data.map((function(e){return t.yProps.scale(t.categoryLayout.isScalar?e.categoryValue:e.categoryIndex)+i}))}}return this.barsCenters},t.prototype.moveHandle=function(e){var t=this.getBarsCenters(),a=d3.select(".interactive-hover-line");if(a.empty()||this.columnSelectionLineHandle||(this.columnSelectionLineHandle=d3.select(a.node().parentNode)),!t||t.length<=1)return void(this.columnSelectionLineHandle&&this.columnSelectionLineHandle.remove());var i=t[e];if(this.columnSelectionLineHandle){var r=this.columnSelectionLineHandle;r.select("line").attr({y1:i,y2:i}),r.select("circle").attr({cy:i})}else{var r=this.columnSelectionLineHandle=this.graphicsContext.unclippedGraphicsContext.append("g");r.append("line").classed("interactive-hover-line",!0).attr({x1:0,x2:this.width,y1:i,y2:i}),r.append("circle").attr({cx:0,cy:i,r:"6px"}).classed("drag-handle",!0)}},t.getLayout=function(t,a){var i=a.columnWidth,r=.5*i,o=r/2,n=a.isScalar,s=a.xScale,l=a.yScale,c=a.seriesOffsetScale,u=s(0),d=0;return n&&(d=a.categoryWidth/2),{shapeLayout:{width:function(t){return Math.abs(e.AxisHelper.diffScaled(s,0,t.value))},x:function(t){return u+e.AxisHelper.diffScaled(s,Math.min(0,t.value),0)},y:function(e){return l(n?e.categoryValue:e.categoryIndex)+c(e.seriesIndex)-d+(e.drawThinner?o:0)},height:function(e){return e.drawThinner?r:i}},shapeLayoutWithoutHighlights:{width:function(t){return Math.abs(e.AxisHelper.diffScaled(s,0,t.originalValue))},x:function(t){return u+e.AxisHelper.diffScaled(s,Math.min(0,t.originalValue),0)},y:function(e){return l(n?e.categoryValue:e.categoryIndex)+c(e.seriesIndex)-d},height:function(e){return i}},zeroShapeLayout:{width:function(e){return 0},x:function(t){return u+e.AxisHelper.diffScaled(s,Math.min(0,t.value),0)},y:function(e){return l(n?e.categoryValue:e.categoryIndex)+c(e.seriesIndex)-d+(e.drawThinner?o:0)},height:function(e){return e.drawThinner?r:i}}}},t})();a.classes={item:{class:"bar",selector:".bar"}},e.ClusteredBarChartStrategy=a})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function t(){}return t.prototype.setupVisualProps=function(e){this.graphicsContext=e,this.margin=e.margin,this.width=this.graphicsContext.width,this.height=this.graphicsContext.height,this.categoryLayout=e.layout,this.animator=e.animator,this.interactivityService=e.interactivityService,this.viewportHeight=e.viewportHeight,this.viewportWidth=e.viewportWidth,this.isComboChart=e.isComboChart},t.prototype.setData=function(e){this.data=e},t.prototype.setXScale=function(t){var a,i,r=t.forcedXDomain,o=t.axisScaleType,n=t.axisDisplayUnits,s=t.axisPrecision,l=t.xReferenceLineValue,c=t.margin,u=this.width;r&&2===r.length&&(a=r[0],i=r[1]);var d=this.xProps=e.ColumnUtil.getCategoryAxis(this.data,u,this.categoryLayout,!1,a,i,o,n,s,l,c);return d},t.prototype.setYScale=function(t){var a=t.is100Pct,i=t.forcedTickCount,r=t.forcedYDomain,o=t.axisScaleType,n=t.axisDisplayUnits,s=t.axisPrecision,l=t.yReferenceLineValue,c=t.outerPaddingRatio,u=t.margin,d=this.viewportHeight,p=e.StackedUtil.calcValueDomain(this.data.series,a),h=[p.min,p.max],g=e.AxisHelper.combineDomain(r,h,l),m=e.AxisHelper.scaleShouldClamp(g,h),y=this.data.valuesMetadata[0],f=a?this.graphicsContext.hostService.getLocalizedString("Percentage"):e.valueFormatter.getFormatString(y,e.columnChartProps.general.formatString);return this.yProps=e.AxisHelper.createAxis({pixelSpan:d,dataDomain:g,zeroScalarDomain:[0,1],metaDataColumn:this.data.valuesMetadata,formatString:f,outerPadding:0,outerPaddingRatio:c,isScalar:!0,isVertical:!0,forcedTickCount:i,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,scaleType:o,axisDisplayUnits:n,axisPrecision:s,is100Pct:a,shouldClamp:m,margin:u}),this.yProps},t.prototype.createLabelDataPoints=function(){return e.ColumnUtil.createLabelDataPoints(this.data,this.layout,this.graphicsContext,this.yProps,!1,!1)},t.prototype.drawColumns=function(a){var i=this.data;this.columnsCenters=null;var r,o={columnWidth:this.categoryLayout.categoryThickness*(1-e.CartesianChart.InnerPaddingRatio),xScale:this.xProps.scale,yScale:this.yProps.scale,isScalar:this.categoryLayout.isScalar,margin:this.margin},n=this.layout=t.getLayout(i,o),s=i.labelSettings;s&&s.show&&(r=this.createLabelDataPoints());var l,c,u=e.ColumnUtil.drawSeries(i,this.graphicsContext.mainGraphicsContext,o);return this.animator&&a&&(l=this.animator.animate({viewModel:i,series:u,layout:n,itemCS:t.classes.item,interactivityService:this.interactivityService,mainGraphicsContext:this.graphicsContext.mainGraphicsContext,viewPort:{height:this.height,width:this.width}}),c=l.shapes),this.animator&&a&&!l.failed||(c=e.ColumnUtil.drawDefaultShapes(i,u,n,t.classes.item,!this.animator,this.interactivityService&&this.interactivityService.hasSelection())),e.ColumnUtil.applyInteractivity(c,this.graphicsContext.onDragStart),{eventGroup:this.graphicsContext.mainGraphicsContext,shapesSelection:c,viewport:{height:this.height,width:this.width},axisOptions:o,labelDataPointGroups:r,animateLabels:l&&!l.failed}},t.prototype.selectColumn=function(a,i,r){e.ColumnUtil.setSelectedColumnOpacity(this.graphicsContext.mainGraphicsContext,t.classes.item.selector,a,i,r),this.moveHandle(a)},t.prototype.getClosestColumnIndex=function(t,a){return e.ColumnUtil.getClosestColumnIndex(t,this.getColumnsCenters())},t.prototype.getColumnsCenters=function(){var t=this;if(!this.columnsCenters){var a=this.categoryLayout.categoryThickness*(1-e.CartesianChart.InnerPaddingRatio);if(this.data.series.length>0){var i=0;this.categoryLayout.isScalar||(i=a/2);var r=this.data.series[0];this.columnsCenters=r.data.map((function(e){return t.xProps.scale(t.categoryLayout.isScalar?e.categoryValue:e.categoryIndex)+i}))}}return this.columnsCenters},t.prototype.moveHandle=function(e){var t=this.getColumnsCenters(),a=d3.select(".interactive-hover-line");if(a.empty()||this.columnSelectionLineHandle||(this.columnSelectionLineHandle=d3.select(a.node().parentNode)),!t||t.length<=1)return void(this.columnSelectionLineHandle&&this.columnSelectionLineHandle.remove());var i=t[e];if(this.columnSelectionLineHandle){var r=this.columnSelectionLineHandle;r.select("line").attr({x1:i,x2:i}),r.select("circle").attr({cx:i})}else{var r=this.columnSelectionLineHandle=this.graphicsContext.unclippedGraphicsContext.append("g");r.append("line").classed("interactive-hover-line",!0).attr({x1:i,x2:i,y1:0,y2:this.height}),r.append("circle").attr({cx:i,cy:this.height,r:"6px"}).classed("drag-handle",!0)}},t.getLayout=function(e,t){var a=t.columnWidth,i=t.isScalar,r=t.xScale,o=t.yScale,n=0;return i&&(n=a/2),{shapeLayout:{width:function(e){return a},x:function(e){return r(i?e.categoryValue:e.categoryIndex)-n},y:function(e){return o(e.position)},height:function(e){return o(e.position-e.valueAbsolute)-o(e.position)}},shapeLayoutWithoutHighlights:{width:function(e){return a},x:function(e){return r(i?e.categoryValue:e.categoryIndex)-n},y:function(e){return o(e.originalPosition);
},height:function(e){return o(e.originalPosition-e.originalValueAbsolute)-o(e.originalPosition)}},zeroShapeLayout:{width:function(e){return a},x:function(e){return r(i?e.categoryValue:e.categoryIndex)-n},y:function(e){return o(e.value>=0?e.position-e.valueAbsolute:e.position)},height:function(e){return 0}}}},t})();t.classes={item:{class:"column",selector:".column"},highlightItem:{class:"highlightColumn",selector:".highlightColumn"}},e.StackedColumnChartStrategy=t;var a=(function(){function t(){}return t.prototype.setupVisualProps=function(e){this.graphicsContext=e,this.margin=e.margin,this.width=this.graphicsContext.width,this.height=this.graphicsContext.height,this.categoryLayout=e.layout,this.animator=e.animator,this.interactivityService=e.interactivityService,this.viewportHeight=e.viewportHeight,this.viewportWidth=e.viewportWidth,this.isComboChart=e.isComboChart},t.prototype.setData=function(e){this.data=e},t.prototype.setYScale=function(t){var a,i,r=t.forcedYDomain,o=t.axisScaleType,n=t.axisDisplayUnits,s=t.axisPrecision,l=t.ensureYDomain,c=t.margin,u=this.height;r&&2===r.length&&(a=r[0],i=r[1]);var d=this.yProps=e.ColumnUtil.getCategoryAxis(this.data,u,this.categoryLayout,!0,a,i,o,n,s,l,c);return d},t.prototype.setXScale=function(t){var a=t.is100Pct,i=t.forcedTickCount,r=t.forcedXDomain,o=t.axisScaleType,n=t.axisDisplayUnits,s=t.axisPrecision,l=t.ensureXDomain,c=t.outerPaddingRatio,u=t.margin,d=this.width,p=e.StackedUtil.calcValueDomain(this.data.series,a),h=[p.min,p.max],g=e.AxisHelper.combineDomain(r,h,l),m=e.AxisHelper.scaleShouldClamp(g,h),y=this.data.valuesMetadata[0],f=a?this.graphicsContext.hostService.getLocalizedString("Percentage"):e.valueFormatter.getFormatString(y,e.columnChartProps.general.formatString);return this.xProps=e.AxisHelper.createAxis({pixelSpan:d,dataDomain:g,zeroScalarDomain:[0,1],metaDataColumn:this.data.valuesMetadata,formatString:f,outerPadding:0,outerPaddingRatio:c,isScalar:!0,isVertical:!1,forcedTickCount:i,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,scaleType:o,axisDisplayUnits:n,axisPrecision:s,is100Pct:a,shouldClamp:m,margin:u}),this.xProps.axis.tickSize(-this.viewportHeight,0),this.xProps},t.prototype.createLabelDataPoints=function(){return e.ColumnUtil.createLabelDataPoints(this.data,this.layout,this.graphicsContext,this.xProps,!0,!1)},t.prototype.drawColumns=function(a){var i=this.data;this.barsCenters=null;var r,o={columnWidth:this.categoryLayout.categoryThickness*(1-e.CartesianChart.InnerPaddingRatio),xScale:this.xProps.scale,yScale:this.yProps.scale,isScalar:this.categoryLayout.isScalar,margin:this.margin},n=this.layout=t.getLayout(i,o),s=i.labelSettings;s&&s.show&&(r=this.createLabelDataPoints());var l,c,u=e.ColumnUtil.drawSeries(i,this.graphicsContext.mainGraphicsContext,o);return this.animator&&a&&(l=this.animator.animate({viewModel:i,series:u,layout:n,itemCS:t.classes.item,interactivityService:this.interactivityService,mainGraphicsContext:this.graphicsContext.mainGraphicsContext,viewPort:{height:this.height,width:this.width}}),c=l.shapes),this.animator&&a&&!l.failed||(c=e.ColumnUtil.drawDefaultShapes(i,u,n,t.classes.item,!this.animator,this.interactivityService&&this.interactivityService.hasSelection())),e.ColumnUtil.applyInteractivity(c,this.graphicsContext.onDragStart),{eventGroup:this.graphicsContext.mainGraphicsContext,shapesSelection:c,viewport:{height:this.height,width:this.width},axisOptions:o,labelDataPointGroups:r,animateLabels:l&&!l.failed}},t.prototype.selectColumn=function(a,i,r){e.ColumnUtil.setSelectedColumnOpacity(this.graphicsContext.mainGraphicsContext,t.classes.item.selector,a,i,r),this.moveHandle(a)},t.prototype.getClosestColumnIndex=function(t,a){return e.ColumnUtil.getClosestColumnIndex(a,this.getBarsCenters())},t.prototype.getBarsCenters=function(){var t=this;if(!this.barsCenters){var a=this.categoryLayout.categoryThickness*(1-e.CartesianChart.InnerPaddingRatio);if(this.data.series.length>0){var i=0;this.categoryLayout.isScalar||(i=a/2);var r=this.data.series[0];this.barsCenters=r.data.map((function(e){return t.yProps.scale(t.categoryLayout.isScalar?e.categoryValue:e.categoryIndex)+i}))}}return this.barsCenters},t.prototype.moveHandle=function(e){var t=this.getBarsCenters(),a=d3.select(".interactive-hover-line");if(a.empty()||this.columnSelectionLineHandle||(this.columnSelectionLineHandle=d3.select(a.node().parentNode)),!t||t.length<=1)return void(this.columnSelectionLineHandle&&this.columnSelectionLineHandle.remove());var i=t[e];if(this.columnSelectionLineHandle){var r=this.columnSelectionLineHandle;r.select("line").attr({y1:i,y2:i}),r.select("circle").attr({cy:i})}else{var r=this.columnSelectionLineHandle=this.graphicsContext.unclippedGraphicsContext.append("g");r.append("line").classed("interactive-hover-line",!0).attr({x1:0,x2:this.width,y1:i,y2:i}),r.append("circle").classed("drag-handle",!0).attr({cx:0,cy:i,r:"6px"})}},t.getLayout=function(e,t){var a=t.columnWidth,i=t.isScalar,r=t.xScale,o=t.yScale,n=0;return i&&(n=a/2),{shapeLayout:{width:function(e){return r(e.position)-r(e.position-e.valueAbsolute)},x:function(e){return r(e.position-e.valueAbsolute)},y:function(e){return o(i?e.categoryValue:e.categoryIndex)-n},height:function(e){return a}},shapeLayoutWithoutHighlights:{width:function(e){return r(e.originalPosition)-r(e.originalPosition-e.originalValueAbsolute)},x:function(e){return r(e.originalPosition-e.originalValueAbsolute)},y:function(e){return o(i?e.categoryValue:e.categoryIndex)-n},height:function(e){return a}},zeroShapeLayout:{width:function(e){return 0},x:function(e){return r(e.value>=0?e.position-e.valueAbsolute:e.position)},y:function(e){return o(i?e.categoryValue:e.categoryIndex)-n},height:function(e){return a}}}},t})();a.classes={item:{class:"bar",selector:".bar"},highlightItem:{class:"highlightBar",selector:".highlightBar"}},e.StackedBarChartStrategy=a})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function a(t,a,i){if(i){for(var r,o=i.length,n=0;n<o;n++){var s=i[n];if(s.enumerateObjectInstances){if(s instanceof e.ColumnChart){r=n;continue}s.enumerateObjectInstances(t,a)}}void 0!==r&&i[r].enumerateObjectInstances(t,a)}}function i(t){var a=!_.isEmpty(t.dataViewMappings)&&t.dataViewMappings[0];if(a){var i=a.categorical&&a.categorical.values,r=i.group&&!_.isEmpty(i.group.select)&&i.group.select[0];_.isEmpty(r.for.in.items)&&(i.group.by.items=void 0)}var o=e.CartesianChart.detectScalarMapping(a);if(a&&a.categorical&&(a.categorical.dataVolume=4,o)){var n=a.categorical.categories;n.dataReductionAlgorithm={sample:{}};var s=a.categorical.values;s&&s.group&&(s.group.dataReductionAlgorithm={top:{}})}var l=t.dataViewMappings.length>1&&t.dataViewMappings[1];if(l&&l.categorical&&(l.categorical.dataVolume=4,o)){var n=l.categorical.categories;n.dataReductionAlgorithm={sample:{}};var s=l.categorical.values;s&&s.group&&(s.group.dataReductionAlgorithm={top:{}})}o||e.CartesianChart.expandCategoryWindow(t.dataViewMappings)}function r(t){if(t&&t.dataViewMappings.length>0){var a=t.dataViewMappings[0];if(!e.CartesianChart.detectScalarMapping(a))return["Category","Y","Y2"]}return null}function o(e){return 10===e||13===e||14===e||15===e||16===e}t.enumerateDataPoints=a,t.customizeQuery=i,t.getSortableRoles=r,t.isComboChart=o})(t=e.ComboChart||(e.ComboChart={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=(function(){function a(e){this.isScrollable=e.isScrollable,this.interactivityService=e.interactivityService}return a.prototype.init=function(e){this.options=e,this.svg=e.svg,this.svg.classed(a.ClassName,!0),this.mainGraphicsG=this.svg.append("g").classed("dataDotChartMainGraphicsContext",!0),this.mainGraphicsContext=this.mainGraphicsG.append("svg"),this.currentViewport=e.viewport,this.hostService=e.host,this.cartesianVisualHost=e.cartesianHost,this.style=e.style,this.colors=this.style.colorPalette.dataColors,this.interactivity=e.interactivity,this.element=e.element},a.prototype.setData=function(i){if(this.data={series:{data:[]},hasHighlights:!1,hasDynamicSeries:!1},i.length>0){var r=i[0];if(r&&r.categorical){var o=this.dataViewCategorical=r.categorical,n=o.categories,s=e.ValueType.fromDescriptor({text:!0});n&&n.length>0&&n[0].source&&n[0].source.type&&(s=n[0].source.type),this.data=a.converter(r,t.valueFormatter.format(null),this.interactivityService)}}},a.prototype.setFilteredData=function(t,a){var i=this.clippedData=e.Prototype.inherit(this.data);return i&&i.series&&i.series.data&&(i.series={data:i.series.data.slice(t,a),xCol:i.series.xCol,yCol:i.series.yCol}),i},a.prototype.calculateAxesProperties=function(i){var r=this;this.currentViewport=i.viewport,this.margin=i.margin;var o=this.clippedData=this.data,n=this.currentViewport,s=this.margin,l=o?o.series:null,c=l&&l.data&&l.data.length>0?[l]:[],u=l&&l.data?l.data.length:0;o.hasHighlights&&(u/=2);var d,p,h=n.width-(s.left+s.right),g=n.height-(s.top+s.bottom);a.hasDataPoint(l)&&(d=l.xCol,p=l.yCol);var m=t.CartesianChart.getLayout(null,{availableWidth:h,categoryCount:u,domain:null,isScalar:!1,isScrollable:this.isScrollable,trimOrdinalDataOnOverflow:i.trimOrdinalDataOnOverflow}),y=m.categoryThickness*m.outerPaddingRatio;this.isScrollable||(this.clippedData=a.createClippedDataIfOverflowed(o,m.categoryCount));var f=t.AxisHelper.createValueDomain(c,!0),v=t.AxisHelper.combineDomain(i.forcedYDomain,f,i.ensureYDomain);this.yAxisProperties=t.AxisHelper.createAxis({pixelSpan:g,dataDomain:v,metaDataColumn:p,formatString:t.valueFormatter.getFormatString(p,a.formatStringProp),outerPadding:0,isScalar:!0,isVertical:!0,forcedTickCount:i.forcedTickCount,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,margin:s});var b=this.xAxisProperties?this.xAxisProperties.axisType:e.ValueType.fromDescriptor({text:!0}),C=t.AxisHelper.createDomain(c,b,!1,i.forcedXDomain,i.ensureXDomain);return this.xAxisProperties=t.AxisHelper.createAxis({pixelSpan:h,dataDomain:C,metaDataColumn:d,formatString:t.valueFormatter.getFormatString(d,a.formatStringProp),outerPadding:y,isScalar:!1,isVertical:!1,forcedTickCount:i.forcedTickCount,useTickIntervalForDisplayUnits:!0,categoryThickness:m.categoryThickness,getValueFn:function(e,t){return r.lookupXValue(e,t)},isCategoryAxis:!0,margin:s}),[this.xAxisProperties,this.yAxisProperties]},a.createClippedDataIfOverflowed=function(t,a){var i=t.hasHighlights?Math.min(t.series.data.length,2*a):Math.min(t.series.data.length,a);if(i>=t.series.data.length)return t;var r=e.Prototype.inherit(t);return r.series=e.Prototype.inherit(t.series),r.series.data=r.series.data.slice(0,i),r},a.hasDataPoint=function(e){return e&&e.data&&e.data.length>0},a.prototype.lookupXValue=function(e,a){var i=this.data,r=t.AxisHelper.isDateTime(a);if(r)return new Date(e);if(i&&i.series){var o=i.series.data;if(o){var n=o[e];if(n)return n.categoryValue}}return e},a.prototype.overrideXScale=function(e){this.xAxisProperties=e},a.prototype.render=function(i){var r=this;if(this.clippedData){var o=this.clippedData,n=o.series.data,s=o.hasHighlights,l=this.margin,c=this.currentViewport,u=c.width-(l.left+l.right),d=c.height-(l.top+l.bottom),p=this.xAxisProperties.scale,h=this.yAxisProperties.scale,g=this.xAxisProperties.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio),m=g/2,y=this.style.colorPalette.dataColors.getNewColorScale().getColor(a.DotColorKey),f=!!this.interactivityService&&this.interactivityService.hasSelection();this.mainGraphicsContext.attr("width",u).attr("height",d);var v=this.mainGraphicsContext.selectAll(a.DotClassSelector).data(n,(function(e){return e.identity.getKey()}));v.enter().append("circle").classed(a.DotClassName,!0),v.style({fill:y.value}).style("fill-opacity",(function(e){return t.ColumnUtil.getFillOpacity(e.selected,e.highlight,f,s)})).classed("null-value",(function(e){return null===e.value})).attr({r:function(e){return m},cx:function(e){return p(e.categoryIndex)+m},cy:function(e){return h(e.value)}}),v.exit().remove();var b=this.mainGraphicsContext.selectAll(a.DotLabelClassSelector).data(n,(function(e){return e.identity.getKey()}));b.enter().append("text").classed(a.DotLabelClassName,!0).attr({"text-anchor":a.DotLabelTextAnchor,dy:a.DotLabelVerticalOffset}),b.classed("null-value",(function(e){return null===e.value})).classed("overflowed",!1).attr({x:function(e){return p(e.categoryIndex)+m},y:function(e){return h(e.value)}}).text((function(e){return r.yAxisProperties.formatter.format(e.value)}));var C=!1;b.each((function(){if(!C&&!$("<div>").addClass($(this).attr("class")).hasClass("null-value")){var t=e.TextMeasurementService.measureSvgTextElementWidth(this);t>g&&(b.classed("overflowed",!0),C=!0)}})),b.exit().remove();var S=void 0;return this.interactivityService&&(S={dots:v,dotLabels:b,datapoints:n}),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options),{dataPoints:n,behaviorOptions:S,labelDataPoints:[],labelsAreNumeric:!0,animateLabels:!1}}},a.prototype.calculateLegend=function(){return this.createLegendDataPoints(0)},a.prototype.hasLegend=function(){return this.data&&this.data.hasDynamicSeries},a.prototype.createLegendDataPoints=function(i){var r=this.data;if(!r)return null;var o,n=r.series,s=n.data,l=t.Legend.getDefaultLegendData(),c=[],u=this.xAxisProperties?this.xAxisProperties.axisType:e.ValueType.fromDescriptor({text:!0});if(r.series&&r.series.data){var d=r.series.data[0];o=d&&this.lookupXValue(d.categoryValue,u)}if(n.yCol){var p=a.formatStringProp,h=s[i],g=h&&h.value,m=t.converterHelper.getFormattedLegendLabel(n.yCol,this.dataViewCategorical.values,p),y=this.style.colorPalette.dataColors.getNewColorScale().getColor(a.DotColorKey),f=this.dataViewCategorical.values,v=f&&f.length>i?t.SelectionId.createWithIdAndMeasure(f[i].identity,f[i].source.queryName):t.SelectionId.createWithMeasure(f.source.queryName);c.push({color:y.value,icon:t.LegendIcon.Line,label:m,category:t.valueFormatter.format(o,t.valueFormatter.getFormatString(n.xCol,p)),measure:t.valueFormatter.format(g,t.valueFormatter.getFormatString(n.yCol,p)),identity:v,selected:!1})}return l.dataPoints=c,l},a.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},a.converter=function(e,a,i){var r=e.categorical,o=r.categories&&r.categories.length>0?r.categories[0]:{source:void 0,values:[a],identity:void 0},n=t.AxisHelper.getCategoryValueType(o.source),s=t.AxisHelper.isDateTime(n),l=o.values;if(!_.isEmpty(r.values)){for(var c=r.values[0],u=!!c.highlights,d=[],p=0,h=c.values.length;p<h;p++){var g=new t.SelectionIdBuilder;o.identity&&(g=g.withCategory(o,p));var m=g.withMeasure(c.source.queryName).createSelectionId(),y=l[p];if((!s||null==y||y instanceof Date)&&(d.push({categoryValue:s&&y?y.getTime():y,value:c.values[p],categoryIndex:p,seriesIndex:0,selected:!1,identity:m,highlight:!1}),u)){var f=t.SelectionId.createWithHighlight(m),v=c.highlights[p];d.push({categoryValue:s&&y?y.getTime():y,value:v,categoryIndex:p,seriesIndex:0,selected:!1,identity:f,highlight:!0})}}return i&&i.applySelectionStateToData(d),{series:{xCol:o.source,yCol:c.source,data:d},hasHighlights:u,hasDynamicSeries:!0}}return{series:{data:[]},hasHighlights:!1,hasDynamicSeries:!1}},a.prototype.getCartesianVisualCapabilities=function(){return{supportsHierarchicalCategoryAxis:!1}},a.prototype.getStaticSeriesRole=function(){},a})();a.formatStringProp={objectName:"general",propertyName:"formatString"},a.ClassName="dataDotChart",a.DotClassName="dot",a.DotClassSelector=".dot",a.DotColorKey="dataDot",a.DotLabelClassName="label",a.DotLabelClassSelector=".label",a.DotLabelVerticalOffset="0.4em",a.DotLabelTextAnchor="middle",t.DataDotChart=a})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function a(t,a,i,r){var o=t.scale,n=t.axis.tickValues();if(_.isEmpty(n))return{maxWidth:0,overflow:{top:0,bottom:0}};var s,l;if(e.AxisHelper.isOrdinalScale(o))x=o.rangeExtent(),s=x[0],l=x[1];else{var c=o.range();s=_.first(c),l=_.last(c)}var u,d,p,h,g=t.values;s<l?(u=s,d=o(_.first(n)),p=l,h=o(_.last(n))):(u=l,d=o(_.last(n)),p=s,h=o(_.first(n)));for(var m=a.toTextProperties(""+_.first(g)),y=r(m),f=Math.max(0,-(d-y/2-u)),v=Math.max(0,h+y/2-p),b=0,C=0,S=g.length;C<S;C++)m.text=""+g[C],b=Math.max(b,i(m));return{maxWidth:b,overflow:{top:f,bottom:v}};var x}t.getAxisTickLabelMargins=a})(t=e.AxesLayoutUtils||(e.AxesLayoutUtils={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=jsCommon.EnumExtensions,i=jsCommon.CssConstants.createClassAndSelector,r=jsCommon.PixelConverter,o=e.data.CompiledDataViewMapping,n=(function(){function i(e){var t=this;this.pathXAdjustment=0,this.deferDragMoveOperation=jsCommon.DeferUtility.deferUntilNextFrame((function(){if(t.lastDragMoveXPosition){var e=t.findIndex(t.lastDragMoveXPosition-t.margin.left);t.selectColumn(e),t.lastDragMoveXPosition=void 0}})),this.isScrollable=!!e.isScrollable&&e.isScrollable,this.tooltipsEnabled=e.tooltipsEnabled,this.lineType=e.chartType?e.chartType:1,this.interactivityService=e.interactivityService,this.animator=e.animator,this.lineClassAndSelector=i.LineClassSelector,this.axisControlImprovements=e.axisControlImprovements}return i.hasScalarKey=function(e){var t=!1;return o.visitCategoricalCategories(e,{visitRole:function(e){t=t||_.any(e.items,(function(e){return e.hasScalarKey}))}}),t},i.customizeQuery=function(e){var a=e.dataViewMappings[0];if(a&&a.categorical&&a.categorical.categories){a.categorical.dataVolume=4;var r=a.categorical.categories,n=!1;if(i.canUseScalarKey(a)){n=i.hasScalarKey(r);var s=_.find(e.dataViewMappings,(function(e){return e.usage&&e.usage.forecast}));o.visitCategoricalCategories(r,{visitRole:function(e){for(var a=e.items,i=function(e,i){var r=a[e];if(r.hasScalarKey)return r.scalarKeyMinProperty=t.cartesianChartProps.scalarKey.scalarKeyMin,s&&o.visitCategoricalCategories(s.categorical.categories,{visitRole:function(a){a.items[e].scalarKeyMinProperty=t.cartesianChartProps.scalarKey.scalarKeyMin}}),"break"},r=0,n=_.size(a);r<n;r++){var l=i(r,n);if("break"===l)break}}})}if(t.CartesianChart.detectScalarMapping(a)||n){r.dataReductionAlgorithm={sample:{}};var l=a.categorical.values;l&&l.group&&(l.group.dataReductionAlgorithm={top:{}})}else{_.remove(e.dataViewMappings,(function(e){return e.usage&&e.usage.forecast}));var c=[a];t.CartesianChart.expandCategoryWindow(c);var u=t.ColumnChart.getSortableRoles(e);t.CartesianChart.applyHierarchicalSorts(c,u)}t.CartesianChart.requestFilteredToUniqueValue(e.dataViewMappings)}},i.canUseScalarKey=function(a){var i=e.DataViewObjects.getValue(a.metadata.objects,t.lineChartProps.categoryAxis.axisType);return i!==t.axisType.categorical},i.getSortableRoles=function(a){var r=a.dataViewMappings[0];if(!r||!r.categorical||!r.categorical.categories)return null;var o=r.categorical.categories,n=o.for.in,s=n.items,l=n.activeItems,c=["Category","Y"],u=[];if(!_.isEmpty(s)){var d=void 0;if(r.metadata&&(d=r.metadata.objects),i.hasScalarKey(o)&&t.CartesianChart.getIsScalar(d,t.lineChartProps.categoryAxis.axisType,e.ValueType.fromExtendedType(260)))return u;var p=void 0;if(_.isEmpty(l))p=s[0].type;else if(1===l.length){var h=_.find(s,(function(e){return e.queryName===l[0]}));p=h.type}else if(l.length>1)return c;return t.CartesianChart.getIsScalar(d,t.lineChartProps.categoryAxis.axisType,p)?u:c}return null},i.convertCategoryValue=function(e,t,a){return(t||a)&&e?e.getTime():e},i.converter=function(a,r,o,n,s,l,c,u,d,p){void 0===u&&(u=!0);var h=t.CartesianHelper.getCategoryAxisProperties(a.metadata);n=t.CartesianHelper.isScalar(n,h);var g,m=c?"Y2":"Y",y=a.categorical,f=e.data.createDataViewCategoricalReaderAdvanced(a,{staticSeriesRole:m}),v=f.data,b=f.columns,C=t.CartesianHelper.getScalarKeyinfo(y,n),S=C.category,x=C.useScalarKeys,w=C.scalarKeys;x&&(g={displayName:null,type:{dateTime:!0}});var P,D=t.lineChartProps.general.formatString,T=t.AxisHelper.getCategoryValueType(S.source,n),V=t.AxisHelper.isDateTime(T),L=S.values,N=[],M=[],A=[],R=v.hasCategories()?v.getCategoryCount():1,F=v.getSeriesCount(),O=y.values,I=!(!O||!O.source),H=t.dataLabelUtils.getDefaultLineChartLabelSettings(c);if(a.metadata&&a.metadata.objects){var j=a.metadata.objects;P=c?void 0:e.DataViewObjects.getFillColor(j,t.lineChartProps.dataPoint.defaultColor);var z=j.labels;t.NewDataLabelUtils.updateLabelSettingsFromLabelsObjectWithLabelDensity(z,H)}var k,G=new t.ColorHelper(o,t.lineChartProps.dataPoint.fill,P);O&&(k=O.grouped());var E;if(l&&(E=O&&O.length>0?_.times(O[0].values.length,(function(){return 0})):[]),v.hasValues(m))for(var W=0;W<F;W++){var B=b.getValueColumn(m,W),U=B.source,K=[],Y=k[W],q=t.SelectionIdBuilder.builder().withSeries(O,B).withMeasure(b.getValueMetadataColumn(m,W).queryName).createSelectionId(),X=q.getKey(),$=this.getColor(G,I,O,k,W,Y),Q=void 0;if(!I){var Z=k&&k.length>0&&k[0].values?k[0].values[W]:null,J=Z&&Z.source&&Z.source.objects?Z.source.objects.labels:null;J&&(Q=e.Prototype.inherit(H),t.NewDataLabelUtils.updateLabelSettingsFromLabelsObjectWithLabelDensity(J,Q))}for(var ee=Q?Q:H,te=B.highlights&&B.highlights.length>0,ae=-1,ie=0;ie<R;ie++){var re=L[ie],oe=x?w.values[ie].min:re,ne=t.AxisHelper.normalizeNonFiniteNumber(te?v.getHighlight(m,ie,W):v.getValue(m,ie,W));if(!(n&&(null==oe||null==ne)||V&&null!=re&&!(re instanceof Date)||(ae++,null==ne&&W>0))){var se=void 0,le=void 0,ce=void 0;if(u){if(se=[],S.source){ce=t.CategoryLevelUtils.getCategoryLevels(a.categorical.categories,ie,D);var ue=t.CategoryLevelUtils.concatenateCategoryLevels(ce);se.push({displayName:ue.displayName,value:ue.value})}I&&(S.source&&S.source===O.source||se.push({displayName:O.source.displayName,value:t.converterHelper.formatFromMetadataColumn(k[W].name,O.source,D)})),null!=ne&&se.push({displayName:U.displayName,value:t.converterHelper.formatFromMetadataColumn(ne,U,D,!1)}),le=[],t.TooltipBuilder.addTooltipMeasures(f,le,ie,I?W:void 0),le=_.isEmpty(le)?void 0:le}var de=new t.SelectionIdBuilder;v.hasCategories()&&(de=de.withCategory(b.getCategoryColumn("Category"),ie)),I&&(de=de.withSeries(O,b.getValueColumn(m,W)));var pe=de.withMeasure(b.getValueMetadataColumn(m,W).queryName).createSelectionId(),he=S&&!_.isEmpty(S.identity)&&S.identity[ie]?S.identity[ie].key:ie,ge={categoryValue:i.convertCategoryValue(oe,V,x),value:ne,categoryIndex:ie,seriesIndex:W,tooltipInfo:se,selected:!1,identity:q,specificIdentity:pe,key:JSON.stringify({series:X,category:he}),labelFill:ee.labelColor,labelFormatString:U.format,labelSettings:ee,additionalTooltipItems:le,hierarchyCategoryLevels:ce};if(l&&(E[ie]+=ne,ge.stackedValue=E[ie]),S.objects&&S.objects[ie]&&(ge.pointColor=e.DataViewObjects.getFillColor(S.objects[ie],t.lineChartProps.dataPoint.fill)),K[ae]=ge,N[ie]||(N[ie]=ge),!M[ie]&&v.hasCategories()){var me=new t.SelectionIdBuilder;M[ie]=me.withCategory(b.getCategoryColumn("Category"),ie).withMeasure(b.getValueMetadataColumn(m,W).queryName).createSelectionId()}}}s&&s.applySelectionStateToData(_.filter(K,(function(e){return null!=e}))),K.length>0&&A.push({displayName:f.data.hasSeries()?f.data.getSeriesName(W):f.data.getValueDisplayName(m),dynamicDisplayName:I?t.converterHelper.formatFromMetadataColumn(v.getSeriesName(W),b.getSeriesMetadataColumn(),D):void 0,key:X,lineIndex:W,color:$,xCol:x?g:S.source,yCol:b.getValueMetadataColumn(m,W),data:K,identity:q,selected:!1,labelSettings:Q,type:U.type})}var ye;if(d&&n&&!l&&!c){ye=t.ForecastHelper.readDataView(d,a,o);for(var fe=_.last(N),ve=0,be=ye;ve<be.length;ve++)for(var Ce=be[ve],ie=fe.categoryIndex,Se=0,xe=Ce.points;Se<xe.length;Se++){var we=xe[Se];we.point.x=i.convertCategoryValue(we.point.x,V,x),we.upperBound.x=i.convertCategoryValue(we.upperBound.x,V,x),we.lowerBound.x=i.convertCategoryValue(we.lowerBound.x,V,x);var Pe=we.point.x;Pe<=fe.categoryValue||(ie++,N[ie]||(N[ie]={categoryIndex:ie,categoryValue:Pe,value:we.point.y,seriesIndex:0}),M[ie]||(M[ie]=null))}}h=t.CartesianHelper.getCategoryAxisProperties(a.metadata);var De=t.CartesianHelper.getPreferredCategoryWidth(h),Te=b.getAllValueMetadataColumnsForRole(m);s&&s.applySelectionStateToData(A);var Ve=t.CartesianHelper.getLineStyleProperties(a.metadata);return{series:A,forecastLines:ye,isScalar:n,dataLabelsSettings:H,lineStyleProperties:Ve,hasDynamicSeries:I,categoryMetadata:S.source,valuesMetadata:Te,preferredCategoryWidth:De,scalarMetadata:g,scalarKeyCount:x?w.values.length:void 0,categories:L,categoryData:N,seriesDisplayName:I&&v.hasValues(m)?t.converterHelper.formatFromMetadataColumn(v.getSeriesDisplayName(),b.getSeriesMetadataColumn(),D):void 0,hasValues:v.hasValues(m),categoryIdentities:M}},i.getInteractiveLineChartDomElement=function(e){return e.children("svg").get(0)},i.getColor=function(e,t,a,i,r,o){var n;return t?i&&i[r]&&(n=i[r].objects):a[r]&&(n=a[r].source.objects),t&&o?e.getColorForSeriesValue(n,a.identityFields,o.name):e.getColorForMeasure(n,a[r].source.queryName)},i.createStackedValueDomain=function(e){if(0===e.length)return null;var t=d3.min(e,(function(e){return d3.min(e.data,(function(e){return e&&e.stackedValue}))})),a=d3.max(e,(function(e){return d3.max(e.data,(function(e){return e&&e.stackedValue}))}));return[t,a]},i.prototype.init=function(e){var a=this;this.options=e,this.element=e.element,this.cartesainSVG=e.svg,this.host=e.host,this.currentViewport=e.viewport,this.style=e.style,this.isInteractiveChart=e.interactivity&&e.interactivity.isInteractiveLegend,this.cartesianVisualHost=e.cartesianHost,this.scaleDetector=new t.SVGScaleDetector(this.cartesainSVG),this.tooltipService=e.services.tooltips;var r=e.chartType;this.isComboChart=10===r||13===r||14===r;var o=e.svg;o.classed(i.ClassName,!0);var n=this.mainGraphicsSVG=o.append("svg").classed("lineChartSVG",!0);this.isComboChart||this.isInteractiveChart||(this.overlayRect=n.append(i.RectOverlayName).classed("tooltip-overlay",!0).style("opacity",t.SVGUtil.AlmostZero)),this.mainGraphicsContext=n.append("g").classed(i.MainGraphicsContextClassName,!0),this.hoverLineContext=o.append("g").classed("hover-line",!0),this.hoverLineContext.append(i.LineElementName).attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",0);var s=this.hoverLine=this.hoverLineContext.select(i.LineElementName);if(this.isInteractiveChart&&s.classed("interactive",!0),s.style("opacity",t.SVGUtil.AlmostZero),this.selectionCircles=[],this.xAxisProperties={axis:null,scale:null,axisType:null,formatter:null,graphicsContext:null,values:null,axisLabel:null,isCategoryAxis:!0},this.isInteractiveChart){var l=i.getInteractiveLineChartDomElement(this.element),c=function(){a.lastDragMoveXPosition=d3.mouse(l)[0],a.deferDragMoveOperation()},u=d3.behavior.drag().origin(Object).on("drag",c);d3.select(l).style("touch-action","none").call(u).on("click",c)}jsCommon.BrowserUtils.isInternetExplorerOrEdge()?this.pathXAdjustment=5:jsCommon.BrowserUtils.isFirefox()&&(this.pathXAdjustment=2*i.interactivityStrokeWidth)},i.prototype.setData=function(e){if(this.data={series:[],dataLabelsSettings:t.dataLabelUtils.getDefaultLineChartLabelSettings(this.isComboChart),lineStyleProperties:{strokeWidth:t.defaultLineStrokeWidth,strokeLineJoin:t.strokeLineJoin.defaultValue},hasDynamicSeries:!1,categories:[],categoryMetadata:void 0,valuesMetadata:[],categoryData:[],categoryIdentities:[]},e.length>0){var r=e[0],o=_.find(e,(function(e){return t.ForecastHelper.isDataViewForForecast(e)}));if(r&&r.categorical){this.dataView=r;var n=r.categorical,s=n.categories,l={text:!0},c=void 0;s&&!_.isEmpty(s)&&(s[0].source&&s[0].source.type&&(l=s[0].source.type),c=t.CartesianChart.getScalarKeys(s[0]));var u=t.CartesianChart.hasCategoryHierarchy(r),d=t.CartesianChart.getIsScalar(r.metadata?r.metadata.objects:null,t.lineChartProps.categoryAxis.axisType,l,c,u),p=i.converter(r,t.valueFormatter.format(null),this.style.colorPalette.dataColors,d,this.interactivityService,a.hasFlag(this.lineType,16),this.isComboChart,this.tooltipsEnabled,o,this.axisControlImprovements);this.data=p;var h=this.previousCategoryIds,g=p.categoryIdentities;if(null!=h&&!(h.length>t.AnimatorCommon.MaxDataPointsToAnimate||g.length>t.AnimatorCommon.MaxDataPointsToAnimate)){this.suppressAnimation=!1;for(var m=0,y=Math.min(h.length,g.length);m<y;m++)if(!t.SelectionId.isEqual(h[m],g[m])){this.suppressAnimation=!0;break}}this.previousCategoryIds=g}}},i.prototype.calculateLegend=function(){return this.createLegendDataPoints(0)},i.prototype.hasLegend=function(){return this.data&&(this.data.hasDynamicSeries||this.data.series&&this.data.series.length>1)},i.prototype.setFilteredData=function(t,a){var r=a-t,o=this.clippedData=e.Prototype.inherit(this.data);return o.series=i.sliceSeries(o.series,r,t),o.categories=o.categories.slice(t,a),o},i.prototype.ensureDomainsIncludeForecast=function(e,t,a){if(_.isEmpty(e))return{x:t,y:a};for(var i=[t.min,t.max],r=[a.min,a.max],o=0,n=e;o<n.length;o++){var s=n[o];_.isEmpty(s.points)||(i.push.apply(i,_.map(s.points,(function(e){return e.point.x}))),r.push.apply(r,_.map(s.points,(function(e){return e.point.y}))),i.push.apply(i,_.map(s.points,(function(e){return e.upperBound.x}))),r.push.apply(r,_.map(s.points,(function(e){return e.upperBound.y}))),i.push.apply(i,_.map(s.points,(function(e){return e.lowerBound.x}))),r.push.apply(r,_.map(s.points,(function(e){return e.lowerBound.y}))))}var l={min:d3.min(i),max:d3.max(i)},c={min:d3.min(r),max:d3.max(r)};return{x:l,y:c}},i.prototype.calculateAxesProperties=function(r){var o=this,n=this.data,s=r.viewport,l=r.margin;this.currentViewport=s,this.margin=l;var c=n.series&&n.series.length>0?n.series[0].data.length:0,u=t.CartesianChart.MinOrdinalRectThickness,d=this.data.isScalar,p=r.trimOrdinalDataOnOverflow,h=this.getPreferredPlotArea(d,c,u),g=n.preferredCategoryWidth;if(this.clippedData=void 0,n&&!d&&!this.isScrollable&&p){var m=this.getCategoryCount(c),y=Math.min(c,m);y!==c&&(n=this.clippedData=e.Prototype.inherit(n),this.clippedData.series=i.sliceSeries(n.series,y))}var f,v;n.series&&n.series.length>0&&(f=n.series[0].xCol,v=n.series[0].yCol);var b=this.ensureDomainsIncludeForecast(n.forecastLines,r.ensureXDomain,r.ensureYDomain),C=b.x,S=b.y,x=a.hasFlag(this.lineType,16)?i.createStackedValueDomain(n.series):t.AxisHelper.createValueDomain(n.series,!1),w=r.valueAxisScaleType===t.axisScale.log&&!t.AxisHelper.isLogScalePossible(x),P=t.AxisHelper.combineDomain(r.forcedYDomain,x,S);this.yAxisProperties=t.AxisHelper.createAxis({pixelSpan:h.height,dataDomain:P,zeroScalarDomain:[-1,1],metaDataColumn:this.data.valuesMetadata,formatString:t.valueFormatter.getFormatString(v,t.lineChartProps.general.formatString),outerPadding:0,isScalar:!0,isVertical:!0,forcedTickCount:r.forcedTickCount,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,scaleType:r.valueAxisScaleType,axisDisplayUnits:r.valueAxisDisplayUnits,axisPrecision:r.valueAxisPrecision,shouldClamp:!1,outerPaddingRatio:0,margin:l});var D=n.scalarMetadata?n.scalarMetadata:n.categoryMetadata,T=t.AxisHelper.getCategoryValueType(D),V=t.AxisHelper.createDomain(n.series,T,this.data.isScalar,r.forcedXDomain,C),L=r.categoryAxisScaleType===t.axisScale.log&&!t.AxisHelper.isLogScalePossible(V),_=t.CartesianChart.getCategoryWidth(n.series,c,this.getAvailableWidth(),V,d,p),N=t.CartesianChart.getCustomizedCategoryWidthInfo(_,c,this.getAvailableWidth(),d,g);return this.xAxisProperties=t.AxisHelper.createAxis({pixelSpan:h.width,dataDomain:V,zeroScalarDomain:[-1,1],metaDataColumn:f,formatString:t.valueFormatter.getFormatString(f,t.lineChartProps.general.formatString),outerPadding:this.data.isScalar?i.ScalarOuterPadding:0,isScalar:this.data.isScalar,isVertical:!1,forcedTickCount:r.forcedTickCount,maxTickCount:n.scalarKeyCount,useTickIntervalForDisplayUnits:!0,getValueFn:function(e,a){return t.CartesianHelper.lookupXValue(o.data,e,a,o.data.isScalar)},categoryThickness:N.categoryWidth,isCategoryAxis:!0,scaleType:r.categoryAxisScaleType,axisDisplayUnits:r.categoryAxisDisplayUnits,axisPrecision:r.categoryAxisPrecision,outerPaddingRatio:N.outerPaddingRatio,margin:l,allowSingleScalarTick:this.data.isScalar}),this.xAxisProperties.hasDisallowedZeroInDomain=L,this.yAxisProperties.hasDisallowedZeroInDomain=w,
[this.xAxisProperties,this.yAxisProperties]},i.prototype.enumerateObjectInstances=function(e,a){switch(a.objectName){case"dataPoint":this.enumerateDataPoints(e);break;case"labels":this.enumerateDataLabels(e);break;case t.ForecastHelper.forecastObjectName:this.supportsForecast()&&t.ForecastHelper.enumerateObjectInstances(e,this.data.forecastLines)}},i.prototype.enumerateDataPoints=function(e){var a=this.data;if(a&&a.series&&0!==a.series.length)for(var i=t.lineChartProps.general.formatString,r=a.series,o=r.length,n=0;n<o;n++){var s=t.ColorHelper.normalizeSelector(r[n].identity.getSelector()),l=t.converterHelper.getFormattedLegendLabel(r[n].yCol,this.dataView.categorical.values,i);e.pushInstance({objectName:"dataPoint",displayName:l,selector:s,properties:{fill:{solid:{color:a.defaultSeriesColor||r[n].color}}}})}},i.prototype.enumerateDataLabels=function(e){var a=this.data,i=this.data.dataLabelsSettings,r=a.series.length,o=this.showLabelPerSeries();if(t.dataLabelUtils.enumerateDataLabels(this.getLabelSettingsOptions(e,i,null,o)),0!==r&&o&&i.showLabelPerSeries)for(var n=0;n<r;n++){var s=a.series[n],l=s.labelSettings?s.labelSettings:this.data.dataLabelsSettings;e.pushContainer({displayName:s.displayName}),t.dataLabelUtils.enumerateDataLabels(this.getLabelSettingsOptions(e,l,s)),e.popContainer()}},i.prototype.supportsTrendLine=function(){var e=!!this.data&&this.data.isScalar;return!a.hasFlag(this.lineType,16)&&e&&this.data.hasValues},i.prototype.supportsForecast=function(){var e=!!this.data&&this.data.isScalar;return!a.hasFlag(this.lineType,16)&&e&&this.data.hasValues&&1===this.data.series.length&&!this.hasLegend()},i.prototype.isStacked=function(){return a.hasFlag(this.lineType,16)},i.prototype.shouldSuppressAnimation=function(){return!!this.suppressAnimation},i.prototype.showLabelPerSeries=function(){var e=this.data;return!e.hasDynamicSeries&&(e.series.length>1||!e.categoryMetadata)},i.prototype.getLabelSettingsOptions=function(e,t,a,i){return{enumeration:e,dataLabelsSettings:t,show:!0,displayUnits:!0,precision:!0,selector:a&&a.identity?a.identity.getSelector():null,showAll:i,fontSize:!0,labelDensity:this.data.isScalar}},i.prototype.overrideXScale=function(e){this.xAxisProperties=e},i.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},i.prototype.render=function(e){var a=t.AnimatorCommon.GetAnimationDuration(this.animator,e);this.suppressAnimation&&(a=0),this.previousCategoryCount=this.data.categoryData.length;var r,o=this.buildViewModel(a),n={hoverLine:this.hoverLine,hoverLineContext:this.hoverLineContext,mainGraphicsContext:this.mainGraphicsContext,mainGraphicsSVG:this.mainGraphicsSVG,overlayRect:this.overlayRect};if(this.isInteractiveChart){var s=$.extend(n,{dragHandle:this.dragHandle,selectionCircles:this.selectionCircles});r=i.renderOld(o,s,this.interactivityService,this,this,this.isInteractiveChart,e),s.dragHandle&&(this.dragHandle=s.dragHandle)}else r=i.renderNew(o,n,this.interactivityService,this,this.tooltipService,this);return t.ForecastHelper.render(this.data.forecastLines,n.mainGraphicsSVG,o.xAxisProperties.scale,o.yAxisProperties.scale,o.currentViewport,o.animationDuration),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options),r},i.prototype.buildViewModel=function(e){return{currentViewport:this.currentViewport,data:this.clippedData?this.clippedData:this.data,animationDuration:e,horizontalOffset:this.getXOfFirstCategory(),isComboChart:this.isComboChart,lineClassAndSelector:this.lineClassAndSelector,lineType:this.lineType,margin:this.margin,scale:this.scaleDetector.getScale(),tooltipsEnabled:this.tooltipsEnabled,xAxisProperties:this.xAxisProperties,yAxisProperties:this.yAxisProperties}},i.renderNew=function(e,r,o,n,s,l){var c=e.data;if(c){var u=e.animationDuration,d=c.categories.length*c.series.length;d>t.AnimatorCommon.MaxDataPointsToAnimate&&(u=0);var p,h,g=a.hasFlag(e.lineType,16),m=e.margin,y=e.currentViewport,f=y.height-(m.top+m.bottom),v=y.width-(m.left+m.right),b=e.xAxisProperties.scale,C=e.yAxisProperties.scale,S=e.horizontalOffset,x=c.isScalar,w=o&&o.hasSelection(),P=a.hasFlag(e.lineType,2)||a.hasFlag(e.lineType,16),D=function(e){return b(i.getXValue(e,x))+S};g?(p=function(e){return C(e.stackedValue-e.value)},h=function(e){return C(e.stackedValue)}):(p=C(0),h=function(e){return C(e.value)});var T;P&&(T=d3.svg.area().x(D).y0(p).y1(h).defined((function(e){return e&&null!==e.value})));var V=d3.svg.line().x(D).y(h).defined((function(e){return e&&null!==e.value}));a.hasFlag(e.lineType,4)&&(V.interpolate("basis"),T&&T.interpolate("basis")),r.mainGraphicsSVG.attr("height",f).attr("width",v);var L=void 0;P&&(L=r.mainGraphicsContext.selectAll(i.CategoryAreaSelector.selector).data(c.series,(function(e){return e.identity.getKey()})),L.enter().append(i.PathElementName).classed(i.CategoryAreaSelector.class,!0),L.style("fill",(function(e){return e.color})).style("fill-opacity",(function(e){return w&&!e.selected?i.DimmedAreaFillOpacity:i.AreaFillOpacity})).transition().ease("linear").duration(u).attr("d",(function(e){return T(e.data)})),L.exit().remove());var N=r.mainGraphicsContext.selectAll(e.lineClassAndSelector.selector).data(c.series,(function(e){return e.identity.getKey()}));N.enter().append(i.PathElementName).classed(e.lineClassAndSelector.class,!0),N.style("stroke",(function(e){return e.color})).style("stroke-opacity",(function(e){return t.ColumnUtil.getFillOpacity(e.selected,!1,w,!1)})).style("stroke-width",c.lineStyleProperties.strokeWidth).style("stroke-linejoin",c.lineStyleProperties.strokeLineJoin).transition().ease("linear").duration(u).attr("d",(function(e){return V(e.data)})),N.exit().remove();var M=r.mainGraphicsContext.selectAll(".interactivity-line").data(c.series,(function(e){return e.identity.getKey()}));M.enter().append(i.PathElementName).classed("interactivity-line",!0).style("stroke-width",i.interactivityStrokeWidth).style("stroke-linejoin",t.strokeLineJoin.round),M.attr("d",(function(e){if(!x){var t=i.getFirstPathPointFromSeriesData(e);if(t){var a=_.find(e.data,(function(e){return e&&null!=e.value}));if(a&&a.categoryIndex!==t.categoryIndex){var r=e.data.slice(t.categoryIndex-a.categoryIndex);return V(r)}}}return V(e.data)})),M.exit().remove();var A=r.mainGraphicsContext.selectAll(i.CategorySelector.selector).data(c.series,(function(e){return e.identity.getKey()}));A.enter().append("g").classed(i.CategorySelector.class,!0),A.exit().remove();var R=A.selectAll(i.CategoryValuePoint.selector).data((function(e){return e.data.filter((function(t,a){return i.shouldDrawCircle(e,a)}))}),(function(e){return e.key}));R.enter().append(i.CircleElementName).classed(i.CategoryValuePoint.class,!0),R.style("fill",(function(){var e=d3.select(this.parentNode).datum();return e.color})).style("fill-opacity",(function(){var e=d3.select(this.parentNode).datum();return t.ColumnUtil.getFillOpacity(e.selected,!1,w,!1)})).transition().duration(u).attr({cx:function(e,t){return b(i.getXValue(e,x))+S},cy:function(e,t){return C(g?e.stackedValue:e.value)},r:c.lineStyleProperties.strokeWidth/2+i.CircleRadiusExtra}),R.exit().remove();var F;!e.isComboChart&&x&&(F=A.selectAll(i.CategoryPointSelector.selector).data((function(e){return _.filter(e.data,(function(e){return e&&null!=e.pointColor}))}),(function(e){return e.key})),F.enter().append(i.CircleElementName).classed(i.CategoryPointSelector.class,!0),F.style("fill",(function(e){return e.pointColor})).transition().duration(u).attr({cx:function(e){return b(i.getXValue(e,x))},cy:function(e){return C(g?e.stackedValue:e.value)},r:c.lineStyleProperties.strokeWidth/2+i.PointRadiusExtra}),F.exit().remove());var O;if(c.dataLabelsSettings.show&&(O=i.createLabelDataPoints(e)),e.tooltipsEnabled)if(e.isComboChart){var I=function(e){var t=e.elementCoordinates[0];return n.getTooltipInfoForCombo(e,t)};M&&s.addTooltip(M,I,(function(e){return e.data&&e.data.identity}),!0),s.addTooltip(R,(function(e){return e.data&&e.data.tooltipInfo}),(function(e){return e.data&&e.data.identity}),!0),F&&s.addTooltip(F,(function(e){return e.data&&e.data.tooltipInfo}),(function(e){return e.data&&e.data.identity}),!0)}else{r.overlayRect.attr({x:0,width:v,height:f});var I=function(e){var t=e.elementCoordinates[0],a=n.getCategoryIndexFromTooltipEvent(e,t),r=l.getHoverLineDataForCategory(a);return i.getSeriesTooltipInfo(r)};s.addTooltip(r.mainGraphicsSVG,I,(function(e){return i.getIdentityForTooltipEvent(e.data)}),!0),r.mainGraphicsSVG.on("mouseout",(function(){return l.clearHoverLine()})),r.mainGraphicsSVG.on("touchmove",(function(){return l.clearHoverLine()}))}var H=void 0,j=void 0;if(o){H=c.series.slice();for(var z=0,k=c.series.length;z<k;z++)for(var G=0,E=c.series[z].data;G<E.length;G++){var W=E[G];null!=W&&H.push(W)}j={lines:N,interactivityLines:M,dots:R,areas:L,tooltipOverlay:r.overlayRect,getCategoryIndex:function(e,t){return n.getCategoryIndexFromSeriesAndPointX(e,t)},categoryIdentities:c.categoryIdentities}}return{dataPoints:H,behaviorOptions:j,labelDataPoints:[],labelsAreNumeric:!0,labelDataPointGroups:O,animateLabels:!1}}},i.renderOld=function(e,r,o,n,s,l,c){var u=e.data;if(u){var d,p=e.margin,h=e.currentViewport,g=h.height-(p.top+p.bottom),m=e.xAxisProperties.scale,y=e.yAxisProperties.scale,f=u.isScalar,v=h.width-(p.left+p.right),b=h.height-(p.top+p.bottom),C=o&&o.hasSelection();a.hasFlag(e.lineType,2)&&(d=d3.svg.area().x((function(e){return m(i.getXValue(e,f))})).y0(g).y1((function(e){return y(e.value)})).defined((function(e){return null!==e.value})));var S=d3.svg.line().x((function(e){return m(i.getXValue(e,f))})).y((function(e){return y(e.value)})).defined((function(e){return!!e&&null!==e.value}));a.hasFlag(e.lineType,4)&&(S.interpolate("basis"),d&&d.interpolate("basis"));var x=e.horizontalOffset;if(r.mainGraphicsContext.attr("transform",t.SVGUtil.translate(x,0)),r.mainGraphicsSVG.attr("height",b).attr("width",v),r.hoverLineContext.attr("transform",t.SVGUtil.translate(x,0)),a.hasFlag(e.lineType,2)){var w=r.mainGraphicsContext.selectAll(i.CategoryAreaSelector.selector).data(u.series,(function(e){return e.identity.getKey()})),P=w.enter().append("g").classed(i.CategoryAreaSelector.class,!0);P.append(i.PathElementName);var D=r.mainGraphicsContext.selectAll(i.CategoryAreaSelector.selector);D.select(i.PathElementName).transition().ease("linear").duration(e.animationDuration).attr("d",(function(e){return d(e.data)})).style("fill",(function(e){return e.color})).style("fill-opacity",(function(e){return C&&!e.selected?i.DimmedAreaFillOpacity:i.AreaFillOpacity})),w.exit().remove()}var T=r.mainGraphicsContext.selectAll(i.CategorySelector.selector).data(u.series,(function(e){return e.identity.getKey()})),V=T.enter().append("g").classed(i.CategorySelector.class,!0);if(V.append(i.PathElementName),V.selectAll(i.CategoryValuePoint.selector).data((function(e){return e.data})).enter().append(i.CircleElementName).classed(i.CategoryValuePoint.class,!0),T.exit().remove(),l&&!r.dragHandle){var L=b;r.dragHandle=r.hoverLineContext.append("circle").attr("cx",0).attr("cy",L).attr("r","6px").classed("drag-handle",!0)}for(var _=T.data().length;r.selectionCircles.length<_;){var N=r.hoverLineContext.append(i.CircleElementName).classed(i.CircleClassName,!0).attr("r",u.lineStyleProperties.strokeWidth/2+i.CircleRadiusExtra).style("opacity",0);r.selectionCircles.push(N)}for(;r.selectionCircles.length>_;)r.selectionCircles.pop().remove();var M=r.mainGraphicsContext.selectAll(i.CategorySelector.selector),A=M.select(i.PathElementName).classed(e.lineClassAndSelector.class,!0).style("stroke",(function(e){return e.color})).style("stroke-opacity",(function(e){return t.ColumnUtil.getFillOpacity(e.selected,!1,C,!1)})).style("stroke-width",u.lineStyleProperties.strokeWidth).style("stroke-linejoin",u.lineStyleProperties.strokeLineJoin);A.transition().ease("linear").duration(e.animationDuration).attr("d",(function(e){return S(e.data)}));var R=this,F=M.selectAll(i.CategoryValuePoint.selector),O=F.style("fill",(function(){var e=d3.select(this.parentNode).datum();return e.color})).style("fill-opacity",(function(){var e=d3.select(this.parentNode).datum();return t.ColumnUtil.getFillOpacity(e.selected,!1,C,!1)})).transition().duration(e.animationDuration).attr({cx:function(e,t){var a=d3.select(this.parentNode).datum(),i=R.shouldDrawCircle(a,t);return i?m(R.getXValue(e,f)):0},cy:function(e,t){var a=d3.select(this.parentNode).datum(),i=R.shouldDrawCircle(a,t);return i?y(e.value):0},r:function(e,t){var a=d3.select(this.parentNode).datum(),r=R.shouldDrawCircle(a,t);return r?u.lineStyleProperties.strokeWidth/2+i.CircleRadiusExtra:0}});if(l&&i.hasDataPoint(u.series)){var I=F.size(),H=0;O.each("end",(function(){H++,H===I&&s.selectColumn(t.CartesianHelper.findMaxCategoryIndex(u.series),!0)}))}var j=null;if(u.dataLabelsSettings.show){j=[];for(var z=0,k=u.series.length;z<k;z++)Array.prototype.push.apply(j,u.series[z].data)}T.exit().remove();var G;return u.dataLabelsSettings.show&&(G=i.createLabelDataPoints(e)),null==j?null:{dataPoints:j,behaviorOptions:null,labelDataPoints:null,labelsAreNumeric:null,labelDataPointGroups:G,animateLabels:!c}}},i.getFirstPathPointFromSeriesData=function(e){var t=_.find(e.data,(function(e,t,a){var i=a[t+1];return null!=e&&null!=e.value&&null!=i&&null!=i.value}));return t},i.getSeriesTooltipInfo=function(e){if(!e)return null;var t=e.dataPoints;if(_.isEmpty(t))return null;var a="#000000",i="0",r=10,o=!_.isEmpty(t)&&t[0].seriesDisplayName,n=[],s=0;if(_.any(t,(function(e){return!_.isEmpty(e.additionalTooltipItems)})))for(var l=0,c=t;l<c.length;l++){var u=c[l];if(s>=r)break;if(null!=u.value&&(o&&(n.push({header:u.category,displayName:u.seriesDisplayName,value:u.seriesName}),s++),n.push({header:u.category,color:u.color,displayName:u.measureDisplayName,value:u.measure}),s++,!_.isEmpty(u.additionalTooltipItems)))for(var d=0,p=u.additionalTooltipItems;d<p.length;d++){var h=p[d];if(s>=r)break;n.push({header:u.category,color:a,displayName:h.displayName,value:h.value,opacity:i}),s++}}else for(var g=0,m=t;g<m.length;g++){var u=m[g];if(s>=r)break;null!=u.value&&(n.push({header:u.category,color:u.color,displayName:u.seriesName||u.measureDisplayName,value:u.measure}),s++)}if(!_.isEmpty(e.additionalTooltipItems))for(var y=0,f=e.additionalTooltipItems;y<f.length;y++){var h=f[y];if(s>=r)break;n.push({header:t[0].category,color:a,displayName:h.displayName,value:h.value,opacity:i}),s++}return 0===n.length?null:n},i.prototype.getTooltipInfoForCombo=function(e,t){var a,i=this.getCategoryIndexFromTooltipEvent(e,t),r=e.data;if(r&&r.data&&r.data.length&&(a=_.find(r.data,(function(e){return e&&e.categoryIndex===i}))),a)return a.tooltipInfo},i.isDataPointData=function(e){return e&&null!=e.categoryIndex},i.isForecastPoint=function(e){return e&&null!=e.points},i.getIdentityForTooltipEvent=function(e){if(e)return i.isForecastPoint(e)?void 0:e.identity},i.prototype.getCategoryIndexFromTooltipEvent=function(e,t){var a=e.data;if(!i.isForecastPoint(a))return i.isDataPointData(a)?a.categoryIndex:this.getCategoryIndexFromSeriesAndPointX(a,t)},i.prototype.getCategoryIndexFromSeriesAndPointX=function(e,t){var a=0;if(e&&!_.isEmpty(e.data)&&this.xAxisProperties){t=this.adjustPathXCoordinate(t);var r=i.getFirstPathPointFromSeriesData(e);a=this.xAxisProperties.scale(i.getXValue(r,this.data.isScalar))+this.getXOfFirstCategory()}return this.findIndex(t,a)},i.prototype.getVisualCategoryAxisIsScalar=function(){return!!this.data&&this.data.isScalar},i.prototype.getSupportedCategoryAxisType=function(){var e=this.dataView.categorical?this.dataView.categorical.categories:void 0,a={text:!0};if(!_.isEmpty(e))return t.axisType.both;var i=t.AxisHelper.isOrdinal(a);return i?t.axisType.categorical:t.axisType.both},i.prototype.getPreferredPlotArea=function(e,a,i,r){return void 0===r&&(r=0),t.CartesianChart.getPreferredPlotArea(a,i,this.currentViewport,this.isScrollable,e,this.margin,r)},i.prototype.getCategoryCount=function(e){var a=this.getAvailableWidth(),i=t.CartesianChart.MinOrdinalRectThickness;return Math.min(Math.round((a-i*t.CartesianChart.DefaultOuterPaddingRatio*2)/i),e)},i.prototype.getAvailableWidth=function(){return this.currentViewport.width-(this.margin.left+this.margin.right)},i.prototype.getAvailableHeight=function(){return this.currentViewport.height-(this.margin.top+this.margin.bottom)},i.sliceSeries=function(t,a,i){void 0===i&&(i=0);var r=[];if(t&&t.length>0)for(var o=0,n=t.length;o<n;o++)r[o]=e.Prototype.inherit(t[o]),r[o].data=t[o].data.slice(i,i+a);return r},i.prototype.getXOfFirstCategory=function(){if(!this.data.isScalar){var e=this.xAxisProperties.scale;if(e.rangeBand)return e.rangeBand()/2}return 0},i.hasDataPoint=function(e){if(0===e.length)return!1;for(var t=0,a=e.length;t<a;t++)if(e[t].data.length>0)return!0;return!1},i.getXValue=function(e,t){return t?e.categoryValue:e.categoryIndex},i.shouldDrawCircle=function(e,t){var a=e.data[t];if(null==a||null===a.value)return!1;var i=e.data[t-1],r=null==i||null===i.value,o=e.data[t+1],n=null==o||null===o.value;return r&&n},i.prototype.getHoverLineDataForCategory=function(e,t){void 0===t&&(t=!1);var a=this.getChartX(e)+this.getXOfFirstCategory(),r=this.createTooltipData(e);if(r){var o=r.dataPoints;return r.dataPoints.length>0&&this.setHoverLineForTooltip(a),this.setDotsForTooltip(a,o,this.data.lineStyleProperties.strokeWidth/2+i.TooltipCircleRadiusExtra),r}},i.prototype.setHoverLineForTooltip=function(e){e=e||0,this.hoverLine.attr("x1",e).attr("x2",e).attr("y1",0).attr("y2",this.getAvailableHeight()).style("opacity",1)},i.prototype.clearHoverLine=function(){this.hoverLine.style("opacity",t.SVGUtil.AlmostZero),this.hoverLineContext.selectAll(i.HoverLineCircleDot.selector).remove()},i.prototype.setDotsForTooltip=function(e,t,r){var o=this;void 0===r&&(r=3);var n=a.hasFlag(this.lineType,16),s=n?function(e){return o.yAxisProperties.scale(e.stackedValue)}:function(e){return o.yAxisProperties.scale(e.value)},l=this.hoverLineContext.selectAll(i.HoverLineCircleDot.selector).data(t);l.enter().append(i.CircleElementName).classed(i.HoverLineCircleDot.class,!0),l.filter((function(e){return e.value})).attr("fill",(function(e){return e.color})).attr("r",r).attr("cx",e).attr("cy",s),l.exit().remove()},i.prototype.selectColumn=function(e,t){if(void 0===t&&(t=!1),t||this.lastInteractiveSelectedColumnIndex!==e){this.lastInteractiveSelectedColumnIndex=e;var a=this.getChartX(e);this.setHoverLine(a,e);var i=this.createLegendDataPoints(e);i&&this.options.cartesianHost.updateLegend(i)}},i.prototype.setHoverLine=function(e,t){this.hoverLine.attr("x1",e).attr("x2",e).attr("y1",0).attr("y2",this.getAvailableHeight()).style("opacity",1);var a=this;this.mainGraphicsContext.selectAll(i.CategorySelector.selector).selectAll(i.PathElementName).each((function(i){var r=this,o=i.color,n=a.selectionCircles[i.lineIndex];n&&n.attr({cx:e,cy:function(){var t=d3.select(r).node(),i=a.getPosition(e,t);return i.y}}).style({opacity:function(){return _.some(i.data,(function(e){return!!e&&e.categoryIndex===t}))?1:0},fill:o}),a.dragHandle&&a.dragHandle.attr("cx",e)}))},i.prototype.getChartX=function(t){var a=0;this.data.isScalar?t>=0&&t<this.data.categoryData.length&&(a=Math.max(0,this.xAxisProperties.scale(this.data.categoryData[t].categoryValue))):a=Math.max(0,this.xAxisProperties.scale(t));var i=e.visuals.AxisHelper.extent(this.xAxisProperties.scale)[1];return a=Math.min(a,i),isNaN(a)?0:a},i.prototype.findIndex=function(a,i){var r=this.scaleDetector.getScale().x;e.Double.equalWithPrecision(r,1,1e-5)||(a/=r),i&&(a+=i);var o=e.visuals.AxisHelper.invertScale(this.xAxisProperties.scale,a);return this.data.isScalar&&(o=t.AxisHelper.findClosestXAxisIndex(o,this.data.categoryData)),o},i.prototype.getPosition=function(e,a){for(var i,r,o=a.getTotalLength(),n=0,s=o;;){if(r=n+s>>1,i=a.getPointAtLength(r),t.SVGUtil.ensureValidSVGPoint(i),(r===s||r===n)&&i.x!==e)break;if(i.x>e)s=r;else{if(!(i.x<e))break;n=r}}return i},i.prototype.createTooltipData=function(e){var a=this.data;if(a&&0!==a.series.length&&a.categories&&a.categoryData){var i,r=[],o=a.categoryData[e];this.data.isScalar?o&&(i=t.AxisHelper.isDateTime(this.xAxisProperties.axisType)&&!a.scalarMetadata?t.CartesianHelper.lookupXValue(this.data,o.categoryValue,this.xAxisProperties.axisType,this.data.isScalar):a.categories[e]):i=t.CartesianHelper.lookupXValue(this.data,e,this.xAxisProperties.axisType,this.data.isScalar);for(var n,s=t.lineChartProps.general.formatString,l=0,c=a.series;l<c.length;l++){var u=c[l],d=u.data,p=void 0;this.data.isScalar?o&&(p=d.filter((function(e){return e.categoryValue===o.categoryValue}))[0]):p=d[e];var h=p&&p.value;if(null!=h){var g=t.CategoryLevelUtils.concatenateCategoryLevels(o.hierarchyCategoryLevels),m={color:u.color,category:g.value,measureDisplayName:u.displayName,measure:t.valueFormatter.format(h,t.valueFormatter.getFormatString(u.yCol,s)),value:h,stackedValue:p.stackedValue};a.hasDynamicSeries?(m.seriesDisplayName=a.seriesDisplayName,m.seriesName=u.dynamicDisplayName,m.additionalTooltipItems=p.additionalTooltipItems):n||(n=p.additionalTooltipItems),r.push(m)}}if(!_.isEmpty(a.forecastLines))for(var u=_.first(a.series),y=0,f=a.forecastLines;y<f.length;y++){var v=f[y],b=_(v.points).filter((function(e){return e.point.x===o.categoryValue})).first(),h=b&&b.point.y;if(null!=h){var m={color:v.lineColor.solid.color,category:t.valueFormatter.format(i,t.valueFormatter.getFormatString(u.xCol,s)),measureDisplayName:v.displayName,measure:t.valueFormatter.format(h,t.valueFormatter.getFormatString(u.yCol,s)),value:h,stackedValue:void 0,additionalTooltipItems:[{displayName:this.host.getLocalizedString("Visual_Confidence_Band_Upper"),value:t.valueFormatter.format(b.upperBound.y,t.valueFormatter.getFormatString(u.yCol,s))},{displayName:this.host.getLocalizedString("Visual_Confidence_Band_Lower"),value:t.valueFormatter.format(b.lowerBound.y,t.valueFormatter.getFormatString(u.yCol,s))}]};r.push(m)}}return{dataPoints:r,additionalTooltipItems:n}}},i.prototype.createLegendDataPoints=function(e){var a=this.data;if(a&&a.series&&!(a.series.length<1)){var i,r=[],o=a.categoryData[e];this.isInteractiveChart&&o&&(this.data.isScalar?(i=o.categoryValue,t.AxisHelper.isDateTime(this.xAxisProperties.axisType)&&(i=new Date(i))):i=t.CartesianHelper.lookupXValue(this.data,e,this.xAxisProperties.axisType,this.data.isScalar));for(var n=t.lineChartProps.general.formatString,s=null,l=0,c=a.series.length;l<c;l++){var u=a.series[l],d=u.data,p=void 0;if(this.isInteractiveChart){var h=void 0;if(this.data.isScalar){if(o)for(var g=o.categoryValue,m=0;m<d.length;m++)if(d[m].categoryValue===g){h=d[m];break}}else h=d[e];p=h&&h.value}var y=t.converterHelper.getFormattedLegendLabel(u.yCol,this.dataView.categorical.values,n);s=u.yCol,r.push({color:u.color,icon:t.LegendIcon.Line,label:y,category:t.valueFormatter.format(i,t.valueFormatter.getFormatString(u.xCol,n)),measure:t.valueFormatter.format(p,t.valueFormatter.getFormatString(u.yCol,n)),identity:u.identity,selected:u.selected})}var f=this.dataView&&this.dataView.categorical?this.dataView.categorical.values:null,v=f&&f.source?f.source.displayName:"",b=t.Legend.getDefaultLegendData();return b.title=v,b.dataPoints=r,b.grouped=a.hasDynamicSeries,b}},i.createLabelDataPoints=function(o){for(var n,s,l=o.xAxisProperties.scale,c=o.yAxisProperties.scale,u=o.horizontalOffset,d=o.data,p=d.series,h=d.dataLabelsSettings,g=t.NewDataLabelUtils.createColumnFormatterCacheManager(),m=a.hasFlag(o.lineType,16),y=[],f=d.isScalar,v=function(a,d){s=p[a],n=s.labelSettings||h;var v="100"===n.labelDensity,C=t.NewDataLabelUtils.getNumberOfLabelsToRender(o.currentViewport.width,_.parseInt(n.labelDensity),b.minimumLabelsToRender,t.MinMaxLabelDataPointSorter.estimatedLabelWidth),S=!v&&f?C:s.data.length;if(!n.show)return y[a]={labelDataPoints:[],maxNumberOfLabels:0},"continue";var x=t.NewDataLabelUtils.getLabelUnitAndPrecisionForAxis(o.yAxisProperties,n),w=s.data,P=[],D=function(a,d,p){if(null==d||null==d.value)return null;var h,y=d.labelFormatString,b=g.getOrCreate(y,n,x.units,x.getPrecision(!!y,a.type)),C=t.NewDataLabelUtils.getLabelFormattedText(b.format(d.value)),S={text:C,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:r.fromPoint(n.fontSize),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},w=e.TextMeasurementService.measureSvgTextWidth(S)+t.NewDataLabelUtils.LabelDensityPadding,P=e.TextMeasurementService.estimateSvgTextHeight(S,!0),D=!1;if(m){var T=Math.max(d.stackedValue-d.value,c.domain()[0]),V=o.currentViewport.width;h={rect:{left:l(i.getXValue(d,f))-V/2,top:c(Math.max(d.stackedValue,d.stackedValue-d.value)),width:V,height:Math.abs(c(d.stackedValue)-c(T))},orientation:d.value>=0?1:2,validPositions:i.validStackedLabelPositions},D=!0}else h={point:{x:l(i.getXValue(d,f))+u,y:c(d.value)},radius:0,validPositions:v?[1]:i.getValidLabelPositions(s,p)};var L={isPreferred:!1,text:C,textSize:{width:w,height:P},outsideFill:n.labelColor?n.labelColor:t.NewDataLabelUtils.defaultLabelColor,insideFill:n.labelColor&&m?n.labelColor:t.NewDataLabelUtils.defaultInsideLabelColor,parentType:D?1:0,parentShape:h,fontSize:n.fontSize,identity:d.identity,key:d.key};return L};if(!_.isEmpty(w))for(var T=0,V=w.length;T<V;T++){var L=D(s,w[T],T);L&&P.push(L)}y[a]={labelDataPoints:P,maxNumberOfLabels:S}},b=this,C=0,S=p.length;C<S;C++)v(C,S);if(16!==o.lineType){var x=new t.MinMaxLabelDataPointSorter({unsortedLabelDataPointGroups:y,series:p,viewport:o.currentViewport,yAxisProperties:o.yAxisProperties});return x.getSortedDataLabels()}return y},i.prototype.adjustPathXCoordinate=function(t){var a=this.scaleDetector.getScale().x;return t-=e.Double.equalWithPrecision(a,1,1e-5)?this.pathXAdjustment:this.pathXAdjustment*a},i.getValidLabelPositions=function(e,t){var a=e.data,i=a.length,r=t===i-1,o=0===t,n=a[t].value,s=a[t-1]&&a[t-1].value,l=a[t+1]&&a[t+1].value,c=1,u=1;if(null==s?c=0:s>n?c=3:s<n&&(c=2),null===l?u=0:l>n?u=3:l<n&&(u=2),o)switch(u){case 3:return[2,1];default:return[1,2]}if(r)switch(c){case 3:return[2,1];default:return[1,2]}switch(c){case 0:switch(u){case 0:return[1,2,8,4];case 1:return[1,2,4,8];case 3:return[2,1,4,8];case 2:return[1,2,4,8]}case 1:switch(u){case 0:return[1,2,8,4];case 1:return[1,2,8,4];case 3:return[2,1,8,4];case 2:return[1,2,8,4]}case 3:switch(u){case 0:return[2,1,8,4];case 1:return[2,1,4,8];case 3:return[2,1,8,4];case 2:return[1,2,8,4]}case 2:switch(u){case 0:return[1,2,8,4];case 1:return[1,2,4,8];case 3:return[1,2,8,4];case 2:return[1,2,8,4]}}},i.prototype.getCartesianVisualCapabilities=function(){return{supportsHierarchicalCategoryAxis:!0}},i.prototype.getStaticSeriesRole=function(){return this.isComboChart?"Y2":"Y"},i.prototype.calculateCustomLegend=function(){if(!this.dataView)return t.Legend.getDefaultLegendData();var e=t.Legend.buildSeriesLegendData({dataView:this.dataView,allowLegendWithNoSeries:this.isComboChart,showByDefault:!0,staticSeriesRole:this.getStaticSeriesRole(),style:this.style,ignoreDefaultColor:!0});return e},i})();n.ClassName="lineChart",n.MainGraphicsContextClassName="mainGraphicsContext",n.CategorySelector=i("cat"),n.CategoryValuePoint=i("dot"),n.CategoryPointSelector=i("point"),n.CategoryAreaSelector=i("catArea"),n.HoverLineCircleDot=i("circle-item"),n.LineClassSelector=i("line"),n.PointRadiusExtra=4,n.CircleRadiusExtra=3,n.TooltipCircleRadiusExtra=2,n.PathElementName="path",n.CircleElementName="circle",n.CircleClassName="selection-circle",n.LineElementName="line",n.RectOverlayName="rect",n.ScalarOuterPadding=10,n.interactivityStrokeWidth=10,n.minimumLabelsToRender=4,n.AreaFillOpacity=.4,n.DimmedAreaFillOpacity=.2,n.validStackedLabelPositions=[1,4,2],t.LineChart=n})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=jsCommon.CssConstants.createClassAndSelector,i=e.data.createDataViewScopeIdentity,r=e.data.DataViewConcatenateCategoricalColumns,o=e.data.DataViewMatrixUtils,n=e.data.SQExprBuilder,s="drag-resize-disabled",l=(function(){function a(e){e&&(this.interactivityService=e.interactivityService)}return a.prototype.init=function(e){var t=this;this.element=e.element,this.svg=e.svg,this.host=e.host,this.isMobileChart=e.interactivity&&e.interactivity.isInteractiveLegend,this.interactivityService&&(this.playControl=new c(this.element,function(e){return t.moveToFrameAndRender(e)},this.isMobileChart),this.playControl.onPlay((function(){return t.play()})))},a.prototype.setData=function(e,t){if(e){if(this.ridiculousFlagForPersistProperties&&e.metadata)return this.ridiculousFlagForPersistProperties=!1,this.playData;e.matrix||e.categorical?this.playData=u.converter(e,t):this.playData=u.getDefaultPlayData()}else this.playData=u.getDefaultPlayData();return this.lastViewport=void 0,this.playData},a.prototype.render=function(e,t,a,i){var r=this.playData,o=!this.lastViewport||this.lastViewport.height!==a.height||this.lastViewport.width!==a.width;if(this.lastViewport=a,o&&this.stop(),r){var n={data:this.playData,viewModel:t,viewport:a},s=!1;if(this.interactivityService){var l=r.currentViewModel;this.interactivityService.applySelectionStateToData(l.dataPoints),s=this.interactivityService.hasSelection()}this.updateCallout(a,i),this.playControl&&o&&this.playControl.rebuild(r,a);var c=r.allViewModels.map((function(e){return e.dataPoints})),u=_.flatten(c);return{allDataPoints:u,viewModel:n}}},a.prototype.updateCallout=function(i,r){var o=this.playData,n=o.frameData,s=o.currentFrameIndex,l=i.height,c=l-r.top-r.bottom,u=i.width,d=u-r.left-r.right,p=0,h=Math.min(l,1.3*u),g=Math.max(12,Math.round(h/7));g=Math.min(g,70);var m=[];if(s<n.length&&s>=0){var y={fontSize:jsCommon.PixelConverter.toString(g),text:n[s].text||"",fontFamily:t.Font.Family.regular.css};if(p=e.TextMeasurementService.estimateSvgTextHeight(y)-e.TextMeasurementService.estimateSvgTextBaselineDelta(y),p<c){var f=d-2*a.calloutOffsetMultiplier*p,v=e.TextMeasurementService.getTailoredTextOrDefault(y,f);m=[v]}}var b=this.svg.selectAll(a.PlayCallout.selector).data(m);b.enter().append("text").classed(a.PlayCallout.class,!0),b.text((function(e){return e})).attr({x:d-a.calloutOffsetMultiplier*p,y:function(){return p}}).style({"font-size":g+"px","text-anchor":"end"}),b.exit().remove()},a.prototype.play=function(){var e=this.playData;if(this.isPlaying)this.stop();else if(this.playControl){this.isPlaying=!0,this.playControl.play();var t=this.playControl.getCurrentIndex();if(null==t)return;t=Math.round(t),t>=e.allViewModels.length-1?e.currentFrameIndex=-1:e.currentFrameIndex=t-1,this.playNextFrame(e)}},a.prototype.playNextFrame=function(e,t,a){var i=this;if(!this.isPlaying)return void this.stop();var r=e.currentFrameIndex+1;null!=t&&null!=a&&(r=Math.abs(a-t+1),t=r),r<e.allViewModels.length&&r>-1?(e.currentFrameIndex=r,e.currentViewModel=e.allViewModels[r],this.renderDelegate(e.currentViewModel),this.playControl.setFrame(r),r<e.allViewModels.length&&window.setTimeout((function(){i.playNextFrame(e,t,a)}),u.FrameStepDuration)):this.stop()},a.prototype.stop=function(){this.playControl&&this.playControl.pause(),this.isPlaying=!1},a.prototype.remove=function(){this.playControl&&this.playControl.remove(),d3.selectAll(a.PlayCallout.selector).remove()},a.prototype.setRenderFunction=function(e){this.renderDelegate=e},a.prototype.getCartesianExtents=function(e,t){return!this.playData||_.isEmpty(this.playData.allViewModels)||_.isEmpty(this.playData.frameData)?e:u.getMinMaxForAllFrames(this.playData,t)||e},a.prototype.setPlayControlPosition=function(e){if(this.playControl){var t=this.playControl.getContainer();t.css("left",e.left?e.left+"px":""),t.css("top",e.top?e.top+"px":"")}},a.prototype.moveToFrameAndRender=function(e){var t=this.playData;if(this.isPlaying=!0,t&&e>=0&&e<t.allViewModels.length&&e!==t.currentFrameIndex){t.currentFrameIndex=e;var a=t.allViewModels[e];t.currentViewModel=a,this.renderDelegate(a)}this.isPlaying=!1},a.prototype.isCurrentlyPlaying=function(){return this.isPlaying},a})();l.PlayCallout=a("play-callout"),l.calloutOffsetMultiplier=.3,t.PlayAxis=l;var c=(function(){function e(e,t,a){this.isMobileChart=a,this.createSliderDOM(e),this.renderDelegate=t}return e.prototype.getContainer=function(){return this.playAxisContainer;
},e.prototype.remove=function(){this.playAxisContainer&&this.playAxisContainer.remove()},e.prototype.pause=function(){this.playButton.removeClass("pause").addClass("play")},e.prototype.play=function(){this.playButton.removeClass("play").addClass("pause")},e.prototype.getCurrentIndex=function(){if(this.noUiSlider)return Math.round(this.noUiSlider.get())},e.prototype.onPlay=function(e){this.playButtonCircle.off("click"),this.playButtonCircle.on("click",e)},e.prototype.setFrame=function(e){this.noUiSlider.set([e])},e.prototype.rebuild=function(t,a){var i=this,r=this.slider;this.noUiSlider&&this.noUiSlider.destroy();var o=t.labelData,n=e.calucalateSliderSize(o,a.width),s=this.getContainer();n.marginLeft>e.SliderMarginLeft&&(s.css("padding-left",n.marginLeft-e.SliderMarginLeft+"px"),s.css("box-sizing","border-box"));var l=this.updateSliderControl(t,n.width),c=e.adjustWidthRegardingLastItem(o,l,n.width);this.slider.css("width",c+"px"),this.noUiSlider.on("slide",(function(){var e=i.getCurrentIndex();i.renderDelegate(e)}));var u=0;$(".noUi-value",r).each((function(e,t){var a=o.labelInfo[u].labelWidth;$(t).width(a),$(t).css("margin-left",-a/2+"px"),u+=l}))},e.prototype.updateSliderControl=function(t,a){var i=t.labelData,r=this.slider.get(0),o=t.frameData.length,n={start:0===o?0:t.currentFrameIndex,step:1,range:{min:0,max:0===o?0:o-1}},s=null,l=0;if(o>0){var c=e.createPipsFilterFn(t,a,i);l=c.skipStep,s={mode:"steps",density:Math.ceil(100/o),format:{to:function(e){return t.frameData[e].escapedText},from:function(e){return t.frameData.indexOf(e)}},filter:c.filter}}return n.pips=s,noUiSlider.create(r,n),this.noUiSlider=r.noUiSlider,l},e.createPipsFilterFn=function(e,t,a){var i=_.max(_.map(a.labelInfo,(function(e){return e.labelWidth}))),r=1,o=1,n=e.frameData.length>1?t/(e.frameData.length-1):t,s=i/n;s>1.25?(o=Math.ceil(s),r=2):(s>1||a.anyWordBreaks)&&(r=2);var l=function(e,t){return e%o===0?r:0};return{filter:l,skipStep:o}},e.adjustWidthRegardingLastItem=function(t,a,i){if(_.isEmpty(t.labelInfo))return i;var r=t.labelInfo.length,o=Math.floor((r-1)/a)*a,n=i+e.SliderMarginRight-i/r*(o+1),s=t.labelInfo[o].labelWidth,l=s/2-n;if(l>0){var c=e.SliderMaxMargin-e.SliderMarginRight;return l=l>c?c:l,i-l}return i},e.prototype.createSliderDOM=function(t){this.playAxisContainer=$('<div class="play-axis-container"></div>').appendTo(t).css("height",e.PlayControlHeight+"px"),this.playButtonCircle=$('<div class="button-container"></div>').appendTo(this.playAxisContainer),this.isMobileChart&&this.playButtonCircle.addClass("mobile-button-container"),this.playButton=$('<div class="play"></div>').appendTo(this.playButtonCircle),this.slider=$('<div class="sliders"></div>').attr(s,"true").appendTo(this.playAxisContainer)},e.calucalateSliderSize=function(t,a){var i=0;_.isEmpty(t.labelInfo)||(i=_.first(t.labelInfo).labelWidth/2);var r=Math.max(i,e.SliderMarginLeft);r=Math.min(e.SliderMaxMargin,r);var o=Math.max(a-r-e.SliderMarginRight,1);return{width:o,marginLeft:r}},e})();c.SliderMarginLeft=44,c.SliderMarginRight=20,c.SliderMaxMargin=100,c.PlayControlHeight=80;var u;!(function(a){function s(a,i){var n=a.matrix,s={categories:[],values:e.data.DataViewTransform.createValueColumns()};if(_.isEmpty(n.columns.levels)||n.rows.levels.length<2&&n.columns.levels.length<2)return(H=s.values).push.apply(H,l(n.valueSources)),{metadata:a.metadata,categorical:s};for(var u=1,d=[],p=u,h=n.rows.levels.length;p<h;p++){var g=n.rows.levels[p].sources[0];d.push({source:g,values:[],identity:[],objects:void 0})}var m=!_.isEmpty(n.rows.root.children),y=!_.isEmpty(n.columns.root.children),f=n.columns.levels.length>1&&y,v=n.rows.levels.length>1&&m;if(f&&!v){s.categories=void 0;var b=n.columns.root;s.values.source=n.columns.levels[0].sources[0];for(var C=n.valueSources.length,S=0,x=b.children.length;S<x;S++)for(var w=b.children[S],P=0;P<C;P++){var D=_.create(n.valueSources[P],{groupName:void 0===w.value?null:w.value}),T={identity:w.identity,values:[],source:D};s.values.push(T)}for(var V=n.rows.root.children[i],L=V.values,N=0,M=b.children.length;N<M;N++)for(var P=0;P<C;P++)s.values[N*C+P].values.push(L[N*C+P].value)}else if(f&&m){var V=n.rows.root.children[i];o.forEachLeafNode(V.children,(function(e,t,a){c(a,d)})),s.categories=d,s.values.source=n.columns.levels[0].sources[0];for(var A=[],w=n.columns.root,R=-1;w;){if(w.children&&w.children[0].children)for(var P=0,F=w.children.length;P<F;P++)A.push(w.children[P]);else if(w.children&&V.children){for(var O=w.children.length,P=0;P<O;P++){var D=_.create(n.valueSources[P],{groupName:w.value}),T={identity:w.identity,values:[],source:D};s.values.push(T)}o.forEachLeafNode(V.children,(function(e){for(var t=0;t<O;t++)s.values[R*O+t].values.push(e.values[R*O+t].value)}))}A.length>0?(w=A[0],A=A.splice(1),R++):w=void 0}}else if(v){var V=n.rows.root.children[i],I=n.valueSources.length;(j=s.values).push.apply(j,l(n.valueSources)),o.forEachLeafNode(V.children,(function(e,t,a){c(a,d);for(var i=0;i<I;i++)s.values[i].values.push(e.values[i].value)})),s.categories=d}return r.applyToPlayChartCategorical(a.metadata,t.scatterChartCapabilities.objects,"Category",s);var H,j}function l(e){return _.isEmpty(e)?[]:_.map(e,(function(e){return{identity:void 0,values:[],source:e}}))}function c(e,t){var a=e[0].identity;if(e.length>1){for(var r=a.expr,o=1,s=e.length;o<s;o++){var l=e[o].identity.expr;r=n.and(r,l)}a=i(r)}for(var c=0,u=t.length;c<u;c++){t[c].identity.push(a);var d=e[c];t[c].values.push(d.value)}}function u(a,i){var r={};if(a&&a.objects){var o=a.objects;r.currentFrameIndex=e.DataViewObjects.getValue(o,t.scatterChartProps.currentFrameIndex.index,null)}return r}function d(e,a){var i,r=e.metadata,o=t.dataLabelUtils.getDefaultPointLabelSettings(),n=u(r,o),l=[],c=[],d=void 0,p=e.matrix.rows,h=p.root.children?p.root.children.length:0;if(e.matrix&&h>0&&!_.isEmpty(p.levels)&&!_.isEmpty(p.levels[0].sources)){i=p.levels[0].sources[0];var m=t.valueFormatter.getFormatString(i,t.scatterChartProps.general.formatString),y=void 0;if(i.type.numeric){var f=Math.abs(p.root.children[h-1].value-p.root.children[0].value);y=t.valueFormatter.create({format:m,value:f,value2:0,columnType:i.type})}else y=t.valueFormatter.createDefaultFormatter(m,!0);for(var v=0,b=h;v<b;v++){var C=p.root.children[v],S=y.format(C.value),x=$("<div/>").text(S).html();c.push({escapedText:x,text:S});var w=s(e,v),P={label:x,column:i};d=a(w,P),l.push(d)}}else{var w=s(e,0);d=a(w),l.push(d)}return n.currentFrameIndex=c.length-1,{allViewModels:l,currentViewModel:d,frameData:c,currentFrameIndex:n.currentFrameIndex,labelData:g(c,i)}}function p(){var e={frameData:[],allViewModels:[],currentFrameIndex:0,currentViewModel:void 0,labelData:{anyWordBreaks:!1,labelInfo:[]}};return e}function h(e,t){var a={minY:null,maxY:null,minX:null,maxX:null},i=!1;if(e.allViewModels&&e.allViewModels.length>0)for(var r=0,o=e.allViewModels.length;r<o;r++){var n=e.allViewModels[r];if(!_.isEmpty(n.dataPoints)){i=!0;var s=t(n);a={minY:d3.min([s.minY,a.minY]),maxY:d3.max([s.maxY,a.maxY]),minX:d3.min([s.minX,a.minX]),maxX:d3.max([s.maxX,a.maxX])}}}return i?a:null}function g(a,i){for(var r={fontFamily:t.Font.Family.regular.css,fontSize:jsCommon.PixelConverter.toString(14)},o=[],n=!1,s=0,l=a;s<l.length;s++){var c=l[s],u=jsCommon.WordBreaker.getMaxWordWidth(c.escapedText,e.TextMeasurementService.measureSvgTextWidth,r);n=n||jsCommon.WordBreaker.hasBreakers(c.escapedText)||c.escapedText.indexOf("-")>-1,o.push({label:c.escapedText,labelWidth:u})}return{labelInfo:o,anyWordBreaks:n,labelFieldName:i&&i.displayName}}function m(e,t){void 0===t&&(t="Play");var a=e.matrix&&e.matrix.rows&&e.matrix.rows.levels&&e.matrix.rows.levels[0]&&e.matrix.rows.levels[0].sources&&e.matrix.rows.levels[0].sources[0]&&e.matrix.rows.levels[0].sources[0].roles;return a&&a[t]}function y(e,t,a){var i=_.filter(e,(function(e){return e.selected}));i=_.uniq(i,(function(e){return e.identity.getKey()})),t.render(i,a)}a.FrameStepDuration=800,a.FrameAnimationDuration=750,a.ClassName="playChart",a.convertMatrixToCategorical=s,a.converter=d,a.getDefaultPlayData=p,a.getMinMaxForAllFrames=h,a.isDataViewPlayable=m,a.renderTraceLines=y})(u=t.PlayChart||(t.PlayChart={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a="realTimeLineChart",i=1.5,r=3e5,o=(function(){function o(e){this.animator=e.animator,this.maxDataValue=Number.MIN_VALUE,this.newDataInterval=0,this.duration=r}return o.prototype.init=function(e){this.options=e;var i=this.cartesianSVG=e.svg;this.host=e.host,this.currentViewport=e.viewport,this.cartesianVisualHost=e.cartesianHost,this.style=e.style,i.classed(a,!0).classed("cartesianChart",!0);var r=this.mainGraphicsSVG=i.append("svg");r.classed("mainGraphicsSVG",!0),this.mainGraphicsContext=r.append("g").classed("mainGraphicsContext",!0),this.data={series:[],dataLabelsSettings:t.dataLabelUtils.getDefaultLineChartLabelSettings(!1),hasDynamicSeries:!1,categories:[],categoryMetadata:void 0,valuesMetadata:[],categoryData:[]}},o.prototype.setData=function(a){if(this.data||(this.data={series:[],dataLabelsSettings:t.dataLabelUtils.getDefaultLineChartLabelSettings(!1),hasDynamicSeries:!1,categories:[],categoryMetadata:void 0,valuesMetadata:[],categoryData:[]}),!_.isEmpty(a)){var i=_.first(a);if(i.categorical){var r=t.CartesianHelper.getCategoryAxisProperties(i.metadata),o=r.duration;o&&(this.duration=o);var n=this.dataViewCat=i.categorical;this.removeOldData();var s=n.categories,l=e.ValueType.fromDescriptor({text:!0});s&&s.length>0&&s[0].source&&s[0].source.type&&(l=s[0].source.type);var c=t.CartesianChart.getIsScalar(i.metadata?i.metadata.objects:null,t.lineChartProps.categoryAxis.axisType,l),u=t.LineChart.converter(i,t.valueFormatter.format(null),this.style.colorPalette.dataColors,c);this.mergeNewData(u),this.removeOldData(this.newDataInterval)}}},o.prototype.hasLegend=function(){return this.data&&(this.data.hasDynamicSeries||!_.isEmpty(this.data.series))},o.prototype.calculateAxesProperties=function(e){return this.currentViewport=e.viewport,this.margin=e.margin,this.newAxisData&&(this.axisData=this.newAxisData),this.newAxisData=this.createAxisData(e),this.axisData||(this.axisData=this.newAxisData),[this.xAxisProperties,this.yAxisProperties]},o.prototype.overrideXScale=function(e){this.xAxisProperties=e},o.prototype.render=function(e,t){if(!this.containsEmptySeries())return this.renderLines(),this.animator&&this.animator.refreshLastUpdate(),{dataPoints:[],behaviorOptions:[],labelDataPoints:[],labelsAreNumeric:!0,labelDataPointGroups:[],animateLabels:!1}},o.prototype.calculateLegend=function(){var e=t.Legend.getDefaultLegendData();if(this.containsEmptySeries())return e;var a=this.data,i=this.dataViewCat,r=[],o=t.lineChartProps.general.formatString,n=null;if(i.values)for(var s=0,l=a.series;s<l.length;s++){var c=l[s],u=t.converterHelper.getFormattedLegendLabel(c.yCol,i.values,o);n=c.yCol,r.push({color:c.color,icon:t.LegendIcon.Line,label:u,identity:c.identity,selected:c.selected})}var d=i?i.values:null,p=d&&d.source?d.source.displayName:"";return e.title=p,e.dataPoints=r,e},o.prototype.onClearSelection=function(){},o.prototype.createAxisData=function(a){var i=this.data;if(i){var r;this.containsEmptySeries()||(r=i.series[0].yCol);var o=this.truncateSeries(),n=t.AxisHelper.createDomain(o,i.categoryMetadata?i.categoryMetadata.type:e.ValueType.fromDescriptor({text:!0}),!0,[this.getMinData()+this.newDataInterval,null]),s=a.viewport,l=s.width,c=this.xAxisProperties=t.AxisHelper.createAxis({pixelSpan:l,dataDomain:n,metaDataColumn:i.categoryMetadata,formatString:t.valueFormatter.getFormatString(i.categoryMetadata,t.columnChartProps.general.formatString),outerPadding:10,isCategoryAxis:!0,isScalar:!0,isVertical:!1,categoryThickness:null,useTickIntervalForDisplayUnits:!0,getValueFn:function(e,a){return t.CartesianHelper.lookupXValue(i,e,a,!0)},scaleType:t.axisScale.linear,margin:a.margin}),u=t.AxisHelper.createValueDomain(o,!1),d=this.margin,p=this.yAxisProperties=t.AxisHelper.createAxis({pixelSpan:s.height-d.top-d.bottom,dataDomain:u,metaDataColumn:r,formatString:t.valueFormatter.getFormatString(r,t.columnChartProps.general.formatString),outerPadding:0,isScalar:!0,isVertical:!0,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,scaleType:t.axisScale.linear,margin:a.margin});return p.axis.orient("left").tickSize(-l),{x:c,y1:p}}},o.prototype.truncateSeries=function(){var t=this.getMinData(),a=this.data.series;return a?_.map(a,(function(a,i){a=e.Prototype.inherit(a),a.data=e.Prototype.inherit(a.data);var r=_.findIndex(a.data,(function(e){return e&&e.categoryValue>=t})),o=0;return r>0&&o++,a.data=a.data.slice(o),a})):[]},o.prototype.removeOldData=function(e){if(void 0===e&&(e=0),!this.containsEmptySeries()){for(var t=this.getMinData(e),a=this.data,i=0,r=a.series;i<r.length;i++){var o=r[i],n=_.findIndex(o.data,(function(e){return e&&e.categoryValue>t}));n>0&&(o.data=o.data.slice(n))}var s=_.findIndex(a.categoryData,(function(e){return e&&e.categoryValue>t}));s>0&&(a.categoryData=this.data.categoryData.slice(s),a.categories=this.data.categories.slice(s))}},o.prototype.mergeNewData=function(e){if(this.containsEmptySeries())return this.data=e,void(this.maxDataValue=this.getMaxData());this.data.series=o.mergeSeries(this.data.series,e.series,this.maxDataValue),o.mergeCategories(this.data,e,this.maxDataValue);var t=this.getMaxData();this.newDataInterval=this.maxDataValue&&t?t-this.maxDataValue:0,this.maxDataValue=t},o.prototype.getMaxData=function(){for(var e=0,t=0,a=this.data.series;t<a.length;t++){var i=a[t];i.data.length&&(e=Math.max(_.last(i.data).categoryValue,e))}return e},o.prototype.getMinData=function(e){return void 0===e&&(e=0),this.maxDataValue-this.duration-e*i},o.prototype.renderLines=function(){var e=this.axisData.x.scale,a=this.axisData.y1.scale,i=this.currentViewport,r=this.margin,o=i.height-r.top-r.bottom,n=i.width-r.left-r.right,s=e(e.domain()[0]+this.newDataInterval)-e(e.domain()[0]),l=d3.svg.line().x((function(t,a){return e(t.categoryValue)})).y((function(e,t){return a(e.value)}));this.mainGraphicsSVG.attr({x:0,height:o,width:n}),this.mainGraphicsContext.attr("transform",t.SVGUtil.translate(0,0));var c=this.mainGraphicsContext.selectAll(".line").data(this.data.series,(function(e){return e.identity.getKey()}));c.enter().append("path").classed("line",!0),c.style("stroke",(function(e){return e.color})).attr("d",(function(e){return l(e.data)})),c.exit().remove(),this.animator&&this.animator.animate({mainGraphicsContext:this.mainGraphicsContext,interactivityService:null,xTranslation:s})},o.prototype.containsEmptySeries=function(){return!this.data||_.isEmpty(this.data.series)},o.mergeCategories=function(e,t,a){var i=t.categories,r=_.findIndex(i,(function(e){return e&&e.categoryValue>a}));r>-1?(e.categories=e.categories.concat(t.categories.slice(r)),e.categoryData=e.categoryData.concat(t.categoryData.slice(r))):(e.categories=t.categories,e.categoryData=t.categoryData)},o.mergeSeries=function(e,t,a){for(var i=[],r=0,o=t;r<o.length;r++){var n=o[r],s=_.find(e,(function(e){return e.identity.equals(n.identity)}));if(s){i.push(s);for(var l=0,c=n.data;l<c.length;l++){var u=c[l];u.categoryValue>a&&s.data.push(u)}}else i.push(n)}return i},o.prototype.getCartesianVisualCapabilities=function(){return{supportsHierarchicalCategoryAxis:!1}},o.prototype.getStaticSeriesRole=function(){return"Y"},o})();t.RealTimeLineChart=o})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=jsCommon.Color,i=jsCommon.CssConstants.createClassAndSelector,r=e.data.DataRoleHelper,o=jsCommon.PixelConverter,n=(function(){function i(e){e&&(this.tooltipsEnabled=e.tooltipsEnabled,this.interactivityService=e.interactivityService,this.animator=e.animator),this.renderer=new s}return i.prototype.init=function(e){this.options=e,this.element=e.element,this.currentViewport=e.viewport,this.style=e.style,this.host=e.host,this.colors=this.style.colorPalette.dataColors,this.interactivity=e.interactivity,this.cartesianVisualHost=e.cartesianHost,this.isMobileChart=e.interactivity&&e.interactivity.isInteractiveLegend,this.tooltipService=e.services.tooltips;var a=this.svg=e.svg;a.classed(i.ClassName+" "+t.PlayChart.ClassName,!0),this.renderer.init(a,e.labelsContext,this.isMobileChart,this.tooltipsEnabled,this.tooltipService)},i.getAdditionalTelemetry=function(e){var t={hasSize:r.hasRoleInDataView(e,"Size"),hasPlayAxis:r.hasRoleInDataView(e,"Play")};return t},i.getObjectProperties=function(a,i){var r;r=a&&a.metadata&&a.metadata.objects?a.metadata.objects:{};var o={};o.defaultDataPointColor=e.DataViewObjects.getFillColor(r,t.columnChartProps.dataPoint.defaultColor),o.showAllDataPoints=e.DataViewObjects.getValue(r,t.columnChartProps.dataPoint.showAllDataPoints,!1);var n=r.categoryLabels;n&&i&&t.dataLabelUtils.updateLabelSettingsFromLabelsObject(n,i);var s=a&&t.GradientUtils.hasGradientRole(a.categorical);return o.fillPoint=e.DataViewObjects.getValue(r,t.scatterChartProps.fillPoint.show,s),o.colorBorder=e.DataViewObjects.getValue(r,t.scatterChartProps.colorBorder.show,!1),o.colorByCategory=e.DataViewObjects.getValue(r,t.scatterChartProps.colorByCategory.show,!1),o.bubbleSizeMultiplier=t.shapeUtil.getBubbleSizeMultiplier(e.DataViewObjects.getValue(r,t.scatterChartProps.bubbles.bubbleSize)),o},i.converter=function(a,r,o,n){void 0===n&&(n=!0);var s,l,c,u,d,p=e.data.createDataViewCategoricalReaderAdvanced(a),h=r.viewport,g=r.colors,m=r.interactivityService,y=r.categoryAxisProperties,f=r.valueAxisProperties,v=a.categorical,b=t.GradientUtils.getGradientValueColumn(v);v.categories&&v.categories.length>0?(s=v.categories[0].values,l=t.valueFormatter.create({format:t.valueFormatter.getFormatString(v.categories[0].source,t.scatterChartProps.general.formatString),value:s[0],value2:s[s.length-1],columnType:p.data.getCategoryType("Category")}),u=v.categories[0].identity,c=v.categories[0].objects,d=v.categories[0].source.queryName):(s=[null],l=t.valueFormatter.createDefaultFormatter(null));var C,S=v.categories,x=v.values,w=!!x.source,P=x.grouped(),D=x.source,T=i.getMetadata(P,D),V=t.dataLabelUtils.getDefaultPointLabelSettings(),L=i.getSizeRangeForGroups(P,T.idx.size),N=i.getObjectProperties(a,V),M=new t.ColorHelper(g,t.scatterChartProps.dataPoint.fill,N.defaultDataPointColor),A=i.createDataPointSeries(p,x,T,S,s,l,u,c,M,h,w,V,b,d,N.colorByCategory,o,n),R=_.reduce(A,(function(e,t){return e.concat(t.dataPoints)}),[]);C=w?t.Legend.buildSeriesLegendData({dataView:a,style:r.style,showByDefault:!0}):{dataPoints:[]};var F=x&&D?D.displayName:"";return F||(F=S&&S.length>0&&S[0].source.displayName?S[0].source.displayName:""),y&&null!==y.showAxisTitle&&y.showAxisTitle===!1&&(T.axesLabels.x=null),f&&null!==f.showAxisTitle&&f.showAxisTitle===!1&&(T.axesLabels.y=null),m&&(m.applySelectionStateToData(R),m.applySelectionStateToData(C.dataPoints)),{xCol:T.cols.x,yCol:T.cols.y,dataPoints:R,dataPointSeries:A,legendData:C,axesLabels:T.axesLabels,size:T.cols.size,sizeRange:L,dataLabelsSettings:V,defaultDataPointColor:N.defaultDataPointColor,hasDynamicSeries:w,showAllDataPoints:N.showAllDataPoints,fillPoint:N.fillPoint,colorBorder:N.colorBorder,colorByCategory:N.colorByCategory,multiplier:N.bubbleSizeMultiplier}},i.getSizeRangeForGroups=function(e,a){var r={};return e&&e.forEach((function(e){var o=i.getMeasureValue(a,e.values),n=t.AxisHelper.getRangeForColumn(o);(null==r.min||r.min>n.min)&&(r.min=n.min),(null==r.max||r.max<n.max)&&(r.max=n.max)})),r},i.createDataPointSeries=function(e,a,r,o,n,s,l,c,u,d,p,h,g,m,y,f,v){var b=e.data.hasValues("X"),C=e.data.hasValues("Y");if(!b&&!C)return[];for(var S=[],x=r.idx,w=t.scatterChartProps.general.formatString,P=a.source,D=a.grouped(),T=_.isEmpty(o)?null:o[0],V=0,L=D.length;V<L;V++){var N=D[V],M=N.values,A=i.getMeasureValue(x.x,M),R=i.getMeasureValue(x.y,M),F=i.getMeasureValue(x.size,M),O=void 0;if(p)O=u.getColorForSeriesValue(N.objects,a.identityFields,N.name);else if(!y&&!c){var I=null!=F?F.source.queryName:"";O=u.getColorForMeasure(null,I)}var H={identityKey:N&&N.identity&&N.identity.key||"",dataPoints:[],hasSize:!(!F||!F.values),fill:O};S.push(H);for(var j=function(r,l){var d=n[r],m=b?t.AxisHelper.normalizeNonFiniteNumber(e.data.getValue("X",r,V)):0,S=C?t.AxisHelper.normalizeNonFiniteNumber(e.data.getValue("Y",r,V)):0,x=t.AxisHelper.normalizeNonFiniteNumber(e.data.getValue("Size",r,V));if(null==m||null==S)return"continue";var D=void 0;if(p)D=u.getColorForSeriesValue(N.objects,a.identityFields,N.name);else if(y)D=u.getColorForSeriesValue(c&&c[r],a.identityFields,d);else{var L=null!=F?F.source.queryName:"";D=u.getColorForMeasure(c&&c[r],L)}var _=t.SelectionIdBuilder.builder().withCategory(T,r).withSeries(a,N).createSelectionId(),M=new t.CategoricalLazyTooltipBuilder(e.columns);if(v){var O=t.FormattingStrategies.defaultFormatter(w),I=t.FormattingStrategies.fallbackBasedOnType(w);M.withColumnValueByIndex(T,r,!0,O),p&&M.withColumnValue(P,N.name,!0,O),M.withColumnValueByIndex(A,r,!1,I).withColumnValueByIndex(R,r,!1,I).withColumnValueByIndex(F,r,!1,I).withColumnValueByIndex(g,r,!1,I),f&&M.withValue(f.column.displayName,f.label),M.withAllValuesForRole("Tooltips",r,V,!1,I)}var j={x:m,y:S,size:x,radius:{sizeMeasure:F,index:r},fill:D,formattedCategory:i.createLazyFormattedCategory(s,null!=o?d:N.name),selected:!1,identity:_,tooltipInfo:function(){return M.getTooltipItems()},labelFill:h.labelColor};H.dataPoints.push(j)},z=0,k=n.length;z<k;z++)j(z,k)}return S},i.createLazyFormattedCategory=function(e,t){return new jsCommon.Lazy(function(){return e.format(t)})},i.getBubbleRadius=function(e,t,a,r){var o=null,n=null,s=e.sizeMeasure;if(!s)return i.BubbleRadius*r;var l=t.min?t.min:0,c=t.max?t.max:0,u=Math.min(l,0),d=Math.max(c,0);if(o={minRange:u,maxRange:d,delta:d-u},n=i.getBubblePixelAreaSizeRange(a,i.MinSizeRange,i.MaxSizeRange),s.values){var p=s.values[e.index];if(null!=p)return i.projectSizeToPixels(p,o,n)/2*r}return i.BubbleRadius*r},i.getMeasureValue=function(e,t){return e>=0?t[e]:null},i.getMetadata=function(e,t){var a,i,o,n=r.getMeasureIndexOfRole(e,"X"),s=r.getMeasureIndexOfRole(e,"Y"),l=r.getMeasureIndexOfRole(e,"Size"),c="",u="";if(e&&e.length){var d=e[0];n>=0&&(a=d.values[n].source,c=d.values[n].source.displayName),s>=0&&(i=d.values[s].source,u=d.values[s].source.displayName),l>=0&&(o=d.values[l].source)}return{idx:{x:n,y:s,size:l},cols:{x:a,y:i,size:o},axesLabels:{x:c,y:u}}},i.getDefaultData=function(){return{xCol:void 0,yCol:void 0,dataPoints:[],dataPointSeries:[],legendData:t.Legend.getDefaultLegendData(),axesLabels:{x:"",y:""},sizeRange:[],dataLabelsSettings:t.dataLabelUtils.getDefaultPointLabelSettings(),defaultDataPointColor:null,hasDynamicSeries:!1}},i.prototype.renderAtFrame=function(e){this.data=e,this.cartesianVisualHost.triggerRender(!1)},i.prototype.setData=function(e){var a=this;if(this.data=i.getDefaultData(),this.playAxis&&this.playAxis.isCurrentlyPlaying()&&this.playAxis.stop(),e.length>0){var r=e[0]||e[1];if(r){this.categoryAxisProperties=t.CartesianHelper.getCategoryAxisProperties(r.metadata,!0),this.valueAxisProperties=t.CartesianHelper.getValueAxisProperties(r.metadata,!0),this.dataView=r;var o={viewport:this.currentViewport,colors:this.colors,interactivityService:this.interactivityService,categoryAxisProperties:this.categoryAxisProperties,valueAxisProperties:this.valueAxisProperties,style:this.style};if(t.PlayChart.isDataViewPlayable(r)){this.playAxis||(this.playAxis=new t.PlayAxis({animator:this.animator,interactivityService:this.interactivityService,isScrollable:!1}),this.playAxis.init(this.options));var n=this.playAxis.setData(r,(function(e,t){return i.converter(e,o,t,a.tooltipsEnabled)}));this.mergeSizeRanges(n),this.data=n.currentViewModel,this.playAxis.setRenderFunction((function(e){return a.renderAtFrame(e)}))}else this.playAxis&&(this.playAxis.remove(),this.playAxis=null),r.categorical&&r.categorical.values&&(this.data=i.converter(r,o,void 0,this.tooltipsEnabled))}}else this.playAxis&&(this.playAxis.remove(),this.playAxis=null)},i.prototype.mergeSizeRanges=function(e){if(e&&e.currentViewModel){for(var t=e.currentViewModel.sizeRange,a=0,i=e.allViewModels;a<i.length;a++){var r=i[a],o=r.sizeRange;null!=o.min&&(t.min=Math.min(t.min,o.min)),null!=o.max&&(t.max=Math.max(t.max,o.max))}for(var n=0,s=e.allViewModels;n<s.length;n++){var l=s[n];l.sizeRange=t}}},i.prototype.calculateLegend=function(){return this.data&&this.data.legendData},i.prototype.calculateCustomLegend=function(){return this.data&&this.data.legendData},i.prototype.hasLegend=function(){return this.data&&this.data.hasDynamicSeries},i.prototype.enumerateObjectInstances=function(e,a){switch(a.objectName){case"colorByCategory":this.data&&(this.data.hasDynamicSeries||e.pushInstance({objectName:"colorByCategory",selector:null,properties:{show:this.data.colorByCategory}}));break;case"dataPoint":if(!this.playAxis){var i=this.dataView&&this.dataView.categorical?this.dataView.categorical:null;if(!t.GradientUtils.hasGradientRole(i))return this.enumerateDataPoints(e)}break;case"categoryAxis":e.pushInstance({selector:null,properties:{showAxisTitle:!this.categoryAxisProperties||null==this.categoryAxisProperties.showAxisTitle||this.categoryAxisProperties.showAxisTitle},objectName:"categoryAxis"});break;case"valueAxis":e.pushInstance({selector:null,properties:{showAxisTitle:!this.valueAxisProperties||null==this.valueAxisProperties.showAxisTitle||this.valueAxisProperties.showAxisTitle},objectName:"valueAxis"});break;case"categoryLabels":this.data?t.dataLabelUtils.enumerateCategoryLabels(e,this.data.dataLabelsSettings,!0):t.dataLabelUtils.enumerateCategoryLabels(e,null,!0);break;case"fillPoint":if(this.hasSizeMeasure())return;e.pushInstance({objectName:"fillPoint",selector:null,properties:{show:this.data.fillPoint}});break;case"colorBorder":this.hasSizeMeasure()&&e.pushInstance({objectName:"colorBorder",selector:null,properties:{show:this.data.colorBorder}});break;case"bubbles":e.pushInstance({selector:null,properties:{bubbleSize:t.shapeUtil.invertBubbleSizeMultiplier(this.data.multiplier)},objectName:"bubbles"})}},i.prototype.hasSizeMeasure=function(){var e=this.data.sizeRange;return e&&void 0!==e.min},i.prototype.enumerateDataPoints=function(e){var a=this.data;if(a){var i=a.dataPoints.length;if(a.hasDynamicSeries)for(var r=a.legendData.dataPoints.length,o=0;o<r;o++){var n=a.legendData.dataPoints[o];e.pushInstance({objectName:"dataPoint",displayName:n.label,selector:t.ColorHelper.normalizeSelector(n.identity.getSelector()),properties:{fill:{solid:{color:n.color}}}})}else if(e.pushInstance({objectName:"dataPoint",selector:null,properties:{defaultColor:{solid:{color:a.defaultDataPointColor||this.colors.getColorByIndex(0).value}}}}).pushInstance({objectName:"dataPoint",selector:null,properties:{showAllDataPoints:!!a.showAllDataPoints}}),a.showAllDataPoints)for(var o=0;o<i;o++){var s=a.dataPoints[o];e.pushInstance({objectName:"dataPoint",displayName:s.formattedCategory.getValue(),selector:t.ColorHelper.normalizeSelector(s.identity.getSelector(),!0),properties:{fill:{solid:{color:s.fill}}}})}}},i.prototype.supportsTrendLine=function(){var t=this.data;if(!t)return!1;var a=this.dataView,i=e.data.createDataViewCategoricalReader(a);return!this.hasSizeMeasure()&&t.dataPointSeries.length>0&&i.data.hasValues("X")&&i.data.hasValues("Y")},i.prototype.getAxisLocationForRole=function(e){var a=_.find(t.scatterChartCapabilities.dataRoles,(function(t){return t.name===e}));if(a)return 0===a.cartesianKind?0:1},i.getExtents=function(e){var t=e.dataPoints;return _.isEmpty(t)?{minY:0,maxY:0,minX:0,maxX:0}:{minY:d3.min(t,(function(e){return e.y})),maxY:d3.max(t,(function(e){return e.y})),minX:d3.min(t,(function(e){return e.x})),maxX:d3.max(t,(function(e){return e.x}))}},i.prototype.calculateAxesProperties=function(e){var a=this.data,r=this.currentViewport=e.viewport,o=e.margin;this.currentViewport=r,this.margin=o;var n=r.width-(o.left+o.right),s=r.height-(o.top+o.bottom),l={minY:0,maxY:10,minX:0,maxX:10};this.playAxis?(l=this.playAxis.getCartesianExtents(l,i.getExtents),this.playAxis.setPlayControlPosition(e.playAxisControlLayout)):_.isEmpty(a.dataPoints)||(l=i.getExtents(a));var c=[l.minX,l.maxX],u=t.AxisHelper.combineDomain(e.forcedXDomain,c,e.ensureXDomain);this.xAxisProperties=t.AxisHelper.createAxis({pixelSpan:n,dataDomain:u,zeroScalarDomain:[-1,1],metaDataColumn:a.xCol,formatString:t.valueFormatter.getFormatString(a.xCol,t.scatterChartProps.general.formatString),outerPadding:0,isScalar:!0,isVertical:!1,forcedTickCount:e.forcedTickCount,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!0,scaleType:e.categoryAxisScaleType,axisDisplayUnits:e.categoryAxisDisplayUnits,axisPrecision:e.categoryAxisPrecision,margin:o}),this.xAxisProperties.axis.tickSize(-s,0),this.xAxisProperties.axisLabel=this.data.axesLabels.x;var d=t.AxisHelper.combineDomain(e.forcedYDomain,[l.minY,l.maxY],e.ensureYDomain);return this.yAxisProperties=t.AxisHelper.createAxis({pixelSpan:s,dataDomain:d,zeroScalarDomain:[-1,1],metaDataColumn:a.yCol,formatString:t.valueFormatter.getFormatString(a.yCol,t.scatterChartProps.general.formatString),outerPadding:0,isScalar:!0,isVertical:!0,forcedTickCount:e.forcedTickCount,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,scaleType:e.valueAxisScaleType,axisDisplayUnits:e.valueAxisDisplayUnits,axisPrecision:e.valueAxisPrecision,margin:o}),this.yAxisProperties.axisLabel=this.data.axesLabels.y,[this.xAxisProperties,this.yAxisProperties]},i.prototype.overrideXScale=function(e){this.xAxisProperties=e},i.prototype.shouldSuppressAnimation=function(){return this.data&&this.data.dataPoints&&this.data.dataPoints.length>i.NoAnimationThreshold},i.prototype.categoryAxisTitleOnByDefault=function(){return!0},i.prototype.valueAxisTitleOnByDefault=function(){return!0},i.prototype.render=function(a,r){if(this.data){var o=this.data,n=this.margin,s=this.currentViewport,c=this.interactivityService&&this.interactivityService.hasSelection(),u={width:s.width-(n.left+n.right),height:s.height-(n.top+n.bottom)},d=t.AnimatorCommon.GetAnimationDuration(this.animator,a);this.playAxis&&this.playAxis.isCurrentlyPlaying()&&(this.isMobileChart||d>0)&&(d=t.PlayChart.FrameAnimationDuration);var p=this.playAxis?"linear":"cubic-in-out",h=(!o.sizeRange||!o.sizeRange.min)&&o.fillPoint,g=this.hasSizeMeasure(),m=1===r&&o.dataPoints&&o.dataPoints.length>i.NoRenderResizeThreshold,y={data:o,drawBubbles:g,isPlay:!!this.playAxis,xAxisProperties:this.xAxisProperties,yAxisProperties:this.yAxisProperties,viewport:u,hasSelection:c,animationDuration:d,animationOptions:this.options.animation,fillMarkers:h,easeType:p,suppressDataPointRendering:m};if(g){var f=o.dataPoints.sort(i.sortBubbles);y.data=e.Prototype.inherit(y.data),y.data.dataPoints=f}var v=[];(o.dataLabelsSettings&&o.dataLabelsSettings.show||o.dataLabelsSettings.showCategory)&&(v=l.createLabelDataPoints(y));var b=this.renderer.render(y,this.interactivityService);this.isMobileChart&&(b={data:b.data,dataPointsSelection:b.dataPointsSelection,eventGroup:b.eventGroup,plotContext:b.plotContext,host:this.cartesianVisualHost,root:this.svg,visualInitOptions:this.options,xAxisProperties:this.xAxisProperties,yAxisProperties:this.yAxisProperties,background:d3.select(this.element.get(0))});var C;if(this.playAxis&&(C=this.playAxis.render(a,y,s,n),this.interactivityService)){var S={traceLineRenderer:this.renderer.createTraceLineRenderer(C.viewModel)};c&&t.PlayChart.renderTraceLines(C.allDataPoints,S.traceLineRenderer,!a),b.playOptions=S}return{dataPoints:C?C.allDataPoints:o.dataPoints,behaviorOptions:b,labelDataPoints:v,labelsAreNumeric:!1,animateLabels:!0}}},i.getStrokeFill=function(e,t){if(null!=e.size&&t){var r=a.parseColorString(e.fill);return a.hexString(a.darken(r,i.StrokeDarkenColorValue))}return e.fill},i.getBubblePixelAreaSizeRange=function(e,t,a){var r=1;if(e.height>0&&e.width>0){var o=Math.min(e.height,e.width);r=o*o/i.AreaOf300By300Chart}var n=Math.round(t*r),s=Math.round(a*r);return{minRange:n,maxRange:s,delta:s-n}},i.project=function(e,t,a){if(0===t.delta||0===a.delta)return i.rangeContains(t,e)?a.minRange:null;var r=(e-t.minRange)/t.delta;
return a.minRange+r*a.delta},i.projectSizeToPixels=function(e,t,a){var r=0;if(t){if(r=a.maxRange,0!==t.delta){var o=Math.min(Math.max(e,t.minRange),t.maxRange);r=i.project(o,t,a)}r=2*Math.sqrt(r/Math.PI)}return Math.round(r)},i.rangeContains=function(e,t){return e.minRange<=t&&t<=e.maxRange},i.getMarkerFillOpacity=function(e,t,a,r){return e||t?a&&!r?i.DimmedBubbleOpacity:i.DefaultBubbleOpacity:0},i.getMarkerStrokeOpacity=function(e,t,a,r){return e&&t?1:a&&!r?i.DimmedBubbleOpacity:i.DefaultBubbleOpacity},i.getMarkerStrokeFill=function(e,t,r){if(e&&t){var o=a.parseColorString(r);return a.hexString(a.darken(o,i.StrokeDarkenColorValue))}return r},i.getMarkerStyle=function(e,t,a,r){return{"stroke-opacity":i.getMarkerStrokeOpacity(null!=e.size,t,a,e.selected),stroke:i.getMarkerStrokeFill(null!=e.size,t,e.fill),fill:e.fill,"fill-opacity":i.getMarkerFillOpacity(null!=e.size,r,a,e.selected)}},i.getSeriesStyle=function(e,t,a,r,o){return{"stroke-opacity":i.getMarkerStrokeOpacity(e,t,a,!1),stroke:i.getMarkerStrokeFill(e,t,o),fill:o,"fill-opacity":i.getMarkerFillOpacity(e,r,a,!1)}},i.getBubbleOpacity=function(e,t){return t&&!e.selected?i.DimmedBubbleOpacity:i.DefaultBubbleOpacity},i.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},i.prototype.getSupportedCategoryAxisType=function(){return t.axisType.scalar},i.sortBubbles=function(e,t){var a=t.radius.sizeMeasure.values[t.radius.index]-e.radius.sizeMeasure.values[e.radius.index];return 0!==a?a:t.identity.getKey().localeCompare(e.identity.getKey())},i.prototype.getCartesianVisualCapabilities=function(){return{supportsHierarchicalCategoryAxis:!1}},i.prototype.getStaticSeriesRole=function(){},i})();n.BubbleRadius=6,n.DefaultBubbleOpacity=.85,n.DimmedBubbleOpacity=.4,n.StrokeDarkenColorValue=63.75,n.dataLabelLayoutStartingOffset=2,n.dataLabelLayoutOffsetIterationDelta=6,n.dataLabelLayoutMaximumOffset=n.dataLabelLayoutStartingOffset+2*n.dataLabelLayoutOffsetIterationDelta,n.AreaOf300By300Chart=9e4,n.MinSizeRange=200,n.MaxSizeRange=3e3,n.ClassName="scatterChart",n.NoAnimationThreshold=1e3,n.NoRenderResizeThreshold=1e3,t.ScatterChart=n;var s=(function(){function e(){}return e.prototype.init=function(t,a,i,r,o){this.mainGraphicsG=t.append("g").classed(e.MainGraphicsContext.class,!0),this.isMobileChart=i,i&&(this.mainGraphicsBackgroundRect=this.mainGraphicsG.append("rect").classed("backgroundRect",!0).attr({width:"100%",height:"100%"})),this.mainGraphicsContext=this.mainGraphicsG.append("svg"),this.labelGraphicsContext=a,this.tooltipsEnabled=r,this.tooltipService=o,this.mainGraphicsContext.attr("stroke-width","1")},e.prototype.render=function(e,a){var i=e.viewport;this.mainGraphicsContext.attr({width:i.width,height:i.height});var r;return r=e.suppressDataPointRendering?this.removeScatterMarkers():e.animationDuration>0?this.drawScatterMarkers(e):this.drawScatterMarkersNoAnimation(e,e.drawBubbles),e.drawBubbles&&r.order(),this.tooltipsEnabled&&this.tooltipService.addTooltip(this.mainGraphicsContext,(function(e){return e.data&&e.data.tooltipInfo()}),(function(e){return e.data&&e.data.identity})),t.SVGUtil.flushAllD3TransitionsIfNeeded(e.animationOptions),{dataPointsSelection:r,eventGroup:this.mainGraphicsG,data:e.data,plotContext:this.mainGraphicsContext}},e.prototype.createTraceLineRenderer=function(e){return new c(e,this.mainGraphicsContext,this.tooltipsEnabled,this.tooltipService)},e.prototype.removeScatterMarkers=function(){return this.mainGraphicsContext.selectAll(e.ScatterMarkerSeriesGroup.selector).remove(),this.mainGraphicsContext.selectAll(e.DotClass.selector)},e.prototype.drawScatterMarkers=function(t){var a=t.data,i=t.xAxisProperties.scale,r=t.yAxisProperties.scale,o=[{identityKey:"",dataPoints:a.dataPoints}],s=this.mainGraphicsContext.selectAll(e.ScatterMarkerSeriesGroup.selector).data(o,(function(e){return e.identityKey}));s.enter().append("g").classed(e.ScatterMarkerSeriesGroup.class,!0),s.exit().remove();var l=s.selectAll(e.DotClass.selector).data((function(e){return e.dataPoints}),(function(e){return e.identity.getKey()}));return l.enter().append("circle").classed(e.DotClass.class,!0).style("opacity",0).attr("r",0),l.style({"stroke-opacity":function(e){return n.getMarkerStrokeOpacity(null!=e.size,a.colorBorder,t.hasSelection,e.selected)},stroke:function(e){return n.getStrokeFill(e,a.colorBorder)},fill:function(e){return e.fill},"fill-opacity":function(e){return n.getMarkerFillOpacity(null!=e.size,t.fillMarkers,t.hasSelection,e.selected)}}).transition().ease(t.easeType).duration(t.animationDuration).style("opacity",1).attr({r:function(e){return n.getBubbleRadius(e.radius,a.sizeRange,t.viewport,a.multiplier)},cx:function(e){return i(e.x)},cy:function(e){return r(e.y)}}),l.exit().transition().ease(t.easeType).duration(t.animationDuration).style("opacity",0).attr("r",0).remove(),l},e.prototype.drawScatterMarkersNoAnimation=function(t,a){var i,r=t.data,o=t.xAxisProperties.scale,s=t.yAxisProperties.scale;if(a){var l=[{identityKey:"",dataPoints:r.dataPoints}];i=this.mainGraphicsContext.selectAll(e.ScatterMarkerSeriesGroup.selector).data(l,(function(e){return e.identityKey}))}else i=this.mainGraphicsContext.selectAll(e.ScatterMarkerSeriesGroup.selector).data(r.dataPointSeries,(function(e){return e.identityKey}));return i.enter().append("g").classed(e.ScatterMarkerSeriesGroup.class,!0),i.exit().remove(),i.each((function(a){var i=n.getSeriesStyle(a.hasSize,r.colorBorder,t.hasSelection,t.fillMarkers,a.fill),l=d3.select(this);e.applyStyle(this,i);var c=l.selectAll(e.DotClass.selector).data(a.dataPoints,(function(e){return e.identity.getKey()}));c.interrupt(),c.enter().append("circle").classed(e.DotClass.class,!0),c.exit().remove(),c.each((function(a){var o=n.getMarkerStyle(a,r.colorBorder,t.hasSelection,t.fillMarkers);e.styleException(o,i),e.applyStyle(this,o)})),c.attr({r:function(e){return n.getBubbleRadius(e.radius,r.sizeRange,t.viewport,r.multiplier)},cx:function(e){return o(e.x)},cy:function(e){return s(e.y)}}).style("opacity",null)})),this.mainGraphicsContext.selectAll(e.DotClass.selector)},e.styleException=function(e,t){if(t)for(var a in e)e[a]===t[a]&&(e[a]=null)},e.applyStyle=function(e,t){for(var a in t){var i=e.style[a],r=t[a];if(null==r){if(""===i)continue}else if(r=r.toString(),r===i)continue;e.style[a]=r}},e})();s.DotClass=i("dot"),s.MainGraphicsContext=i("mainGraphicsContext"),s.ScatterMarkerSeriesGroup=i("scatterMarkerSeriesGroup");var l;!(function(a){function i(a){for(var i=a.xAxisProperties.scale,s=a.yAxisProperties.scale,l=a.data.sizeRange,c=a.data.multiplier,u=[],h=a.data.dataPoints,g=a.data.dataLabelsSettings,m=r(a),y=0,f=h;y<f.length;y++){var v=f[y],b=v.formattedCategory.getValue(),C={text:b,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:o.fromPoint(g.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},S=e.TextMeasurementService.measureSvgTextWidth(C),x=e.TextMeasurementService.estimateSvgTextHeight(C);u.push({isPreferred:!!m&&d(v.identity.getKey(),m),text:b,textSize:{width:S,height:x},outsideFill:g.labelColor?g.labelColor:t.NewDataLabelUtils.defaultLabelColor,insideFill:t.NewDataLabelUtils.defaultInsideLabelColor,parentType:0,parentShape:{point:{x:i(v.x),y:s(v.y)},radius:n.getBubbleRadius(v.radius,l,a.viewport,c),validPositions:p},identity:v.identity,fontSize:g.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt})}return u}function r(e){var a=e.viewport.width,i=e.viewport.height,r=new t.Point(a/2,i/2),o=s(a,i);return l(r,o,e)}function s(e,a){var i=[],r=e/4,o=a/4;return i.push(new t.Point(r,o)),i.push(new t.Point(3*r,o)),i.push(new t.Point(r,3*o)),i.push(new t.Point(3*r,3*o)),i}function l(e,t,a){for(var i,r=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],o=[],n=a.xAxisProperties.scale,s=a.yAxisProperties.scale,l=0,d=a.data.dataPoints;l<d.length;l++){var p=d[l],h=n(p.x),g=s(p.y),m=c(h,g,e);a.drawBubbles?o[m]||(o[m]=p.identity):(i=u(t[m].x,t[m].y,h,g),i<r[m]&&(o[m]=p.identity,r[m]=i))}for(var y=[],f=0,v=o;f<v.length;f++){var b=v[f];b&&y.push(b.getKey())}return y}function c(e,t,a){return e>a.x&&t<=a.y?0:e<=a.x&&t<=a.y?1:e<=a.x&&t>a.y?2:3}function u(e,t,a,i){return Math.sqrt((e-a)*(e-a)+(t-i)*(t-i))}function d(e,t){for(var a=0,i=t;a<i.length;a++){var r=i[a];if(0===e.localeCompare(r))return!0}return!1}var p=[2,1,8,4,16,32,64,128];a.createLabelDataPoints=i})(l||(l={}));var c=(function(){function e(e,t,a,i){this.viewModel=e,this.element=t,this.tooltipsEnabled=a,this.tooltipService=i}return e.prototype.remove=function(){this.element.selectAll(e.TraceLine.selector).remove(),this.element.selectAll(e.TraceBubble.selector).remove()},e.prototype.render=function(a,i){var r=this.viewModel,o=r.data.currentViewModel,s=r.viewModel,l=[];if(_.isEmpty(a)||s.suppressDataPointRendering)this.remove();else{for(var c=r.data.currentFrameIndex,u=[],d=0,p=a.length;d<p;d++){l[d]=[],u[d]=!1;for(var h=0,g=r.data.allViewModels.length;h<g&&h<=c;h++){var m=_.find(r.data.allViewModels[h].dataPoints,(function(e,t){return e.identity.getKey()===a[d].identity.getKey()}));null!=m&&(m.frameIndex=h,l[d].push(m),h===c&&(u[d]=!0))}}var y=s.xAxisProperties.scale,f=s.yAxisProperties.scale,v=d3.svg.line().x((function(e){return y(e.x)})).y((function(e){return f(e.y)})).defined((function(e){return null!==e.x&&null!==e.y})),b=this.element.selectAll(e.TraceLine.selector).data(a,(function(e){return e.identity.getKey()}));b.enter().append("path").classed(e.TraceLine.class,!0);var C=[],S=[],x=!1;b.each((function(e,t){var a=this,i=a.hasAttribute("d")?a.getTotalLength():0;C.push(i);var r=$("<svg><path></path></svg>"),o=$("path",r);o.attr("d",v(l[t]));var n=l[t].length>0?o.get()[0].getTotalLength():0;S.push(n),x=x||n<i})),x?i?b.transition().ease("linear").duration(t.PlayChart.FrameAnimationDuration).attr("stroke-dashoffset",(function(e,t){return C[t]-S[t]})).transition().ease("linear").duration(1).delay(t.PlayChart.FrameAnimationDuration).style("stroke",(function(e){return n.getStrokeFill(e,!0)})).attr({d:function(e,t){return v(l[t])},"stroke-dasharray":function(e,t){return S[t]+" "+S[t]},"stroke-dashoffset":0}):b.style("stroke",(function(e){return n.getStrokeFill(e,!0)})).attr({d:function(e,t){return v(l[t])},"stroke-dasharray":function(e,t){return S[t]+" "+S[t]},"stroke-dashoffset":0}):(b.style("stroke",(function(e){return n.getStrokeFill(e,!0)})).attr({d:function(e,t){return v(l[t])},"stroke-dasharray":function(e,t){return S[t]+" "+S[t]},"stroke-dashoffset":function(e,t){return S[t]-C[t]}}),i?b.transition().ease("linear").duration(t.PlayChart.FrameAnimationDuration).attr("stroke-dashoffset",0):b.attr("stroke-dashoffset",0)),b.exit().remove();for(var w=[],P=0;P<l.length;P++){var D=l[P],T=u[P]?D.slice(0,D.length-1):D;w=w.concat(T)}var V=this.element.selectAll(e.TraceBubble.selector).data(w,(function(e){return e.identity.getKey()+e.x+e.y+e.size}));V.enter().append("circle").style("opacity",0).classed(e.TraceBubble.class,!0),V.attr("cx",(function(e){return y(e.x)})).attr("cy",(function(e){return f(e.y)})).attr("r",(function(e){return n.getBubbleRadius(e.radius,o.sizeRange,r.viewport,o.multiplier)})).style({"stroke-opacity":function(e){return n.getBubbleOpacity(e,!0)},stroke:function(e){return n.getStrokeFill(e,o.colorBorder)},fill:function(e){return e.fill},"fill-opacity":function(e){return null!=e.size?.2+e.frameIndex/c*.6:0}}).transition().ease("linear").duration(t.PlayChart.FrameAnimationDuration).style("opacity",1),V.exit().transition().ease("linear").duration(t.PlayChart.FrameAnimationDuration).style("opacity",0).remove(),this.tooltipsEnabled&&this.tooltipService.addTooltip(V,(function(e){return e.data&&e.data.tooltipInfo()}),(function(e){return e.data&&e.data.identity})),V.sort((function(e,t){return t.size-e.size}))}},e})();c.TraceLine=i("traceLine"),c.TraceBubble=i("traceBubble");var u=(function(){function t(e){this.dataPoints=e}return t.prototype.queryRegion=function(t){var a=_.filter(this.dataPoints,(function(a){return e.Double.lessOrEqualWithPrecision(t.left,a.x)&&e.Double.lessOrEqualWithPrecision(a.x,t.right)&&e.Double.lessOrEqualWithPrecision(t.bottom,a.y)&&e.Double.lessOrEqualWithPrecision(a.y,t.top)}));return a},t})();t.ScatterChartHitTester=u})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=t.labelPosition,i=jsCommon.PixelConverter,r=jsCommon.CssConstants.createClassAndSelector,o=(function(){function a(e){this.isScrollable=e.isScrollable,this.tooltipsEnabled=e.tooltipsEnabled,this.interactivityService=e.interactivityService,this.axisControlImprovements=e.axisControlImprovements}return a.prototype.init=function(e){this.svg=e.svg,this.svg.classed(a.WaterfallClassName,!0),this.style=e.style,this.currentViewport=e.viewport,this.hostServices=e.host,this.interactivity=e.interactivity,this.cartesianVisualHost=e.cartesianHost,this.options=e,this.element=e.element,this.tooltipService=e.services.tooltips,this.colors=this.style.colorPalette.dataColors,this.mainGraphicsSVG=this.svg.append("svg"),this.mainGraphicsContext=this.mainGraphicsSVG.append("g").classed(a.MainGraphicsContextClassName,!0),this.labelGraphicsContext=this.mainGraphicsSVG.append("g").classed(t.NewDataLabelUtils.labelGraphicsContextClass.class,!0)},a.converter=function(i,r,o,n,s,l,c,u){void 0===c&&(c=!0);var d,p,h,g,m=e.data.createDataViewCategoricalReaderAdvanced(i),y=m.data,f=a.formatStringProp,v=i.categorical.categories||[],b=s.increaseFill.solid.color,C=s.decreaseFill.solid.color,S=s.totalFill.solid.color,x=o.getLocalizedString(a.TotalLabel),w=o.getLocalizedString(a.IncreaseLabel),P=o.getLocalizedString(a.DecreaseLabel),D=[{label:w,color:b,icon:t.LegendIcon.Box,identity:t.SelectionIdBuilder.builder().withMeasure("increase").createSelectionId(),selected:!1},{label:P,color:C,icon:t.LegendIcon.Box,identity:t.SelectionIdBuilder.builder().withMeasure("decrease").createSelectionId(),selected:!1},{label:x,color:S,icon:t.LegendIcon.Box,identity:t.SelectionIdBuilder.builder().withMeasure("total").createSelectionId(),selected:!1}],T=t.LegendData.create(m.objects.getStaticObjects(),D,!0,"",!1),V=0,L=0,N=0,M=[],A=[],R=[];if(y.hasValues("Tooltips")&&(g=m.columns.getAllValueMetadataColumnsForRole("Tooltips",void 0)),y.hasValues("Y")){R=[m.columns.getValueMetadataColumn("Y")];var F=R[0].format;if(_.isEmpty(v))V=N=y.getValue("Y",0),L=0;else{var O=v[0];d=O.source,A=O.values.slice(),A.push(x),y.hasValues("Tooltips")&&(h=m.columns.getValueColumnCount("Tooltips"),p=_.map(new Array(h),(function(){return 0})));for(var I=0,H=y.getCategoryCount();I<H;I++){var j=A[I],z=y.getValue("Y",I)||0,k=t.SelectionIdBuilder.builder().withCategory(O,I).withMeasure(R[0].queryName).createSelectionId(),G=void 0;if(c){G=[],G.push({displayName:d.displayName,value:t.converterHelper.formatFromMetadataColumn(j,d,f)}),null!=z&&G.push({displayName:R[0].displayName,value:t.converterHelper.formatFromMetadataColumn(z,R[0],f,!1)});var E=y.getAllValuesForRole("Tooltips",I);if(E&&g){for(var W=0;W<E.length;W++)p[W]+=E[W];for(var B=0;B<E.length;B++)null!=E[B]&&g[B]&&G.push({displayName:g[B].displayName,value:t.converterHelper.formatFromMetadataColumn(E[B],g[B],f,!1)})}}var U=z>0?b:C;M.push({value:z,position:V,color:U,categoryValue:j,categoryIndex:I,seriesIndex:0,selected:!1,identity:k,highlight:!1,key:k.getKey(),tooltipInfo:G,labelFill:n.labelColor,labelFormatString:F}),V+=z,V>N&&(N=V),V<L&&(L=V)}}var K=void 0;if(c){K=[],d&&K.push({displayName:d.displayName,value:x}),null!=V&&K.push({displayName:R[0].displayName,value:t.converterHelper.formatFromMetadataColumn(V,R[0],f,!1)});var E=y.getAllValuesForRole("Tooltips",0,void 0);if(p=p?p:E,E&&g)for(var B=0;B<p.length;B++)null!=p[B]&&K.push({displayName:g[B].displayName,value:t.converterHelper.formatFromMetadataColumn(p[B],g[B],f)})}var Y=t.SelectionId.createNull();M.push({value:V,position:0,color:S,categoryValue:x,categoryIndex:I,identity:Y,seriesIndex:0,selected:!1,highlight:!1,key:Y.getKey(),tooltipInfo:K,labelFill:n.labelColor,labelFormatString:F,isTotal:!0})}l&&l.applySelectionStateToData(M);var q=t.CartesianHelper.getCategoryAxisProperties(i.metadata,void 0),X=t.CartesianHelper.getPreferredCategoryWidth(q);return{series:[{data:M,type:!_.isEmpty(R)&&R[0].type}],categories:A,categoryMetadata:d,preferredCategoryWidth:X,valuesMetadata:R,legend:T,hasHighlights:!1,positionMin:L,positionMax:N,dataLabelsSettings:n,sentimentColors:s}},a.prototype.setData=function(e){var i=this.getSentimentColorsFromObjects(null),r=e.length>0?e[0]:void 0;if(this.data={series:[{data:[]}],categories:[],valuesMetadata:[],legend:t.Legend.getDefaultLegendData(),hasHighlights:!1,categoryMetadata:null,scalarCategoryAxis:!1,positionMax:0,positionMin:0,dataLabelsSettings:t.dataLabelUtils.getDefaultWaterfallLabelSettings(!1,void 0),sentimentColors:i,axesLabels:{x:null,y:null}},r){if(r.metadata&&r.metadata.objects){var o=r.metadata.objects,n=o.labels;n&&t.dataLabelUtils.updateLabelSettingsFromLabelsObject(n,this.data.dataLabelsSettings,!0),i=this.getSentimentColorsFromObjects(o)}r.categorical&&(this.data=a.converter(r,this.colors,this.hostServices,this.data.dataLabelsSettings,i,this.interactivityService,this.tooltipsEnabled,this.axisControlImprovements))}},a.prototype.enumerateObjectInstances=function(e,i){switch(i.objectName){case"sentimentColors":this.enumerateSentimentColors(e);break;case"labels":var r={enumeration:e,dataLabelsSettings:this.data.dataLabelsSettings,positionObject:a.validLabelPositionsOptions,show:!0,displayUnits:!0,precision:!0,fontSize:!0,labelOrientation:!0,position:!0};t.dataLabelUtils.enumerateDataLabels(r)}},a.prototype.enumerateSentimentColors=function(e){var t=this.data.sentimentColors;e.pushInstance({selector:null,properties:{increaseFill:t.increaseFill,decreaseFill:t.decreaseFill,totalFill:t.totalFill},objectName:"sentimentColors"})},a.prototype.calculateCustomLegend=function(){return this.data.legend},a.prototype.hasLegend=function(){return!0},a.createClippedDataIfOverflowed=function(t,a){var i=t,r=t.series[0].data;return t&&a<r.length&&(i=e.Prototype.inherit(t),i.series=[{data:r.slice(0,a)}],i.categories=t.categories.slice(0,a)),i},a.prototype.calculateAxesProperties=function(e){var i=this;this.currentViewport=e.viewport,this.margin=e.margin;var r=this.clippedData=this.data,o=r.series,n=r.categories.length,s=this.getPreferredPlotArea(!1,n,t.CartesianChart.MinOrdinalRectThickness),l=r?r.preferredCategoryWidth:null,c=t.CartesianChart.getLayout(null,{availableWidth:s.width,categoryCount:n,preferredCategoryWidth:l,domain:null,isScalar:!1,isScrollable:this.isScrollable,trimOrdinalDataOnOverflow:e.trimOrdinalDataOnOverflow});this.isScrollable||(r=this.clippedData=a.createClippedDataIfOverflowed(r,c.categoryCount));var u=a.getXAxisCreationOptions(r,s.width,c,e),d=a.getYAxisCreationOptions(r,s.height,e),p=this.xAxisProperties=t.AxisHelper.createAxis(u),h=this.yAxisProperties=t.AxisHelper.createAxis(d);this.xAxisProperties.outerPaddingRatio=c.outerPaddingRatio;var g=this.xAxisProperties.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio),m=t.dataLabelUtils.createColumnFormatterCacheManager(),y=r.dataLabelsSettings,f=t.NewDataLabelUtils.getLabelUnitAndPrecisionForAxis(h,y);return this.layout={categoryCount:c.categoryCount,categoryThickness:c.categoryThickness,isScalar:c.isScalar,outerPaddingRatio:c.outerPaddingRatio,categoryWidth:g,labelText:function(e){var a=o[e.seriesIndex].type,i=m.getOrCreate(e.labelFormatString,y,f.units,f.getPrecision(!!e.labelFormatString,a));return t.dataLabelUtils.getLabelFormattedText({label:i.format(e.value)})},labelLayout:t.dataLabelUtils.getLabelLayoutXYForWaterfall(p,g,h,d.dataDomain),filter:function(e){return t.dataLabelUtils.doesDataLabelFitInShape(e,h,i.layout)},style:{fill:function(e){return e.isLabelInside?t.dataLabelUtils.defaultInsideLabelColor:e.labelFill}}},[p,h]},a.lookupXValue=function(e,a,i){var r=e.series[0].data;return a===r.length-1?r[a].categoryValue:t.CartesianHelper.lookupXValue(e,a,i,!1)},a.getXAxisCreationOptions=function(e,i,r,o){var n=t.AxisHelper.getCategoryValueType(e.categoryMetadata),s=t.AxisHelper.createDomain(e.series,n,!1,o.forcedXDomain,o.ensureXDomain),l=r.categoryThickness,c=l*r.outerPaddingRatio;return{pixelSpan:i,dataDomain:s,metaDataColumn:e.categoryMetadata,formatString:t.valueFormatter.getFormatString(e.categoryMetadata,a.formatStringProp),isScalar:!1,outerPadding:c,categoryThickness:l,getValueFn:function(t,i){return a.lookupXValue(e,t,i)},forcedTickCount:o.forcedTickCount,isCategoryAxis:!0,axisDisplayUnits:o.categoryAxisDisplayUnits,axisPrecision:o.categoryAxisPrecision,outerPaddingRatio:r.outerPaddingRatio}},a.getYAxisCreationOptions=function(e,i,r){var o=t.AxisHelper.combineDomain(r.forcedYDomain,[e.positionMin,e.positionMax],r.ensureYDomain);return{pixelSpan:i,dataDomain:o,zeroScalarDomain:[0,1],isScalar:!0,isVertical:!0,metaDataColumn:e.valuesMetadata,formatString:t.valueFormatter.getFormatString(e.valuesMetadata[0],a.formatStringProp),outerPadding:0,forcedTickCount:r.forcedTickCount,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,axisDisplayUnits:r.valueAxisDisplayUnits,axisPrecision:r.valueAxisPrecision,outerPaddingRatio:0}},a.prototype.getPreferredPlotArea=function(e,a,i,r){return void 0===r&&(r=t.CartesianChart.DefaultOuterPaddingRatio),t.CartesianChart.getPreferredPlotArea(a,i,this.currentViewport,this.isScrollable,e,this.margin,r)},a.prototype.getVisualCategoryAxisIsScalar=function(){return!1},a.prototype.overrideXScale=function(e){this.xAxisProperties=e},a.prototype.setFilteredData=function(t,a){var i=this.clippedData=e.Prototype.inherit(this.data);return i.series=[{data:i.series[0].data.slice(t,a)}],i.categories=i.categories.slice(t,a),i},a.prototype.createRects=function(e){var t=this.mainGraphicsContext,i=t.selectAll(a.CategoryValueClasses.selector),r=i.data(e,(function(e){return e.key}));return r.enter().append("rect").attr("class",(function(e){return a.CategoryValueClasses.class.concat(e.highlight?"highlight":"")})),r.exit().remove(),r},a.prototype.createConnectors=function(e){var t=this.mainGraphicsContext,i=t.selectAll(a.WaterfallConnectorClasses.selector),r=i.data(e.slice(0,e.length-1),(function(e){return e.key}));return r.enter().append("line").classed(a.WaterfallConnectorClasses.class,!0),r.exit().remove(),r},a.prototype.render=function(e){var i=this,r=this.clippedData.series[0].data,o=this.createRects(r),n=this.createConnectors(r);this.tooltipsEnabled&&this.tooltipService.addTooltip(o,(function(e){return e.data&&e.data.tooltipInfo}),(function(e){return e.data&&e.data.identity}));var s=this.interactivityService&&this.interactivityService.hasSelection(),l=this.xAxisProperties.scale,c=this.yAxisProperties.scale,u=c(0);this.mainGraphicsSVG.attr("height",this.getAvailableHeight()).attr("width",this.getAvailableWidth()),o.style("fill",(function(e){return e.color})).style("fill-opacity",(function(e){return e.isTotal?t.ColumnUtil.DefaultOpacity:t.ColumnUtil.getFillOpacity(e.selected,e.highlight,s,i.data.hasHighlights)})).attr("width",this.layout.categoryWidth).attr("x",(function(e){return l(e.categoryIndex)})).attr("y",(function(e){return a.getRectTop(c,e.position,e.value)})).attr("height",(function(e){return u-c(Math.abs(e.value))})),n.attr({x1:function(e){return l(e.categoryIndex)},y1:function(e){return c(e.position+e.value)},x2:function(e){return l(e.categoryIndex+1)+i.layout.categoryWidth},y2:function(e){return c(e.position+e.value)}});var d=this.data.dataLabelsSettings,p=[];(d&&d.show||d.showCategory)&&(p=this.createLabelDataPoints());var h=void 0;return this.interactivityService&&(h={bars:o}),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options),{dataPoints:this.data.series[0].data,behaviorOptions:h,labelDataPoints:p,labelsAreNumeric:!0,labelOrientation:d.labelOrientation,animateLabels:!e}},a.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},a.prototype.getSupportedCategoryAxisType=function(){return t.axisType.categorical},a.getRectTop=function(e,t,a){return a<0?e(t):e(t)-(e(0)-e(a))},a.prototype.getAvailableWidth=function(){return this.currentViewport.width-(this.margin.left+this.margin.right)},a.prototype.getAvailableHeight=function(){return this.currentViewport.height-(this.margin.top+this.margin.bottom)},a.prototype.getSentimentColorsFromObjects=function(a){var i=this.colors.getSentimentColors(),r=e.DataViewObjects.getFillColor(a,t.waterfallChartProps.sentimentColors.increaseFill,i[2].value),o=e.DataViewObjects.getFillColor(a,t.waterfallChartProps.sentimentColors.decreaseFill,i[0].value),n=e.DataViewObjects.getFillColor(a,t.waterfallChartProps.sentimentColors.totalFill,this.colors.getColorByIndex(0).value);return{increaseFill:{solid:{color:r}},decreaseFill:{solid:{color:o}},totalFill:{solid:{color:n}}}},a.prototype.createLabelDataPoints=function(){for(var r=[],o=this.data,n=this.xAxisProperties.scale,s=this.yAxisProperties.scale,l=s(0),c=o.series,u=t.NewDataLabelUtils.createColumnFormatterCacheManager(),d=o.dataLabelsSettings,p=t.NewDataLabelUtils.getLabelUnitAndPrecisionForAxis(this.yAxisProperties,d),h=0,g=c;h<g.length;h++)for(var m=g[h],y=0,f=m.data;y<f.length;y++){var v=f[y],b={left:n(v.categoryIndex),top:a.getRectTop(s,v.position,v.value),width:this.layout.categoryWidth,height:l-s(Math.abs(v.value))},C=v.labelFormatString,S=u.getOrCreate(C,this.data.dataLabelsSettings,p.units,p.getPrecision(!!C,m.type)),x=t.NewDataLabelUtils.getLabelFormattedText(S.format(v.value)),w={text:x,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:i.fromPoint(d.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},P=e.TextMeasurementService.measureSvgTextWidth(w),D=e.TextMeasurementService.estimateSvgTextHeight(w,!0),T=this.getValidPositions(d.position,v.value);r.push({isPreferred:!0,text:x,textSize:{width:P,height:D},outsideFill:d.labelColor?d.labelColor:t.NewDataLabelUtils.defaultLabelColor,insideFill:t.NewDataLabelUtils.defaultInsideLabelColor,parentType:1,parentShape:{rect:b,orientation:v.value>=0?1:2,validPositions:T},fontSize:d.fontSize,identity:void 0})}return r},a.prototype.getValidPositions=function(e,i){if(0===i)return a.validZeroLabelPosition;switch(e){case t.labelPosition.insideEnd:return[4];case t.labelPosition.insideCenter:return[1];case t.labelPosition.insideBase:return[2];case t.labelPosition.outsideEnd:return[16];default:return a.validLabelPositionsAuto}},a.prototype.getCartesianVisualCapabilities=function(){return{supportsHierarchicalCategoryAxis:!1}},a.prototype.getStaticSeriesRole=function(){},a})();o.formatStringProp={objectName:"general",propertyName:"formatString"},o.WaterfallClassName="waterfallChart",o.MainGraphicsContextClassName="mainGraphicsContext",o.IncreaseLabel="Waterfall_IncreaseLabel",o.DecreaseLabel="Waterfall_DecreaseLabel",o.TotalLabel="Waterfall_TotalLabel",o.CategoryValueClasses=r("column"),o.WaterfallConnectorClasses=r("waterfall-connector"),o.AutoLabelPosition="Auto",o.validLabelPositionsOptions=[o.AutoLabelPosition,a.outsideEnd,a.insideEnd,a.insideCenter,a.insideBase],o.validLabelPositionsAuto=[16,4,1,2],o.validZeroLabelPosition=[16,8],t.WaterfallChart=o})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(a){var i=t.utility.SelectionManager,r=(function(){function a(){}return a.converter=function(e){var i={size:a.getSize(e),color:a.getFill(e).solid.color,text:a.DefaultText,toolTipInfo:[{displayName:"Test",value:"1...2....3... can you see me? I am sending random strings to the tooltip"}],selector:t.SelectionId.createNull()},r=e.table;return r?(i.text=r.rows[0][0],e.categorical&&(i.selector=e.categorical.categories[0].identity?t.SelectionId.createWithId(e.categorical.categories[0].identity[0]):t.SelectionId.createNull()),i):i},a.prototype.init=function(e){this.root=d3.select(e.element.get(0)).append("svg").classed("hello",!0),this.svgText=this.root.append("text").style("cursor","pointer").style("stroke","green").style("stroke-width","0px").attr("text-anchor","middle"),this.selectiionManager=new i({hostServices:e.host})},a.prototype.update=function(i){if(i.dataViews||i.dataViews[0]){var r=this.dataView=i.dataViews[0],o=i.viewport,n=a.converter(r);this.root.attr({height:o.height,width:o.width});var s={fontFamily:"tahoma",fontSize:n.size+"px",text:n.text},l=e.TextMeasurementService.estimateSvgTextHeight(s),c=this.selectiionManager;this.svgText.style({fill:n.color,"font-size":s.fontSize,"font-family":s.fontFamily}).attr({y:o.height/2+l/3+"px",x:o.width/2}).text(n.text).on("click",(function(){var e=this;c.select(n.selector).then((function(t){return d3.select(e).style("stroke-width",t.length>0?"2px":"0px")}))})).data([n]),t.TooltipManager.addTooltip(this.svgText,(function(e){return e.data.toolTipInfo}))}},a.getFill=function(e){if(e){var t=e.metadata.objects;if(t){var a=t.general;if(a){var i=a.fill;if(i)return i}}}return{solid:{color:"red"}}},a.getSize=function(e){if(e){var t=e.metadata.objects;if(t){var a=t.general;if(a){var i=a.size;if(i)return i}}}return 100},a.prototype.enumerateObjectInstances=function(e){var t=[],i=this.dataView;switch(e.objectName){case"general":var r={objectName:"general",displayName:"General",selector:null,properties:{fill:a.getFill(i),size:a.getSize(i)}};t.push(r)}return t},a.prototype.destroy=function(){this.root=null},a})();r.capabilities={dataRoles:[{displayName:"Values",name:"Values",kind:e.VisualDataRoleKind.GroupingOrMeasure}],dataViewMappings:[{table:{rows:{for:{in:"Values"},dataReductionAlgorithm:{window:{count:100}}},rowCount:{preferred:{min:1}}}}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{fill:{type:{fill:{solid:{color:!0}}},displayName:"Fill"},size:{type:{numeric:!0},displayName:"Size"}}}}},r.DefaultText="Invalid DV",a.HelloIVisual=r})(a=t.samples||(t.samples={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=jsCommon.Color,i=e.data.DataRoleHelper;t.MaxLevelOfDetail=23,t.MinLevelOfDetail=1,t.DefaultFillOpacity=.5,t.DefaultBackgroundColor="#000000",t.LeaderLineColor="#000000";var r={category:"Category",series:"Series",size:"Size",latitude:"Y",longitude:"X",tooltips:"Tooltips",gradient:"Gradient"},o=11,n=(function(){function n(e){this.isDestroyed=!1,e.filledMap?(this.dataPointRenderer=new t.MapShapeDataPointRenderer(e.filledMapDataLabelsEnabled,e.tooltipsEnabled),this.filledMapDataLabelsEnabled=e.filledMapDataLabelsEnabled,this.isFilledMap=!0):(this.dataPointRenderer=new t.MapBubbleDataPointRenderer(e.tooltipsEnabled),this.isFilledMap=!1),this.mapControlFactory=e.mapControlFactory,this.behavior=e.behavior,this.tooltipsEnabled=e.tooltipsEnabled,this.disableZooming=e.disableZooming,this.disablePanning=e.disablePanning,this.isLegendScrollable=!!e.behavior,this.viewChangeThrottleInterval=e.viewChangeThrottleInterval,this.enableCurrentLocation=e.enableCurrentLocation,this.boundsHaveBeenUpdated=!1,this.customFontFamily=e.customFontFamily}return n.prototype.init=function(a){var i=this,r=this.element=a.element;this.pendingGeocodingRender=!1,this.renderImmediately=!1,this.currentViewport=a.viewport,this.style=a.style,this.colors=this.style.colorPalette.dataColors,this.behavior&&(this.interactivityService=t.createInteractivityService(a.host)),this.legend=e.visuals.createLegend(r,a.interactivity&&a.interactivity.isInteractiveLegend,this.interactivityService,this.isLegendScrollable),this.legendHeight=0,this.legendData=t.Legend.getDefaultLegendData(),this.geoTaggingAnalyzerService=e.createGeoTaggingAnalyzerService(a.host.getLocalizedString),this.host=a.host,this.tooltipService=t.createTooltipService(a.host),a.host.locale&&(this.locale=a.host.locale()),this.geocoder=a.host.geocoder(),this.promiseFactory=a.host.promiseFactory(),this.resetBounds(),this.isDestroyed=!1,this.mapControlFactory||(this.mapControlFactory=t.MapUtil.mapControlFactory(this.promiseFactory,this.host.loader())),this.mapControlFactory.createMapControl||(this.mapControlFactory.createMapControl=function(e,t){
return new Microsoft.Maps.Map(e,t)}),this.mapControlFactory.ensureMap(this.locale).then((function(){i.isDestroyed||(i.mapVersion=t.MapUtil.getBingMapsVersion(),7===i.mapVersion?(n.removeHillShading(),Microsoft.Maps.loadModule("Microsoft.Maps.Overlays.Style",{callback:function(){i.isDestroyed||(i.initialize(r[0]),i.enableCurrentLocation&&i.createCurrentLocation(r))}})):(i.initialize(r[0]),i.enableCurrentLocation&&i.createCurrentLocation(r)))}))},n.prototype.destroy=function(){this.isDestroyed=!0,this.geocodingContext&&this.geocodingContext.timeout&&this.geocodingContext.timeout.resolve(null)},n.prototype.createCurrentLocation=function(e){var a,i=this,r=InJs.DomFactory.div().addClass("mapCurrentLocation").appendTo(e);r.on("click",(function(){i.isCurrentLocation?(a&&i.mapControl.entities.remove(a),i.updateInternal(!1,!1),i.isCurrentLocation=!1):i.host.geolocation().getCurrentPosition((function(e){var r=new Microsoft.Maps.Location(e.coords.latitude,e.coords.longitude);a&&i.mapControl.entities.remove(a),a=t.MapUtil.CurrentLocation.createPushpin(r),i.mapControl.entities.push(a),i.updateMapView(r,o),i.isCurrentLocation=!0}))}))},n.prototype.addDataPoint=function(e){var t=e.location;this.updateBounds(t.latitude,t.longitude),this.scheduleRedraw()},n.prototype.scheduleRedraw=function(){var e=this;!this.pendingGeocodingRender&&this.mapControl&&(this.pendingGeocodingRender=!0,setTimeout((function(){e.updateInternal(!0,!0),e.pendingGeocodingRender=!1}),this.renderImmediately?0:n.ScheduleRedrawInterval))},n.prototype.enqueueGeoCode=function(e){var t=this,a=this.geocoder.tryGeocodeImmediate(e.geocodingQuery,this.geocodingCategory);if(a)this.completeGeoCode(e,a);else{var i=this.geocodingContext;this.geocoder.geocode(e.geocodingQuery,this.geocodingCategory,{timeout:i.timeout.promise}).then((function(a){!t.isDestroyed&&a&&i===t.geocodingContext&&t.completeGeoCode(e,a)}))}},n.prototype.completeGeoCode=function(e,t){e.location=t,this.addDataPoint(e)},n.prototype.enqueueGeoCodeAndGeoShape=function(e,t){var a=this,i=this.geocoder.tryGeocodeImmediate(e.geocodingQuery,this.geocodingCategory);if(i)this.completeGeoCodeAndGeoShape(e,t,i);else{var r=this.geocodingContext;this.geocoder.geocode(e.geocodingQuery,this.geocodingCategory,{timeout:r.timeout.promise}).then((function(i){!a.isDestroyed&&i&&r===a.geocodingContext&&a.completeGeoCodeAndGeoShape(e,t,i)}))}},n.prototype.completeGeoCodeAndGeoShape=function(e,t,a){e.location=a,this.enqueueGeoShape(e,t)},n.prototype.enqueueGeoShape=function(e,t){var a=this,i=this.geocoder.tryGeocodeBoundaryImmediate(e.location.latitude,e.location.longitude,this.geocodingCategory,t.level,t.maxPolygons,e.location.entityType);if(i)this.completeGeoShape(e,t,i);else{var r=this.geocodingContext;this.geocoder.geocodeBoundary(e.location.latitude,e.location.longitude,this.geocodingCategory,t.level,t.maxPolygons,{timeout:r.timeout.promise,entityType:e.location.entityType}).then((function(i){!a.isDestroyed&&i&&r===a.geocodingContext&&a.completeGeoShape(e,t,i)}))}},n.prototype.completeGeoShape=function(e,a,i){var r;0===i.locations.length||i.locations[0].geographic?r=t.MapShapeDataPointRenderer.buildPaths(i.locations):(t.MapUtil.calcGeoData(i),r=t.MapShapeDataPointRenderer.buildPaths(i.locations)),e.paths=r,this.addDataPoint(e)},n.prototype.getOptimumLevelOfDetail=function(e,a){var i=this.dataPointRenderer.getDataPointCount();if(0===i)return t.MapUtil.MinLevelOfDetail;for(var r=this.dataPointRenderer.getDataPointPadding(),o=t.MapUtil.MaxLevelOfDetail;o>=t.MapUtil.MinLevelOfDetail;o--){var n=t.MapUtil.latLongToPixelXY(this.minLatitude,this.minLongitude,o),s=t.MapUtil.latLongToPixelXY(this.maxLatitude,this.maxLongitude,o);if(s.x-n.x+r<=e&&n.y-s.y+r<=a)return i<2&&(o=Math.min(t.MapUtil.MaxAutoZoomLevel,o)),o}return t.MapUtil.MinLevelOfDetail},n.prototype.getViewCenter=function(e){var a=t.MapUtil.latLongToPixelXY(this.minLatitude,this.minLongitude,e),i=t.MapUtil.latLongToPixelXY(this.maxLatitude,this.maxLongitude,e);return t.MapUtil.pixelXYToLocation((a.x+i.x)/2,(i.y+a.y)/2,e)},n.prototype.resetBounds=function(){this.boundsHaveBeenUpdated=!1,this.minLongitude=t.MapUtil.MaxAllowedLongitude,this.maxLongitude=t.MapUtil.MinAllowedLongitude,this.minLatitude=t.MapUtil.MaxAllowedLatitude,this.maxLatitude=t.MapUtil.MinAllowedLatitude},n.prototype.updateBounds=function(e,t){this.boundsHaveBeenUpdated=!0,t<this.minLongitude&&(this.minLongitude=t),t>this.maxLongitude&&(this.maxLongitude=t),e<this.minLatitude&&(this.minLatitude=e),e>this.maxLatitude&&(this.maxLatitude=e)},n.prototype.renderLegend=function(e){var a=e.position;void 0!==a?this.legend.changeOrientation(a):this.legend.changeOrientation(t.LegendPosition.Top),this.legend.drawLegend(e,this.currentViewport)},n.calculateGroupSizes=function(e,t,a,i,r){for(var o=e.values[0].values.length,n=t.length,s=0,l=o;s<l;++s){var c=null;if(i>=0)for(var u=0;u<n;++u){var d=t[u].values[i].values[s];d&&(null===c?c=d:c+=d)}a.push(c),c&&(r?(r.min=Math.min(r.min,c),r.max=Math.max(r.max,c)):r={min:c,max:c})}return r},n.calculateRadius=function(e,t,a){void 0===a&&(a=1);var i=e?e.max-e.min:0,r=6;return null!=e&&null!=t&&0!==i&&(r=14*((t-e.min)/i)+6),r*a},n.getGeocodingCategory=function(e,t){var a,i=e.type;if(a=t.getFieldTypeFromDescriptor(i))return a;var r=e.displayName;if(a=t.getFieldType(r))return a;var o=e.roles;if(o)for(var n=Object.keys(o),s=0,l=n.length;s<l;++s){var c=t.getFieldType(n[s]);if(c)return c}},n.hasSizeField=function(e,t){if(_.isEmpty(e))return!1;for(var a=0,i=e.length;a<i;a++){var o=e[a].source.roles;if(!o&&a===t&&e[a].source.type.numeric)return!0;if(o)for(var n=Object.keys(o),s=0,l=n.length;s<l;s++){var c=n[s];if(c===r.size)return!0}}return!1},n.shouldEnumerateDataPoints=function(e,t){var a=i.hasRoleInDataView(e,r.series),o=t?r.size:r.gradient,n=i.hasRoleInDataView(e,o);return a||!n},n.shouldEnumerateCategoryLabels=function(e,t){return!e||t},n.prototype.enumerateObjectInstances=function(a){var i=new t.ObjectEnumerationBuilder,r=this.data?this.data.dataLabelSettings:t.dataLabelUtils.getDefaultMapLabelSettings(),o=this.data?this.data.properties:n.getDefaultMapData().properties;if(this.dataView){var s=e.data.createDataViewCategoricalReader(this.dataView);switch(a.objectName){case"dataPoint":if(n.shouldEnumerateDataPoints(this.dataView,this.isFilledMap)){var l=[],c=this.hasDynamicSeries;if(!c){var u=this.dataPointRenderer.converter(this.getMapViewPort(),r,this.interactivityService,this.tooltipsEnabled);l=u.bubbleData}n.enumerateDataPoints(i,this.legendData,this.data,s)}break;case"categoryLabels":n.shouldEnumerateCategoryLabels(this.isFilledMap,this.filledMapDataLabelsEnabled)&&t.dataLabelUtils.enumerateCategoryLabels(i,r,!0,!0);break;case"legend":this.hasDynamicSeries&&t.Legend.enumerate({enumeration:i,legendData:this.legendData,customFontFamily:this.customFontFamily});break;case"labels":if(this.filledMapDataLabelsEnabled){var d={enumeration:i,dataLabelsSettings:r,show:!0,displayUnits:!0,precision:!0};t.dataLabelUtils.enumerateDataLabels(d)}break;case"bubbles":n.enumerateBubbles(i,o);break;case"mapControls":this.enumerateMapControls(i)}return i.complete()}},n.enumerateDataPoints=function(i,r,o,n){if(o){var s=r&&r.dataPoints.length;if(o.hasDynamicSeries)for(var l=0;l<s;l++){var c=r.dataPoints[l];i.pushInstance({objectName:"dataPoint",displayName:c.label,selector:t.ColorHelper.normalizeSelector(c.identity.getSelector()),properties:{fill:{solid:{color:c.color}}}})}else{var u=e.DataViewObjects.getValue(n.objects.getStaticObjects(),t.mapProps.dataPoint.showAllDataPoints);if(i.pushInstance({objectName:"dataPoint",selector:null,properties:{defaultColor:{solid:{color:o.properties.defaultDataPointColor}}}}).pushInstance({objectName:"dataPoint",selector:null,properties:{showAllDataPoints:!!u}}),o&&u)for(var l=0;l<o.dataPoints.length;l++){var c=o.dataPoints[l],d=c.subDataPoints[0];i.pushInstance({objectName:"dataPoint",displayName:c.categoryValue,selector:t.ColorHelper.normalizeSelector(d.identity.getSelector()),properties:{fill:{solid:{color:a.normalizeToHexString(d.fill)}}}})}}}},n.enumerateBubbles=function(e,a){a&&e.pushInstance({selector:null,properties:{bubbleSize:t.shapeUtil.invertBubbleSizeMultiplier(a.bubbleSizeMultiplier)},objectName:"bubbles"})},n.prototype.enumerateMapControls=function(e){this.data&&e.pushInstance({selector:null,properties:{autoZoom:this.data.properties.autoZoomEnabled},objectName:"mapControl"})},n.prototype.onDataChanged=function(e){var a=this;this.resetBounds(),this.geocodingContext&&this.geocodingContext.timeout&&this.geocodingContext.timeout.resolve(null),this.geocodingContext={timeout:this.promiseFactory.defer()},this.behavior&&this.behavior.resetZoomPan();var i=this.dataView=e.dataViews[0],r=this.isFilledMap,o=[],s=n.getDefaultMapData();if(i){s=this.data=n.converter({dataView:i,geoTaggingAnalyzerService:this.geoTaggingAnalyzerService,isFilledMap:r,style:this.style}),this.hasDynamicSeries=s.hasDynamicSeries;var l=!1;s.properties.autoZoomEnabled&&!this.autoZoomWasEnabled?(l=!0,s.properties.savedLatitude=void 0,s.properties.savedLongitude=void 0,s.properties.savedZoomLevel=void 0,this.persistZoomPanState()):!s.properties.autoZoomEnabled&&this.autoZoomWasEnabled&&(l=!0,this.updateZoomPanStateFromControl(),this.persistZoomPanState()),this.autoZoomWasEnabled=s.properties.autoZoomEnabled,n.isDynamicSeriesWithoutValuesCase(i)?this.legendData=t.Legend.buildFromFirstMatrixRowLevel(i,new t.ColorHelper(this.colors,t.mapProps.dataPoint.fill,s.properties.defaultDataPointColor),t.mapProps.general.formatString,!0):this.legendData=t.Legend.buildSeriesLegendData({dataView:i,style:this.style,showByDefault:!0}),this.dataPointsToEnumerate=this.legendData.dataPoints,this.renderLegend(this.legendData),null!=s?(this.geocodingCategory=s.geocodingCategory,this.mapControlFactory.ensureMap(this.locale).then((function(){if(!a.isDestroyed){a.mapVersion||(a.mapVersion=t.MapUtil.getBingMapsVersion()),8===a.mapVersion&&(o.push({code:"V8BingMapsCompatibilityWarning",getMessages:function(e){return{message:e.get("V8BingMapsCompatibilityWarningMessage"),title:e.get("V8BingMapsCompatibilityWarningTitle"),detail:e.get("V8BingMapsCompatibilityWarningDetail")}}}),a.host.setWarnings(o)),n.removeHillShading();var e;r&&(e=t.MapShapeDataPointRenderer.getFilledMapParams(a.geocodingCategory,s.dataPoints.length));try{a.renderImmediately=!0;for(var i=0,l=s.dataPoints;i<l.length;i++){var c=l[i];if(c.location)r&&!c.paths?a.enqueueGeoShape(c,e):a.addDataPoint(c);else{var u=c.categoryValue;null!=u&&""!==u&&(r?a.enqueueGeoCodeAndGeoShape(c,e):a.enqueueGeoCode(c))}}}finally{a.renderImmediately=!1}}}))):this.clearDataPoints(),r&&(this.geocodingCategory&&this.geoTaggingAnalyzerService.isGeoshapable(this.geocodingCategory)||o.push(new t.FilledMapWithoutValidGeotagCategoryWarning))}else this.clearDataPoints(),this.renderLegend(t.Legend.getDefaultLegendData()),this.dataPointsToEnumerate=[];_.isEmpty(o)||this.host.setWarnings(o),this.dataPointRenderer.setData(s),this.updateInternal(!0,!0)},n.converter=function(i){if(n.isDynamicSeriesWithoutValuesCase(i.dataView))return n.convertDynamicSeriesWithoutValues(i);var o=e.data.createDataViewCategoricalReader(i.dataView,{colorOptions:{valueRole:r.size,visualStyle:i.style}}),s=o.data,l=o.objects,c=[],u=s.hasSeries(),d=s.hasValues(r.size),p=null,h=o.objects.getStaticObjects(),g=t.shapeUtil.getBubbleSizeMultiplier(e.DataViewObjects.getValue(h,t.mapProps.bubbles.bubbleSize,1)),m=i.isFilledMap;if(s.hasCategories()){var y=[],f=void 0;if(d){for(var v=void 0,b=void 0,C=0,S=s.getCategoryCount();C<S;C++){for(var x=void 0,w=0,P=s.getSeriesCount();w<P;w++){var D=s.getValue(r.size,C,w);null==x&&null!=D&&(x=0),null!=x&&(x+=D)}y.push(x),null!=x&&((void 0===v||x<v)&&(v=x),(void 0===b||x>b)&&(b=x))}f=void 0!==v&&void 0!==b?{max:b,min:v}:void 0}var T=s.hasCompositeCategories()&&s.hasCategoryWithRole(r.longitude)&&s.hasCategoryWithRole(r.latitude),V=s.hasCategoryWithRole(r.category);if(V&&(p=n.getGeocodingCategory(i.dataView.categorical.categories[0].source,i.geoTaggingAnalyzerService)),T||V)for(var C=0,S=s.getCategoryCount();C<S;C++){var L=void 0,_=void 0,N=void 0,M=void 0,A=void 0,R=void 0,F=void 0,O=void 0,I=void 0;if(V){if(_=s.getCategoryValue(r.category,C),L=t.valueFormatter.format(_,l.getCategoryFormatString(r.category)),M={displayName:s.getCategoryDisplayName(r.category),value:L},s.hasValues(r.latitude)&&s.hasValues(r.longitude)){var H=s.getFirstNonNullValueForCategory(r.latitude,C),j=s.getFirstNonNullValueForCategory(r.longitude,C);null!=H&&null!=j&&(N={latitude:H,longitude:j}),A={displayName:s.getValueDisplayName(r.latitude),value:t.valueFormatter.format(H,l.getValueFormatString(r.latitude))},R={displayName:s.getValueDisplayName(r.longitude),value:t.valueFormatter.format(j,l.getValueFormatString(r.longitude))}}}else{var H=s.getCategoryValue(r.latitude,C),z=t.valueFormatter.format(H,l.getCategoryFormatString(r.latitude)),j=s.getCategoryValue(r.longitude,C),k=t.valueFormatter.format(j,l.getCategoryFormatString(r.longitude));null!=H&&null!=j&&(L=z+", "+k,N={latitude:H,longitude:j},A={displayName:s.getCategoryDisplayName(r.latitude),value:z},R={displayName:s.getCategoryDisplayName(r.longitude),value:k})}var G=d?y[C]:void 0,E=[],P=s.getSeriesCount();d||u||(P=1);for(var w=0;w<P;w++){var W=u?s.getSeriesName(w):void 0;if(!u||d||!n.hasNoValuesAtInteresection(o,[r.tooltips,r.longitude,r.latitude],C,w)){var B=o.colors.createBySeries(w,C),U=a.parseColorString(B),K=a.hexString(a.darken(U,n.StrokeDarkenColorValue));U.A=n.innerGeometryAlpha;var Y=a.rgbString(U);u&&(F={displayName:s.getSeriesDisplayName(),value:t.valueFormatter.format(W,l.getSeriesFormatString())});var q=void 0;if(d){q=s.getValue(r.size,C,w);var X=o.objects.getValueFormatString(r.size);O={displayName:s.getValueDisplayName(r.size),value:t.valueFormatter.format(q,X)}}if(s.hasValues(r.gradient)){var $=s.getValue(r.gradient,C,w),Q=o.objects.getValueFormatString(r.gradient);I={displayName:s.getValueDisplayName(r.gradient),value:t.valueFormatter.format($,Q)}}var Z=[];M&&Z.push(M),F&&Z.push(F),A&&Z.push(A),R&&Z.push(R),O&&Z.push(O),I&&Z.push(I),t.TooltipBuilder.addTooltipMeasures(o,Z,C,w);var J=o.identities.createForDataPoint(C,w,d?[r.size]:void 0);m&&(J=o.identities.createForCategory(C,[d?r.size:void 0])),(q||!d||0===q&&m)&&E.push({value:q,fill:Y,stroke:K,identity:J,tooltipInfo:Z})}}(G||!d||0===G&&m)&&E.length>0&&c.push({geocodingQuery:L,value:G,categoryValue:L,subDataPoints:E,radius:n.calculateRadius(f,G,g),location:N})}}var ee=e.DataViewObjects.getValue(h,t.mapProps.mapControls.autoZoom,!0),te={dataPoints:c,geocodingCategory:p,hasDynamicSeries:u,hasSize:d,properties:{bubbleSizeMultiplier:g,autoZoomEnabled:ee,savedLatitude:e.DataViewObjects.getValue(h,t.mapProps.mapControls.centerLatitude),savedLongitude:e.DataViewObjects.getValue(h,t.mapProps.mapControls.centerLongitude),savedZoomLevel:e.DataViewObjects.getValue(h,t.mapProps.mapControls.zoomLevel),defaultDataPointColor:o.objects.getDefaultColor()},dataLabelSettings:n.calculateDataLabelSettings(i.dataView,m)};return te},n.convertDynamicSeriesWithoutValues=function(i){var o=i.dataView.metadata.objects,s=i.dataView.matrix,l=[],c=s.rows.root.children;if(!c)return n.getDefaultMapData();var u,d,p,h,g,m=t.shapeUtil.getBubbleSizeMultiplier(e.DataViewObjects.getValue(o,t.mapProps.bubbles.bubbleSize,1)),y=c.length,f={},v=0,b=n.calculateRadius(void 0,void 0,m),C=s.rows.root.childIdentityFields,S=s.rows.levels[0].sources[0],x=t.mapProps.general.formatString,w=new t.ColorHelper(i.style.colorPalette.dataColors),P=s.rows.levels[1];if(null!=P&&!_.isEmpty(P.sources)&&(u=P.sources[P.sources.length-1],P.sources.length>=1)){var D=P.sources[0],T=P.sources[1];D&&D.roles[r.longitude]?(d=D,h=0):D&&D.roles[r.latitude]&&(p=D,g=0),T&&T.roles[r.longitude]?(d=T,h=1):T&&T.roles[r.latitude]&&(p=T,g=1)}for(var V,L=0;L<y;L++){var N=c[L],M=N.children,A=N.value,R=t.converterHelper.formatFromMetadataColumn(A,S,t.mapProps.general.formatString),F=w.getColorForSeriesValue(N.objects,C,A),O=a.parseColorString(F),I=a.hexString(a.darken(O,n.StrokeDarkenColorValue));O.A=n.innerGeometryAlpha;var H=a.rgbString(O),j={displayName:S.displayName,value:R};if(u&&u.roles[r.category]){V=n.getGeocodingCategory(u,i.geoTaggingAnalyzerService);for(var z=0,k=M.length;z<k;z++){var G=M[z],E=t.converterHelper.formatFromMetadataColumn(G.value,u,x),W=(new t.SelectionIdBuilder).withColumnIdentity(G.identity,u.queryName),B=W.createSelectionId().getKey(),U=W.withColumnIdentity(N.identity,S.queryName).createSelectionId(),K=f[B];null==K&&(K=v++,f[B]=K);var Y=l[K];Y||(Y={categoryValue:E,geocodingQuery:E,radius:b,subDataPoints:[],value:void 0},l[K]=Y);var q={displayName:u.displayName,value:E},X=[];q&&X.push(q),j&&X.push(j),Y.subDataPoints.push({fill:H,stroke:I,identity:U,value:void 0,tooltipInfo:X})}}else if(S&&S.roles[r.category]&&S.roles[r.series]){V=n.getGeocodingCategory(S,i.geoTaggingAnalyzerService);var U=(new t.SelectionIdBuilder).withColumnIdentity(N.identity,S.queryName).createSelectionId(),$=U.getKey(),K=f[$];null==K&&(K=v++,f[$]=K);var Y=l[K];Y||(Y={categoryValue:R,geocodingQuery:R,radius:b,subDataPoints:[],value:void 0},l[K]=Y);var X=[];j&&X.push(j),Y.subDataPoints.push({fill:H,stroke:I,identity:U,value:void 0,tooltipInfo:X})}else{if(!(d&&d.roles[r.longitude]&&p&&p.roles[r.latitude]))return n.getDefaultMapData();for(var Q=0,Z=M.length;Q<Z;Q++){var J=M[Q],ee=J.levelValues[h].value,te=J.levelValues[g].value;if(null!=te||null!=ee){var ae=t.converterHelper.formatFromMetadataColumn(ee,d,x),ie=t.converterHelper.formatFromMetadataColumn(te,p,x),re=void 0,oe=void 0,ne=void 0,X=[],E=ie+", "+ae,W=(new t.SelectionIdBuilder).withColumnIdentity(J.identity,p.queryName),se=W.createSelectionId().getKey(),U=W.withColumnIdentity(N.identity,S.queryName).createSelectionId();ne={latitude:te,longitude:ee},re={displayName:p.displayName,value:ie},oe={displayName:d.displayName,value:ae};var K=f[se];null==K&&(K=v++,f[se]=K);var Y=l[K];Y||(Y={categoryValue:E,geocodingQuery:E,radius:b,subDataPoints:[],value:void 0,location:ne},l[K]=Y),j&&X.push(j),re&&X.push(re),oe&&X.push(oe),Y.subDataPoints.push({fill:H,stroke:I,identity:U,value:void 0,tooltipInfo:X})}}}}var le=e.DataViewObjects.getValue(o,t.mapProps.mapControls.autoZoom);return void 0===le&&(le=!0),{dataPoints:l,hasDynamicSeries:!0,geocodingCategory:V,hasSize:!1,properties:{bubbleSizeMultiplier:m,autoZoomEnabled:le,savedLatitude:e.DataViewObjects.getValue(o,t.mapProps.mapControls.centerLatitude),savedLongitude:e.DataViewObjects.getValue(o,t.mapProps.mapControls.centerLongitude),savedZoomLevel:e.DataViewObjects.getValue(o,t.mapProps.mapControls.zoomLevel),defaultDataPointColor:e.DataViewObjects.getFillColor(o,t.mapProps.dataPoint.defaultColor)},dataLabelSettings:n.calculateDataLabelSettings(i.dataView,i.isFilledMap)}},n.isDynamicSeriesWithoutValuesCase=function(e){return e.matrix&&!e.categorical},n.calculateDataLabelSettings=function(a,i){var r=t.dataLabelUtils.getDefaultMapLabelSettings(),o=a.metadata&&a.metadata.objects;if(!o)return r;if(r.showCategory=e.DataViewObjects.getValue(o,t.filledMapProps.categoryLabels.show,r.showCategory),i){r.precision=e.DataViewObjects.getValue(o,t.filledMapProps.labels.labelPrecision,r.precision),r.precision=r.precision!==t.dataLabelUtils.defaultLabelPrecision&&r.precision<0?0:r.precision,r.displayUnits=e.DataViewObjects.getValue(o,t.filledMapProps.labels.labelDisplayUnits,r.displayUnits);var n=o.labels;n&&(r.show=void 0!==n.show?n.show:r.show,void 0!==n.color&&(r.labelColor=n.color.solid.color))}else{var s=o.categoryLabels;s&&t.dataLabelUtils.updateLabelSettingsFromLabelsObject(s,r)}return r},n.getDefaultMapData=function(){return{dataPoints:[],hasDynamicSeries:!0,geocodingCategory:"",hasSize:!1,properties:{autoZoomEnabled:!0,bubbleSizeMultiplier:1,savedLatitude:void 0,savedLongitude:void 0,savedZoomLevel:void 0,defaultDataPointColor:void 0},dataLabelSettings:t.dataLabelUtils.getDefaultMapLabelSettings()}},n.hasNoValuesAtInteresection=function(e,t,a,i){for(var r=!1,o=0,n=t;o<n.length;o++){var s=n[o];if(e.data.hasValues(s)&&(r=!0,!_.all(e.data.getAllValuesForRole(s,a,i),(function(e){return null==e}))))return!1}return r},n.prototype.swapLogoContainerChildElement=function(){var e=this.element.find(".LogoContainer");if(e){var t=e.find("a");if(null==t)return;var a=$("<div>");t.children().clone().appendTo(a),t.remove(),a.appendTo(e)}},n.prototype.onResizing=function(e){this.currentViewport.width===e.width&&this.currentViewport.height===e.height||(this.currentViewport=e,this.renderLegend(this.legendData),this.updateInternal(!1,!1))},n.prototype.initialize=function(e){var a=this,i={credentials:t.MapUtil.Settings.BingKey,showMapTypeSelector:!1,enableClickableLogo:!1,enableSearchLogo:!1,mapTypeId:Microsoft.Maps.MapTypeId.road,customizeOverlays:!0,showDashboard:!1,showScalebar:!1,disableKeyboardInput:!0,disableZooming:this.disableZooming,disablePanning:this.disablePanning},r=this.root=InJs.DomFactory.div().addClass(n.MapContainer.cssClass).appendTo(e);this.mapControl=this.mapControlFactory.createMapControl(r[0],i),void 0!==this.viewChangeThrottleInterval?Microsoft.Maps.Events.addThrottledHandler(this.mapControl,"viewchange",(function(){a.onViewChanged()}),this.viewChangeThrottleInterval):Microsoft.Maps.Events.addHandler(this.mapControl,"viewchange",(function(){a.onViewChanged()})),Microsoft.Maps.Events.addHandler(this.mapControl,"viewchangeend",(function(){a.onViewChangeEnded()}));var o=7===this.mapVersion&&!!this.behavior;this.dataPointRenderer.init(this.mapControl,r,o,this.tooltipService),this.pendingGeocodingRender||this.updateInternal(!0,!0)},n.prototype.onViewChanged=function(){this.updateOffsets(!1,!1),this.behavior&&this.behavior.viewChanged(),this.swapLogoContainerChildElement()},n.prototype.onViewChangeEnded=function(){this.data&&this.data.properties.autoZoomEnabled===!1&&(this.updateZoomPanStateFromControl(),this.persistZoomPanState()),this.dataPointRenderer.updateInternalDataLabels(this.currentViewport,!0)},n.prototype.getMapViewPort=function(){var e=this.currentViewport,t=this.legend.getMargins(),a={width:e.width-t.width,height:e.height-t.height};return a},n.prototype.updateInternal=function(e,a){var i=this.data&&this.data.properties;if(this.mapControl&&i){var r=this.legend.isVisible();r||(this.legendData=t.Legend.getDefaultLegendData());var o=this.element.children(n.MapContainer.selector),s=this.getMapViewPort();if(o.height(s.height),o.width(s.width),this.updateOffsets(e,a),!this.behavior||!this.behavior.hasReceivedZoomOrPanEvent())if(i.autoZoomEnabled===!1)this.updateMapView(new Microsoft.Maps.Location(i.savedLatitude,i.savedLongitude),i.savedZoomLevel);else if(this.boundsHaveBeenUpdated){var l=this.getOptimumLevelOfDetail(s.width,s.height),c=this.getViewCenter(l);this.updateMapView(c,l)}}},n.prototype.updateMapView=function(e,t){this.mapControl.setView({center:e,zoom:t,animate:!0})},n.prototype.updateOffsets=function(e,a){var i,r=this.dataView,o=this.getMapViewPort();i=r?this.dataPointRenderer.converter(o,this.data.dataLabelSettings,this.interactivityService,this.tooltipsEnabled):{bubbleData:[],shapeData:[],sliceData:[]};var n=this.dataPointRenderer.updateInternal(i,o,e,this.interactivityService,a);t.Legend.positionChartArea(d3.select(this.root[0]),this.legend),this.interactivityService&&n&&this.interactivityService.bind(n.dataPoints,this.behavior,n)},n.prototype.onClearSelection=function(){this.interactivityService.clearSelection(),this.updateOffsets(!1,!1)},n.prototype.clearDataPoints=function(){this.dataPointRenderer.clearDataPoints(),this.legend.drawLegend(t.Legend.getDefaultLegendData(),this.currentViewport)},n.removeHillShading=function(){Microsoft.Maps.Globals&&"string"==typeof Microsoft.Maps.Globals.roadUriFormat&&(Microsoft.Maps.Globals.roadUriFormat=Microsoft.Maps.Globals.roadUriFormat.replace("&shading=hill",""))},n.prototype.updateZoomPanStateFromControl=function(){var e=this.mapControl.getCenter(),t=this.data.properties;t.savedLatitude=e.latitude,t.savedLongitude=e.longitude,t.savedZoomLevel=this.mapControl.getZoom()},n.prototype.persistZoomPanState=function(){var e=this.data&&this.data.properties,t=e&&e.autoZoomEnabled;if(1===this.host.getViewMode()&&e)if(t){var a={replace:[{objectName:"mapControls",properties:{autoZoom:t},selector:null}]};this.host.persistProperties(a)}else{var a={replace:[{objectName:"mapControls",properties:{centerLatitude:e.savedLatitude,centerLongitude:e.savedLongitude,zoomLevel:e.savedZoomLevel,autoZoom:t},selector:null}]};this.host.persistProperties(a)}},n})();n.MapContainer={cssClass:"mapControl",selector:".mapControl"},n.innerGeometryAlpha=.6,n.StrokeDarkenColorValue=63.75,n.ScheduleRedrawInterval=3e3,t.Map=n})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=jsCommon.PixelConverter,i=(function(){function i(e){this.tooltipsEnabled=e}return i.prototype.init=function(e,a,i,r){this.mapControl=e,this.root=a,a.css("display","inline-block");var o=d3.select(a[0]);o.attr("drag-resize-disabled","true");var n=this.svg=o.append("svg").style("position","absolute").style("pointer-events","none");if(i){var s=this.clearSvg=d3.select(this.mapControl.getRootElement()).append("svg").style("position","absolute");this.clearCatcher=t.appendClearCatcher(s)}this.bubbleGraphicsContext=n.append("g").classed("mapBubbles",!0),this.sliceGraphicsContext=n.append("g").classed("mapSlices",!0),this.labelBackgroundGraphicsContext=n.append("g").classed(t.NewDataLabelUtils.labelBackgroundGraphicsContextClass.class,!0),this.labelGraphicsContext=n.append("g").classed(t.NewDataLabelUtils.labelGraphicsContextClass.class,!0),this.sliceLayout=d3.layout.pie().sort(null).value((function(e){return e.value})),this.arc=d3.svg.arc(),this.clearMaxDataPointRadius(),this.dataLabelsSettings=t.dataLabelUtils.getDefaultMapLabelSettings(),this.tooltipService=r},i.prototype.setData=function(e){this.mapData=e},i.prototype.clearDataPoints=function(){this.mapData=t.Map.getDefaultMapData()},i.prototype.getDataPointCount=function(){return this.mapData?_.filter(this.mapData.dataPoints,(function(e){return!!e.location})).length:0},i.prototype.getDataPointPadding=function(){return 2*this.maxDataPointRadius},i.prototype.clearMaxDataPointRadius=function(){this.maxDataPointRadius=0},i.prototype.setMaxDataPointRadius=function(e){this.maxDataPointRadius=Math.max(e,this.maxDataPointRadius)},i.prototype.getDefaultMap=function(e,t){this.clearDataPoints()},i.prototype.converter=function(e,t,a,i){void 0===i&&(i=!0);var r=this.mapControl,o=e.width/2,n=e.height/2,s=1;this.dataLabelsSettings=t;var l=Math.min(e.width,e.height)/384;this.clearMaxDataPointRadius();for(var c=[],u=[],d=this.mapData?this.mapData.dataPoints:[],p=this.mapData.hasSize,h=0,g=d.length;h<g;h++){var m=d[h],y=m.categoryValue,f=m.location;if(f){var v=r.tryLocationToPixel(new Microsoft.Maps.Location(f.latitude,f.longitude)),b=v.x+o,C=v.y+n,S=m.radius*l;this.setMaxDataPointRadius(S);var x=m.subDataPoints,w=x.length;if(1===w){var P=x[0];c.push({x:b,y:C,labeltext:y,radius:S,fill:P.fill,stroke:P.stroke,strokeWidth:s,tooltipInfo:P.tooltipInfo,identity:P.identity,selected:!1,labelFill:t.labelColor})}else{for(var D=[],T=0;T<w;T++){var P=x[T],V=p?P.value:1;D.push({x:b,y:C,labeltext:y,radius:S,fill:P.fill,stroke:P.stroke,strokeWidth:s,value:V,tooltipInfo:P.tooltipInfo,identity:P.identity,selected:!1,labelFill:t.labelColor})}a&&a.applySelectionStateToData(D),u.push(D)}}}return a&&a.applySelectionStateToData(c),{bubbleData:c,sliceData:u}},i.prototype.updateInternal=function(e,a,i,r,o){this.mapRendererData=e,this.svg&&this.svg.style("width",a.width.toString()+"px").style("height",a.height.toString()+"px"),this.clearSvg&&this.clearSvg.style("width",a.width.toString()+"px").style("height",a.height.toString()+"px");var n=this.arc,s=r&&r.hasSelection(),l=this.bubbleGraphicsContext.selectAll(".bubble").data(e.bubbleData,(function(e){return e.identity.getKey()})),c=new t.MapItemMouseEventHandler(this.mapControl,this.tooltipService);l.enter().append("circle").classed("bubble",!0),l.attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})).attr("r",(function(e){return e.radius})).style("fill",(function(e){return e.fill})).style("stroke",(function(e){return e.stroke})).style("fill-opacity",(function(e){return t.ColumnUtil.getFillOpacity(e.selected,!1,s,!1)})).style("strokeWidth",(function(e){return e.strokeWidth})).style("stroke-opacity",(function(e){return t.ColumnUtil.getFillOpacity(e.selected,!1,s,!1)})).on("mousedown.drag",(function(){return c.onMouseDown(d3.event.target)})),l.exit().remove(),this.tooltipsEnabled&&(this.tooltipService.addTooltip(this.bubbleGraphicsContext,(function(e){return e.data&&e.data.tooltipInfo}),(function(e){return e.data&&e.data.identity})),l.style("pointer-events","all"));var u=e.sliceData,d=this.sliceGraphicsContext.selectAll(".sliceContainer").data(u);d.enter().append("g").classed("sliceContainer",!0),d.exit().remove();var p=this.sliceLayout,h=d.selectAll(".slice").data((function(e){return p(e)}),(function(e){return e.data.identity.getKey()}));h.enter().append("path").classed("slice",!0),h.style("fill",(function(e){return e.data.fill})).style("fill-opacity",(function(e){return t.ColumnUtil.getFillOpacity(e.data.selected,!1,s,!1)})).style("stroke",(function(e){return e.data.stroke})).style("strokeWidth",(function(e){return e.data.strokeWidth})).style("stroke-opacity",(function(e){return t.ColumnUtil.getFillOpacity(e.data.selected,!1,s,!1)})).style("cursor","default").attr("transform",(function(e){return t.SVGUtil.translate(e.data.x,e.data.y)})).attr("d",(function(e){return n.innerRadius(0).outerRadius((function(e){return e.data.radius}))(e)})).on("mousedown.drag",(function(){return c.onMouseDown(d3.event.target)})),h.exit().remove(),this.updateInternalDataLabels(a,o),this.tooltipsEnabled&&(this.tooltipService.addTooltip(this.sliceGraphicsContext,(function(e){return e.data&&e.data.data&&e.data.data.tooltipInfo}),(function(e){return e.data&&e.data.data&&e.data.data.identity})),h.style("pointer-events","all"));for(var g=e.bubbleData.slice(),m=0,y=u.length;m<y;m++)g.push.apply(g,u[m]);var f={bubbleEventGroup:this.bubbleGraphicsContext,sliceEventGroup:this.sliceGraphicsContext,bubbles:l,slices:h,clearCatcher:this.clearCatcher,dataPoints:g};return f},i.prototype.updateInternalDataLabels=function(a,i){var r=this.dataLabelsSettings,o=[];if(r&&(r.show||r.showCategory)){var n=this.createLabelDataPoints(),s=new e.LabelLayout({maximumOffset:t.NewDataLabelUtils.maxLabelOffset,startingOffset:t.NewDataLabelUtils.startingLabelOffset}),l={labelDataPoints:n,maxNumberOfLabels:n.length};o=s.layout([l],{width:a.width,height:a.height})}t.NewDataLabelUtils.drawLabelBackground(this.labelGraphicsContext,o,e.visuals.DefaultBackgroundColor,e.visuals.DefaultFillOpacity),t.NewDataLabelUtils.drawDefaultLabels(this.labelGraphicsContext,o,!1)},i.prototype.createLabelDataPoints=function(){var r=this.mapRendererData,o=[],n=r.bubbleData;n=n.concat(_.map(r.sliceData,(function(e){return e[0]})));for(var s=this.dataLabelsSettings,l=0,c=n;l<c.length;l++){var u=c[l],d=u.labeltext,p={text:d,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:a.fromPoint(s.fontSize),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},h=e.TextMeasurementService.measureSvgTextWidth(p),g=e.TextMeasurementService.estimateSvgTextHeight(p);o.push({isPreferred:!0,text:d,textSize:{width:h,height:g},outsideFill:s.labelColor?s.labelColor:t.NewDataLabelUtils.defaultInsideLabelColor,insideFill:t.NewDataLabelUtils.defaultInsideLabelColor,parentType:0,parentShape:{point:{x:u.x,y:u.y},radius:u.radius,validPositions:i.validLabelPositions},fontSize:s.fontSize,identity:void 0,hasBackground:!0})}return o},i})();i.validLabelPositions=[1,2,4,8],t.MapBubbleDataPointRenderer=i})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=jsCommon.CssConstants.createClassAndSelector,i=e.visuals.EventBubblingUtil,r=(function(){function e(e,a,i){void 0===i&&(i=!0),this.mapControl=e,this.tooltipService=a,this.inertia=new t.Inertia(null,i),this.inertia.callback=function(a,i){
return t.MapUtil.moveMapDelta(e,a,i)}}return e.prototype.onMouseDown=function(a){var r=this,o=e.getMousePosition(),n=o,s=d3.select(a),l=!1,c=0,u=this.inertia;u.hasStarted()&&u.stop();var d=d3.select(window).on(e.Events.mouseMove,(function(){var a=e.getMousePosition(),i=e.getDelta(n,a),o=i[0],d=i[1];l||(c+=Math.abs(o)+Math.abs(d),c>e.DragPixelThreshold&&(l=!0,s.classed(e.DraggingCSS.class,!0),r.tooltipService.hide())),u.addPoint(a[0],a[1]),t.MapUtil.moveMapDelta(r.mapControl,o,d),n=a})).on(e.Events.mouseup,(function(){if(d.on(e.Events.mouseMove,null).on(e.Events.mouseup,null),l){var t=e.getMousePosition();u.addPoint(t[0],t[1]),s.classed(e.DraggingCSS.class,!1);var a=d3.event.target;a===s.node()&&s.on(e.Events.click,(function(){i.markAsHandled(d3.event),s.on(e.Events.click,null)})),u.start()}}))},e.getMousePosition=function(){var t=e.BodyNode=e.BodyNode||d3.select("body").node();return d3.mouse(t)},e.getDelta=function(e,t){var a=t[0]-e[0],i=t[1]-e[1];return[a,i]},e})();r.DragPixelThreshold=5,r.Events={mouseDown:"mousedown.mapDrag",mouseMove:"mousemove.mapDrag",mouseup:"mouseup.mapDrag",click:"click.mapDrag"},r.DraggingCSS=a("dragging-cursor"),t.MapItemMouseEventHandler=r})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=t.shapes.Polygon,i=(function(){function i(e,t){this.filledMapDataLabelsEnabled=e,this.tooltipsEnabled=t}return i.getFilledMapParams=function(e,a){switch(e){case t.MapUtil.CategoryTypes.Continent:case t.MapUtil.CategoryTypes.CountryRegion:return a<10?{level:1,maxPolygons:50,strokeWidth:0}:a<30?{level:1,maxPolygons:20,strokeWidth:0}:{level:1,maxPolygons:5,strokeWidth:0};default:return a<100?{level:1,maxPolygons:5,strokeWidth:6}:a<200?{level:0,maxPolygons:5,strokeWidth:6}:{level:0,maxPolygons:5,strokeWidth:0}}},i.buildPaths=function(e){for(var t=[],a=0;a<e.length;a++){var i=e[a],r=i.geographic;r.length>2&&t.push(i)}return t},i.prototype.init=function(e,a,i,r){this.mapControl=e,this.polygonInfo=new t.MapPolygonInfo,this.root=a;var o=d3.select(a[0]);o.attr("drag-resize-disabled","true");var n=this.svg=o.append("svg").style("position","absolute").style("pointer-events","none");if(i){var s=this.clearSvg=d3.select(this.mapControl.getRootElement()).append("svg").style("position","absolute");this.clearCatcher=t.appendClearCatcher(s)}this.shapeGraphicsContext=n.append("g").classed("mapShapes",!0),this.labelBackgroundGraphicsContext=n.append("g").classed(t.NewDataLabelUtils.labelBackgroundGraphicsContextClass.class,!0),this.labelGraphicsContext=n.append("g").classed(t.NewDataLabelUtils.labelGraphicsContextClass.class,!0),this.clearMaxShapeDimension(),this.dataLabelsSettings=t.dataLabelUtils.getDefaultMapLabelSettings(),this.tooltipService=r},i.prototype.setData=function(e){this.mapData=e},i.prototype.clearDataPoints=function(){this.mapData=t.Map.getDefaultMapData()},i.prototype.getDataPointCount=function(){return this.mapData?_.filter(this.mapData.dataPoints,(function(e){return!!e.paths})).length:0},i.prototype.converter=function(e,t,a){this.clearMaxShapeDimension(),this.dataLabelsSettings=t;for(var r=1,o=[],n=this.mapData?this.mapData.dataPoints:[],s=0,l=n.length;s<l;s++){var c=n[s],u=c.subDataPoints[0],d=c.paths;if(d)for(var p=c.value,h=c.categoryValue,g=u.identity,m=g.getKey(),y=i.getIndexOfLargestShape(d),f=0,v=d.length;f<v;f++){var b=d[f];this.setMaxShapeDimension(b.absoluteBounds.width,b.absoluteBounds.height),o.push({absolutePointArray:b.absolute,path:b.absoluteString,fill:u.fill,stroke:u.stroke,strokeWidth:r,tooltipInfo:u.tooltipInfo,identity:g,selected:!1,key:JSON.stringify({id:m,pIdx:f}),displayLabel:f===y,labeltext:h,catagoryLabeltext:null!=p?p.toString():void 0})}}return a&&a.applySelectionStateToData(o),{shapeData:o}},i.prototype.updateInternal=function(e,a,i,r,o){this.mapRendererData=e,this.svg&&this.svg.style("width",a.width.toString()+"px").style("height",a.height.toString()+"px"),this.clearSvg&&this.clearSvg.style("width",a.width.toString()+"px").style("height",a.height.toString()+"px"),this.polygonInfo.reCalc(this.mapControl,a.width,a.height),this.shapeGraphicsContext.attr("transform",this.polygonInfo.transformToString(this.polygonInfo.transform));var n=r&&r.hasSelection(),s=this.shapeGraphicsContext.selectAll("polygon").data(e.shapeData,(function(e){return e.key})),l=new t.MapItemMouseEventHandler(this.mapControl,this.tooltipService);s.enter().append("polygon").classed("shape",!0).attr("points",(function(e){return e.path})).on("mousedown.drag",(function(){return l.onMouseDown(d3.event.target)})),s.style("fill",(function(e){return e.fill})).style("fill-opacity",(function(e){return t.ColumnUtil.getFillOpacity(e.selected,!1,n,!1)})),i&&s.attr("points",(function(e){return e.path})),s.exit().remove(),this.updateInternalDataLabels(a,o),this.tooltipsEnabled&&(this.tooltipService.addTooltip(this.shapeGraphicsContext,(function(e){return e.data&&e.data.tooltipInfo}),(function(e){return e.data&&e.data.identity})),s.style("pointer-events","all"));var c={shapeEventGroup:this.shapeGraphicsContext,shapes:s,clearCatcher:this.clearCatcher,dataPoints:e.shapeData};return c},i.prototype.getDataPointPadding=function(){return 12},i.getIndexOfLargestShape=function(e){for(var t=0,i=0,r=0,o=e.length;r<o;r++){var n=e[r],s=new a(n.absolute),l=Math.abs(a.calculateAbsolutePolygonArea(s.polygonPoints));l>i&&(t=r,i=l)}return t},i.prototype.updateInternalDataLabels=function(a,i){var r=this.dataLabelsSettings,o=[];if(r&&(r.show||r.showCategory)){var n=this.createLabelDataPoints();void 0===this.labelLayout&&(this.labelLayout=new e.FilledMapLabelLayout),o=this.labelLayout.layout(n,{width:a.width,height:a.height},this.polygonInfo.transform,i)}this.drawLabelStems(this.labelGraphicsContext,o,r.show,r.showCategory),t.NewDataLabelUtils.drawLabelBackground(this.labelGraphicsContext,o,e.visuals.DefaultBackgroundColor,e.visuals.DefaultFillOpacity),t.NewDataLabelUtils.drawDefaultLabels(this.labelGraphicsContext,o,!1,r.show&&r.showCategory)},i.prototype.clearMaxShapeDimension=function(){this.maxShapeDimension=0},i.prototype.setMaxShapeDimension=function(e,t){this.maxShapeDimension=Math.max(e,this.maxShapeDimension),this.maxShapeDimension=Math.max(t,this.maxShapeDimension)},i.prototype.createLabelDataPoints=function(){var r=this.mapRendererData,o=[];if(this.filledMapDataLabelsEnabled)for(var n=r.shapeData,s=this.dataLabelsSettings,l=0,c=n;l<c.length;l++){var u=c[l];if(u.displayLabel){var d=void 0,p=void 0,h=0,g=!1;if(this.dataLabelsSettings.show&&!this.dataLabelsSettings.showCategory){if(d=u.catagoryLabeltext,void 0===d)continue}else if(this.dataLabelsSettings.showCategory&&!this.dataLabelsSettings.show){if(d=u.labeltext,void 0===d)continue}else if(this.dataLabelsSettings.showCategory&&this.dataLabelsSettings.show){if(d=u.catagoryLabeltext,p=u.labeltext,void 0===d&&void 0===p)continue;g=!0}if(g){var m={text:p,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:t.NewDataLabelUtils.LabelTextProperties.fontSize,fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight};h=e.TextMeasurementService.measureSvgTextWidth(m)}var y={text:d,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:t.NewDataLabelUtils.LabelTextProperties.fontSize,fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},f=e.TextMeasurementService.measureSvgTextWidth(y),v=e.TextMeasurementService.estimateSvgTextHeight(y);p&&void 0!==u.labeltext&&void 0!==u.catagoryLabeltext&&(v=2*v);var b={parentType:2,parentShape:{polygon:new a(u.absolutePointArray),validPositions:i.validLabelPolygonPositions},text:d,secondRowText:p,textSize:{width:Math.max(f,h),height:v},insideFill:s.labelColor,outsideFill:s.labelColor?s.labelColor:t.NewDataLabelUtils.defaultInsideLabelColor,isPreferred:!1,identity:void 0,hasBackground:!0};o.push(b)}}return o},i.prototype.drawLabelStems=function(e,a,i,r){var o=function(e,t){return e.identity?e.identity.getKeyWithoutHighlight():t};t.NewDataLabelUtils.drawLabelLeaderLines(e,a,o,t.LeaderLineColor)},i})();i.validLabelPolygonPositions=[256,2,1,8,4,16,32,64,128],t.MapShapeDataPointRenderer=i})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function a(e,t,a,i){return new l(e,t,a,i)}var i=e.visuals.controls.internal.TablixUtils.CellPosition,r=e.visuals.controls.internal.TablixObjects,o=e.visuals.controls.internal.TablixUtils,n=o.TablixVisualCell,s=(function(e){function t(t,a,i,r,o,n){var s,l,c;if(a)for(l=a;l.parent;)l=l.parent;if(i)for(c=i;c.parent;)c=c.parent;var u=c&&!!c.isSubtotal,d=!u&&i&&!!i.isSubtotal,p=l&&!!l.isSubtotal,h=!p&&a&&!!a.isSubtotal;return s=e.call(this,t,h,d,p,u,r,o,n)||this,s.rowItem=a,s.columnItem=i,s}return __extends(t,e),Object.defineProperty(t.prototype,"isMeasure",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isValidUrl",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isValidImage",{get:function(){return!1},enumerable:!0,configurable:!0}),t})(n);t.MatrixVisualBodyItem=s,t.createMatrixHierarchyNavigator=a;var l=(function(){function t(e,a,i,r,o){this.matrix=e,this.rowHierarchy=t.wrapMatrixHierarchy(e.rows),this.columnHierarchy=t.wrapMatrixHierarchy(e.columns),this.formatter=i,this.compositeGroupSeparator=r,this.isDataComplete=a,this.update(o)}return t.prototype.getDataViewMatrix=function(){return this.matrix},t.prototype.getColumnHierarchyDepth=function(){return Math.max(this.columnHierarchy.levels.length,1)},t.prototype.getRowHierarchyDepth=function(){return Math.max(this.rowHierarchy.levels.length,1)},t.prototype.getLeafCount=function(e){var t=this.getMatrixHierarchy(e);return t?t.leafNodes.length:0},t.prototype.getLeafAt=function(e,t){var a=this.getMatrixHierarchy(e);return a?a.leafNodes[t]:null},t.prototype.getLeafIndex=function(e){return e.leafIndex},t.prototype.getParent=function(e){return 0===e.level?null:e.parent},t.prototype.getIndex=function(e){return e?e.index:-1},t.prototype.isLeaf=function(e){return!e.children||0===e.children.length},t.prototype.isRowHierarchyLeaf=function(e){return!0},t.prototype.isColumnHierarchyLeaf=function(e){return!1},t.prototype.isFirstItem=function(e,t){return e===_.first(t)},t.prototype.areAllParentsFirst=function(e,t){if(!e)return!1;var a=this.getParent(e);return a?this.isFirstItem(e,e.siblings)&&this.areAllParentsFirst(a,a.siblings):this.isFirstItem(e,e.siblings)},t.prototype.isLastItem=function(e,t){if(e!==_.last(t))return!1;if(!this.isItemRow(e)||this.isDataComplete)return!0;for(var a=e.parent;a;){if(a!==_.last(a.siblings))return!0;a=a.parent}return!1},t.prototype.isItemRow=function(e){if(!e)return!1;for(var t=e;t.parent;)t=t.parent;return t.siblings===this.rowHierarchy.root.children},t.prototype.areAllParentsLast=function(e,t){if(!e)return!1;var a=this.getParent(e);return a?this.isLastItem(e,e.siblings)&&this.areAllParentsLast(a,a.siblings):this.isLastItem(e,e.siblings)},t.prototype.getChildren=function(e){return e.children},t.prototype.getChildrenLevelDifference=function(e){for(var t=1/0,a=this.getChildren(e),i=0,r=a.length;i<r;i++)t=Math.min(t,a[i].level-e.level);return t},t.prototype.getCount=function(e){return e.length},t.prototype.getAt=function(e,t){return e[t]},t.prototype.getLevel=function(e){return e.level},t.prototype.getIntersection=function(e,t){var a,i,o;o=this.isSteppedLayout&&e.isSubtotal?e.parent?e.parent.leafIndex:-1:e.leafIndex;var n,l=t.leafIndex;return a=e.values?e.values[t.leafIndex]:void 0,a?(i=this.matrix.valueSources[a.valueSourceIndex||0],n=new s(a.value,e,t,i,this.formatter,(!1))):n=new s((void 0),e,t,(void 0),this.formatter,(!1)),n.position.row.index=o,n.position.row.indexInSiblings=e.siblings.indexOf(e),n.position.row.isFirst=0===o,n.position.row.isLast=this.isDataComplete&&o===this.rowHierarchy.leafNodes.length-1,n.position.column.index=l,n.position.column.indexInSiblings=t.siblings.indexOf(t),n.position.column.isFirst=0===l,n.position.column.isLast=l===this.columnHierarchy.leafNodes.length-1,a&&a.objects&&(n.backColor=r.PropValuesBackColor.getValue(a.objects)),n},t.prototype.getCorner=function(e,t){var a=this.columnHierarchy.levels,i=this.rowHierarchy.levels;if(t===a.length-1||0===a.length){var r=i[e];if(r)return{metadata:1===r.sources.length?r.sources[0]:null,displayName:_.map(r.sources,(function(e){return e.displayName})).join(this.compositeGroupSeparator),isColumnHeaderLeaf:!0,isRowHeaderLeaf:e===i.length-1,position:this.calculateCornerCellPosition(e,t),rowLevel:e,columnLevel:t}}if(e===i.length-1){var r=a[t];if(r)return{metadata:1===r.sources.length?r.sources[0]:null,displayName:_.map(r.sources,(function(e){return e.displayName})).join(this.compositeGroupSeparator),isColumnHeaderLeaf:!1,isRowHeaderLeaf:!0,position:this.calculateCornerCellPosition(e,t),rowLevel:e,columnLevel:t}}return{metadata:null,displayName:"",isColumnHeaderLeaf:!1,isRowHeaderLeaf:!1,position:this.calculateCornerCellPosition(e,t),rowLevel:e,columnLevel:t}},t.prototype.calculateCornerCellPosition=function(e,t){var a=new i,r=t;a.row.index=a.row.indexInSiblings=r,a.row.isFirst=0===r;var o=this.getColumnHierarchyDepth();a.row.isLast=t===o-1;var n=e;a.column.index=a.column.indexInSiblings=n,a.column.isFirst=0===n;var s=this.getRowHierarchyDepth();return a.column.isLast=n===s-1,a},t.prototype.headerItemEquals=function(e,t){return!(!e||!t)&&e===t},t.prototype.bodyCellItemEquals=function(e,t){return e.position.isMatch(t.position)},t.prototype.cornerCellItemEquals=function(e,t){var a=e,i=t;return!(!a||!i)&&(a.displayName===i.displayName&&a.isColumnHeaderLeaf===i.isColumnHeaderLeaf&&a.isRowHeaderLeaf===i.isRowHeaderLeaf&&a.metadata===i.metadata)},t.prototype.getMatrixColumnHierarchy=function(){return this.columnHierarchy},t.prototype.getMatrixRowHierarchy=function(){return this.rowHierarchy},t.prototype.update=function(e,a,i,r){var o=this;void 0===r&&(r=!0),this.isSteppedLayout=!!e,a&&(this.matrix=a,null!=i&&(this.isDataComplete=i),this.rowHierarchy=t.wrapMatrixHierarchy(a.rows),r&&(this.columnHierarchy=t.wrapMatrixHierarchy(a.columns))),this.updateHierarchy(this.rowHierarchy,this.isSteppedLayout,(function(e,t){return o.calculateRowHeaderPosition(e,t)})),r&&(this.updateHierarchy(this.columnHierarchy,!1,(function(e,t){return o.calculateColumnHeaderPosition(e,t)})),t.updateStaticColumnHeaders(this.columnHierarchy))},t.wrapMatrixHierarchy=function(t){var a=e.Prototype.inherit(t);return a.leafNodes=[],a},t.prototype.updateHierarchy=function(e,t,a){e.leafNodes.length>0&&(e.leafNodes.length=0),e.root.children&&this.updateRecursive(e,e.root.children,null,e.leafNodes,t,a)},t.prototype.updateRecursive=function(e,t,a,i,o,n){for(var s,l=this,c=r.PropColumnFormatString.getPropertyID(),u=0,d=t.length;u<d;u++){var p=t[u];if(p.siblings=t,a&&(p.parent=a),s||(s=e.levels[p.level]),s)if(p.levelValues){var h=_.map(p.levelValues,(function(e){var t=s.sources[e.levelSourceIndex||0];return l.formatter(e.value,t,c,!1)}));p.valueFormatted=h.join(this.compositeGroupSeparator),p.queryName=1!==s.sources.length?void 0:s.sources[0].queryName}else{var g=s.sources[p.levelSourceIndex||0];p.valueFormatted=g.displayName,p.queryName=g.queryName}p.index=u,_.isEmpty(p.children)?o&&p.isSubtotal||(p.leafIndex=i.length,i.push(p)):(o&&(p.leafIndex=i.length,i.push(p)),this.updateRecursive(e,p.children,p,i,o,n)),p.position=n(p,t)}},t.updateStaticColumnHeaders=function(e){var t=e.leafNodes;if(t&&t.length>0)for(var a=e.levels[t[0].level].sources,i=0,r=t.length;i<r;i++){var o=t[i];if(!o.identity&&_.isEmpty(o.levelValues)){var n=a[o.levelSourceIndex?o.levelSourceIndex:0];n&&(o.valueFormatted=n.displayName)}}},t.prototype.getMatrixHierarchy=function(e){var t=this.rowHierarchy.root.children;if(t&&e===t)return this.rowHierarchy;var a=this.columnHierarchy.root.children;return a&&e===a?this.columnHierarchy:null},t.prototype.calculateRowHeaderPosition=function(e,t){var a=new i,r=this.getIndex(e);a.row.index=a.row.indexInSiblings=r,a.row.isFirst=this.areAllParentsFirst(e,t),a.row.isLast=this.areAllParentsLast(e,t);var o=this.getLevel(e);return a.column.index=a.column.indexInSiblings=o,a.column.isFirst=0===o,a.column.isLast=this.isLeaf(e),a},t.prototype.calculateColumnHeaderPosition=function(e,t){var a=new i,r=this.getLevel(e);a.row.index=a.row.indexInSiblings=r,a.row.isFirst=0===r,a.row.isLast=this.isLeaf(e);var o=this.getIndex(e);return a.column.index=a.column.indexInSiblings=o,a.column.isFirst=this.areAllParentsFirst(e,t),a.column.isLast=this.areAllParentsLast(e,t),a},t.prototype.getRowHeaderMetadata=function(e){if(e){var t=this.getDataViewMatrix();if(t&&t.rows)return this.getHierarchyMetadata(t.rows,e.level)}},t.prototype.getColumnHeaderMetadata=function(e){if(e){var t=this.getDataViewMatrix();if(t&&t.columns)return this.getHierarchyMetadata(t.columns,e.level)}},t.prototype.getHierarchyMetadata=function(e,t){if(e&&e.levels&&!(e.levels.length<t)){var a=e.levels[t];if(a&&a.sources&&0!==a.sources.length)return a.sources[0]}},t.isNodeGrandTotal=function(e){if(e){for(var t=e;t.parent;)t=t.parent;return t.isSubtotal}return!1},t})();t.MatrixHierarchyNavigator=l})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a,i=e.visuals.controls.internal.TablixUtils.CellStyle,r=e.visuals.controls.internal.TablixUtils.EdgeSettings,o=e.visuals.controls.internal.TablixUtils.EdgeType,n=e.visuals.controls.internal.TablixObjects,s=e.visuals.controls.internal.TablixUtils,l=jsCommon.UrlUtils.UrlScheme,c=jsCommon.UrlUtils;!(function(e){function a(e,a,i,n,s){var l=s.grid,c=s.rowHeaders,u=s.values,d=s.columnHeaders,p=s.grandTotal;i.paddings.top=i.paddings.bottom=l.rowPadding;var h=t.MatrixHierarchyNavigator.isNodeGrandTotal(a);i.borders.top=new r,(e.row.isFirst&&!n||n&&0===a.leafIndex)&&(i.borders.top.applyParams(t.outline.showTop(c.outline),l.outlineWeight,l.outlineColor,o.Outline),!t.outline.showTop(c.outline)&&t.outline.showTop(u.outline)&&(i.paddings.top+=l.outlineWeight)),i.borders.bottom=new r,e.row.isLast&&(!n||n&&e.column.isLast&&!s.general.rowSubtotals)||e.row.isFirst&&a.isSubtotal?(i.borders.bottom.applyParams(t.outline.showBottom(c.outline),l.outlineWeight,l.outlineColor,o.Outline),!t.outline.showBottom(c.outline)&&t.outline.showBottom(u.outline)&&(i.paddings.bottom+=l.outlineWeight)):i.borders.bottom.applyParams(l.gridHorizontal,l.gridHorizontalWeight,l.gridHorizontalColor,o.Gridline),i.borders.left=new r,(n||e.column.isFirst)&&(i.borders.left.applyParams(t.outline.showLeft(c.outline),l.outlineWeight,l.outlineColor,o.Outline),!t.outline.showLeft(c.outline)&&t.outline.showLeft(d.outline)&&(i.paddings.left+=l.outlineWeight)),i.borders.right=new r,n||e.column.isLast?i.borders.right.applyParams(t.outline.showRight(c.outline),l.outlineWeight,l.outlineColor,o.Outline):i.borders.right.applyParams(l.gridVertical,l.gridVerticalWeight,l.gridVerticalColor,o.Gridline),p.applyToHeaders&&h?(i.fontColor=p.fontColor||c.fontColor,i.backColor=p.backColor||c.backColor):(i.fontColor=c.fontColor,i.backColor=c.backColor)}function i(e,a,i,n){var s=n.grid,l=n.columnHeaders,c=n.values,u=n.grandTotal,d=n.columnFormatting[a.queryName],p=t.MatrixHierarchyNavigator.isNodeGrandTotal(a);d&&d.styleHeader&&d.fontColor?i.fontColor=d.fontColor:u.applyToHeaders&&p?i.fontColor=u.fontColor||l.fontColor:i.fontColor=l.fontColor,d&&d.styleHeader&&d.backColor?i.backColor=d.backColor:u.applyToHeaders&&p?i.backColor=u.backColor||l.backColor:i.backColor=l.backColor,i.paddings.top=i.paddings.bottom=s.rowPadding,i.borders.top=new r,e.row.isFirst&&i.borders.top.applyParams(t.outline.showTop(l.outline),s.outlineWeight,s.outlineColor,o.Outline),i.borders.bottom=new r,e.row.isLast?i.borders.bottom.applyParams(t.outline.showBottom(l.outline),s.outlineWeight,s.outlineColor,o.Outline):i.borders.bottom.applyParams(s.gridHorizontal,s.gridHorizontalWeight,s.gridHorizontalColor,o.Gridline),i.borders.left=new r,e.column.isFirst&&!t.outline.showLeft(l.outline)&&t.outline.showLeft(c.outline)&&(i.paddings.left+=s.outlineWeight),i.borders.right=new r,e.column.isLast?(i.borders.right.applyParams(t.outline.showRight(l.outline),s.outlineWeight,s.outlineColor,o.Outline),!t.outline.showRight(l.outline)&&t.outline.showRight(c.outline)&&(i.paddings.right+=s.outlineWeight)):i.borders.right.applyParams(s.gridVertical,s.gridVerticalWeight,s.gridVerticalColor,o.Gridline)}function n(e,a,i,n,s){var l=s.grid,c=s.values,u=s.subtotals,d=s.grandTotal,p=s.rowHeaders,h=s.columnHeaders;i.paddings.top=i.paddings.bottom=l.rowPadding,i.borders.top=new r,e.row.isFirst&&(i.borders.top.applyParams(t.outline.showTop(c.outline),l.outlineWeight,l.outlineColor,o.Outline),!t.outline.showTop(c.outline)&&t.outline.showTop(p.outline)&&(i.paddings.top+=l.outlineWeight)),i.borders.bottom=new r,e.row.isLast&&(!n||n&&!s.general.rowSubtotals)||n&&a.isRowGrandTotal?(i.borders.bottom.applyParams(t.outline.showBottom(c.outline),l.outlineWeight,l.outlineColor,o.Outline),!t.outline.showBottom(c.outline)&&t.outline.showBottom(p.outline)&&(i.paddings.bottom+=l.outlineWeight)):i.borders.bottom.applyParams(l.gridHorizontal,l.gridHorizontalWeight,l.gridHorizontalColor),i.borders.left=new r,e.column.isFirst&&i.borders.left.applyParams(t.outline.showLeft(c.outline),l.outlineWeight,l.outlineColor,o.Outline),i.borders.right=new r,e.column.isLast?(i.borders.right.applyParams(t.outline.showRight(c.outline),l.outlineWeight,l.outlineColor,o.Outline),!t.outline.showRight(c.outline)&&t.outline.showRight(h.outline)&&(i.paddings.right+=l.outlineWeight)):i.borders.right.applyParams(l.gridVertical,l.gridVerticalWeight,l.gridVerticalColor,o.Gridline);var g,m,y=a.columnMetadata&&s.columnFormatting[a.columnMetadata.queryName];y&&(a.isGrandTotal?(m=y.styleTotal&&y.fontColor,g=y.styleTotal&&y.backColor):a.isSubtotal?(m=y.styleSubTotals&&y.fontColor,g=y.styleSubTotals&&y.backColor):(m=y.styleValues&&y.fontColor,g=y.styleValues&&y.backColor));var f;f=s.general.rowSubtotals&&u.backColor?a.position.row.indexInSiblings:a.position.row.index;var v=f%2===0?c.fontColorPrimary:c.fontColorSecondary,b=f%2===0?c.backColorPrimary:c.backColorSecondary;a.isGrandTotal?(i.fontColor=m||d.fontColor||u.fontColor||v,i.backColor=g||d.backColor||u.backColor||b):a.isSubtotal?(i.fontColor=m||u.fontColor||v,i.backColor=g||u.backColor||b):(i.fontColor=m||v,i.backColor=a.backColor||g||b)}function s(e,a,i,n){var s=n.grid,l=n.columnHeaders,c=n.rowHeaders;a.fontColor=l.fontColor||c.fontColor,a.backColor=l.backColor||c.backColor,a.paddings.top=a.paddings.bottom=s.rowPadding,a.borders.top=new r,e.row.isFirst&&a.borders.top.applyParams(t.outline.showTop(l.outline),s.outlineWeight,s.outlineColor,o.Outline),a.borders.bottom=new r,e.row.isLast?a.borders.bottom.applyParams(t.outline.showBottom(l.outline),s.outlineWeight,s.outlineColor,o.Outline):a.borders.bottom.applyParams(s.gridHorizontal,s.gridHorizontalWeight,s.gridHorizontalColor,o.Gridline),a.borders.left=new r,(e.column.isFirst||i)&&(a.borders.left.applyParams(t.outline.showLeft(l.outline),s.outlineWeight,s.outlineColor,o.Outline),!t.outline.showLeft(l.outline)&&t.outline.showLeft(c.outline)&&(a.paddings.left+=s.outlineWeight)),a.borders.right=new r,a.borders.right.applyParams(s.gridVertical,s.gridVerticalWeight,s.gridVerticalColor,o.Gridline)}e.setRowHeaderStyle=a,e.setColumnHeaderStyle=i,e.setBodyCellStyle=n,e.setCornerCellStyle=s})(a=t.MatrixStyler||(t.MatrixStyler={}));var u=(function(){function o(e,t){this.hierarchyNavigator=e,this.options=t}return o.prototype.onDataViewChanged=function(e){this.formattingProperties=e,this.updateTextHeights()},o.prototype.updateTextHeights=function(){this.fontSizeHeader=jsCommon.PixelConverter.fromPointToPixel(this.formattingProperties.general.textSize),this.textPropsHeader={fontFamily:s.FontFamilyHeader,fontSize:jsCommon.PixelConverter.toString(this.fontSizeHeader)},this.textHeightHeader=Math.ceil(e.TextMeasurementService.measureSvgTextHeight(this.textPropsHeader,"a")),this.fontSizeValue=jsCommon.PixelConverter.fromPointToPixel(this.formattingProperties.general.textSize),this.textPropsValue={fontFamily:s.FontFamilyCell,fontSize:jsCommon.PixelConverter.toString(this.fontSizeValue)},this.textHeightValue=Math.ceil(e.TextMeasurementService.measureSvgTextHeight(this.textPropsValue,"a")),this.fontSizeTotal=jsCommon.PixelConverter.fromPointToPixel(this.formattingProperties.general.textSize),this.textPropsTotal={fontFamily:s.FontFamilyTotal,fontSize:jsCommon.PixelConverter.toString(this.fontSizeTotal)},this.textHeightTotal=Math.ceil(e.TextMeasurementService.measureSvgTextHeight(this.textPropsTotal,"a"))},o.prototype.onStartRenderingSession=function(){},o.prototype.onEndRenderingSession=function(){},o.prototype.bindRowHeader=function(e,t){s.resetCellCssClass(t);var o=new i,l=this.hierarchyNavigator&&this.hierarchyNavigator.isLeaf(e);l&&(s.addCellCssClass(t,s.CssClassMatrixRowHeaderLeaf),o.borders.right=new r(n.PropGridOutlineWeight.defaultValue,n.PropGridOutlineColor.defaultValue)),e.isSubtotal&&(o.paddings.left=s.CellPaddingLeftMatrixTotal),t.contentWidth=0,this.bindHeader(e,t,t.extension.contentHost,this.hierarchyNavigator.getRowHeaderMetadata(e),o),t.contentWidth=Math.ceil(t.contentWidth),this.options.onBindRowHeader&&this.options.onBindRowHeader(e),a.setRowHeaderStyle(t.position,e,o,!1,this.formattingProperties),t.applyStyle(o)},o.prototype.unbindRowHeader=function(e,t){s.clearCellStyle(t),s.clearCellTextAndTooltip(t)},o.prototype.bindColumnHeader=function(e,t){s.resetCellCssClass(t);var o=new i,l=!1,c=t.extension.contentHost;c=s.appendDiv(c),c.classList.add(s.CssClassWrappingContainer),t.contentWidth=0;var u=this.hierarchyNavigator&&this.hierarchyNavigator.isLeaf(e);if(u){if(o.borders.bottom=new r(n.PropGridOutlineWeight.defaultValue,n.PropGridOutlineColor.defaultValue),s.addCellCssClass(t,s.CssClassTablixColumnHeaderLeaf),s.addCellCssClass(t,s.CssClassTablixValueNumeric),this.options.showSortIcons){var d=this.getSortableHeaderColumnMetadata(e);d&&(this.registerColumnHeaderClickHandler(d,t),c=s.addSortIconToColumnHeader(d.sort,c),d.sort&&(t.contentWidth=this.fontSizeHeader+s.SortIconPadding))}e.isSubtotal&&e.parent&&e.parent.children.length>1&&e.parent.children[0].isSubtotal&&(l=!0)}t.extension.disableDragResize(),this.bindHeader(e,t,c,this.hierarchyNavigator.getColumnHeaderMetadata(e),o,l),t.contentWidth=Math.ceil(t.contentWidth),a.setColumnHeaderStyle(t.position,e,o,this.formattingProperties),t.applyStyle(o)},o.prototype.unbindColumnHeader=function(e,t){s.clearCellStyle(t),s.clearCellTextAndTooltip(t);var a=this.getSortableHeaderColumnMetadata(e);a&&this.unregisterColumnHeaderClickHandler(t),this.options.showSortIcons&&s.removeSortIcons(t)},o.prototype.bindHeader=function(a,i,r,o,n,u){s.addCellCssClass(i,s.CssClassTablixHeader),n.fontFamily=s.FontFamilyHeader,n.fontColor=s.FontColorHeaders;var d=this.formattingProperties.grid.imageHeight;if(t.converterHelper.isImageUrlColumn(o)?i.contentHeight=d:a.isSubtotal?i.contentHeight=this.textHeightTotal:i.contentHeight=this.textHeightValue,a.isSubtotal&&(s.addCellCssClass(i,s.CssClassTablixValueTotal),n.fontFamily=s.FontFamilyTotal,!u))return s.setCellTextAndTooltip(this.options.totalLabel,r,i.extension.contentHost),void(i.contentWidth=e.TextMeasurementService.measureSvgTextWidth(this.textPropsTotal,this.options.totalLabel));var p=this.getHeaderLabel(a);return p?s.getUrlScheme(o,p)!==l.NONE?(s.appendATagToBodyCell(p,r),void(i.contentWidth+=e.TextMeasurementService.measureSvgTextWidth(this.textPropsHeader,p))):t.converterHelper.isImageUrlColumn(o)&&c.isValidImageUrl(p)?(s.appendImgTagToBodyCell(a.valueFormatted,r,d),void(i.contentWidth+=d*s.ImageDefaultAspectRatio)):(s.setCellTextAndTooltip(p,r,i.extension.contentHost),void(i.contentWidth+=e.TextMeasurementService.measureSvgTextWidth(a.isSubtotal?this.textPropsTotal:this.textPropsHeader,p))):void(r.innerHTML=s.StringNonBreakingSpace)},o.prototype.applyWordWrapping=function(r,o){if(1===o.type){var n=this.hierarchyNavigator.getRowHeaderMetadata(r);if(!t.converterHelper.isWebUrlColumn(n)&&!t.converterHelper.isImageUrlColumn(n)){var l=o.extension.contentHost;t.controls.HTMLElementUtils.clearChildren(l);var c=r.valueFormatted,u=new i;a.setRowHeaderStyle(r.position,r,u,!1,this.formattingProperties);for(var d=o.containerWidth-(u.getExtraRight()+u.getExtraLeft()),p=o.containerHeight-(u.getExtraTop()+u.getExtraBottom()),h=Math.floor(p/this.textHeightHeader),g=jsCommon.WordBreaker.splitByWidth(c,this.textPropsHeader,e.TextMeasurementService.measureSvgTextWidth,d,h,null,!0),m=0,y=g;m<y.length;m++){var f=y[m];s.appendDiv(l,f)}}}},o.prototype.registerColumnHeaderClickHandler=function(e,t){var a=this;if(this.options.onColumnHeaderClick){var i=function(t){if(s.isValidSortClick(t)){var i=s.reverseSort(e.sort);a.options.onColumnHeaderClick(e.queryName?e.queryName:e.displayName,i)}};t.extension.registerClickHandler(i)}},o.prototype.unregisterColumnHeaderClickHandler=function(e){this.options.onColumnHeaderClick&&e.extension.unregisterClickHandler()},o.prototype.bindBodyCell=function(t,i){s.resetCellCssClass(i);var r=new s.CellStyle;i.contentHeight=this.textHeightValue;var o=t.kpiContent;if(o)$(i.extension.contentHost).append(o),i.contentWidth=this.fontSizeValue;else{var n=this.textPropsValue;s.addCellCssClass(i,s.CssClassTablixValueNumeric),t.isTotal&&(s.addCellCssClass(i,s.CssClassTablixValueTotal),r.fontFamily=s.FontFamilyTotal,i.contentHeight=this.textHeightTotal,n=this.textPropsTotal);var l=t.textContent;l&&(s.setCellTextAndTooltip(l,i.extension.contentHost),i.contentWidth=e.TextMeasurementService.measureSvgTextWidth(n,l))}i.contentWidth=Math.ceil(i.contentWidth),a.setBodyCellStyle(i.position,t,r,!1,this.formattingProperties),i.applyStyle(r)},o.prototype.unbindBodyCell=function(e,t){s.clearCellStyle(t),s.clearCellTextAndTooltip(t)},o.prototype.bindCornerCell=function(t,o){s.resetCellCssClass(o);var l=new i;l.fontFamily=s.FontFamilyHeader,l.fontColor=s.FontColorHeaders,o.contentHeight=this.textHeightHeader,o.contentWidth=0;var c=o.extension.contentHost;if(c=s.appendDiv(c),c.classList.add(s.CssClassWrappingContainer),t.isColumnHeaderLeaf&&(s.addCellCssClass(o,s.CssClassTablixColumnHeaderLeaf),l.borders.bottom=new r(n.PropGridOutlineWeight.defaultValue,n.PropGridOutlineColor.defaultValue),this.options.showSortIcons)){var u=this.getSortableCornerColumnMetadata(t);u&&(this.registerColumnHeaderClickHandler(u,o),c=s.addSortIconToColumnHeader(u?u.sort:void 0,c),u.sort&&(o.contentWidth=this.fontSizeHeader+s.SortIconPadding))}s.setCellTextAndTooltip(t.displayName,c,o.extension.contentHost),o.contentWidth+=e.TextMeasurementService.measureSvgTextWidth(this.textPropsHeader,t.displayName),o.contentWidth=Math.ceil(o.contentWidth),t.isRowHeaderLeaf&&s.addCellCssClass(o,s.CssClassMatrixRowHeaderLeaf),s.addCellCssClass(o,s.CssClassTablixHeader),a.setCornerCellStyle(o.position,l,!1,this.formattingProperties),o.applyStyle(l),o.extension.disableDragResize()},o.prototype.unbindCornerCell=function(e,t){s.clearCellStyle(t),s.clearCellTextAndTooltip(t),this.options.showSortIcons&&s.removeSortIcons(t),e.isColumnHeaderLeaf&&this.unregisterColumnHeaderClickHandler(t)},o.prototype.bindEmptySpaceHeaderCell=function(e){},o.prototype.unbindEmptySpaceHeaderCell=function(e){},o.prototype.bindEmptySpaceFooterCell=function(e){},o.prototype.unbindEmptySpaceFooterCell=function(e){},o.prototype.getHeaderLabel=function(e){return e.valueFormatted},o.prototype.getCellContent=function(e){return e.textContent||""},o.prototype.hasRowGroups=function(){var e=this.hierarchyNavigator.getDataViewMatrix();return!!(e&&e.rows&&e.rows.levels&&0!==e.rows.levels.length)},o.prototype.getSortableCornerColumnMetadata=function(e){if(e.isColumnHeaderLeaf)return e.metadata},o.prototype.getSortableHeaderColumnMetadata=function(e){var t=this.hierarchyNavigator.getDataViewMatrix();if(!t.rows||!t.rows.levels||0===t.rows.levels.length)return null;var a=t.valueSources&&t.valueSources.length>1,i=t.columns?t.columns.levels.length:0;a?i--:1===i&&t.columns.levels[0]&&t.columns.levels[0].sources&&t.columns.levels[0].sources[0]&&t.columns.levels[0].sources[0].roles&&t.columns.levels[0].sources[0].roles.Values&&(i=0);
var r=-1;return 0===i?r=e.levelSourceIndex:e.isSubtotal&&(a?e.parent&&0===e.parent.level&&(r=e.levelSourceIndex):0===e.level&&(r=e.levelSourceIndex)),r!==-1?(r=r?r:0,t.valueSources[r]):null},o})();t.MatrixBinder=u})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=e.visuals.controls.internal.TablixObjects,i=e.visuals.controls.internal.TablixUtils,r=(function(){function r(e){this.isTouchDisabled=e&&e.isTouchDisabled}return r.customizeQuery=function(e){var t=e.dataViewMappings[0];if(t&&t.matrix&&t.metadata){var i=t.matrix;_.isEmpty(i.columns.for.in.items)||(i.rows.dataReductionAlgorithm.window.count=100);var r=t.metadata.objects;i.rows.for.in.subtotalType=a.shouldShowRowSubtotals(r)?2:0,i.columns.for.in.subtotalType=a.shouldShowColumnSubtotals(r)?2:0}},r.getSortableRoles=function(){return["Rows","Values"]},r.prototype.init=function(e){this.element=e.element,this.style=e.style,this.updateViewport(e.viewport),this.formatter=t.valueFormatter.formatVariantMeasureValue,this.isInteractive=e.interactivity&&null!=e.interactivity.selection,this.hostServices=e.host,this.persistingObjects=!1,this.waitingForData=!1,this.lastAllowHeaderResize=!0,this.waitingForSort=!1},r.getFormattingProperties=function(e){return a.getMatrixObjects(e)},r.prototype.onResizing=function(e){this.updateViewport(e)},r.prototype.getColumnWidthManager=function(){return this.columnWidthManager},r.prototype.onDataChanged=function(t){var a=t.dataViews;if(a&&a.length>0){var i=this.dataView;this.dataView=a[0];var o=r.getFormattingProperties(this.dataView),n=o.general.textSize;if(t.operationKind===e.VisualDataChangeOperationKind.Append){var s=i.matrix.rows.root!==this.dataView.matrix.rows.root;this.createOrUpdateHierarchyNavigator(s),s&&this.tablixControl.updateModels(!1,this.dataView.matrix.rows.root.children,this.dataView.matrix.columns.root.children),this.refreshControl(!1)}else{this.createOrUpdateHierarchyNavigator(!0),this.createColumnWidthManager(),this.createTablixControl(o);var l=this.tablixControl.getBinder();l.onDataViewChanged(o),this.updateInternal(n,i)}}this.waitingForData=!1,this.waitingForSort=!1},r.prototype.createColumnWidthManager=function(){var e=this,a=this.hierarchyNavigator.getMatrixColumnHierarchy();this.columnWidthManager?this.persistingObjects||this.columnWidthManager.updateDataView(this.dataView,a.leafNodes):this.columnWidthManager=new t.controls.TablixColumnWidthManager(this.dataView,(!0),function(t){return e.persistColumnWidths(t)},a.leafNodes)},r.prototype.persistColumnWidths=function(e){this.persistingObjects=!0,this.hostServices.persistProperties(e)},r.prototype.updateViewport=function(e){this.currentViewport=e,this.tablixControl&&(this.tablixControl.viewport=this.currentViewport,this.verifyHeaderResize(),this.refreshControl(!1))},r.prototype.refreshControl=function(e){(t.visibilityHelper.partiallyVisible(this.element)||1===this.getLayoutKind())&&this.tablixControl.refresh(e)},r.prototype.getLayoutKind=function(){return this.isInteractive?0:1},r.prototype.createOrUpdateHierarchyNavigator=function(e){var a=!this.dataView.metadata.segment;if(this.tablixControl)this.hierarchyNavigator.update(!1,this.dataView.matrix,a,e);else{var i=t.createMatrixHierarchyNavigator(this.dataView.matrix,a,this.formatter,this.hostServices.getLocalizedString("ListJoin_Separator"));this.hierarchyNavigator=i}},r.prototype.createTablixControl=function(e){var t=e.general.textSize;this.tablixControl||(this.tablixControl=this.createControl(this.hierarchyNavigator,t)),this.tablixControl.wordWrapRowHeaders=e.rowHeaders.wordWrap},r.prototype.createControl=function(e,r){var o=this,n=this.getLayoutKind(),s={onBindRowHeader:function(e){o.onBindRowHeader(e)},totalLabel:this.hostServices.getLocalizedString(i.TotalLabel),onColumnHeaderClick:function(e,t){return o.onColumnHeaderClick(e,t)},showSortIcons:0===n},l=new t.MatrixBinder(this.hierarchyNavigator,s),c=1===n?t.controls.internal.DashboardTablixLayoutManager.createLayoutManager(l):t.controls.internal.CanvasTablixLayoutManager.createLayoutManager(l,this.columnWidthManager),u=document.createElement("div");this.element.append(u);var d={interactive:this.isInteractive,enableTouchSupport:!this.isTouchDisabled,layoutKind:n,fontSize:a.getTextSizeInPx(r)};return new t.controls.TablixControl(e,c,l,u,d)},r.prototype.updateInternal=function(e,i){var r=this;1===this.getLayoutKind()&&this.tablixControl.layoutManager.adjustContentSize(t.converterHelper.hasImageUrlColumn(this.dataView)),this.tablixControl.fontSize=a.getTextSizeInPx(e),this.verifyHeaderResize(),this.tablixControl.updateModels(!this.persistingObjects,this.dataView.matrix.rows.root.children,this.dataView.matrix.columns.root.children),this.tablixControl.viewport=this.currentViewport;var o=this.shouldClearControl(i,this.dataView);setTimeout((function(){r.refreshControl(o);var e=r.columnWidthManager.onColumnsRendered(r.tablixControl.layoutManager.columnWidthsToPersist);r.persistingObjects&&!e&&(r.persistingObjects=!1)}),0)},r.prototype.shouldClearControl=function(t,a){return!(this.waitingForSort&&t&&a)||!e.DataViewAnalysis.isMetadataEquivalent(t.metadata,a.metadata)},r.prototype.onBindRowHeader=function(e){this.needsMoreData(e)&&(this.hostServices.loadMoreData(),this.waitingForData=!0)},r.prototype.onColumnHeaderClick=function(e,t){this.waitingForSort=!0,this.hostServices.onCustomSort(i.getCustomSortEventArgs(e,t))},r.prototype.needsMoreData=function(e){if(this.waitingForData||!this.hierarchyNavigator.isLeaf(e)||!this.dataView.metadata||!this.dataView.metadata.segment)return!1;var t=this.tablixControl.rowDimension.getItemsCount(),a=t*i.PreferredLoadMoreThreshold;return this.hierarchyNavigator.getLeafIndex(e)>=a},r.prototype.enumerateObjectInstances=function(e){var i=new t.ObjectEnumerationBuilder;return this.dataView&&a.enumerateObjectInstances(e,i,this.dataView,t.controls.TablixType.Matrix),i.complete()},r.prototype.enumerateObjectRepetition=function(){var e=[];return this.dataView&&a.enumerateObjectRepetition(e,this.dataView,t.controls.TablixType.Matrix),e},r.prototype.shouldAllowHeaderResize=function(){return 1===this.hostServices.getViewMode()},r.prototype.onViewModeChanged=function(e){this.tablixControl&&this.tablixControl.toggleTouchBindings(1!==e),this.updateViewport(this.currentViewport)},r.prototype.verifyHeaderResize=function(){var e=this.shouldAllowHeaderResize();e!==this.lastAllowHeaderResize&&(this.lastAllowHeaderResize=e,this.tablixControl.layoutManager.setAllowHeaderResize(e))},r})();t.Matrix=r})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=e.visuals.controls.internal.TablixUtils.CellPosition,i=e.visuals.controls.internal.TablixObjects,r=e.visuals.controls.internal.TablixUtils.TablixVisualCell,o=(function(){function t(e,t,a){this.tableDataView=e,this.isDataComplete=t,this.formatter=a}return t.prototype.getColumnHierarchyDepth=function(){return 1},t.prototype.getRowHierarchyDepth=function(){return 1},t.prototype.getLeafCount=function(e){return e.length},t.prototype.getLeafAt=function(e,t){return e[t]},t.prototype.getParent=function(e){return null},t.prototype.getIndex=function(e){return e?this.isRow(e)?e.index:this.getColumnIndex(e):-1},t.prototype.isRow=function(e){if(!e)return!1;var t=e;return void 0!==t.index&&void 0!==t.values},t.prototype.getColumnIndex=function(e){return t.getIndex(this.tableDataView.columns,e)},t.prototype.isLeaf=function(e){return!0},t.prototype.isRowHierarchyLeaf=function(e){return!1},t.prototype.isColumnHierarchyLeaf=function(e){return!0},t.prototype.isFirstItem=function(e,t){return e===t[0]},t.prototype.areAllParentsFirst=function(e,t){return this.isFirstItem(e,t)},t.prototype.isLastItem=function(e,t){return(t===this.tableDataView.columns||this.isDataComplete)&&e===_.last(t)},t.prototype.areAllParentsLast=function(e,t){return this.isLastItem(e,t)},t.prototype.getChildren=function(e){return null},t.prototype.getChildrenLevelDifference=function(e){return 1/0},t.prototype.getCount=function(e){return e.length},t.prototype.getAt=function(e,t){return e[t]},t.prototype.getLevel=function(e){return 0},t.prototype.getIntersection=function(e,o){var n,s=!1,l=new a,c=t.getIndex(this.tableDataView.columns,o);l.column.index=c,l.column.isFirst=0===c,l.column.isLast=c===this.tableDataView.columns.length-1;var u=e;if(null!=u.totalCells)s=!0,n=u.totalCells[c];else{var d=e,p=d.index;l.row.index=p,l.row.isFirst=0===p,l.row.isLast=this.isDataComplete&&p===this.tableDataView.rows.length-1,n=d.values[c]}var h=new r(n,(!1),(!1),s,(!1),o,this.formatter,(!1));h.position=l;var g=e;if(g&&g.values){var m=g.values.objects;if(m){var y=m[c];y&&(h.backColor=i.PropValuesBackColor.getValue(y))}}return h},t.prototype.getCorner=function(e,t){return null},t.prototype.headerItemEquals=function(t,a){if(t===a)return!0;if(t.displayName&&a.displayName){var i=t,r=a;return e.DataViewAnalysis.areMetadataColumnsEquivalent(i,r)}return!(!this.isRow(t)||!this.isRow(a))&&t.index===a.index},t.prototype.bodyCellItemEquals=function(e,t){return e.isMatch(t)},t.prototype.cornerCellItemEquals=function(e,t){return!0},t.prototype.update=function(e,t){this.tableDataView=e,this.isDataComplete=t},t.getIndex=function(e,t){for(var a=0,i=e.length;a<i;a++){var r=e[a];if(null!=r.index&&null!=t.index&&r.index===t.index)return a;if(t===e[a])return a}return-1},t})();t.TableHierarchyNavigator=o})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a,i=e.visuals.controls.internal.TablixUtils.CellStyle,r=e.visuals.controls.internal.TablixUtils.EdgeSettings,o=e.visuals.controls.internal.TablixUtils.EdgeType,n=e.visuals.controls.internal.TablixObjects,s=e.visuals.controls.internal.TablixUtils,l=jsCommon.UrlUtils.UrlScheme,c=jsCommon.UrlUtils,u=jsCommon.WordBreaker;!(function(e){function a(e,a,i,l){a.fontFamily=s.FontFamilyHeader,a.fontColor=s.FontColorHeaders,a.borders.bottom=new r(n.PropGridOutlineWeight.defaultValue,n.PropGridOutlineColor.defaultValue);var c=i.grid,u=i.columnHeaders,d=i.total,p=i.values;a.borders.top=new r,a.borders.top.applyParams(t.outline.showTop(u.outline),c.outlineWeight,c.outlineColor,o.Outline),a.borders.bottom=new r,a.borders.bottom.applyParams(t.outline.showBottom(u.outline),c.outlineWeight,c.outlineColor,o.Outline),a.borders.left=new r,e.column.isFirst&&(a.borders.left.applyParams(t.outline.showLeft(u.outline),c.outlineWeight,c.outlineColor,o.Outline),t.outline.showLeft(u.outline)||!t.outline.showLeft(d.outline)&&!t.outline.showLeft(p.outline)||(a.paddings.left+=c.outlineWeight)),a.borders.right=new r,e.column.isLast?(a.borders.right.applyParams(t.outline.showRight(u.outline),c.outlineWeight,c.outlineColor,o.Outline),t.outline.showRight(u.outline)||!t.outline.showRight(d.outline)&&!t.outline.showRight(p.outline)||(a.paddings.right+=c.outlineWeight)):a.borders.right.applyParams(c.gridVertical,c.gridVerticalWeight,c.gridVerticalColor,o.Gridline),l.styleHeader&&l.fontColor?a.fontColor=l.fontColor:a.fontColor=u.fontColor,l.styleHeader&&l.backColor?a.backColor=l.backColor:a.backColor=u.backColor,a.paddings.top=a.paddings.bottom=c.rowPadding}function i(e,a,i,s,l){e.row.isLast||(i.borders.bottom=new r(n.PropGridHorizontalWeight.defaultValue,n.PropGridHorizontalColor.defaultValue));var c=s.grid,u=s.values,d=s.total,p=s.columnHeaders;i.borders.top=new r,e.row.isFirst&&i.borders.top.applyParams(t.outline.showTop(u.outline),c.outlineWeight,c.outlineColor,o.Outline),i.borders.bottom=new r,e.row.isLast?i.borders.bottom.applyParams(t.outline.showBottom(u.outline),c.outlineWeight,c.outlineColor,o.Outline):i.borders.bottom.applyParams(c.gridHorizontal,c.gridHorizontalWeight,c.gridHorizontalColor,o.Gridline),i.borders.left=new r,e.column.isFirst&&(i.borders.left.applyParams(t.outline.showLeft(u.outline),c.outlineWeight,c.outlineColor,o.Outline),t.outline.showLeft(u.outline)||!t.outline.showLeft(d.outline)&&!t.outline.showLeft(p.outline)||(i.paddings.left+=c.outlineWeight)),i.borders.right=new r,e.column.isLast?(i.borders.right.applyParams(t.outline.showRight(u.outline),c.outlineWeight,c.outlineColor,o.Outline),t.outline.showRight(u.outline)||!t.outline.showRight(d.outline)&&!t.outline.showRight(p.outline)||(i.paddings.right+=c.outlineWeight)):i.borders.right.applyParams(c.gridVertical,c.gridVerticalWeight,c.gridVerticalColor,o.Gridline),l.styleValues&&l.fontColor?i.fontColor=l.fontColor:i.fontColor=e.row.index%2===0?u.fontColorPrimary:u.fontColorSecondary,a.backColor?i.backColor=a.backColor:l.styleValues&&l.backColor?i.backColor=l.backColor:i.backColor=e.row.index%2===0?u.backColorPrimary:u.backColorSecondary,i.paddings.top=i.paddings.bottom=c.rowPadding}function l(e,a,i,l){a.fontFamily=s.FontFamilyTotal,a.borders.top=new r(n.PropGridOutlineWeight.defaultValue,n.PropGridOutlineColor.defaultValue);var c=i.total,u=i.grid,d=i.values,p=i.columnHeaders;a.borders.top=new r,a.borders.top.applyParams(t.outline.showTop(c.outline),u.outlineWeight,u.outlineColor,o.Outline),a.borders.bottom=new r,a.borders.bottom.applyParams(t.outline.showBottom(c.outline),u.outlineWeight,u.outlineColor,o.Outline),a.borders.left=new r,e.column.isFirst&&(a.borders.left.applyParams(t.outline.showLeft(c.outline),u.outlineWeight,u.outlineColor,o.Outline),t.outline.showLeft(c.outline)||!t.outline.showLeft(d.outline)&&!t.outline.showLeft(p.outline)||(a.paddings.left+=u.outlineWeight)),a.borders.right=new r,e.column.isLast?(a.borders.right.applyParams(t.outline.showRight(c.outline),u.outlineWeight,u.outlineColor,o.Outline),t.outline.showRight(c.outline)||!t.outline.showRight(d.outline)&&!t.outline.showRight(p.outline)||(a.paddings.right+=u.outlineWeight)):a.borders.right.applyParams(u.gridVertical,u.gridVerticalWeight,u.gridVerticalColor,o.Gridline),l.styleTotal&&l.fontColor?a.fontColor=l.fontColor:a.fontColor=c.fontColor,l.styleTotal&&l.backColor?a.backColor=l.backColor:a.backColor=c.backColor,a.paddings.top=a.paddings.bottom=u.rowPadding}e.setColumnHeaderStyle=a,e.setBodyCellStyle=i,e.setFooterBodyCellStyle=l})(a=t.TableStyler||(t.TableStyler={}));var d=(function(){function r(e,t){this.options=e,t&&this.updateDataView(t)}return r.prototype.updateDataView=function(e){this.tableDataView=e,this.formattingProperties=e.formattingProperties,this.updateTextHeights(),this.hasImage()?this.rowHeight=Math.max(this.textHeightValue,this.formattingProperties.grid.imageHeight):this.rowHeight=this.textHeightValue},r.prototype.updateTextHeights=function(){this.fontSizeHeader=jsCommon.PixelConverter.fromPointToPixel(this.formattingProperties.general.textSize),this.textPropsHeader={fontFamily:s.FontFamilyHeader,fontSize:jsCommon.PixelConverter.toString(this.fontSizeHeader)},this.textHeightHeader=Math.ceil(e.TextMeasurementService.measureSvgTextHeight(this.textPropsHeader,"a")),this.fontSizeValue=jsCommon.PixelConverter.fromPointToPixel(this.formattingProperties.general.textSize),this.textPropsValue={fontFamily:s.FontFamilyCell,fontSize:jsCommon.PixelConverter.toString(this.fontSizeValue)},this.textHeightValue=Math.ceil(e.TextMeasurementService.measureSvgTextHeight(this.textPropsValue,"a")),this.fontSizeTotal=jsCommon.PixelConverter.fromPointToPixel(this.formattingProperties.general.textSize),this.textPropsTotal={fontFamily:s.FontFamilyTotal,fontSize:jsCommon.PixelConverter.toString(this.fontSizeTotal)},this.textHeightTotal=Math.ceil(e.TextMeasurementService.measureSvgTextHeight(this.textPropsTotal,"a"))},r.prototype.hasImage=function(){return _.any(this.tableDataView.columns,(function(e){return t.converterHelper.isImageUrlColumn(e)}))},r.prototype.getColumnFormatting=function(e){return this.formattingProperties.columnFormatting[e.queryName]},r.prototype.onStartRenderingSession=function(){},r.prototype.onEndRenderingSession=function(){},r.prototype.bindRowHeader=function(e,t){e.totalCells?t.contentHeight=this.textHeightTotal:t.contentHeight=this.rowHeight,s.clearCellStyle(t),this.options.onBindRowHeader&&this.options.onBindRowHeader(e)},r.prototype.unbindRowHeader=function(e,t){},r.prototype.bindColumnHeader=function(t,r){var o=this;r.extension.disableDragResize(),s.resetCellCssClass(r),s.addCellCssClass(r,s.CssClassTablixHeader),s.addCellCssClass(r,s.CssClassTablixColumnHeaderLeaf);var n=new i;a.setColumnHeaderStyle(r.position,n,this.formattingProperties,this.getColumnFormatting(t));var l=r.extension.contentHost;l=s.appendDiv(l),l.classList.add(s.CssClassWrappingContainer);var c,u=this.getWordWrappingWidth(t.queryName,r,n);null!=u&&(c=this.getWordWrappingLines(t.displayName,u));var d=c&&c.length>1;if(d){r.contentHeight=c.length*this.textHeightHeader;for(var p=0,h=c.length;p<h-1;p++)s.appendDiv(l,c[p]);l=s.appendDiv(l)}else r.contentHeight=this.textHeightHeader;this.sortIconsEnabled()&&(l=s.addSortIconToColumnHeader(t.sort,l),t.sort&&!d&&(r.contentWidth=this.fontSizeHeader+s.SortIconPadding));var g=t.displayName;if(d){var m=_.last(c);s.setCellText(m,l),s.setCellTooltip(g,r.extension.contentHost),r.contentWidth=u}else s.setCellTextAndTooltip(g,l,r.extension.contentHost),r.contentWidth+=e.TextMeasurementService.measureSvgTextWidth(this.textPropsHeader,g);if(r.contentWidth=Math.ceil(r.contentWidth),this.options.onColumnHeaderClick){var y=function(e){if(s.isValidSortClick(e)){var a=s.reverseSort(t.sort);o.options.onColumnHeaderClick(t.queryName?t.queryName:t.displayName,a)}};r.extension.registerClickHandler(y)}r.applyStyle(n)},r.prototype.getWordWrappingLines=function(t,a){return u.splitByWidth(t,this.textPropsHeader,e.TextMeasurementService.measureSvgTextWidth,a,s.WordWrappingMaxLines,void 0,!0)},r.prototype.getWordWrappingWidth=function(e,t,a){if(this.formattingProperties.columnHeaders.wordWrap&&0===this.options.layoutKind){var i;if(t.isColumnResizing()&&t.containerWidth>=0?i=t.containerWidth:this.options.columnWidthManager&&(i=this.options.columnWidthManager.getPersistedColumnWidth(e)),null!=i)return Math.max(0,i-(a.getExtraLeft()+a.getExtraRight()))}},r.prototype.unbindColumnHeader=function(e,t){s.clearCellStyle(t),s.clearCellTextAndTooltip(t),this.sortIconsEnabled()&&s.removeSortIcons(t),this.options.onColumnHeaderClick&&t.extension.unregisterClickHandler()},r.prototype.bindBodyCell=function(e,t){s.resetCellCssClass(t),this.setBodyContent(e,t),t.contentWidth=Math.ceil(t.contentWidth),e.isTotal?(s.addCellCssClass(t,s.CssClassTablixValueTotal),s.addCellCssClass(t,s.CssClassTableFooter)):e.position.row.isLast?s.addCellCssClass(t,s.CssClassTableBodyCellBottom):s.addCellCssClass(t,s.CssClassTableBodyCell),e.isNumeric&&s.addCellCssClass(t,s.CssClassTablixValueNumeric);var r=new i;e.isTotal?a.setFooterBodyCellStyle(t.position,r,this.formattingProperties,this.getColumnFormatting(e.columnMetadata)):a.setBodyCellStyle(t.position,e,r,this.formattingProperties,this.getColumnFormatting(e.columnMetadata)),t.applyStyle(r)},r.prototype.setBodyContent=function(t,a){var i=a.extension.contentHost,r=this.formattingProperties.grid.imageHeight,o=t.textContent;t.isTotal?a.contentHeight=this.textHeightTotal:t.isImage?a.contentHeight=r:a.contentHeight=this.textHeightValue;var n=s.getUrlScheme(t.columnMetadata,t.textContent);if(n!==l.NONE){var u=this.formattingProperties.values.urlIcon,d=void 0;return u&&(d=s.getUrlIconName(n)),u&&null!=d?s.appendATagToBodyCell(o,i,d):s.appendATagToBodyCell(o,i),void(u?a.contentWidth=this.fontSizeValue:a.contentWidth=e.TextMeasurementService.measureSvgTextWidth(this.textPropsValue,o))}if(t.isImage&&c.isValidImageUrl(o))return s.appendImgTagToBodyCell(o,i,r),void(a.contentWidth=r*s.ImageDefaultAspectRatio);var p=t.kpiContent;return p?($(i).append(p),void(a.contentWidth=this.fontSizeValue)):o?(s.setCellTextAndTooltip(o,i),void(t.isTotal?a.contentWidth=e.TextMeasurementService.measureSvgTextWidth(this.textPropsTotal,o):a.contentWidth=e.TextMeasurementService.measureSvgTextWidth(this.textPropsValue,o))):(s.setCellTextAndTooltip(" ",i),void(a.contentWidth=0))},r.prototype.unbindBodyCell=function(e,t){s.clearCellStyle(t),s.clearCellTextAndTooltip(t)},r.prototype.bindCornerCell=function(e,t){t.contentWidth=0},r.prototype.unbindCornerCell=function(e,t){},r.prototype.bindEmptySpaceHeaderCell=function(e){},r.prototype.unbindEmptySpaceHeaderCell=function(e){},r.prototype.bindEmptySpaceFooterCell=function(e){},r.prototype.unbindEmptySpaceFooterCell=function(e){},r.prototype.getHeaderLabel=function(e){return e?e.displayName:""},r.prototype.getCellContent=function(e){return e},r.prototype.hasRowGroups=function(){return!1},r.prototype.sortIconsEnabled=function(){return 0===this.options.layoutKind},r})();t.TableBinder=d})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=e.visuals.controls.TablixColumnWidthManager,i=e.visuals.controls.TablixControl,r=e.visuals.controls.internal.TablixObjects,o=e.visuals.controls.TablixType,n=e.visuals.controls.internal.TablixUtils,s=(function(){function s(e){this.isTouchDisabled=e&&e.isTouchDisabled}return s.customizeQuery=function(e){var t=e.dataViewMappings[0];if(t&&t.table&&t.metadata){var a=t.table.rows,i=t.metadata.objects;a.for.in.subtotalType=r.shouldShowTableTotals(i)?1:0}},s.getSortableRoles=function(){return["Values"]},s.prototype.init=function(e){this.element=e.element,this.updateViewport(e.viewport),this.formatter=t.valueFormatter.formatVariantMeasureValue,this.isInteractive=e.interactivity&&null!=e.interactivity.selection,this.getLocalizedString=e.host.getLocalizedString,this.hostServices=e.host,this.persistingObjects=!1,this.waitingForData=!1,this.lastAllowHeaderResize=!0,this.waitingForSort=!1},s.converter=function(t){var a=t.table,i=e.Prototype.inherit(a);i.visualRows=[];for(var o=0;o<a.rows.length;o++){var n={index:o,values:a.rows[o]};i.visualRows.push(n)}return i.formattingProperties=r.getTableObjects(t),i},s.prototype.onResizing=function(e){this.updateViewport(e)},s.prototype.getColumnWidthManager=function(){return this.columnWidthManager},s.prototype.onDataChanged=function(t){var a=t.dataViews;if(a&&a.length>0){var i=this.dataView;if(this.dataView=a[0],this.persistingObjects)return void(this.persistingObjects=!1);var r=s.converter(this.dataView);t.operationKind===e.VisualDataChangeOperationKind.Append?(this.createOrUpdateHierarchyNavigator(r),this.tablixControl.updateModels(!1,r.visualRows,r.columns),this.refreshControl(!1)):(this.createOrUpdateHierarchyNavigator(r),this.createColumnWidthManager(),this.createOrUpdateTablixControl(r),this.updateInternal(i,r))}this.waitingForData=!1,this.waitingForSort=!1},s.prototype.createColumnWidthManager=function(){var e=this;this.columnWidthManager?this.columnWidthManager.updateDataView(this.dataView):this.columnWidthManager=new a(this.dataView,(!1),function(t){return e.persistColumnWidths(t)})},s.prototype.persistColumnWidths=function(e){this.persistingObjects=!0,this.hostServices.persistProperties(e)},s.prototype.updateViewport=function(e){this.currentViewport=e,this.tablixControl&&(this.tablixControl.viewport=this.currentViewport,this.verifyHeaderResize(),this.refreshControl(!1))},s.prototype.refreshControl=function(e){(t.visibilityHelper.partiallyVisible(this.element)||1===this.getLayoutKind())&&this.tablixControl.refresh(e)},s.prototype.getLayoutKind=function(){return this.isInteractive?0:1},s.prototype.createOrUpdateHierarchyNavigator=function(e){var a=!this.dataView.metadata.segment;if(this.tablixControl)this.hierarchyNavigator.update(e,a);else{var i=new t.TableHierarchyNavigator(e,a,this.formatter);this.hierarchyNavigator=i}},s.prototype.createOrUpdateTablixControl=function(e){if(this.tablixControl){var t=this.tablixControl.getBinder();t.updateDataView(e)}else this.tablixControl=this.createControl(this.hierarchyNavigator,e)},s.prototype.createControl=function(e,a){var o=this,n=this.getLayoutKind(),s=a.formattingProperties.general.textSize,l={onBindRowHeader:function(e){return o.onBindRowHeader(e)},onColumnHeaderClick:function(e,t){return o.onColumnHeaderClick(e,t)},layoutKind:n,columnWidthManager:this.columnWidthManager},c=new t.TableBinder(l,a),u=1===n?t.controls.internal.DashboardTablixLayoutManager.createLayoutManager(c):t.controls.internal.CanvasTablixLayoutManager.createLayoutManager(c,this.columnWidthManager),d=document.createElement("div");this.element.append(d);var p={interactive:this.isInteractive,enableTouchSupport:!this.isTouchDisabled,layoutKind:n,fontSize:r.getTextSizeInPx(s)};return new i(e,u,c,d,p)},s.prototype.updateInternal=function(e,a){var i=this,o=a.formattingProperties.general.textSize;1===this.getLayoutKind()&&this.tablixControl.layoutManager.adjustContentSize(t.converterHelper.hasImageUrlColumn(this.dataView)),this.tablixControl.fontSize=r.getTextSizeInPx(o),this.tablixControl.wordWrapColumnHeaders=a.formattingProperties.columnHeaders.wordWrap,this.verifyHeaderResize(),this.tablixControl.updateModels(!0,a.visualRows,a.columns);var n=this.createTotalsRow(this.dataView);this.tablixControl.rowDimension.setFooter(n),this.tablixControl.viewport=this.currentViewport;var s=this.shouldClearControl(e,this.dataView);setTimeout((function(){i.refreshControl(s);var e=i.columnWidthManager.onColumnsRendered(i.tablixControl.layoutManager.columnWidthsToPersist);i.persistingObjects&&!e&&(i.persistingObjects=!1)}),0)},s.prototype.shouldClearControl=function(t,a){return!(this.waitingForSort&&t&&a)||!e.DataViewAnalysis.isMetadataEquivalent(t.metadata,a.metadata)},s.prototype.createTotalsRow=function(e){if(!r.shouldShowTableTotals(e.metadata.objects))return null;var t=e.table.totals;if(!t||0===t.length)return null;for(var a=[],i=e.table.columns,o=0,n=i.length;o<n;++o){var s=i[o],l=t[s.index];null!=l?a.push(l):a.push(0===o?this.getLocalizedString("TableTotalLabel"):"")}return{totalCells:a}},s.prototype.onBindRowHeader=function(e){this.needsMoreData(e)&&(this.hostServices.loadMoreData(),this.waitingForData=!0)},s.prototype.onColumnHeaderClick=function(e,t){this.waitingForSort=!0,this.hostServices.onCustomSort(n.getCustomSortEventArgs(e,t))},s.prototype.needsMoreData=function(e){if(this.waitingForData||!this.dataView.metadata||!this.dataView.metadata.segment)return!1;var t=this.tablixControl.rowDimension.getItemsCount(),a=t*n.PreferredLoadMoreThreshold;return this.hierarchyNavigator.getIndex(e)>=a},s.prototype.enumerateObjectInstances=function(e){var a=new t.ObjectEnumerationBuilder;return this.dataView&&r.enumerateObjectInstances(e,a,this.dataView,o.Table),a.complete()},s.prototype.enumerateObjectRepetition=function(){var e=[];return this.dataView&&r.enumerateObjectRepetition(e,this.dataView,o.Table),e},s.prototype.shouldAllowHeaderResize=function(){return 1===this.hostServices.getViewMode()},s.prototype.onViewModeChanged=function(e){this.tablixControl&&this.tablixControl.toggleTouchBindings(1!==e),this.updateViewport(this.currentViewport)},s.prototype.verifyHeaderResize=function(){var e=this.shouldAllowHeaderResize();e!==this.lastAllowHeaderResize&&(this.lastAllowHeaderResize=e,this.tablixControl.layoutManager.setAllowHeaderResize(e))},s})();t.Table=s})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={})),define("Visuals/visuals/treemap",["require","exports","Visuals/visuals/treemap/util","Visuals/animators/treemapAnimator","Visuals/behaviours/treemapBehaviors"],(function(e,t,a,i,r){function o(){return new i.WebTreemapAnimator}function n(){return new r.TreemapWebBehavior}var s=powerbi,l=s.data,c=s.visuals,u=c.AnimatorCommon,d=c.ColorHelper,p=c.converterHelper,h=l.createDataViewCategoricalReaderAdvanced,g=c.dataLabelUtils,m=s.DataViewObjects,y=s.Double,f=c.GradientUtils,v=c.ObjectEnumerationBuilder,b=c.Legend,C=c.LegendPosition,S=c.SelectionIdBuilder,x=c.SelectionId,w=c.SVGUtil,P=s.TextMeasurementService,D=c.TooltipBuilder,T=c.ToolTipComponent,V=c.treemapProps,L=c.treemapRoles,N=c.valueFormatter,M=(function(){function e(e){this.tooltipsEnabled=e&&e.tooltipsEnabled,e&&e.animator&&(this.animator=e.animator,this.isScrollable=!!e.isScrollable&&e.isScrollable,this.behavior=e.behavior,this.customFontFamily=e.customFontFamily)}return e.getLayout=function(t,i){var r=g.createColumnFormatterCacheManager(),o=t.showCategory,n=t.show||t.showCategory;return{shapeClass:function(t){return e.getNodeClass(t,!1)},shapeLayout:e.createTreemapShapeLayout(!1),highlightShapeClass:function(t){return e.getNodeClass(t,!0)},highlightShapeLayout:e.createTreemapShapeLayout(!0),zeroShapeLayout:e.createTreemapZeroShapeLayout(),majorLabelClass:function(e){return a.classes.major},majorLabelLayout:{x:function(t){return t.x+e.TextMargin},y:function(t){return t.y+e.TextMargin+e.MajorLabelTextSize}},majorLabelText:function(a){return e.createMajorLabelText(a,t,i,r)},minorLabelClass:function(e){return a.classes.minor},minorLabelLayout:{x:function(t){return t.x+e.TextMargin},y:function(t){return t.y+t.dy-e.TextMargin}},minorLabelText:function(a){return e.createMinorLabelText(a,t,i,r)},areMajorLabelsEnabled:function(){return o},areMinorLabelsEnabled:function(){return n}}},e.prototype.init=function(t){this.options=t;var a=t.element;a.empty(),this.svg=d3.select(a.get(0)).append("svg").style("position","absolute").classed(e.ClassName,!0),this.shapeGraphicsContext=this.svg.append("g").classed(e.ShapesClassName,!0),this.labelGraphicsContext=this.svg.append("g").classed(e.LabelsGroupClassName,!0),this.element=a,this.currentViewport={height:t.viewport.height,width:t.viewport.width},this.style=t.style,this.treemap=d3.layout.treemap().sticky(!1).sort((function(e,t){return e.size-t.size})).value((function(e){return e.size})).round(!1),this.behavior&&(this.interactivityService=c.createInteractivityService(t.host)),this.legend=c.createLegend(a,t.interactivity&&t.interactivity.isInteractiveLegend,this.interactivityService,this.isScrollable),this.colors=this.style.colorPalette.dataColors,this.hostService=t.host,this.tooltipService=c.createTooltipService(t.host)},e.converter=function(t,a,i,r,o,n,s){void 0===s&&(s=!0);var l;l=t&&t.metadata&&_.some(t.metadata.columns,(function(e){return e.roles[L.values]}))?L.values:L.gradient;var u,g,y,f=h(t,{staticSeriesRole:l}),v=f.data,C=f.columns,w={key:"root",name:"root",originalValue:void 0,children:[],selected:!1,highlightMultiplier:0,identity:x.createNull(),color:void 0},P=[],M=[],A="",R=new d(a.colorPalette.dataColors,V.dataPoint.fill),F=void 0;if(t&&t.metadata&&t.metadata.objects){var O=t.metadata.objects;i.show=m.getValue(O,V.labels.show,i.show),i.labelColor=m.getFillColor(O,V.labels.color,i.labelColor),i.displayUnits=m.getValue(O,V.labels.labelDisplayUnits,i.displayUnits),i.precision=m.getValue(O,V.labels.labelPrecision,i.precision),i.showCategory=m.getValue(O,V.categoryLabels.show,i.showCategory)}if(v.hasValues(L.values)||v.hasValues(L.gradient)){var I=t.categorical;y=v.hasHighlights();var H=V.general.formatString,j=e.getValuesFromCategoricalDataView(t,y,l),z=j.values,k=j.highlights,G=j.totalValue;j.highlightsOverflow&&(y=!1,z=k),u=j.hasNegativeValues,g=j.allValuesAreNegative;var E=e.getCullableValue(G,o),W=C.hasDynamicSeries();F=!1;var B=C.getValueColumn(L.gradient,0);if(null!=I.categories||_.isEmpty(z)){if(I.categories&&I.categories.length>0){var U=v.getSeriesCount(),K=!v.hasSeries(),Y=I.categories[0];A=Y.source.displayName;for(var q=N.getFormatString(Y.source,H),X=0,$=z.length;X<$;X++){var O=Y.objects&&Y.objects[X],Q=R.getColorForSeriesValue(O,Y.identityFields,Y.values[X]),Z=N.format(Y.values[X],q),J=z[X],ee=0,te=J[ee],ae=y&&k?k[X][ee]:void 0,ie=void 0,re=void 0;if(s){if(ie=[],re={displayName:Y.source.displayName,value:Z},ie.push(re),W){var oe=C.getSeriesMetadataColumn(),ne=C.getSeriesValueColumnGroup(ee).name;ie.push({displayName:oe.displayName,value:p.formatFromMetadataColumn(ne,oe,H)})}var se=C.getValueMetadataColumn(l,ee);null!=te&&ie.push({displayName:se.displayName,value:p.formatFromMetadataColumn(te,se,H,!1)}),null!=ae&&ie.push({displayName:T.localizationOptions.highlightedValueDisplayName,value:p.formatFromMetadataColumn(ae,se,H,!1)});var le=B?B.source:void 0;K&&le&&le!==se&&null!=B.values[X]&&ie.push({displayName:le.displayName,value:p.formatFromMetadataColumn(B.values[X],le,H,!1)}),D.addTooltipMeasures(f,ie,X,ee)}var ce=C.getValueMetadataColumn(l,ee),ue=S.builder().withCategory(Y,X).withMeasure(K&&ce?ce.queryName:void 0).createSelectionId(),de=JSON.stringify({
nodeKey:ue.getKey(),depth:1}),pe={key:de,name:Z,originalValue:void 0,color:Q,selected:!1,identity:ue,tooltipInfo:ie,highlightedTooltipInfo:ie,labelFormatString:1===U?N.getFormatString(C.getValueMetadataColumn(l,ee),H):q};y&&(pe.highlightMultiplier=0!==te?ae/te:0,pe.highlightValue=g&&null!=ae?Math.abs(ae):ae,pe.originalHighlightValue=ae),M.push({label:Z,color:Q,icon:c.LegendIcon.Box,identity:ue,selected:!1});for(var he=0,ge=0;ee<U;ee++){var me=C.getValueColumn(l,ee),ye=J[ee],fe=void 0,ve=e.checkValueForShape(ye,E,g,F);if(F=ve.dataWasCulled,ve.validShape&&(he+=ye,y&&(fe=k[X][ee],ge+=fe),!K)){var be=null;be=C.hasDynamicSeries()?p.formatFromMetadataColumn(v.getSeriesName(ee),C.getSeriesMetadataColumn(),H):f.data.getSeriesName(ee);var Ce=I?I.values:null,Se=me.source.queryName,xe=S.builder().withCategory(Y,X).withSeries(Ce,me).withMeasure(Se).createSelectionId(),we=JSON.stringify({nodeKey:xe.getKey(),depth:2}),Pe=y&&0!==fe?fe:void 0,De=void 0;s&&(De=[],De.push(re),W&&(Y&&Y.source===Ce.source||De.push({displayName:Ce.source.displayName,value:p.formatFromMetadataColumn(v.getSeriesName(ee),Ce.source,H)})),null!=ye&&De.push({displayName:me.source.displayName,value:p.formatFromMetadataColumn(ye,me.source,H,!1)}),null!=ae&&De.push({displayName:T.localizationOptions.highlightedValueDisplayName,value:p.formatFromMetadataColumn(Pe,me.source,H,!1)}),D.addTooltipMeasures(f,De,X,W?ee:void 0));var Te={key:we,name:be,size:g?Math.abs(ye):ye,originalValue:ye,color:Q,selected:!1,identity:xe,tooltipInfo:De,highlightedTooltipInfo:De,labelFormatString:N.getFormatString(me.source,H)};y&&(Te.highlightMultiplier=0!==ye?fe/ye:0,Te.highlightValue=g&&null!=fe?Math.abs(fe):null,Te.originalHighlightValue=fe),null==pe.children&&(pe.children=[]),pe.children.push(Te),P.push(Te)}}he&&(pe.size=g?Math.abs(he):he,pe.originalValue=he,w.children.push(pe),P.push(pe)),y&&(pe.highlightMultiplier=he?ge/he:0)}}}else for(var ee=0,U=C.getSeriesCount();ee<U;ee++){var me=C.getValueColumn(l,ee),te=z[0][ee],ve=e.checkValueForShape(te,E,g,F);if(F=ve.dataWasCulled,ve.validShape){var Ve=void 0;Ve=W?p.formatFromMetadataColumn(C.getSeriesValueColumnGroup(ee).name,C.getSeriesMetadataColumn(),H):f.columns.hasStaticSeries()?f.data.getSeriesName(ee):f.data.getValueDisplayName(l);var ue=(new S).withSeries(t.categorical.values,W?me:void 0).withMeasure(me.source.queryName).createSelectionId(),de=ue.getKey(),Q=W?R.getColorForSeriesValue(f.objects.getSeriesDataObjects(ee),I.values.identityFields,p.getSeriesName(me.source)):R.getColorForMeasure(me.source.objects,me.source.queryName),Pe=y?k[0][ee]:void 0,ie=void 0;if(s){if(ie=[],W){var oe=C.getSeriesMetadataColumn(),ne=C.getSeriesValueColumnGroup(ee).name;ie.push({displayName:oe.displayName,value:p.formatFromMetadataColumn(ne,oe,H)})}null!=te&&ie.push({displayName:me.source.displayName,value:p.formatFromMetadataColumn(te,me.source,H,!1)}),null!=Pe&&ie.push({displayName:T.localizationOptions.highlightedValueDisplayName,value:p.formatFromMetadataColumn(Pe,me.source,H,!1)}),D.addTooltipMeasures(f,ie,0,W?ee:void 0)}var pe={key:de,name:Ve,size:g?Math.abs(te):te,originalValue:te,color:Q,selected:!1,identity:ue,tooltipInfo:ie,highlightedTooltipInfo:ie,labelFormatString:N.getFormatString(me.source,H)};y&&k&&(pe.highlightMultiplier=0!==te?Pe/te:0,pe.highlightValue=g&&null!=Pe?Math.abs(Pe):Pe,pe.originalHighlightValue=Pe),w.children.push(pe),P.push(pe),M.push({label:Ve,color:Q,icon:c.LegendIcon.Box,identity:ue,selected:!1})}}}var Le;return Le=f.data.hasCategories()?b.buildCategoryLegendData({dataView:t,categoryRole:L.group,valueRole:L.values,showByDefault:!1,style:a}):b.buildSeriesLegendData({dataView:t,staticSeriesRole:L.values,showByDefault:!1,style:a}),r&&(r.applySelectionStateToData(P),r.applySelectionStateToData(Le.dataPoints)),{root:w,hasHighlights:y,legendData:Le,dataLabelsSettings:i,legendObjectProperties:n,dataWasCulled:F,hasNegativeValues:u,allValuesAreNegative:g}},e.normalizedValue=function(e,t){return null==e||isNaN(e)?0:e===Number.POSITIVE_INFINITY?Number.MAX_VALUE:e===Number.NEGATIVE_INFINITY?-Number.MAX_VALUE:t?Math.abs(e):e<0?0:e},e.getValuesFromCategoricalDataView=function(t,a,i){for(var r=h(t,{staticSeriesRole:i}),o=r.data,n=o.getCategoryCount()||1,s=o.getSeriesCount(),l=[],c=[],u=0,d=0;d<n;d++)l.push([]),a&&c.push([]);for(var p,g,m=void 0,f=0;f<s;f++)for(var v=0;v<n;v++){var b=o.getValue(i,v,f);l[v].push(b);var C=void 0;a&&(C=o.getHighlight(i,v,f),c[v].push(C),null==C&&(C=0)),m=void 0===m?(!a||C<=0)&&b<=0:m&&(!a||C<=0)&&b<=0,p||(p=b<0||!!a&&C<0)}m=!!m;for(var f=0;f<s;f++)for(var v=0;v<n;v++){var b=l[v][f];if(b=e.normalizedValue(b,m),u+=b,a){var C=c[v][f];C=e.normalizedValue(C,m),!g&&y.greaterWithPrecision(C,b)&&(g=!0)}}return{values:l,highlights:a?c:void 0,highlightsOverflow:a?g:void 0,totalValue:m?Math.abs(u):u,hasNegativeValues:p,allValuesAreNegative:m}},e.getCullableValue=function(t,a){var i=a.width*a.height,r=e.CullableArea/i;return r*t},e.prototype.update=function(t){var a=this.dataViews=t.dataViews;this.currentViewport=t.viewport;var i=a&&a.length>0&&a[0].categorical?a[0].categorical:void 0,r=g.getDefaultTreemapLabelSettings(),o=null;if(i){var n=a[0],s=n.metadata,l=void 0;s&&(l=s.objects),l&&(o=l.legend),this.data=e.converter(n,this.style,r,this.interactivityService,this.currentViewport,o,this.tooltipsEnabled)}else{var u={key:"root",name:"root",originalValue:void 0,children:[],selected:!1,highlightMultiplier:0,identity:x.createNull(),color:void 0},d=b.getDefaultLegendData(),p={root:u,hasHighlights:!1,legendData:d,dataLabelsSettings:r,dataWasCulled:!1,hasNegativeValues:!1,allValuesAreNegative:!1};this.data=p}if(this.updateInternal(t.suppressAnimations),a){var h=c.getInvalidValueWarnings(a,!1,!1,!1,["Tooltips"]);this.data.allValuesAreNegative?h.push(new c.AllNegativeValuesWarning):this.data.hasNegativeValues&&h.push(new c.NegativeValuesNotSupportedWarning),this.hostService.setWarnings(h)}},e.prototype.onDataChanged=function(e){this.update({suppressAnimations:e.suppressAnimations,dataViews:e.dataViews,viewport:this.currentViewport})},e.prototype.onResizing=function(e){this.update({suppressAnimations:!0,dataViews:this.dataViews,viewport:e})},e.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},e.prototype.enumerateObjectInstances=function(e){var t=this.data;if(t){var a=e.objectName,i=new v,r=this.data.dataLabelsSettings?this.data.dataLabelsSettings:g.getDefaultTreemapLabelSettings();switch(a){case"dataPoint":var o=this.dataViews&&this.dataViews.length>0&&this.dataViews[0]&&this.dataViews[0].categorical,n=f.hasGradientRole(o);n||this.enumerateDataPoints(i,t);break;case"legend":b.enumerate({enumeration:i,legendData:this.data.legendData,customFontFamily:this.customFontFamily});break;case"labels":var s={enumeration:i,dataLabelsSettings:r,show:!0,displayUnits:!0,precision:!0};g.enumerateDataLabels(s);break;case"categoryLabels":g.enumerateCategoryLabels(i,r,!1,!0)}return i.complete()}},e.prototype.enumerateDataPoints=function(e,t){var a=t.root.children;if(!_.isEmpty(a))for(var i=0;i<a.length;i++){var r=a[i];e.pushInstance({displayName:r.name,selector:d.normalizeSelector(r.identity.getSelector()),properties:{fill:{solid:{color:r.color}}},objectName:"dataPoint"})}},e.checkValueForShape=function(e,t,a,i){var r=void 0;return e?(r=a?Math.abs(e)<t:e<t,r?(i=i||r,{validShape:!1,dataWasCulled:i}):{validShape:!0,dataWasCulled:i}):{validShape:!1,dataWasCulled:i}},e.prototype.calculateTreemapSize=function(){var e=this.legend.getMargins();return{height:this.currentViewport.height-e.height,width:this.currentViewport.width-e.width}},e.prototype.initViewportDependantProperties=function(e){void 0===e&&(e=0);var t=this.calculateTreemapSize();this.svg.attr({width:t.width,height:t.height}),b.positionChartArea(this.svg,this.legend),w.flushAllD3TransitionsIfNeeded(this.options)},e.canDisplayMajorLabel=function(t){if(1!==t.depth)return!1;if(_.isEmpty(t.name))return!1;var a=t.dx-2*e.TextMargin;if(a<e.MinTextWidthForMajorLabel)return!1;var i=e.MajorLabelTextSize+2*e.TextMargin;return!(t.dy<i)},e.canDisplayMinorLabel=function(t,a){if(t.depth<1||t.depth>2)return!1;if(1===t.depth&&(t.children||!a.show))return!1;if(_.isEmpty(t.name))return!1;var i=t.dx-2*e.TextMargin;if(i<e.MinTextWidthForMinorLabel)return!1;var r=e.MinorLabelTextSize+2*e.TextMargin;if(t.dy<r)return!1;if(1===t.depth){var o=t.y+e.MajorLabelTextSize+2*e.TextMargin;if(t.y+t.dy-o<r)return!1}else if(2===t.depth){var n=t.parent,o=Math.max(n.y+e.MajorLabelTextSize+2*e.TextMargin,t.y);if(t.y+t.dy-o<r)return!1}return!0},e.createMajorLabelText=function(t,a,i,r){var o=t.dx-2*e.TextMargin,n=e.MajorLabelTextProperties,s={text:t.name,fontFamily:n.fontFamily,fontSize:n.fontSize};return P.getTailoredTextOrDefault(s,o)},e.createMinorLabelText=function(t,a,i,r){var o=t.dx-2*e.TextMargin,n=t.name;if(a.show){var s=r.getOrCreate(t.labelFormatString,a,i);n=g.getLabelFormattedText({label:null!=t.originalHighlightValue?t.originalHighlightValue:t.originalValue,maxWidth:o,formatter:s}),a.showCategory&&2===t.depth&&(n=g.getLabelFormattedText({label:t.name,maxWidth:o})+" "+n)}return g.getLabelFormattedText({label:n,maxWidth:o,fontSize:a.fontSize})},e.prototype.updateInternal=function(t){var a=this.data,i=a&&a.hasHighlights,r=a?a.dataLabelsSettings:null,o=u.GetAnimationDuration(this.animator,t);this.options.interactivity&&this.options.interactivity.isInteractiveLegend||!this.data||this.renderLegend(),this.initViewportDependantProperties(o);var n=this.calculateTreemapSize();this.treemap.size([n.width,n.height]);var s=a&&a.root?this.treemap.nodes(a.root):[],l=s.filter((function(e){return null!=e.highlightMultiplier&&(!e.children||0===e.children.length)})),c=[],d=[],p=null;r.showCategory&&(c=s.filter((function(t){return e.canDisplayMajorLabel(t)}))),(r.show||r.showCategory)&&(d=s.filter((function(t){return e.canDisplayMinorLabel(t,r)})),0===r.displayUnits&&(p=d3.max(d,(function(e){return Math.abs(e.value)}))));var h,g,m,y,f,v=e.getLayout(r,p);if(this.animator&&!t){var b={viewModel:a,nodes:s,highlightNodes:l,majorLabeledNodes:c,minorLabeledNodes:d,shapeGraphicsContext:this.shapeGraphicsContext,labelGraphicsContext:this.labelGraphicsContext,interactivityService:this.interactivityService,layout:v,labelSettings:r};f=this.animator.animate(b),h=f.shapes,g=f.highlightShapes,m=f.majorLabels,y=f.minorLabels}if(!this.animator||t||f.failed){var C=this.interactivityService&&this.interactivityService.hasSelection(),S=this.shapeGraphicsContext;h=e.drawDefaultShapes(S,s,C,i,v),g=e.drawDefaultHighlightShapes(S,l,C,i,v);var x=this.labelGraphicsContext;m=e.drawDefaultMajorLabels(x,c,r,v),y=e.drawDefaultMinorLabels(x,d,r,v)}if(this.interactivityService){var P={shapes:h,highlightShapes:g,majorLabels:m,minorLabels:y,nodes:s,hasHighlights:a.hasHighlights};this.interactivityService.bind(s,this.behavior,P)}this.tooltipsEnabled&&this.addTooltips(h,g),w.flushAllD3TransitionsIfNeeded(this.options)},e.prototype.addTooltips=function(e,t){this.tooltipService.addTooltip(e,(function(e){return e.data&&(e.data.highlightedTooltipInfo?e.data.highlightedTooltipInfo:e.data.tooltipInfo)}),(function(e){return e.data&&e.data.identity})),this.tooltipService.addTooltip(t,(function(e){return e.data&&e.data.highlightedTooltipInfo}),(function(e){return e.data&&e.data.identity}))},e.prototype.renderLegend=function(){var e=this.data.legendObjectProperties;if(e){var t=this.data.legendData;null!=t.position&&this.legend.changeOrientation(t.position),this.legend.drawLegend(t,this.currentViewport)}else this.legend.changeOrientation(C.Top),this.legend.drawLegend(b.getDefaultLegendData(),this.currentViewport)},e.getNodeClass=function(t,i){var r;switch(t.depth){case 1:r=e.ParentGroupClassName;break;case 2:r=e.NodeGroupClassName;break;case 0:r=e.RootNodeClassName}return r+=" "+(i?a.classes.highlight:a.classes.node)},e.createTreemapShapeLayout=function(e){return void 0===e&&(e=!1),{x:function(e){return e.x},y:function(t){return t.y+(e?t.dy*(1-t.highlightMultiplier):0)},width:function(e){return Math.max(0,e.dx)},height:function(t){return Math.max(0,t.dy*(e?t.highlightMultiplier:1))}}},e.createTreemapZeroShapeLayout=function(){return{x:function(e){return e.x},y:function(e){return e.y+e.dy},width:function(e){return Math.max(0,e.dx)},height:function(e){return 0}}},e.drawDefaultShapes=function(e,t,i,r,o){var n=!1,s=e.selectAll("."+a.classes.node).data(t,(function(e){return e.key}));return s.enter().append("rect").attr("class",o.shapeClass),s.style("fill",(function(e){return a.getFill(e,n)})).style("fill-opacity",(function(e){return a.getFillOpacity(e,i,r,n)})).attr(o.shapeLayout),s.exit().remove(),s},e.drawDefaultHighlightShapes=function(e,t,i,r,o){var n=!0,s=e.selectAll("."+a.classes.highlight).data(t,(function(e){return e.key+"highlight"}));return s.enter().append("rect").attr("class",o.highlightShapeClass),s.style("fill",(function(e){return a.getFill(e,n)})).style("fill-opacity",(function(e){return a.getFillOpacity(e,i,r,n)})).attr(o.highlightShapeLayout),s.exit().remove(),s},e.drawDefaultMajorLabels=function(e,t,i,r){var o=e.selectAll("."+a.classes.major).data(t,(function(e){return e.key}));return o.enter().append("text").attr("class",r.majorLabelClass),o.attr(r.majorLabelLayout).text(r.majorLabelText).style("fill",(function(){return i.labelColor})),o.exit().remove(),o},e.drawDefaultMinorLabels=function(e,t,i,r){var o=e.selectAll("."+a.classes.minor).data(t,(function(e){return e.key}));return o.enter().append("text").attr("class",r.minorLabelClass),o.attr(r.minorLabelLayout).text(r.minorLabelText).style("fill",(function(){return i.labelColor})),o.exit().remove(),o},e.cleanMinorLabels=function(t){var i=[],r=t.selectAll("."+e.LabelsGroupClassName).selectAll("."+a.classes.minor).data(i);r.exit().remove()},e})();M.ClassName="treemap",M.LabelsGroupClassName="labels",M.ShapesClassName="shapes",M.RootNodeClassName="rootNode",M.ParentGroupClassName="parentGroup",M.NodeGroupClassName="nodeGroup",M.TextMargin=5,M.MinorLabelTextSize=10,M.MinTextWidthForMinorLabel=18,M.MajorLabelTextSize=12,M.MinTextWidthForMajorLabel=22,M.DefaultFontFamily=c.Font.Family.regular.css,M.MajorLabelTextProperties={fontFamily:M.DefaultFontFamily,fontSize:M.MajorLabelTextSize+"px"},M.CullableArea=9,t.Treemap=M,t.webAnimator=o,t.webBehavior=n})),define("Visuals/visuals/treemap/util",["require","exports"],(function(e,t){function a(e,t){return e.depth>1&&!e.identity.hasIdentity()&&!t?o.noneValue:i(e)?o.noneValue:e.color}function i(e){var t=e.children;if(!t)return!1;var a=t.length;if(0===a)return!1;for(var i=a-1;i>=0;i--)if(t[i].identity.hasIdentity())return!0;return!1}function r(e,t,a,r){return a?r?null:.4.toString():!t||e.selected?null:e.depth>1&&e.parent.selected?null:i(e)?null:.4.toString()}var o=jsCommon.CssConstants;t.classes={node:"treemapNode",highlight:"treemapNodeHighlight",major:"majorLabel",minor:"minorLabel"},t.getFill=a,t.hasChildrenWithIdentity=i,t.getFillOpacity=r}));var powerbi;!(function(e){var t;!(function(t){var a=jsCommon.CssConstants.createClassAndSelector,i=jsCommon.PixelConverter,r=t.NewDataLabelUtils,o=(function(){function a(e){this.labelPositionObjects=[t.labelPosition.outsideEnd,t.labelPosition.insideCenter],e&&(this.tooltipsEnabled=e.tooltipsEnabled,this.axisControlImprovements=e.axisControlImprovements,e.funnelSmallViewPortProperties&&(this.funnelSmallViewPortProperties=e.funnelSmallViewPortProperties),e.animator&&(this.animator=e.animator),e.behavior&&(this.behavior=e.behavior))}return a.converter=function(i,r,o,n,s){void 0===s&&(s=!0);for(var l=e.data.createDataViewCategoricalReaderAdvanced(i,{staticSeriesRole:"Y"}),c=l.data,u=l.columns,d=[],p=t.funnelChartProps.general.formatString,h=i.categorical,g=c.hasHighlights(),m=[],y=0,f=c.getSeriesCount();y<f;y++)m.push(u.getValueMetadataColumn("Y",y));var v,b,C,S,x=!1,w=!1,P=!1,D=[],T=this.getDefaultLabelSettings(),V=this.getDefaultPercentLabelSettings(),L=this.getDefaultCategoryLabelSettings(),N=new t.ColorHelper(r,t.funnelChartProps.dataPoint.fill,n),M=t.GradientUtils.getGradientValueColumn(h);if(i&&i.metadata&&i.metadata.objects){var A=i.metadata.objects.labels;A&&t.dataLabelUtils.updateLabelSettingsFromLabelsObject(A,T);var R=i.metadata.objects.percentBarLabel;R&&t.dataLabelUtils.updateLabelSettingsFromLabelsObject(R,V);var F=i.metadata.objects.categoryAxis;F&&t.dataLabelUtils.updateLabelSettingsFromLabelsObject(F,L)}if(!c.hasValues("Y"))return{dataPoints:d,categoryLabels:D,valuesMetadata:m,hasHighlights:g,highlightsOverflow:x,canShowDataLabels:!0,dataLabelsSettings:T,hasNegativeValues:w,allValuesAreNegative:P,percentBarLabelSettings:V,categoryAxisSettings:L,categoryCount:0};v=c.getValue("Y",0,0),g&&(b=c.getHighlight("Y",0,0));var O=t.valueFormatter.getLocalizedString("Percentage");if(c.hasCategories())for(var I=0,H=c.getCategoryCount();I<H;I++){var j=u.getCategoryColumn("Category"),z=c.getCategoryValue("Category",I),k=u.getValueMetadataColumn("Y"),G=t.SelectionIdBuilder.builder().withCategory(j,I).withMeasure(k.queryName).createSelectionId(),E=c.getValue("Y",I),W=t.converterHelper.formatFromMetadataColumn(z,j.source,p),B=void 0;if(s){B=[],B.push({displayName:j.source.displayName,value:W}),null!=E&&B.push({displayName:k.displayName,value:t.converterHelper.formatFromMetadataColumn(E,k,p,!1)});var U=void 0;g&&(U=c.getHighlight("Y",I),null!=U&&B.push({displayName:t.ToolTipComponent.localizationOptions.highlightedValueDisplayName,value:t.converterHelper.formatFromMetadataColumn(U,k,p,!1)}));var K=M?M.source:void 0;K&&K!==k&&null!=M.values[I]&&B.push({displayName:K.displayName,value:t.converterHelper.formatFromMetadataColumn(c.getValue("Gradient",I),K,p,!1)}),g?a.addFunnelPercentsToTooltip(O,B,o,b?U/b:null,S?U/S:null,!0):a.addFunnelPercentsToTooltip(O,B,o,v?E/v:null,C?E/C:null),t.TooltipBuilder.addTooltipMeasures(l,B,I)}var Y=N.getColorForMeasure(l.objects.getCategoryDataObjects(I),"");if(d.push({label:W,value:E,originalValue:E,categoryOrMeasureIndex:I,identity:G,selected:!1,key:G.getKey(),tooltipInfo:B,color:Y,labelFill:T.labelColor}),g){var q=t.SelectionId.createWithHighlight(G),U=c.getHighlight("Y",I);d.push({label:W,value:E,originalValue:E,categoryOrMeasureIndex:I,identity:q,selected:!1,key:q.getKey(),highlight:!0,highlightValue:U,originalHighlightValue:U,tooltipInfo:B,color:Y}),S=U}C=E}else for(var I=0,y=0,f=c.getSeriesCount();y<f;y++){var E=c.getValue("Y",I,y),k=u.getValueMetadataColumn("Y",y),G=t.SelectionId.createWithMeasure(k.queryName),B=void 0,Y=N.getColorForMeasure(k.objects,"");if(s){if(B=[],null!=E&&B.push({displayName:k.displayName,value:t.converterHelper.formatFromMetadataColumn(E,k,p,!1)}),g){var U=c.getHighlight("Y",I,y);null!=U&&B.push({displayName:t.ToolTipComponent.localizationOptions.highlightedValueDisplayName,value:t.converterHelper.formatFromMetadataColumn(U,k,p,!1)}),a.addFunnelPercentsToTooltip(O,B,o,b?U/b:null,S?U/S:null,!0)}else a.addFunnelPercentsToTooltip(O,B,o,v?E/v:null,C?E/C:null);t.TooltipBuilder.addTooltipMeasures(l,B,I)}if(d.push({label:k.displayName,value:E,originalValue:E,categoryOrMeasureIndex:y,identity:G,selected:!1,key:G.getKey(),tooltipInfo:B,color:Y,labelFill:T.labelColor}),g){var q=t.SelectionId.createWithHighlight(G),X=c.getHighlight("Y",I,y);d.push({label:k.displayName,value:E,originalValue:E,categoryOrMeasureIndex:y,identity:q,key:q.getKey(),selected:!1,highlight:!0,originalHighlightValue:X,highlightValue:X,tooltipInfo:B,color:Y}),S=X}C=E}for(var $=0;$<d.length;$+=g?2:1){var Q=d[$];D.push(Q.label)}P=d.length>0&&_.every(d,(function(e){return(!e.highlight||e.highlightValue<=0)&&e.value<0}));for(var Z=0,J=d;Z<J.length;Z++){var Q=J[Z];if(P)Q.value=Math.abs(Q.value),Q.highlight&&(Q.highlightValue=Math.abs(Q.highlightValue));else{var E=Q.value,ee=E<0;ee&&(Q.value=0);var te=!1;if(Q.highlight){var U=Q.highlightValue;te=U<0,Q.highlightValue=te?0:U}w||(w=ee||te)}e.Double.greaterWithPrecision(Q.highlightValue,Q.value)&&(x=!0)}return{dataPoints:d,categoryLabels:D,valuesMetadata:m,hasHighlights:g,highlightsOverflow:x,canShowDataLabels:!0,dataLabelsSettings:T,hasNegativeValues:w,allValuesAreNegative:P,percentBarLabelSettings:V,categoryAxisSettings:L,categoryCount:D.length}},a.prototype.enumerateObjectInstances=function(e){var i=new t.ObjectEnumerationBuilder;switch(e.objectName){case"dataPoint":var r=this.dataViews&&this.dataViews.length>0&&this.dataViews[0]&&this.dataViews[0].categorical,o=t.GradientUtils.hasGradientRole(r);o||this.enumerateDataPoints(i);break;case"labels":var n=a.getLabelSettingsOptions(i,this.data.dataLabelsSettings,!0,this.labelPositionObjects);t.dataLabelUtils.enumerateDataLabels(n);break;case"percentBarLabel":var s=a.getLabelSettingsOptions(i,this.data.percentBarLabelSettings,!1);t.dataLabelUtils.enumerateDataLabels(s);break;case"categoryAxis":var l=a.getLabelSettingsOptions(i,this.data.categoryAxisSettings,!0);t.dataLabelUtils.enumerateDataLabels(l)}return i.complete()},a.getLabelSettingsOptions=function(e,t,a,i){return{enumeration:e,dataLabelsSettings:t,show:!0,displayUnits:a,precision:a,position:a,positionObject:i,fontSize:!0}},a.prototype.enumerateDataPoints=function(e){var a=this.data;if(a){var i=a.dataPoints;e.pushInstance({objectName:"dataPoint",selector:null,properties:{defaultColor:{solid:{color:this.defaultDataPointColor||this.colors.getColorByIndex(0).value}}}});for(var r=0;r<i.length;r++){var o=i[r];if(!o.highlight){var n=o.color,s=o.identity.getSelector(),l=!!s.data;e.pushInstance({objectName:"dataPoint",displayName:o.label,selector:t.ColorHelper.normalizeSelector(s,l),properties:{fill:{solid:{color:n}}}})}}}},a.prototype.init=function(i){this.options=i;var o=i.element,n=this.svg=d3.select(o.get(0)).append("svg").classed(a.VisualClassName,!0);this.tooltipService=t.createTooltipService(i.host),this.behavior&&(this.clearCatcher=t.appendClearCatcher(this.svg)),this.currentViewport=i.viewport,this.margin=e.Prototype.inherit(a.DefaultMargin);var s=i.style;this.colors=s.colorPalette.dataColors,this.hostServices=i.host,this.behavior&&(this.interactivityService=t.createInteractivityService(this.hostServices)),this.percentGraphicsContext=n.append("g").classed(a.Selectors.percentBar.root.class,!0),this.funnelGraphicsContext=n.append("g"),this.axisGraphicsContext=n.append("g"),this.labelGraphicsContext=n.append("g").classed(r.labelGraphicsContextClass.class,!0),this.updateViewportProperties()},a.prototype.updateViewportProperties=function(){var e=this.currentViewport;this.svg.attr("width",e.width).attr("height",e.height)},a.prototype.update=function(i){this.data={dataPoints:[],categoryLabels:[],valuesMetadata:[],hasHighlights:!1,highlightsOverflow:!1,canShowDataLabels:!0,dataLabelsSettings:t.dataLabelUtils.getDefaultLabelSettings(),hasNegativeValues:!1,allValuesAreNegative:!1,percentBarLabelSettings:t.dataLabelUtils.getDefaultLabelSettings(!0),categoryAxisSettings:t.dataLabelUtils.getDefaultLabelSettings(!0),categoryCount:0};var r=this.dataViews=i.dataViews;if(this.currentViewport=i.viewport,r&&r.length>0){var o=r[0];if(o.metadata&&o.metadata.objects){var n=e.DataViewObjects.getFillColor(o.metadata.objects,t.funnelChartProps.dataPoint.defaultColor);n&&(this.defaultDataPointColor=n)}o.categorical&&(this.data=a.converter(o,this.colors,this.hostServices,this.defaultDataPointColor,this.tooltipsEnabled),this.interactivityService&&this.interactivityService.applySelectionStateToData(this.data.dataPoints));var s=t.getInvalidValueWarnings(r,!1,!1,!1,["Tooltips"]);this.data.allValuesAreNegative?s.push(new t.AllNegativeValuesWarning):this.data.hasNegativeValues&&s.push(new t.NegativeValuesNotSupportedWarning),this.hostServices.setWarnings(s)}this.updateViewportProperties(),this.updateInternal(i.suppressAnimations)},a.prototype.onDataChanged=function(e){this.update({dataViews:e.dataViews,suppressAnimations:e.suppressAnimations,viewport:this.currentViewport})},a.prototype.onResizing=function(e){this.currentViewport=e,this.update({dataViews:this.dataViews,suppressAnimations:!0,viewport:this.currentViewport})},a.prototype.getMaxLabelLength=function(t,i){for(var r=0,o=e.TextMeasurementService.measureSvgTextWidth,n=0,s=t.length;n<s;n++)i.text=t[n],r=Math.max(r,o(i));return r+a.LabelFunnelPadding},a.prototype.updateInternal=function(e){if(null!=this.data){var i=this.data,o=i.dataPoints,n=o.filter((function(e){return!e.highlight})),s=this.isHidingPercentBars(),l=this.setUpAxis(),c=l.margin,u=this.funnelGraphicsContext.attr("transform",t.SVGUtil.translate(c.left,c.top)),d=this.labelGraphicsContext.attr("transform",t.SVGUtil.translate(c.left,c.top));this.percentGraphicsContext.attr("transform",t.SVGUtil.translate(c.left,c.top)),this.svg.style("font-family",t.dataLabelUtils.StandardFontFamily);var p,h,g=a.getLayout(i,l),m=this.getLabels(g);if(this.animator&&!e){var y={viewModel:i,interactivityService:this.interactivityService,layout:g,axisGraphicsContext:this.axisGraphicsContext,shapeGraphicsContext:u,percentGraphicsContext:this.percentGraphicsContext,labelGraphicsContext:this.labelGraphicsContext,axisOptions:l,dataPointsWithoutHighlights:n,labelLayout:m,isHidingPercentBars:s,visualInitOptions:this.options};p=this.animator.animate(y),h=p.shapes}if((!this.animator||e||p.failed)&&(a.drawDefaultAxis(this.axisGraphicsContext,l,s),h=a.drawDefaultShapes(i,o,u,g,this.interactivityService&&this.interactivityService.hasSelection()),a.drawPercentBars(i,this.percentGraphicsContext,g,s),r.drawDefaultLabels(d,m,!1)),this.interactivityService){var f=a.drawInteractorShapes(o,u,g),v={bars:h,interactors:f,clearCatcher:this.clearCatcher,hasHighlights:i.hasHighlights};this.interactivityService.bind(o,this.behavior,v),this.tooltipsEnabled&&this.tooltipService.addTooltip(f,(function(e){return e.data&&e.data.tooltipInfo}),(function(e){return e.data&&e.data.identity}))}this.tooltipsEnabled&&this.tooltipService.addTooltip(h,(function(e){return e.data&&e.data.tooltipInfo}),(function(e){return e.data&&e.data.identity})),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options)}},a.prototype.getUsableVerticalSpace=function(){var e=this.margin,t=this.currentViewport.height-(e.top+e.bottom);return t-a.MinBarThickness*this.data.categoryCount},a.prototype.isHidingPercentBars=function(){var e=this.data;if(e.percentBarLabelSettings.show){var t=this.getPercentBarTextHeight(),i=this.getUsableVerticalSpace()-2*a.MinBarThickness*a.PercentBarToBarRatio-2*t;return i<=0}return!0},a.prototype.isSparklines=function(){return this.getUsableVerticalSpace()<=0},a.prototype.setUpAxis=function(){var t=this.data,i=t.dataPoints,r=t.categoryLabels,o=this.currentViewport,n=e.Prototype.inherit(a.DefaultMargin),s=this.isSparklines(),l=this.isHidingPercentBars(),c=l?0:this.getPercentBarTextHeight(),u=o.height-(n.top+n.bottom)-2*c,d=a.MaxMarginFactor,p=t.categoryAxisSettings.labelColor;if(r.length>0&&s)r=[],t.canShowDataLabels=!1;else if(this.showCategoryLabels()){var h=a.getTextProperties(),g=this.getMaxLabelLength(r,h),m=o.width*d,y=Math.min(g,m);n.left=y+a.YAxisPadding}else r=[];var f=o.width-(n.left+n.right),v=a.BarToSpaceRatio,b=d3.max(i.map((function(e){return e.value})));if(t.hasHighlights){var C=d3.max(i.map((function(e){return e.highlightValue})));b=d3.max([b,C])}var S,x=0,w=0,P=u;S=l?u-t.categoryCount*a.MaxBarHeight:u-t.categoryCount*a.MaxBarHeight-2*a.MaxBarHeight*a.PercentBarToBarRatio,t.categoryCount>0&&S>0&&(w=Math.ceil(S/2),P=Math.ceil(u-S/2)),l||(w+=c,P+=c);var D=d3.scale.linear().domain([x,b]).range([f,0]),T=d3.scale.ordinal().domain(d3.range(0,t.categoryCount)).rangeBands([w,P],v,l?v:a.PercentBarToBarRatio);return{margin:n,valueScale:D,categoryScale:T,maxScore:b,maxWidth:f,rangeStart:w,rangeEnd:P,barToSpaceRatio:v,categoryLabels:r,labelColor:p}},a.prototype.getPercentBarTextHeight=function(){var t=a.getTextProperties(this.data.percentBarLabelSettings.fontSize);return e.TextMeasurementService.estimateSvgTextHeight(t)},a.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},a.getLayout=function(r,o){var n=r.highlightsOverflow,s=o.categoryScale,l=o.valueScale,c=o.maxScore,u=s.rangeBand(),d=Math.ceil(u/2),p=u*a.OverflowingHighlightWidthRatio,h=p/2,g=r.categoryCount-1,m=Math.abs(l(c)-l(0)),y=function(e){return(m-Math.abs(l(e)-l(0)))/2},f=function(e){return Math.max(a.MinimumInteractorSize,Math.abs(l(e)-l(0)))},v=i.fromPoint(r.percentBarLabelSettings.fontSize),b=a.getTextProperties(r.percentBarLabelSettings.fontSize),C=e.TextMeasurementService.estimateSvgTextBaselineDelta(b),S=e.TextMeasurementService.estimateSvgTextHeight(b)-C;return{percentBarLayout:{mainLine:{x2:function(e){return Math.abs(l(e.value)-l(0))},transform:function(e){var a=l(e.value)-y(e.value),i=e.isTop?s(0)-d:s(g)+u+d;return t.SVGUtil.translate(a,i)}},leftTick:{y2:function(e){return d},transform:function(e){var a=l(e.value)-y(e.value),i=e.isTop?s(0)-d-d/2:s(g)+u+d-d/2;return t.SVGUtil.translate(a,i)}},rightTick:{y2:function(e){return d},transform:function(e){var a=l(e.value)-y(e.value),i=Math.abs(l(e.value)-l(0)),r=a+i,o=e.isTop?s(0)-d-d/2:s(g)+u+d-d/2;return t.SVGUtil.translate(r,o)}},text:{x:function(e){return Math.ceil(Math.abs(l(c)-l(0))/2)},y:function(e){return e.isTop?-d/2-C:S+d/2},style:function(){return"font-size: "+v+";"},transform:function(e){var a=e.isTop?s(0)-d:s(g)+u+d;return t.SVGUtil.translate(0,a)},fill:r.percentBarLabelSettings.labelColor,maxWidth:m}},shapeLayout:{height:function(e){return e.highlight&&n?p:u},width:function(e){return Math.abs(l(a.getValueFromDataPoint(e))-l(0))},y:function(e){return s(e.categoryOrMeasureIndex)+(e.highlight&&n?h:0)},x:function(e){var t=a.getValueFromDataPoint(e);return l(t)-y(t)}},shapeLayoutWithoutHighlights:{height:function(e){return u},width:function(e){return Math.abs(l(e.value)-l(0))},y:function(e){return s(e.categoryOrMeasureIndex)+0},x:function(e){return l(e.value)-y(e.value)}},zeroShapeLayout:{height:function(e){return e.highlight&&n?p:u},width:function(e){return 0},y:function(e){return s(e.categoryOrMeasureIndex)+(e.highlight&&n?h:0)},x:function(e){return l((l.domain()[0]+l.domain()[1])/2)}},interactorLayout:{height:function(e){return e.highlight&&n?p:u},width:function(e){return f(a.getValueFromDataPoint(e))},y:function(e){return s(e.categoryOrMeasureIndex)+(e.highlight&&n?h:0)},x:function(e){var t=f(a.getValueFromDataPoint(e));return(m-t)/2}}}},a.drawDefaultAxis=function(i,r,o){var n=d3.range(0,r.categoryLabels.length),s=d3.scale.ordinal().domain(n).rangeBands([r.rangeStart,r.rangeEnd],r.barToSpaceRatio,o?r.barToSpaceRatio:a.PercentBarToBarRatio),l=d3.svg.axis().scale(s).orient("right").tickPadding(a.TickPadding).innerTickSize(a.InnerTickSize).ticks(n.length).tickValues(n).tickFormat((function(e){return r.categoryLabels[e]}));i.attr("class","axis hideLinesOnAxis").attr("transform",t.SVGUtil.translate(0,r.margin.top)).call(l),i.selectAll(".tick").call(t.tooltipUtils.tooltipUpdate,r.categoryLabels);var c=r.margin.left-a.LabelFunnelPadding;i.selectAll(".tick text").call(t.AxisHelper.LabelLayoutStrategy.clip,c,e.TextMeasurementService.svgEllipsis).style("fill",r.labelColor?r.labelColor:null)},a.drawDefaultShapes=function(e,i,r,o,n){var s=e.hasHighlights,l=r.selectAll(a.Selectors.funnel.bars.selector).data(i,(function(e){return e.key}));return l.enter().append("rect").attr("class",(function(e){return e.highlight?a.FunnelBarHighlightClass:a.Selectors.funnel.bars.class})),l.style("fill",(function(e){return e.color})).style("fill-opacity",(function(e){return t.ColumnUtil.getFillOpacity(e.selected,e.highlight,n,s)})).attr(o.shapeLayout),l.exit().remove(),l},a.getValueFromDataPoint=function(e,t){return void 0===t&&(t=!1),t?e.highlight?e.originalHighlightValue:e.originalValue:e.highlight?e.highlightValue:e.value},a.drawInteractorShapes=function(e,t,i){var r=e.filter((function(e){return!e.highlight&&i.interactorLayout.width(e)===a.MinimumInteractorSize})),o=t.selectAll(a.Selectors.funnel.interactors.selector).data(r,(function(e){return e.key}));return o.enter().append("rect").attr("class",a.Selectors.funnel.interactors.class),o.style("fill-opacity",0).attr(i.interactorLayout),o.exit().remove(),o},a.drawPercentBarComponents=function(i,r,o,n){var s=i.selectAll(a.Selectors.percentBar.mainLine.selector).data(r);
s.exit().remove(),s.enter().append("line").classed(a.Selectors.percentBar.mainLine.class,!0),s.attr(o.percentBarLayout.mainLine);var l=i.selectAll(a.Selectors.percentBar.leftTick.selector).data(r);l.exit().remove(),l.enter().append("line").classed(a.Selectors.percentBar.leftTick.class,!0),l.attr(o.percentBarLayout.leftTick);var c=i.selectAll(a.Selectors.percentBar.rightTick.selector).data(r);c.exit().remove(),c.enter().append("line").classed(a.Selectors.percentBar.rightTick.class,!0),c.attr(o.percentBarLayout.rightTick);var u=i.selectAll(a.Selectors.percentBar.text.selector).data(r),d=t.valueFormatter.getLocalizedString("Percentage1");u.exit().remove(),u.enter().append("text").classed(a.Selectors.percentBar.text.class,!0),u.attr(o.percentBarLayout.text).text((function(e){return t.dataLabelUtils.getLabelFormattedText({label:e.percent,format:d,fontSize:n.fontSize,maxWidth:o.percentBarLayout.text.maxWidth})})).append("title").text((function(t){return e.formattingService.formatValue(t.percent,d)}))},a.drawPercentBars=function(e,t,i,r){if(r||!e.dataPoints||e.categoryCount<2)return void a.drawPercentBarComponents(t,[],i,e.percentBarLabelSettings);var o=[e.dataPoints[e.hasHighlights?1:0],e.dataPoints[e.dataPoints.length-1]],n=a.getValueFromDataPoint(o[0]);if(n<=0)return void a.drawPercentBarComponents(t,[],i,e.percentBarLabelSettings);var s=[{value:a.getValueFromDataPoint(o[0]),percent:1,isTop:!0},{value:a.getValueFromDataPoint(o[1]),percent:a.getValueFromDataPoint(o[1])/n,isTop:!1}];a.drawPercentBarComponents(t,s,i,e.percentBarLabelSettings)},a.prototype.showCategoryLabels=function(){return!(this.funnelSmallViewPortProperties&&this.funnelSmallViewPortProperties.hideFunnelCategoryLabelsOnSmallViewPort&&this.currentViewport.height<this.funnelSmallViewPortProperties.minHeightFunnelCategoryLabelsVisible)&&(this.data&&this.data.categoryAxisSettings&&this.data.categoryAxisSettings.show)},a.addFunnelPercentsToTooltip=function(e,a,i,r,o,n){null!=r&&a.push({displayName:i.getLocalizedString("Funnel_PercentOfFirst"+(n?"_Highlight":"")),value:t.valueFormatter.format(r,e)}),null!=o&&a.push({displayName:i.getLocalizedString("Funnel_PercentOfPrevious"+(n?"_Highlight":"")),value:t.valueFormatter.format(o,e)})},a.getTextProperties=function(e){return{fontSize:i.fromPoint(e||t.dataLabelUtils.DefaultFontSizeInPt),fontFamily:a.DefaultFontFamily}},a.getDefaultLabelSettings=function(){return{show:!0,position:e.visuals.labelPosition.insideCenter,displayUnits:0,labelColor:null,fontSize:r.DefaultLabelFontSizeInPt}},a.getDefaultPercentLabelSettings=function(){return{show:!0,position:0,displayUnits:0,labelColor:r.defaultLabelColor,fontSize:r.DefaultLabelFontSizeInPt}},a.getDefaultCategoryLabelSettings=function(){return{show:!0,labelColor:r.defaultLabelColor}},a.prototype.getLabels=function(t){var a=[];if(this.data.dataLabelsSettings.show&&this.data.canShowDataLabels){var i=this.createLabelDataPoints(t.shapeLayout,this.data.dataLabelsSettings),o=new e.LabelLayout({maximumOffset:r.maxLabelOffset,startingOffset:r.startingLabelOffset}),n={labelDataPoints:i,maxNumberOfLabels:i.length},s={width:this.currentViewport.width-this.margin.left,height:this.currentViewport.height-this.margin.top};a=o.layout([n],s)}return a},a.prototype.createLabelDataPoints=function(o,n){var s=this.data,l=s.dataPoints;if(_.isEmpty(l))return[];var c=new Array,u=l[0],d=a.LabelInsidePosition,p=o.height(u);n.position&&n.position===t.labelPosition.outsideEnd&&(d=a.LabelOutsidePosition);var h=null;0===n.displayUnits&&(h=s.dataPoints.reduce((function(e,t){return Math.abs(e.value)>Math.abs(t.value)?e:t})).value);for(var g=t.valueFormatter.getFormatString(s.valuesMetadata[0],t.funnelChartProps.general.formatString),m=r.createColumnFormatterCacheManager(),y=n.fontSize,f={fontFamily:r.LabelTextProperties.fontFamily,fontSize:i.fromPoint(y||r.DefaultLabelFontSizeInPt),fontWeight:r.LabelTextProperties.fontWeight},v=u.labelFill||r.defaultLabelColor,b=u.labelFill||r.defaultInsideLabelColor,C=0,S=l;C<S.length;C++){var x=S[C],w=a.getValueFromDataPoint(x,!0);if(null!=w&&(!s.hasHighlights||x.highlight)){var P=null!=g?g:u.labelFormatString,D=m.getOrCreate(P,n,h),T=D.format(w);f.text=T;var V=e.TextMeasurementService.measureSvgTextWidth(f),L=e.TextMeasurementService.estimateSvgTextHeight(f),N=1,M={rect:{left:o.x(x),top:o.y(x),width:o.width(x),height:p},orientation:a.LabelOrientation,validPositions:d},A={isPreferred:!0,text:T,textSize:{width:V,height:L},fontSize:y,parentType:N,parentShape:M,insideFill:b,outsideFill:v,identity:x.identity,hasBackground:!1};0===x.value&&(M={validPositions:[256],point:{x:o.x(x),y:o.y(x)+p/2}},N=0,A.parentShape=M,A.parentType=N,A.insideFill=A.outsideFill),c.push(A)}}return c},a})();o.LabelInsidePosition=[1,16],o.LabelOutsidePosition=[16,4],o.LabelOrientation=3,o.DefaultBarOpacity=1,o.DimmedBarOpacity=.4,o.PercentBarToBarRatio=.75,o.TickPadding=0,o.InnerTickSize=0,o.MinimumInteractorSize=15,o.InnerTextClassName="labelSeries",o.Selectors={funnel:{bars:a("funnelBar"),highlights:a("highlight"),interactors:a("funnelBarInteractor")},percentBar:{root:a("percentBars"),mainLine:a("mainLine"),leftTick:a("leftTick"),rightTick:a("rightTick"),text:a("value")}},o.FunnelBarHighlightClass=[o.Selectors.funnel.bars.class,o.Selectors.funnel.highlights.class].join(" "),o.YAxisPadding=10,o.VisualClassName="funnelChart",o.DefaultFontFamily=t.Font.Family.regularSecondary.css,o.BarToSpaceRatio=.1,o.MaxBarHeight=40,o.MinBarThickness=12,o.LabelFunnelPadding=6,o.OverflowingHighlightWidthRatio=.5,o.MaxMarginFactor=.25,o.DefaultMargin={left:5,right:5,top:0,bottom:0},t.FunnelChart=o})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=jsCommon.CssConstants.createClassAndSelector,i=jsCommon.PixelConverter,r=e.data.DataRoleHelper,o=(function(){function a(e){this.lastAngle=-Math.PI/2,e&&(e.gaugeSmallViewPortProperties&&(this.gaugeSmallViewPortProperties=e.gaugeSmallViewPortProperties),this.animator=e.animator,this.tooltipsEnabled=e.tooltipsEnabled)}return a.prototype.enumerateObjectInstances=function(e){var a=new t.ObjectEnumerationBuilder;switch(e.objectName){case"axis":this.enumerateAxis(a);break;case"labels":var i=this.data?this.data.minLabel.settings:t.dataLabelUtils.getDefaultGaugeLabelSettings();t.dataLabelUtils.enumerateDataLabels(this.getDataLabelSettingsOptions(a,i));break;case"target":var r=this.data&&this.data.target?this.data.target.label.settings:t.dataLabelUtils.getDefaultGaugeLabelSettings();t.dataLabelUtils.enumerateDataLabels(this.getDataLabelSettingsOptions(a,r));break;case"calloutValue":var i=this.data?this.data.calloutLabel.settings:t.dataLabelUtils.getDefaultGaugeLabelSettings();t.dataLabelUtils.enumerateDataLabels(this.getDataLabelSettingsOptions(a,i));break;case"dataPoint":this.enumerateDataPoint(a)}return a.complete()},a.prototype.getDataLabelSettingsOptions=function(e,t){return{dataLabelsSettings:t,show:!0,precision:!0,displayUnits:!0,fontSize:!0,enumeration:e}},a.prototype.enumerateAxis=function(e){var t=this.dataView;if(t&&t.metadata){var i=a.getGaugeObjectsProperties(t);e.pushInstance({selector:null,objectName:"axis",properties:i})}},a.prototype.enumerateDataPoint=function(e){var i=this.data?this.data.dataPointSettings:a.DefaultDataPointSettings,r={};r.fill={solid:{color:i.fillColor}},null!=i.targetColor&&(r.target={solid:{color:i.targetColor}}),e.pushInstance({selector:null,objectName:t.gaugeProps.dataPoint.target.objectName,properties:r})},a.getGaugeObjectsProperties=function(e){var a={},i=e.metadata.objects,o=!!i&&!!i.axis;return r.hasRoleInDataView(e,t.gaugeRoleNames.minValue)||(a.min=o?i.axis.min:void 0),r.hasRoleInDataView(e,t.gaugeRoleNames.maxValue)||(a.max=o?i.axis.max:void 0),r.hasRoleInDataView(e,t.gaugeRoleNames.targetValue)||(a.target=o?i.axis.target:void 0),a},a.prototype.init=function(e){this.element=e.element,this.currentViewport=e.viewport,this.style=e.style,this.options=e,this.settings=a.DefaultStyleProperties,this.tooltipService=t.createTooltipService(e.host),this.labelPosition=0,this.margin={top:0,left:0,right:0,bottom:0},this.color=d3.scale.ordinal().range(this.style.colorPalette.dataColors.getSentimentColors().map((function(e){return e.value}))),this.hostService=e.host;var i=this.svg=d3.select(this.element.get(0)).append("svg");i.classed(a.VisualClassName,!0);var r=this.mainGraphicsContext=i.append("g");r.attr("class",a.MainGaugeGroupClassName),this.initKpiBands();var o=this.backgroundArc=d3.svg.arc().innerRadius(0).outerRadius(0).startAngle(-Math.PI/2).endAngle(Math.PI/2),n=this.foregroundArc=d3.svg.arc().innerRadius(0).outerRadius(0).startAngle(-Math.PI/2);this.backgroundArcPath=r.append("path").classed("backgroundArc",!0).attr("d",o),this.foregroundArcPath=r.append("path").datum({endAngle:-Math.PI/2}).classed("foregroundArc",!0).attr("d",n);var s=this.animatedNumberGrapicsContext=i.append("g");this.animatedNumber=new t.AnimatedNumber(s),this.animatedNumber.init(e);var l=this.gaugeVisualProperties=this.getGaugeVisualProperties(),c=this.getAnimatedNumberProperties(l.radius,l.innerRadiusFactor,l.top,l.left);this.animatedNumberGrapicsContext.attr("transform",c.transformString),this.animatedNumber.onResizing(c.viewport)},a.prototype.update=function(i){if(this.currentViewport=i.viewport,i.dataViews&&i.dataViews[0]){var r=this.dataView=i.dataViews[0],o=e.data.createDataViewCategoricalReaderAdvanced(r);if(i.type&e.VisualUpdateType.Data||!this.data){this.data=t.GaugeConverter.convert(o,this.style);var n=t.getInvalidValueWarnings([r],!1,!1,!1,["Tooltips"]);this.hostService.setWarnings(n)}(i.type&e.VisualUpdateType.Resize||i.type&e.VisualUpdateType.ResizeEnd)&&(i.suppressAnimations=!0),this.dataView.single={value:this.data.calloutLabel.value},this.labels=[this.data.minLabel,this.data.maxLabel],this.showTargetLabel=this.data.target.ratio>=0&&this.data.target.ratio<=1&&this.currentViewport.width>a.MinWidthForTargetLabel&&this.showSideNumbersLabelText()&&this.data.target.label.settings.show;var s=a.calculatePosition(this.data,this.showTargetLabel,this.currentViewport,this.gaugeSmallViewPortProperties);this.labelPosition=s.labelPosition,this.margin=s.margin,this.gaugeVisualProperties=this.getGaugeVisualProperties(),this.drawViewPort(this.gaugeVisualProperties),this.updateInternal(i.suppressAnimations),this.updateCalloutValue(i.suppressAnimations)}},a.prototype.updateCalloutValue=function(e){var t=this.data.calloutLabel.settings;if(this.data.calloutLabel.settings.show){var a=this.getAnimatedNumberProperties(this.gaugeVisualProperties.radius,this.gaugeVisualProperties.innerRadiusFactor,this.gaugeVisualProperties.top,this.gaugeVisualProperties.left);this.animatedNumberGrapicsContext.attr("transform",a.transformString),this.animatedNumber.setTextColor(t.labelColor);var i=this.data.calloutLabel.value,r=this.data.calloutLabel.formatter;this.animatedNumber.setFormatter(r),this.animatedNumber.update({viewport:a.viewport,dataViews:[this.dataView],suppressAnimations:e}),this.animatedNumberGrapicsContext.selectAll("title").remove(),this.animatedNumberGrapicsContext.append("title").text([r.format(i)])}else this.animatedNumber.clear(),this.animatedNumberGrapicsContext.selectAll("title").remove()},a.prototype.initKpiBands=function(){if(this.settings.kpiBands.show)for(var e=this.kpiArcs=[],t=this.kpiArcPaths=[],a=this.mainGraphicsContext,i=0;i<3;i++){var r=d3.svg.arc().innerRadius(0).outerRadius(0).startAngle(0).endAngle(0);e.push(r);var o=a.append("path").attr("d",r);t.push(o)}},a.prototype.updateKpiBands=function(e,t,i,r){if(this.settings.kpiBands.show)for(var o=0;o<r.length;o++)this.kpiArcs[o].innerRadius(e*t-(a.KpiBandDistanceFromMainArc+this.settings.kpiBands.thickness)).outerRadius(e*t-a.KpiBandDistanceFromMainArc).startAngle(r[o].start).endAngle(r[o].end),this.kpiArcPaths[o].attr("fill",r[o].fill).attr("d",this.kpiArcs[o]).attr("transform",i)},a.prototype.removeTargetElements=function(){this.targetLine&&(this.targetLine.remove(),this.targetText.remove(),this.targetConnector.remove(),this.targetLine=this.targetConnector=this.targetText=null)},a.prototype.updateTargetLine=function(e,t,a,i){this.targetLine||(this.targetLine=this.mainGraphicsContext.append("line"));var r=this.data.target.ratio*Math.PI,o=i-e*Math.sin(r),n=a-e*Math.cos(r),s=i-t*Math.sin(r),l=a-t*Math.cos(r);this.targetLine.attr({x1:l,y1:s,x2:n,y2:o})},a.prototype.getAnimatedNumberProperties=function(e,i,r,o){var n=Math.PI/4,s=1,l=e*i,c=l-(this.settings.kpiBands.show?a.KpiBandDistanceFromMainArc+this.settings.kpiBands.thickness:0),u=c*Math.cos(n),d=c*Math.sin(n),p=r-d,h=o-u;p*=s,h*=s;var g=2*u,m={transformString:t.SVGUtil.translate(h,p),viewport:{height:d,width:g}};return m},a.prototype.getGaugeVisualProperties=function(){var e=this.currentViewport,i=this.margin,r=e.width-i.right-i.left,o=r/2,n=e.height-i.top-i.bottom,s=Math.min(o,n),l=a.InnerRadiusFactor,c=i.left+o,u=s+(n-s)/2+i.top,d=t.SVGUtil.translate(c,u),p=s*l,h={radius:s,innerRadiusOfArc:p,left:c,top:u,height:n,width:r,margin:i,transformString:d,innerRadiusFactor:l};return h},a.prototype.drawViewPort=function(e){var t=this.settings.kpiBands.separationRadians,i=a.InnerRadiusFactor,r=this.backgroundArc,o=this.color,n=[{fill:o(0),start:-Math.PI/2,end:-Math.PI/2+Math.PI/4-t},{fill:o(1),start:-Math.PI/2+1*Math.PI/4+t,end:-Math.PI/2+3*Math.PI/4-t},{fill:o(2),start:-Math.PI/2+3*Math.PI/4+t,end:Math.PI/2}],s=e.radius,l=e.transformString;this.updateKpiBands(s,i,l,n),r.innerRadius(s*i).outerRadius(s).startAngle(-Math.PI/2).endAngle(Math.PI/2),this.backgroundArcPath.attr("d",r).attr("transform",l);var c=this.foregroundArc;c.innerRadius(s*i).outerRadius(s).startAngle(-Math.PI/2),this.foregroundArcPath.datum({endAngle:this.lastAngle}).attr("transform",l).attr("d",c);var u=e.innerRadiusOfArc,d=e.left,p=e.top,h=e.margin,g=e.height;this.settings.targetLine.show&&$.isNumeric(this.data.target.label.value)?this.data.target.ratio<0||this.data.target.ratio>1?this.removeTargetElements():(this.updateTargetLine(s,u,d,p),this.renderTarget(s,g,e.width,h)):this.removeTargetElements(),this.svg.attr("height",this.currentViewport.height).attr("width",this.currentViewport.width)},a.prototype.updateInternal=function(e){var a=this.gaugeVisualProperties.height,i=this.gaugeVisualProperties.width,r=this.gaugeVisualProperties.radius,o=this.margin,n=t.AnimatorCommon.GetAnimationDuration(this.animator,e),s=this.data,l=this.lastAngle=-Math.PI/2+Math.PI*this.data.ratio;this.foregroundArcPath.transition().ease(this.settings.transition.ease).duration(n).call(this.arcTween,[l,this.foregroundArc]),this.renderMinMaxLabels(this.labels,r,a,i,o),this.updateVisualConfigurations(),this.tooltipsEnabled&&(this.tooltipService.addTooltip(this.foregroundArcPath,(function(e){return s.tooltipInfo}),(function(e){})),this.tooltipService.addTooltip(this.backgroundArcPath,(function(e){return s.tooltipInfo}),(function(e){})))},a.prototype.updateVisualConfigurations=function(){var e=this.settings,t=this.data.dataPointSettings;this.mainGraphicsContext.select("line").attr({stroke:t.targetColor,"stroke-width":e.targetLine.thickness}),this.backgroundArcPath.style("fill",e.arcColors.background),this.foregroundArcPath.style("fill",t.fillColor)},a.prototype.renderMinMaxLabels=function(r,o,n,s,l){this.svg.selectAll(a.LabelText.selector).remove();var c=this.data.minLabel.settings.labelColor||this.style.labelText.color.value;if(this.data.minLabel.settings.show)for(var u=this.data.minLabel.settings,d=r.length,p=d-1,h=this.labelPosition,g=i.fromPoint(u.fontSize),m=this.settings.labels.padding,y=0;y<d;y++){var f=this.gaugeVisualProperties.top,v={text:r[y].text,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:g,fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight};if(this.showSideNumbersLabelText()){var b=l.left+s/2-o*Math.cos(Math.PI*y/p),C=void 0,S=1===y,x=!1;2===h?(x=!0,f+=m,C=S?"end":"start",v.text=e.TextMeasurementService.getTailoredTextOrDefault(v,o)):(C=S?"start":"end",b+=m*(S?1:-1));var w=this.mainGraphicsContext.append("text").attr({x:b,y:f,dy:x?g:0,class:a.LabelText.class}).style({"text-anchor":C,"font-size":g,fill:c}).text(v.text).append("title").text(v.text);x||this.truncateTextIfNeeded(w,b,S)}}},a.prototype.truncateTextIfNeeded=function(a,i,r){var o=r?this.currentViewport.width-i:i;a.call(t.AxisHelper.LabelLayoutStrategy.clip,o,e.TextMeasurementService.svgEllipsis)},a.prototype.renderTarget=function(e,r,o,n){var s=this.data.target,l=this.data.target.label.settings,c=s.label.value,u=s.ratio,d=e+(r-e)/2+n.top,p=u>.5,h=this.settings.labels.padding,g=p?"start":"end",m=this.data.target.label.formatter,y=Math.asin(a.MinDistanceFromBottom/e)/Math.PI,f=u<y||u>1-y?p?1-y:y:u,v=n.left+o/2-(e+h)*Math.cos(Math.PI*f),b=d-(e+h)*Math.sin(Math.PI*f);this.targetText||(this.targetText=this.mainGraphicsContext.append("text").classed(a.TargetText.class,!0)),this.targetText.attr({x:v,y:b}).style({"text-anchor":g,display:this.showTargetLabel?"":"none","font-size":i.fromPoint(l.fontSize),fill:this.data.target.label.settings.labelColor}).text(m.format(c)),this.truncateTextIfNeeded(this.targetText,v,p),this.targetText.call(t.tooltipUtils.tooltipUpdate,[m.format(c)]),this.targetConnector||(this.targetConnector=this.mainGraphicsContext.append("line").classed(a.TargetConnector.class,!0)),u===f?this.targetConnector.style("display","none"):this.targetConnector.attr({x1:n.left+o/2-e*Math.cos(Math.PI*u),y1:d-e*Math.sin(Math.PI*u),x2:v,y2:b}).style({"stroke-width":this.settings.targetLine.thickness,stroke:this.settings.targetLine.color,display:""})},a.prototype.arcTween=function(e,t){e.attrTween("d",(function(e){var a=d3.interpolate(e.endAngle,t[0]);return function(i){return e.endAngle=a(i),t[1](e)}}))},a.calculatePosition=function(e,t,i,r){var o=a.DefaultStyleProperties,n={margin:{top:0,left:0,bottom:0,right:0},labelPosition:0};if(r&&r.smallGaugeMarginsOnSmallViewPort&&i.height<r.MinHeightGaugeSideNumbersVisible){var s=r.GaugeMarginsOnSmallViewPort;return n.margin={top:s,bottom:s,left:s,right:s},n}if(!e)return n;var l=2*o.labels.padding,c=e&&e.minLabel.settings.show;if(t){var u=e.target.ratio<=.5?e.target.ratio:1-e.target.ratio,d=u*Math.PI,p=e.target.label.requiredSpace.width+l,h=(i.width-p)/(Math.cos(d)+1),g=i.width-2*h;g>0&&(e.target.ratio<.5?n.margin.left=g:n.margin.right=g);var m=(i.height-e.target.label.requiredSpace.height-l)/Math.sin(d);g=i.height-m,g>0&&(n.margin.top=g)}if(c){var y=Math.max(n.margin.left,e.minLabel.requiredSpace.width+l),f=Math.max(n.margin.right,e.maxLabel.requiredSpace.width+l),v=e.minLabel.requiredSpace.height+l,b=(i.width-y-f)/2,C=i.height-n.margin.top-v;C>b?(n.labelPosition=2,n.margin.bottom=v):(n.labelPosition=1,n.margin={left:y,right:f,top:n.margin.top,bottom:o.labels.padding})}return n},a.prototype.showSideNumbersLabelText=function(){return!(this.gaugeSmallViewPortProperties&&this.gaugeSmallViewPortProperties.hideGaugeSideNumbersOnSmallViewPort&&this.currentViewport.height<this.gaugeSmallViewPortProperties.MinHeightGaugeSideNumbersVisible)},a})();o.MinDistanceFromBottom=10,o.MinWidthForTargetLabel=150,o.VisualClassName="gauge",o.DefaultStyleProperties={transition:{ease:"cubic-in-out"},arcColors:{background:"#e9e9e9",foreground:"#00B8AA"},targetLine:{show:!0,color:"#666666",thickness:2},labels:{count:2,padding:5,fontSize:t.NewDataLabelUtils.DefaultLabelFontSizeInPt},kpiBands:{show:!1,separationRadians:Math.PI/128,thickness:5}},o.DefaultDataPointSettings={fillColor:o.DefaultStyleProperties.arcColors.foreground,targetColor:o.DefaultStyleProperties.targetLine.color},o.InnerRadiusFactor=.7,o.KpiBandDistanceFromMainArc=2,o.MainGaugeGroupClassName="mainGroup",o.LabelText=a("labelText"),o.TargetConnector=a("targetConnector"),o.TargetText=a("targetText"),t.Gauge=o})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=jsCommon.Utility,a=(function(){function a(){this.scalingType=e.imageScalingType.normal}return a.prototype.init=function(e){this.element=e.element},a.prototype.enumerateObjectInstances=function(e){switch(e.objectName){case"imageScaling":return this.enumerateImageScaling()}return null},a.prototype.enumerateImageScaling=function(){return[{selector:null,objectName:"imageScaling",properties:{imageScalingType:this.scalingType}}]},a.prototype.update=function(a){var i=a.dataViews;if(i&&0!==i.length){var r=i[0].metadata.objects;if(r&&r.general){var o=this.imageBackgroundElement;o||(o=$("<div class='imageBackground' />"),this.imageBackgroundElement=o,this.imageBackgroundElement.appendTo(this.element));var n=a.viewport;o.css("height",n.height),r.imageScaling?this.scalingType=r.imageScaling.imageScalingType.toString():this.scalingType=e.imageScalingType.normal;var s=r.general.imageUrl;t.isLocalUrl(s)&&o.css("backgroundImage","url("+s+")"),this.scalingType===e.imageScalingType.fit?o.css("background-size","100% 100%"):this.scalingType===e.imageScalingType.fill?o.css("background-size","cover"):o.css("background-size","contain")}}},a})();e.ImageVisual=a})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function a(e,a,i){if(!a||0===a.length)return s.status.NOGOAL;var r,o;if(2===a.length){if(r=Math.max.apply(Math,a),o=Math.min.apply(Math,a),e>=o&&e<=r)return s.status.IN_BETWEEN}else r=a[0],o=a[0];switch(i){case t.kpiDirection.positive:if(e<o)return s.status.DROP;break;case t.kpiDirection.negative:if(e>r)return s.status.DROP}return s.status.INCREASE}function i(e,a,i){if(!a||1!==a.length||0===a[0])return"";var r,o="+",n=a[0];switch(r=Math.abs(e-n),i){case t.kpiDirection.positive:e<n&&(o="-");break;case t.kpiDirection.negative:e>n&&(o="-")}var s=Number((100*r/n).toFixed(2));return"("+o+s+"%)"}function r(e,t){switch(e){case s.status.NOGOAL:return t.textGrey;case s.status.INCREASE:return t.good;case s.status.IN_BETWEEN:return t.neutral;case s.status.DROP:return t.bad}}function o(e,t){switch(e){case s.status.NOGOAL:return t.graphGrey;case s.status.INCREASE:return t.good;case s.status.IN_BETWEEN:return t.neutral;case s.status.DROP:return t.bad}}var n=e.data.DataRoleHelper,s=(function(){function s(){}return s.prototype.init=function(e){s.getLocalizedString=e.host.getLocalizedString,this.rootElement=d3.select(e.element.get(0)).append("div").classed("kpiVisual",!0),this.svg=this.rootElement.append("svg");var t=this.mainGroupElement=this.svg.append("g");this.areaFill=t.append("path"),this.lastTrendAxisPointSummaryContainer=this.rootElement.append("div").classed("lastTrendAxisPointSummaryContainer",!0),this.indicatorContainer=this.lastTrendAxisPointSummaryContainer.append("div").classed("indicatorContainer",!0),this.indicatorText=this.indicatorContainer.append("div").classed("indicatorText",!0),this.indicatorIcon=this.indicatorContainer.append("div").classed("powervisuals-glyph",!0),this.goalText=this.lastTrendAxisPointSummaryContainer.append("div").classed("goalText",!0),this.host=e.host},s.prototype.update=function(e){if(e.dataViews&&e.dataViews[0]){var t=this.dataView=e.dataViews[0],a=e.viewport;if((!t.categorical||!t.categorical.values||t.categorical.values.length<1)&&(!t.categorical||!t.categorical.categories||t.categorical.categories.length<1))return this.svg.attr("visibility","hidden"),void this.lastTrendAxisPointSummaryContainer.attr("style","display:none");this.svg.attr("visibility","visible");var i=s.converter(t,a,s.getProp_KPIDirection(t));this.render(i,a)}},s.prototype.render=function(e,t){if(this.setShowDataMissingWarning(!(e.indicatorExists&&e.trendExists)),0===e.dataPoints.length||!e.indicatorExists||!e.trendExists)return this.areaFill.attr("visibility","hidden"),this.svg.attr("visibility","hidden"),void this.lastTrendAxisPointSummaryContainer.attr("style","display:none");this.svg.attr({height:t.height,width:t.width});var n=s.status.NOGOAL;e.targetExists&&e.indicatorExists&&e.trendExists&&(n=a(e.actual,e.goals,e.directionType));var l=e.formattedValue,c=s.indicatorTextSizeInPx;this.lastTrendAxisPointSummaryContainer.attr("style","width:"+t.width+"px;top:"+(t.height-c)/2+"px");var u=r(n,e.colors);this.indicatorText.style({color:u}).text(l),this.indicatorIcon.classed("checkmark",n===s.status.INCREASE),this.indicatorIcon.classed("circle-small",n===s.status.IN_BETWEEN),this.indicatorIcon.classed("exclamation",n===s.status.DROP),this.indicatorIcon.style({color:u});var d=e.showGoal?e.formattedGoalString+" ":"",p=e.showDistanceFromGoal?i(e.actual,e.goals,e.directionType):"";if(this.goalText.text(d+p),e.showTrendLine&&e.historyExists){var h=d3.svg.area().x((function(e){return e.x})).y0(t.height).y1((function(e){return e.y})),g=o(n,e.colors);this.areaFill.attr({d:h(e.dataPoints),stroke:"none",visibility:"visible","fill-opacity":.2}).style({color:g,fill:g})}else this.areaFill.attr("visibility","hidden")},s.prototype.setShowDataMissingWarning=function(e){this.host.setWarnings(e?[new t.VisualKPIDataMissingWarning]:[])},s.getDefaultFormatSettings=function(){return{labelSettings:t.dataLabelUtils.getDefaultLabelSettings(!0,t.Card.DefaultStyle.value.color),textSize:27,wordWrap:!1}},s.getFormatString=function(e){return t.valueFormatter.getFormatString(e,t.AnimatedText.formatStringProp)},s.getProp_Show_KPIGoal=function(t){return!t||!t.metadata||e.DataViewObjects.getValue(t.metadata.objects,s.showKPIGoal,!0)},s.getProp_Show_KPITrendLine=function(t){return!t||!t.metadata||e.DataViewObjects.getValue(t.metadata.objects,s.showKPITrendLine,!0)},s.getProp_Show_KPIDistance=function(t){return!t||!t.metadata||e.DataViewObjects.getValue(t.metadata.objects,s.showKPIDistance,!0)},s.getProp_KPIDirection=function(a){return a&&a.metadata?e.DataViewObjects.getValue(a.metadata.objects,s.directionTypeStringProp,t.kpiDirection.positive):t.kpiDirection.positive},s.getProp_GoodColor=function(t){return t&&t.metadata?e.DataViewObjects.getFillColor(t.metadata.objects,s.goodColorProp,s.kpiGreen):s.kpiGreen},s.getProp_NeutralColor=function(t){return t&&t.metadata?e.DataViewObjects.getFillColor(t.metadata.objects,s.neutralColorProp,s.kpiYellow):s.kpiYellow},s.getProp_BadColor=function(t){return t&&t.metadata?e.DataViewObjects.getFillColor(t.metadata.objects,s.badColorProp,s.kpiRed):s.kpiRed},s.getProp_Indicator_DisplayUnits=function(t){return s.initDefaultLabelSettings(),t&&t.metadata?e.DataViewObjects.getValue(t.metadata.objects,s.indicatorDisplayUnitsProp,s.defaultLabelSettings.displayUnits):s.defaultLabelSettings.displayUnits},s.getProp_Indicator_Precision=function(t){return s.initDefaultLabelSettings(),t&&t.metadata?e.DataViewObjects.getValue(t.metadata.objects,s.indicatorPrecisionProp,s.defaultLabelSettings.precision):s.defaultLabelSettings.precision},s.initDefaultLabelSettings=function(){s.defaultCardFormatSetting||(s.defaultCardFormatSetting=s.getDefaultFormatSettings(),s.defaultLabelSettings=s.defaultCardFormatSetting.labelSettings)},s.getFormattedValue=function(a,i,r,o,n){void 0===n&&(n=e.DisplayUnitSystemType.WholeUnits);var l=0===o,c=t.valueFormatter.create({format:s.getFormatString(a),value:o,precision:r,displayUnitSystemType:n,formatSingleValues:!!l,allowFormatBeautification:!0,columnType:a?a.type:void 0});return c.format(i)},s.getFormattedGoalString=function(e,t,a,i){if(!t||0===t.length)return"";var r=s.getLocalizedString("Visual_KPI_Goal_Title")+": "+s.getFormattedValue(e,t[0],a,i);return 2===t.length&&(r+=", "+s.getFormattedValue(e,t[1],a,i)),r},s.converter=function(a,i,r){var o=[],l=a.categorical,c=null,u=null,d="",p="",h=!1,g=!1,m=!1,y=!0;a.categorical.categories||(y=!1);for(var f=l.values,v=a.metadata.columns,b=0,C=v;b<C.length;b++){var S=C[b];n.hasRole(S,"Indicator")&&(g=!0,c=S),n.hasRole(S,"TrendLine")&&(m=!0),n.hasRole(S,"Goal")&&(h=!0,u=S)}if(!(g&&m&&f&&0!==f.length&&f[0].values&&a.categorical.values))return{dataPoints:o,directionType:r,actual:0,goals:[],formattedGoalString:d,targetExists:h,historyExists:y,indicatorExists:g,trendExists:m,formattedValue:p,showGoal:!1,showDistanceFromGoal:!1,showTrendLine:!1,colors:{good:s.kpiGreen,neutral:s.kpiYellow,bad:s.kpiRed,graphGrey:s.kpiGraphGrey,textGrey:s.kpiTextGrey}};var x,w;y&&(x=l.categories[0],w=x.values);for(var P,D=[],T=[],V=s.getColumnsByRole(f,"Indicator"),L=s.getColumnsByRole(f,"Goal"),_=0,N=f[0].values.length;_<N;_++){P=V[0].values[_];for(var M=[],A=0;A<L.length;A++)M.push(L[A].values[_]);T.push(M),D.push(P)}for(var R=Math.max.apply(Math,D),F=Math.min.apply(Math,D),O=i.height*s.trendAreaFilePercentage,I=s.getProp_Indicator_Precision(a),H=s.getProp_Indicator_DisplayUnits(a),_=0;_<D.length;_++){var j=O*(D[_]-F)/(R-F),z=null;y&&(z=t.SelectionId.createWithId(x.identity[_]).getSelector()),o.push({x:_*i.width/(D.length-1),y:i.height-j,actual:D[_],goals:T[_]})}var k,G;o.length>0&&(k=o[o.length-1].actual,G=o[o.length-1].goals),1===o.length&&(y=!1),p=s.getFormattedValue(c,k,I,H,e.DisplayUnitSystemType.DataLabels),d=s.getFormattedGoalString(u,G,I,H);var E=s.getProp_Show_KPIGoal(a),W=s.getProp_Show_KPIDistance(a),B=s.getProp_Show_KPITrendLine(a),U={good:s.getProp_GoodColor(a),neutral:s.getProp_NeutralColor(a),bad:s.getProp_BadColor(a),graphGrey:s.kpiGraphGrey,textGrey:s.kpiTextGrey};return{dataPoints:o,directionType:r,actual:k,goals:G,formattedGoalString:d,targetExists:h,historyExists:y,indicatorExists:g,trendExists:m,formattedValue:p,showGoal:E,showDistanceFromGoal:W,showTrendLine:B,colors:U}},s.getColumnsByRole=function(e,t){for(var a=[],i=0;i<e.length;i++)n.hasRole(e[i].source,t)&&a.push(e[i]);return a},s.prototype.enumerateObjectInstances=function(e){var t=[],a=this.dataView;switch(e.objectName){case"indicator":t.push({selector:null,objectName:"indicator",properties:{indicatorDisplayUnits:s.getProp_Indicator_DisplayUnits(a),indicatorPrecision:s.getProp_Indicator_Precision(a)}});case"trendline":t.push({selector:null,objectName:"trendline",properties:{show:s.getProp_Show_KPITrendLine(a)}});case"goals":t.push({selector:null,objectName:"goals",properties:{showGoal:s.getProp_Show_KPIGoal(a),showDistance:s.getProp_Show_KPIDistance(a)}});case"status":t.push({selector:null,objectName:"status",properties:{direction:s.getProp_KPIDirection(a),goodColor:s.getProp_GoodColor(a),neutralColor:s.getProp_NeutralColor(a),badColor:s.getProp_BadColor(a)}})}return t},s.prototype.destroy=function(){this.svg=null},s})();s.directionTypeStringProp={objectName:"status",propertyName:"direction"},s.goodColorProp={objectName:"status",propertyName:"goodColor"},s.neutralColorProp={objectName:"status",propertyName:"neutralColor"},s.badColorProp={objectName:"status",propertyName:"badColor"},s.showKPIGoal={objectName:"goals",propertyName:"showGoal"},s.showKPIDistance={objectName:"goals",propertyName:"showDistance"},s.showKPITrendLine={objectName:"trendline",propertyName:"show"},s.indicatorDisplayUnitsProp={objectName:"indicator",propertyName:"indicatorDisplayUnits"},s.indicatorPrecisionProp={objectName:"indicator",propertyName:"indicatorPrecision"},s.status={INCREASE:"increase",DROP:"drop",IN_BETWEEN:"in-between",NOGOAL:"no-goal"},s.statusBandingType={Below:"BELOW",Above:"ABOVE"},s.actualTextConsts={VERTICAL_OFFSET_FROM_HALF_HEIGHT:20,FONT_WIDTH_FACTOR:14,RIGHT_MARGIN:10},s.kpiRed="#E81123",s.kpiGreen="#3bb44a",s.kpiYellow="#F2C811",s.kpiTextGrey="#212121",s.kpiGraphGrey="#5F6B6D",s.trendAreaFilePercentage=1,s.estimatedIconHeightInPx=9,s.indicatorTextSizeInPx=60,t.KPIStatusWithHistory=s})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function a(e){e.append("div").classed("imgCon",!0).append("img")}function i(e,t){e.selectAll(".imgCon").style({height:r(t.maxHeight)}).selectAll("img").style({"max-height":r(t.maxHeight),"max-width":r(t.maxWidth)})}function r(e){return e+"px"}var o=e.visuals.KpiUtil.getKpiImageMetadata,n=jsCommon.CssConstants.createClassAndSelector,s=jsCommon.PixelConverter,l=jsCommon.UrlUtils,c=e.visuals.controls.internal.TablixUtils.EdgeSettings,u=t.Font.Family.semibold.css,d=t.Font.Family.regular.css,p=10,h=13,g=9,m="#767676",y="#333333",f="#ACACAC",v=t.outline.none,b="#E8E8E8",C=1,S=!0,x="#A6A6A6",w=t.outline.leftOnly,P=3,D=(function(){function n(){this.isInteractivityOverflowHidden=!1}return n.prototype.init=function(e){
this.options=e,this.style=e.style;var t=this.currentViewport=e.viewport,a=this.interactivity=e.interactivity;a&&"hidden"===a.overflow&&(this.isInteractivityOverflowHidden=!0);var i=this.element=$("<div/>").addClass(n.MultiRowCardRoot.class).css({height:r(t.height)});e.element.append(i),this.initializeCardRowSelection()},n.prototype.onDataChanged=function(a){var i=a.dataViews;if(i&&i.length>0){var r=this.dataView=i[0],o=r.table.columns,s=r.table.rows,l=a.operationKind!==e.VisualDataChangeOperationKind.Append,c=this.data=n.converter(r,o.length,s.length,this.isInteractivityOverflowHidden);this.setCardDimensions(),this.listView.data(c.dataModel,(function(e){return c.dataModel.indexOf(e)}),l)}else this.data={dataModel:[],dataColumnCount:0,cardTitleSettings:t.dataLabelUtils.getDefaultLabelSettings(!0,m,h),categoryLabelsSettings:t.dataLabelUtils.getDefaultLabelSettings(!0,f,g),dataLabelsSettings:t.dataLabelUtils.getDefaultLabelSettings(!0,y,p),cardSettings:n.getCardSettings(null)};this.waitingForData=!1},n.getCardSettings=function(a){var i=a&&a.metadata&&a.metadata.objects?a.metadata.objects:null,r={outline:e.DataViewObjects.getValue(i,t.multiRowCardProps.card.outline,v),color:e.DataViewObjects.getFillColor(i,t.multiRowCardProps.card.outlineColor,b),weight:e.DataViewObjects.getValue(i,t.multiRowCardProps.card.outlineWeight,C)},o=e.DataViewObjects.getValue(i,t.multiRowCardProps.card.barShow,S),s={outline:o?w:t.outline.none,color:e.DataViewObjects.getFillColor(i,t.multiRowCardProps.card.barColor,x),weight:e.DataViewObjects.getValue(i,t.multiRowCardProps.card.barWeight,P)},l=e.DataViewObjects.getValue(i,t.multiRowCardProps.card.cardPadding,n.DefaultStyle.row.marginBottom),c=e.DataViewObjects.getFillColor(i,t.multiRowCardProps.card.cardBackground,n.DefaultStyle.row.background);return{outlineSettings:r,barSettings:s,cardPadding:l,cardBackground:c}},n.prototype.onResizing=function(e){var t=this.currentViewport.height===e.height;if(this.currentViewport=e,this.element.css("height",r(e.height)),this.dataView){var a=this.maxColPerRow;this.maxColPerRow=this.getMaxColPerRow();var i=a===this.maxColPerRow;t&&i||this.listView.viewport(e)}},n.converter=function(a,i,r,s){void 0===s&&(s=!1);var c,u,d,v=[],b=a.table.rows,C=a.table.columns;if(c=t.dataLabelUtils.getDefaultLabelSettings(!0,m,h),u=t.dataLabelUtils.getDefaultLabelSettings(!0,y,p),d=t.dataLabelUtils.getDefaultLabelSettings(!0,f,g),a.metadata&&a.metadata.objects){var S=e.DataViewObjects.getObject(a.metadata.objects,"cardTitle");t.dataLabelUtils.updateLabelSettingsFromLabelsObject(S,c);var x=e.DataViewObjects.getObject(a.metadata.objects,"dataLabels");t.dataLabelUtils.updateLabelSettingsFromLabelsObject(x,u);var w=e.DataViewObjects.getObject(a.metadata.objects,"categoryLabels");t.dataLabelUtils.updateLabelSettingsFromLabelsObject(w,d)}for(var P=0,D=r;P<D;P++){for(var T=b[P],V=null,L=!0,_=void 0,N=!1,M=!1,A=!1,R=[],F=0;F<i;F++){var O=C[F],I=o(O,T[F]),H=void 0,j=void 0;I&&(H=I.class,j=I.statusGraphic),H||(H=t.valueFormatter.format(T[F],t.valueFormatter.getFormatString(O,n.formatStringProp)));var z=void 0!==I&&void 0!==I.caption,k=C[F].displayName;!L||s||O.type.numeric||(null==V?(V=F,_=H,N=t.converterHelper.isWebUrlColumn(O)&&l.isValidHttpUrl(_),M=t.converterHelper.isImageUrlColumn(O)&&l.isValidImageUrl(H),A=z):null!=V&&(L=!1,V=null)),R.push({caption:H,details:k,showURL:t.converterHelper.isWebUrlColumn(O)&&l.isValidHttpUrl(H),showImage:t.converterHelper.isImageUrlColumn(O)&&l.isValidImageUrl(H),showKPI:z,columnIndex:F})}if(null!=V){for(var G=R.slice(0,V),E=R.slice(V+1),W=0,B=E;W<B.length;W++){var U=B[W];U.columnIndex--}R=G.concat(E)}v.push({title:null!=V?_:void 0,showTitleAsURL:N,showTitleAsImage:M,showTitleAsKPI:A,cardItemsData:R})}return{dataModel:v,dataColumnCount:v[0]?v[0].cardItemsData.length:0,cardTitleSettings:c,categoryLabelsSettings:d,dataLabelsSettings:u,cardSettings:n.getCardSettings(a)}},n.getSortableRoles=function(e){if(e&&e.dataViewMappings&&!_.isEmpty(e.dataViewMappings))for(var t=0,a=e.dataViewMappings;t<a.length;t++){var i=a[t];if(i.table){var r=i.table.rows;if(r&&r.for&&r.for.in&&r.for.in.items)return[n.ValuesRole]}}},n.prototype.initializeCardRowSelection=function(){var o=this,l=this.isInteractivityOverflowHidden,c=function(e){var t=e.append("div").classed(n.Card.class,!0);l?t.classed("mrtile",!0):o.cardHasTitle&&t.append("div").classed(n.Title.class,!0).each((function(e){e.showTitleAsImage?a(d3.select(this)):e.showTitleAsURL?d3.select(this).append("a"):e.showTitleAsKPI&&d3.select(this).append("div").classed(n.KPITitle.class,!0).classed(e.title,!0).style({display:"inline-block",verticalAlign:"sub"})}));var i=t.selectAll(n.CardItemContainer.selector).data((function(e){return e.cardItemsData})).enter().append("div").classed(n.CardItemContainer.class,!0);i.append("div").classed(n.Caption.class,!0).each((function(e){e.showURL?d3.select(this).append("a"):e.showImage?a(d3.select(this)):e.showKPI&&d3.select(this).append("div").classed(e.caption,!0).style({display:"inline-block",verticalAlign:"sub"})})),i.append("div").classed(n.Details.class,!0)},u=function(t){var a=o.getStyle(),c=e.TextMeasurementService.estimateSvgTextHeight(n.getTextProperties(!1,a.caption.fontSize)),u=e.TextMeasurementService.estimateSvgTextHeight(n.getTextProperties(!1,a.details.fontSize)),d=e.TextMeasurementService.estimateSvgTextHeight(n.getTextProperties(!0,a.title.fontSize)),p=o.getBorderStyles(a.row.border,a.row.padding);t.style(p).style({"margin-bottom":l?"0px":o.isSingleRowCard?"0px":r(a.row.marginBottom),background:a.row.background}),!l&&o.cardHasTitle&&(t.selectAll(n.Title.selector).filter((function(e){return!e.showTitleAsImage&&!e.showTitleAsKPI})).style({"font-size":s.fromPoint(a.title.fontSize),"line-height":s.toString(d),color:a.title.color}),t.selectAll(n.Title.selector).filter((function(e){return!e.showTitleAsURL&&!e.showTitleAsImage&&!e.showTitleAsKPI})).text((function(e){return e.title})).attr("title",(function(e){return e.title})),t.selectAll(n.TitleUrlSelector).text((function(e){return e.title})).attr({href:function(e){return e.title},target:"_blank",rel:"noopener noreferrer"}),t.selectAll(n.TitleImageSelector).attr("src",(function(e){return e.title})),i(t.selectAll(n.Title.selector),a.imageTitle),t.selectAll(n.KPITitle.selector).each((function(e){var t=d3.select(this);t.classed(e.title)})));var h=t.selectAll(n.Card.selector),g=o.getBorderStyles(a.card.border,a.card.padding);h.style(g),h.selectAll(n.Caption.selector).filter((function(e){return!e.showImage})).style({"line-height":s.toString(c),"font-size":s.fromPoint(a.caption.fontSize)}).filter((function(e){return!e.showKPI})).style({color:a.caption.color}).filter((function(e){return!e.showURL})).text((function(e){return e.caption})).attr("title",(function(e){return e.caption})),h.selectAll(n.CaptionImageSelector).attr("src",(function(e){return e.caption})).style(a.imageCaption);var m=r(a.cardItemContainer.padding.top);h.selectAll(n.CardItemContainer.selector).style({"padding-top":function(e){return o.isInFirstRow(e.columnIndex)?"":m},"padding-right":function(e){return o.isLastRowItem(e.columnIndex,o.dataView.metadata.columns.length)?"0px":r(a.cardItemContainer.paddingRight)},width:function(e){return o.getColumnWidth(e.columnIndex,o.data.dataColumnCount)}}),i(h.selectAll(n.Caption.selector),a.imageCaption),h.selectAll(n.CaptionUrlSelector).attr({href:function(e){return e.caption},target:"_blank",rel:"noopener noreferrer"}).text((function(e){return e.caption})),a.details.isVisible&&h.selectAll(n.Details.selector).text((function(e){return e.details})).style({"font-size":s.fromPoint(a.details.fontSize),"line-height":s.toString(u),color:a.details.color}).attr("title",(function(e){return e.details}))},d=function(e){e.remove()},p={rowHeight:void 0,enter:c,exit:d,update:u,loadMoreData:function(){return o.onLoadMoreData()},viewport:this.currentViewport,baseContainer:d3.select(this.element.get(0)),scrollEnabled:!this.isInteractivityOverflowHidden,isReadMode:function(){return 1!==o.options.host.getViewMode()}};this.listView=t.ListViewFactory.createListView(p)},n.prototype.getBorderStyles=function(e,t){var a={top:null!=e&&null!=e.top,right:null!=e&&null!=e.right,bottom:null!=e&&null!=e.bottom,left:null!=e&&null!=e.left},i={top:null!=t&&null!=t.top,right:null!=t&&null!=t.right,bottom:null!=t&&null!=t.bottom,left:null!=t&&null!=t.left};return{"border-top":a.top?e.top.getCSS():"","border-right":a.right?e.right.getCSS():"","border-bottom":a.bottom?e.bottom.getCSS():"","border-left":a.left?e.left.getCSS():"","padding-top":a.top&&i.top?r(t.top):"","padding-right":a.right&&i.right?r(t.right):"","padding-bottom":a.bottom&&i.bottom?r(t.bottom):"","padding-left":a.left&&i.left?r(t.left):""}},n.prototype.getMaxColPerRow=function(){var e=this.currentViewport.width,t=this.getStyle().cardItemContainer.minWidth,a=this.data.dataColumnCount,i=Math.floor(e/t)||1;return Math.min(a,i)},n.prototype.getRowIndex=function(e){return Math.floor(1*e/this.getMaxColPerRow())},n.prototype.getStyle=function(){var e=n.DefaultStyle,t=this.getCustomStyles();if(!this.isInteractivityOverflowHidden)return $.extend(!0,{},e,t);for(var a=this.currentViewport.width,i={},r=0,o=n.tileMediaQueries;r<o.length;r++){var s=o[r];if(a<=s.maxWidth){i=s.style;break}}return $.extend(!0,{},e,t,i)},n.prototype.getSurroundSettings=function(e){var a=new c(e.weight,e.color),i=e.outline;return{top:t.outline.showTop(i)?a:null,right:t.outline.showRight(i)?a:null,bottom:t.outline.showBottom(i)?a:null,left:t.outline.showLeft(i)?a:null}},n.prototype.getCustomStyles=function(){var e=this.data.dataLabelsSettings,t=this.data.categoryLabelsSettings,a=this.data.cardTitleSettings,i=this.data.cardSettings,r={row:{border:this.getSurroundSettings(i.outlineSettings),marginBottom:i.cardPadding,background:i.cardBackground},card:{border:this.getSurroundSettings(i.barSettings)},details:{fontSize:t.fontSize,color:t.labelColor,isVisible:t.show},caption:{fontSize:e.fontSize,color:e.labelColor},title:{fontSize:a.fontSize,color:a.labelColor}};return r},n.getTextProperties=function(e,t){return{fontFamily:e?u:d,fontSize:s.fromPoint(t)}},n.prototype.getColumnWidth=function(e,t){var a=this.getMaxColPerRow();if(a>=t)return 100/t+"%";var i=this.getRowIndex(e),r=Math.ceil(1*t/a),o=t%a;return i<r||0===o?100/a+"%":100/o+"%"},n.prototype.isLastRowItem=function(e,t){if(e+1===t)return!0;var a=this.getMaxColPerRow();return a-e%a===1},n.prototype.isInFirstRow=function(e){return e<this.getMaxColPerRow()},n.prototype.setCardDimensions=function(){this.cardHasTitle=!1;var e=this.data.dataModel;!this.isInteractivityOverflowHidden&&e&&e.length>0&&(this.cardHasTitle=void 0!==e[0].title,this.isSingleRowCard=1===e.length)},n.prototype.onLoadMoreData=function(){!this.waitingForData&&this.dataView.metadata&&this.dataView.metadata.segment&&(this.options.host.loadMoreData(),this.waitingForData=!0)},n.getDataLabelSettingsOptions=function(e,t,a){return void 0===a&&(a=!1),{enumeration:e,dataLabelsSettings:t,show:a,fontSize:!0}},n.prototype.enumerateObjectInstances=function(e){var a=new t.ObjectEnumerationBuilder,i=this.data.cardTitleSettings,r=this.data.dataLabelsSettings,o=this.data.categoryLabelsSettings;switch(e.objectName){case"cardTitle":!this.isInteractivityOverflowHidden&&this.cardHasTitle&&t.dataLabelUtils.enumerateDataLabels(n.getDataLabelSettingsOptions(a,i));break;case"dataLabels":t.dataLabelUtils.enumerateDataLabels(n.getDataLabelSettingsOptions(a,r));break;case"categoryLabels":t.dataLabelUtils.enumerateDataLabels(n.getDataLabelSettingsOptions(a,o,!0));break;case t.multiRowCardProps.card.outline.objectName:this.enumerateCard(a)}return a.complete()},n.prototype.enumerateCard=function(e){var a=this.data.cardSettings,i=t.multiRowCardProps.card,r={},o=a.outlineSettings;r[i.outline.propertyName]=o.outline,o.outline!==t.outline.none&&(r[i.outlineColor.propertyName]=o.color,r[i.outlineWeight.propertyName]=o.weight);var n=a.barSettings,s=n.outline!==t.outline.none;r[i.barShow.propertyName]=s,s&&(r[i.barColor.propertyName]=n.color,r[i.barWeight.propertyName]=n.weight),r[i.cardPadding.propertyName]=a.cardPadding,r[i.cardBackground.propertyName]=a.cardBackground,e.pushInstance({selector:null,objectName:i.outline.objectName,properties:r})},n})();D.formatStringProp={objectName:"general",propertyName:"formatString"},D.MultiRowCardRoot=n("multiRowCard"),D.Card=n("card"),D.Title=n("title"),D.CardItemContainer=n("cardItemContainer"),D.Caption=n("caption"),D.Details=n("details"),D.TitleUrlSelector=D.Title.selector+" a",D.CaptionUrlSelector=D.Caption.selector+" a",D.TitleImageSelector=D.Title.selector+" img",D.CaptionImageSelector=D.Caption.selector+" img",D.KPITitle=n("kpiTitle"),D.ValuesRole="Values",D.DefaultStyle={row:{border:null,marginBottom:20,background:void 0,padding:{top:5,right:5,bottom:5,left:5}},card:{border:null,padding:{top:10,right:10,bottom:10,left:10}},cardItemContainer:{paddingRight:20,minWidth:120,padding:{top:7}},imageCaption:{maxHeight:75,maxWidth:100},imageTitle:{maxHeight:75,maxWidth:100}},D.tileMediaQueries=[{maxWidth:250,style:{cardItemContainer:{minWidth:110},imageCaption:{maxHeight:45}}},{maxWidth:490,style:{cardItemContainer:{minWidth:130},imageCaption:{maxHeight:52}}},{maxWidth:750,style:{cardItemContainer:{minWidth:120},imageCaption:{maxHeight:53}}},{maxWidth:Number.MAX_VALUE,style:{cardItemContainer:{padding:{top:5}}}}],t.MultiRowCard=D})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=jsCommon.CssConstants.createClassAndSelector,a=jsCommon.KeyUtils,i=jsCommon.StringExtensions,r=jsCommon.UrlUtils.UrlScheme,o=jsCommon.UrlUtils,n=(function(){function e(e){e&&(e.viewModelAdapter&&(this.viewModelAdapter=e.viewModelAdapter),this.disableScrollingInViewMode=e.disableScrollingInViewMode,this.textboxFontColorEnabled=e.textboxFontColorEnabled)}return e.prototype.init=function(e){this.element=e.element,this.host=e.host,this.viewport=e.viewport,this.readOnly=0===this.host.getViewMode(),this.paragraphs=[],this.refreshView()},e.prototype.onResizing=function(e){var t=this.viewport;this.viewport=e,this.updateSize(),this.viewModelAdapter&&this.viewModelAdapter.onResizing(this.element,this.viewport,t)},e.prototype.onDataChanged=function(e){var t=e.dataViews;if(this.paragraphs=[],t&&t.length>0){var a=t[0].metadata.objects;a&&a.general&&(this.paragraphs=a.general.paragraphs)}this.refreshView()},e.prototype.destroy=function(){},e.prototype.focus=function(){if(this.editor)return this.editor.focus(),!0},e.prototype.onViewModeChanged=function(e){this.readOnly=0===e,this.refreshView()},e.prototype.setSelection=function(e,t){this.editor&&this.editor.setSelection(e,t)},e.prototype.refreshView=function(){var t=this;if(this.readOnly){this.editor&&(this.saveContents(),this.editor.destroy(),this.editor=null),this.element.empty();var a=l.convertParagraphsToHtml(this.paragraphs),i=$("<div>").addClass(e.ClassAndSelector.class).css({"font-family":c.defaultFont,"font-size":c.defaultFontSize}).append(a);this.viewModelAdapter&&this.viewModelAdapter.onDataChanged(i,this.viewport),this.disableScrollingInViewMode?this.element.append(i):(this.$scrollableDiv=$("<div/>").addClass(e.ScrollWrapperClassAndSelector.class).css({height:this.viewport.height+"px","overflow-y":"auto"}).append(i),this.element.append(this.$scrollableDiv))}else{if(!this.editor){this.editor=new c.QuillWrapper(this.readOnly,this.host,this.textboxFontColorEnabled),this.editor.textChanged=function(){return t.saveContents()},this.element.empty();var r=this.editor.getElement();r.addClass(e.ClassAndSelector.class),r.css({"font-family":c.defaultFont,"font-size":c.defaultFontSize}),this.element.append(r)}this.editor.setContents(l.convertParagraphsToOps(this.paragraphs))}this.updateSize()},e.prototype.saveContents=function(){if(this.editor){var e=this.editor.getContents();this.paragraphs=l.convertDeltaToParagraphs(e);var t=[{objectName:"general",properties:{paragraphs:this.paragraphs},selector:null}];this.host.persistProperties(t)}},e.prototype.updateSize=function(){this.editor?this.editor.resize(this.viewport):this.$scrollableDiv&&this.$scrollableDiv.css("height",this.viewport.height+"px")},e})();n.ClassAndSelector=jsCommon.CssConstants.createClassAndSelector("textbox"),n.ScrollWrapperClassAndSelector=jsCommon.CssConstants.createClassAndSelector("scrollWrapper"),e.Textbox=n;var s;!(function(e){var t="http://",a=(function(){function e(e){this.smallViewportProperties=e}return e.prototype.onResizing=function(e,t,a){var i=this.isSmallViewport(a),r=this.isSmallViewport(t);i!==r&&this.applyScaleOnElement(e,r)},e.prototype.onDataChanged=function(e,t){this.isSmallViewport(t)&&this.applyScaleOnElement(e,!0)},e.prototype.isSmallViewport=function(e){return!!e&&!!this.smallViewportProperties&&(e.height<=this.smallViewportProperties.minHeightToScaleFontSize||e.width<=this.smallViewportProperties.minWidthToScaleFontSize)},e.prototype.applyScaleOnElement=function(t,a){t.find(n.ClassAndSelector.selector).css({"font-size":a?e.scale(c.defaultFontSize):c.defaultFontSize}),t.find(l.TextRunElement.selector).each((function(t,i){var r,o=$(i).css("font-size")||c.defaultFontSize;if(a)r=e.scale(o);else{var n=$(i).data(l.ModelKeyName);r=n.textStyle&&n.textStyle.fontSize?n.textStyle.fontSize:c.defaultFontSize}$(i).css({"font-size":c.getCssFontSize(r)})}))},e.scale=function(e){var t,a=parseInt(e.slice(0,-2),10);return t=a>66?32:a>42?28:a>26?24:a>16?20:a>11?14:12,jsCommon.PixelConverter.toString(t)},e})();e.ViewModelAdapter=a;var i=(function(e){function t(){return e.call(this,{minHeightToScaleFontSize:1/0,minWidthToScaleFontSize:1/0})||this}return __extends(t,e),t})(a);e.AlwaysUseSmallViewport=i;var r=(function(){function e(){}return e.format=function(e){return/^\S+@\S+\.\S+$/.test(e)?"mailto:"+e:/^https?:\/\//i.test(e)?e:t+e},e})();e.LinkPreview=r})(s=e.TextboxHelpers||(e.TextboxHelpers={}));var l;!(function(t){function a(e){for(var t=[],a={textRuns:[]},i=0,r=e.ops.length;i<r;i++){var o=e.ops[i];if("string"==typeof o.insert){var n=o.insert,s=o.attributes;s&&s.align&&(a.horizontalTextAlignment=s.align);var c=0,d=0,p=void 0;do{if(d=n.indexOf("\n",c),d<0?(p=!1,d=n.length):p=!0,d-c>0){var h=n.substring(c,d),g={value:h};if(s){void 0!==s.link&&l(s.link)&&(g.url=s.link);var m=u(s);m&&(g.textStyle=m)}a.textRuns.push(g)}p&&(0===a.textRuns.length&&a.textRuns.push({value:""}),t.push(a),a={textRuns:[]}),c=d+1}while(c<n.length)}}return a.textRuns.length>0&&a.textRuns[0].value.length>0&&t.push(a),t}function n(e){for(var a=$(),i=0,r=e.length;i<r;++i){var o=e[i],n=!0,s=$("<p>").data(t.ModelKeyName,o);o.horizontalTextAlignment&&s.css("text-align",o.horizontalTextAlignment);for(var u=0,d=o.textRuns.length;u<d;++u){var p=o.textRuns[u],h=$(t.TextRunElement.name).data(t.ModelKeyName,p),g=p.textStyle;if(g){var m={};g.fontFamily&&(m["font-family"]=c.getCssFontFamily(g.fontFamily)),g.fontSize&&(m["font-size"]=c.getCssFontSize(g.fontSize)),g.fontStyle&&(m["font-style"]=g.fontStyle),g.fontWeight&&(m["font-weight"]=g.fontWeight),g.color&&(m.color=g.color),g.textDecoration&&(m["text-decoration"]=g.textDecoration),h.css(m)}var y=p.value;if(_.isEmpty(y)||(n=!1),void 0!==p.url){var f=void 0;f=l(p.url)?$("<a>").attr("href",p.url).attr("rel","noopener noreferrer").attr("target","_blank").text(y):$("<span>").text(y),h.append(f)}else h.text(y);s.append(h)}n&&s.append($("<br>")),a=a.add(s)}return a}function s(t){for(var a=[],i=0,r=t.length;i<r;++i)for(var o=t[i],n=0,s=o.textRuns.length;n<s;++n){var u=o.textRuns[n],p={};o.horizontalTextAlignment&&(p.align=o.horizontalTextAlignment);var h=u.textStyle;h&&(h.fontFamily&&(p.font=e.Font.normalizeFamily(c.getCssFontFamily(d(h.fontFamily)))),h.fontSize&&(p.size=h.fontSize),h.color&&(p.color=h.color),p.italic="italic"===h.fontStyle||void 0,p.bold="bold"===h.fontWeight||void 0,p.underline="underline"===h.textDecoration||void 0);var g=u.value;u.url&&l(u.url)&&(p.link=u.url);var m={insert:g,attributes:p};a.push(m),n!==s-1||_.endsWith(g,"\n")||a.push({insert:"\n",attributes:p})}return a}function l(e){if(_.isEmpty(e))return!1;switch(o.getUrlScheme(e)){case r.http:case r.https:case r.mailto:return!0;default:return!1}}function u(t){var a={};if(t.bold&&(a.fontWeight="bold"),t.font){var i=e.Font.normalizeFamily(_.unescape(t.font),!1);i=c.getFontFamilyForBuiltInFont(i),a.fontFamily=i}return t.italic&&(a.fontStyle="italic"),t.size&&(a.fontSize=t.size),t.underline&&(a.textDecoration="underline"),t.color&&(a.color=t.color),a}function d(e){return!_.startsWith(e,"'")||i.containsIgnoreCase(e,",")?e:e.slice(1,e.length-1)}t.ModelKeyName="ModelObject",t.TextRunElement={name:"<span>",selector:"span"},t.convertDeltaToParagraphs=a,t.convertParagraphsToHtml=n,t.convertParagraphsToOps=s,t.isValidLinkUrl=l})(l=e.RichTextConversion||(e.RichTextConversion={}));var c;!(function(r){function o(e){var t=c[e]||e;return t!==r.defaultFont?t:void 0}function n(e){var t=_.findKey(c,(function(t){return t===e||t.indexOf(e)>0}));return t||e}function l(e){return e!==r.defaultFontSize?e:""}var c={"Segoe (Bold)":e.Font.Family.bold.family,"Segoe UI":e.Font.Family.regular.family,"Segoe UI Light":e.Font.Family.light.family,Heading:e.Font.Family.light.family,Body:e.Font.Family.regular.family},u=["Arial","Arial Black","Arial Unicode MS","Calibri","Cambria","Cambria Math","Candara","Comic Sans MS","Consolas","Constantia","Corbel","Courier New","Georgia","Lucida Sans Unicode","Segoe (Bold)","Segoe UI","Segoe UI Light","Symbol","Tahoma","Times New Roman","Trebuchet MS","Verdana","Wingdings"].map((function(e){return{label:e,value:c[e]||e}}));r.defaultFont=o("Segoe UI Light");var d=[8,9,10,10.5,11,12,14,16,18,20,24,28,32,36,40,42,44,54,60,66,72,80,88,96].map((function(e){return{label:""+e,value:e+"px"}}));r.defaultFontSize="14px";var p="Left",h=["Left","Center","Right"].map((function(e){var t=e.toLowerCase();return{label:e,value:e===p?"":t,glyph:"align"+t}}));r.defaultFontColor="#333333",r.getCssFontFamily=o,r.getFontFamilyForBuiltInFont=n,r.getCssFontSize=l;var g=(function(){function t(e,a,i){var r=this;this.readOnly=e,this.host=a,this.textboxFontColorEnabled=i,this.textChanged=_.noop,this.$container=$("<div>"),this.localizationProvider={get:function(e){return r.host.getLocalizedString(e)},getOptional:function(e){return r.host.getLocalizedString(e)}},t.loadQuillResources?(this.initialized=!1,this.dependenciesLoaded=this.host.loader().require({javascript:"quill",css:["quill.base"]}).then((function(e){return r.initializeQuill(e)}))):(this.initializeQuill(window.Quill),this.dependenciesLoaded=this.host.promiseFactory().resolve())}return t.prototype.initializeQuill=function(e){this.quillStatic=e,this.rebuildQuillEditor(),this.initialized=!0,this.quillStatic.debug("error")},t.prototype.getElement=function(){return this.$container},t.prototype.getContents=function(){if(this.initialized)return this.editor.getContents()},t.prototype.setContents=function(e){var t=this;return this.initialized?void this.editor.setContents(e):void this.dependenciesLoaded.then((function(){return t.setContents(e)}))},t.prototype.resize=function(e){this.$container.width(e.width),this.$container.height(e.height)},t.prototype.setReadOnly=function(e){var t=e!==this.readOnly;this.readOnly=e,this.initialized&&t&&this.rebuildQuillEditor()},t.prototype.setSelection=function(e,t){this.editor&&this.editor.setSelection(e,t)},t.prototype.getSelection=function(e){if(this.editor)return this.editor.getSelection(e)},t.prototype.focus=function(){this.editor&&0===$(document.activeElement).closest(this.$container).length&&this.editor.focus()},t.prototype.destroy=function(){this.host.setToolbar(null),this.$container.remove(),this.$container=null,this.$toolbarDiv=null,this.$editorDiv=null,this.editor=null},t.prototype.getSelectionAtCursor=function(){var e=this.getTextWithoutTrailingBreak(),t=this.getSelection(!0);if(t&&0===t.length){var a=jsCommon.WordBreaker.find(t.index,e);return{index:a.start,length:a.end-a.start}}return t},t.prototype.getWord=function(){var e=this.getSelectionAtCursor();return this.getTextWithoutTrailingBreak().slice(e.index,e.index+e.length)},t.prototype.getEditorContainer=function(){if(this.editor)return $(this.editor.container)},t.prototype.getTextWithoutTrailingBreak=function(){return this.editor.getText().slice(0,-1)},t.prototype.rebuildQuillEditor=function(){var o=this,n=null;this.editor&&(n=this.editor.getContents()),this.$container.empty(),this.$container.keydown((function(e){var t=e.which;e.ctrlKey&&a.isCtrlShortcutKey(t)&&e.stopPropagation(),(a.isArrowKey(t)||a.isNudgeModifierKey(t))&&e.stopPropagation(),a.isDeleteKey(t)&&e.stopPropagation()}));var s=this.$editorDiv=$("<div>"),l={readOnly:this.readOnly,formats:["bold","italic","underline","font","size","link","align","color"],modules:{history:{userOnly:!0}}},c=m.buildToolbarLinkInputTemplate(this.localizationProvider),u=m.LinkInput.buildNode(c);if(!this.readOnly){var d=this.$toolbarDiv;d||(this.$toolbarDiv=d=m.buildToolbar(this,this.localizationProvider,u,this.textboxFontColorEnabled)),d.addClass("unselectable"),this.host.setToolbar(d),l.modules.toolbar={container:d.get(0)},s.attr("drag-resize-disabled","true")}if(this.editor=new this.quillStatic(s.get(0),l),!this.readOnly){var p=new m.LinkInput(u,this.editor,this.quillStatic,c),h=function(e){e?(o.editor.setSelection(o.getSelectionAtCursor()),p.open()):p.remove()},g=void 0;if(this.textboxFontColorEnabled){var d=this.$toolbarDiv,y=new m.ColorPicker({quill:this.editor,hostServices:this.host,$colorSwatch:d.find(m.ColorPicker.colorSwatchGlyphClassAndSelector.selector),$colorPickerButton:d.find(m.ColorPicker.pickerButtonClassAndSelector.selector),$colorPickerButtonWrapper:d.find(m.ColorPicker.pickerButtonWrapperClassAndSelector.selector),defaultColor:r.defaultFontColor,format:"color"});g=function(){return y.applyFormat(y.getColor())}}var f=this.quillStatic.import("parchment"),v=this.quillStatic.import("formats/font");v.value=function(a){var i=t.camelize(v.keyName);return _.escape(e.Font.normalizeFamily(a.style[i]))},v.canAdd=function(t,a){var i=f.query(t,f.Scope.BLOT&(v.scope|f.Scope.TYPE));return null!=i&&(null==v.whitelist||v.whitelist.indexOf(e.Font.normalizeFamily(_.unescape(a)))>-1)},v.add=function(a,i){if(!v.canAdd(a,i))return!1;var r=t.camelize(v.keyName),o=e.Font.normalizeFamily(_.unescape(i));return a.style[r]=o,!0};var b=this.editor.getModule("toolbar");b.addHandler("link",h),this.textboxFontColorEnabled&&b.addHandler("color",g)}this.$container.append(s),n&&this.setContents(n);var C=_.debounce((function(){return o.onTextChanged()}),t.textChangeThrottle);this.editor.on("text-change",(function(e,a,r){if("api"!==r){for(var n=0,s=e.ops;n<s.length;n++){var l=s[n];if(t.isInsertOp(l)){var c=l.insert;if(c&&i.containsWhitespace(c))return o.onTextChanged(),void C.cancel()}}C()}})),this.editor.root.addEventListener("blur",(function(e){var a=e.relatedTarget||document.activeElement;a&&(t.willBrowserHandleFocus(a)||o.targetIsInToolbar(a))||o.setSelection(null,null)}),!1)},t.willBrowserHandleFocus=function(e){return"SELECT"===e.tagName||"INPUT"===e.tagName||!!e.getAttribute("contentEditable")},t.prototype.targetIsInToolbar=function(e){if("A"===e.tagName||"BUTTON"===e.tagName){var t=$(e);return this.$toolbarDiv.visible()&&(t.is(this.$toolbarDiv)||t.closest(this.$toolbarDiv).length>0)}return!1},t.prototype.onTextChanged=function(){this.textChanged()},t.isInsertOp=function(e){var t=e;return null!=t.insert},t.camelize=function(e){var t=e.split("-"),a=_.map(t.slice(1),(function(e){return e[0].toUpperCase()+e.slice(1)})).join("");return t[0]+a},t})();g.textChangeThrottle=600,g.loadQuillResources=!0,r.QuillWrapper=g;var m;!(function(a){function i(t,a,i,s){var c="size",g=o(c);n(t.quillStatic,c,null,g,!0);var f="font",v=u.map((function(t){return e.Font.normalizeFamily(t.value)})),S=o(f);n(t.quillStatic,f,v,S,!0);var P="align",T=h.map((function(e){return e.value})),V=o(P);l(t.quillStatic,V,T);var L=_.map(u,(function(t){return{label:t.label,glyph:t.glyph,value:_.escape(e.Font.normalizeFamily(t.value))}})),N=_.escape(e.Font.normalizeFamily(r.defaultFont)),M=s?D.buildFontColorButtons(a.get("RichTextbox_FontColor_ToolTip")):null,A=y().addClass("toolbar").append(m().append(C(w("Font",a),L,"font",N,(function(e,t){return e.css("font-family",t.value),e}))).append(C(w("Size",a),d,"size",r.defaultFontSize)).append(M)).append(m().append(x(w("Bold",a),"bold")).append(x(w("Italic",a),"italic")).append(x(w("Underline",a),"underline"))).append(m().append(b("Text Alignment",h,"align",p,a))).append(m().append(x(w("Link",a),"link")).append(i));return A}function o(e){return"formats/"+e}function n(e,t,a,i,r){void 0===r&&(r=!1),l(e,"attributors/style/"+t,a,i,r)}function l(e,t,a,i,r){void 0===r&&(r=!1);var o=e.import(t);o.whitelist=a,e.register(i||t,o,r)}function c(e,t,a){return $('\n                        <a href="#" class="ql-preview" target="_blank"></a>\n                        <input class="input" type="text">\n                        <span class="bar">&nbsp;|&nbsp;</span>\n                        <a class="ql-action ql-save">'+t+'</a>\n                        <a class="ql-action ql-edit">'+a+'</a>\n                        <a class="ql-remove">'+e+"</a>\n                    ")}function g(e){var t=y(),a=e.get("RichTextbox_Link_Done"),i=e.get("RichTextbox_Link_Remove"),r=e.get("RichTextbox_Link_Edit");return t.append(c(i,a,r)),t.html()}function m(){return f().addClass("ql-formats")}function y(){return $("<div>")}function f(){return $("<span>")}function v(){return $("<button>")}function b(e,t,a,i,r){var o=t.map((function(e){var t=null!=e.glyph?e.glyph:a+e.value,i=x(w(e.label,r),a,e.value,t);return i}));return o}function C(e,t,a,i,r){var o=S(e,t,i,r).addClass("ql-"+a+" ql-picker");return o}function S(e,t,a,i){for(var r=$("<select>").attr("title",e),o=0;o<t.length;o++){var n=t[o],s=$("<option>").text(n.label);n.value===a?s.attr("selected","selected"):s.attr("value",n.value),void 0!==i&&(s=i(s,n)),r.append(s)}return r}function x(e,t,a,i){var r=v();return null!=e&&r.attr("title",e),null!=t&&r.addClass("ql-"+t),null!=a&&r.attr("value",a),null==i&&(null!=t&&(i=t),null!=a&&(i=(i||"")+a)),null!=i&&r.addClass("powervisuals-glyph "+i),r}function w(e,t){return t.get("RichTextbox_"+e+"_ToolTip")}a.selectors={linkTooltip:t("ql-link-tooltip"),toolbarUrlInput:t("toolbar-url-input")},a.buildToolbar=i,a.buildToolbarLinkInputTemplate=g;var P=(function(){function e(t,a,i,r){var o=this;this.$container=t,this.quill=a,this.quillStatic=i,this.$preview=this.$container.find("a.ql-preview"),this.$textbox=this.$container.find("input[type=text]"),this.textbox=this.$textbox[0],this.$action=this.$container.find("a.ql-action"),this.hide(),this.$textbox.on("keydown",(function(e){13===e.keyCode?(o.save(),e.preventDefault()):27===e.keyCode&&(o.hide(),e.preventDefault())})),["mousedown","touchstart"].forEach((function(t){o.$action.on(t,(function(t){o.$container.hasClass(e.editingClass)?(o.save(),t.preventDefault()):(o.edit(),t.preventDefault())})),o.$container.find("a.ql-remove").on(t,(function(e){o.remove(),e.preventDefault()}))})),a.on("selection-change",(function(e){if(null!=e||!$(document.activeElement).is(o.$textbox)){if(null!=e&&0===e.length){var t=void 0;if(i=a.scroll.descendant(o.quillStatic.import("formats/link"),e.index),o.link=i[0],t=i[1],null!=o.link)return o.range={index:e.index-t,length:o.link.length()},o.show()}o.hide();var i}}))}return e.buildNode=function(e){return y().addClass(a.selectors.toolbarUrlInput.class).append($(e))},e.prototype.edit=function(){this.$container.addClass(e.editingClass),this.$textbox.focus(),this.textbox.setSelectionRange(0,this.textbox.value.length)},e.prototype.open=function(){this.range=this.quill.getSelection(),this.show(),this.edit()},e.prototype.hide=function(){this.range=this.link=null,this.$container.hide()},e.prototype.remove=function(){this.range=this.range||this.quill.getSelection(),this.quill.formatText(this.range,"link",!1,"user"),this.quill.setSelection(this.range,"silent"),this.hide()},e.prototype.save=function(){var e=this.textbox.value;0===this.range.length&&(this.quill.insertText(this.range.index,e),this.quill.setSelection(this.range.index,e.length),
this.range=this.quill.getSelection()),this.quill.formatText(this.range.index,this.range.length,"link",e,"user"),this.quill.setSelection(this.range,"silent"),this.link=this.quill.scroll.descendant(this.quillStatic.import("formats/link"),this.range.index)[0],this.show()},e.prototype.show=function(){this.$container.removeClass(e.editingClass),this.$container.show();var t,a=this.range=this.range||this.quill.getSelection();null!=this.link?t=this.link.formats().link:(t=this.quill.getText(a.index,a.length),t=s.LinkPreview.format(t)),this.$textbox.val(t),this.$preview.text(t),this.$preview.attr("href",t)},e})();P.editingClass="ql-editing",a.LinkInput=P;var D=(function(){function e(e){var t=this;this.quill=e.quill,this.hostServices=e.hostServices,this.$colorSwatch=e.$colorSwatch,this.$colorPickerButtonWrapper=e.$colorPickerButtonWrapper,this.defaultColor=e.defaultColor,this.format=e.format,this.promiseFactory=this.hostServices.promiseFactory(),this.currentColor=e.defaultColor,this.setSwatch(this.currentColor),e.$colorPickerButton.on("click",(function(){return t.toggle()}))}return e.buildFontColorButtons=function(t){var a=$("<span/>").addClass("powervisuals-glyph").addClass(e.colorGlyphClassAndSelector.class),i=$("<span/>").addClass("powervisuals-glyph").addClass(e.colorSwatchGlyphClassAndSelector.class),r=$("<button>").addClass("ql-color").addClass(e.colorButtonClassAndSelector.class).attr("title",t).val("false").append(a).append(i),o=$("<button>").addClass("colorpicker powervisuals-glyph chevrondown").addClass(e.pickerButtonClassAndSelector.class).val("false"),n=$("<div>").addClass(e.pickerButtonWrapperClassAndSelector.class).append(o);return[r,n]},e.prototype.onColorChange=function(e){this.setSwatch(e?e:this.defaultColor),this.applyFormat(e?e:null),this.currentColor=e},e.prototype.getColor=function(){return this.currentColor},e.prototype.applyFormat=function(e){e?this.quill.format(this.format,e,"user"):this.quill.format(this.format,!1,"user")},e.prototype.toggle=function(){this.getColorPicker().then((function(e){return e.toggle()}))},e.prototype.getColorPicker=function(){var e,t=this;if(!this.colorPicker&&this.existingDeferred)e=this.existingDeferred;else if(e=this.promiseFactory.defer(),this.colorPicker)e.resolve(this.colorPicker);else{this.existingDeferred=e;var a=this.$colorPickerButtonWrapper.get(0);this.hostServices.getUIComponentFactory().createColorPicker(a,this.defaultColor,(function(e){return t.onColorChange(e)})).then((function(a){t.colorPicker=a,e.resolve(a)}))}return e.promise},e.prototype.setSwatch=function(e){this.$colorSwatch.css("color",e)},e})();D.colorGlyphClassAndSelector=t("fontcolor"),D.colorSwatchGlyphClassAndSelector=t("fontcolorswatch"),D.colorButtonClassAndSelector=t("fontcolorbutton"),D.pickerButtonClassAndSelector=t("fontcolorpicker"),D.pickerButtonWrapperClassAndSelector=t("fontcolorbutton-wrapper"),a.ColorPicker=D})(m||(m={}))})(c=e.RichText||(e.RichText={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=t.utility.SelectionManager;t.cheerMeterProps={dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"}}};var i=(function(){function i(){this.isFirstTime=!0}return i.converter=function(a){if(!a.categorical||!a.categorical.categories)return null;var r=a.categorical.categories[0];if(!r)return null;var o=r.values;if(!o||_.isEmpty(a.categorical.values))return null;var n=a.categorical.values[0].values,s=a.categorical.categories[0].objects,l=s&&s.length>0?s[0]:void 0,c=s&&s.length>1?s[1]:void 0,u=a.metadata.objects,d=i.DefaultBackgroundColor;if(u){var p=u.general;if(p){var h=p.fill;h&&(d=h.solid.color)}}var g=e.DataViewObjects.getFillColor(l,t.cheerMeterProps.dataPoint.fill,i.DefaultFontColor),m=e.DataViewObjects.getFillColor(c,t.cheerMeterProps.dataPoint.fill,i.DefaultFontColor),y=t.SelectionIdBuilder.builder().withCategory(r,0).createSelectionId(),f=t.SelectionIdBuilder.builder().withCategory(r,1).createSelectionId(),v={teamA:{name:o[0],value:n[0],color:g,identity:y},teamB:{name:o[1],value:n[1],color:m,identity:f},background:d};return v},i.prototype.init=function(e){this.selectionManager=new a({hostServices:e.host});var t=this.svg=d3.select(e.element.get(0)).append("svg");this.textOne=t.append("text").style("font-family",i.DefaultFontFamily),this.textTwo=t.append("text").style("font-family",i.DefaultFontFamily)},i.prototype.update=function(e){if(e.dataViews[0]){var a=this.data=i.converter(e.dataViews[0]);if(a){var r=e.suppressAnimations?0:t.AnimatorCommon.MinervaAnimationDuration;this.draw(a,r,e.viewport)}}},i.prototype.getRecomendedFontProperties=function(t,a,r){for(var o,n={fontSize:"",fontFamily:i.DefaultFontFamily,text:t+a},s=1,l=1e3,c=r.width,u=0;s<=l;)if(o=(s+l)/2|0,n.fontSize=o+"px",u=e.TextMeasurementService.measureSvgTextWidth(n),c>u)s=o+1;else{if(!(c<u))break;l=o-1}return n.fontSize=o+"px",u=e.TextMeasurementService.measureSvgTextWidth(n),u>c&&(o--,n.fontSize=o+"px"),n},i.prototype.calculateLayout=function(t,a){var r=t.teamA.name,o=t.teamB.name,n={height:a.height,width:a.width-i.PaddingBetweenText},s=this.getRecomendedFontProperties(r,o,n);s.text=r;var l=0|e.TextMeasurementService.measureSvgTextWidth(s);s.text=o;var c=0|e.TextMeasurementService.measureSvgTextWidth(s),u=(a.width-l-c-i.PaddingBetweenText)/2|0;s.text=r+o;var d=0|e.TextMeasurementService.measureSvgTextHeight(s),p=t.teamA.value+t.teamB.value,h=a.height-d,g=(p-t.teamA.value)/p*h+d/2|0,m=(p-t.teamB.value)/p*h+d/2|0;return{x1:u,x2:u+l+i.PaddingBetweenText,y1:g,y2:m,fontSize:s.fontSize}},i.prototype.ensureStartState=function(e,t){if(this.isFirstTime){this.isFirstTime=!1;var a=t.height/2;this.textOne.attr({x:e.x1,y:a}),this.textTwo.attr({x:e.x2,y:a})}},i.prototype.clearSelection=function(){var e=this;this.selectionManager.clear().then((function(){e.clearSelectionUI()}))},i.prototype.clearSelectionUI=function(){this.textOne.style("stroke","#FFF").style("stroke-width",0),this.textTwo.style("stroke","#FFF").style("stroke-width",0)},i.prototype.updateSelectionUI=function(e){this.textOne.style("stroke","#FFF").style("stroke-width",a.containsSelection(e,this.data.teamA.identity)?"2px":"0px"),this.textTwo.style("stroke","#FFF").style("stroke-width",a.containsSelection(e,this.data.teamB.identity)?"2px":"0px")},i.prototype.draw=function(e,t,a){var i=this,r="back",o=this.textOne,n=this.textTwo;this.svg.attr({height:a.height,width:a.width}).on("click",(function(){i.clearSelection()})).style("background-color",e.background);var s=this.calculateLayout(e,a);this.ensureStartState(s,a),o.style("font-size",s.fontSize).style("fill",e.teamA.color).on("click",(function(){i.selectionManager.select(e.teamA.identity,d3.event.ctrlKey).then((function(e){i.updateSelectionUI(e)})),d3.event.stopPropagation()})).text(e.teamA.name),n.style("font-size",s.fontSize).style("fill",e.teamB.color).on("click",(function(){i.selectionManager.select(e.teamB.identity,d3.event.ctrlKey).then((function(e){i.updateSelectionUI(e)})),d3.event.stopPropagation()})).text(e.teamB.name),o.transition().duration(t).ease(r).attr({y:s.y1,x:s.x1}),n.transition().duration(t).ease(r).attr({y:s.y2,x:s.x2})},i.prototype.destroy=function(){this.svg=null,this.textOne=this.textTwo=null},i.prototype.enumerateObjectInstances=function(e){var t=[],a=this.data;switch(e.objectName){case"dataPoint":if(a)for(var r=[a.teamA,a.teamB],o=0;o<r.length;o++){var n=r[o],s=n.color,l=n.identity,c={objectName:"dataPoint",displayName:n.name,selector:l,properties:{fill:{solid:{color:s}}}};t.push(c)}break;case"general":var u={objectName:"general",displayName:"General",selector:null,properties:{fill:{solid:{color:a?a.background:i.DefaultBackgroundColor}}}};t.push(u)}return t},i})();i.capabilities={dataRoles:[{displayName:"Category",name:"Category",kind:e.VisualDataRoleKind.Grouping},{displayName:"Noise Measure",name:"Y",kind:e.VisualDataRoleKind.Measure}],dataViewMappings:[{categorical:{categories:{for:{in:"Category"}},values:{select:[{bind:{to:"Y"}}]}}}],objects:{dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}},width:{displayName:"",type:{numeric:!0}}}},general:{displayName:"General",properties:{fill:{displayName:"Background color",type:{fill:{solid:{color:!0}}}}}}}},i.DefaultFontFamily="cursive",i.DefaultFontColor="rgb(165, 172, 175)",i.DefaultBackgroundColor="#243C18",i.PaddingBetweenText=15,t.CheerMeter=i})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=jsCommon.PixelConverter,a=e.SlicerUtil.DisplayNameKeys,i=(function(){function i(t,a){this.textProperties={fontFamily:e.Font.Family.regular.css,fontSize:"14px"},this.hasSearchableData=!1,this.verticalSlicerStrategy=t,a&&(this.behavior=a.behavior),this.domHelper=new e.SlicerUtil.DOMHelper,this.hostServices=a.hostServices}return i.prototype.getDefaultValue=function(){if(this.data&&this.data.defaultValue)return this.data.defaultValue.value},i.prototype.getIdentityFields=function(){return e.SlicerUtil.DefaultValueHandler.getIdentityFields(this.dataView)},i.prototype.getUpdatedSelfFilter=function(t){var a=this.dataView&&this.dataView.metadata;if(this.data.searchKey!==t)return e.SlicerUtil.getUpdatedSelfFilter(t,a)},i.prototype.supportsOrientation=function(){return!0},i.prototype.enumerateObjectInstances=function(t){return e.SlicerUtil.ObjectEnumerator.enumerateObjectInstances(t,this.data,this.settings,this.dataView)},i.prototype.onModeChange=function(t){e.SlicerUtil.clearSlicerFilter(this.hostServices,t)},i.prototype.onClear=function(){this.interactivityService.handleClearSelection(),this.interactivityService.persistSelectionFilter(e.slicerProps.filterPropertyIdentifier)},i.prototype.init=function(t,a){var i=this;this.element=a,this.currentViewport=t.visualInitOptions.viewport;var o,n=this.hostServices=t.visualInitOptions.host,s=this.settings=e.DataConversion.DefaultSlicerProperties(),l=this.domHelper;this.behavior&&(o=e.createInteractivityService(n));var c=document.createElement("div");c.className=r.Container.class;var u=this.container=d3.select(c);this.searchContainer=l.addSearch(n,u),this.verticalSlicerStrategy.hasClearSearchButton()&&(this.clearSearchTextButton=l.addClearSearchButton(n,this.searchContainer)),this.body=u.append("div").classed(e.SlicerUtil.Selectors.Body.class,!0);var d=function(e){i.onEnterSelection(e)},p=function(e){i.onUpdateSelection(e,o)},h=function(e){e.remove()},g={rowHeight:l.getRowHeight(s,this.textProperties),enter:d,exit:h,update:p,loadMoreData:function(){return t.loadMoreData()},scrollEnabled:!0,viewport:this.currentViewport,baseContainer:this.body,isReadMode:function(){return 1!==i.hostServices.getViewMode()}};return this.listView=e.ListViewFactory.createListView(g),this.element.get(0).appendChild(c),this.interactivityService=o,o},i.prototype.render=function(e){this.renderVerticalSlicer(this.converter(e.dataView),e)},i.prototype.renderVerticalSlicer=function(e,t){var a=this;this.currentViewport=t.viewport;var i=t.dataView;if(!i||!this.data||_.isEmpty(this.data.slicerDataPoints))return void(this.listView&&this.listView.empty());this.hasSearchableData=t.hasSearchableData;var r=this.data.slicerSettings,o=this.domHelper;this.updateSelectionStyle(),this.listView.viewport(this.currentViewport).rowHeight(o.getRowHeight(r,this.textProperties)).data(this.data.slicerDataPoints,(function(e){return a.data&&$.inArray(e,a.data.slicerDataPoints)}),t.resetScrollbarPosition)},i.prototype.converter=function(t){var i=this.hostServices.getLocalizedString(a.SelectAll),r=e.DataConversion.convert(t,i,this.interactivityService,this.hostServices);return this.data=r,t&&this.data&&(this.settings=r.slicerSettings,this.dataView=t),r},i.prototype.hasSearchEnabled=function(){return this.verticalSlicerStrategy.shouldShowSearchHeader(this.settings,this.hasSearchableData)},i.prototype.updateSelectionStyle=function(){var e=this.settings;this.container.classed("isMultiSelectEnabled",e&&e.selection&&!e.selection.singleSelect)},i.prototype.onEnterSelection=function(a){var i=this.settings,o=a.append("ul").append("li").classed(r.ItemContainer.class,!0),n=o.append("div").classed(r.Input.class,!0);n.append("input").attr("type","checkbox"),this.verticalSlicerStrategy.customizeInputElement(n),o.each((function(a,r){var o=d3.select(this);a.isImage?o.append("img").classed(e.SlicerUtil.Selectors.LabelImage.class,!0):o.append("span").classed(e.SlicerUtil.Selectors.LabelText.class,!0),null!=a.count&&o.append("span").classed(e.SlicerUtil.Selectors.CountText.class,!0).style("font-size",t.fromPoint(i.slicerText.textSize))}))},i.prototype.onUpdateSelection=function(t,a){var i=this.settings,o=this.data;if(o&&i){var n=this.domHelper,s=this.verticalSlicerStrategy.shouldShowSearchHeader(i,this.hasSearchableData);this.searchContainer.classed(e.SlicerUtil.Selectors.SearchHeaderShow.class,s),this.searchContainer.classed(e.SlicerUtil.Selectors.SearchHeaderCollapsed.class,!s);var l=t.selectAll(e.SlicerUtil.Selectors.LabelText.selector);l.text((function(e){return e.value})).attr("title",(function(e){return e.tooltip})),this.verticalSlicerStrategy.setLabelTextStyle(n,l,i);var c=t.selectAll(e.SlicerUtil.Selectors.LabelImage.selector);c.empty()||c.attr("src",(function(e){return e.value}));var u=t.selectAll(e.SlicerUtil.Selectors.CountText.selector);if(!u.empty()&&this.verticalSlicerStrategy.shouldShowCount()&&(u.text((function(e){return e.count})),n.setSlicerTextStyle(u,i)),a&&this.body){var d=this.body.attr("width",this.currentViewport.width),p=d.selectAll(r.ItemContainer.selector),h=d.selectAll(e.SlicerUtil.Selectors.LabelText.selector),g=d.selectAll(r.Input.selector),m=this.searchContainer.select(e.SlicerUtil.Selectors.SearchInput.selector);if(!m.empty()){var y=m.node(),f=y&&y.value;this.verticalSlicerStrategy.hasClearSearchButton()&&this.domHelper.configureSearchBoxIcon(this.searchContainer,f),(_.isEmpty(f)||_.isEmpty(o.searchKey))&&m.property("value",o.searchKey)}var v={dataPoints:o.slicerDataPoints,slicerContainer:this.container,itemContainers:p,itemLabels:h,itemInputs:g,interactivityService:a,settings:o.slicerSettings,searchInput:m,clearSearchTextButton:this.clearSearchTextButton,slicerValueHandler:this},b={behaviorOptions:v,orientation:0};a.bind(o.slicerDataPoints,this.behavior,b,{overrideSelectionFromData:!0,hasSelectionOverride:o.hasSelectionOverride,slicerValueHandler:this}),e.SlicerWebBehavior.styleSlicerItems(t.select(r.Input.selector),o.hasSelectionOverride,a.isSelectionModeInverted())}else e.SlicerWebBehavior.styleSlicerItems(t.select(r.Input.selector),!1,!1)}},i})();e.VerticalSlicerRenderer=i,(function(a){var i=(function(){function e(){}return e.prototype.hasClearSearchButton=function(){return!1},e.prototype.setLabelTextStyle=function(e,t,a){e.setSlicerTextStyle(t,a)},e.prototype.shouldShowSearchHeader=function(e,t){return e.search.enabled},e.prototype.shouldShowCount=function(){return!0},e.prototype.customizeInputElement=function(e){e.append("span").classed("checkbox",!0)},e})();a.CheckBoxSlicerStrategy=i;var r=13,o="#333333",n=(function(){function a(){}return a.prototype.hasClearSearchButton=function(){return!0},a.prototype.setLabelTextStyle=function(a,i,n){var s=e.DataConversion.DefaultSlicerProperties();s.slicerText.textSize=t.toPoint(r),s.slicerText.color=o,a.setSlicerTextStyle(i,s)},a.prototype.shouldShowSearchHeader=function(e,t){return e.search.enabled||t},a.prototype.shouldShowCount=function(){return!1},a.prototype.customizeInputElement=function(e){e.append("span").classed("powervisuals-glyph checkmark",!0)},a})();a.CheckListSlicerStrategy=n})(i=e.VerticalSlicerRenderer||(e.VerticalSlicerRenderer={}));var r;!(function(e){var t=jsCommon.CssConstants.createClassAndSelector;e.Container=t("slicerContainer"),e.ItemContainer=t("slicerItemContainer"),e.Input=t("slicerCheckbox"),e.Checkbox=t("checkbox")})(r||(r={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=jsCommon.PixelConverter,i=t.SlicerUtil.DisplayNameKeys,r=50,o=80,n=19,s=.8,l={labelText:{marginRight:2,paddingLeft:8,paddingRight:8}},c=(function(){function c(e){this.textProperties={fontFamily:t.Font.Family.regular.css,fontSize:"14px"},e&&(this.behavior=e.behavior),this.domHelper=new t.SlicerUtil.DOMHelper,this.dataStartIndex=0}return c.prototype.getDefaultValue=function(){if(this.data&&this.data.defaultValue)return this.data.defaultValue.value},c.prototype.getIdentityFields=function(){return t.SlicerUtil.DefaultValueHandler.getIdentityFields(this.dataView)},c.prototype.getUpdatedSelfFilter=function(e){var a=this.dataView&&this.dataView.metadata;if(this.data.searchKey!==e)return t.SlicerUtil.getUpdatedSelfFilter(e,a)},c.prototype.supportsOrientation=function(){return!0},c.prototype.enumerateObjectInstances=function(e){return t.SlicerUtil.ObjectEnumerator.enumerateObjectInstances(e,this.data,this.settings,this.dataView)},c.prototype.onModeChange=function(e){t.SlicerUtil.clearSlicerFilter(this.hostServices,e)},c.prototype.onClear=function(){this.interactivityService.handleClearSelection(),this.interactivityService.persistSelectionFilter(t.slicerProps.filterPropertyIdentifier)},c.prototype.init=function(e,a){this.element=a,this.currentViewport=e.visualInitOptions.viewport;var i=this.hostServices=e.visualInitOptions.host;this.settings=t.DataConversion.DefaultSlicerProperties(),this.behavior&&(this.interactivityService=t.createInteractivityService(i)),this.loadMoreData=function(){return e.loadMoreData()};var r=document.createElement("div");r.className=u.container.class;var o=this.container=d3.select(r);this.searchContainer=this.domHelper.addSearch(i,o);var n=this.body=o.append("div").classed(t.SlicerUtil.Selectors.Body.class+" "+u.FlexDisplay.class,!0);return this.leftNavigationArrow=n.append("button").classed(u.NavigationArrow.class+" "+u.LeftNavigationArrow.class,!0),this.itemsContainer=n.append("div").classed(u.ItemsContainer.class+" "+u.FlexDisplay.class,!0),this.rightNavigationArrow=n.append("button").classed(u.NavigationArrow.class+" "+u.RightNavigationArrow.class,!0),this.element.get(0).appendChild(r),this.bindNavigationEvents(),this.interactivityService},c.prototype.render=function(e){var a=this.hostServices.getLocalizedString(i.SelectAll),r=e.dataView;if(this.data=t.DataConversion.convert(r,a,this.interactivityService,this.hostServices),!r||!this.data||_.isEmpty(this.data.slicerDataPoints))return void this.itemsContainer.selectAll("*").remove();this.dataView=r,this.settings=this.data.slicerSettings;var o=this.currentViewport&&e.viewport&&(this.currentViewport.height!==e.viewport.height||this.currentViewport.width!==e.viewport.width);this.isMaxWidthCalculated()&&o||(this.calculateAndSetMaxItemWidth(),this.calculateAndSetTotalItemWidth()),this.currentViewport=e.viewport,this.updateStyle(),this.availableWidth=this.element.find(t.SlicerUtil.Selectors.Body.selector).width()-2*n,this.itemsToDisplay=this.getNumberOfItemsToDisplay(this.availableWidth),0!==this.itemsToDisplay&&this.renderCore()},c.prototype.renderCore=function(){var e=this.data;if(e&&e.slicerDataPoints){this.normalizePosition(e.slicerDataPoints);var t=this.itemsToDisplay,a=this.dataStartIndex;this.container.classed(u.CanScrollRight.class,a+this.itemsToDisplay<=e.slicerDataPoints.length-1),this.container.classed(u.CanScrollLeft.class,a>0),this.renderItems(e.slicerSettings),this.bindInteractivityService(),a+t>=e.slicerDataPoints.length*s&&this.loadMoreData()}},c.prototype.updateStyle=function(){var e=this.data,a=e.slicerSettings;this.container.classed(u.MultiSelectEnabled.class,!a.selection.singleSelect),this.searchContainer.classed(t.SlicerUtil.Selectors.SearchHeaderShow.class,a.search.enabled),this.searchContainer.classed(t.SlicerUtil.Selectors.SearchHeaderCollapsed.class,!a.search.enabled)},c.prototype.renderItems=function(i){var r=this,o=this.itemsToDisplay,n=this.dataStartIndex,s=this.data.slicerDataPoints.slice(n,n+o),c=this.itemsContainer.selectAll(t.SlicerUtil.Selectors.LabelText.selector).data(s,(function(e){return _.indexOf(r.data.slicerDataPoints,e)}));c.enter().append("div").classed(t.SlicerUtil.Selectors.LabelText.class+" "+u.FlexDisplay.class,!0),c.order(),c.style({"font-family":this.textProperties.fontFamily,"padding-left":a.toString(l.labelText.paddingLeft),"padding-right":a.toString(l.labelText.paddingRight),"margin-right":function(e,t){return r.isLastRowItem(t,o)?"0px":a.toString(l.labelText.marginRight)}}),this.domHelper.setSlicerTextStyle(c,i),c.exit().remove(),window.setTimeout((function(){c.attr("title",(function(e){return e.tooltip})).text((function(e){return e.value}));var a=r.element.find(t.SlicerUtil.Selectors.LabelText.selector),i=a.first(),o=i.height(),n=i.width();a.each((function(t,a){e.TextMeasurementService.wordBreakOverflowingText(a,n,o)}))}))},c.prototype.bindInteractivityService=function(){if(this.interactivityService&&this.body){var e=this.body,a=e.selectAll(u.ItemsContainer.selector),i=e.selectAll(t.SlicerUtil.Selectors.LabelText.selector),r=this.data,o=this.searchContainer.select("input");if(!o.empty()){var n=o.node(),s=n.value;(_.isEmpty(s)||_.isEmpty(r.searchKey))&&o.property("value",r.searchKey)}var l={dataPoints:r.slicerDataPoints,slicerContainer:this.container,itemsContainer:a,itemLabels:i,interactivityService:this.interactivityService,settings:r.slicerSettings,slicerValueHandler:this,searchInput:o},c={behaviorOptions:l,orientation:1};this.interactivityService.bind(r.slicerDataPoints,this.behavior,c,{overrideSelectionFromData:!0,hasSelectionOverride:r.hasSelectionOverride}),t.SlicerWebBehavior.styleSlicerItems(this.itemsContainer.selectAll(t.SlicerUtil.Selectors.LabelText.selector),this.interactivityService.hasSelection(),this.interactivityService.isSelectionModeInverted())}else t.SlicerWebBehavior.styleSlicerItems(this.itemsContainer.selectAll(t.SlicerUtil.Selectors.LabelText.selector),!1,!1)},c.prototype.normalizePosition=function(e){var t=this.dataStartIndex;t=Math.min(t,e.length-1),this.dataStartIndex=Math.max(t,0)},c.prototype.bindNavigationEvents=function(){this.registerMouseWheelScrollEvents(),this.registerMouseClickEvents()},c.prototype.registerMouseClickEvents=function(){var e=this,t=this.container.selectAll(u.RightNavigationArrow.selector),a=this.container.selectAll(u.LeftNavigationArrow.selector);t.on("click",(function(){e.scrollRight()})),a.on("click",(function(){e.scrollLeft()}))},c.prototype.registerMouseWheelScrollEvents=function(){var e=this,t=this.body.node();t.addEventListener("mousewheel",(function(t){e.onMouseWheel(t.wheelDelta)})),t.addEventListener("DOMMouseScroll",(function(t){e.onMouseWheel(t.detail)}))},c.prototype.onMouseWheel=function(e){e<0?this.scrollRight():e>0&&this.scrollLeft()},c.prototype.scrollRight=function(){var e=this.itemsToDisplay,t=this.dataStartIndex,a=this.data.slicerDataPoints.length,i=a-1;e+t>i||(t+=1===e?e:e-1,e+t>i&&(t=i-e+1),this.dataStartIndex=t,this.renderCore())},c.prototype.scrollLeft=function(){var e=this.itemsToDisplay,t=this.dataStartIndex,a=0;0!==t&&(1===e&&(t-=e),t=t-e<a?a:t-e+1,this.dataStartIndex=t,this.renderCore())},c.prototype.isLastRowItem=function(e,t){return e===t-1},c.prototype.getScaledTextWidth=function(e){return e/jsCommon.TextSizeDefaults.TextSizeMin*o},c.prototype.isMaxWidthCalculated=function(){return void 0!==this.maxItemWidth},c.prototype.calculateAndSetMaxItemWidth=function(){var t=this.getDataPointsCount(),i=0;if(0===t)return void(this.maxItemWidth=i);var o=this.data,n=o.slicerDataPoints,s=Math.min(t,r),l=jQuery.extend(!0,{},this.textProperties),c=o.slicerSettings.slicerText.textSize;l.fontSize=a.fromPoint(c);for(var u=jsCommon.WordBreaker.getMaxWordWidth,d=0;d<s;d++){var p=n[d].value;l.text=p,i=Math.max(i,u(p,e.TextMeasurementService.measureSvgTextWidth,l))}this.maxItemWidth=Math.min(i,this.getScaledTextWidth(c))},c.prototype.calculateAndSetTotalItemWidth=function(){var e=this.data,t=l.labelText.paddingLeft+l.labelText.paddingRight+l.labelText.marginRight,a=this.domHelper.getRowsOutlineWidth(e.slicerSettings.slicerText.outline,e.slicerSettings.general.outlineWeight);this.totalItemWidth=this.maxItemWidth+t+a},c.prototype.getNumberOfItemsToDisplay=function(e){var t=this.totalItemWidth;if(0===t)return 0;var a=this.getDataPointsCount(),i=Math.min(a,Math.round(e/t));return Math.max(i,1)},c.prototype.getDataPointsCount=function(){return _.size(this.data.slicerDataPoints)},c})();t.HorizontalSlicerRenderer=c;var u;!(function(e){var t=jsCommon.CssConstants.createClassAndSelector;e.container=t("horizontalSlicerContainer"),e.ItemsContainer=t("slicerItemsContainer"),e.NavigationArrow=t("navigationArrow"),e.LeftNavigationArrow=t("left"),e.RightNavigationArrow=t("right"),e.MultiSelectEnabled=t("isMultiSelectEnabled"),e.FlexDisplay=t("flexDisplay"),e.CanScrollRight=t("canScrollRight"),e.CanScrollLeft=t("canScrollLeft")})(u||(u={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=jsCommon.CssConstants.createClassAndSelector,i=e.visuals.KpiUtil.getKpiImageMetadata,r=e.visuals.TextUtil,o=(function(a){function o(t){var i=a.call(this,o.cardClassName)||this;return i.isScrollable=!1,i.displayUnitSystemType=e.DisplayUnitSystemType.WholeUnits,t&&(i.isScrollable=!!t.isScrollable,t.animator&&(i.animator=t.animator),null!=t.displayUnitSystemType&&(i.displayUnitSystemType=t.displayUnitSystemType),t.cardSmallViewportProperties&&(i.cardSmallViewportProperties=t.cardSmallViewportProperties)),i}return __extends(o,a),o.prototype.init=function(e){this.animationOptions=e.animation;var t=e.element;this.kpiImage=d3.select(t.get(0)).append("div").classed(o.KPIImage.class,!0);var a=this.svg=d3.select(t.get(0)).append("svg");this.graphicsContext=a.append("g"),this.currentViewport=e.viewport,this.hostServices=e.host,this.style=e.style,this.updateViewportProperties(),this.isScrollable&&(a.attr("class",o.cardClassName),this.labelContext=a.append("g"))},o.prototype.onDataChanged=function(a){var i,r=a.dataViews[0];if(r){this.getMetaDataColumn(r),r.single&&(i=r.single.value),this.cardFormatSetting=this.getDefaultFormatSettings();var o=r.metadata;if(o){var n=o.objects;if(n){var s=this.cardFormatSetting.labelSettings;s.labelColor=e.DataViewObjects.getFillColor(n,t.cardProps.labels.color,s.labelColor),s.precision=e.DataViewObjects.getValue(n,t.cardProps.labels.labelPrecision,s.precision),s.fontSize=e.DataViewObjects.getValue(n,t.cardProps.labels.fontSize,s.fontSize),s.precision!==t.dataLabelUtils.defaultLabelPrecision&&s.precision<0&&(s.precision=0),s.displayUnits=e.DataViewObjects.getValue(n,t.cardProps.labels.labelDisplayUnits,s.displayUnits),s.showCategory=e.DataViewObjects.getValue(n,t.cardProps.categoryLabels.show,s.showCategory),s.categoryLabelColor=e.DataViewObjects.getFillColor(n,t.cardProps.categoryLabels.color,s.categoryLabelColor),this.cardFormatSetting.wordWrap=e.DataViewObjects.getValue(n,t.cardProps.wordWrap.show,this.cardFormatSetting.wordWrap),this.cardFormatSetting.textSize=e.DataViewObjects.getValue(n,t.cardProps.categoryLabels.fontSize,this.cardFormatSetting.textSize)}}}this.updateInternal(i,!0,!0)},o.prototype.onResizing=function(e){this.currentViewport=e,this.updateViewportProperties(),this.updateInternal(this.value,!0,!0)},o.prototype.updateViewportProperties=function(){var e=this.currentViewport;this.svg.attr("width",e.width).attr("height",e.height)},o.prototype.setTextProperties=function(e,t){o.cardTextProperties.fontSize=jsCommon.PixelConverter.fromPoint(t),o.cardTextProperties.text=e},o.prototype.getCardFormatTextSize=function(){return this.cardFormatSetting.textSize},o.prototype.isSmallViewport=function(){return!!(this.cardSmallViewportProperties&&this.currentViewport.width<=this.cardSmallViewportProperties.cardSmallViewportWidth)},o.prototype.getCardPrecision=function(e){return void 0===e&&(e=!1),e?t.dataLabelUtils.defaultLabelPrecision:this.cardFormatSetting.labelSettings.precision},o.prototype.getCardDisplayUnits=function(e){return void 0===e&&(e=!1),e?0:this.cardFormatSetting.labelSettings.displayUnits},o.prototype.getAdjustedFontHeight=function(e,t,i){var r=a.prototype.getAdjustedFontHeight.call(this,e,t,i);return Math.min(r,o.DefaultStyle.card.maxFontSize)},o.prototype.clear=function(e){void 0===e&&(e=!1),this.svg.select(o.Value.selector).text(""),e||this.svg.select(o.Label.selector).text(""),a.prototype.clear.call(this)},o.prototype.updateInternal=function(a,n,s){void 0===s&&(s=!1);var l=this.value,c=t.AnimatorCommon.GetAnimationDuration(this.animator,n);if(void 0===a)return void(void 0!==l&&this.clear());var u=this.metaDataColumn,d=this.cardFormatSetting.labelSettings,p=this.isSmallViewport(),h=this.getCardPrecision(p),g=this.getCardDisplayUnits(p),m=0===g,y=this.getFormatString(u),f=t.valueFormatter.create({format:y,value:m?a:g,precision:t.dataLabelUtils.getLabelPrecision(h,y),displayUnitSystemType:m&&h===t.dataLabelUtils.defaultLabelPrecision?this.displayUnitSystemType:e.DisplayUnitSystemType.WholeUnits,formatSingleValues:!!m,allowFormatBeautification:!0,columnType:u?u.type:void 0}),v=this.cardFormatSetting,b=jsCommon.PixelConverter.fromPointToPixel(d.fontSize),C=o.DefaultStyle.value;this.setTextProperties(a,this.getCardFormatTextSize());var S=d.showCategory?e.TextMeasurementService.estimateSvgTextHeight(o.cardTextProperties):0,x=S+o.DefaultStyle.label.paddingTop,w=this.currentViewport.width,P=this.currentViewport.height,D=this.getTranslateX(w),T=(P-x-b)/2,V=i(u,a,1);if(this.isScrollable){if(!s&&l===a)return;if(l===a||!_.isEmpty(a)&&"string"==typeof a||(a=f.format(a)),V)this.graphicsContext.selectAll("text").remove(),this.displayStatusGraphic(V,D,T,b);else{this.kpiImage.selectAll("div").remove();var L=this.getTranslateY(b+T),N=this.graphicsContext.attr("transform",t.SVGUtil.translate(D,L)).selectAll("text").data([a]);if(N.enter().append("text").attr("class",o.Value.class),N.text((function(e){return e})).style({"font-size":jsCommon.PixelConverter.fromPoint(d.fontSize),fill:d.labelColor,"font-family":C.fontFamily,"text-anchor":this.getTextAnchor()}),v.wordWrap){var M=N.node();r.wordBreak(M,w,P-x);var A=M.childElementCount;if(A>1){var R=b;b*=A,T=(P-x-b)/2,L=this.getTranslateY(R+T),this.graphicsContext.attr("transform",t.SVGUtil.translate(D,L))}}else N.call(t.AxisHelper.LabelLayoutStrategy.clip,w,e.TextMeasurementService.svgEllipsis);N.append("title").text((function(e){return e})),N.exit().remove()}if(d.showCategory&&u&&u.displayName){var F=[u.displayName],O=this.getTranslateY(b+x+T),I=this.labelContext.attr("transform",t.SVGUtil.translate(D,O)).selectAll("text").data(F);I.enter().append("text").attr("class",o.Label.class),I.text((function(e){return e})).style({"font-size":jsCommon.PixelConverter.fromPoint(this.getCardFormatTextSize()),fill:d.categoryLabelColor,"text-anchor":this.getTextAnchor()});var H=I.node();H&&(v.wordWrap?r.wordBreak(H,w/2,P-O):I.call(t.AxisHelper.LabelLayoutStrategy.clip,w,e.TextMeasurementService.svgEllipsis)),I.append("title").text((function(e){return e})),I.exit().remove()}else this.labelContext.selectAll("text").remove()}else V?(this.graphicsContext.selectAll("text").remove(),this.displayStatusGraphic(V,D,T,b)):(this.kpiImage.selectAll("div").remove(),this.doValueTransition(l,a,this.displayUnitSystemType,this.animationOptions,c,s,f),this.graphicsContext.call(t.tooltipUtils.tooltipUpdate,[a]));this.value=a},o.prototype.displayStatusGraphic=function(e,a,i,r){this.graphicsContext.selectAll("text").remove();var o=this.kpiImage.select("div");o&&!o.empty()||(o=this.kpiImage.append("div")),o.attr("class",e.class).style("position","absolute").style("font-size",r+"px");var n=o.node().offsetWidth,s=o.node().offsetHeight;o.style("transform",t.SVGUtil.translateWithPixels(a-n/2,this.getTranslateY(r+i)-s))},o.prototype.getDefaultFormatSettings=function(){return{labelSettings:t.dataLabelUtils.getDefaultCardLabelSettings(o.DefaultStyle.value.color,o.DefaultStyle.label.color,o.DefaultStyle.value.textSize),wordWrap:!1,
textSize:o.DefaultStyle.label.textSize}},o.prototype.enumerateObjectInstances=function(e){this.cardFormatSetting||(this.cardFormatSetting=this.getDefaultFormatSettings());var a=this.cardFormatSetting,i=new t.ObjectEnumerationBuilder;switch(e.objectName){case"categoryLabels":t.dataLabelUtils.enumerateCategoryLabels(i,a.labelSettings,!0,!0,a.textSize);break;case"labels":var r={enumeration:i,dataLabelsSettings:a.labelSettings,show:!0,displayUnits:!0,precision:!0,fontSize:!0};t.dataLabelUtils.enumerateDataLabels(r);break;case"wordWrap":i.pushInstance({objectName:"wordWrap",selector:null,properties:{show:a.wordWrap}})}return i.complete()},o})(t.AnimatedText);o.cardClassName="card",o.Label=a("label"),o.Value=a("value"),o.KPIImage=a("caption"),o.cardTextProperties={fontSize:null,text:null,fontFamily:t.dataLabelUtils.LabelTextProperties.fontFamily},o.DefaultStyle={card:{maxFontSize:200},label:{textSize:12,color:"#a6a6a6",paddingTop:8},value:{textSize:27,color:"#333333",fontFamily:t.Font.Family.regularSecondary.css}},t.Card=o})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={})),define("Visuals/visuals/shapeMap",["require","exports","Visuals/behaviours/shapeMapBehaviors","topojson"],(function(e,t,a,i){t.ShapeMapBehavior=a.ShapeMapBehavior;var r=powerbi.visuals,o=powerbi.DataViewObjects,n=r.ColorHelper,s=powerbi.GeoJsonTypes,l=r.Legend,c=r.mapProps,u=r.ShapeMapType,d=u.Role,p=u.Projection,h=r.SelectionIdBuilder,g=r.standardGeoJson,m=r.TooltipBuilder,y=(C={},C[g.australiaStates]={projections:[p.mercator,p.equirectangular,p.orthographic]},C[g.austriaStates]={projections:[p.mercator,p.equirectangular,p.orthographic]},C[g.brazilStates]={projections:[p.orthographic,p.equirectangular,p.mercator]},C[g.canadaProvinces]={projections:[p.orthographic,p.equirectangular,p.mercator]},C[g.franceRegions]={projections:[p.orthographic,p.equirectangular,p.mercator]},C[g.germanyStates]={projections:[p.orthographic,p.equirectangular,p.mercator]},C[g.irelandCounties]={projections:[p.orthographic,p.equirectangular,p.mercator]},C[g.italyRegions]={projections:[p.mercator,p.equirectangular,p.orthographic]},C[g.mexicoStates]={projections:[p.orthographic,p.equirectangular,p.mercator]},C[g.netherlandsProvinces]={projections:[p.mercator,p.equirectangular,p.orthographic]},C[g.ukCountries]={projections:[p.orthographic,p.equirectangular,p.mercator]},C[g.usaStates]={projections:[p.albersUsa,p.equirectangular,p.mercator,p.orthographic]},C),f=[p.mercator,p.equirectangular,p.orthographic],v=(function(){function e(e){this.resetToDefault=!1,e&&(this.behavior=e.behavior,this.behavior&&(this.behavior.shapeMap=this),this.tooltipsEnabled=e.tooltipsEnabled,this.customFontFamily=e.customFontFamily)}return e.prototype.init=function(e){this.root=e.element,this.hostServices=e.host,this.tooltipService=r.createTooltipService(e.host),this.viewport=e.viewport,this.svg=d3.select(this.root.get(0)).append("svg").attr("class","shapeMap").attr("width",this.viewport.width).attr("height",this.viewport.height).attr("drag-resize-disabled","true").style("position","absolute"),this.behavior&&(this.clearCatcher=r.appendClearCatcher(this.svg),this.interactivityService=r.createInteractivityService(this.hostServices)),this.mapG=this.svg.append("g"),this.colors=e.style.colorPalette.dataColors,this.style=e.style,this.legend=r.createLegend(this.root,e.interactivity&&e.interactivity.isInteractiveLegend,this.interactivityService,!0)},e.prototype.update=function(t){if(this.viewport=t.viewport,!_.isEmpty(t.dataViews)&&t.dataViews[0]){this.populateObjectProperties(t.dataViews[0]);var a=new n(this.colors,c.dataPoint.fill,this.defaultDataPointColor);this.viewModel=e.converter(t.dataViews[0],this.interactivityService,a,this.tooltipsEnabled),this.legendData=l.buildSeriesLegendData({dataView:t.dataViews[0],showByDefault:!0,style:this.style}),this.render(t.suppressAnimations)}},e.prototype.populateObjectProperties=function(e){if(e&&e.metadata){var t=e.metadata;this.defaultDataPointColor=o.getFillColor(t.objects,c.dataPoint.defaultColor),this.showAllDataPoints=o.getValue(t.objects,c.dataPoint.showAllDataPoints),t?this.legendObjectProperties=o.getObject(t.objects,"legend",{}):this.legendObjectProperties={}}},e.prototype.enumerateObjectInstances=function(t){if(this.viewModel){var a=new r.ObjectEnumerationBuilder;switch(t.objectName){case"legend":if(!this.viewModel.hasDynamicSeries)return;l.enumerate({enumeration:a,legendData:this.legendData,customFontFamily:this.customFontFamily});break;case"shape":this.viewModel.shapeMap?a.pushInstance({objectName:"shape",selector:null,properties:{map:_.clone(this.viewModel.shapeMap),projectionEnum:this.viewModel.projectionEnum},validValues:{projectionEnum:e.validProjectionsForShapeMap(this.viewModel.shapeMap)}}):a.pushInstance({objectName:"shape",selector:null,properties:{map:{}},validValues:{projectionEnum:f}});break;case"zoom":a.pushInstance({objectName:"zoom",selector:null,properties:{autoZoom:this.viewModel.autoZoom,selectionZoom:this.viewModel.selectionZoom,manualZoom:this.viewModel.manualZoom}});break;case"defaultColors":a.pushInstance({objectName:"defaultColors",selector:null,properties:{defaultShow:this.viewModel.defaultShow,defaultColor:this.viewModel.defaultShow?this.viewModel.defaultColor:null,borderColor:this.viewModel.borderColor,borderThickness:this.viewModel.borderThickness}});break;case"dataPoint":this.viewModel.hasDynamicSeries&&this.enumerateDataPoints(a)}return a.complete()}},e.getStandardGeoJsonFiles=function(){return _.clone(y)},e.validProjectionsForShapeMap=function(e){if(!e||!e.name)return f;var t=y[e.name];return!t||_.isEmpty(t.projections)?f:t.projections},e.prototype.enumerateDataPoints=function(e){var t=this.viewModel;if(t)if(t.hasDynamicSeries&&this.legendData)for(var a=0;a<this.legendData.dataPoints.length;a++){var i=this.legendData.dataPoints[a];e.pushInstance({objectName:"dataPoint",displayName:i.label,selector:i.identity.getSelector(),properties:{fill:{solid:{color:i.color}}}})}else if(e.pushInstance({objectName:"dataPoint",selector:null,properties:{defaultColor:{solid:{color:this.defaultDataPointColor||this.colors.getColorByIndex(0).value}}}}).pushInstance({objectName:"dataPoint",selector:null,properties:{showAllDataPoints:!!this.showAllDataPoints}}),this.showAllDataPoints)for(var r=0,o=t.dataPoints;r<o.length;r++){var i=o[r];e.pushInstance({objectName:"dataPoint",displayName:i.location,selector:i.identity.getSelector(),properties:{fill:{solid:{color:i.color}}}})}},e.prototype.getDataPointFromShape=function(e){return this.matcher.getDataPointFromShape(e)},e.getObjectProperties=function(t){var a=t&&t.metadata&&t.metadata.objects?t.metadata.objects:{},i=r.shapeMapProps,n=o.getValue(a,i.shape.map,null),s=e.validProjectionsForShapeMap(n),l=s[0],c=o.getValue(a,i.shape.projectionEnum,l);return _.contains(s,c)||(c=l),{map:n,projectionEnum:c,autoZoom:o.getValue(a,i.zoom.autoZoom,!1),selectionZoom:o.getValue(a,i.zoom.selectionZoom,!1),manualZoom:o.getValue(a,i.zoom.manualZoom,!1),defaultShow:o.getValue(a,i.defaultColors.defaultShow,!0),defaultColor:o.getFillColor(a,i.defaultColors.defaultColor,"#DDDDDD"),borderColor:o.getFillColor(a,i.defaultColors.borderColor,"#999999"),borderThickness:o.getValue(a,i.defaultColors.borderThickness,1)}},e.converter=function(t,a,i,o){void 0===o&&(o=!0);var n,s,l,c,u,p,g,y=[],f=0;t&&(n=powerbi.data.createDataViewCategoricalReaderAdvanced(t),s=n.data,l=n.columns,c=s.getValueQueryName(d.value),u=s.getCategoryDisplayName(d.category),p=l.getCategoryMetadataColumn(d.category),g=l.getCategoryColumn(d.category));var v,b=!1,C=!1,S=!1;n&&(b=l.hasDynamicSeries(),C=s.hasValues(d.value),S=s.hasCategoryWithRole(d.category),v=s.getValueQueryName(d.value),null==v&&(v=""));var x=t&&n&&s.hasCategories();if(x){var w=r.shapeMapProps.general.formatString;f=s.getSeriesCount();for(var P=0;P<s.getCategoryCount();P++){var D=s.getValue(d.value,P),T=void 0,V=S?n.objects.getCategoryDataObjects(P):n.objects.getCategoryDataObjects(P),L=void 0,_=void 0,N=void 0;S&&(T=s.getCategoryValue(d.category,P),L={displayName:s.getCategoryDisplayName(d.category),value:r.converterHelper.formatFromMetadataColumn(T,l.getCategoryMetadataColumn(d.category),w)}),f=s.getSeriesCount(),s.hasValues(d.value)||(f=1);for(var M=(new h).withCategory(l.getCategoryColumn(d.category),P).withMeasure(s.getValueQueryName(d.value)),A=M.createSelectionId(),R=0;R<f;R++){var F=void 0;F=b?i.getColorForSeriesValue(n.objects.getSeriesDataObjects(R),n.columns.getDynamicSeriesColumnIdentityFields(),s.getSeriesName(R)):s.hasCategoryWithRole(d.series)?i.getColorForSeriesValue(n.objects.getCategoryDataObjects(P),n.columns.getCategoryColumnIdentityFields(d.series),T):i.getColorForMeasure(V,v);var O=(new h).withCategory(l.getCategoryColumn(S?d.category:d.value),P).withMeasure(s.getValueQueryName(d.value));b&&(O=O.withSeries(l.getSeriesValueColumns(),l.getValueColumn(d.value,R)),_={displayName:s.getSeriesDisplayName(),value:r.converterHelper.formatFromMetadataColumn(s.getSeriesName(R),l.getSeriesMetadataColumn(),w)}),C&&(D=s.getValue(d.value,P,R),N={displayName:s.getValueDisplayName(d.value),value:r.converterHelper.formatFromMetadataColumn(D,l.getValueMetadataColumn(d.value,R),w,!1)});var I=[];o&&(L&&I.push(L),_&&I.push(_),N&&I.push(N),m.addTooltipMeasures(n,I,P,R)),null==D&&C||y.push({location:T,identity:O.createSelectionId(),value:D,selected:!1,tooltipInfo:I,color:F,categoryIdentity:A})}}}a&&a.applySelectionStateToData(y);var H=e.getObjectProperties(t);return{shapeMap:H.map,projectionEnum:H.projectionEnum,autoZoom:H.autoZoom,selectionZoom:H.selectionZoom,manualZoom:H.manualZoom,defaultShow:H.defaultShow,defaultColor:H.defaultColor,borderColor:H.borderColor,borderThickness:H.borderThickness,dataPoints:y,categoryName:u,dataAvailable:x,hasDynamicSeries:b,seriesCount:f}},e.createProjection=function(e){var t=d3.geo[e]();return e===p.orthographic&&t.clipAngle(90),t},e.adjustProjection=function(e,t,a,i,r,o){if(void 0===o&&(o=1),e.scale(1).translate([0,0]),t>0){var n=d3.geo.centroid(r);e.rotate(n.map((function(e,a){return a<t?-e:0})))}var s=d3.geo.path().projection(e).bounds(r),l=s[0][0],c=s[1][0],u=s[0][1],d=s[1][1],p=Math.abs(c-l),h=Math.abs(d-u),g=Math.min(a/p,i/h);g*=o,e.scale(g);var m=(a-g*(c+l))/2,y=(i-g*(d+u))/2;e.translate([m,y])},e.prototype.createGetColorFunction=function(){var e=this;return function(t){var a=e.matcher.getDataPointFromShape(t);return a&&null!=a.color?a.color:e.viewModel.defaultColor}},e.rotationAxes=function(e){switch(e){case p.albersUsa:return 0;case p.mercator:case p.equirectangular:return 1;case p.orthographic:return 2;default:return 0}},e.prototype.zoomOnClick=function(e){this.viewModel&&this.viewModel.selectionZoom&&(!e&&this.selectionZoomShape||e&&e.id&&this.selectionZoomShape&&this.selectionZoomShape.id&&this.selectionZoomShape.id===e.id?this.selectionZoomShape=null:this.selectionZoomShape=e,this.render(!1,!0))},e.prototype.resetToDefaultMap=function(){var t={type:s.shared,name:g.usaStates,content:void 0},a=u.Projection.albersUsa;this.hostServices.persistProperties([{objectName:"shape",selector:null,properties:{map:t,projectionEnum:a},validValues:{projectionEnum:e.validProjectionsForShapeMap(t)}}])},e.loadFeatureCollection=function(e){if(_.isEmpty(e.objects))return{features:[],type:"FeatureCollection"};for(var t in e.objects)return i.feature(e,e.objects[t])},e.prototype.featuresToZoomTo=function(e,t){var a=this;if(t&&this.selectionZoomShape)return{type:"FeatureCollection",features:[this.selectionZoomShape]};if(this.viewModel.autoZoom){var i={type:"FeatureCollection",features:e.features.filter((function(e){return!!a.getDataPointFromShape(e)}))};if(i.features.length>0)return i}return e},e.prototype.render=function(t,a){var i=this;if(!this.viewModel.shapeMap||!this.viewModel.shapeMap.content)return void(this.resetToDefault||(this.resetToDefault=!0,this.resetToDefaultMap()));this.resetToDefault=!1,this.mapG.transition(),this.shapes&&this.shapes.transition(),this.shapes&&this.shapes.exit()&&this.shapes.exit().transition(),this.manualZoomDisconnect(),this.viewModel.projectionEnum!==this.projectionEnum&&(this.projection=null),this.projectionEnum=this.viewModel.projectionEnum,this.renderLegend(),l.positionChartArea(this.svg,this.legend);var r=this.getMapViewport();this.svg.attr("width",r.width).attr("height",r.height);var o=JSON.parse(this.viewModel.shapeMap.content),n=e.loadFeatureCollection(o);this.matcher=new b.Matcher(n.features,this.viewModel.dataPoints,this.viewModel.categoryName);var s=this.featuresToZoomTo(n,a),c=this.projection&&!this.viewModel.autoZoom&&!this.viewModel.selectionZoom&&this.prevAutoZoom===this.viewModel.autoZoom&&this.prevManualZoom===this.viewModel.manualZoom&&this.prevSelectionZoom===this.viewModel.selectionZoom&&this.prevShapeMapName===this.viewModel.shapeMap.name&&this.prevMapViewportWidth===r.width&&this.prevMapViewportHeight===r.height;this.prevAutoZoom=this.viewModel.autoZoom,this.prevManualZoom=this.viewModel.manualZoom,this.prevSelectionZoom=this.viewModel.selectionZoom,this.prevShapeMapName=this.viewModel.shapeMap.name,this.prevMapViewportWidth=r.width,this.prevMapViewportHeight=r.height;var u;if(c)u=this.projection;else{u=e.createProjection(this.viewModel.projectionEnum);var d=e.rotationAxes(this.viewModel.projectionEnum),p=.9;e.adjustProjection(u,d,r.width,r.height,s,p)}var h=this.createGetColorFunction();if(this.mapG.style("stroke-width",this.viewModel.borderThickness/2).style("stroke",this.viewModel.borderColor).style("fill",this.viewModel.defaultColor),this.shapes=this.mapG.selectAll("path").data(this.visibleFeatures(n),this.shapeKeyFunction(n)),!this.projection||t)this.projection=u,this.path=d3.geo.path().projection(this.projection),this.shapes.enter().append("path"),this.shapes.attr("d",this.path).style("fill",h).attr("opacity",1),this.shapes.exit().remove(),this.manualZoomConnect();else{var g=600;if(this.path=d3.geo.path().projection(this.projection),this.shapes.enter().append("path").style("fill",h).attr("opacity",0).attr("d",this.path),this.shapes.transition().duration(g).style("fill",h).attr("opacity",1),this.shapes.exit().transition().duration(g).style("fill",h).attr("opacity",0).remove(),e.projectionsEqual(this.projection,u))this.projection=u,this.shapes.attr("d",this.path),this.shapes.exit().attr("d",this.path),this.manualZoomConnect();else{var m=this.projection,y=u;this.mapG.transition().duration(g).tween("projection transition",(function(){var e=m.scale&&d3.interpolate(m.scale(),y.scale()),t=m.translate&&d3.interpolate(m.translate(),y.translate()),a=m.rotate&&d3.interpolate(m.rotate(),y.rotate());return m=null,y=null,function(r){e&&i.projection.scale(e(r)),t&&i.projection.translate(t(r)),a&&i.projection.rotate(a(r)),i.shapes.attr("d",i.path),i.shapes.exit().attr("d",i.path)}})).each("end",(function(){return i.manualZoomConnect()}))}}if(this.tooltipsEnabled){var f=[];this.viewModel.dataAvailable||(f=this.matcher.shapeProps.map((function(e){return e.propName})).sort()),this.tooltipService.addTooltip(this.shapes,(function(e){if(i.viewModel.dataAvailable){if(!e.data)return;var t=i.matcher.getDataPointFromShape(e.data);return t?t.tooltipInfo:[{displayName:i.viewModel.categoryName,value:i.matcher.getShapeProp(e.data,i.matcher.shapePropName)}]}return f.map((function(t){return{displayName:t?t:"ID",value:i.matcher.getShapeProp(e.data,t)}}))}),(function(e){var t=e.data&&i.matcher.getDataPointFromShape(e.data);if(t)return t.identity}))}if(this.behavior&&this.interactivityService){var v={shapes:this.shapes,clearCatcher:this.clearCatcher};this.interactivityService.bind(this.viewModel.dataPoints,this.behavior,v)}},e.prototype.visibleFeatures=function(e){var t=this;return this.viewModel.defaultShow?e.features:e.features.filter((function(e){return!!t.getDataPointFromShape(e)}))},e.prototype.shapeKeyFunction=function(e){return e.features[0]&&null!=e.features[0].id?function(e){return e.id}:null},e.projectionsEqual=function(e,t){return!(e.scale&&!_.isEqual(e.scale(),t.scale()))&&(!(e.rotate&&!_.isEqual(e.rotate(),t.rotate()))&&!(e.translate&&!_.isEqual(e.translate(),t.translate())))},e.prototype.manualZoomConnect=function(){var e=this;if(!this.zoom&&this.viewModel.manualZoom){var t=4,a=16,i=this.projection.scale();this.zoom=d3.behavior.zoom().translate(this.projection.translate()).scale(i).scaleExtent([i/t,i*a]),this.zoom.on("zoom",(function(){e.projection.translate(e.zoom.translate()).scale(e.zoom.scale()),e.shapes.attr("d",e.path)})),this.svg.call(this.zoom)}},e.prototype.manualZoomDisconnect=function(){this.zoom&&this.zoom.on("zoom",null),this.zoom=null},e.prototype.getMapViewport=function(){var e=this.viewport,t=this.legend.getMargins(),a={width:e.width-t.width,height:e.height-t.height};return a},e.prototype.renderLegend=function(){var e=this.legendData;null!=e.position&&this.legend.changeOrientation(e.position);var t=1===e.dataPoints.length&&!e.grouped&&!this.viewModel.hasDynamicSeries;t&&(e.dataPoints=[]),this.legend.drawLegend(e,this.viewport)},e.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},e})();t.ShapeMap=v;var b;!(function(e){var t=(function(){function e(e,t,a){this.shapes=e,this.dataPoints=t,this.categoryName=a,this.shapeProps=this.countShapeProps(this.shapes),this.shapeProps=this.shapeProps.sort(this.getShapePropCompareFunction(this.categoryName)),this.buildMappings()}return e.prototype.getDataPointFromShape=function(e){var t=this.getShapeProp(e,this.shapePropName);return t||0===t?this.shapeToData[t]:null},e.prototype.getShapeFromDataPoint=function(e){var t=e.location;return this.dataToShape[t]},e.prototype.countShapeProps=function(e){for(var t={},a=0,i=e.length,r=0;r<i;r++){var o=e[r];o.hasOwnProperty("id")&&a++;for(var n in o.properties)t.hasOwnProperty(n)?t[n]++:t[n]=1}var s=[];for(var n in t)t.hasOwnProperty(n)&&s.push({propName:n,count:t[n]});return a>0&&s.push({propName:"",count:a}),s},e.prototype.getShapePropCompareFunction=function(e){return function(t,a){if(t.count!==a.count)return a.count-t.count;if(e){if(t.propName===e)return-1;if(a.propName===e)return 1;if(e=e.toLowerCase().trim(),t.propName.toLowerCase().trim()===e)return-1;if(a.propName.toLowerCase().trim()===e)return 1}return 0}},e.prototype.getShapeProp=function(e,t){return""===t?e.id:e.properties[t]},e.prototype.removeAtIndex=function(e,t){return e.slice(0,t).concat(e.slice(t+1))},e.prototype.buildMappings=function(){var e=0;e:for(var t=0;t<this.shapeProps.length;t++){var a=this.shapeProps[t];if(e>a.count)break e;for(var i=0,r={},o={},n=this.shapes,s=this.dataPoints,l=n.length-1;l>=0;l--){var c=n[l],u=this.getShapeProp(c,a.propName);if(u||0===u){t:for(var d=0;d<s.length;d++){var p=s[d],h=p.location;if(null!=h&&(h===u||h.toLowerCase&&u.toLowerCase&&h.toLowerCase()===u.toLowerCase())){r[h]=c,o[u]=p,n=this.removeAtIndex(n,l),s=this.removeAtIndex(s,d),i++;break t}}if(0===n.length||0===s.length){e=i,this.shapePropName=a.propName,this.shapeToData=o,this.dataToShape=r;break e}}}i>e&&(e=i,this.shapePropName=a.propName,this.shapeToData=o,this.dataToShape=r)}},e})();e.Matcher=t})(b=t.Matching||(t.Matching={}));var C}));var powerbi;!(function(e){var t;!(function(t){var a=jsCommon.PixelConverter,i=jsCommon.Color,r=e.data.SQExprBuilder;t.DefaultSliderMode=t.slicerMode.between;var o=150,n=9,s="Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif",l="date-slicer-range",c="date-slicer",u="date-slicer-head",d="date-slicer-slider",p="date-slicer-control",h="drag-resize-disabled";t.RangeSlicerSupportedModes=[t.slicerMode.after,t.slicerMode.before,t.slicerMode.between];var g=(function(){function g(e,t){this.isRendered=!1,e&&(this.hostServices=e.hostServices),this.rangeSlicerRenderer=t}return g.DefaultInputSettings=function(){return{textSize:9,fontColor:"#000000",background:null}},g.DefaultSliderSettings=function(){return{color:"#666666",show:!0}},Object.defineProperty(g.prototype,"activeMode",{get:function(){return this.data.mode||t.DefaultSliderMode},enumerable:!0,configurable:!0}),g.prototype.init=function(e,t){this.options=e,this.host=t},g.prototype.onModeChange=function(e){if(_.indexOf(t.RangeSlicerSupportedModes,e)>-1){if(!this.data)return;this.updateMode(e)}else t.SlicerUtil.clearSlicerFilter(this.hostServices,e)},g.prototype.onClear=function(){this.data.value=this.data.initialValue,this.data.state=0,this.updateProperties()},g.prototype.render=function(a){if(!_.isEmpty(a.dataView)){if(this.dataView=a.dataView,this.reader=e.data.createDataViewCategoricalReaderAdvanced(this.dataView),!this.isValid(this.reader))return void(this.isRendered&&(this.disableSlicer(),this.hostServices.setWarnings([new t.DateSlicerNoDataWarning])));this.isRendered&&this.enableSlicer();var i=this.data&&this.data.properties?this.data.properties.filter:null;this.data=this.converter(this.reader,i),this.isRendered||this.initControls(),this.rangeSlicerRenderer.setRange(this.data.value,this.data.formatter,this.start,this.end,null),this.range=this.rangeSlicerRenderer.createRange(this.data),this.updateInputControls(),this.updateSlider(this.activeMode),this.updateProperties()}},g.prototype.supportsOrientation=function(){return!1},g.prototype.enumerateObjectInstances=function(e){return"date"===e.objectName||"numericInputStyle"===e.objectName?this.rangeSlicerRenderer.enumerateObjectInstances(e,this.data):"slider"===e.objectName?[{selector:null,objectName:"Slider",properties:{show:this.data.sliderSettings.show,color:this.data.sliderSettings.color}}]:void 0},g.prototype.isValid=function(e){var a=e.columns.getMetadataColumns(t.slicerRoles.value);if(!_.isEmpty(a)){var i=a[0];if(i.aggregates&&null!=i.aggregates.min&&null!=i.aggregates.max)return!0}return!1},g.prototype.converter=function(a,r){var o={state:0,mode:null,formatter:null,identity:null,value:null,initialValue:null,bounds:null,properties:{},sliderSettings:g.DefaultSliderSettings(),inputStyle:g.DefaultInputSettings()},n=a.columns.getMetadataColumns(t.slicerRoles.value),s=n[0],l=s.aggregates,c=t.valueFormatter.getFormatString(s,t.slicerProps.formatString);o.formatter=t.valueFormatter.createDefaultFormatter(c),o.identity=s.expr,o.value={min:l.min,max:l.max},o.initialValue={min:l.min,max:l.max},o.bounds={min:o.value.min,max:o.value.max};var u=a.objects.getStaticObjects();if(u){o.properties.start=e.DataViewObjects.getValue(u,this.rangeSlicerRenderer.startProperty(),null),o.properties.end=e.DataViewObjects.getValue(u,this.rangeSlicerRenderer.endProperty(),null),o.properties.mode=e.DataViewObjects.getValue(u,t.slicerProps.data.mode,null);var d=this.rangeSlicerRenderer.inputStyleProperties();o.inputStyle.background=e.DataViewObjects.getFillColor(u,d.background,o.inputStyle.background),o.inputStyle.fontColor=e.DataViewObjects.getFillColor(u,d.fontColor,o.inputStyle.fontColor),o.inputStyle.textSize=e.DataViewObjects.getValue(u,d.textSize,o.inputStyle.textSize),o.sliderSettings.color=e.DataViewObjects.getFillColor(u,t.slicerProps.slider.color,o.sliderSettings.color),o.sliderSettings.show=e.DataViewObjects.getValue(u,t.slicerProps.slider.show,o.sliderSettings.show),null!==o.properties.start&&(o.state|=1,o.value.min=o.properties.start,o.properties.start<o.bounds.min&&(o.bounds.min=o.properties.start)),null!==o.properties.end&&(o.state=o.state|=2,o.value.max=o.properties.end,o.properties.end>o.bounds.max&&(o.bounds.max=o.properties.end)),o.value.min>o.bounds.max&&(o.value.max=o.bounds.max=o.value.min),o.value.max<o.bounds.min&&(o.value.min=o.bounds.min=o.value.max),null!=o.properties.mode&&(o.mode=o.properties.mode)}else o.state=0,o.properties.start=null,o.properties.end=null,o.properties.mode=null;var p=i.parseColorString(o.sliderSettings.color);return o.sliderSettings.activeColor=i.calculateHighlightColor(p,.5,.2),o.properties.filter=r,o.properties.bounds={min:o.bounds.min,max:o.bounds.max},o},g.prototype.initControls=function(){this.isRendered=!0,this.createHtmlControls(),this.updateMode(this.data.mode)},g.prototype.createHtmlControls=function(){this.container=InJs.DomFactory.div().addClass(c).appendTo(this.host),this.container.on("keyup keydown",(function(e){e.stopPropagation()}));var e=InJs.DomFactory.div().addClass(u).css(this.getFontStyles()).appendTo(this.container),t=InJs.DomFactory.div().addClass(l).appendTo(e);this.startContainer=InJs.DomFactory.div().addClass(p).appendTo(t),this.endContainer=InJs.DomFactory.div().addClass(p).appendTo(t),this.start=this.rangeSlicerRenderer.createInputElement(this.startContainer,0),this.end=this.rangeSlicerRenderer.createInputElement(this.endContainer,1),this.bindHandlersToInputElements(),this.sliderContainer=InJs.DomFactory.div().addClass(d).appendTo(this.container)},g.prototype.bindHandlersToInputElements=function(){var e=this;this.start.on("click touchend",(function(e){e.stopPropagation()})),this.end.on("click touchend",(function(e){e.stopPropagation()})),this.start.on("change",(function(t){var a=e.start.val();e.onRangeChange(a,0)})),this.start.on("focus",(function(t){e.start.val(e.rangeSlicerRenderer.formatValue(e.data.value.min,null)),e.start.select()})),this.start.on("blur",(function(t){e.start.val(e.rangeSlicerRenderer.formatValue(e.data.value.min,e.data.formatter))})),this.end.on("change",(function(t){var a=e.end.val();e.onRangeChange(a,1)})),this.end.on("focus",(function(t){e.end.val(e.rangeSlicerRenderer.formatValue(e.data.value.max,null)),e.end.select()})),this.end.on("blur",(function(t){e.end.val(e.rangeSlicerRenderer.formatValue(e.data.value.max,e.data.formatter))}))},g.prototype.onRangeChange=function(e,t){var a=this.rangeSlicerRenderer.parseInput(e);this.rangeSlicerRenderer.isInputValid(a,this.data.value,t)?this.updateRange({min:a,max:a},t):this.rangeSlicerRenderer.setRange(this.data.value,this.data.formatter,this.start,this.end,t)},g.prototype.onDestroy=function(){this.rangeSlicerRenderer.onDestroy&&this.rangeSlicerRenderer.onDestroy()},g.prototype.getFontStyles=function(){return e={},e["font-size"]=a.fromPointToPixel(n),e["font-family"]=s,e["font-weight"]=t.NewDataLabelUtils.LabelTextProperties.fontWeight,e;var e},g.prototype.updateSliderControl=function(){var e=this;if(this.slider&&this.mode===this.activeMode){var a=this.range.getScaledValue(),i=[];this.activeMode!==t.slicerMode.before&&i.push(a.min),this.activeMode!==t.slicerMode.after&&i.push(a.max),this.slider.set(i)}else this.slider&&(this.slider.destroy(),this.sliderContainer.empty()),this.mode=this.activeMode,this.sliderElement=InJs.DomFactory.div().attr(h,"true").appendTo(this.sliderContainer),noUiSlider.create(this.sliderElement.get(0),this.createSliderOptions()),this.slider=this.sliderElement.get(0).noUiSlider,this.slider.on("slide",(function(t,a,i){window.requestAnimationFrame((function(){var t=e.parseSliderValue(i);e.rangeSlicerRenderer.setRange(t,e.data.formatter,e.start,e.end,null)}))})),this.slider.on("change",(function(t,a,i){var r=e.sliderElement.hasClass("noUi-state-tap")?300:0;setTimeout((function(){var t=e.parseSliderValue(i),r=e.getChangeType(e.activeMode,a);e.updateRange(t,r)}),r)})),this.applyHandlesHoverState(this.sliderContainer.find(".noUi-handle"));this.sliderContainer.find(".noUi-connect").css({"background-color":this.data.sliderSettings.color}),this.sliderContainer.find(".noUi-handle").each((function(t,a){$(a).css({"background-color":$(a).is(":hover")?e.data.sliderSettings.activeColor:e.data.sliderSettings.color})}))},g.prototype.disableSlicer=function(){this.disableSlider(),1&this.data.state||(this.start.val(""),this.start.prop("disabled",!0),this.disableInput(this.start,this.data.inputStyle.fontColor)),2&this.data.state||(this.end.val(""),this.end.prop("disabled",!0),this.disableInput(this.end,this.data.inputStyle.fontColor)),this.data.bounds.min=this.data.bounds.max=null,this.updateProperties()},g.prototype.disableSlider=function(){if(this.sliderElement&&this.sliderElement.get(0).setAttribute("disabled","true"),this.sliderContainer.css("opacity","0.1"),this.slider){var e=[0,100];this.slider.set(e)}},g.prototype.enableSlicer=function(){this.sliderElement&&this.sliderElement.get(0).removeAttribute("disabled"),this.sliderContainer.css("opacity","1.0"),this.start.prop("disabled",!1),this.end.prop("disabled",!1)},g.prototype.applyHandlesHoverState=function(e){var t=this,a=!1,i=!1,r="#000000";e.on("mouseover",(function(){i=!0,a||$(event.target).css({"background-color":r})})).on("mouseout",(function(){i=!1,a||$(event.target).css({"background-color":t.data.sliderSettings.color})})).on("mousedown touchstart",(function(){a=!0;var e=event.target;$(e).css({"background-color":t.data.sliderSettings.activeColor});var i=function(){$(document).off("mouseup touchEnd",i),a&&(a=!1,$(e).css({"background-color":t.data.sliderSettings.color}))};$(document).on("mouseup touchEnd",i)})).on("mouseup touchend",(function(){a=!1;var e=event.target;$(e).css({"background-color":i?r:t.data.sliderSettings.color})}))},g.prototype.updateInputControls=function(){var e={"font-size":a.fromPointToPixel(this.data.inputStyle.textSize),"font-family":s,"font-weight":t.NewDataLabelUtils.LabelTextProperties.fontWeight};this.start.parent().css(e),this.end.parent().css(e);var i={color:this.data.inputStyle.fontColor,"background-color":this.data.inputStyle.background?this.data.inputStyle.background:""};this.start.css(i),this.end.css(i)},g.prototype.disableInput=function(e,t){var a=i.parseColorString(t);a.A=.3,e.css({color:i.rgbString(a)})},g.prototype.createSliderOptions=function(){var e,a,i=this.range.getScaledValue();switch(this.activeMode){case t.slicerMode.before:e=i.max,a="lower";break;case t.slicerMode.after:e=i.min,a="upper";break;case t.slicerMode.between:e=[i.min,i.max],a=!0}var r={connect:a,behaviour:"tap",range:{min:0,max:100},start:e};return r},g.prototype.parseSliderValue=function(e){var a=this.range.getScaledValue();switch(this.activeMode){case t.slicerMode.before:a.max=e;break;case t.slicerMode.after:a.min=e;break;case t.slicerMode.between:a.min=e[0],a.max=e[1]}return this.range.setScaledValue(a),this.range.getValue()},g.prototype.updateSlider=function(e){e===t.slicerMode.after?(this.end.prop("disabled",!0),this.disableInput(this.end,this.data.inputStyle.fontColor),this.start.prop("disabled",!1)):e===t.slicerMode.before?(this.end.prop("disabled",!1),this.start.prop("disabled",!0),this.disableInput(this.start,this.data.inputStyle.fontColor)):(this.end.prop("disabled",!1),this.start.prop("disabled",!1)),this.container.width()<=o||!this.data.sliderSettings.show?this.sliderContainer.hide():(this.sliderContainer.show(),this.updateSliderControl()),this.rangeSlicerRenderer.areEqual(this.data.bounds.min,this.data.bounds.max)&&this.disableSlider()},g.prototype.updateMode=function(e){var a=this.data.mode;null==e&&(e=t.DefaultSliderMode),this.data.mode=e,e===t.slicerMode.before?(a===t.slicerMode.after&&1&this.data.state&&(this.data.value.max=this.data.value.min,this.data.value.min=this.data.bounds.min,this.data.state=2),this.data.state&=-2):e===t.slicerMode.after&&(a===t.slicerMode.before&&2&this.data.state&&(this.data.value.min=this.data.value.max,this.data.state=1),this.data.state&=-3),this.updateProperties()},g.prototype.updateProperties=function(){var e={min:this.data.value.min,max:this.data.value.max},t={min:this.data.bounds.min,max:this.data.bounds.max},a={start:1&this.data.state?this.data.value.min:null,end:2&this.data.state?this.data.value.max:null,mode:this.data.mode,filter:e,bounds:t};if(this.requireToUpdate(a)){this.data.properties.filter=e,this.data.properties.bounds=t;var i=this.createPersistProperties(a,this.data.identity,this.data.state);this.hostServices.persistProperties(i),this.hostServices.onSelect({visualObjects:[]})}},g.prototype.getChangeType=function(e,a){var i=null;switch(e){case t.slicerMode.after:i=0;break;case t.slicerMode.before:i=1;break;default:i=0===a?0:1}return i},g.prototype.createPersistProperties=function(e,a,i){var r=null==e.mode?t.DefaultSliderMode:e.mode,o=this.createFilter(e,r,i,a),n={merge:[{objectName:"general",selector:void 0,properties:{}}],replace:[{objectName:"data",selector:void 0,properties:{}}],remove:[{objectName:"data",selector:void 0,properties:{}},{objectName:"general",selector:void 0,properties:{}
}]};return null!==o?n.merge[0].properties[t.slicerProps.general.filter.propertyName]=o:n.remove[1].properties[t.slicerProps.general.filter.propertyName]=!0,1&i&&null!==e.start?n.replace[0].properties[this.rangeSlicerRenderer.startProperty().propertyName]=e.start:null==e.start&&(n.remove[0].properties[this.rangeSlicerRenderer.startProperty().propertyName]=!0),2&i&&null!==e.end?n.replace[0].properties[this.rangeSlicerRenderer.endProperty().propertyName]=e.end:null==e.end&&(n.remove[0].properties[this.rangeSlicerRenderer.endProperty().propertyName]=!0),null!=e.mode&&(n.replace[0].properties[t.slicerProps.data.mode.propertyName]=e.mode),n},g.prototype.updateRange=function(e,t){null==t?(this.data.value.min=e.min,this.data.value.max=e.max):0===t?(this.data.value.min=e.min,null!==this.data.bounds.min&&this.rangeSlicerRenderer.areEqual(this.data.value.min,this.data.bounds.min)?this.data.state&=-2:this.data.state|=1):1===t&&(this.data.value.max=e.max,null!==this.data.bounds.max&&this.rangeSlicerRenderer.areEqual(this.data.value.max,this.data.bounds.max)?this.data.state&=-3:this.data.state|=2),this.updateProperties()},g.prototype.createFilter=function(a,i,o,n){var s=null,l=a.filter,c=a.bounds,u=null,d=this.rangeSlicerRenderer.filterExpr(l),p=this.rangeSlicerRenderer.comparisonKind();if(null===c.min&&null==c.max)if(1&o&&2&o){var h=r.compare(p.lower,n,d.lower),g=r.compare(p.upper,n,d.upper);s=r.and(h,g)}else 1&o?s=r.compare(p.lower,n,d.lower):2&o&&(s=r.compare(p.upper,n,d.upper));else if(i===t.slicerMode.between&&(1&o||2&o)){var h=r.compare(p.lower,n,d.lower),g=r.compare(p.upper,n,d.upper);s=r.and(h,g)}else i===t.slicerMode.after&&1&o?s=r.compare(p.lower,n,d.lower):i===t.slicerMode.before&&2&o&&(s=r.compare(p.upper,n,d.upper));return null!==s&&(u=e.data.SemanticFilter.fromSQExpr(s)),u},g.prototype.requireToUpdate=function(e){return(null!==this.data.properties.filter||0!==this.data.state||e.mode!==this.data.properties.mode&&(e.mode!==t.DefaultSliderMode||null!==this.data.properties.mode))&&!(null!=this.data.properties.filter&&e.mode===this.data.properties.mode&&this.rangeSlicerRenderer.areEqual(e.start,this.data.properties.start)&&this.rangeSlicerRenderer.areEqual(e.end,this.data.properties.end)&&this.rangeSlicerRenderer.areEqual(e.filter.min,this.data.properties.filter.min)&&this.rangeSlicerRenderer.areEqual(e.filter.max,this.data.properties.filter.max)&&this.rangeSlicerRenderer.areEqual(e.bounds.min,this.data.properties.bounds.min)&&this.rangeSlicerRenderer.areEqual(e.bounds.max,this.data.properties.bounds.max))},g})();t.RangeSlicer=g})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=e.data.SQExprBuilder,i="date-slicer-input",r="drag-resize-disabled",o=(function(){function o(a){a&&(this.preventVirtualKeyboardOnTheFirstTap=a.preventVirtualKeyboardOnTheFirstTap);var i=e.common;this.culture=Globalize.culture(i?i.cultureInfo:""),this.inputElements=[],this.eventsHelper=new t.SlicerUtil.EventsHelper}return o.prototype.createRange=function(e){return new t.DateRange(e.bounds.min,e.bounds.max,e.value.min,e.value.max)},o.prototype.areEqual=function(e,a){return t.DateUtil.isEqual(e,a)},o.prototype.startProperty=function(){return t.slicerProps.data.startDate},o.prototype.endProperty=function(){return t.slicerProps.data.endDate},o.prototype.formatValue=function(e,t){return Globalize.format(e,"d",this.culture)},o.prototype.inputStyleProperties=function(){return{background:t.slicerProps.date.background,fontColor:t.slicerProps.date.fontColor,textSize:t.slicerProps.date.textSize}},o.prototype.parseInput=function(e){return Globalize.parseDate(e,null,this.culture)},o.prototype.isInputValid=function(e,t,a){return!(null==e||0===a&&e>t.max||1===a&&e<t.min)},o.prototype.setRange=function(e,t,a,i,r){null==r?(a.val(Globalize.format(e.min,"d",this.culture)),i.val(Globalize.format(e.max,"d",this.culture))):0===r?a.val(Globalize.format(e.min,"d",this.culture)):1===r&&i.val(Globalize.format(e.max,"d",this.culture))},o.prototype.enumerateObjectInstances=function(e,t){if("date"===e.objectName&&t&&t.inputStyle)return[{selector:null,objectName:"date",properties:{fontColor:t.inputStyle.fontColor,background:t.inputStyle.background,textSize:t.inputStyle.textSize}}]},o.prototype.createInputElement=function(e,t){var a=this,o=InJs.DomFactory.textBox().attr("type","text").attr(r,"true").prop("readonly",!!this.preventVirtualKeyboardOnTheFirstTap).addClass(i).appendTo(e);o.datepicker({showOtherMonths:!0,selectOtherMonths:!0,changeMonth:!0,changeYear:!0,nextText:"",prevText:"",firstDay:this.culture.calendar.firstDay,dayNamesMin:this.culture.calendar.days.namesAbbr,dateFormat:this.culture.calendar.patterns.d.replace("yyyy","yy").toLowerCase(),monthNamesShort:this.culture.calendar.months.names,onClose:function(){o.prop("readonly",!!a.preventVirtualKeyboardOnTheFirstTap)}}),o.on("click",(function(e){a.preventVirtualKeyboardOnTheFirstTap&&o.is("[readonly]")&&(o.prop("readonly",!1),o.blur()),o.datepicker("show")})),this.preventVirtualKeyboardOnTheFirstTap&&o.on("touchstart",(function(e){o.is("[readonly]")||o.is(":focus")||o.focus()}));var n=o.datepicker("widget");return o.datepicker("option","beforeShow",(function(){a.unregisterPopupHideEvents=a.eventsHelper.onPopupHideEvent((function(e){a.onPopupHideEvent(e)})),a.fixPosition(n,o,1e3)})),this.inputElements.push(o),o},o.prototype.onPopupHideEvent=function(e){if("resize"===e.type)return void this.hideDatepicker();var t=$(e.target);t.hasClass("hasDatepicker")||t.hasClass("ui-datepicker")||t.hasClass("ui-icon")||$(t).closest(".ui-datepicker").length||this.hideDatepicker()},o.prototype.hideDatepicker=function(){this.unbindPopupHideEventHandlers();for(var e=0,t=this.inputElements;e<t.length;e++){var a=t[e];a.datepicker("widget").is(":visible")&&a.datepicker("hide").blur()}},o.prototype.onDestroy=function(){this.hideDatepicker()},o.prototype.unbindPopupHideEventHandlers=function(){this.unregisterPopupHideEvents&&this.unregisterPopupHideEvents()},o.prototype.fixPosition=function(e,a,i){var r=this;setTimeout((function(){e.visible(!1,!1,"horizontal")||e.visible(!1,!1,"vertical")?t.SlicerUtil.fixWidgetPosition(e,a,null,!0):i>0&&r.fixPosition(e,a,i-20)}),20)},o.prototype.filterExpr=function(e){var t=new Date(e.min.getTime());t.setHours(0,0,0,0);var i=new Date(e.max.getFullYear(),e.max.getMonth(),e.max.getDate()+1),r=a.dateTime(t),o=a.dateTime(i);return{lower:r,upper:o}},o.prototype.comparisonKind=function(){return{lower:2,upper:3}},o})();t.DateSlicer=o})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=e.data.SQExprBuilder,i="date-slicer-input",r="drag-resize-disabled";t.NumericSlicerOptions=e.createEnumType([{value:t.slicerMode.between,displayName:function(e){return e.get("Visual_SliderMode_Between")}},{value:t.slicerMode.before,displayName:function(e){return e.get("Visual_SliderMode_LessThanEqualLabel")}},{value:t.slicerMode.after,displayName:function(e){return e.get("Visual_SliderMode_GreaterThanEqualLabel")}},{value:t.slicerMode.basic,displayName:function(e){return e.get("Visual_SliderMode_Basic")}},{value:t.slicerMode.dropdown,displayName:function(e){return e.get("Visual_SliderMode_Dropdown")}}]);var o=(function(){function e(){}return e.prototype.createRange=function(e){return new t.NumericRange(e.bounds.min,e.bounds.max,e.value.min,e.value.max)},e.prototype.areEqual=function(e,t){return e===t},e.prototype.startProperty=function(){return t.slicerProps.data.numericStart},e.prototype.endProperty=function(){return t.slicerProps.data.numericEnd},e.prototype.formatValue=function(e,t){return t?t.format(e):e.toString()},e.prototype.inputStyleProperties=function(){return{background:t.slicerProps.numericInputStyle.background,fontColor:t.slicerProps.numericInputStyle.fontColor,textSize:t.slicerProps.numericInputStyle.textSize}},e.prototype.parseInput=function(e){return parseFloat(e)},e.prototype.isInputValid=function(e,t,a){return!(!$.isNumeric(e)||0===a&&e>t.max||1===a&&e<t.min)},e.prototype.setRange=function(e,t,a,i,r){null==r?(a.val(t.format(e.min)),i.val(t.format(e.max))):0===r?a.val(t.format(e.min)):1===r&&i.val(t.format(e.max))},e.prototype.createInputElement=function(e,t){var a=InJs.DomFactory.textBox().attr("type","text").attr(r,"true").addClass(i).appendTo(e);return a},e.prototype.enumerateObjectInstances=function(e,t){if("numericInputStyle"===e.objectName&&t&&t.inputStyle)return[{selector:null,objectName:"numericInputStyle",properties:{fontColor:t.inputStyle.fontColor,background:t.inputStyle.background,textSize:t.inputStyle.textSize}}]},e.prototype.filterExpr=function(e){var t=a.double(e.min),i=a.double(e.max);return{lower:t,upper:i}},e.prototype.comparisonKind=function(){return{lower:2,upper:4}},e})();t.NumericSlicer=o})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=t.SlicerUtil.DOMHelper,i=e.visuals.controls.SlicerHeader,r="slicer-header-wrapper",o="slicer-container",n="slicer-content-wrapper",s="full-screen",l=(function(){function l(e){this.enableInFocusRenderers=!1,this.preventVirtualKeyboardOnTheFirstTap=!1,this.isInFocus=!1,this.hasSearchableData=!1,e&&(this.behavior=e.behavior,this.enableInFocusRenderers=e.enableInFocusRenderers,this.preventVirtualKeyboardOnTheFirstTap=e.preventVirtualKeyboardOnTheFirstTap),this.domHelper=new a,this.activeMode=t.slicerMode.basic,this.slicerOrientation=0}return l.Modes=function(){return l.modes||(l.modes=t.slicerMode.type.members([t.slicerMode.basic,t.slicerMode.dropdown,t.slicerMode.before,t.slicerMode.after,t.slicerMode.between])),l.modes},l.customizeQuery=function(e){var a=e.dataViewMappings[0];if(a&&a.metadata){var i=l.getSlicerMode(a.metadata.objects);if((null===i||l.isRangeSlicerMode(i))&&l.isCategoryItemDateTimeOrNumeric(a)){var r=a.categorical.categories.for.in.items;a.categorical.categories=null,a.categorical.values={bind:{to:{role:t.slicerRoles.value,aggregates:{min:!0,max:!0},items:r}}}}}},l.isCrossFilteredByDefault=function(e){var t=e.dataViewMappings[0];if(!t||!t.metadata)return!1;var a=l.getSlicerMode(t.metadata.objects);return null==a?l.isCategoryItemDateTimeOrNumeric(t):l.isRangeSlicerMode(a)},l.getSortableRoles=function(e){var a=e.dataViewMappings[0];if(a&&a.metadata&&l.isCategoryItemDateTimeOrNumeric(a)){var i=l.getSlicerMode(a.metadata.objects);if(null===i||l.isRangeSlicerMode(i)||i===t.slicerMode.relative)return null}return[t.slicerRoles.value]},l.getSlicerMode=function(a){var i=null;return a&&(i=e.DataViewObjects.getValue(a,t.slicerProps.data.mode,i)),i},l.isCategoryItemDateTimeOrNumeric=function(e){if(e&&e.categorical&&e.categorical.categories&&e.metadata){var t=e.categorical.categories.for.in.items,a=l.getSlicerMode(e.metadata.objects);if(!_.isEmpty(t)){var i=t[0];if(i.type&&i.type.dateTime)return!0;if(i.type&&i.type.numeric&&(l.NumericSlicerEnabled||l.isRangeSlicerMode(a)))return!0}}return!1},l.isRangeSlicerMode=function(e){return e===t.slicerMode.before||e===t.slicerMode.between||e===t.slicerMode.after},l.prototype.init=function(e){this.initOptions=e,this.element=e.element,this.currentViewport=e.viewport,this.hostServices=e.host,this.waitingForData=!1,this.container=InJs.DomFactory.div().addClass(o).appendTo(this.element),this.headerContainer=InJs.DomFactory.div().appendTo(this.container).addClass(r),this.slicerContainer=InJs.DomFactory.div().appendTo(this.container).addClass(n),this.initializeSlicerRenderer()},l.prototype.destroy=function(){this.slicerRenderer.onDestroy&&this.slicerRenderer.onDestroy()},l.prototype.update=function(t){this.isInFocus=!!t.isInFocus,t.type&e.VisualUpdateType.Resize&&this.resizing(t.viewport),(!t.type||t.type&e.VisualUpdateType.Data)&&this.dataChanged(t.dataViews,t.operationKind)},l.prototype.dataChanged=function(t,a){if(!_.isEmpty(t)){var i=this.dataView;this.dataView=t[0];var r=a!==e.VisualDataChangeOperationKind.Append&&!e.DataViewAnalysis.hasSameCategoryIdentity(i,this.dataView);this.render(r,!0)}},l.prototype.resizing=function(e){this.currentViewport=e,this.render(!1)},l.prototype.enumerateObjectInstances=function(e){if(this.dataView)switch(e.objectName){case"header":case"modeSelection":return this.slicerHeader.enumerateObjectInstances(e);case"general":var t=this.slicerHeader.enumerateObjectInstances(e);if(this.slicerRenderer&&this.slicerRenderer.supportsOrientation()){var a=this.data?this.data.orientation:0;t[0].properties.orientation=a}return t;default:return this.slicerRenderer.enumerateObjectInstances(e)}},l.prototype.loadMoreData=function(){var e=this.dataView;if(e){var t=e.metadata;!this.waitingForData&&t&&t.segment&&(this.hostServices.loadMoreData(),this.waitingForData=!0)}},l.prototype.onClearSelection=function(){this.interactivityService&&(this.interactivityService.clearSelection(),this.render(!1))},l.converter=function(a){if(a){var i,r=null,o=0,n=!1,s=t.slicerMode.type.members([t.slicerMode.basic,t.slicerMode.dropdown]),c=1,u=!1;if(a.metadata&&a.metadata.objects){var d=a.metadata.objects;o=e.DataViewObjects.getValue(d,t.slicerProps.general.orientation,o),r=e.DataViewObjects.getValue(d,t.slicerProps.data.mode,r)}if(a.metadata&&a.metadata.columns){var p=_.filter(a.metadata.columns,(function(e){return e.roles&&null!=e.roles[t.slicerRoles.value]}));if(!_.isEmpty(p)){var h=p[0];if(u=h.type.text===!0,i=h.displayName,n=h.type.numeric===!0,h.type.dateTime===!0){r=null===r?t.slicerMode.between:r,s=l.Modes(),l.RelativeDateSlicerEnabled&&(s=t.slicerMode.type.members());var g=h.aggregates&&null!=h.aggregates.min&&null!=h.aggregates.max;!g&&this.isRangeSlicerMode(r)&&(c=2)}else if(n)if(l.NumericSlicerEnabled){r=null===r?t.slicerMode.between:r,s=l.Modes();var g=h.aggregates&&null!=h.aggregates.min&&null!=h.aggregates.max;!g&&this.isRangeSlicerMode(r)&&(c=2)}else r=null===r?t.slicerMode.basic:r;else r=null===r||this.isRangeSlicerMode(r)?t.slicerMode.basic:r}}return{orientation:o,categorySourceName:i,isCategorySourceNumeric:n,mode:r,switchMode:c,hasSearchableData:u,activeOptions:s}}},l.prototype.render=function(e,t){this.updateViewport(),this.previousData=this.data,this.data=l.converter(this.dataView),this.data&&(this.hasSearchableData=this.data.hasSearchableData),this.updateSlicerRendererIfNeeded(),this.renderSlicerHeader(this.interactivityService),this.slicerRenderer.render({dataView:this.dataView,viewport:this.currentViewport,resetScrollbarPosition:e,hasSearchableData:this.hasSearchableData}),t&&(this.waitingForData=!1)},l.prototype.updateSlicerRendererIfNeeded=function(){if(this.enableInFocusRenderers){var e=this.container.hasClass(s)!==this.isInFocus;if(e)return this.isInFocus?this.container.addClass(s):this.container.removeClass(s),void this.initializeSlicerRenderer()}if(this.data){var a=this.data.mode||t.slicerMode.basic;if(this.activeMode!==a||l.isRangeSlicerMode(this.activeMode)&&this.previousData&&this.previousData.isCategorySourceNumeric!==this.data.isCategorySourceNumeric)this.activeMode=a,this.initializeSlicerRenderer();else{var i=this.data.orientation||0;this.slicerOrientation!==i&&(this.slicerOrientation=i,this.initializeSlicerRenderer())}}},l.prototype.updateViewport=function(){var e=(t={height:this.currentViewport.height},t["min-width"]=this.currentViewport.width,t);this.container.css(e);var t},l.prototype.renderSlicerHeader=function(t){var a=this;if(this.dataView){var r=e.data.createDataViewCategoricalReader(this.dataView);if(!this.slicerHeader){var o={onClear:function(){a.slicerRenderer&&a.slicerRenderer.onClear()},onChange:function(e){a.slicerRenderer&&a.slicerRenderer.onModeChange(e)},host:this.headerContainer,text:this.data.categorySourceName,visibilityState:this.data.switchMode,selectedValue:this.activeMode,hoverContainer:this.element,enableInFocusRenderers:this.enableInFocusRenderers,slicerModeOptions:this.slicerActiveOptions()},n={localize:this.hostServices.getLocalizedString,getViewMode:this.hostServices.getViewMode};this.slicerHeader=new i(o,n)}this.slicerHeader.update(r,{text:this.data.categorySourceName,selectedValue:this.activeMode,visibilityState:this.data.switchMode,isInFocus:this.isInFocus,slicerModeOptions:this.slicerActiveOptions()})}},l.prototype.slicerActiveOptions=function(){if(this.data.isCategorySourceNumeric&&l.NumericSlicerEnabled){for(var e=[],a=0,i=this.data.activeOptions;a<i.length;a++){var r=i[a];e.push(t.NumericSlicerOptions.members([r.value])[0])}return e}return this.data.activeOptions},l.prototype.initializeSlicerRenderer=function(){switch(this.slicerRenderer&&this.slicerRenderer.onDestroy&&this.slicerRenderer.onDestroy(),this.slicerContainer.empty(),this.activeMode){case t.slicerMode.basic:return void this.initializeBasicSlicer();case t.slicerMode.dropdown:return void this.initializeDropdownSlicer();case t.slicerMode.relative:return void this.initilizeRelativeSlicer();case t.slicerMode.between:case t.slicerMode.before:case t.slicerMode.after:return void this.initializeRangeSlicer();default:return void this.initializeVerticalSlicer()}},l.prototype.initializeBasicSlicer=function(){if(this.enableInFocusRenderers&&this.isInFocus)this.initializeInFocusVerticalSlicer();else switch(this.slicerOrientation){case 1:this.initializeHorizontalSlicer();break;case 0:this.initializeVerticalSlicer()}},l.prototype.initializeInFocusVerticalSlicer=function(){var e=this.slicerRenderer=new t.VerticalSlicerRenderer(new t.VerticalSlicerRenderer.CheckListSlicerStrategy,{hostServices:this.hostServices,behavior:this.behavior}),a=this.createInitOptions();this.interactivityService=e.init(a,this.slicerContainer)},l.prototype.initializeVerticalSlicer=function(){var e=this.slicerRenderer=new t.VerticalSlicerRenderer(new t.VerticalSlicerRenderer.CheckBoxSlicerStrategy,{hostServices:this.hostServices,behavior:this.behavior}),a=this.createInitOptions();this.interactivityService=e.init(a,this.slicerContainer)},l.prototype.initializeRangeSlicer=function(){if(this.data.isCategorySourceNumeric){var e=new t.NumericSlicer;this.slicerRenderer=new t.RangeSlicer({hostServices:this.hostServices,behavior:this.behavior},e)}else{var e=new t.DateSlicer({preventVirtualKeyboardOnTheFirstTap:this.preventVirtualKeyboardOnTheFirstTap});this.slicerRenderer=new t.RangeSlicer({hostServices:this.hostServices,behavior:this.behavior},e)}var a=this.createInitOptions();this.interactivityService=this.slicerRenderer.init(a,this.slicerContainer)},l.prototype.initializeHorizontalSlicer=function(){var e=this.slicerRenderer=new t.HorizontalSlicerRenderer({hostServices:this.hostServices,behavior:this.behavior}),a=this.createInitOptions();this.interactivityService=e.init(a,this.slicerContainer)},l.prototype.initilizeRelativeSlicer=function(){var e=this.slicerRenderer=new t.RelativeSlicer({hostServices:this.hostServices,behavior:this.behavior}),a=this.createInitOptions();this.interactivityService=e.init(a,this.slicerContainer)},l.prototype.initializeDropdownSlicer=function(){if(this.enableInFocusRenderers&&this.isInFocus)this.initializeInFocusVerticalSlicer();else{var e={hostServices:this.hostServices,behavior:this.behavior},a=new t.VerticalSlicerRenderer(new t.VerticalSlicerRenderer.CheckBoxSlicerStrategy,e);this.slicerRenderer=new t.DropdownSlicerRenderer(a,e);var i=this.createInitOptions();this.interactivityService=this.slicerRenderer.init(i,this.slicerContainer)}},l.prototype.createInitOptions=function(){var e=this;return{visualInitOptions:this.initOptions,loadMoreData:function(){return e.loadMoreData()}}},l})();l.NumericSlicerEnabled=!1,l.RelativeDateSlicerEnabled=!1,t.Slicer=l})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=jsCommon.PixelConverter,i=10,r=(function(){function r(e,a){this.verticalSlicerRenderer=e,this.popup=$("<div />").addClass("slicer-dropdown-popup"),this.content=$("<div />").addClass("slicer-dropdown-content"),this.hostServices=a.hostServices,this.popup.addClass("visual"),$("body").append(this.popup),this.popup.append(this.content),this.requireUpdate=!0,this.eventsHelper=new t.SlicerUtil.EventsHelper}return r.prototype.onClear=function(){this.verticalSlicerRenderer.onClear()},r.prototype.onModeChange=function(e){this.popup.remove(),this.verticalSlicerRenderer.onModeChange(e)},r.prototype.supportsOrientation=function(){return!1},r.prototype.enumerateObjectInstances=function(e){return this.verticalSlicerRenderer.enumerateObjectInstances(e)},r.prototype.init=function(e,t){return this.container=t,this.interactivityService=this.verticalSlicerRenderer.init(e,this.content),this.interactivityService},r.prototype.onDestroy=function(){this.unbindPopupHideEventHandlers(),this.popup.remove()},r.prototype.render=function(e){this.options=e,this.requireUpdate=!0,this.renderMenu(),this.popup.is(":hidden")||this.showPopup()},r.prototype.renderMenu=function(){var i=this;this.menu||(this.menu=InJs.DomFactory.div(),this.menu.addClass("slicer-dropdown-menu"),this.container.append(this.menu),this.menu.click((function(e){i.onRenderMenuClick(e)}))),this.menu.empty();var r=InJs.DomFactory.div();if(r.addClass("slicer-restatement"),this.menu.append(r),this.settings=this.defaultRestatementSetting(),this.options.dataView.metadata&&this.options.dataView.metadata.objects){var o=this.options.dataView.metadata.objects;this.settings.selectAllEnabled=e.DataViewObjects.getValue(o,t.slicerProps.selection.selectAllCheckboxEnabled,this.settings.selectAllEnabled),this.settings.background=e.DataViewObjects.getFillColor(o,t.slicerProps.items.background,this.settings.background),this.settings.fontColor=e.DataViewObjects.getFillColor(o,t.slicerProps.items.fontColor,this.settings.fontColor),this.settings.textSize=e.DataViewObjects.getValue(o,t.slicerProps.items.textSize,this.settings.textSize)}r.text(this.getRestatementText()),this.menu.css({"background-color":this.settings.background,color:this.settings.fontColor,"font-size":a.fromPointToPixel(this.settings.textSize)}),this.popup.css({"background-color":this.settings.background}),this.icon=$("<i />").addClass("dropdown-chevron"),this.icon.addClass("powervisuals-glyph"),this.icon.addClass("chevron-down"),this.icon.appendTo(this.menu)},r.prototype.onRenderMenuClick=function(e){return e.stopPropagation(),this.popup.is(":hidden")?void this.showPopup():void this.hidePopup()},r.prototype.showPopup=function(){var e=this;window.requestAnimationFrame((function(){if(e.popup){var a=e.menu.width()+i;e.popup.css({width:a}),e.icon.removeClass("chevron-down"),e.icon.addClass("chevron-up"),t.SlicerUtil.fixWidgetPosition(e.popup,e.menu,null,!0),e.requireUpdate&&(e.verticalSlicerRenderer.renderVerticalSlicer(e.data,e.options),e.requireUpdate=!1),e.unregisterPopupHideEvents=e.eventsHelper.onPopupHideEvent((function(t){e.onPopupHideEvent(t)})),e.popup.show()}}))},r.prototype.hidePopup=function(){this.popup&&(this.popup.hide(),this.icon.removeClass("chevron-up"),this.icon.addClass("chevron-down"),this.unbindPopupHideEventHandlers())},r.prototype.onPopupHideEvent=function(e){if("resize"===e.type)return void this.hidePopup();var t=$(e.target);t.parents(".slicer-dropdown-popup").length||t.is(".slicer-dropdown-menu")||t.parents(".slicer-dropdown-menu").length||this.hidePopup()},r.prototype.unbindPopupHideEventHandlers=function(){this.unregisterPopupHideEvents&&this.unregisterPopupHideEvents()},r.prototype.defaultRestatementSetting=function(){return{textSize:10,fontColor:"#000000",background:null,selectAllEnabled:!1}},r.prototype.getRestatementText=function(){return this.data=this.verticalSlicerRenderer.converter(this.options.dataView),this.data.restatement},r})();t.DropdownSlicerRenderer=r})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=e.visuals.controls.SelectMenu,i=e.data.SQExprBuilder,r=e.data.SQExpr,o=e.data.SemanticFilter,n=jsCommon.PixelConverter,s="relative-slicer",l="selection-container",c="range-menu",u="period-menu",d="slicer-select-menu",p="duration-input",h="restatement-container",g="restatement",m="drag-resize-disabled",y="-",f=".ui-selectmenu-button",v=(function(){function v(e){this.isRendered=!1,this.hostServices=e.hostServices}return v.DefaultInputSettings=function(){return{textSize:9,fontColor:"#000000",background:null}},v.prototype.init=function(e,a){this.options=e,this.host=a,this.isRendered=!1,this.setDefaultProperties(),this.eventsHelper=new t.SlicerUtil.EventsHelper},v.prototype.onDestroy=function(){this.unregisterSelectMenuCloseEvents&&this.unregisterSelectMenuCloseEvents()},v.prototype.supportsOrientation=function(){return!1},v.prototype.onClear=function(){this.data.range=t.relativeSlicerRelativeQualifier.last,this.data.period=t.relativeSlicerPeriod.none,this.data.duration=1,this.setDefaultProperties(),this.renderInternal(),t.SlicerUtil.clearSlicerFilter(this.hostServices,this.data.mode)},v.prototype.enumerateObjectInstances=function(e){return"dateRange"===e.objectName?[{selector:null,objectName:"dateRange",properties:{includeToday:this.data.includeToday}}]:"numericInputStyle"===e.objectName?[{selector:null,objectName:"numericInputStyle",properties:{fontColor:this.data.inputStyle.fontColor,background:this.data.inputStyle.background,textSize:this.data.inputStyle.textSize}}]:void 0},v.prototype.onModeChange=function(e){t.SlicerUtil.clearSlicerFilter(this.hostServices,e)},v.converter=function(a){var i={mode:t.slicerMode.relative,range:t.relativeSlicerRelativeQualifier.last,period:t.relativeSlicerPeriod.none,duration:1,includeToday:!0,identity:null,inputStyle:v.DefaultInputSettings()},r=a.columns.getMetadataColumns(t.slicerRoles.value),o=r[0];i.identity=o.expr;var n=a.objects.getStaticObjects();return n&&(i.range=e.DataViewObjects.getValue(n,t.slicerProps.data.relativeRange,i.range),i.period=e.DataViewObjects.getValue(n,t.slicerProps.data.relativePeriod,i.period),i.duration=e.DataViewObjects.getValue(n,t.slicerProps.data.relativeDuration,i.duration),i.includeToday=e.DataViewObjects.getValue(n,t.slicerProps.dateRange.includeToday,i.includeToday),i.inputStyle.background=e.DataViewObjects.getFillColor(n,t.slicerProps.numericInputStyle.background,i.inputStyle.background),i.inputStyle.fontColor=e.DataViewObjects.getFillColor(n,t.slicerProps.numericInputStyle.fontColor,i.inputStyle.fontColor),i.inputStyle.textSize=e.DataViewObjects.getValue(n,t.slicerProps.numericInputStyle.textSize,i.inputStyle.textSize)),i},v.prototype.render=function(t){var a=this;if(!_.isEmpty(t.dataView)){var i=e.data.createDataViewCategoricalReaderAdvanced(t.dataView);this.data=v.converter(i),this.isRendered||(this.initControls(),this.unregisterSelectMenuCloseEvents=this.eventsHelper.onPopupHideEvent((function(e){a.onSelectMenuClose(e)}))),this.updateProperties(this.data.range,this.data.period),this.renderInternal()}},v.prototype.onSelectMenuClose=function(e){this.rangeSelectMenu.close(),this.periodSelectMenu.close()},v.prototype.initControls=function(){var e=this;this.isRendered=!0,this.container=InJs.DomFactory.div().addClass(s).appendTo(this.host),this.selectionContainer=InJs.DomFactory.div().addClass(l).appendTo(this.container),this.selectionContainer.on("keyup keydown",(function(e){e.stopPropagation()})),this.rangeSelectMenuContainer=InJs.DomFactory.div().addClass(c).appendTo(this.selectionContainer);var i={onChange:function(t){e.rangeChanged(t)},container:this.rangeSelectMenuContainer,options:this.getSelectMenuOptions(t.relativeSlicerRelativeQualifier.type.members()),className:d,selectedValue:"Select"};this.rangeSelectMenu=new a(i),this.rangeSelectMenu.update({selectedValue:t.relativeSlicerRelativeQualifier.last}),this.durationInput=InJs.DomFactory.textBox().attr("type","text").attr(m,"true").addClass(p).appendTo(this.selectionContainer),this.durationInput.val("1"),this.durationInput.on("change",(function(t){e.durationChanged()})),this.periodSelectMenuContainer=InJs.DomFactory.div().addClass(u).appendTo(this.selectionContainer);var r={onChange:function(t){e.periodChanged(t)},container:this.periodSelectMenuContainer,options:this.getSelectMenuOptions(t.relativeSlicerPeriod.type.members()),className:d};this.periodSelectMenu=new a(r),this.periodSelectMenu.disableOption(t.relativeSlicerPeriod.none),this.restatementContainer=InJs.DomFactory.div().addClass(h).appendTo(this.container),this.restatementIcon=$("<i />").addClass("restatement-icon").addClass("pbi-glyph-calendar").appendTo(this.restatementContainer),this.restatement=InJs.DomFactory.div().addClass(g).appendTo(this.restatementContainer),this.restatement.text(this.hostServices.getLocalizedString("ExportData_NoAppliedFiltersText"))},v.prototype.rangeChanged=function(e){this.data.range=e,this.data.range===t.relativeSlicerRelativeQualifier.current?(this.durationInput.val(y),this.durationInput.prop("disabled",!0),this.data.duration=0):(this.durationInput.val()===y&&(this.durationInput.val("1"),this.data.duration=1),this.durationInput.prop("disabled",!1)),this.updateProperties(this.data.range,this.data.period),this.renderInternal()},v.prototype.periodChanged=function(e){this.updateProperties(this.data.range,e),this.renderInternal()},v.prototype.durationChanged=function(){this.updateProperties(this.data.range,this.data.period),this.renderInternal()},v.prototype.renderInternal=function(){var e=n.fromPointToPixel(this.data.inputStyle.textSize),a={"font-size":e,color:this.data.inputStyle.fontColor,"background-color":this.data.inputStyle.background?this.data.inputStyle.background:""};this.durationInput.css(a),a["font-size"]=e-1;var i=this.rangeSelectMenuContainer.find(f);i.css(a),i.attr("title",this.data.range);var r=this.periodSelectMenuContainer.find(f);r.css(a),r.attr("title",this.data.period),this.rangeSelectMenu.update({selectedValue:this.data.range}),this.periodSelectMenu.update({selectedValue:this.data.period}),this.periodSelectMenu.disableOption(t.relativeSlicerPeriod.none),0===this.data.duration?(this.durationInput.val(y),this.durationInput.prop("disabled",!0),this.durationInput.attr("title",y)):(this.durationInput.prop("disabled",!1),this.durationInput.val(Math.abs(this.data.duration).toString()),this.durationInput.attr("title",Math.abs(this.data.duration).toString())),this.setRestatement()},v.prototype.updateProperties=function(e,a){this.updateDuration(),this.data.range=e,this.data.period=a,this.setDateTimeProperties(this.data.period);var i=null;this.data.period!==t.relativeSlicerPeriod.none&&(i=this.createFilter()),r.equals(this.filterExpr,i)||(this.filterExpr=i,this.createAndPersistProperties(o.fromSQExpr(i)),this.setRestatement())},v.prototype.updateDuration=function(){this.data.range===t.relativeSlicerRelativeQualifier.current?this.data.duration=0:this.isDurationValid()&&(this.data.duration=parseInt(this.durationInput.val(),10),this.data.range===t.relativeSlicerRelativeQualifier.last&&(this.data.duration=-this.data.duration))},v.prototype.isDurationValid=function(){var e=parseInt(this.durationInput.val(),10);return!(!$.isNumeric(e)||e<=0)},v.prototype.createFilter=function(){var e=null;switch(this.data.range){case t.relativeSlicerRelativeQualifier.current:var a=i.dateSpan(this.timeUnit,i.now());e=i.compare(0,this.data.identity,a);break;case t.relativeSlicerRelativeQualifier.last:if(this.calendarPeriod)e=this.getCalendarPeriodSQExpr(this.data.duration,-1,this.timeUnit);else{var r=this.data.includeToday?i.now():i.dateAdd(0,-1,i.now()),o=i.dateSpan(0,r),n=i.dateSpan(0,i.dateAdd(this.timeUnit,this.data.duration,i.dateAdd(0,1,r)));e=i.between(this.data.identity,n,o)}break;case t.relativeSlicerRelativeQualifier.next:if(this.calendarPeriod)e=this.getCalendarPeriodSQExpr(1,this.data.duration,this.timeUnit);else{var s=this.data.includeToday?i.now():i.dateAdd(0,1,i.now()),n=i.dateSpan(0,s),o=i.dateSpan(0,i.dateAdd(this.timeUnit,this.data.duration,i.dateAdd(0,-1,s)));e=i.between(this.data.identity,n,o)}}return e},v.prototype.getCalendarPeriodSQExpr=function(e,t,a){var r=i.dateSpan(a,i.dateAdd(a,e,i.now())),o=i.dateSpan(a,i.dateAdd(a,t,i.now()));return i.between(this.data.identity,r,o)},v.prototype.setDateTimeProperties=function(a){switch(a){case t.relativeSlicerPeriod.days:this.timeUnit=0,this.dateTimeUnit=e.DateTimeUnit.Day,this.calendarPeriod=!0;
break;case t.relativeSlicerPeriod.weeks:this.timeUnit=1,this.dateTimeUnit=e.DateTimeUnit.Week,this.calendarPeriod=!1;break;case t.relativeSlicerPeriod.calendarWeeks:this.timeUnit=1,this.dateTimeUnit=e.DateTimeUnit.Week,this.calendarPeriod=!0;break;case t.relativeSlicerPeriod.months:this.timeUnit=2,this.dateTimeUnit=e.DateTimeUnit.Month,this.calendarPeriod=!1;break;case t.relativeSlicerPeriod.calendarMonths:this.timeUnit=2,this.dateTimeUnit=e.DateTimeUnit.Month,this.calendarPeriod=!0;break;case t.relativeSlicerPeriod.years:this.timeUnit=3,this.dateTimeUnit=e.DateTimeUnit.Year,this.calendarPeriod=!1;break;case t.relativeSlicerPeriod.calendarYears:this.timeUnit=3,this.dateTimeUnit=e.DateTimeUnit.Year,this.calendarPeriod=!0}},v.prototype.createAndPersistProperties=function(e){var a={merge:[],replace:[],remove:[]},i={objectName:"general",selector:null,properties:{}};null!==e?(i.properties[t.slicerProps.general.filter.propertyName]=e,a.merge.push(i)):(i.properties[t.slicerProps.general.filter.propertyName]=!0,a.remove.push(i));var r={objectName:"data",selector:null,properties:{}};null!=this.data.mode&&(r.properties[t.slicerProps.data.mode.propertyName]=this.data.mode),null!=this.data.range&&(r.properties[t.slicerProps.data.relativeRange.propertyName]=this.data.range),null!=this.data.duration&&(r.properties[t.slicerProps.data.relativeDuration.propertyName]=this.data.duration),null!=this.data.period&&(r.properties[t.slicerProps.data.relativePeriod.propertyName]=this.data.period),a.replace.push(r);var o={objectName:"dateRange",selector:null,properties:{}};null!=this.data.includeToday&&(o.properties[t.slicerProps.dateRange.includeToday.propertyName]=this.data.includeToday),a.replace.push(o),this.hostServices.persistProperties(a),this.hostServices.onSelect({visualObjects:[]})},v.prototype.setDefaultProperties=function(){this.calendarPeriod=!1,this.dateTimeUnit=e.DateTimeUnit.Day,this.timeUnit=0,this.filterExpr=null},v.prototype.setRestatement=function(){if(this.data.period===t.relativeSlicerPeriod.none)return void this.restatement.text(this.hostServices.getLocalizedString("ExportData_NoAppliedFiltersText"));var e=new Date,a=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),i={date:a,duration:this.data.duration,includeToday:this.data.includeToday,dateTimeUnit:this.dateTimeUnit,calendarPeriod:this.calendarPeriod,relativeQualifier:this.data.range},r=t.RelativeSlicerDateRangeHelper.getDateRange(i),o=Globalize.format(r.min,"d",this.hostServices.locale())+" - "+Globalize.format(r.max,"d",this.hostServices.locale());this.restatement.text(o)},v.prototype.getSelectMenuOptions=function(e){for(var t=[],a=0,i=e;a<i.length;a++){var r=i[a],o=r.displayName({get:this.hostServices.getLocalizedString});t.push({text:o,value:r.value})}return t},v})();t.RelativeSlicer=v})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"NoMapLocation"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="NoMapLocationMessage",a="NoMapLocationKey",i="NoMapLocationValue",r={message:e.get(t),title:e.get(a),detail:e.get(i)};return r},e})();e.NoMapLocationWarning=t;var a=(function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"NoValidGeotaggedCategory"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="NoValidGeotaggedCategoryMessage",a="NoValidGeotaggedCategoryKey",i="NoValidGeotaggedCategoryValue",r={message:e.get(t),title:e.get(a),detail:e.get(i)};return r},e})();e.FilledMapWithoutValidGeotagCategoryWarning=a;var i=(function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"GeometryCulledWarning"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="GeometryCulledWarningMessage",a="GeometryCulledWarningKey",i="GeometryCulledWarningVal",r={message:e.get(t),title:e.get(a),detail:e.get(i)};return r},e})();e.GeometryCulledWarning=i;var r=(function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"NegativeValuesNotSupported"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="VisualWarning_NegativeValues",a={message:e.get(t),title:"",detail:""};return a},e})();e.NegativeValuesNotSupportedWarning=r;var o=(function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"AllNegativeValuesNotSupported"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="VisualWarning_AllNegativeValues",a={message:e.get(t),title:"",detail:""};return a},e})();e.AllNegativeValuesWarning=o;var n=(function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"NaNNotSupported"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="VisualWarning_NanValues",a={message:e.get(t),title:"",detail:""};return a},e})();e.NaNNotSupportedWarning=n;var s=(function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"InfinityValuesNotSupported"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="VisualWarning_InfinityValues",a={message:e.get(t),title:"",detail:""};return a},e})();e.InfinityValuesNotSupportedWarning=s;var l=(function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"ValuesOutOfRange"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="VisualWarning_VisualizationOutOfRange",a={message:e.get(t),title:"",detail:""};return a},e})();e.ValuesOutOfRangeWarning=l;var c=(function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"ZeroValuesNotSupported"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="VisualWarning_ZeroValues",a={message:e.get(t),title:"",detail:""};return a},e})();e.ZeroValueWarning=c;var u=(function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"VisualKPIDataMissing"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="Visual_KPI_DataMissing",a={message:e.get(t),title:"",detail:""};return a},e})();e.VisualKPIDataMissingWarning=u;var d=(function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"ScriptVisualNotRefreshed"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="ScriptVisualRefreshWarningMessage",a="ScriptVisualRefreshWarningValue",i={message:e.get(t),title:e.get(t),detail:e.get(a)};return i},e})();e.ScriptVisualRefreshWarning=d;var p=(function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"DateSlicerNoData"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="VisualWarning_DateSlicerNoData",a={message:e.get(t),title:"",detail:""};return a},e})();e.DateSlicerNoDataWarning=p;var h=(function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"DataLabelsNotRendered"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="DataLabelsNotRenderedMessage",a="DataLabelsNotRenderedValue",i={message:e.get(t),title:e.get(t),detail:e.get(a)};return i},e})();e.DataLabelsNotRenderedWarning=h;var g=(function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return e.code},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="NoIdentityExprMessage",a="NoIdentityExprValue",i={message:e.get(t),title:e.get(t),detail:e.get(a)};return i},e})();g.code="NoIdentityExprWarning",e.NoIdentityExprWarning=g;var m=(function(){function e(){}return e.prototype.add=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.warnings||(this.warnings=[]),(a=this.warnings).push.apply(a,e),this;var a},e.prototype.addForVisualObject=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];this.visualObjectWarnings||(this.visualObjectWarnings={});var i=this.visualObjectWarnings[e]=this.visualObjectWarnings[e]||[];return i.push.apply(i,t),this},e.prototype.complete=function(){if(!_.isEmpty(this.warnings)||null!=this.visualObjectWarnings)return{warnings:this.warnings,visualObjectWarnings:this.visualObjectWarnings}},e})();e.VisualWarningBuilder=m})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a=jsCommon.Lazy,i=e.visuals.controls.TouchUtils,r=jsCommon.CssConstants.createClassAndSelector,o=r("tooltip-container"),n=r("tooltip-content-container"),s=r("arrow"),l=r("tooltip-header"),c=r("tooltip-row"),u=r("tooltip-color-cell"),d=r("tooltip-title-cell"),p=r("tooltip-value-cell"),h=(function(){function e(e,t){this.isTooltipVisible=!1,this.options=t,this.rootElement=e}return e.prototype.isVisible=function(){return this.isTooltipVisible},e.prototype.setTestScreenSize=function(e,t){this.customScreenWidth=e,this.customScreenHeight=t},e.prototype.show=function(e,t){this.isTooltipVisible=!0,this.tooltipContainer||(this.tooltipContainer=this.createTooltipContainer(this.rootElement)),e&&this.setTooltipContent(e),this.tooltipContainer.style("display","").transition().duration(0).style("opacity",this.options.opacity),t&&this.setPosition(t)},e.prototype.move=function(e,t){this.tooltipContainer||(this.tooltipContainer=this.createTooltipContainer(this.rootElement)),e&&this.setTooltipContent(e),this.setPosition(t)},e.prototype.hide=function(){this.isTooltipVisible&&(this.isTooltipVisible=!1,this.tooltipContainer.transition().duration(this.options.animationDuration).style("opacity",0).each("end",(function(){this.style.display="none"})))},e.prototype.createTooltipContainer=function(e){var t=d3.select(e).append("div").attr("class",o.class);return t.append("div").attr("class",s.class),t.append("div").attr("class",n.class),t.style("display","none"),t},e.prototype.setTooltipContent=function(e){if(!_.isEqual(e,this.currentContent)){this.currentContent=e;var t=c.selector,a=this.tooltipContainer.select(n.selector);if(a.selectAll(l.selector).remove(),a.selectAll(c.selector).remove(),0!==e.length){e[0].header&&a.append("div").attr("class",l.class).text(e[0].header);var i=a.selectAll(t).data(e),r=i.enter().append("div").attr("class",c.class);if(_.any(e,(function(e){return e.color}))){var o=r.filter((function(e){return e.color})).append("div").attr("class",u.class);o.append("svg").attr({width:"100%",height:"15px"}).append("circle").attr({cx:"5",cy:"8",r:"5"}).style({fill:function(e){return e.color},"fill-opacity":function(e){return null!=e.opacity?e.opacity:1}})}var s=r.append("div").attr("class",d.class),h=r.append("div").attr("class",p.class);s.text((function(e){return e.displayName})),h.text((function(e){return e.value}))}}},e.prototype.getTooltipContainerBounds=function(){var e;return"none"===this.tooltipContainer.style("display")?(this.tooltipContainer.style("display",""),e=this.tooltipContainer.node().getBoundingClientRect(),this.tooltipContainer.style("display","none")):e=this.tooltipContainer.node().getBoundingClientRect(),e},e.prototype.getTooltipPosition=function(e,t){var a=this.getTooltipContainerBounds(),r=e.width>>1,o=0,n=0,s=new i.Point(e.left+r,e.top+r),l=7;return 0===t?(o+=3*l+r,n-=2*l+r):1===t?(o-=2*l+a.width+r,n-=2*l+r):3===t?(o+=3*l+r,n-=a.height-2*l+r):2===t&&(o-=2*l+a.width+r,n-=a.height-2*l+r),s.offset(o,n),s},e.prototype.setPosition=function(e){var t=this.getClickedScreenArea(e),a=this.getTooltipPosition(e,t);this.setTooltipContainerClass(t),this.tooltipContainer.style({left:a.x+"px",top:a.y+"px"}),this.setArrowPosition(t)},e.prototype.setTooltipContainerClass=function(e){var t;switch(e){case 0:case 3:t="left";break;case 1:case 2:t="right"}this.tooltipContainer.attr("class",o.class).classed(t,!0)},e.prototype.setArrowPosition=function(e){var t,a=this.getArrowElement();t=0===e?"top left":1===e?"top right":3===e?"bottom left":"bottom right",a.attr("class","arrow").classed(t,!0)},e.prototype.getArrowElement=function(){return this.tooltipContainer.select(s.selector)},e.prototype.getClickedScreenArea=function(e){var t=this.customScreenWidth||window.innerWidth,a=this.customScreenHeight||window.innerHeight,r=e.width/2,o=new i.Point(e.left+r,e.top+r),n=t/2,s=a/2;return o.x<n&&o.y<s?0:o.x>=n&&o.y<s?1:o.x<n&&o.y>=s?3:o.x>=n&&o.y>=s?2:void 0},e})();t.TooltipContainer=h;var g=(function(){function e(t){this.tooltipOptions=t,t||(this.tooltipOptions=e.DefaultTooltipOptions)}return e.prototype.isTooltipComponentVisible=function(){return this.tooltipContainer&&this.tooltipContainer.isVisible()},e.prototype.show=function(e,t){this.ensureTooltipContainer(),this.tooltipContainer.show(e,this.convertRect(t))},e.prototype.move=function(e,t){this.ensureTooltipContainer(),this.tooltipContainer.move(e,this.convertRect(t))},e.prototype.hide=function(){this.ensureTooltipContainer(),this.tooltipContainer.hide()},e.prototype.convertRect=function(e){return new t.Rect(e.x,e.y,e.width,e.height)},e.prototype.ensureTooltipContainer=function(){if(!this.tooltipContainer){var t=$(e.parentContainerSelector).get(0);this.tooltipContainer=new h(t,this.tooltipOptions)}},e})();g.DefaultTooltipOptions={opacity:1,animationDuration:250,offsetX:10,offsetY:10},g.parentContainerSelector="body",g.highlightedValueDisplayNameResorceKey="Tooltip_HighlightedValueDisplayName",t.ToolTipComponent=g;var m;!(function(e){function a(a,i,n,s){if(e.ShowTooltips){var y=d3.select(g.parentContainerSelector).node();a.on("mouseover.tooltip",(function(){var a=d3.event.target,o=d3.select(a).datum();if(!S&&d(d3.event)){b=t.getCoordinates(y,!0);var n=t.getCoordinates(a,!0),s={data:o,coordinates:b,elementCoordinates:n,context:a,isTouchEvent:!1};u();var l=e.ToolTipInstance.isTooltipComponentVisible()?16:e.tooltipMouseOverDelay;v=r(s,i,l)}})),a.on("mouseout.tooltip",(function(){S||(u(),v=o()),s&&s()})),a.on("mousemove.tooltip",(function(){var e=d3.event.target,a=d3.select(e).datum();if(!S&&d(d3.event)){b=t.getCoordinates(y,!0);var r=t.getCoordinates(e,!0),o={data:a,coordinates:b,elementCoordinates:r,context:e,isTouchEvent:!1};l(o,i,n)}}));var C=p(),x=h(),w="pointerdown"===C||"MSPointerDown"===C;f||(m(C),f=!0),a.on(C,(function(){var a=d3.event.target,o=d3.select(a).datum();c();var n=t.getCoordinates(y,w),s=t.getCoordinates(a,w),l={data:o,coordinates:n,elementCoordinates:s,context:a,isTouchEvent:!0};u(),v=r(l,i,e.tooltipTouchDelay)})),a.on(x,(function(){u(),S&&clearTimeout(S),S=setTimeout((function(){S=0}),e.handleTouchDelay)}))}}function r(e,t,a){return setTimeout((function(){return s(e,t)}),a)}function o(){return setTimeout((function(){return c()}),e.tooltipMouseOutDelay)}function n(e){g.localizationOptions=e}function s(t,a){var i=C||a(t);if(!_.isEmpty(i)){var r=b||t.coordinates,o=y(r[0],r[1],t.isTouchEvent);e.ToolTipInstance.show(i,o)}}function l(t,a,i){C=void 0,i&&(C=a(t));var r=y(t.coordinates[0],t.coordinates[1],t.isTouchEvent);e.ToolTipInstance.move(C,r)}function c(){e.ToolTipInstance.hide()}function u(){v&&clearTimeout(v)}function d(e){var t=!0,a=e;if(void 0!==a.buttons){var i=0!==a.buttons;t=!i}return t}function p(){var e="touchstart";return window.PointerEvent?e="pointerdown":window.MSPointerEvent&&(e="MSPointerDown"),e}function h(){var e="touchend";return window.PointerEvent?e="pointerup":window.MSPointerEvent&&(e="MSPointerUp"),e}function m(t){d3.select(g.parentContainerSelector).on(t,(function(t,a){e.ToolTipInstance.hide()}))}function y(e,t,a){var r=0,o=e,n=t;if(a){r=12;var s=r/2;o=Math.max(e-s,0),n=Math.max(t-s,0)}return new i.Rectangle(o,n,r,r)}var f=!1;e.ShowTooltips=!0,e.ToolTipInstance=new g,e.tooltipMouseOverDelay=350,e.tooltipMouseOutDelay=500,e.tooltipTouchDelay=350,e.handleTouchDelay=1e3;var v,b,C,S=0;e.addTooltip=a,e.setLocalizedStrings=n})(m=t.TooltipManager||(t.TooltipManager={}));var y;!(function(e){function a(e,t,a,o,n,s,l,c,u,d){var p,h=[],g=void 0;l=0|l;var m=t?t.categories:n;if(m&&m.length>0)if(m.length>1){for(var y=[],f=0,v=m.length;f<v;f++)y.push(m[f].source);p={value:a,metadata:y}}else p={value:a,metadata:[m[0].source]};if(t&&t.values){if(p&&p.metadata[0]===t.values.source||(g=t.values.source),t.values.length>0){var b=t.values[l],C=!!(b&&b.source&&b.source.isAutoGeneratedColumn);C||h.push({value:o,highlightedValue:u,metadata:b})}var S=i(d,c);null!=S&&h.push(S)}if(s)for(var f=0,x=s.length;f<x;f++){var w=s[f];p&&p.metadata[0]===w.metadata.source||h.push({value:w.value,metadata:w.metadata})}var P=r(e,p,g,h);return P}function i(e,t){return e?{value:e.values[t],metadata:{source:e.source,values:[]}}:null}function r(e,t,a,i){var r=[];if(t)if(t.metadata.length>1){for(var o="",s=0,l=t.metadata.length;s<l;s++)0!==s&&(o+="/"),o+=t.metadata[s].displayName;var c=n(t.metadata[0],e,t.value);r.push({displayName:o,value:c})}else{var c=n(t.metadata[0],e,t.value);r.push({displayName:t.metadata[0].displayName,value:c})}if(a){var u=void 0;if(i.length>0){var d=i[0].metadata.source;u=n(a,e,d.groupName)}r.push({displayName:a.displayName,value:u})}for(var s=0;s<i.length;s++){var p=i[s];if(p&&p.metadata){var h=p.metadata.source,m=p.value,y=p.highlightedValue;if(m||0===m){var f=n(h,e,m);r.push({displayName:h.displayName,value:f})}if(y||0===y){var v=n(h,e,y),o=g.localizationOptions.highlightedValueDisplayName;r.push({displayName:o,value:v})}}}return r}function o(e,a,i,r){var o=e.data.getAllValuesForRole("Tooltips",i,r),n=e.data.getAllValueDisplayNamesForRole("Tooltips"),s=e.objects.getAllValueFormatStringsForRole("Tooltips",r);if(o)for(var l=0;l<o.length;l++)null!=o[l]&&a.push({displayName:n[l],value:t.valueFormatter.format(o[l],s[l])})}function n(e,a,i){var r=s(e,a);return t.valueFormatter.format(i,r)}function s(e,a){if(e){var i=t.valueFormatter.getFormatString(e,a,!0);return i||e.format}return null}e.createTooltipInfo=a,e.createGradientToolTipData=i,e.addTooltipMeasures=o})(y=t.TooltipBuilder||(t.TooltipBuilder={}));var f=(function(){function e(e){this.reader=e,this.items=[],this.columns=[]}return e.prototype.withColumnValueByIndex=function(e,t,a,i){if(!e)return this;var r=e.values[t];return this.withColumnValue(e.source,r,a,i)},e.prototype.withColumnValue=function(e,t,i,r){return e&&(i||null!=t)?_.contains(this.columns,e.queryName)?this:(this.columns.push(e.queryName),this.items.push(new a(function(){return{displayName:e.displayName,value:r(t,e)}})),this):this},e.prototype.withValue=function(e,t){return this.items.push(new a(function(){return{displayName:e,value:t}})),this},e.prototype.withAllValuesForRole=function(e,t,a,i,r){var o=this.reader.getAllValueColumnsForRole(e,a);if(_.isEmpty(o))return this;for(var n=0,s=o;n<s.length;n++){var l=s[n];this.withColumnValueByIndex(l,t,i,r)}return this},e.prototype.getTooltipItems=function(){return _.map(this.items,(function(e){return e.getValue()}))},e})();t.CategoricalLazyTooltipBuilder=f})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function a(t){return void 0===t&&(t=new e.DataColorPalette),{titleText:{color:{value:"#333"}},subTitleText:{color:{value:"#919191"}},colorPalette:{foreground:{value:"#333"},background:{value:"#fff"},tableAccent:{value:t.getColorByIndex(0).value},dataColors:t},labelText:{color:{value:"#333"},fontSize:"11px"},isHighContrast:!1}}t.create=a})(t=e.visualStyles||(e.visualStyles={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a,i=jsCommon.CssConstants.createClassAndSelector,r=jsCommon.EnumExtensions,o=t.labelStyle.labelStyleFlagEnum;!(function(e){e.animationDurationMs=500,e.ease="cubic-in-out"})(a||(a={}));var n=(function(){function i(e){e&&(this.sliceWidthRatio=e.sliceWidthRatio,this.animator=e.animator,this.isScrollable=!!e.isScrollable&&e.isScrollable,this.disableGeometricCulling=!!e.disableGeometricCulling&&e.disableGeometricCulling,this.behavior=e.behavior,this.tooltipsEnabled=e.tooltipsEnabled,this.donutChartLabelPercentEnabled=e.donutChartLabelPercentEnabled,e.smallViewPortProperties&&(this.maxHeightToScaleDonutLegend=e.smallViewPortProperties.maxHeightToScaleDonutLegend),this.customFontFamily=e.customFontFamily),null==this.sliceWidthRatio&&(this.sliceWidthRatio=i.defaultSliceWidthRatio)}return i.converter=function(e,t,a,r,o,n,s){void 0===s&&(s=!0);var c=new l.DonutChartConverter(e,t,a,s);c.convert();var u=d3.layout.pie().sort(null).value((function(e){return e.percentage}));n&&(n.applySelectionStateToData(c.dataPoints),n.applySelectionStateToData(c.legendData.dataPoints));var d=!o&&r?i.cullDataByViewport(c.dataPoints,c.maxValue,r):c.dataPoints;return{dataPointsToDeprecate:d,dataPoints:u(d),unCulledDataPoints:c.dataPoints,dataPointsToEnumerate:c.legendData.dataPoints,legendData:c.legendData,hasHighlights:c.hasHighlights,highlightsOverflow:c.highlightsOverflow,dataLabelsSettings:c.dataLabelsSettings,legendObjectProperties:c.legendObjectProperties,maxValue:c.maxValue,visibleGeometryCulled:c.dataPoints.length!==d.length,hasNegativeValues:c.hasNegativeValues,allValuesAreNegative:c.allValuesAreNegative}},i.prototype.init=function(e){this.options=e;var a=e.element;a.empty(),this.parentViewport=e.viewport,this.currentViewport={height:e.viewport.height,width:e.viewport.width},this.formatter=t.valueFormatter.format;var r=t.Legend.getDefaultLegendData();if(this.data={dataPointsToDeprecate:[],dataPointsToEnumerate:[],dataPoints:[],unCulledDataPoints:[],legendData:r,hasHighlights:!1,highlightsOverflow:!1,dataLabelsSettings:t.dataLabelUtils.getDefaultDonutLabelSettings(),hasNegativeValues:!1,allValuesAreNegative:!1},this.drilled=!1,this.allowDrilldown=!1,this.style=e.style,this.colors=this.style.colorPalette.dataColors,this.radius=0,this.isInteractive=e.interactivity&&e.interactivity.isInteractiveLegend,this.behavior&&(this.interactivityService=t.createInteractivityService(e.host)),this.legend=t.createLegend(a,e.interactivity&&e.interactivity.isInteractiveLegend,this.interactivityService,this.isScrollable),this.hostService=e.host,this.tooltipService=t.createTooltipService(e.host),this.isInteractive){var o=this.legendContainer=d3.select(a.get(0)).append("div").classed(i.InteractiveLegendClassName,!0);this.interactivityState={interactiveLegend:new s(this,o,this.colors,e),valueToAngleFactor:0,sliceAngles:[],currentRotate:0,interactiveChosenSliceFinishedSetting:!1,lastChosenInteractiveSliceIndex:0,totalDragAngleDifference:0,currentIndexDrag:0,previousIndexDrag:0,previousDragAngle:0,donutCenter:{x:0,y:0}}}this.svg=d3.select(a.get(0)).append("svg").style("position","absolute").classed(i.ClassName,!0),this.behavior&&(this.clearCatcher=t.appendClearCatcher(this.svg)),this.mainGraphicsContext=this.svg.append("g"),this.mainGraphicsContext.append("g").classed("slices",!0),this.labelGraphicsContext=this.svg.append("g").classed(t.NewDataLabelUtils.labelGraphicsContextClass.class,!0),this.pie=d3.layout.pie().sort(null).value((function(e){return e.percentage}))},i.prototype.update=function(a){var r=a.viewport;this.parentViewport=r;var o=this.dataViews=a.dataViews;if(o&&o.length>0&&o[0].categorical){var n=o[0].metadata,s=void 0;if(n){var l=n.objects;l&&(s=e.DataViewObjects.getFillColor(l,t.donutChartProps.dataPoint.defaultColor))}this.data=i.converter(o[0],this.style,s,this.currentViewport,this.disableGeometricCulling,this.interactivityService,this.tooltipsEnabled),this.data.defaultDataPointColor=s,this.options.interactivity&&this.options.interactivity.isInteractiveLegend||this.renderLegend()}else this.data={dataPointsToDeprecate:[],dataPointsToEnumerate:[],dataPoints:[],unCulledDataPoints:[],legendData:t.Legend.getDefaultLegendData(),hasHighlights:!1,highlightsOverflow:!1,dataLabelsSettings:t.dataLabelUtils.getDefaultDonutLabelSettings(),hasNegativeValues:!1,allValuesAreNegative:!1};if(this.initViewportDependantProperties(),this.initDonutProperties(),this.updateInternal(this.data,a.suppressAnimations),this.hasSetData=!0,o){var c=t.getInvalidValueWarnings(o,!1,!1,!1,["Tooltips"]);this.data.allValuesAreNegative?c.push(new t.AllNegativeValuesWarning):this.data.hasNegativeValues&&c.push(new t.NegativeValuesNotSupportedWarning),this.hostService.setWarnings(c)}},i.prototype.onDataChanged=function(e){this.update({dataViews:e.dataViews,suppressAnimations:e.suppressAnimations,viewport:this.currentViewport})},i.prototype.onResizing=function(e){this.update({dataViews:this.dataViews,suppressAnimations:!0,viewport:e})},i.prototype.enumerateObjectInstances=function(e){var a=new t.ObjectEnumerationBuilder,i=this.data&&this.data.dataLabelsSettings?this.data.dataLabelsSettings:t.dataLabelUtils.getDefaultDonutLabelSettings();switch(e.objectName){case"legend":this.enumerateLegend(a);break;case"dataPoint":this.enumerateDataPoints(a);break;case"labels":var r={enumeration:a,dataLabelsSettings:i,show:!0,displayUnits:!0,precision:!0,fontSize:!0,labelStyle:!0,donutChartLabelPercentEnabled:this.donutChartLabelPercentEnabled};t.dataLabelUtils.enumerateDataLabels(r)}return a.complete()},i.prototype.enumerateDataPoints=function(e){var a=this.data;if(a)for(var i=a.dataPointsToEnumerate,r=i.length,o=0;o<r;o++){var n=i[o];e.pushInstance({objectName:"dataPoint",displayName:n.label,selector:t.ColorHelper.normalizeSelector(n.identity.getSelector()),properties:{fill:{solid:{color:n.color}}}})}},i.prototype.enumerateLegend=function(e){var a=this.data;if(a){var i=this.data.legendData;t.Legend.enumerate({enumeration:e,legendData:i,customFontFamily:this.customFontFamily})}},i.prototype.setInteractiveChosenSlice=function(e){var i=this;if(0!==this.interactivityState.sliceAngles.length){this.interactivityState.lastChosenInteractiveSliceIndex=e,this.interactivityState.interactiveChosenSliceFinishedSetting=!1;var r=this.currentViewport,o=e%this.data.dataPoints.length,n=this.interactivityState.sliceAngles[o];this.svg.select("g").transition().duration(a.animationDurationMs).ease(a.ease).attr("transform",t.SVGUtil.translateAndRotate(r.width/2,r.height/2,0,0,n)).each("end",(function(){i.interactivityState.interactiveChosenSliceFinishedSetting=!0})),this.interactivityState.currentRotate=n,this.interactivityState.interactiveLegend.updateLegend(o),this.svg.selectAll(".slice").attr("opacity",(function(e,t){return t===o?1:.6})),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options)}},i.prototype.calculateRadius=function(){var e=this.currentViewport;if(!this.isInteractive&&this.data&&this.data.dataLabelsSettings.show){var t=e.height/e.width,a=2+1/(1+Math.exp(-5*(t-1)));return Math.min(e.height,e.width)/a}return Math.min(e.height,e.width)/2},i.prototype.getScaleForLegendArrow=function(){var e=1;return this.maxHeightToScaleDonutLegend&&this.currentViewport.height<this.maxHeightToScaleDonutLegend&&(e=this.currentViewport.height/this.maxHeightToScaleDonutLegend),e},i.prototype.initViewportDependantProperties=function(e){void 0===e&&(e=0),this.currentViewport.height=this.parentViewport.height,this.currentViewport.width=this.parentViewport.width;var a=this.currentViewport;if(this.isInteractive)a.height-=i.InteractiveLegendContainerHeight;else{var r=this.legend.getMargins();a.height-=r.height,a.width-=r.width}this.svg.attr({width:a.width,height:a.height}),this.isInteractive?(this.legendContainer.style({width:"100%",height:i.InteractiveLegendContainerHeight+"px",overflow:"hidden",top:0}),this.svg.style("top",i.InteractiveLegendContainerHeight)):t.Legend.positionChartArea(this.svg,this.legend),this.previousRadius=this.radius;var o=this.radius=this.calculateRadius(),n=a.width/2,s=a.height/2;this.arc=d3.svg.arc(),this.outerArc=d3.svg.arc().innerRadius(o*i.OuterArcRadiusRatio).outerRadius(o*i.OuterArcRadiusRatio),this.isInteractive?(this.mainGraphicsContext.attr("transform",t.SVGUtil.translate(n,s)),this.labelGraphicsContext.attr("transform",t.SVGUtil.translate(n,s))):(this.mainGraphicsContext.transition().duration(e).attr("transform",t.SVGUtil.translate(n,s)),this.labelGraphicsContext.transition().duration(e).attr("transform",t.SVGUtil.translate(n,s))),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options)},i.prototype.initDonutProperties=function(){this.donutProperties={viewport:this.currentViewport,radius:this.radius,arc:this.arc.innerRadius(0).outerRadius(this.radius*i.InnerArcRadiusRatio),outerArc:this.outerArc,innerArcRadiusRatio:i.InnerArcRadiusRatio,outerArcRadiusRatio:i.OuterArcRadiusRatio,dataLabelsSettings:this.data.dataLabelsSettings}},i.prototype.mergeDatasets=function(t,a){var i=d3.set();a.forEach((function(e){i.add(e.identity?e.identity.getKey():e.data.identity.getKey())}));var r=t.filter((function(e){return!i.has(e.identity?e.identity.getKey():e.data.identity.getKey())})).map((function(t){var a=e.Prototype.inherit(t);return void 0===a.percentage?a.data.percentage=0:a.percentage=0,a}));return d3.merge([a,r])},i.prototype.updateInternal=function(e,a,r){void 0===r&&(r=0);var o=this.currentViewport;if(r=r||t.AnimatorCommon.GetAnimationDuration(this.animator,a),this.animator){var n,s=i.InnerArcRadiusRatio,l=i.getLayout(this.radius,this.sliceWidthRatio,s,o),c=void 0,u=void 0,d=e.dataLabelsSettings,p=[];if(d&&d.show&&(p=this.createLabels()),!a){var h={viewModel:e,colors:this.colors,graphicsContext:this.mainGraphicsContext,labelGraphicsContext:this.labelGraphicsContext,interactivityService:this.interactivityService,layout:l,radius:this.radius,sliceWidthRatio:this.sliceWidthRatio,viewport:o,labels:p,innerArcRadiusRatio:s};c=this.animator.animate(h),n=c.shapes,u=c.highlightShapes}(a||c.failed)&&(n=i.drawDefaultShapes(this.svg,e,l,this.colors,this.radius,this.interactivityService&&this.interactivityService.hasSelection(),this.sliceWidthRatio,this.data.defaultDataPointColor),u=i.drawDefaultHighlightShapes(this.svg,e,l,this.colors,this.radius,this.sliceWidthRatio),t.NewDataLabelUtils.drawDefaultLabels(this.labelGraphicsContext,p,!1,!0,!0),t.NewDataLabelUtils.drawLabelLeaderLines(this.labelGraphicsContext,p)),this.assignInteractions(n,u,e),this.tooltipsEnabled&&this.addTooltips(n,u)}else this.updateInternalToMove(e,r);t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options)},i.prototype.createLabels=function(){var a=new e.DonutLabelLayout({maximumOffset:t.NewDataLabelUtils.maxLabelOffset,startingOffset:t.NewDataLabelUtils.startingLabelOffset},this.donutProperties),i=this.createLabelDataPoints();return a.layout(i)},i.prototype.createLabelDataPoints=function(){var e=this.data,a=[],i=t.dataLabelUtils.createColumnFormatterCacheManager(),r=null;0===e.dataLabelsSettings.displayUnits&&(r=d3.max(e.dataPoints,(function(e){return Math.abs(e.data.measure)})));for(var o=0;o<this.data.dataPoints.length;o++){var n=this.createLabelDataPoint(e.dataPoints[o],r,i);a.push(n)}return a},i.prototype.createLabelDataPoint=function(e,a,i){var n,s,l,c,u,d,p,h=this.outerArc.centroid(e),g=t.DonutLabelUtils.getXPositionForDonutLabel(h[0]),m=h[1],y=this.data.dataLabelsSettings,f=i.getOrCreate(e.data.labelFormatString,y,a),v=g<0?4:8,b={point:{x:g,y:m},validPositions:[v],radius:0},C=y.labelColor?y.labelColor:t.NewDataLabelUtils.defaultLabelColor,S=t.DonutLabelUtils.getDonutChartLabelStyleFlagType(y.labelStyle),x=y.fontSize,w="",P=this.data.hasHighlights,D=this.data.highlightsOverflow;if(r.hasFlag(S,t.labelStyle.flagLabelStyleData)){var T=void 0;T=P&&!D?e.data.originalHighlightValue:e.data.originalMeasure,n=null!=T?f.format(T):null,s=t.NewDataLabelUtils.getTextSize(n,x)}if(r.hasFlag(S,t.labelStyle.flagLabelStyleCategory)&&(l=e.data.label,c=t.NewDataLabelUtils.getTextSize(l,x)),r.hasFlag(S,t.labelStyle.flagLabelStylePercent)){var V=t.valueFormatter.getLocalizedString("Percentage");u=t.valueFormatter.format(P&&!D?e.data.highlightPercentage:e.data.percentage,V),d=t.NewDataLabelUtils.getTextSize(u,x)}switch(S){case o.categoryAndDataAndPercent:w=l,n&&(w=w+" "+n),u&&(w=w+" ("+u+")"),p=t.NewDataLabelUtils.getTextSize(w,x);break;case o.categoryAndData:w=l,n&&(w=w+" "+n),p=t.NewDataLabelUtils.getTextSize(w,x);break;case o.categoryAndPercent:w=l,u&&(w=w+" "+u),p=t.NewDataLabelUtils.getTextSize(w,x);break;case o.dataAndPercent:w=n,u&&(w=w+" ("+u+")"),p=t.NewDataLabelUtils.getTextSize(w,x);break;case o.data:p=_.clone(s),w=n;break;case o.percent:p=_.clone(d),w=u;break;case o.category:
p=_.clone(c),w=l;break;default:p=_.clone(c),w=l}var L=t.DonutLabelUtils.getLabelLeaderLineForDonutChart(e,this.donutProperties,b.point),N=t.DonutLabelUtils.getLabelLeaderLinesSizeForDonutChart(L);return{isPreferred:!0,text:"",tooltip:w,textSize:p,outsideFill:C,fontSize:x,identity:e.data.identity,parentShape:b,insideFill:t.NewDataLabelUtils.defaultInsideLabelColor,parentType:0,alternativeScale:a,donutArcDescriptor:e,angle:(e.startAngle+e.endAngle)/2-Math.PI/2,dataLabel:n,dataLabelSize:s,categoryLabel:l,categoryLabelSize:c,percentLabel:u,percentLabelSize:d,leaderLinePoints:L,linesSize:N}},i.prototype.renderLegend=function(){if(!this.isInteractive){var e=this.data.legendObjectProperties;if(e){var a=this.data.legendData;null!=a.position&&this.legend.changeOrientation(a.position),this.legend.drawLegend(a,this.parentViewport)}else this.legend.changeOrientation(t.LegendPosition.Top),this.legend.drawLegend(t.Legend.getDefaultLegendData(),this.parentViewport)}},i.prototype.addInteractiveLegendArrow=function(){if(this.data&&this.data.dataPoints&&0!==this.data.dataPoints.length){var e=11,a=16.5;if(!this.interactiveLegendArrow){var r=this.svg.append("g");r.append("path").classed(i.InteractiveLegendArrowClassName,!0).attr("d","M1.5,2.6C0.65,1.15,1.85,0,3,0l27,0c1.65,0,2.35,1.15,1.5,2.6L18,26.45c-0.8,1.45-2.15,1.45-2.95,0L1.95,2.6z"),this.interactiveLegendArrow=r}var o=this.currentViewport,n=this.getScaleForLegendArrow(),s=(o.height-2*this.radius)/2+e*n,l=o.width/2-a*n;this.interactiveLegendArrow.attr("transform",t.SVGUtil.translateAndScale(l,s,n))}},i.prototype.calculateSliceAngles=function(){var e=[],t=this.data.dataPoints;if(0===t.length)return this.interactivityState.valueToAngleFactor=0,void(this.interactivityState.sliceAngles=[]);for(var a=0,i=0,r=t.length;i<r;i++)a+=t[i].data.percentage;this.interactivityState.valueToAngleFactor=360/a;for(var o=0,i=0,r=t.length;i<r;i++){var n=t[i].data.percentage*this.interactivityState.valueToAngleFactor;o+=n,e.push(n/2-o)}this.interactivityState.sliceAngles=e},i.prototype.assignInteractions=function(e,t,a){if(this.isInteractive)this.assignInteractiveChartInteractions(e);else if(this.interactivityService){var i=a.dataPoints.map((function(e){return e.data})),r={clearCatcher:this.clearCatcher,slices:e,highlightSlices:t,allowDrilldown:this.allowDrilldown,visual:this,hasHighlights:a.hasHighlights};this.interactivityService.bind(i,this.behavior,r)}},i.prototype.assignInteractiveChartInteractions=function(e){var t=this,a=this.svg;this.interactivityState.interactiveChosenSliceFinishedSetting=!0;var i=a.node().getBoundingClientRect();this.interactivityState.donutCenter={x:i.left+i.width/2,y:i.top+i.height/2},this.interactivityState.totalDragAngleDifference=0,this.interactivityState.currentRotate=0,this.calculateSliceAngles(),e.on("click",(function(e,a){d3.event.defaultPrevented||t.setInteractiveChosenSlice(a)}));var r=d3.behavior.drag().origin(Object).on("dragstart",(function(){return t.interactiveDragStart()})).on("drag",(function(){return t.interactiveDragMove()})).on("dragend",(function(){return t.interactiveDragEnd()}));a.style("touch-action","none").call(r)},i.prototype.getAngleFromDragEvent=function(){var e,t,a=this.interactivityState,i=d3.event.sourceEvent;if(i.type.toLowerCase().indexOf("touch")!==-1){if(1!==i.touches.length)return null;var r=i.touches[0];e=r.pageX,t=r.pageY}else e=i.pageX,t=i.pageY;var o={x:e-a.donutCenter.x,y:-t+a.donutCenter.y},n=180*Math.atan2(o.y,o.x)/Math.PI;return n},i.prototype.interactiveDragStart=function(){this.interactivityState.totalDragAngleDifference=0,this.interactivityState.previousDragAngle=this.getAngleFromDragEvent()},i.prototype.interactiveDragMove=function(){var e=this.data.dataPoints,a=this.currentViewport,r=this.interactivityState;if(r.interactiveChosenSliceFinishedSetting===!0){var o=this.getAngleFromDragEvent();if(!o)return;var n=r.previousDragAngle-o;r.totalDragAngleDifference+=n,r.previousDragAngle=o,r.currentRotate+=n,this.svg.select("g").attr("transform",t.SVGUtil.translateAndRotate(a.width/2,a.height/2,0,0,this.interactivityState.currentRotate));var s=e[0].data.percentage*r.valueToAngleFactor,l=r.currentRotate<=0?r.currentRotate*-1%360:360-r.currentRotate%360;r.currentIndexDrag=0;for(var c=e.length;r.currentIndexDrag<c&&l>s;)r.currentIndexDrag<c-1&&(s+=e[r.currentIndexDrag+1].data.percentage*r.valueToAngleFactor),r.currentIndexDrag++;r.currentIndexDrag!==r.previousIndexDrag&&(r.interactiveLegend.updateLegend(r.currentIndexDrag),this.svg.selectAll(".slice").attr("opacity",(function(e,t){return t===r.currentIndexDrag?i.OpaqueOpacity:i.SemiTransparentOpacity})),r.previousIndexDrag=r.currentIndexDrag)}},i.prototype.interactiveDragEnd=function(){0!==this.interactivityState.totalDragAngleDifference&&(this.setInteractiveChosenSlice(this.interactivityState.currentIndexDrag),d3.event.sourceEvent.stopPropagation())},i.prototype.updateInternalToMove=function(e,a){void 0===a&&(a=0);var r=this.svg,o=this.pie,n=this.key,s=this.arc,l=this.radius,c=this.previousRadius,u=this.sliceWidthRatio,d=this.svg.select(".slices").selectAll("path"+i.sliceClass.selector).data().map((function(e){return e.data}));0===d.length&&(d=e.dataPointsToDeprecate);var p=this.mergeDatasets(d,e.dataPointsToDeprecate),h=r.select(".slices").selectAll("path"+i.sliceClass.selector).data(o(e.dataPointsToDeprecate),n);h.enter().insert("path").classed(i.sliceClass.class,!0).each((function(e){this._current=e})),h=r.select(".slices").selectAll("path"+i.sliceClass.selector).data(o(p),n);var g=l*u;if(i.isSingleColor(e.dataPoints),h.style("fill",(function(e){return e.data.color})).style("fill-opacity",(function(a){return t.ColumnUtil.getFillOpacity(a.data.selected,!1,!1,e.hasHighlights)})).style("stroke","white").style("stroke-dasharray",(function(e){return i.drawStrokeForDonutChart(l,i.InnerArcRadiusRatio,e,u)})).style("stroke-width",(function(e){return e.data.strokeWidth})).transition().duration(a).attrTween("d",(function(e){var t=d3.interpolate(this._current,e),a=d3.interpolate(c*i.InnerArcRadiusRatio,l*i.InnerArcRadiusRatio);return this._current=t(0),function(e){return s.innerRadius(g).outerRadius(a(e))(t(e))}})),h=r.select(".slices").selectAll("path"+i.sliceClass.selector).data(o(e.dataPointsToDeprecate),n),h.exit().transition().delay(a).duration(0).remove(),!this.isInteractive){var m=e.dataLabelsSettings,y=[];m&&m.show&&(y=this.createLabels()),t.NewDataLabelUtils.drawDefaultLabels(this.labelGraphicsContext,y,!1,!0),t.NewDataLabelUtils.drawLabelLeaderLines(this.labelGraphicsContext,y)}var f=void 0;e.hasHighlights?(f=r.select(".slices").selectAll("path"+i.sliceHighlightClass.selector).data(o(e.dataPointsToDeprecate),n),f.enter().insert("path").classed(i.sliceHighlightClass.class,!0).each((function(e){this._current=e})),i.isSingleColor(e.dataPoints),f.style("fill",(function(e){return e.data.color})).style("fill-opacity",1).style("stroke","white").style("stroke-dasharray",(function(e){return i.drawStrokeForDonutChart(l,i.InnerArcRadiusRatio,e,u,e.data.highlightRatio)})).style("stroke-width",(function(e){return 0===e.data.highlightRatio?0:e.data.strokeWidth})).transition().duration(a).attrTween("d",(function(e){var t=d3.interpolate(this._current,e),a=d3.interpolate(c*i.InnerArcRadiusRatio,i.getHighlightRadius(l,u,e.data.highlightRatio));return this._current=t(0),function(e){return s.innerRadius(g).outerRadius(a(e))(t(e))}})),f.exit().transition().delay(a).duration(0).remove()):r.selectAll("path"+i.sliceHighlightClass.selector).transition().delay(a).duration(0).remove(),this.assignInteractions(h,f,e),this.tooltipsEnabled&&this.addTooltips(h,f),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options),this.isInteractive&&(this.addInteractiveLegendArrow(),this.interactivityState.interactiveLegend.drawLegend(this.data.dataPointsToDeprecate),this.setInteractiveChosenSlice(this.interactivityState.lastChosenInteractiveSliceIndex?this.interactivityState.lastChosenInteractiveSliceIndex:0))},i.prototype.addTooltips=function(e,t){this.tooltipService.addTooltip(e,(function(e){return e.data&&e.data.data.tooltipInfo}),(function(e){return e.data&&e.data.data.identity})),t&&this.tooltipService.addTooltip(t,(function(e){return e.data&&e.data.data.tooltipInfo}),(function(e){return e.data&&e.data.data.identity}))},i.drawDefaultShapes=function(e,a,r,o,n,s,l,c){var u=e.select(".slices").selectAll("path"+i.sliceClass.selector).data(a.dataPoints,(function(e){return e.data.identity.getKey()}));return u.enter().insert("path").classed(i.sliceClass.class,!0),i.isSingleColor(a.dataPoints),u.style("fill",(function(e){return e.data.color})).style("fill-opacity",(function(e){return t.ColumnUtil.getFillOpacity(e.data.selected,!1,s,a.hasHighlights)})).style("stroke-width",(function(e){return e.data.strokeWidth})).attr(r.shapeLayout.attrs).style(r.shapeLayout.styles),u.exit().remove(),u},i.drawDefaultHighlightShapes=function(e,a,r,o,n,s){var l=e.select(".slices").selectAll("path"+i.sliceHighlightClass.selector).data(a.dataPoints.filter((function(e){return null!=e.data.highlightRatio})),(function(e){return e.data.identity.getKey()}));return l.enter().insert("path").classed(i.sliceHighlightClass.class,!0).each((function(e){this._current=e})),i.isSingleColor(a.dataPoints),l.style("fill",(function(e){return e.data.color})).style("fill-opacity",(function(e){return t.ColumnUtil.getFillOpacity(e.data.selected,!0,!1,a.hasHighlights)})).style("stroke","white").style("stroke-width",(function(e){return 0===e.data.highlightRatio?0:e.data.strokeWidth})).attr(r.highlightShapeLayout.attrs).style(r.highlightShapeLayout.styles),l.exit().remove(),l},i.isSingleColor=function(e){if(e.length>1){var t=e.length-1;e[t].data.isLastInDonut=e[t].data.color===e[0].data.color}},i.drawStrokeForDonutChart=function(e,t,a,r,o){void 0===o&&(o=1);var n,s,l=e*t*o,c=(a.endAngle-a.startAngle)*l;if(r){var u=e*r,d=o*e*(i.InnerArcRadiusRatio-r),p=(a.endAngle-a.startAngle)*u;if(a.data.highlightRatio&&(c=(a.endAngle-a.startAngle)*(d+u)),a.data.isLastInDonut)return"0 "+c+" "+d+" "+p+" "+d;n=c+d+p,s=d}else a.data.isLastInDonut?(n=c,s=2*l):(n=c+l,s=l);return"0 "+n+" "+s},i.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},i.getLayout=function(e,t,a,r){var o=e*t,n=e*a,s=o||i.EffectiveZeroValue,l=d3.svg.arc().innerRadius(o),c=d3.svg.arc().innerRadius(o).outerRadius(n),u=d3.svg.arc().innerRadius(o).outerRadius(s);return{shapeLayout:{attrs:{d:function(e){return c(e)}},styles:{"stroke-dasharray":function(r){return i.drawStrokeForDonutChart(e,a,r,t)}}},highlightShapeLayout:{attrs:{d:function(a){var r=l.outerRadius(i.getHighlightRadius(e,t,a.data.highlightRatio));return r(a)}},styles:{"stroke-dasharray":function(r){return i.drawStrokeForDonutChart(e,a,r,t,r.data.highlightRatio)}}},zeroShapeLayout:{attrs:{d:function(e){return u(e)}},styles:{"stroke-dasharray":function(r){return i.drawStrokeForDonutChart(e,a,r,t,s)}}}}},i.getHighlightRadius=function(e,t,a){var r=e*t;return r+a*e*(i.InnerArcRadiusRatio-t)},i.cullDataByViewport=function(e,t,a){for(var r,o=Math.min(a.width,a.height)/2,n=this.invisibleArcLengthInPixels/(o*i.twoPi),s=n*t,l=[],c=0,u=e;c<u.length;c++){var d=u[c];d.measure>=s&&(d.strokeWidth=r===d.color?1:0,r=d.color,l.push(d))}return l},i})();n.ClassName="donutChart",n.InteractiveLegendClassName="donutLegend",n.InteractiveLegendArrowClassName="donutLegendArrow",n.OuterArcRadiusRatio=.9,n.InnerArcRadiusRatio=.8,n.OpaqueOpacity=1,n.SemiTransparentOpacity=.6,n.defaultSliceWidthRatio=.48,n.invisibleArcLengthInPixels=3,n.sliceClass=i("slice"),n.sliceHighlightClass=i("slice-highlight"),n.twoPi=2*Math.PI,n.InteractiveLegendContainerHeight=70,n.EffectiveZeroValue=1e-9,n.PolylineOpacity=.5,t.DonutChart=n;var s=(function(){function e(e,t,a,i){this.maxLegendItemWidth=15,this.legendContainerParent=t,this.colors=a,this.donutChart=e,this.visualInitOptions=i,this.legendItemsPositions=[]}return e.prototype.drawLegend=function(a){var i=this;this.data=a,this.currentNumberOfLegendItems=a.length,this.currentIndex=0,this.leftMostIndex=0,this.rightMostIndex=a.length-1,this.legendContainerParent.select(e.LegendContainerSelector).empty()&&(this.legendContainer=this.legendContainerParent.append("div").classed(e.LegendContainerClassName,!0));var r=this.legendContainer.selectAll(e.LegendItemSelector).data(a),o=this.legendContainerWidth=this.legendContainer.node().getBoundingClientRect().width,n=o/2-.4*o/2+e.ItemMargin,s=n;this.currentXOffset=n;var l=function(a,r){a.attr("data-legend-index",r.index).css({position:"absolute",left:s});var o=t.valueFormatter.format(r.label),n=t.valueFormatter.format(r.originalMeasure,r.measureFormat),l=t.valueFormatter.format(r.percentage,"0.00 %;-0.00 %;0.00 %"),c=r.color,u=e.createBasicLegendItemSpan(e.LegendItemValueClassName,n,11),d=e.createBasicLegendItemSpan(e.LegendItemCategoryClassName,o,11),p=e.createBasicLegendItemSpan(e.LegendItemPercentageClassName,l,20),h=e.spanWidth(u),g=e.spanWidth(d),m=e.spanWidth(p),y=e.legendBoxSize(h,g,m);a.css("width",y),i.maxLegendItemWidth=Math.max(i.maxLegendItemWidth,y);var f=function(e){return y-e>0?(y-e)/2:0},v=f(h),b=f(g),C=f(m);e.createLegendItemSpan(d,b),e.createLegendItemSpan(u,v),e.createLegendItemSpan(p,C).css("color",c),a.append(d),a.append(p),a.append(u),i.legendItemsPositions.push({startX:s,boxWidth:y}),s+=y+e.ItemMargin};r.enter().insert("div").classed(e.LegendItemClassName,!0).each((function(e){l($(this),e)})),r.exit().remove(),this.assignInteractions()},e.prototype.updateLegend=function(e){var i=this,r=this.legendContainerWidth;this.currentIndex=e,this.updateLabelBlocks(e);var o=(this.legendItemsPositions[e].startX+this.legendItemsPositions[e].boxWidth/2-r/2)*-1;this.legendContainer.transition().styleTween("-webkit-transform",(function(e,a,r){return d3.interpolate(t.SVGUtil.translateWithPixels(i.currentXOffset,0),t.SVGUtil.translateWithPixels(o,0))})).styleTween("transform",(function(e,a,r){return d3.interpolate(t.SVGUtil.translateWithPixels(i.currentXOffset,0),t.SVGUtil.translateWithPixels(o,0))})).duration(a.animationDurationMs).ease(a.ease).each("end",(function(){i.currentXOffset=o})),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.visualInitOptions)},e.prototype.assignInteractions=function(){var e=this,t=0,a=function(){t=0},i=function(){if(t+=d3.event.dx,!(Math.abs(t)<e.maxLegendItemWidth)){var a=t<0;e.dragLegend(a),t=0}},r=d3.behavior.drag().origin(Object).on("drag",i).on("dragstart",a);this.legendContainer.style({"touch-action":"none",cursor:"pointer"}).call(r)},e.prototype.dragLegend=function(t){this.currentNumberOfLegendItems>e.MinimumItemsInLegendForCycled-1?this.currentIndex=this.getCyclingCurrentIndex(t):this.shouldChangeIndexInNonCycling(t)&&(t?this.currentIndex++:this.currentIndex--),this.donutChart.setInteractiveChosenSlice(this.currentIndex)},e.prototype.shouldChangeIndexInNonCycling=function(e){return!(0===this.currentIndex&&!e||this.currentIndex===this.currentNumberOfLegendItems-1&&e)},e.prototype.getCyclingCurrentIndex=function(e){var t=this.data.length,a=e?1:-1,i=(this.currentIndex+a)%(t||1);return i<0?i+t:i},e.prototype.updateLegendItemsBlocks=function(t,a){var i=$(this.legendContainer[0]);if(t){var r=i.find("[data-legend-index="+this.leftMostIndex+"]");r.remove().insertAfter(i.find("[data-legend-index="+this.rightMostIndex+"]"));var o=this.legendItemsPositions[this.rightMostIndex].startX+this.legendItemsPositions[this.rightMostIndex].boxWidth+e.ItemMargin;this.legendItemsPositions[this.leftMostIndex].startX=o,r.css("left",o),this.rightMostIndex=this.leftMostIndex,this.leftMostIndex=(this.leftMostIndex+1)%this.data.length}else{var n=i.find("[data-legend-index="+this.rightMostIndex+"]");n.remove().insertBefore(i.find("[data-legend-index="+this.leftMostIndex+"]"));var o=this.legendItemsPositions[this.leftMostIndex].startX-this.legendItemsPositions[this.rightMostIndex].boxWidth-e.ItemMargin;this.legendItemsPositions[this.rightMostIndex].startX=o,n.css("left",o),this.leftMostIndex=this.rightMostIndex,this.rightMostIndex=this.rightMostIndex-1===-1?this.legendItemsPositions.length-1:this.rightMostIndex-1}a-1!==0&&this.updateLegendItemsBlocks(t,a-1)},e.prototype.updateLabelBlocks=function(t){this.currentNumberOfLegendItems>e.MinimumItemsInLegendForCycled?(this.rightMostIndex===t&&this.updateLegendItemsBlocks(!0,2),this.leftMostIndex===t&&this.updateLegendItemsBlocks(!1,2),(this.rightMostIndex===t+1||0===this.rightMostIndex&&t===this.currentNumberOfLegendItems-1)&&this.updateLegendItemsBlocks(!0,1),(this.leftMostIndex===t-1||this.leftMostIndex===this.currentNumberOfLegendItems-1&&0===t)&&this.updateLegendItemsBlocks(!1,1)):this.currentNumberOfLegendItems===e.MinimumItemsInLegendForCycled&&(this.rightMostIndex===t&&this.updateLegendItemsBlocks(!0,1),this.leftMostIndex===t&&this.updateLegendItemsBlocks(!1,1))},e.createBasicLegendItemSpan=function(e,t,a){return $("<span/>").addClass(e).css({"white-space":"nowrap","font-size":a+"px"}).text(t)},e.createLegendItemSpan=function(e,t){return e.css({overflow:"hidden","text-overflow":"ellipsis",display:"inline-block",width:"100%","margin-left":t}),e},e.legendBoxSize=function(t,a,i){var r=t>a?t:a;return r=r>i?r:i,r=r>e.MaxLegendItemBoxSize?e.MaxLegendItemBoxSize:r+2},e.spanWidth=function(e){return this.FakeElementSpan||(this.FakeElementSpan=$("<span>").hide().appendTo(document.body)),this.FakeElementSpan.empty(),this.FakeElementSpan.append(e),this.FakeElementSpan.width()},e})();s.LegendContainerClassName="legend-container",s.LegendContainerSelector=".legend-container",s.LegendItemClassName="legend-item",s.LegendItemSelector=".legend-item",s.LegendItemCategoryClassName="category",s.LegendItemPercentageClassName="percentage",s.LegendItemValueClassName="value",s.MaxLegendItemBoxSize=160,s.ItemMargin=30,s.MinimumItemsInLegendForCycled=3;var l;!(function(a){var i=(function(){function a(i,r,o,n){void 0===n&&(n=!0);var s=this.reader=e.data.createDataViewCategoricalReaderAdvanced(i,{staticSeriesRole:"Y",colorOptions:{valueRole:"Y",visualStyle:r}}),l=s.data;this.dataView=i;var c=i.categorical;if(this.dataViewMetadata=i.metadata,this.tooltipsEnabled=n,this.maxValue=0,this.hasNegativeValues=!1,this.allValuesAreNegative=!1,this.style=r,c.categories&&c.categories.length>0){var u=c.categories[0];this.categoryIdentities=u.identity,this.categoryValues=u.values,this.allCategoryObjects=u.objects,this.categoryColumnRef=u.identityFields,this.categoryFormatString=t.valueFormatter.getFormatString(u.source,t.donutChartProps.general.formatString)}if(this.isDynamicSeries=s.columns.hasDynamicSeries(),this.highlightsOverflow=!1,this.total=0,this.highlightTotal=0,this.dataPoints=[],this.dataLabelsSettings=null,l.hasValues("Y")){var d=this.seriesCount=l.getSeriesCount();this.hasHighlights=l.hasHighlights();var p=l.getCategoryCount()||1;this.allValuesAreNegative=void 0;for(var h=0;h<p;h++)for(var g=0;g<d;g++){var m=l.getValue("Y",h,g),y=void 0;this.hasHighlights&&(y=l.getHighlight("Y",h,g),null==y&&(y=0)),void 0===this.allValuesAreNegative?this.allValuesAreNegative=(!this.hasHighlights||y<=0)&&m<=0:this.allValuesAreNegative=this.allValuesAreNegative&&(!this.hasHighlights||y<=0)&&m<=0,this.hasNegativeValues||(this.hasNegativeValues=m<0||!!this.hasHighlights&&y<0)}this.allValuesAreNegative=!!this.allValuesAreNegative;for(var h=0;h<p;h++)for(var g=0;g<d;g++){var m=l.getValue("Y",h,g);if(m=a.normalizedValue(m,this.allValuesAreNegative),this.total+=m,this.hasHighlights){var y=l.getHighlight("Y",h,g);y=a.normalizedValue(y,this.allValuesAreNegative),this.highlightTotal+=y,!this.highlightsOverflow&&e.Double.greaterWithPrecision(y,m,e.Double.getPrecision(Math.min(y,m)))&&(this.highlightsOverflow=!0)}}}}return a.normalizedValue=function(e,t){return null==e||isNaN(e)?0:e===Number.POSITIVE_INFINITY?Number.MAX_VALUE:e===Number.NEGATIVE_INFINITY?-Number.MAX_VALUE:t?Math.abs(e):e<0?0:e},a.prototype.convert=function(){var e,i=this.reader,r=this.reader.data;e=0!==this.total?this.categoryValues?this.convertCategoricalWithSlicing():this.isDynamicSeries?this.convertSeries():this.convertMeasures():[],this.dataLabelsSettings=this.convertDataLabelSettings();var o=this.dataViewMetadata;if(o){var s=o.objects;s&&(this.legendObjectProperties=s.legend)}var l=_.isEmpty(this.dataView.categorical.categories)?null:this.dataView.categorical.categories[0];this.dataPoints=[];for(var c,u=t.donutChartProps.general.formatString,d=t.valueFormatter.getLocalizedString("Percentage"),p=0,h=e.length;p<h;p++){var g=e[p],m=g.measure,y=a.normalizedValue(g.measure,this.allValuesAreNegative),f=g.highlightMeasure,v=a.normalizedValue(g.highlightMeasure,this.allValuesAreNegative),b=this.total>0?y/this.total:0,C=void 0,S=void 0;y>this.maxValue&&(this.maxValue=y),v>this.maxValue&&(this.maxValue=v),this.hasHighlights&&(this.highlightsOverflow?(m=f,y=v,b=this.highlightTotal>0?v/this.highlightTotal:0,C=1):C=0!==y?v/y:0,C||(C=n.EffectiveZeroValue),S=b*C);var x=g.categoryLabel,w=this.dataView.categorical,P=void 0;P=null!=g.seriesIndex?g.seriesIndex:p;var D=i.columns.getValueMetadataColumn("Y",P),T=this.hasHighlights&&this.highlightsOverflow?f:m,V=this.hasHighlights&&!this.highlightsOverflow?f:void 0,L=t.valueFormatter.getFormatString(D,u),N=t.valueFormatter.format(b,d),M=void 0;null!=T&&null!=N&&(M=t.valueFormatter.format(T,L)+" ("+N+")");var A=void 0;if(null!=V&&null!=S){var R=t.valueFormatter.format(S,d);A=t.valueFormatter.format(V,L)+" ("+R+")"}var F=void 0;this.tooltipsEnabled&&(F=[],l&&F.push({displayName:l.source.displayName,value:x}),this.isDynamicSeries&&(l&&l.source===w.values.source||F.push({displayName:w.values.source.displayName,value:g.label})),null!=M&&F.push({displayName:D.displayName,value:M}),null!=A&&F.push({displayName:t.ToolTipComponent.localizationOptions.highlightedValueDisplayName,value:A}),t.TooltipBuilder.addTooltipMeasures(i,F,this.categoryValues?g.categoryIndex:0,this.isDynamicSeries?g.seriesIndex:void 0));var O=c===g.color&&b&&b>0?1:0;c=b&&b>0?g.color:c,this.dataPoints.push({identity:g.identity,measure:y,originalMeasure:m,measureFormat:g.measureFormat,percentage:b,index:g.index,label:g.label,highlightRatio:C,highlightValue:this.hasHighlights&&!this.highlightsOverflow?v:void 0,originalHighlightValue:this.hasHighlights&&!this.highlightsOverflow?f:void 0,highlightPercentage:this.hasHighlights&&!this.highlightsOverflow?S:void 0,selected:!1,tooltipInfo:F,color:g.color,strokeWidth:O,labelFormatString:D.format})}r.hasCategoryWithRole("Category")?this.legendData=t.Legend.buildCategoryLegendData({dataView:this.dataView,categoryRole:"Category",style:this.style,valueRole:"Y",showByDefault:!1}):this.legendData=t.Legend.buildSeriesLegendData({dataView:this.dataView,staticSeriesRole:"Y",style:this.style,showByDefault:!1})},a.prototype.convertCategoricalWithSlicing=function(){for(var e=this.reader,a=this.reader.data,i=this.dataView.categorical,r=t.donutChartProps.general.formatString,o=[],n=0,s=this.categoryValues.length;n<s;n++)for(var l=this.categoryValues[n],c=e.colors.createByCategory(n),u=t.valueFormatter.format(l,this.categoryFormatString),d=0;d<this.seriesCount;d++){var p=a.getValue("Y",n,d),h=this.hasHighlights?a.getHighlight("Y",n,d):void 0;if(null!=p||null!=h){var g=e.columns.getValueColumn("Y",d),m=u;(this.isDynamicSeries||a.getSeriesCount()>1)&&(m=t.converterHelper.getFormattedLegendLabel(g.source,i.values,r));var y=g.source.queryName,f=t.SelectionIdBuilder.builder().withCategory(i.categories[0],n).withSeries(i.values,this.isDynamicSeries?g:void 0).withMeasure(y).createSelectionId(),v={identity:f,measureFormat:t.valueFormatter.getFormatString(g.source,r,!0),measure:p,highlightMeasure:h,index:o.length,label:m,categoryLabel:u,color:c,categoryIndex:n,seriesIndex:d};o.push(v)}}return o},a.prototype.convertMeasures=function(){for(var e=this.reader,a=[],i=t.donutChartProps.general.formatString,r=0;r<this.seriesCount;r++){var o=e.data.getValue("Y",0,r),n=this.hasHighlights?e.data.getHighlight("Y",0,r):void 0,s=e.columns.getValueColumn("Y",r),l=t.valueFormatter.getFormatString(s.source,i,!0),c=s.source.displayName,u=t.SelectionId.createWithMeasure(s.source.queryName),d=e.colors.createByValue(r),p={identity:u,measureFormat:l,measure:o,highlightMeasure:n,index:r,label:c,categoryLabel:c,color:d};a.push(p)}return a},a.prototype.convertSeries=function(){for(var e=this.reader,a=this.dataView.categorical,i=[],r=t.donutChartProps.general.formatString,o=0;o<this.seriesCount;o++){var n=e.data.getValue("Y",0,o),s=this.hasHighlights?e.data.getHighlight("Y",0,o):void 0,l=e.columns.getValueColumn("Y",o),c=t.valueFormatter.getFormatString(l.source,r,!0),u=t.converterHelper.getFormattedLegendLabel(l.source,a.values,r),d=(new t.SelectionIdBuilder).withSeries(a.values,l).withMeasure(l.source.queryName).createSelectionId(),p=e.colors.createBySeries(o),h={identity:d,measureFormat:c,measure:n,highlightMeasure:s,index:o,label:u,categoryLabel:u,color:p,seriesIndex:o};i.push(h)}return i},a.prototype.convertDataLabelSettings=function(){var e=this.dataViewMetadata,a=t.dataLabelUtils.getDefaultDonutLabelSettings();if(e){var i=e.objects;if(i){var r=i.labels;r&&t.dataLabelUtils.updateLabelSettingsFromLabelsObject(r,a)}}return a},a})();a.DonutChartConverter=i})(l||(l={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={})),define("Visuals/visuals/sunburst",["require","exports","Visuals/behaviours/sunburstBehaviour"],(function(e,t,a){function i(){return new a.SunburstBehavior}var r=powerbi,o=r.visuals,n=o.ColorHelper,s=o.dataLabelUtils,l=r.DataViewObject,c=r.DataViewObjects,u=o.GradientUtils,d=o.Legend,p=o.LegendData,h=o.LegendIcon,g=o.LegendPosition,m=o.legendPosition,y=o.legendProps,f=o.ObjectEnumerationBuilder,v=o.SVGUtil,b=o.sunburstProps,C=r.TextMeasurementService,S=o.treemapProps,x=o.valueFormatter,w=(function(){function e(e){this.viewModel={},e&&(this.isScrollable=!!e.isScrollable&&e.isScrollable,this.behavior=e.behavior)}return e.prototype.init=function(t){var a=this;this.options=t,this.colors=t.style.colorPalette.dataColors,this.colorHelper=new n(this.colors,b.dataPoint.fill),this.svg=d3.select(t.element.get(0)).append("svg").attr("class",e.SunburstClassName).style("position","absolute"),this.container=this.svg.append("g"),this.sunburstText=this.svg.append("text"),this.sunburstText.on("mousedown",(function(e){a.svg.selectAll("path").style("opacity",1),a.sunburstText.style("opacity",0)})),this.behavior&&(this.interactivityService=o.createInteractivityService(t.host)),this.hostService=t.host,this.tooltipService=o.createTooltipService(t.host),this.legend=o.createLegend(t.element,t.interactivity&&t.interactivity.isInteractiveLegend,this.interactivityService,this.isScrollable)},e.prototype.update=function(t){this.dataViews=t.dataViews,t.dataViews.length>0&&(this.data=e.converter(t.dataViews[0],this.colors),this.viewport=t.viewport,this.updateInternal())},e.prototype.updateInternal=function(){var t=this;this.options.interactivity&&this.options.interactivity.isInteractiveLegend||!this.data||this.renderLegend(),this.updateViewport(),this.viewModel.radius=Math.min(this.viewport.width,this.viewport.height)/2,this.viewModel.y=d3.scale.linear().range([0,this.viewModel.radius]),this.viewModel.x=d3.scale.linear().range([0,e.twoPI]),this.viewModel.arc=d3.svg.arc().startAngle((function(a){return Math.max(0,Math.min(e.twoPI,t.viewModel.x(a.x)))})).endAngle((function(a){return Math.max(0,Math.min(e.twoPI,t.viewModel.x(a.x+a.dx)))})).innerRadius((function(e){return Math.max(0,t.viewModel.y(e.y))})).outerRadius((function(e){return Math.max(0,t.viewModel.y(e.y+e.dy))})),this.svg.attr({height:this.viewport.height,width:this.viewport.width}),this.container.attr("transform",v.translate(this.viewport.width/2,this.viewport.height/2));var a=d3.layout.partition().value((function(e){return e.value})),i=a.nodes(this.data.root),r=i.filter((function(a){return t.getChordLength(a)>e.minChordLength})),o=this.renderDefaultShapes(r);if(this.renderDefaultLabels(r),this.renderTooltip(o.filter((function(e){return e.color}))),this.interactivityService){var n={slices:o},s=i.filter((function(e){return!!e.identity}));this.interactivityService.bind(s,this.behavior,n)}this.setupSunburstText()},e.prototype.renderLegend=function(){var e=this.data.legendObjectProperties;if(e){var t=this.data.legendData;p.update(t,e);var a=e[y.position];a&&this.legend.changeOrientation(g[a]),this.legend.drawLegend(t,this.viewport)}else this.legend.changeOrientation(g.Top),this.legend.drawLegend(d.getDefaultLegendData(),this.viewport)},e.prototype.renderDefaultShapes=function(e){var t=this,i=this.container.selectAll("path").data(e);return i.enter().append("path").style("stroke","#fff"),i.attr("display",(function(e){return 0!==e.depth?null:"none"})).attr("d",this.viewModel.arc).style("fill",(function(e){return e.color?e.color:null})).style("fill-opacity",(function(e){return e.color?null:a.zeroOpacity})).on("mousedown",(function(e){e.hasHighlight=!0,t.highlightPath(e);var a=0===t.data.root.total?0:(100*e.total/t.data.root.total).toPrecision(3);t.sunburstText.text(e?a+"%":""),t.sunburstText.style("fill",e.color),t.setupSunburstText()})),i.exit().remove(),i},e.prototype.renderDefaultLabels=function(t){var a=this,i=this.container.selectAll("."+e.LabelClassName).data(t);i.enter().append("text").attr("class",e.LabelClassName).attr("x",0).attr("text-anchor","middle"),i.text((function(e){return a.data.dataLabelsSettings.showCategory&&a.data.dataLabelsSettings.show?e.name+" "+a.getDataLabel(e):a.data.dataLabelsSettings.showCategory?e.name:a.data.dataLabelsSettings.show?a.getDataLabel(e):null})).style("font-size",this.data.dataLabelsSettings.fontSize).style("fill",(function(e){return e.color?a.data.dataLabelsSettings.labelColor:"#fff"})).attr("transform",(function(e){if(e.depth>0){var t=180/Math.PI*(a.viewModel.arc.startAngle()(e)+a.viewModel.arc.endAngle()(e))/2-90,i=t>90?t-180:t;return"translate("+a.viewModel.arc.centroid(e)+")rotate("+i+")"}})),i.exit().remove();var r=this;return i.each((function(e){var t=d3.select(this),a=r.getChordLength(e),i=r.viewModel.y(e.dy);C.wordBreak(t.node(),i,a)})),i.each((function(e){var t=d3.select(this);r.normalizeLabels(t,e)})),i},e.prototype.getDataLabel=function(e){var t=s.createColumnFormatterCacheManager(),a=t.getOrCreate(e.labelFormatString,this.data.dataLabelsSettings),i=s.getLabelFormattedText({label:e.value,formatter:a});return i},e.prototype.normalizeLabels=function(e,t){var a=this.getChordLength(t),i={text:t.name,fontFamily:this.data.dataLabelsSettings.labelStyle,fontSize:this.data.dataLabelsSettings.fontSize.toString()+"px"},r=C.measureSvgTextHeight(i),o=e.selectAll("tspan"),n=o.size();if(r*n>a)return void e.remove();var s=d3.select(o.node());1===n||2===n?s.attr("dy",0):n>2&&s.attr("dy",-r)},e.prototype.getChordLength=function(e){var t={text:e.name,fontFamily:this.data.dataLabelsSettings.labelStyle,fontSize:this.data.dataLabelsSettings.fontSize.toString()+"px"},a=C.measureSvgTextHeight(t),i=this.viewModel.x(e.dx);return i>Math.PI?3*a:2*this.viewModel.y(e.y)*Math.sin(Math.abs(i/2))},e.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},e.prototype.enumerateObjectInstances=function(e){var t=this.data;if(t){var a=e.objectName,i=new f,r=this.data.dataLabelsSettings?this.data.dataLabelsSettings:s.getDefaultSunburstLabelSettings();switch(a){case"dataPoint":var o=this.dataViews&&this.dataViews.length>0&&this.dataViews[0]&&this.dataViews[0].categorical,n=u.hasGradientRole(o);n||this.enumerateDataPoints(i,t.root);break;case"legend":return this.enumerateLegend(t);case"labels":var l={enumeration:i,dataLabelsSettings:r,show:!0,displayUnits:!0,precision:!0};s.enumerateDataLabels(l);break;case"categoryLabels":s.enumerateCategoryLabels(i,r,!1,!0)}return i.complete()}},e.prototype.enumerateDataPoints=function(e,t){var a=t.children;if(!_.isEmpty(a))for(var i=0,r=a;i<r.length;i++){var o=r[i];o.color&&e.pushInstance({displayName:o.name,selector:n.normalizeSelector(o.identity.getSelector()),properties:{fill:{solid:{color:o.color}}},objectName:"dataPoint"})}},e.prototype.enumerateLegend=function(e){var t={legend:e.legendObjectProperties},a=c.getValue(t,S.legend.show,this.legend.isVisible()),i=c.getValue(t,S.legend.showTitle,!0),r=c.getValue(t,S.legend.titleText,this.data.legendData.title),o=l.getValue(t,y.labelColor,this.data.legendData?this.data.legendData.fontProperties.color:d.DefaultLabelColor),n=l.getValue(t,y.fontSize,this.data.legendData&&this.data.legendData.fontProperties.size?this.data.legendData.fontProperties.size:d.DefaultFontSize.pt),s=c.getValue(t,S.legend.position,m.top);
return[{selector:null,objectName:"legend",properties:{show:a,position:s,showTitle:i,titleText:r,labelColor:o,fontSize:n}}]},e.getTreePath=function(e){for(var t=[],a=e;a.parent;)t.unshift(a),a=a.parent;return t},e.prototype.setupSunburstText=function(){this.sunburstText.style("opacity",a.maxOpacity),this.sunburstText.attr("y",this.viewport.height/2),this.sunburstText.attr("x",this.viewport.width/2-this.sunburstText.node().clientWidth/2)},e.prototype.onResizing=function(e){this.viewport=e,this.updateInternal()},e.prototype.highlightPath=function(t){var i=t?e.getTreePath(t):[],r=this.svg.selectAll("path");r.each((function(e){e.identity!==t.identity&&e.color&&(d3.select(this).style("opacity",a.minOpacity),e.hasHighlight=!1)})),r.filter((function(e){return _.contains(i,e)})).each((function(e){e.color&&(d3.select(this).style("opacity",1),e.hasHighlight=!0)}))},e.prototype.renderTooltip=function(e){this.tooltipService.addTooltip(e,(function(e){return e.data&&e.data.tooltipInfo}),(function(e){return e.data&&e.data.identity}))},e.getTooltipData=function(e,t,a){return[{displayName:e,value:x.format(t,a)}]},e.converter=function(t,a){var i=x.getFormatString(t.matrix.valueSources[0],b.general.formatString),r=s.getDefaultSunburstLabelSettings(),o=null;if(t&&t.metadata&&t.metadata.objects){var n=t.metadata.objects.labels;s.updateLabelSettingsFromLabelsObject(n,r),r.showCategory=c.getValue(t.metadata.objects,b.categoryLabels.show,r.showCategory),o=t.metadata.objects.legend}var l="";t.matrix.rows.levels[0]&&t.matrix.rows.levels[0].sources[0]&&(l=t.matrix.rows.levels[0].sources[0].displayName);var u=[],p=e.convertRootNode(t.matrix.rows.root,i,a,u),h=d.getDefaultLegendData();return h.title=l,h.dataPoints=u,{root:p,dataLabelsSettings:r,legendData:h,legendObjectProperties:o}},e.createSunburstNode=function(e,t,a){var i;e.identity&&(t=t.concat([e.identity]),i={data:t});var r=t&&0===t.length?null:new o.SelectionId(i,(!1)),n=e.values?e.values[0].value:0,s={name:e.value,value:Math.max(n,0),identity:r,total:n,selected:!1,hasHighlight:!0,labelFormatString:a};return s},e.convertRootNode=function(t,a,i,r){var o=new n(i,b.dataPoint.fill),s=[],l=e.createSunburstNode(t,s,a);if(t.children&&t.children.length>0){l.children=[];for(var c=0,u=t.children;c<u.length;c++){var d=u[c],p=o.getColorForSeriesValue(d.objects,d.childIdentityFields,d.value),g=e.convertChildNodes(d,l,s,p,a);g.parent=l,l.total+=g.total,l.children.push(g),r.push({label:g.name,color:p,icon:h.Box,identity:g.identity,selected:!1})}}return l},e.appendParentTooltipToChildren=function(e,t){for(var a=0,i=e.children;a<i.length;a++){var r=i[a];null!=r.tooltipInfo&&(o=r.tooltipInfo).push.apply(o,t),this.appendParentTooltipToChildren(r,t)}var o},e.convertChildNodes=function(t,a,i,r,o){var n=e.createSunburstNode(t,i,o);if(t.value&&(n.color=r),n.children=[],t.children&&t.children.length>0){for(var s=0,l=t.children;s<l.length;s++){var c=l[s],u=e.convertChildNodes(c,n,i,r,o);n.children.push(u),n.total+=u.total}n.tooltipInfo=e.getTooltipData(t.value,n.total,o),this.appendParentTooltipToChildren(n,n.tooltipInfo)}else t.values&&t.values[0].value&&(n.tooltipInfo=e.getTooltipData(t.value,t.values[0].value,o));return n.parent=a,n},e.prototype.calculateSunburstSize=function(){var e=this.legend.getMargins();return{height:this.viewport.height-e.height,width:this.viewport.width-e.width}},e.prototype.updateViewport=function(){this.viewport=this.calculateSunburstSize(),d.positionChartArea(this.svg,this.legend),v.flushAllD3TransitionsIfNeeded(this.options)},e})();w.minChordLength=5,w.twoPI=2*Math.PI,w.SunburstClassName="sunburst",w.LabelClassName="label",t.Sunburst=w,t.behavior=i}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){}return e.prototype.init=function(t){this.currentViewport=t.viewport,this.$el=$(e.baseTemplate),this.newsList=this.$el.find(".bingSocialNewsList"),this.loadingPlaceholder=this.$el.find(".loadingPlaceholder"),this.loadingPlaceholderText=this.$el.find(".loadingPlaceholderText"),this.loadingPlaceholder.height(t.viewport.height),this.loadingPlaceholder.width(t.viewport.width),this.getLocalizedString=t.host.getLocalizedString,this.loadingPlaceholderText.text(this.getLocalizedString("Tile_LoadingText")),t.element.append(this.$el),this.data=[],this.addSizeClasses()},e.prototype.onDataChanged=function(e){var t=e.dataViews;if(t.length>0){var a=t[0].bingSocial;this.data!==a&&(this.data=a,this.data.length>0?(this.loadingPlaceholder.hide(),this.updateInternal()):this.loadingPlaceholderText.text(this.getLocalizedString("BingSocialTile_NoResults")))}},e.prototype.onResizing=function(e){this.currentViewport.height===e.height&&this.currentViewport.width===e.width||(this.currentViewport=e,this.addSizeClasses(),this.data.length||this.loadingPlaceholder.height(e.height).width(e.width))},e.prototype.addSizeClasses=function(){this.addSizeClass("height"),this.addSizeClass("width")},e.prototype.addSizeClass=function(t){var a=e.tileDimensions[t];if(a){var i,r=this.currentViewport[t],o=a.length;for(i=2;i<=o;i++)this.$el.removeClass(t+i),this.$el.removeClass(t+i+"up");for(i=o;i>1;i--)if(r>=a[i-1]){this.$el.addClass(t+i);break}for(;i>1;)this.$el.addClass(t+i+"up"),i--}},e.prototype.updateInternal=function(){this.newsList.empty();for(var e=0,t=this.data;e<t.length;e++){var a=t[e],i=a;a.article?i=a.article:a.articles&&(i=a.articles[0]);var r=this.fillInArticleTemplate(i);this.newsList.append(r)}},e.prototype.fillInArticleTemplate=function(t){var a=$(e.listItemTemplate),i=t.image&&t.image.thumbnail&&t.image.thumbnail.contentUrl;return i?(a.find(".js-storyLink").attr("href",t.url),a.find(".js-newsImage").css("background-image","url("+i+")"),a.find(".js-title").html(t.name),a.find(".js-description").html(t.description),a.find(".js-source").text(t.provider[0].name),a):null},e})();t.tileDimensions={height:[100,280,460,640,820,1e3,1180].map((function(e){return e-90})),width:[230,490,750,1010,1270,1530,1790].map((function(e){return e-130}))},t.baseTemplate='<div class="bingSocialNews"><div><div class="bingSocialLoadingPlaceholder loadingPlaceholder"><div class="loadingPlaceholderText" ></div></div><ul class="bingSocialNewsList"></ul></div></div>',t.listItemTemplate='<li><div class="article"><div class="contentRight"><a class="storyLink js-storyLink" target="_blank"><div class="newsImage js-newsImage"></div><span class="title js-title"></span></a><p class="description js-description"></p></div><div class="source js-source"></div></div></li>',e.BingSocialNews=t})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){}return e.prototype.init=function(t){this.currentViewport=t.viewport,this.$el=$(e.baseTemplate),this.tweetsList=this.$el.find(".bingSocialTweetsList"),this.loadingPlaceholder=this.$el.find(".loadingPlaceholder"),this.loadingPlaceholderText=this.$el.find(".loadingPlaceholderText"),this.loadingPlaceholder.height(t.viewport.height),this.loadingPlaceholder.width(t.viewport.width),this.getLocalizedString=t.host.getLocalizedString,this.loadingPlaceholderText.text(this.getLocalizedString("Tile_LoadingText")),t.element.append(this.$el),this.data=[],this.addSizeClasses()},e.prototype.onDataChanged=function(e){var t=e.dataViews;if(t.length>0){var a=t[0].bingSocial;this.data!==a&&(this.data=a,this.data.length>0?(this.loadingPlaceholder.hide(),this.updateInternal()):this.loadingPlaceholderText.text(this.getLocalizedString("BingSocialTile_NoResults")))}},e.prototype.onResizing=function(e){this.currentViewport.height===e.height&&this.currentViewport.width===e.width||(this.currentViewport=e,this.addSizeClasses(),this.data.length||this.loadingPlaceholder.height(e.height).width(e.width))},e.prototype.addSizeClasses=function(){this.addSizeClass("height"),this.addSizeClass("width")},e.prototype.addSizeClass=function(t){var a=e.tileDimensions[t];if(a){var i,r=this.currentViewport[t],o=a.length;for(i=2;i<=o;i++)this.$el.removeClass(t+i),this.$el.removeClass(t+i+"up");for(i=o;i>1;i--)if(r>=a[i-1]){this.$el.addClass(t+i);break}for(;i>1;)this.$el.addClass(t+i+"up"),i--}},e.prototype.updateInternal=function(){this.tweetsList.empty();for(var e=0,t=this.data;e<t.length;e++){var a=t[e],i=this.fillInTweetTemplate(a);this.tweetsList.append(i)}},e.prototype.fillInTweetTemplate=function(t){var a=$(e.listItemTemplate),i="https://www.twitter.com/",r=t.User,o=encodeURIComponent(t.IdStr),n=encodeURIComponent(r.ScreenName);return a.find(".js-nameLink").attr("href",i+n),a.find(".js-avatar").attr("src",r.ProfileImageUrlHttps),a.find(".js-name").text(r.Name),a.find(".js-screenName").text("@"+r.ScreenName),a.find(".js-createdAt").attr("href",i+n+"/status/"+o),a.find(".js-createdAt").text(moment(t.CreatedAt).fromNow()),a.find(".js-reply").attr("href",i+"intent/tweet?in_reply_to="+o),a.find(".js-retweet").attr("href",i+"intent/retweet?tweet_id="+o),a.find(".js-favorite").attr("href",i+"intent/favorite?tweet_id="+o),a.find(".js-retweetCount").text(t.RetweetCount+" Retweets"),e.augmentLinks(a.find(".js-text"),t),a},e.augmentLinks=function(t,a){var i=a.Entities,r=[a.Text];if(i){var o=i.Hashtags.map((function(e){return e.Text}));this.replaceTokens(r,o,e.hashtagRegexConstructor,(function(t){return e.createAnchorTag("#"+t,"https://www.twitter.com/hashtag/"+encodeURIComponent(t))}));var n=i.UserMentions.map((function(e){return e.ScreenName}));this.replaceTokens(r,n,e.userMentionRegexConstructor,(function(t){return e.createAnchorTag("@"+t,"https://www.twitter.com/"+encodeURIComponent(t))}));var s=i.Urls.map((function(e){return e.Url})),l=i.Media.map((function(e){return e.Url}));this.replaceTokens(r,s.concat(l),e.urlRegexConstructor,(function(t){return e.createAnchorTag(t,t)}))}for(var c=0,u=r;c<u.length;c++){var d=u[c];if("string"==typeof d){var p=$("<p></p>");p.html(d),t.append(p)}else t.append(d)}},e.createAnchorTag=function(e,t){var a=$('<a target="_blank"></a>');return a.text(e),a.attr("href",t),a},e.replaceTokens=function(t,a,i,r){if(a.length){for(var o=a.pop(),n=0;n<t.length;n++){var s=t[n];if("string"==typeof s){var l=_.escapeRegExp(o),c=i(l),u=s.split(c),d=[],p=u[0];if("undefined"!=typeof p){""!==p&&d.push(p);for(var h=1;h<u.length;h++)h%2===1?d.push(r(u[h])):d.push(u[h]);Array.prototype.splice.apply(t,[n,1].concat(d)),n+=d.length-1}}}return e.replaceTokens(t,a,i,r)}},e.hashtagRegexConstructor=function(e){return new RegExp("\\B#("+e+")\\b","ig")},e.userMentionRegexConstructor=function(e){return new RegExp("\\B@("+e+")\\b","ig")},e.urlRegexConstructor=function(e){return new RegExp("\\b("+e+")\\b","g")},e})();t.tileDimensions={height:[100,280,460,640,820].map((function(e){return e-90})),width:[230,490,750,1010,1270].map((function(e){return e-130}))},t.baseTemplate='<div class="bingSocialTweets"><div class="bingSocialLoadingPlaceholder loadingPlaceholder"><div class="loadingPlaceholderText" ></div></div><ul class="bingSocialTweetsList"></ul></div>',t.listItemTemplate='<li><div class="tweet"><div class="contentRight"><div class="tweetHeader"><a class="nameLink js-nameLink" target="_blank"><img class="avatar js-avatar" /><span class="name js-name"></span><span class="screenName js-screenName"></span></a><a class="createdAt js-createdAt" target="_blank"></a></div><div class="text js-text"></div></div><div class="tweetFooter"><a class="tweetActionText tweetReply js-reply" target="_blank" title="Reply"></a><a class="tweetActionText tweetRetweet js-retweet" target="_blank" title="Retweet"></a><a class="tweetActionText tweetFavorite js-favorite" target="_blank" title="Favorite"></a><span class="retweetCount js-retweetCount"></span></div></div></li>',e.BingSocialTweets=t})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){}return e.prototype.init=function(e){this.element=e.element},e.prototype.enumerateObjectInstances=function(e){return[]},e.prototype.update=function(e){var t=e.dataViews;if(t&&0!==t.length){var a=t[0];if(a&&a.metadata){var i=null;a.scriptResult&&a.scriptResult.payloadBase64&&(i="data:image/png;base64,"+a.scriptResult.payloadBase64),this.ensureHtmlElement();var r=this.ensureImageElement();i?r.attr("src",i):r.removeAttr("src"),this.onResizing(e.viewport,e.resizeMode||2)}}},e.prototype.onResizing=function(e,t){var a=this.ensureHtmlElement();a.css({height:e.height,width:e.width})},e.prototype.ensureHtmlElement=function(){var e=this.imageBackgroundElement;return e||(e=$("<div class='autoScaleImageContainer'/>"),this.imageBackgroundElement=e,this.imageBackgroundElement.appendTo(this.element)),e},e.prototype.ensureImageElement=function(){var e=this.imageElement;return e||(e=$("<img class='autoScaleImage'/>"),this.imageElement=e,this.imageElement.appendTo(this.imageBackgroundElement)),e},e})();e.ScriptVisual=t})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(a){a.animatedNumber={name:"animatedNumber",capabilities:t.capabilities.animatedNumber,create:function(){return new t.AnimatedNumber}},a.areaChart={name:"areaChart",watermarkKey:"area",capabilities:t.capabilities.areaChart,create:function(){return new t.CartesianChart({chartType:1})},customizeQuery:t.LineChart.customizeQuery,getSortableRoles:function(e){return t.LineChart.getSortableRoles(e)},getAdditionalTelemetry:function(e){return t.CartesianChart.getAdditionalTelemetry(e)}},a.barChart={name:"barChart",watermarkKey:"bar",capabilities:t.capabilities.barChart,create:function(){return new t.CartesianChart({chartType:6})},customizeQuery:t.ColumnChart.customizeQuery,getSortableRoles:function(e){return t.ColumnChart.getSortableRoles(e)},getAdditionalTelemetry:function(e){return t.CartesianChart.getAdditionalTelemetry(e)}},a.basicShape={name:"basicShape",capabilities:t.basicShapeCapabilities,create:function(){return new t.BasicShapeVisual}},a.card={name:"card",watermarkKey:"card",capabilities:t.capabilities.card,create:function(){return new t.Card}},a.multiRowCard={name:"multiRowCard",watermarkKey:"multiRowCard",capabilities:t.capabilities.multiRowCard,create:function(){return new t.MultiRowCard},getSortableRoles:function(e){return t.MultiRowCard.getSortableRoles(e)}},a.clusteredBarChart={name:"clusteredBarChart",watermarkKey:"clusteredBar",capabilities:t.capabilities.clusteredBarChart,create:function(){return new t.CartesianChart({chartType:5})},customizeQuery:t.ColumnChart.customizeQuery,getSortableRoles:function(e){return t.ColumnChart.getSortableRoles(e)},getAdditionalTelemetry:function(e){return t.CartesianChart.getAdditionalTelemetry(e)}},a.clusteredColumnChart={name:"clusteredColumnChart",watermarkKey:"clusteredColumn",capabilities:t.capabilities.clusteredColumnChart,create:function(){return new t.CartesianChart({chartType:3})},customizeQuery:t.ColumnChart.customizeQuery,getSortableRoles:function(e){return t.ColumnChart.getSortableRoles(e)},getAdditionalTelemetry:function(e){return t.CartesianChart.getAdditionalTelemetry(e)}},a.columnChart={name:"columnChart",watermarkKey:"column",capabilities:t.capabilities.columnChart,create:function(){return new t.CartesianChart({chartType:4})},customizeQuery:t.ColumnChart.customizeQuery,getSortableRoles:function(e){return t.ColumnChart.getSortableRoles(e)},getAdditionalTelemetry:function(e){return t.CartesianChart.getAdditionalTelemetry(e)}},a.comboChart={name:"comboChart",watermarkKey:"combo",capabilities:t.capabilities.comboChart,customizeQuery:t.ComboChart.customizeQuery,create:function(){return new t.CartesianChart({chartType:10})},getSortableRoles:function(e){return t.ComboChart.getSortableRoles(e)},getAdditionalTelemetry:function(e){return t.CartesianChart.getAdditionalTelemetry(e)}},a.dataDotChart={name:"dataDotChart",capabilities:t.capabilities.dataDotChart,create:function(){return new t.CartesianChart({chartType:11})},getAdditionalTelemetry:function(e){return t.CartesianChart.getAdditionalTelemetry(e)}},a.dataDotClusteredColumnComboChart={name:"dataDotClusteredColumnComboChart",watermarkKey:"combo",capabilities:t.capabilities.dataDotClusteredColumnComboChart,customizeQuery:t.ComboChart.customizeQuery,create:function(){return new t.CartesianChart({chartType:15})},getAdditionalTelemetry:function(e){return t.CartesianChart.getAdditionalTelemetry(e)}},a.dataDotStackedColumnComboChart={name:"dataDotStackedColumnComboChart",watermarkKey:"combo",capabilities:t.capabilities.dataDotStackedColumnComboChart,customizeQuery:t.ComboChart.customizeQuery,create:function(){return new t.CartesianChart({chartType:16})},getAdditionalTelemetry:function(e){return t.CartesianChart.getAdditionalTelemetry(e)}},a.donutChart={name:"donutChart",watermarkKey:"donut",capabilities:t.capabilities.donutChart,create:function(){return new t.DonutChart}},a.funnel={name:"funnel",watermarkKey:"funnel",capabilities:t.capabilities.funnel,create:function(){return new t.FunnelChart}},a.gauge={name:"gauge",watermarkKey:"gauge",capabilities:t.capabilities.gauge,create:function(){return new t.Gauge}},a.hundredPercentStackedBarChart={name:"hundredPercentStackedBarChart",watermarkKey:"100stackedbar",capabilities:t.capabilities.hundredPercentStackedBarChart,create:function(){return new t.CartesianChart({chartType:7})},customizeQuery:t.ColumnChart.customizeQuery,getSortableRoles:function(e){return t.ColumnChart.getSortableRoles(e)},getAdditionalTelemetry:function(e){return t.CartesianChart.getAdditionalTelemetry(e)}},a.hundredPercentStackedColumnChart={name:"hundredPercentStackedColumnChart",watermarkKey:"100stackedcolumn",capabilities:t.capabilities.hundredPercentStackedColumnChart,create:function(){return new t.CartesianChart({chartType:8})},customizeQuery:t.ColumnChart.customizeQuery,getSortableRoles:function(e){return t.ColumnChart.getSortableRoles(e)},getAdditionalTelemetry:function(e){return t.CartesianChart.getAdditionalTelemetry(e)}},a.image={name:"image",capabilities:t.capabilities.image,create:function(){return new t.ImageVisual}},a.lineChart={name:"lineChart",watermarkKey:"line",capabilities:t.capabilities.lineChart,create:function(){return new t.CartesianChart({chartType:0})},customizeQuery:t.LineChart.customizeQuery,getSortableRoles:function(e){return t.LineChart.getSortableRoles(e)},getAdditionalTelemetry:function(e){return t.CartesianChart.getAdditionalTelemetry(e)}},a.lineStackedColumnComboChart={name:"lineStackedColumnComboChart",watermarkKey:"combo",capabilities:t.capabilities.lineStackedColumnComboChart,customizeQuery:t.ComboChart.customizeQuery,create:function(){return new t.CartesianChart({chartType:14})},getSortableRoles:function(e){return t.ComboChart.getSortableRoles(e)},getAdditionalTelemetry:function(e){return t.CartesianChart.getAdditionalTelemetry(e)}},a.lineClusteredColumnComboChart={name:"lineClusteredColumnComboChart",watermarkKey:"combo",capabilities:t.capabilities.lineClusteredColumnComboChart,customizeQuery:t.ComboChart.customizeQuery,create:function(){return new t.CartesianChart({chartType:13})},getSortableRoles:function(e){return t.ComboChart.getSortableRoles(e)},getAdditionalTelemetry:function(e){return t.CartesianChart.getAdditionalTelemetry(e)}},a.map={name:"map",watermarkKey:"map",capabilities:t.capabilities.map,create:function(){return new t.Map({filledMap:!1})}},a.filledMap={name:"filledMap",watermarkKey:"filledMap",capabilities:t.capabilities.filledMap,create:function(){return new t.Map({filledMap:!0})}},a.shapeMap={name:"shapeMap",watermarkKey:"shapeMap",capabilities:t.capabilities.shapeMap,module:{javascript:"Visuals/visuals/shapeMap"},create:function(e){return new e.module.ShapeMap}},a.treemap={name:"treemap",watermarkKey:"tree",capabilities:t.capabilities.treemap,module:{javascript:"Visuals/visuals/treemap"},create:function(e){return new e.module.Treemap}},a.sunburst={name:"sunburst",watermarkKey:"defaultWatermark",capabilities:t.capabilities.sunburst,module:{javascript:"Visuals/visuals/sunburst"},create:function(e){return new e.module.Sunburst}},a.pieChart={name:"pieChart",watermarkKey:"pie",capabilities:t.capabilities.donutChart,create:function(){return new t.DonutChart({sliceWidthRatio:0})}},a.realTimeLineChart={name:"realTimeLineChart",watermarkKey:"line",capabilities:t.capabilities.realTimeLineChart,create:function(){return new t.CartesianChart({chartType:17})},getAdditionalTelemetry:function(e){return t.CartesianChart.getAdditionalTelemetry(e)}},a.scatterChart={name:"scatterChart",watermarkKey:"scatterplot",capabilities:t.capabilities.scatterChart,create:function(){return new t.CartesianChart({chartType:9})},getAdditionalTelemetry:function(e){return t.ScatterChart.getAdditionalTelemetry(e)}},a.stackedAreaChart={name:"stackedAreaChart",watermarkKey:"stackedarea",capabilities:t.capabilities.stackedAreaChart,create:function(){return new t.CartesianChart({chartType:2})},customizeQuery:t.LineChart.customizeQuery,getSortableRoles:function(e){return t.LineChart.getSortableRoles(e)},getAdditionalTelemetry:function(e){return t.CartesianChart.getAdditionalTelemetry(e)}},a.table={name:"table",watermarkKey:"table",capabilities:t.capabilities.table,create:function(){return new t.Table},customizeQuery:t.Table.customizeQuery,getSortableRoles:function(e){return t.Table.getSortableRoles()}},a.matrix={name:"matrix",watermarkKey:"matrix",capabilities:t.capabilities.matrix,create:function(){return new t.Matrix},customizeQuery:t.Matrix.customizeQuery,getSortableRoles:function(e){return t.Matrix.getSortableRoles()}},a.tableEx={name:"tableEx",watermarkKey:"table",capabilities:e.visuals.tableExCapabilities,create:function(){return new t.TableEx},customizeQuery:function(e){return t.TableEx.customizeQuery(e)},getSortableRoles:function(e){return t.TableEx.getSortableRoles()},module:{javascript:"pivotTableVisuals",css:["pivotTableVisuals"]}},a.pivotTable={name:"pivotTable",watermarkKey:"matrix",capabilities:e.visuals.pivotTableCapabilities,create:function(){return new t.PivotTable},customizeQuery:function(e){return t.PivotTable.customizeQuery(e)},getSortableRoles:function(e){return t.PivotTable.getSortableRoles()},module:{javascript:"pivotTableVisuals",css:["pivotTableVisuals"]}},a.slicer={name:"slicer",watermarkKey:"slicer",capabilities:t.capabilities.slicer,create:function(){return new t.Slicer},customizeQuery:t.Slicer.customizeQuery,getSortableRoles:t.Slicer.getSortableRoles,isCrossFilteredByDefault:t.Slicer.isCrossFilteredByDefault},a.textbox={name:"textbox",capabilities:t.capabilities.textbox,create:function(){return new t.Textbox}},a.waterfallChart={name:"waterfallChart",watermarkKey:"waterfall",capabilities:t.capabilities.waterfallChart,create:function(){return new t.CartesianChart({chartType:12})},getAdditionalTelemetry:function(e){return t.CartesianChart.getAdditionalTelemetry(e)}},a.cheerMeter={name:"cheerMeter",capabilities:t.CheerMeter.capabilities,create:function(){return new t.CheerMeter}},a.consoleWriter={name:"consoleWriter",capabilities:t.samples.consoleWriterCapabilities,create:function(){return new t.samples.ConsoleWriter}},a.helloIVisual={name:"helloIVisual",capabilities:t.samples.HelloIVisual.capabilities,create:function(){return new t.samples.HelloIVisual}},a.scriptVisual={name:"scriptVisual",watermarkKey:"scriptvisual",capabilities:t.capabilities.scriptVisual,create:function(){return new t.ScriptVisual}},a.kpi={name:"kpi",watermarkKey:"kpi",capabilities:t.capabilities.kpi,create:function(){return new t.KPIStatusWithHistory}}})(a=t.plugins||(t.plugins={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){t.bingSocialTweets={name:"bingSocialTweets",capabilities:e.bingSocialTweetsCapabilities,create:function(){return new e.BingSocialTweets}},t.bingSocialNews={name:"bingSocialNews",capabilities:e.bingSocialNewsCapabilities,create:function(){return new e.BingSocialNews}},t.heatMap={name:"heatMap",capabilities:e.capabilities.map,create:function(){return new e.Map({filledMap:!1})}}})(t=e.plugins||(e.plugins={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(){return"#FFFFFF"}function a(){return{color:t()}}e.getDefaultColor=t,e.getDefaultValues=a})(t=e.CanvasBackgroundHelper||(e.CanvasBackgroundHelper={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=100,a=(function(){function e(e,a,i,r){this.scale=d3.time.scale().domain([e,a]).range([0,t]),this.value={min:i||e,max:r||a},this.setValue(this.value)}return e.prototype.getScaledValue=function(){return this.scaledValue},e.prototype.setValue=function(e){this.value=e,this.scaledValue={min:this.scale(e.min),max:this.scale(e.max)}},e.prototype.getValue=function(){return this.value},e.prototype.setScaledValue=function(e){this.scaledValue=e,this.value={min:this.scale.invert(e.min),max:this.scale.invert(e.max)}},e})();e.DateRange=a;var i=(function(){function e(e,a,i,r){this.scale=d3.scale.linear().domain([e,a]).range([0,t]),this.value={min:void 0===i?e:i,max:void 0===r?a:r},this.setValue(this.value)}return e.prototype.getScaledValue=function(){return this.scaledValue},e.prototype.setValue=function(e){this.value=e,this.scaledValue={min:this.scale(e.min),max:this.scale(e.max)}},e.prototype.getValue=function(){return this.value},e.prototype.setScaledValue=function(e){this.scaledValue=e,this.value={min:this.scale.invert(e.min),max:this.scale.invert(e.max)}},e})();e.NumericRange=i})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function a(e,t){var a,s=t.colorPalette.background.value,l=t.colorPalette.foreground.value,c=t.colorPalette.tableAccent.value;switch(e){case n.None:return{outlineColor:r.PropGridOutlineColor.defaultValue,gridColor:r.PropGridVerticalColor.defaultValue,gridVerticalEnabledTable:r.PropGridVertical.defaultValue,gridVerticalEnabledMatrix:r.PropGridVertical.defaultValue,gridHorizontalEnabledTable:r.PropGridHorizontalTable.defaultValue,gridHorizontalEnabledMatrix:r.PropGridHorizontalMatrix.defaultValue,rowPadding:r.PropGridRowPadding.defaultValue,fontColorHeaders:r.PropColumnsFontColor.defaultValue,backColorHeaders:r.PropColumnsBackColor.defaultValue,fontColorValues1:r.PropValuesFontColorPrimary.defaultValue,backColorValues1:r.PropValuesBackColorPrimary.defaultValue,fontColorValues2:r.PropValuesFontColorSecondary.defaultValue,backColorValues2:r.PropValuesBackColorSecondary.defaultValue,fontColorTotals:r.PropTotalFontColor.defaultValue,backColorTotals:r.PropTotalBackColor.defaultValue};case n.Minimal:return a=o.hexBlend(l,.12,s),{outlineColor:c,gridColor:a,gridVerticalEnabledTable:!1,gridVerticalEnabledMatrix:!1,gridHorizontalEnabledTable:!0,gridHorizontalEnabledMatrix:!0,rowPadding:i.rowPaddingNormal,fontColorHeaders:l,backColorHeaders:s,fontColorValues1:l,backColorValues1:s,fontColorValues2:l,backColorValues2:s,fontColorTotals:l,backColorTotals:s};case n.BoldHeader:return s=t.colorPalette.background.value,l=t.colorPalette.foreground.value,c=t.colorPalette.tableAccent.value,a=o.hexBlend(l,.12,s),{outlineColor:c,gridColor:a,gridVerticalEnabledTable:!1,gridVerticalEnabledMatrix:!1,gridHorizontalEnabledTable:!0,gridHorizontalEnabledMatrix:!0,rowPadding:i.rowPaddingNormal,backColorHeaders:l,fontColorHeaders:s,fontColorValues1:l,backColorValues1:s,fontColorValues2:l,backColorValues2:s,fontColorTotals:l,backColorTotals:s};case n.AlternatingRows:return s=t.colorPalette.background.value,l=t.colorPalette.foreground.value,c=t.colorPalette.tableAccent.value,a=o.hexBlend(l,.12,s),{outlineColor:c,gridColor:a,gridVerticalEnabledTable:!1,gridVerticalEnabledMatrix:!1,gridHorizontalEnabledTable:!0,gridHorizontalEnabledMatrix:!0,rowPadding:i.rowPaddingNormal,fontColorHeaders:s,backColorHeaders:l,fontColorValues1:l,backColorValues1:s,fontColorValues2:l,backColorValues2:o.hexBlend(l,.08,s),fontColorTotals:s,backColorTotals:l};case n.ContrastAlternatingRows:return s=t.colorPalette.background.value,l=t.colorPalette.foreground.value,c=t.colorPalette.tableAccent.value,a=o.hexBlend(l,.12,s),{outlineColor:c,gridColor:a,gridVerticalEnabledTable:!1,gridVerticalEnabledMatrix:!1,gridHorizontalEnabledTable:!0,gridHorizontalEnabledMatrix:!0,rowPadding:i.rowPaddingNormal,fontColorHeaders:s,backColorHeaders:l,fontColorValues1:s,backColorValues1:o.hexBlend(l,.75,s),fontColorValues2:l,backColorValues2:o.hexBlend(l,.25,s),fontColorTotals:s,backColorTotals:l};case n.FlashyRows:return s=t.colorPalette.background.value,l=t.colorPalette.foreground.value,c=t.colorPalette.tableAccent.value,a=s,{outlineColor:l,gridColor:a,gridVerticalEnabledTable:!1,gridVerticalEnabledMatrix:!1,gridHorizontalEnabledTable:!1,gridHorizontalEnabledMatrix:!1,rowPadding:i.rowPaddingNormal,fontColorHeaders:l,backColorHeaders:s,fontColorValues1:l,backColorValues1:o.hexBlend(c,.4,s),fontColorValues2:l,backColorValues2:o.hexBlend(c,.8,s),fontColorTotals:l,backColorTotals:s};case n.BoldHeaderFlashyRows:return s=t.colorPalette.background.value,l=t.colorPalette.foreground.value,c=t.colorPalette.tableAccent.value,a=s,{outlineColor:s,gridColor:a,gridVerticalEnabledTable:!1,gridVerticalEnabledMatrix:!1,gridHorizontalEnabledTable:!1,gridHorizontalEnabledMatrix:!1,rowPadding:i.rowPaddingNormal,fontColorHeaders:s,backColorHeaders:l,fontColorValues1:l,backColorValues1:o.hexBlend(c,.4,s),fontColorValues2:l,backColorValues2:o.hexBlend(c,.8,s),fontColorTotals:s,backColorTotals:l};case n.Sparse:return s=t.colorPalette.background.value,l=t.colorPalette.foreground.value,c=t.colorPalette.tableAccent.value,a=o.hexBlend(l,.2,s),{outlineColor:c,gridColor:a,gridVerticalEnabledTable:!1,gridVerticalEnabledMatrix:!1,gridHorizontalEnabledTable:!1,gridHorizontalEnabledMatrix:!1,rowPadding:i.rowPaddingSparse,fontColorHeaders:s,backColorHeaders:l,fontColorValues1:l,backColorValues1:s,fontColorValues2:l,backColorValues2:s,fontColorTotals:s,backColorTotals:l};case n.Condensed:return s=t.colorPalette.background.value,l=t.colorPalette.foreground.value,c=t.colorPalette.tableAccent.value,a=o.hexBlend(l,.2,s),{outlineColor:c,gridColor:a,gridVerticalEnabledTable:!0,gridVerticalEnabledMatrix:!0,gridHorizontalEnabledTable:!0,gridHorizontalEnabledMatrix:!0,rowPadding:i.rowPaddingCondensed,fontColorHeaders:s,backColorHeaders:l,fontColorValues1:l,backColorValues1:s,fontColorValues2:l,backColorValues2:s,fontColorTotals:s,backColorTotals:l};default:return}}var i,r=e.controls.internal.TablixObjects,o=jsCommon.Color;!(function(e){e.outlineWeight=r.PropGridOutlineWeight.defaultValue,e.columnsOutline=r.PropColumnsOutline.defaultValue,e.rowsOutline=r.PropRowsOutline.defaultValue,e.valuesOutline=r.PropValuesOutline.defaultValue,e.tableTotalOutline=r.PropTotalOutline.defaultValue,e.gridHorizontalWeight=r.PropGridHorizontalWeight.defaultValue,e.gridlineVerticalWeight=r.PropGridVerticalWeight.defaultValue,e.rowPaddingCondensed=0,e.rowPaddingNormal=3,e.rowPaddingSparse=6})(i=t.TablixStylePresetDefaults||(t.TablixStylePresetDefaults={}));var n;!(function(e){e.None="None",e.Minimal="Minimal",e.BoldHeader="BoldHeader",e.AlternatingRows="AlternatingRows",e.ContrastAlternatingRows="ContrastAlternatingRows",e.FlashyRows="FlashyRows",e.BoldHeaderFlashyRows="BoldHeaderFlashyRows",e.Sparse="Sparse",e.Condensed="Condensed"})(n=t.TablixStylePresetsName||(t.TablixStylePresetsName={})),t.getTablixStylePresetElements=a})(t=e.stylePresets||(e.stylePresets={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){function a(e,a){var i=t.getTablixStylePresetElements(e,a);return i?{grid:[{properties:{outlineColor:n(i.outlineColor),outlineWeight:r.integer(o.valueOrDefault(i.outlineWeight,t.TablixStylePresetDefaults.outlineWeight)),gridVertical:r.boolean(i.gridVerticalEnabledTable),gridVerticalColor:n(i.gridColor),gridVerticalWeight:r.integer(o.valueOrDefault(i.gridVerticalWeight,t.TablixStylePresetDefaults.gridlineVerticalWeight)),gridHorizontal:r.boolean(i.gridHorizontalEnabledTable),gridHorizontalColor:n(i.gridColor),gridHorizontalWeight:r.integer(o.valueOrDefault(i.gridHorizontalWeight,t.TablixStylePresetDefaults.gridHorizontalWeight)),
rowPadding:r.integer(i.rowPadding)}}],columnHeaders:[{properties:{outline:r.text(o.valueOrDefault(i.outlineModeColumnHeaders,t.TablixStylePresetDefaults.columnsOutline)),fontColor:n(i.fontColorHeaders),backColor:n(i.backColorHeaders)}}],values:[{properties:{outline:r.text(o.valueOrDefault(i.outlineModeValues,t.TablixStylePresetDefaults.valuesOutline)),fontColorPrimary:n(i.fontColorValues1),backColorPrimary:n(i.backColorValues1),fontColorSecondary:n(i.fontColorValues2),backColorSecondary:n(i.backColorValues2)}}],total:[{properties:{outline:r.text(o.valueOrDefault(i.outlineModeTotals,t.TablixStylePresetDefaults.tableTotalOutline)),fontColor:n(i.fontColorTotals),backColor:n(i.backColorTotals)}}]}:{}}function i(){return{sectionTitle:e.data.createDisplayNameGetter("Visual_Table_StylePreset_SectionTitle"),sliceTitle:e.data.createDisplayNameGetter("Visual_Table_StylePreset_SliceTitle"),defaultPresetName:t.TablixStylePresetsName.None,presets:(i={},i[t.TablixStylePresetsName.None]={name:t.TablixStylePresetsName.None,displayName:e.data.createDisplayNameGetter("Visual_Table_StylePreset_None"),evaluate:function(e){return a(t.TablixStylePresetsName.None,e)}},i[t.TablixStylePresetsName.Minimal]={name:t.TablixStylePresetsName.Minimal,displayName:e.data.createDisplayNameGetter("Visual_Table_StylePreset_Minimal"),evaluate:function(e){return a(t.TablixStylePresetsName.Minimal,e)}},i[t.TablixStylePresetsName.BoldHeader]={name:t.TablixStylePresetsName.BoldHeader,displayName:e.data.createDisplayNameGetter("Visual_Table_StylePreset_BoldHeader"),evaluate:function(e){return a(t.TablixStylePresetsName.BoldHeader,e)}},i[t.TablixStylePresetsName.AlternatingRows]={name:t.TablixStylePresetsName.AlternatingRows,displayName:e.data.createDisplayNameGetter("Visual_Table_StylePreset_AlternatingRows"),evaluate:function(e){return a(t.TablixStylePresetsName.AlternatingRows,e)}},i[t.TablixStylePresetsName.ContrastAlternatingRows]={name:t.TablixStylePresetsName.ContrastAlternatingRows,displayName:e.data.createDisplayNameGetter("Visual_Table_StylePreset_ContrastAlternatingRows"),evaluate:function(e){return a(t.TablixStylePresetsName.ContrastAlternatingRows,e)}},i[t.TablixStylePresetsName.FlashyRows]={name:t.TablixStylePresetsName.FlashyRows,displayName:e.data.createDisplayNameGetter("Visual_Table_StylePreset_FlashyRows"),evaluate:function(e){return a(t.TablixStylePresetsName.FlashyRows,e)}},i[t.TablixStylePresetsName.BoldHeaderFlashyRows]={name:t.TablixStylePresetsName.BoldHeaderFlashyRows,displayName:e.data.createDisplayNameGetter("Visual_Table_StylePreset_BoldHeaderFlashyRows"),evaluate:function(e){return a(t.TablixStylePresetsName.BoldHeaderFlashyRows,e)}},i[t.TablixStylePresetsName.Sparse]={name:t.TablixStylePresetsName.Sparse,displayName:e.data.createDisplayNameGetter("Visual_Table_StylePreset_Sparse"),evaluate:function(e){return a(t.TablixStylePresetsName.Sparse,e)}},i[t.TablixStylePresetsName.Condensed]={name:t.TablixStylePresetsName.Condensed,displayName:e.data.createDisplayNameGetter("Visual_Table_StylePreset_Condensed"),evaluate:function(e){return a(t.TablixStylePresetsName.Condensed,e)}},i)};var i}var r=e.data.SQExprBuilder,o=jsCommon.Utility,n=e.fillDefinitionHelpers.createSolidFillDefinition;t.tableStylePresets=i})(a=t.stylePresets||(t.stylePresets={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var a;!(function(t){function a(e,a){var i=t.getTablixStylePresetElements(e,a);return i?{grid:[{properties:{outlineColor:n(i.outlineColor),outlineWeight:r.integer(o.valueOrDefault(i.outlineWeight,t.TablixStylePresetDefaults.outlineWeight)),gridVertical:r.boolean(i.gridVerticalEnabledMatrix),gridVerticalColor:n(i.gridColor),gridVerticalWeight:r.integer(o.valueOrDefault(i.gridVerticalWeight,t.TablixStylePresetDefaults.gridlineVerticalWeight)),gridHorizontal:r.boolean(i.gridHorizontalEnabledMatrix),gridHorizontalColor:n(i.gridColor),gridHorizontalWeight:r.integer(o.valueOrDefault(i.gridHorizontalWeight,t.TablixStylePresetDefaults.gridHorizontalWeight)),rowPadding:r.integer(i.rowPadding)}}],columnHeaders:[{properties:{outline:r.text(o.valueOrDefault(i.outlineModeColumnHeaders,t.TablixStylePresetDefaults.columnsOutline)),fontColor:n(i.fontColorHeaders),backColor:n(i.backColorHeaders)}}],rowHeaders:[{properties:{outline:r.text(o.valueOrDefault(i.outlineModeRowHeaders,t.TablixStylePresetDefaults.rowsOutline)),fontColor:n(i.fontColorHeaders),backColor:n(i.backColorHeaders)}}],values:[{properties:{outline:r.text(o.valueOrDefault(i.outlineModeValues,t.TablixStylePresetDefaults.valuesOutline)),fontColorPrimary:n(i.fontColorValues1),backColorPrimary:n(i.backColorValues1),fontColorSecondary:n(i.fontColorValues2),backColorSecondary:n(i.backColorValues2)}}],subTotals:[{properties:{fontColor:void 0,backColor:void 0}}],total:[{properties:{fontColor:n(i.fontColorTotals),backColor:n(i.backColorTotals),applyToHeaders:r.boolean(!1)}}]}:{}}function i(){return{sectionTitle:e.data.createDisplayNameGetter("Visual_Matrix_StylePreset_SectionTitle"),sliceTitle:e.data.createDisplayNameGetter("Visual_Table_StylePreset_SliceTitle"),defaultPresetName:t.TablixStylePresetsName.None,presets:(i={},i[t.TablixStylePresetsName.None]={name:t.TablixStylePresetsName.None,displayName:e.data.createDisplayNameGetter("Visual_Table_StylePreset_None"),evaluate:function(e){return a(t.TablixStylePresetsName.None,e)}},i[t.TablixStylePresetsName.Minimal]={name:t.TablixStylePresetsName.Minimal,displayName:e.data.createDisplayNameGetter("Visual_Table_StylePreset_Minimal"),evaluate:function(e){return a(t.TablixStylePresetsName.Minimal,e)}},i[t.TablixStylePresetsName.BoldHeader]={name:t.TablixStylePresetsName.BoldHeader,displayName:e.data.createDisplayNameGetter("Visual_Table_StylePreset_BoldHeader"),evaluate:function(e){return a(t.TablixStylePresetsName.BoldHeader,e)}},i[t.TablixStylePresetsName.AlternatingRows]={name:t.TablixStylePresetsName.AlternatingRows,displayName:e.data.createDisplayNameGetter("Visual_Table_StylePreset_AlternatingRows"),evaluate:function(e){return a(t.TablixStylePresetsName.AlternatingRows,e)}},i[t.TablixStylePresetsName.ContrastAlternatingRows]={name:t.TablixStylePresetsName.ContrastAlternatingRows,displayName:e.data.createDisplayNameGetter("Visual_Table_StylePreset_ContrastAlternatingRows"),evaluate:function(e){return a(t.TablixStylePresetsName.ContrastAlternatingRows,e)}},i[t.TablixStylePresetsName.FlashyRows]={name:t.TablixStylePresetsName.FlashyRows,displayName:e.data.createDisplayNameGetter("Visual_Table_StylePreset_FlashyRows"),evaluate:function(e){return a(t.TablixStylePresetsName.FlashyRows,e)}},i[t.TablixStylePresetsName.BoldHeaderFlashyRows]={name:t.TablixStylePresetsName.BoldHeaderFlashyRows,displayName:e.data.createDisplayNameGetter("Visual_Table_StylePreset_BoldHeaderFlashyRows"),evaluate:function(e){return a(t.TablixStylePresetsName.BoldHeaderFlashyRows,e)}},i[t.TablixStylePresetsName.Sparse]={name:t.TablixStylePresetsName.Sparse,displayName:e.data.createDisplayNameGetter("Visual_Table_StylePreset_Sparse"),evaluate:function(e){return a(t.TablixStylePresetsName.Sparse,e)}},i[t.TablixStylePresetsName.Condensed]={name:t.TablixStylePresetsName.Condensed,displayName:e.data.createDisplayNameGetter("Visual_Table_StylePreset_Condensed"),evaluate:function(e){return a(t.TablixStylePresetsName.Condensed,e)}},i)};var i}var r=e.data.SQExprBuilder,o=jsCommon.Utility,n=e.fillDefinitionHelpers.createSolidFillDefinition;t.matrixStylePresets=i})(a=t.stylePresets||(t.stylePresets={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));;var module;(module||{}).exports=window.renderjson=(function(){function n(c,f,y,d,p,_){var v=y?"":f,h=function(n,o,u,c,f){var y,p=i(c),_=function(){y||e(p.parentNode,y=r(f(),s(l.hide,"disclosure",(function(){y.style.display="none",p.style.display="inline"})))),y.style.display="inline",p.style.display="none"};e(p,s(l.show,"disclosure",_),t(c+" syntax",n),s(o,null,_),t(c+" syntax",u));var h=e(i(),a(v.slice(0,-1)),p);return d>0&&_(),h};return null===c?t(null,v,"keyword","null"):void 0===c?t(null,v,"keyword","undefined"):"string"==typeof c&&c.length>p?h('"',c.substr(0,p)+" ...",'"',"string",(function(){return e(i("string"),t(null,v,"string",JSON.stringify(c)))})):l.js_mode&&"function"==typeof c?h("function() {","...","}","function",(function(){var n=c.toString().match(/^([^{]*{)([\s\S]*)(})\s?$/),r=n&&n[1]?n[1]:"function() {",o=n&&n[2]?n[2]:"";return e(i("function"),t("function syntax",r,null,"\n"),t(null,f,"function",o),a("\n"),t(null,f,"function syntax","}"))})):"object"!=typeof c?t(null,v,typeof c,JSON.stringify(c)):c.constructor==Array?0==c.length?t(null,v,"array syntax","[]"):h("["," ... ","]","array",(function(){for(var r=e(i("array"),t("array syntax","[",null,"\n")),o=0;o<c.length;o++)e(r,n(c[o],f+"    ",!1,d-1,p,_),o!=c.length-1?t("syntax",","):[],a("\n"));return e(r,t(null,f,"array syntax","]")),r})):(l.js_mode&&(c=u(c)),o(c)?t(null,v,"object syntax","{}"):h("{","...","}","object",(function(){var r=e(i("object"),t("object syntax","{",null,"\n"));for(var o in c)var s=o;var u=Object.keys(c);_&&(u=u.sort());for(var l in u){var o=u[l];e(r,t(null,f+"    ","key",'"'+o+'"',"object syntax",": "),n(c[o],f+"    ",!0,d-1,p,_),o!=s?t("syntax",","):[],a("\n"))}return e(r,t(null,f,"object syntax","}")),r})))}var t=function(){for(var n=[];arguments.length;)n.push(e(i(Array.prototype.shift.call(arguments)),a(Array.prototype.shift.call(arguments))));return n},e=function(){for(var n=Array.prototype.shift.call(arguments),t=0;t<arguments.length;t++)arguments[t].constructor==Array?e.apply(this,[n].concat(arguments[t])):n.appendChild(arguments[t]);return n},r=function(n,t){return n.insertBefore(t,n.firstChild),n},o=function(n){for(var t in n)if(Object.hasOwnProperty.call(n,t))return!1;return!0},a=function(n){return document.createTextNode(n)},i=function(n){var t=document.createElement("span");return n&&(t.className=n),t},s=function(n,t,e){var r=document.createElement("a");return t&&(r.className=t),r.appendChild(a(n)),r.href="#",r.onclick=function(n){return e(),n&&n.stopPropagation(),!1},r},u=function(n){for(var t={},e=n;null!=e;e=Object.getPrototypeOf(e))for(var r=Object.getOwnPropertyNames(e),o=0;o<r.length;o++){var a=r[o];"undefined"==typeof t[a]&&(t[a]=n[a])}return t},l=function c(t){var r=e(document.createElement("pre"),n(t,"",!1,c.show_to_level,c.max_string_length,c.sort_objects));return r.className="renderjson",r};return l.set_js_mode=function(n){return l.js_mode=n,l},l.set_icons=function(n,t){return l.show=n,l.hide=t,l},l.set_show_to_level=function(n){return l.show_to_level="string"==typeof n&&"all"===n.toLowerCase()?Number.MAX_VALUE:n,l},l.set_max_string_length=function(n){return l.max_string_length="string"==typeof n&&"none"===n.toLowerCase()?Number.MAX_VALUE:n,l},l.set_sort_objects=function(n){return l.sort_objects=n,l},l.set_show_by_default=function(n){return l.show_to_level=n?Number.MAX_VALUE:0,l},l.set_icons("",""),l.set_show_by_default(!1),l.set_sort_objects(!1),l.set_max_string_length("none"),l.set_js_mode(!1),l})();!(function(n){var t;!(function(t){var e;!(function(t){var e;!(function(t){var e=(function(){function t(n){var t=this.container=$("<div>");t.addClass("jsonViewScrollPane"),$(n.element).append(t),renderjson.set_js_mode(!0)}return t.prototype.update=function(t){t.type&n.VisualUpdateType.Data&&this.container.empty().append(renderjson(t.dataViews))},t})();t.Visual=e})(e=t.dataViewer||(t.dataViewer={}))})(e=t.visual||(t.visual={}))})(t=n.extensibility||(n.extensibility={}))})(powerbi||(powerbi={}));!(function(n){var t;!(function(t){var e;!(function(t){t.dataViewer={name:"dataViewer",displayName:"data viewer","class":"Visual",version:"1.0.0",apiVersion:"1.0.0",create:function(t){return new n.extensibility.visual.dataViewer.Visual(t)},custom:!0}})(e=t.plugins||(t.plugins={}))})(t=n.visuals||(n.visuals={}))})(powerbi||(powerbi={})); 

window.parseTimeMarkers['powerbi-visuals.min.js'].end = Date.now();
;window.DEBUG=!1;var powerbi;!(function(e){var t=(function(){function t(e,o,i){var n=this;if(n.localyticsAppKey=e,i?(n.batchSize=i.batchSize,n.batchTimer=i.batchTimer):(n.batchSize=t.defaultBatchSize,n.batchTimer=window),n.currentBatchCount=n.batchSize,o)n.localyticSDKinstance=o;else try{var r=window.LocalyticsGlobal;null==r&&(r="localytics"),n.localyticSDKinstance=window[r]}catch(e){}}return t.prototype.initialize=function(o){var i=this;this.hostData=o;var n;n="Embed"==o.sessionSource?o.embedUserId:"11111111-1111-1111-1111-11"+e.getHashCode(o.userId);var r=[];o.isInternalUser?r.push("MSFT"):r.push("External"),r.push(o.sessionSource);var a={sessionTimeout:1800,trackPageView:!1,customDimensions:r,installId:n,customerId:n,cacheOffline:!0,autoUpload:!1};this.localyticSDKinstance.enqueueCommand(t.initName,this.localyticsAppKey,a),this.batchTimeoutId=this.batchTimer.setTimeout((function(){i.uploadBatch()}),t.batchTimeoutMS,null)},t.prototype.getType=function(){return e.LoggerServiceType.Localytics},t.prototype.logEvent=function(o){var i=this,n=this.hostData,r=$.extend({},o.getFormattedInfoObject(),{client:n.client,version:n.build,cluster:n.cluster,activityId:o.id,hashedUuid:"Embed"==n.sessionSource?n.embedUserId:e.getHashCode(n.userId),isInternal:n.isInternalUser});r.duration&&"number"==typeof r.duration&&(r.duration=i.bucketTime(r.duration)),i.execute(i,(function(){i.localyticSDKinstance.enqueueCommand(t.tagEventName,o.name,r)})),this.uploadBatchIfAtSizeLimit()},t.prototype.startTimedEvent=function(e){},t.prototype.endTimedEvent=function(o){var i=this,n=this.hostData,r=$.extend({},o.getFormattedInfoObject(),{duration:i.bucketTime(Date.now()-o.time),client:n.client,version:n.build,cluster:n.cluster,activityId:o.id,hashedUuid:"Embed"==n.sessionSource?n.embedUserId:e.getHashCode(n.userId),isInternal:n.isInternalUser});i.execute(i,(function(){i.localyticSDKinstance.enqueueCommand(t.tagEventName,o.name,r)})),this.uploadBatchIfAtSizeLimit()},t.prototype.flush=function(){this.uploadBatch()},t.prototype.bucketTime=function(e){var t="1min+";return e<10?t="< 10ms":e<100?t=10*Math.floor(e/10)+"ms":e<1e3?t=100*Math.floor(e/100)+"ms":e<5e3?t=Math.floor(e/1e3)+"s":e<=1e4?t="5 - 10s":e<=6e4&&(t="10 - 60s"),t},t.prototype.execute=function(e,t){try{t()}catch(e){}},t.afterDequeue=function(e){setTimeout(e,t.afterDequeueTimeout)},t.prototype.uploadBatchIfAtSizeLimit=function(){this.currentBatchCount--,0>=this.currentBatchCount&&this.uploadBatch()},t.prototype.uploadBatch=function(){var e=this;this.batchTimer.clearTimeout(this.batchTimeoutId),this.batchTimeoutId=this.batchTimer.setTimeout((function(){e.uploadBatch()}),t.batchTimeoutMS,null),this.currentBatchCount=this.batchSize,this.execute(this,(function(){e.localyticSDKinstance.enqueueCommand(t.uploadName)}))},t})();t.defaultBatchSize=10,t.batchTimeoutMS=2e3,t.afterDequeueTimeout=200,t.namespace="PowerBI",t.initName="init."+t.namespace,t.tagEventName="tagEvent."+t.namespace,t.uploadName="upload."+t.namespace,e.LocalyticsService=t})(powerbi||(powerbi={}));var jsCommon;!(function(e){var t;!(function(e){e[e.Info=0]="Info",e[e.Warning=1]="Warning",e[e.SecurityWarning=2]="SecurityWarning"})(t=e.ModalDialogNotificationType||(e.ModalDialogNotificationType={})),e.PowerBIDefaultHelpPage="https://support.powerbi.com";var o=(function(){function o(t,i){var n=this;this.modalContainer=null,this.modalDialogElement=null,this.dialogTitle=null,this.dialogCloseButton=null,this.dialogContent=null,this.dialogContentMessage=null,this.dialogContentNotification=null,this.dialogContentNotificationText=null,this.dialogContentNotificationIcon=null,this.dialogActions=null,this.messageQueue=new Array,this.isReady=!1,this.messageCurrentlyShown=!1,$(document).ready((function(){n.modalContainer=$(o.ModalDialogHtml),n.modalDialogElement=n.modalContainer.find(o.modalDialogClassSelector),n.dialogTitle=n.modalContainer.find(o.dialogTitleClassSelector),n.dialogCloseButton=n.modalContainer.find(o.dialogCloseIconClassSelector),n.dialogContent=n.modalContainer.find(o.dialogContentClassSelector),n.dialogActions=n.modalContainer.find(o.dialogActionsClassSelector);var r=n;if(n.dialogCloseButton.on(e.DOMConstants.mouseClickEventName,(function(){return r.hideDialog()})),!t){var a=$(o.modalDialogContainerHostClassSelector);a&&a.length>0&&a.remove(),a=InJs.DomFactory.div().addClass(o.modalDialogContainerHostClassName),t=$(e.DOMConstants.DocumentBody).append(a),t=a}t.append(n.modalContainer),n.isReady=!0,n.isRTL=InJs.InfoNavUtility.isRTL(),n.messageQueue.length>0&&n.showDialogInternal(n.messageQueue.shift()),i&&(n.localizationMap=i)}))}return o.prototype.showMessage=function(t,o,i,n){var r=this;e.Utility.throwIfNullOrEmptyString(t,null,"ShowMessage","messageTitle"),e.Utility.throwIfNullOrEmptyString(o,null,"ShowMessage","messageText");var a=[],s="primary",l=null;if(i||(i=this.localizationMap?this.localizationMap.closePromptText:InJs.UnlocalizedStrings.dialogCloseActionLabel),n){var c=$('<a target="_blank"/>').text(n.label).attr("href",n.url);l=$("<div/>").text(o+" ").append(c),o=null}a[0]=this.createButton(i,(function(e,t){r.hideDialog()}),null,s),this.pushMessage(t,o,l,a,!0)},o.prototype.showPrompt=function(t,o,i,n){e.Utility.throwIfNullOrEmptyString(o,null,"ShowPrompt","promptText"),e.Utility.throwIfNullOrUndefined(i,null,"ShowPrompt","promptActions");for(var r=new Array,a=0;a<i.length;a++){var s=i[a],l=s.cssClass;0===a&&(l+=" primary"),r[a]=this.createButton(s.labelText,s.actionCallback,s.data,l,s.disabled)}this.pushMessage(t,o,null,r,n)},o.prototype.showError=function(t,o,i,n,r){this.showCustomError(InJs.UnlocalizedStrings.errorDialogTitle,t,o,o!==e.TraceType.Fatal,i,n,r)},o.prototype.showCustomError=function(t,o,i,n,r,a,s,l,c,d,u,p,v){var g=this;e.Utility.throwIfNullOrEmptyString(t,null,"ShowError","errorTitle"),e.Utility.throwIfNullOrEmptyString(o,null,"ShowError","errorText");var f=new Array;s?s.forEach((function(e,t,o){f.push(g.createButton(e.label,(function(t,o){g.hideDialog(),$.isFunction(a)&&a(e.resultValue)}),null,e.cssClass,e.disabled))})):i!==e.TraceType.Fatal?f[0]=this.createButton(this.localizationMap?this.localizationMap.closePromptText:InJs.UnlocalizedStrings.dialogCloseActionLabel,(function(e,t){g.hideDialog(),$.isFunction(a)&&a(0)})):f[0]=this.createButton(this.localizationMap?this.localizationMap.refreshPagePromptText:InJs.UnlocalizedStrings.dialogRefreshPageActionLabel,(function(e,t){window.location.reload()}),null,"primary");var y;if(y=d?$("<div/>").html(o):$("<div/>").text(o),r){var m=this.localizationMap&&this.localizationMap.errorDialogHelperText?this.localizationMap.errorDialogHelperText:InJs.UnlocalizedStrings.errorDialogHelperText;u&&(m=u),y.append($("<br/>")).append(m)}if(this.addAdditionalErrorInfo(y,r,this.localizationMap?this.localizationMap.showTechnicalDetailsText:InJs.UnlocalizedStrings.showDetailsText),l)if(l.url===e.PowerBIDefaultHelpPage||l.isGetHelpTextReplaced){var h=$('<a class="modalErrorHelpLink" target="_blank"/>').text(l.label).attr("href",l.url);y.append(h)}else f.unshift(this.createButton(l.label,(function(e,t){window.open(l.url)}),null,"primary"));this.pushMessage(t||InJs.UnlocalizedStrings.errorDialogTitle,null,y,f,n,c,null,null,p,v)},o.prototype.showCustomDialog=function(e,t,o,i,n,r,a,s,l,c,d,u,p,v,g){var f=[];g&&(f[0]=this.createCheckbox(g.labelText,g.actionCallback,g.data));for(var y=0;y<o.length;y++){var m=o[y],h=m.cssClass;u||0!==y||(h+=" primary");var C=g?y+1:y;f[C]=this.createButton(m.labelText,m.actionCallback,m.data,h,m.disabled)}return this.pushMessage(e,null,t,f,n,l,i,r,a,s,c,d,u,p,v),this.dialogContent},o.prototype.hideDialog=function(){var t=this;this.modalContainer.fadeTo(o.AnimationSpeedMs,0,(function(){if(t.modalContainer.css(e.CssConstants.displayProperty,e.CssConstants.noneValue),t.modalDialogElement.removeClass(t.modalDialogCustomClass),t.modalContainer.removeClass(t.modalContainerCustomClass),t.currentModalDialogMessage&&t.currentModalDialogMessage.onDialogClosed&&t.currentModalDialogMessage.onDialogClosed(),t.messageCurrentlyShown=!1,t.messageQueue.length){var o=t.messageQueue.shift();t.showDialogInternal(o)}}))},o.prototype.updatePosition=function(t){var i=(this.modalContainer.height()-this.modalDialogElement.height())/2,n=(this.modalContainer.width()-this.modalDialogElement.width())/2,r={top:i+e.CssConstants.pixelUnits,left:this.isRTL?null:n+e.CssConstants.pixelUnits,right:this.isRTL?n+e.CssConstants.pixelUnits:null};t?this.modalDialogElement.animate(r,o.AnimationSpeedMs):this.modalDialogElement.css(r)},o.prototype.addAdditionalErrorInfo=function(t,o,i){var n=this;if(o){for(var r=$("<p />"),a=0;a<o.length;a++)r.append(InJs.InfoNavUtility.constructErrorField(o[a].errorInfoKey,o[a].errorInfoValue));var s=InJs.InfoNavUtility.constructShowDetailsContainer(r,i);t.append($("<br />")),t.append(s),t.find(".showAdditionalDetailsLink").on(e.DOMConstants.mouseClickEventName,(function(e){n.updatePosition(!0)}))}},o.prototype.pushMessage=function(e,t,o,n,r,a,s,l,c,d,u,p,v,g,f){"undefined"==typeof r&&(r=!0),"undefined"==typeof c&&(c=""),"undefined"==typeof d&&(d="");var y=new i;y.titleText=e,y.messageText=t,y.dialogContent=o,y.dialogButtons=n,y.onDialogDisplayed=s,y.isDismissable=r,y.dialogCssClass=c,y.containerCssClass=d,y.onDialogClosed=a,y.notificationType=u,y.notificationText=p,y.htmlMessageText=g,this.messageQueue.push(y),!this.messageCurrentlyShown&&this.isReady&&this.showDialogInternal(this.messageQueue.shift(),l,v,f)},o.prototype.showDialogInternal=function(t,i,n,r){var a=this;if(this.currentModalDialogMessage=t,this.messageCurrentlyShown=!0,this.dialogContentNotification=$(o.notificationForModalDialogHtml),this.dialogContentNotificationIcon=this.dialogContentNotification.find(o.dialogNotificationIconClassSelector),this.dialogContentNotificationText=this.dialogContentNotification.find(o.dialogContentNotificationTextClassSelector),this.dialogTitle.empty(),this.dialogContent.empty(),this.dialogActions.empty(),this.dialogTitle.text(t.titleText).attr("title",t.titleText),r?(this.appendNotification(t.notificationType,t.notificationText),this.appendMessageText(t.dialogContent,t.messageText,t.htmlMessageText)):(this.appendMessageText(t.dialogContent,t.messageText,t.htmlMessageText),this.appendNotification(t.notificationType,t.notificationText)),t.isDismissable?this.dialogCloseButton.css(e.CssConstants.displayProperty,e.CssConstants.blockValue):this.dialogCloseButton.css(e.CssConstants.displayProperty,e.CssConstants.noneValue),t.dialogButtons.length>0){this.dialogActions.show();for(var s=0;s<t.dialogButtons.length;s++)this.dialogActions.append(t.dialogButtons[s])}else this.dialogActions.hide();t.dialogCssClass&&(this.modalDialogElement.addClass(t.dialogCssClass),this.modalDialogCustomClass=t.dialogCssClass),t.containerCssClass&&(this.modalContainer.addClass(t.containerCssClass),this.modalContainerCustomClass=t.containerCssClass);var l=this.modalContainer.css(e.CssConstants.displayProperty)===e.CssConstants.noneValue?this.modalContainer:this.modalDialogElement;l.fadeTo(0,0),this.updatePosition(!1),l.fadeTo(o.AnimationSpeedMs,1,(function(){0===a.modalDialogElement.find(":focus").length&&a.modalDialogElement.focus();var e=a.dialogActions.find("input");!n&&e.length>0&&e[0].focus(),t.onDialogDisplayed&&t.onDialogDisplayed(a.dialogContent),i&&a.dialogContent.parent().find(".infonav-dialogActions input[type=button]:first").focus()}))},o.prototype.appendMessageText=function(e,t,i){_.isEmpty(t)?this.dialogContent.append(e):this.dialogContent.text(t),_.isEmpty(i)||(this.dialogContentMessage=this.dialogContent.find(o.modalDialogHtmlMessageClassSelector),this.dialogContentMessage.html(i))},o.prototype.appendNotification=function(e,i){if(null!==e&&!_.isEmpty(i)){switch(e){case t.Info:this.dialogContentNotificationIcon.addClass(o.dialogInfoIconCssClass),this.dialogContentNotification.addClass(o.notificationInfoCssClass);break;case t.Warning:this.dialogContentNotificationIcon.addClass(o.dialogWarningIconCssClass),this.dialogContentNotification.addClass(o.notificationWarningCssClass);break;case t.SecurityWarning:this.dialogContentNotificationIcon.addClass(o.dialogSecurityWarningIconCssClass),this.dialogContentNotification.addClass(o.notificationSecurityWarningCssClass)}this.dialogContentNotificationText.html(i),this.dialogContent.append(this.dialogContentNotification)}},o.prototype.createButton=function(t,i,n,r,a){var s=this,l=$(o.NewButtonSelector);return l.attr("value",t),l.on(e.DOMConstants.mouseClickEventName,(function(e){i(l,s.dialogContent,n)})),r&&l.addClass(r),a&&l.prop("disabled",!0),l},o.prototype.createCheckbox=function(t,i,n){var r=this,a='<div class="'+o.dialogCheckboxCssClass+'">'+o.checkboxSelector+o.checkboxLabelSelectorOpen+t+o.checkboxLabelSelectorClose+"</div>",s=$(a),l=s.find("input");return l.on(e.DOMConstants.changeEventName,(function(e){i(l,r.dialogContent,n)})),s},o})();o.AnimationSpeedMs=250,o.modalDialogCssClass="infonav-modalDialog",o.dialogTitleCssClass="infonav-dialogTitle",o.dialogCloseIconCssClass="infonav-dialogCloseIcon",o.dialogContentCssClass="infonav-dialogContent",o.dialogContentNotificaionCssClass="infonav-dialogContentNotification",o.dialogWarningIconCssClass="pbi-glyph-warning glyph-mini",o.dialogSecurityWarningIconCssClass="pbi-glyph-securityalert glyph-mini",o.dialogInfoIconCssClass="pbi-glyph-info glyph-mini",o.dialogNotificationIconCssClass="glyphicon",o.notificationWarningCssClass="typeWarning",o.notificationSecurityWarningCssClass="typeSecurityWarning",o.notificationInfoCssClass="typeInfo",o.dialogContentNotificationTextCssClass="infonav-dialogContentNotificationText",o.dialogActionsCssClass="infonav-dialogActions",o.dialogCheckboxCssClass="pbi-input checkbox",o.dialogCheckboxLabelCssClass="form-label",o.dialogHtmlMessageCssclass="dialogMessage",o.modalDialogClassSelector="."+o.modalDialogCssClass,o.dialogTitleClassSelector="."+o.dialogTitleCssClass,o.dialogCloseIconClassSelector="."+o.dialogCloseIconCssClass,o.dialogContentClassSelector="."+o.dialogContentCssClass,o.dialogActionsClassSelector="."+o.dialogActionsCssClass,o.dialogNotificationIconClassSelector="."+o.dialogNotificationIconCssClass,o.dialogContentNotificationTextClassSelector="."+o.dialogContentNotificationTextCssClass,o.modalDialogContainerHostClassName="infonav-modalContainerHost",o.modalDialogContainerHostClassSelector="."+o.modalDialogContainerHostClassName,o.modalDialogHtmlMessageClassSelector="."+o.dialogHtmlMessageCssclass,o.ModalDialogHtml='<div class="infonav-modalContainer'+(location.search.indexOf("renderAsModalDialog")!==-1?" small":"")+'"><div class="'+o.modalDialogCssClass+'" tabindex="-1"><div class="infonav-dialogLayout"><div class="'+o.dialogTitleCssClass+'"></div><div class="'+o.dialogCloseIconCssClass+'"></div><div class="'+o.dialogContentCssClass+'"></div><div class="'+o.dialogActionsCssClass+'"></div></div></div></div>',o.notificationForModalDialogHtml='<div class="'+o.dialogContentNotificaionCssClass+'"><span class="'+o.dialogNotificationIconCssClass+'"></span><span class= "'+o.dialogContentNotificationTextCssClass+'" > </span></div>',o.NewButtonSelector='<input type="button"></input>',o.checkboxSelector='<input type="checkbox"></input>',o.checkboxLabelSelectorOpen='<label class="'+o.dialogCheckboxLabelCssClass+'">',o.checkboxLabelSelectorClose="</label>",e.ModalDialog=o;var i=(function(){function e(){this.titleText=null,this.messageText=null,this.dialogContent=null,this.dialogButtons=null,this.onDialogDisplayed=null,this.onDialogClosed=null,this.isDismissable=!0,this.dialogCssClass=null,this.containerCssClass=null,this.notificationType=null,this.notificationText=null,this.htmlMessageText=null}return e})()})(jsCommon||(jsCommon={}));var InJs;!(function(e){var t=(function(){function e(e,t,o,i,n){this.labelText=e,this.actionCallback=t,this.data=o,this.cssClass=i,this.disabled=!!n}return e})();e.ModalDialogAction=t})(InJs||(InJs={}));var jsCommon;!(function(e){var t=(function(){function e(e){this.count=0,this.top=-1,this.size=e,this.data=new Array(e)}return e.prototype.item=function(e){var t=this.top-(this.count-1);return t<0&&(t+=this.size),this.data[(e+t)%this.size]},e.prototype.push=function(e){this.count<this.size&&this.count++,this.top=++this.top%this.size,this.data[this.top]=e},e.prototype.pop=function(){if(0!==this.count){this.count--;var e=this.data[this.top];return delete this.data[this.top],--this.top===-1&&this.count>0&&(this.top=this.size-1),e}},e.prototype.peek=function(){return this.data[this.top]},e.prototype.clear=function(){this.count=0,this.top=-1,this.data=new Array(this.size)},Object.defineProperty(e.prototype,"length",{get:function(){return this.count},enumerable:!0,configurable:!0}),e})();e.CircularStack=t})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){var t,o=powerbi.Double;!(function(e){function t(e,t,i){if(0===i)return null;for(var n=0,r=0,a=t+i-1;r<i;r++,a--){var s=e.charCodeAt(a)-48;if(s<0||9<s)return null;n+=s*o.pow10(r)}return n}e.parseIntSubstrFast=t})(t=e.StringExtensions||(e.StringExtensions={}))})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){var t,o=powerbi.Double,i=powerbi.contract,n=e.StringExtensions.parseIntSubstrFast;!(function(t){function r(e){return(e.getTime()-6e4*e.getTimezoneOffset())%864e5===0}function a(){return"undefined"!=typeof moment}function s(e){var t=l(e);if(t)return t;var o=moment(e);return o.isValid()?o.toDate():null}function l(e){if(e){var t=e.length;if(!(t<=18||t>26)){var i=e[10];if("-"===e[4]&&"-"===e[7]&&("T"===i||" "===i)&&":"===e[13]&&":"===e[16]){var r=n(e,0,4),a=n(e,5,2),s=n(e,8,2),l=n(e,11,2),c=n(e,14,2),d=n(e,17,2),u="Z"===e.charAt(t-1);u&&t--;var p=0;if(t>19){if("."!==e[19])return;var v=t-20,g=n(e,20,v);if(null===g)return;var f=o.pow10(3-v);p=g*f}if(null!==r&&null!==a&&null!==s&&null!==l&&null!==c&&null!==d&&null!==p)return u?new Date(Date.UTC(r,a-1,s,l,c,d,p)):new Date(r,a-1,s,l,c,d,p)}}}}function c(e){return moment.utc(e).toDate()}function d(e){return m+e.getTime().toString()+h}function u(o){if(e.Utility.throwIfNullOrEmptyString(o,null,"deserializeDate","Cannot deserialize empty string"),i.check(0===o.indexOf(m)&&_.endsWith(o,h),"Cannot deserialize empty string"),t.isMomentPresent()){var n=moment(o);return i.check(n.isValid(),"parsedValue.isValid must be true"),n.toDate()}var r=o.substring(m.length,o.length-h.length);i.check(/^\-?\d+$/.test(r),"Cannot deserialize invalid date");var a=parseInt(r,10);return i.check(!isNaN(a),"Cannot deserialize invalid date"),new Date(a)}function p(e){try{return u(e)}catch(e){}}function v(e,t,o,i){var n=moment().subtract(t,o);return i&&(n=n.startOf(t)),moment(e)>=n}function g(e,t){return t.toLocaleTimeString(e,{second:"numeric",minute:"numeric",hour:"numeric"})}function f(e,t){return t.toLocaleDateString(e,{second:"numeric",minute:"numeric",hour:"numeric",weekday:"short"})}function y(e,t){return t.toLocaleDateString(e,{second:"numeric",minute:"numeric",hour:"numeric",day:"numeric",month:"short",year:"numeric"})}var m="/Date(",h=")/";t.isLocalMidnight=r,t.isMomentPresent=a,t.parseIsoDate=s,t.parseIsoDateFast=l,t.parseUtcDate=c,t.serializeDate=d,t.deserializeDate=u,t.tryDeserializeDate=p,t.isContainedInTimeFrame=v,t.GetTime=g,t.GetDayWithTime=f,t.GetFullDateWithTime=y})(t=e.DateExtensions||(e.DateExtensions={}))})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){var t=(function(){function e(e){this.segments=e}return e.prototype.extend=function(t){return new e(this.segments.concat([t]))},e})();e.Path=t})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){var t=(function(){function e(){}return e.clearQueryString=function(t){var o=e.parseQueryString();return delete o[t],e.rebuildQueryString(o)},e.addOrUpdateQueryString=function(t,o){var i=e.parseQueryString();return i[t]=o,e.rebuildQueryString(i)},e.addOrUpdateQueryStringToUrl=function(t,o){for(var i=e.parseUrl(t),n=e.clearAllQueriesFromUrl(t),r=0,a=Object.keys(o);r<a.length;r++){var s=a[r];i[s]=o[s]}return n+e.rebuildQueryString(i)},e.getQueryStringValue=function(t){var o=e.parseQueryString();return o[t]},e.parseUrl=function(t){var o=t.indexOf("?"),i=o>=0?t.substr(o):null;return e.parseQueryString(i)},e.parseQueryString=function(e){void 0===e&&(e=window.location.search);var t={},o=e;if(o&&"?"===o.substr(0,1))for(var i=o.substr(1).split("&"),n=0;n<i.length;n++){var r=i[n].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t},e.rebuildQueryString=function(e){var t="",o=!0;for(var i in e)o||(t+="&"),t+=encodeURIComponent(i),e[i]&&(t+="="+encodeURIComponent(e[i])),o=!1;return o||(t="?"+t),t},e.clearAllQueriesFromUrl=function(e){var t=e.indexOf("?");return t>=0?e.substr(0,t):e},e})();t.OriginClientActivityIdParameterName="caid",t.OriginRootActivityIdParameterName="raid",t.OriginActivityIdParameterName="aid",e.QueryStringUtil=t})(jsCommon||(jsCommon={}));var powerbi;!(function(e){function t(e){return new i(e)}function o(e){return new i(e)}e.RejectablePromise2=t,e.RejectablePromise=o;var i=(function(){function e(e){var t=this;this.deferred=e,this.state=0,e.promise.then((function(){return t.state=1}),(function(){return t.state=2}))}return e.prototype.then=function(e,t){return this.deferred.promise.then(e,t)},e.prototype.catch=function(e){return this.deferred.promise.catch(e)},e.prototype.finally=function(e){return this.deferred.promise.finally(e)},e.prototype.resolved=function(){return 1===this.state},e.prototype.rejected=function(){return 2===this.state},e.prototype.pending=function(){return 0===this.state},e.prototype.reject=function(e){this.pending()&&(this.deferred.reject(e),this.state=2)},e})()})(powerbi||(powerbi={}));var powerbi;!(function(e){var t=500,o=(function(){function o(e,o){this.maxCacheEntries=o?o:t,this.cache={},this.promiseFactory=e}return o.prototype.getEntryCount=function(){return Object.keys(this.cache).length},o.prototype.hasCacheEntry=function(e){return!!this.getCacheEntry(e)},o.prototype.createCacheEntry=function(t,o){var i=this,n=this.getCacheEntry(t);if(t&&!n){var r=this.promiseFactory,a=this.cache,s=r.defer(),l=e.RejectablePromise(s),c=r.defer(),d=e.RejectablePromise(c);return n={promise:d,refCount:0,context:o},this.appendCacheEntryInternal(t,n),this.getEntryCount()>this.maxCacheEntries&&this.removeCacheEntryInternal(this.firstKey),l.then((function(e){n.updateResult&&(e=n.updateResult(e)),n.result=e,c.resolve(e)}),(function(e){return c.reject(e)})).finally((function(){delete n.updateResult})),d.catch((function(e){return l.reject()})),d.finally((function(){a[t]&&(delete a[t].promise,d.rejected()&&i.removeCacheEntryInternal(t))})),{deferred:s,promise:l}}},o.prototype.clearEntry=function(e,t){var o=this.getCacheEntry(e);if(o){var i=o.promise;return t&&i?i.reject():this.removeCacheEntryInternal(e),!0}return!1},o.prototype.clearAllEntries=function(e){for(var t in this.cache)this.clearEntry(t,e)},o.prototype.bindCacheEntry=function(t,o){var i=this.getCacheEntry(t);if(void 0!==i){var n=this.promiseFactory.defer(),r=e.RejectablePromise(n);if(i.result){var a=o?o(i.result):i.result;return n.resolve(a),r}var s=i.promise;return s?(i.refCount++,r.finally((function(){i.refCount--,0===i.refCount&&s.pending()&&s.reject()})),s.then((function(e){var t=o?o(i.result):i.result;n.resolve(t)}),(function(e){return n.reject(e)})),r):(n.reject(null),r)}},o.prototype.getEntryContext=function(e){var t=this.getCacheEntry(e);if(t)return t.context},o.prototype.keys=function(){return Object.keys(this.cache)},o.prototype.rewriteAllEntries=function(e){var t=[],o=!!e.rewriteKey,i=!!e.rewriteResult,n=this.cache;for(var r in n){if(o){var a=e.rewriteKey(r);a!==r&&t.push({oldKey:r,newKey:a})}if(i){var s=n[r];s&&s.result?s.result=e.rewriteResult(s.result,r):s.updateResult=function(t){return e.rewriteResult(t,r)}}}for(var l=0,c=t.length;l<c;l++)this.changeCacheKey(t[l].oldKey,t[l].newKey)},o.prototype.putCacheResult=function(e,t){var o=this.getCacheEntry(e);o.result?o.result=t:o.updateResult=function(){return t}},o.prototype.appendCacheEntryInternal=function(e,t){if(this.firstKey){var o=this.cache[this.lastKey];o.nextKey=e,t.previousKey=this.lastKey,this.lastKey=e,t.nextKey=void 0}else this.firstKey=e,this.lastKey=e,t.nextKey=void 0,t.previousKey=void 0;this.cache[e]=t},o.prototype.removeCacheEntryInternal=function(e){var t=this.cache[e];if(t){var o=t.previousKey,i=t.nextKey;if(o){var n=this.cache[o];n.nextKey=i}else this.firstKey=i;if(i){var r=this.cache[i];r.previousKey=o}else this.lastKey=o;delete this.cache[e]}},o.prototype.changeCacheKey=function(e,t){if(!t)return this.clearEntry(e,!0);if(this.hasCacheEntry(t)||!this.hasCacheEntry(e))return!1;var o=this.getCacheEntry(e);return this.removeCacheEntryInternal(e),this.appendCacheEntryInternal(t,o),!0},o.prototype.getCacheEntry=function(e){var t;if(e&&(t=this.cache[e])&&(t.promise||t.result))return t},o})();e.RejectablePromiseCache=o})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){e[e.AngularCancelOrTimeout=0]="AngularCancelOrTimeout",e[e.OK=200]="OK",e[e.Accepted=202]="Accepted",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.NotAcceptable=406]="NotAcceptable",e[e.RequestTimeout=408]="RequestTimeout",e[e.RequestEntityTooLarge=413]="RequestEntityTooLarge",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.ServiceUnavailable=503]="ServiceUnavailable"})(t=e.HttpStatusCode||(e.HttpStatusCode={}));var o;!(function(e){e[e.System=0]="System",e[e.User=1]="User",e[e.External=2]="External"})(o=e.ExceptionCulprit||(e.ExceptionCulprit={}))})(powerbi||(powerbi={}));var jsCommon;!(function(e){var t=(function(){function e(e){this._parts=new Array,e&&this._parts.push(e)}return e.prototype.append=function(e){e&&(this._parts[this._parts.length]=e)},e.prototype.appendLine=function(e){e?this._parts[this._parts.length]=e+"\r\n":this._parts[this._parts.length]="\r\n"},e.prototype.clear=function(){this._parts=new Array},e.prototype.isEmpty=function(){return 0===this._parts.length||""===this.toString("")},e.prototype.toString=function(e){var t=this._parts.join(e||"");return t},e})();e.StringBuilder=t})(jsCommon||(jsCommon={}));var powerbi;!(function(e){var t;!(function(t){var o;!(function(e){e[e.PowerBI=0]="PowerBI",e[e.External=1]="External",e[e.User=2]="User"})(o=t.ErrorSource||(t.ErrorSource={}));var i;!(function(e){e[e.Master=0]="Master",e[e.PhonePortrait=1]="PhonePortrait"})(i=t.CanvasLayout||(t.CanvasLayout={})),t.BaseEvent=function(t,o,i,n,r,a,s,l,c,d,u,p){void 0===o&&(o=!1),void 0===i&&(i=void 0),void 0===n&&(n=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===s&&(s=void 0),void 0===l&&(l=!1),void 0===c&&(c=!1),void 0===d&&(d=void 0),void 0===u&&(u=!1),void 0===p&&(p=!1);var v={parentId:t,isError:o,errorSource:i,errorCode:n,errorMessage:r,activityName:a,activityId:s,isDebug:l,isCancelled:c,pingLatency:d,isAppInactive:u,isInCapacity:p},g={name:"BaseEvent",time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:v.parentId},o=typeof v.isError;("boolean"===o&&!!v.isError!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isError=v.isError);var o=typeof v.errorSource;("boolean"===o&&!!v.errorSource!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]);var o=typeof v.errorCode;("boolean"===o&&!!v.errorCode!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorCode=v.errorCode);var o=typeof v.errorMessage;("boolean"===o&&!!v.errorMessage!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorMessage=v.errorMessage);var o=typeof v.activityName;("boolean"===o&&!!v.activityName!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityName=v.activityName);var o=typeof v.activityId;("boolean"===o&&!!v.activityId!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityId=v.activityId);var o=typeof v.isDebug;("boolean"===o&&!!v.isDebug!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isDebug=v.isDebug);var o=typeof v.isCancelled;("boolean"===o&&!!v.isCancelled!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isCancelled=v.isCancelled);var o=typeof v.pingLatency;("boolean"===o&&!!v.pingLatency!=!1||"undefined"!==o&&"boolean"!==o)&&(t.pingLatency=v.pingLatency);var o=typeof v.isAppInactive;("boolean"===o&&!!v.isAppInactive!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isAppInactive=v.isAppInactive);var o=typeof v.isInCapacity;return("boolean"===o&&!!v.isInCapacity!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isInCapacity=v.isInCapacity),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.BaseEventLoggers&&(g.loggers=e.telemetry.BaseEventLoggers),g},t.TimedEvent=function(t,o,i,n,r,a,s,l,c,d,u,p,v,g){void 0===n&&(n=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===s&&(s=void 0),void 0===l&&(l=void 0),void 0===c&&(c=void 0),void 0===d&&(d=!1),void 0===u&&(u=!1),void 0===p&&(p=void 0),void 0===v&&(v=!1),void 0===g&&(g=!1);var f={start:t,end:o,parentId:i,isError:n,errorSource:r,errorCode:a,errorMessage:s,activityName:l,activityId:c,isDebug:d,isCancelled:u,pingLatency:p,isAppInactive:v,isInCapacity:g},y={name:"TimedEvent",time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={start:f.start,end:f.end,parentId:f.parentId},o=typeof f.isError;("boolean"===o&&!!f.isError!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isError=f.isError);var o=typeof f.errorSource;("boolean"===o&&!!f.errorSource!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorSource=e.telemetry.ErrorSource[f.errorSource]);var o=typeof f.errorCode;("boolean"===o&&!!f.errorCode!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorCode=f.errorCode);var o=typeof f.errorMessage;("boolean"===o&&!!f.errorMessage!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorMessage=f.errorMessage);var o=typeof f.activityName;("boolean"===o&&!!f.activityName!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityName=f.activityName);var o=typeof f.activityId;("boolean"===o&&!!f.activityId!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityId=f.activityId);var o=typeof f.isDebug;("boolean"===o&&!!f.isDebug!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isDebug=f.isDebug);var o=typeof f.isCancelled;("boolean"===o&&!!f.isCancelled!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isCancelled=f.isCancelled);var o=typeof f.pingLatency;("boolean"===o&&!!f.pingLatency!=!1||"undefined"!==o&&"boolean"!==o)&&(t.pingLatency=f.pingLatency);var o=typeof f.isAppInactive;("boolean"===o&&!!f.isAppInactive!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isAppInactive=f.isAppInactive);var o=typeof f.isInCapacity;return("boolean"===o&&!!f.isInCapacity!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isInCapacity=f.isInCapacity),t},info:f,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.TimedEventLoggers&&(y.loggers=e.telemetry.TimedEventLoggers),y},t.Verbose=function(t,o,i,n,r,a,s,l,c,d,u,p){void 0===o&&(o=!1),void 0===i&&(i=void 0),void 0===n&&(n=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===s&&(s=void 0),void 0===l&&(l=!1),void 0===c&&(c=!1),void 0===d&&(d=void 0),void 0===u&&(u=!1),void 0===p&&(p=!1);var v={parentId:t,isError:o,errorSource:i,errorCode:n,errorMessage:r,activityName:a,activityId:s,isDebug:l,isCancelled:c,pingLatency:d,isAppInactive:u,isInCapacity:p},g={name:"Verbose",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:v.parentId},o=typeof v.isError;("boolean"===o&&!!v.isError!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isError=v.isError);var o=typeof v.errorSource;("boolean"===o&&!!v.errorSource!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]);var o=typeof v.errorCode;("boolean"===o&&!!v.errorCode!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorCode=v.errorCode);var o=typeof v.errorMessage;("boolean"===o&&!!v.errorMessage!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorMessage=v.errorMessage);var o=typeof v.activityName;("boolean"===o&&!!v.activityName!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityName=v.activityName);var o=typeof v.activityId;("boolean"===o&&!!v.activityId!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityId=v.activityId);var o=typeof v.isDebug;("boolean"===o&&!!v.isDebug!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isDebug=v.isDebug);
var o=typeof v.isCancelled;("boolean"===o&&!!v.isCancelled!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isCancelled=v.isCancelled);var o=typeof v.pingLatency;("boolean"===o&&!!v.pingLatency!=!1||"undefined"!==o&&"boolean"!==o)&&(t.pingLatency=v.pingLatency);var o=typeof v.isAppInactive;("boolean"===o&&!!v.isAppInactive!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isAppInactive=v.isAppInactive);var o=typeof v.isInCapacity;return("boolean"===o&&!!v.isInCapacity!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isInCapacity=v.isInCapacity),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.VerboseLoggers&&(g.loggers=e.telemetry.VerboseLoggers),g},t.VerboseTimedEvent=function(t,o,i,n,r,a,s,l,c,d,u,p,v,g){void 0===n&&(n=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===s&&(s=void 0),void 0===l&&(l=void 0),void 0===c&&(c=void 0),void 0===d&&(d=!1),void 0===u&&(u=!1),void 0===p&&(p=void 0),void 0===v&&(v=!1),void 0===g&&(g=!1);var f={start:t,end:o,parentId:i,isError:n,errorSource:r,errorCode:a,errorMessage:s,activityName:l,activityId:c,isDebug:d,isCancelled:u,pingLatency:p,isAppInactive:v,isInCapacity:g},y={name:"VerboseTimedEvent",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={start:f.start,end:f.end,parentId:f.parentId},o=typeof f.isError;("boolean"===o&&!!f.isError!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isError=f.isError);var o=typeof f.errorSource;("boolean"===o&&!!f.errorSource!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorSource=e.telemetry.ErrorSource[f.errorSource]);var o=typeof f.errorCode;("boolean"===o&&!!f.errorCode!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorCode=f.errorCode);var o=typeof f.errorMessage;("boolean"===o&&!!f.errorMessage!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorMessage=f.errorMessage);var o=typeof f.activityName;("boolean"===o&&!!f.activityName!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityName=f.activityName);var o=typeof f.activityId;("boolean"===o&&!!f.activityId!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityId=f.activityId);var o=typeof f.isDebug;("boolean"===o&&!!f.isDebug!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isDebug=f.isDebug);var o=typeof f.isCancelled;("boolean"===o&&!!f.isCancelled!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isCancelled=f.isCancelled);var o=typeof f.pingLatency;("boolean"===o&&!!f.pingLatency!=!1||"undefined"!==o&&"boolean"!==o)&&(t.pingLatency=f.pingLatency);var o=typeof f.isAppInactive;("boolean"===o&&!!f.isAppInactive!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isAppInactive=f.isAppInactive);var o=typeof f.isInCapacity;return("boolean"===o&&!!f.isInCapacity!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isInCapacity=f.isInCapacity),t},info:f,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.VerboseTimedEventLoggers&&(y.loggers=e.telemetry.VerboseTimedEventLoggers),y},t.Trace=function(t,o){var i={type:t,message:o},n={name:"Trace",category:e.TelemetryCategory.Trace,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var e={type:i.type,message:i.message};return e},info:i,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.TraceLoggers&&(n.loggers=e.telemetry.TraceLoggers),n},t.Error=function(t){var o={message:t},i={name:"Error",category:e.TelemetryCategory.CriticalError,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var e={message:o.message};return e},info:o,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ErrorLoggers&&(i.loggers=e.telemetry.ErrorLoggers),i},t.ErrorWithStackTrace=function(t,o){var i={stack:t,message:o},n={name:"ErrorWithStackTrace",category:e.TelemetryCategory.CriticalError,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var e={stack:i.stack,message:i.message};return e},info:i,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ErrorWithStackTraceLoggers&&(n.loggers=e.telemetry.ErrorWithStackTraceLoggers),n},t.ErrorWithStackTraceAndSourceDetails=function(t,o,i,n,r){var a={source:t,lineNumber:o,columnNumber:i,stack:n,message:r},s={name:"ErrorWithStackTraceAndSourceDetails",category:e.TelemetryCategory.CriticalError,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var e={source:a.source,lineNumber:a.lineNumber,columnNumber:a.columnNumber,stack:a.stack,message:a.message};return e},info:a,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ErrorWithStackTraceAndSourceDetailsLoggers&&(s.loggers=e.telemetry.ErrorWithStackTraceAndSourceDetailsLoggers),s},t.CustomerAction=function(t,o,i,n,r,a,s,l,c,d,u,p){void 0===o&&(o=!1),void 0===i&&(i=void 0),void 0===n&&(n=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===s&&(s=void 0),void 0===l&&(l=!1),void 0===c&&(c=!1),void 0===d&&(d=void 0),void 0===u&&(u=!1),void 0===p&&(p=!1);var v={parentId:t,isError:o,errorSource:i,errorCode:n,errorMessage:r,activityName:a,activityId:s,isDebug:l,isCancelled:c,pingLatency:d,isAppInactive:u,isInCapacity:p},g={name:"CustomerAction",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:v.parentId},o=typeof v.isError;("boolean"===o&&!!v.isError!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isError=v.isError);var o=typeof v.errorSource;("boolean"===o&&!!v.errorSource!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]);var o=typeof v.errorCode;("boolean"===o&&!!v.errorCode!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorCode=v.errorCode);var o=typeof v.errorMessage;("boolean"===o&&!!v.errorMessage!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorMessage=v.errorMessage);var o=typeof v.activityName;("boolean"===o&&!!v.activityName!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityName=v.activityName);var o=typeof v.activityId;("boolean"===o&&!!v.activityId!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityId=v.activityId);var o=typeof v.isDebug;("boolean"===o&&!!v.isDebug!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isDebug=v.isDebug);var o=typeof v.isCancelled;("boolean"===o&&!!v.isCancelled!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isCancelled=v.isCancelled);var o=typeof v.pingLatency;("boolean"===o&&!!v.pingLatency!=!1||"undefined"!==o&&"boolean"!==o)&&(t.pingLatency=v.pingLatency);var o=typeof v.isAppInactive;("boolean"===o&&!!v.isAppInactive!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isAppInactive=v.isAppInactive);var o=typeof v.isInCapacity;return("boolean"===o&&!!v.isInCapacity!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isInCapacity=v.isInCapacity),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.CustomerActionLoggers&&(g.loggers=e.telemetry.CustomerActionLoggers),g},t.SnapShotEmbedUserAction=function(t,o,i,n,r,a,s,l,c,d,u,p){void 0===o&&(o=!1),void 0===i&&(i=void 0),void 0===n&&(n=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===s&&(s=void 0),void 0===l&&(l=!1),void 0===c&&(c=!1),void 0===d&&(d=void 0),void 0===u&&(u=!1),void 0===p&&(p=!1);var v={parentId:t,isError:o,errorSource:i,errorCode:n,errorMessage:r,activityName:a,activityId:s,isDebug:l,isCancelled:c,pingLatency:d,isAppInactive:u,isInCapacity:p},g={name:"SnapShotEmbedUserAction",category:e.TelemetryCategory.SnapShotEmbedUserAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:v.parentId},o=typeof v.isError;("boolean"===o&&!!v.isError!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isError=v.isError);var o=typeof v.errorSource;("boolean"===o&&!!v.errorSource!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]);var o=typeof v.errorCode;("boolean"===o&&!!v.errorCode!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorCode=v.errorCode);var o=typeof v.errorMessage;("boolean"===o&&!!v.errorMessage!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorMessage=v.errorMessage);var o=typeof v.activityName;("boolean"===o&&!!v.activityName!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityName=v.activityName);var o=typeof v.activityId;("boolean"===o&&!!v.activityId!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityId=v.activityId);var o=typeof v.isDebug;("boolean"===o&&!!v.isDebug!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isDebug=v.isDebug);var o=typeof v.isCancelled;("boolean"===o&&!!v.isCancelled!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isCancelled=v.isCancelled);var o=typeof v.pingLatency;("boolean"===o&&!!v.pingLatency!=!1||"undefined"!==o&&"boolean"!==o)&&(t.pingLatency=v.pingLatency);var o=typeof v.isAppInactive;("boolean"===o&&!!v.isAppInactive!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isAppInactive=v.isAppInactive);var o=typeof v.isInCapacity;return("boolean"===o&&!!v.isInCapacity!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isInCapacity=v.isInCapacity),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.SnapShotEmbedUserActionLoggers&&(g.loggers=e.telemetry.SnapShotEmbedUserActionLoggers),g},t.DashboardRootSession=function(t,o,i,n,r,a,s,l,c,d,u,p){void 0===o&&(o=!1),void 0===i&&(i=void 0),void 0===n&&(n=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===s&&(s=void 0),void 0===l&&(l=!1),void 0===c&&(c=!1),void 0===d&&(d=void 0),void 0===u&&(u=!1),void 0===p&&(p=!1);var v={parentId:t,isError:o,errorSource:i,errorCode:n,errorMessage:r,activityName:a,activityId:s,isDebug:l,isCancelled:c,pingLatency:d,isAppInactive:u,isInCapacity:p},g={name:"PBI.Dashboard.RootSession",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:v.parentId},o=typeof v.isError;("boolean"===o&&!!v.isError!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isError=v.isError);var o=typeof v.errorSource;("boolean"===o&&!!v.errorSource!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]);var o=typeof v.errorCode;("boolean"===o&&!!v.errorCode!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorCode=v.errorCode);var o=typeof v.errorMessage;("boolean"===o&&!!v.errorMessage!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorMessage=v.errorMessage);var o=typeof v.activityName;("boolean"===o&&!!v.activityName!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityName=v.activityName);var o=typeof v.activityId;("boolean"===o&&!!v.activityId!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityId=v.activityId);var o=typeof v.isDebug;("boolean"===o&&!!v.isDebug!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isDebug=v.isDebug);var o=typeof v.isCancelled;("boolean"===o&&!!v.isCancelled!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isCancelled=v.isCancelled);var o=typeof v.pingLatency;("boolean"===o&&!!v.pingLatency!=!1||"undefined"!==o&&"boolean"!==o)&&(t.pingLatency=v.pingLatency);var o=typeof v.isAppInactive;("boolean"===o&&!!v.isAppInactive!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isAppInactive=v.isAppInactive);var o=typeof v.isInCapacity;return("boolean"===o&&!!v.isInCapacity!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isInCapacity=v.isInCapacity),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardRootSessionLoggers&&(g.loggers=e.telemetry.DashboardRootSessionLoggers),g},t.WFEInvitationSignUp=function(t,o,i,n,r,a,s,l,c,d,u,p){void 0===o&&(o=!1),void 0===i&&(i=void 0),void 0===n&&(n=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===s&&(s=void 0),void 0===l&&(l=!1),void 0===c&&(c=!1),void 0===d&&(d=void 0),void 0===u&&(u=!1),void 0===p&&(p=!1);var v={parentId:t,isError:o,errorSource:i,errorCode:n,errorMessage:r,activityName:a,activityId:s,isDebug:l,isCancelled:c,pingLatency:d,isAppInactive:u,isInCapacity:p},g={name:"PBI.WFE.InvitationSignUp",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:v.parentId},o=typeof v.isError;("boolean"===o&&!!v.isError!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isError=v.isError);var o=typeof v.errorSource;("boolean"===o&&!!v.errorSource!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]);var o=typeof v.errorCode;("boolean"===o&&!!v.errorCode!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorCode=v.errorCode);var o=typeof v.errorMessage;("boolean"===o&&!!v.errorMessage!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorMessage=v.errorMessage);var o=typeof v.activityName;("boolean"===o&&!!v.activityName!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityName=v.activityName);var o=typeof v.activityId;("boolean"===o&&!!v.activityId!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityId=v.activityId);var o=typeof v.isDebug;("boolean"===o&&!!v.isDebug!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isDebug=v.isDebug);var o=typeof v.isCancelled;("boolean"===o&&!!v.isCancelled!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isCancelled=v.isCancelled);var o=typeof v.pingLatency;("boolean"===o&&!!v.pingLatency!=!1||"undefined"!==o&&"boolean"!==o)&&(t.pingLatency=v.pingLatency);var o=typeof v.isAppInactive;("boolean"===o&&!!v.isAppInactive!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isAppInactive=v.isAppInactive);var o=typeof v.isInCapacity;return("boolean"===o&&!!v.isInCapacity!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isInCapacity=v.isInCapacity),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.WFEInvitationSignUpLoggers&&(g.loggers=e.telemetry.WFEInvitationSignUpLoggers),g},t.WFEError=function(t,o,i,n,r,a,s,l,c,d,u,p,v,g){void 0===n&&(n=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===s&&(s=void 0),void 0===l&&(l=void 0),void 0===c&&(c=void 0),void 0===d&&(d=!1),void 0===u&&(u=!1),void 0===p&&(p=void 0),void 0===v&&(v=!1),void 0===g&&(g=!1);var f={errorCode1:t,errorType:o,parentId:i,isError:n,errorSource:r,errorCode:a,errorMessage:s,activityName:l,activityId:c,isDebug:d,isCancelled:u,pingLatency:p,isAppInactive:v,isInCapacity:g},y={name:"PBI.WFE.Error",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={errorCode1:f.errorCode1,errorType:f.errorType,parentId:f.parentId},o=typeof f.isError;("boolean"===o&&!!f.isError!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isError=f.isError);var o=typeof f.errorSource;("boolean"===o&&!!f.errorSource!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorSource=e.telemetry.ErrorSource[f.errorSource]);var o=typeof f.errorCode;("boolean"===o&&!!f.errorCode!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorCode=f.errorCode);var o=typeof f.errorMessage;("boolean"===o&&!!f.errorMessage!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorMessage=f.errorMessage);var o=typeof f.activityName;("boolean"===o&&!!f.activityName!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityName=f.activityName);var o=typeof f.activityId;("boolean"===o&&!!f.activityId!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityId=f.activityId);var o=typeof f.isDebug;("boolean"===o&&!!f.isDebug!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isDebug=f.isDebug);var o=typeof f.isCancelled;("boolean"===o&&!!f.isCancelled!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isCancelled=f.isCancelled);var o=typeof f.pingLatency;("boolean"===o&&!!f.pingLatency!=!1||"undefined"!==o&&"boolean"!==o)&&(t.pingLatency=f.pingLatency);var o=typeof f.isAppInactive;("boolean"===o&&!!f.isAppInactive!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isAppInactive=f.isAppInactive);var o=typeof f.isInCapacity;return("boolean"===o&&!!f.isInCapacity!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isInCapacity=f.isInCapacity),t},info:f,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.WFEErrorLoggers&&(y.loggers=e.telemetry.WFEErrorLoggers),y},t.DashboardErrorDialog=function(t,o,i,n,r){void 0===n&&(n=void 0);var a={raid:t,caid:o,errorType:i,errorSource:n,message:r},s={name:"PBI.Dashboard.ErrorDialog",category:e.TelemetryCategory.CriticalError,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={raid:a.raid,caid:a.caid,errorType:a.errorType,message:a.message},o=typeof a.errorSource;return("boolean"===o&&!!a.errorSource!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorSource=e.telemetry.ErrorSource[a.errorSource]),t},info:a,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardErrorDialogLoggers&&(s.loggers=e.telemetry.DashboardErrorDialogLoggers),s},t.MobileLandingContinuedToWeb=function(t,o,i,n,r,a,s,l,c,d,u,p){void 0===o&&(o=!1),void 0===i&&(i=void 0),void 0===n&&(n=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===s&&(s=void 0),void 0===l&&(l=!1),void 0===c&&(c=!1),void 0===d&&(d=void 0),void 0===u&&(u=!1),void 0===p&&(p=!1);var v={parentId:t,isError:o,errorSource:i,errorCode:n,errorMessage:r,activityName:a,activityId:s,isDebug:l,isCancelled:c,pingLatency:d,isAppInactive:u,isInCapacity:p},g={name:"PBI.MobileLanding.ContinuedToWeb",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:v.parentId},o=typeof v.isError;("boolean"===o&&!!v.isError!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isError=v.isError);var o=typeof v.errorSource;("boolean"===o&&!!v.errorSource!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]);var o=typeof v.errorCode;("boolean"===o&&!!v.errorCode!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorCode=v.errorCode);var o=typeof v.errorMessage;("boolean"===o&&!!v.errorMessage!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorMessage=v.errorMessage);var o=typeof v.activityName;("boolean"===o&&!!v.activityName!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityName=v.activityName);var o=typeof v.activityId;("boolean"===o&&!!v.activityId!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityId=v.activityId);var o=typeof v.isDebug;("boolean"===o&&!!v.isDebug!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isDebug=v.isDebug);var o=typeof v.isCancelled;("boolean"===o&&!!v.isCancelled!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isCancelled=v.isCancelled);var o=typeof v.pingLatency;("boolean"===o&&!!v.pingLatency!=!1||"undefined"!==o&&"boolean"!==o)&&(t.pingLatency=v.pingLatency);var o=typeof v.isAppInactive;("boolean"===o&&!!v.isAppInactive!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isAppInactive=v.isAppInactive);var o=typeof v.isInCapacity;return("boolean"===o&&!!v.isInCapacity!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isInCapacity=v.isInCapacity),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.MobileLandingContinuedToWebLoggers&&(g.loggers=e.telemetry.MobileLandingContinuedToWebLoggers),g},t.MobileLandingDownloadApp=function(t,o,i,n,r,a,s,l,c,d,u,p){void 0===o&&(o=!1),void 0===i&&(i=void 0),void 0===n&&(n=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===s&&(s=void 0),void 0===l&&(l=!1),void 0===c&&(c=!1),void 0===d&&(d=void 0),void 0===u&&(u=!1),void 0===p&&(p=!1);var v={parentId:t,isError:o,errorSource:i,errorCode:n,errorMessage:r,activityName:a,activityId:s,isDebug:l,isCancelled:c,pingLatency:d,isAppInactive:u,isInCapacity:p},g={name:"PBI.MobileLanding.DownloadApp",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:v.parentId},o=typeof v.isError;("boolean"===o&&!!v.isError!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isError=v.isError);var o=typeof v.errorSource;("boolean"===o&&!!v.errorSource!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]);var o=typeof v.errorCode;("boolean"===o&&!!v.errorCode!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorCode=v.errorCode);var o=typeof v.errorMessage;("boolean"===o&&!!v.errorMessage!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorMessage=v.errorMessage);var o=typeof v.activityName;("boolean"===o&&!!v.activityName!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityName=v.activityName);var o=typeof v.activityId;("boolean"===o&&!!v.activityId!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityId=v.activityId);var o=typeof v.isDebug;("boolean"===o&&!!v.isDebug!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isDebug=v.isDebug);var o=typeof v.isCancelled;("boolean"===o&&!!v.isCancelled!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isCancelled=v.isCancelled);var o=typeof v.pingLatency;("boolean"===o&&!!v.pingLatency!=!1||"undefined"!==o&&"boolean"!==o)&&(t.pingLatency=v.pingLatency);var o=typeof v.isAppInactive;("boolean"===o&&!!v.isAppInactive!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isAppInactive=v.isAppInactive);var o=typeof v.isInCapacity;return("boolean"===o&&!!v.isInCapacity!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isInCapacity=v.isInCapacity),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.MobileLandingDownloadAppLoggers&&(g.loggers=e.telemetry.MobileLandingDownloadAppLoggers),g},t.DashboardUnhandledAngularException=function(t,o){var i={stack:t,message:o},n={name:"PBI.Dashboard.UnhandledAngularException",category:e.TelemetryCategory.CriticalError,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var e={stack:i.stack,message:i.message};return e},info:i,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardUnhandledAngularExceptionLoggers&&(n.loggers=e.telemetry.DashboardUnhandledAngularExceptionLoggers),n},t.VisualException=function(t,o,i,n,r,a,s,l){var c={visualType:t,isCustom:o,apiVersion:i,source:n,lineNumber:r,columnNumber:a,stack:s,message:l},d={name:"PBI.Visual.Exception",category:e.TelemetryCategory.CriticalError,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var e={visualType:c.visualType,isCustom:c.isCustom,apiVersion:c.apiVersion,source:c.source,lineNumber:c.lineNumber,columnNumber:c.columnNumber,stack:c.stack,message:c.message};return e},info:c,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.VisualExceptionLoggers&&(d.loggers=e.telemetry.VisualExceptionLoggers),d},t.DashboardUnhandledException=function(t,o,i,n,r){var a={source:t,lineNumber:o,columnNumber:i,stack:n,message:r},s={name:"PBI.Dashboard.UnhandledException",category:e.TelemetryCategory.CriticalError,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var e={source:a.source,lineNumber:a.lineNumber,columnNumber:a.columnNumber,stack:a.stack,message:a.message};return e},info:a,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardUnhandledExceptionLoggers&&(s.loggers=e.telemetry.DashboardUnhandledExceptionLoggers),s},t.DashboardUnhandledStacklessException=function(t,o,i,n){var r={source:t,lineNumber:o,columnNumber:i,message:n},a={name:"PBI.Dashboard.UnhandledStacklessException",category:e.TelemetryCategory.CriticalError,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var e={source:r.source,lineNumber:r.lineNumber,columnNumber:r.columnNumber,message:r.message};return e},info:r,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardUnhandledStacklessExceptionLoggers&&(a.loggers=e.telemetry.DashboardUnhandledStacklessExceptionLoggers),a},t.WFEReopenUserAccount=function(t,o,i,n,r,a,s,l,c,d,u,p){void 0===o&&(o=!1),void 0===i&&(i=void 0),void 0===n&&(n=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===s&&(s=void 0),void 0===l&&(l=!1),void 0===c&&(c=!1),void 0===d&&(d=void 0),void 0===u&&(u=!1),void 0===p&&(p=!1);var v={parentId:t,isError:o,errorSource:i,errorCode:n,errorMessage:r,activityName:a,activityId:s,isDebug:l,isCancelled:c,pingLatency:d,isAppInactive:u,isInCapacity:p},g={name:"PBI.WFE.ReopenUserAccount",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:v.parentId},o=typeof v.isError;("boolean"===o&&!!v.isError!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isError=v.isError);var o=typeof v.errorSource;("boolean"===o&&!!v.errorSource!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]);var o=typeof v.errorCode;("boolean"===o&&!!v.errorCode!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorCode=v.errorCode);var o=typeof v.errorMessage;("boolean"===o&&!!v.errorMessage!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorMessage=v.errorMessage);var o=typeof v.activityName;("boolean"===o&&!!v.activityName!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityName=v.activityName);var o=typeof v.activityId;("boolean"===o&&!!v.activityId!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityId=v.activityId);var o=typeof v.isDebug;("boolean"===o&&!!v.isDebug!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isDebug=v.isDebug);var o=typeof v.isCancelled;("boolean"===o&&!!v.isCancelled!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isCancelled=v.isCancelled);var o=typeof v.pingLatency;("boolean"===o&&!!v.pingLatency!=!1||"undefined"!==o&&"boolean"!==o)&&(t.pingLatency=v.pingLatency);var o=typeof v.isAppInactive;("boolean"===o&&!!v.isAppInactive!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isAppInactive=v.isAppInactive);var o=typeof v.isInCapacity;return("boolean"===o&&!!v.isInCapacity!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isInCapacity=v.isInCapacity),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.WFEReopenUserAccountLoggers&&(g.loggers=e.telemetry.WFEReopenUserAccountLoggers),g},t.WFEAccountClosedPage=function(t,o,i,n,r,a,s,l,c,d,u,p){void 0===o&&(o=!1),void 0===i&&(i=void 0),void 0===n&&(n=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===s&&(s=void 0),void 0===l&&(l=!1),void 0===c&&(c=!1),void 0===d&&(d=void 0),void 0===u&&(u=!1),void 0===p&&(p=!1);var v={parentId:t,isError:o,errorSource:i,errorCode:n,errorMessage:r,activityName:a,activityId:s,isDebug:l,isCancelled:c,pingLatency:d,isAppInactive:u,isInCapacity:p},g={name:"PBI.WFE.AccountClosedPage",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:v.parentId},o=typeof v.isError;("boolean"===o&&!!v.isError!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isError=v.isError);var o=typeof v.errorSource;("boolean"===o&&!!v.errorSource!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]);var o=typeof v.errorCode;("boolean"===o&&!!v.errorCode!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorCode=v.errorCode);var o=typeof v.errorMessage;("boolean"===o&&!!v.errorMessage!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorMessage=v.errorMessage);var o=typeof v.activityName;("boolean"===o&&!!v.activityName!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityName=v.activityName);var o=typeof v.activityId;("boolean"===o&&!!v.activityId!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityId=v.activityId);var o=typeof v.isDebug;("boolean"===o&&!!v.isDebug!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isDebug=v.isDebug);var o=typeof v.isCancelled;("boolean"===o&&!!v.isCancelled!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isCancelled=v.isCancelled);var o=typeof v.pingLatency;("boolean"===o&&!!v.pingLatency!=!1||"undefined"!==o&&"boolean"!==o)&&(t.pingLatency=v.pingLatency);var o=typeof v.isAppInactive;("boolean"===o&&!!v.isAppInactive!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isAppInactive=v.isAppInactive);var o=typeof v.isInCapacity;return("boolean"===o&&!!v.isInCapacity!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isInCapacity=v.isInCapacity),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.WFEAccountClosedPageLoggers&&(g.loggers=e.telemetry.WFEAccountClosedPageLoggers),g},t.VisualError=function(t,o,i,n){var r={errorCode:t,targetVisualType:o,debugErrorInfo:i,message:n},a={name:"PBI.Visual.Error",category:e.TelemetryCategory.CriticalError,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var e={errorCode:r.errorCode,targetVisualType:r.targetVisualType,debugErrorInfo:r.debugErrorInfo,message:r.message};return e},info:r,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.VisualErrorLoggers&&(a.loggers=e.telemetry.VisualErrorLoggers),a},t.VisualWarning=function(t,o,i,n,r,a,s,l,c,d,u,p,v){void 0===i&&(i=!1),void 0===n&&(n=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===s&&(s=void 0),void 0===l&&(l=void 0),void 0===c&&(c=!1),void 0===d&&(d=!1),void 0===u&&(u=void 0),void 0===p&&(p=!1),void 0===v&&(v=!1);var g={targetVisualType:t,parentId:o,isError:i,errorSource:n,errorCode:r,errorMessage:a,activityName:s,activityId:l,isDebug:c,isCancelled:d,pingLatency:u,isAppInactive:p,isInCapacity:v},f={name:"PBI.Visual.Warning",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={targetVisualType:g.targetVisualType,parentId:g.parentId},o=typeof g.isError;("boolean"===o&&!!g.isError!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isError=g.isError);var o=typeof g.errorSource;("boolean"===o&&!!g.errorSource!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorSource=e.telemetry.ErrorSource[g.errorSource]);var o=typeof g.errorCode;("boolean"===o&&!!g.errorCode!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorCode=g.errorCode);var o=typeof g.errorMessage;("boolean"===o&&!!g.errorMessage!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorMessage=g.errorMessage);var o=typeof g.activityName;("boolean"===o&&!!g.activityName!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityName=g.activityName);var o=typeof g.activityId;("boolean"===o&&!!g.activityId!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityId=g.activityId);var o=typeof g.isDebug;("boolean"===o&&!!g.isDebug!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isDebug=g.isDebug);var o=typeof g.isCancelled;("boolean"===o&&!!g.isCancelled!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isCancelled=g.isCancelled);var o=typeof g.pingLatency;("boolean"===o&&!!g.pingLatency!=!1||"undefined"!==o&&"boolean"!==o)&&(t.pingLatency=g.pingLatency);var o=typeof g.isAppInactive;("boolean"===o&&!!g.isAppInactive!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isAppInactive=g.isAppInactive);var o=typeof g.isInCapacity;return("boolean"===o&&!!g.isInCapacity!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isInCapacity=g.isInCapacity),t},info:g,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.VisualWarningLoggers&&(f.loggers=e.telemetry.VisualWarningLoggers),f},t.VisualApiUsage=function(t,o,i,n,r,a,s,l,c,d,u,p,v,g,f,y,m,h){void 0===l&&(l=!1),void 0===c&&(c=void 0),void 0===d&&(d=void 0),void 0===u&&(u=void 0),void 0===p&&(p=void 0),void 0===v&&(v=void 0),void 0===g&&(g=!1),void 0===f&&(f=!1),void 0===y&&(y=void 0),void 0===m&&(m=!1),void 0===h&&(h=!1);var C={name:t,apiVersion:o,custom:i,visualVersion:n,start:r,end:a,parentId:s,isError:l,errorSource:c,errorCode:d,errorMessage:u,activityName:p,activityId:v,isDebug:g,isCancelled:f,pingLatency:y,isAppInactive:m,isInCapacity:h},b={name:"PBI.Visual.ApiUsage",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={name:C.name,apiVersion:C.apiVersion,custom:C.custom,visualVersion:C.visualVersion,start:C.start,end:C.end,parentId:C.parentId},o=typeof C.isError;("boolean"===o&&!!C.isError!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isError=C.isError);var o=typeof C.errorSource;("boolean"===o&&!!C.errorSource!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorSource=e.telemetry.ErrorSource[C.errorSource]);var o=typeof C.errorCode;("boolean"===o&&!!C.errorCode!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorCode=C.errorCode);var o=typeof C.errorMessage;("boolean"===o&&!!C.errorMessage!=!1||"undefined"!==o&&"boolean"!==o)&&(t.errorMessage=C.errorMessage);var o=typeof C.activityName;("boolean"===o&&!!C.activityName!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityName=C.activityName);var o=typeof C.activityId;("boolean"===o&&!!C.activityId!=!1||"undefined"!==o&&"boolean"!==o)&&(t.activityId=C.activityId);var o=typeof C.isDebug;
("boolean"===o&&!!C.isDebug!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isDebug=C.isDebug);var o=typeof C.isCancelled;("boolean"===o&&!!C.isCancelled!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isCancelled=C.isCancelled);var o=typeof C.pingLatency;("boolean"===o&&!!C.pingLatency!=!1||"undefined"!==o&&"boolean"!==o)&&(t.pingLatency=C.pingLatency);var o=typeof C.isAppInactive;("boolean"===o&&!!C.isAppInactive!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isAppInactive=C.isAppInactive);var o=typeof C.isInCapacity;return("boolean"===o&&!!C.isInCapacity!=!1||"undefined"!==o&&"boolean"!==o)&&(t.isInCapacity=C.isInCapacity),t},info:C,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.VisualApiUsageLoggers&&(b.loggers=e.telemetry.VisualApiUsageLoggers),b}})(t=e.telemetry||(e.telemetry={}))})(powerbi||(powerbi={}));var appInsights,appInsightsConfig;appInsights=appInsights||{trackPageView:function(e,t){},trackEvent:function(e,t){},trackTrace:function(e,t){},flush:function(){}};var powerbi;!(function(e){function t(){if(!("undefined"!=typeof isTelemetryDisabled&&isTelemetryDisabled||"undefined"==typeof appInsightsV2InstrKey&&"undefined"==typeof appInsightsConfig)){var t="undefined"!=typeof appInsightsV2InstrKey?appInsightsV2InstrKey:"",o=appInsightsConfig||{instrumentationKey:t};o.disableAjaxTracking=!0,appInsights=(function(t){function o(e){i[e]=function(){var t=arguments;i.queue.push((function(){i[e].apply(i,t)}))}}var i={config:t},n=document,r=window,a="script",s=n.createElement(a);s.src=t.url||e.build+"/scripts/ai.0.js",n.getElementsByTagName(a)[0].parentNode.appendChild(s),i.cookie=n.cookie,i.queue=[];for(var l=["Event","Exception","Metric","PageView","Trace"];l.length;)o("track"+l.pop());if(!t.disableExceptionTracking){var c="onerror";o("_"+c);var d=r[c];r[c]=function(e,t,o,n,r){var a=!!d&&!!d(e,t,o,n,r);return a!==!0&&i["_"+c](e,t,o,n,r),a}}return i})(o)}}var o=jsCommon.QueryStringUtil,i="PowerBIPageView",n=(function(){function t(e,o){this.hostData=null,this.appInsightsV2Service=e,this.appInsightsV2Service.trackPageView(i,t.scrubUrl(o||window.location.href))}return t.prototype.initialize=function(e){this.hostData=e},t.prototype.getType=function(){return e.LoggerServiceType.AppInsightDeprecated},t.prototype.getCategoryOfEvent=function(t){var o=t.category?t.category:e.TelemetryCategory.Verbose;return e.TelemetryCategory[o]},t.prototype.logEvent=function(t){t.category===e.TelemetryCategory.Trace?this.trackTraceInternal(t.getFormattedInfoObject(),this.hostData):this.endTimedEvent(t)},t.prototype.startTimedEvent=function(e){},t.prototype.endTimedEvent=function(e){var t=$.extend({},this.hostData,{id:e.id,start:new Date(e.time).toISOString(),end:(new Date).toISOString(),category:this.getCategoryOfEvent(e)},e.getFormattedInfoObject());this.trackEventInternal(e.name,t)},t.prototype.flush=function(){this.appInsightsV2Service.flush&&this.appInsightsV2Service.flush()},t.prototype.trackEventInternal=function(e,t){try{this.appInsightsV2Service.trackEvent(e,t)}catch(e){}},t.prototype.trackTraceInternal=function(e,t){try{this.appInsightsV2Service.trackTrace(e,t)}catch(e){}},t.scrubUrl=function(t){var i=o.clearAllQueriesFromUrl(t),n="",r=o.parseUrl(t);for(var a in r){n+=0===n.length?"?":"&";var s=r[a];n+=encodeURIComponent(a)+"=<pi>"+(s?e.getHashCode(s):"")+"</pi>"}return i+n},t})();e.AppInsightsV2Service=n,e.loadAppInsightsV2=t,t()})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){e[e.Open=0]="Open",e[e.CanBeClosed=1]="CanBeClosed"})(t=e.Status||(e.Status={}));var o=(function(){function e(e){this.eventsInStorage=[],this.loggerService=e}return e.prototype.initialize=function(e){this.loggerService.initialize(e)},e.prototype.getType=function(){return this.loggerService.getType()},e.prototype.logEvent=function(e){this.loggerService.logEvent(e)},e.prototype.startTimedEvent=function(e){this.eventsInStorage.push({eventData:e,status:t.Open}),this.loggerService.startTimedEvent(e)},e.prototype.endTimedEvent=function(e){var o=this,i=this.getChildren(e.id);if(this.removeEventsWithId(e.id),0===i.length){this.loggerService.endTimedEvent(e);for(var n=e;n;){var r=this.eventsInStorage.filter((function(e){return n.info.parentId&&e.eventData.id===n.info.parentId&&e.status===t.CanBeClosed&&0===o.getChildren(e.eventData.id).length}));r.length>0?(this.loggerService.endTimedEvent(r[0].eventData),this.removeEventsWithId(r[0].eventData.id),n=r[0].eventData):n=null}}else this.eventsInStorage.push({eventData:e,status:t.CanBeClosed})},e.prototype.flush=function(){this.loggerService.flush()},e.prototype.getChildren=function(e){return this.eventsInStorage.filter((function(t){return void 0!==t.eventData.info.parentId&&t.eventData.info.parentId===e}))},e.prototype.removeEventsWithId=function(e){for(var t=this.eventsInStorage.length-1;t>=0;t--){var o=this.eventsInStorage[t].eventData;o.id===e&&this.eventsInStorage.splice(t,1)}},e})();e.AutoEndingWrapper=o})(powerbi||(powerbi={}));var powerbi;!(function(e){var t=(function(){function t(){}return t.prototype.initialize=function(e){this.hostData=e},t.prototype.getType=function(){return e.LoggerServiceType.Etw},t.prototype.logEvent=function(e){},t.prototype.startTimedEvent=function(e){if(this.isProfilerAvailable()){var t=e,o=t.info.parentId?t.info.parentId:"",i=e.name+"_A:"+e.id+"_P:"+o+"_C:"+this.hostData.sessionId+":Begin";window.msWriteProfilerMark(i)}},t.prototype.endTimedEvent=function(e){if(this.isProfilerAvailable()){var t=e,o=t.info.parentId?t.info.parentId:"",i=e.name+"_A:"+e.id+"_P:"+o+"_C:"+this.hostData.sessionId+":End";window.msWriteProfilerMark(i)}},t.prototype.flush=function(){},t.prototype.isProfilerAvailable=function(){return null!=window.msWriteProfilerMark},t})();e.EtwPerfLoggerService=t})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function o(t){switch(t){case e.ExceptionCulprit.External:return n.External;case e.ExceptionCulprit.User:return n.User;case e.ExceptionCulprit.System:default:return n.PowerBI}}function i(t,i){if(t&&t.code){var r=t.code;return t["pbi.error"]&&null!=t["pbi.error"].exceptionCulprit?{errorCode:r,errorSource:o(t["pbi.error"].exceptionCulprit)}:null==i||i!==e.HttpStatusCode.Unauthorized&&i!==e.HttpStatusCode.Forbidden?{errorCode:r,errorSource:n.PowerBI}:{errorCode:r,errorSource:n.User}}if(null!=i)return{errorCode:"HttpStatusCode = "+i,errorSource:n.PowerBI}}var n=e.telemetry.ErrorSource;t.getTelemetryErrorDetails=i})(t=e.errorDetailsHelper||(e.errorDetailsHelper={}))})(powerbi||(powerbi={}));var jsCommon;!(function(e){var t;!(function(e){function t(e,t){if(!e&&!t)return!0;if(!!e!=!!t||e.length!==t.length)return!1;for(var o=0,i=e.length;o<i;o++)if(!e[o].equals(t[o]))return!1;return!0}e.comparableSequenceEqual=t})(t=e.ArrayExtensions||(e.ArrayExtensions={}))})(jsCommon||(jsCommon={}));var powerbi;!(function(e){var t=(function(){function e(){}return e.prototype.shoudLog=function(e,t){return!0},e})();e.SendAllRule=t;var o=(function(){function e(){}return e.prototype.shoudLog=function(e,t){return!1},e})();e.SendNothingRule=o;var i=(function(){function t(e){this.shouldLogMap=[];for(var t=0;t<e.length;t++){var o=e[t],i=o.purpose;this.shouldLogMap[i]=o.sampleRate>=1-Math.random()}}return t.prototype.shoudLog=function(t,o){var i=t.loggers;if(i)return(i&o)===o;var n=t.category?e.TelemetryCategory[t.category]:e.TelemetryCategory[e.TelemetryCategory.Verbose];return void 0!==this.shouldLogMap[n]&&this.shouldLogMap[n]},t})();e.LoggerServiceRule=i})(powerbi||(powerbi={}));var powerbi;!(function(e){var t=(function(){function e(e,t){this.loggerService=e,this.rule=t}return e.prototype.initialize=function(e){this.loggerService.initialize(e)},e.prototype.getType=function(){return this.loggerService.getType()},e.prototype.shouldLog=function(e){return!!this.rule.shoudLog(e,this.getType())},e.prototype.logEvent=function(e){this.shouldLog(e)&&this.loggerService.logEvent(e)},e.prototype.startTimedEvent=function(e){this.loggerService.startTimedEvent(e)},e.prototype.endTimedEvent=function(e){this.shouldLog(e)&&this.loggerService.endTimedEvent(e)},e.prototype.flush=function(){this.loggerService.flush()},e})();e.LoggerServiceWrapper=t})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e){var t,o,i,n=0;if(0===e.length)return n;var r=e.toLowerCase();for(t=0,i=r.length;t<i;t++)o=r.charCodeAt(t),n=(n<<5)-n+o,n|=0;return n}function o(e){return t(e).toString()}e.getHashCode=t,e.obfuscate=o})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function o(){return"string"!=typeof window.sessionSource&&(window.sessionSource="PowerBI"),"string"!=typeof window.embedUserId&&(window.embedUserId=""),new i(e.telemetrySamplingRules,e.session.userInfo,e.build,clusterUri,e.telemetryConstants.pbiClientName,window.telemetrySessionId,window.sessionSource,window.embedUserId)}t.createTelemetryHostService=o,t.NullGuid="00000000-0000-0000-0000-000000000000";var i=(function(){function o(o,i,r,a,s,l,c,d){this.loggers=n.getDefaultLoggingCollection(o),this.hostData={sessionId:l||"",client:s||"",build:r||"",cluster:a||"",userId:i&&i.puid?i.puid:t.NullGuid,userObjectId:i&&i.uoid?i.uoid:t.NullGuid,tenantObjectId:"undefined"==typeof window.tenantId?t.NullGuid:window.tenantId,isInternalUser:e.session.UserInfoUtils.isInternalUser(),sessionSource:c,embedUserId:d}}return o.prototype.getLoggerServices=function(){return this.loggers},o.prototype.getHostData=function(){return this.hostData},o})(),n=(function(){function t(){}return t.getDefaultLoggingCollection=function(e){return"standard"===e?t.getStandardCollectionRules():"snapshotEmbed"===e?t.getSnapShotEmbedCollectionRules():"none"===e?t.getLogNothingCollectionRules():t.getLoggingCollection(e)},t.getLoggingCollection=function(t){var o=new Array,i="undefined"!=typeof window.localyticsInstrKey?window.localyticsInstrKey:"";return t&&(t.perf&&o.push(this.wrapLogger(t.perf,new e.AutoEndingWrapper(new e.EtwPerfLoggerService))),t.appInsights&&o.push(this.wrapLogger(t.appInsights,new e.AppInsightsV2Service(appInsights))),t.localytics&&o.push(this.wrapLogger(t.localytics,new e.LocalyticsService(i)))),o},t.getStandardCollectionRules=function(){var o=new Array,i="undefined"!=typeof window.localyticsInstrKey?window.localyticsInstrKey:"";return o.push(this.wrapLogger(t.EtwStandardLoggerConfig,new e.AutoEndingWrapper(new e.EtwPerfLoggerService))),o.push(this.wrapLogger(t.AppInsightStandardLoggerConfig,new e.AppInsightsV2Service(appInsights))),o.push(this.wrapLogger(t.LocalyticsStandardLoggerConfig,new e.LocalyticsService(i||""))),o},t.getSnapShotEmbedCollectionRules=function(){var o=new Array,i="undefined"!=typeof window.localyticsInstrKey?window.localyticsInstrKey:"";return o.push(this.wrapLogger(t.snapEmbededLoggerConfig,new e.AutoEndingWrapper(new e.EtwPerfLoggerService))),o.push(this.wrapLogger(t.snapEmbededLoggerConfig,new e.AppInsightsV2Service(appInsights))),o.push(this.wrapLogger(t.snapEmbededLoggerConfig,new e.LocalyticsService(i||""))),o},t.getLogNothingCollectionRules=function(){var e=new Array;return e},t.wrapLogger=function(t,o){var i=t?new e.LoggerServiceRule(t):new e.SendNothingRule,n=new e.LoggerServiceWrapper(o,i);return n},t})();n.LocalyticsStandardLoggerConfig=[{purpose:"CriticalError",sampleRate:1},{purpose:"CustomerAction",sampleRate:1},{purpose:"Verbose",sampleRate:0},{purpose:"Trace",sampleRate:0}],n.AppInsightStandardLoggerConfig=[{purpose:"CriticalError",sampleRate:1},{purpose:"CustomerAction",sampleRate:1},{purpose:"Verbose",sampleRate:1},{purpose:"Trace",sampleRate:0}],n.EtwStandardLoggerConfig=[{purpose:"CriticalError",sampleRate:1},{purpose:"CustomerAction",sampleRate:1},{purpose:"Verbose",sampleRate:1},{purpose:"Trace",sampleRate:0}],n.snapEmbededLoggerConfig=[{purpose:"SnapShotEmbedUserAction",sampleRate:1}],t.TelemetryConfigurations=n})(t=e.telemetry||(e.telemetry={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o=(function(){function o(){}return o.getFullName=function(){return e.session.userInfo.givenName+" "+e.session.userInfo.surname},o.isInternalUser=function(){if(!e.session.userInfo||!e.session.userInfo.name)return!1;var t=e.session.userInfo.name.toLowerCase();return t.indexOf("@microsoft.com")>=0||t.indexOf(".microsoft.com")>=0},o.getUPN=function(){return t.userInfo.name},o.getEmailAddressForReceivingMail=function(){var t=e.session.userInfo;return null==t?"":_.isEmpty(t.alternateEmail)?t.name:t.alternateEmail},o})();t.UserInfoUtils=o})(t=e.session||(e.session={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){e.pbiClientName="PowerBI.com",e.httpActivityIdHeader="ActivityId",e.httpRequestIdHeader="RequestId"})(t=e.telemetryConstants||(e.telemetryConstants={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){e[e.Verbose=0]="Verbose",e[e.CustomerAction=1]="CustomerAction",e[e.CriticalError=2]="CriticalError",e[e.Trace=3]="Trace",e[e.SnapShotEmbedUserAction=4]="SnapShotEmbedUserAction"})(t=e.TelemetryCategory||(e.TelemetryCategory={}));var o;!(function(e){e[e.Localytics=1]="Localytics",e[e.AppInsightDeprecated=2]="AppInsightDeprecated",e[e.AppInsight=4]="AppInsight",e[e.Etw=8]="Etw",e[e.Mobile=16]="Mobile",e[e.WinJs=32]="WinJs",e[e.Designer=64]="Designer"})(o=e.LoggerServiceType||(e.LoggerServiceType={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t){return new n(e,t)}e.createTelemetryService=t;var o=(function(){function e(){}return e})();e.PerfEvent=o;var i=18e5;e.ForceResolveTimeout=12e4;var n=(function(){function t(e,t){this.userActivityContextService=t,this.loggerServices=e?e.getLoggerServices():[],this.hostData=e?e.getHostData():{},this.startSession(),this.startSessionTimeout(),this.isSuspended=!1,this.hostInfo={},this.openActivities=[]}return t.prototype.startSession=function(){for(var t=0,o=this.loggerServices.length;t<o;t++)this.loggerServices[t].initialize(this.hostData);this._rootEvent=e.telemetry.DashboardRootSession("",!1),this.logEventInternal(this._rootEvent)},t.prototype.startSessionTimeout=function(){var e=this;this.sessionExpirationTimerId=setTimeout((function(){e.hostData.sessionId=jsCommon.Utility.generateGuid(),e.startSession()}),i)},t.prototype.resetSessionTimeout=function(){window.clearTimeout(this.sessionExpirationTimerId),this.startSessionTimeout()},t.prototype.suspend=function(){this.isSuspended=!0,window.clearTimeout(this.sessionExpirationTimerId)},t.prototype.resume=function(){this.isSuspended=!1,this.resetSessionTimeout()},t.prototype.flush=function(){for(var e=this.getLoggerServices(),t=0,o=e.length;t<o;t++)e[t].flush()},t.prototype.setHostInfo=function(e,t){return null==t?void delete this.hostInfo[e]:void(this.hostInfo[e]=t)},t.prototype.logEvent=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];t.push(this.getParentId());var i=e.apply(null,t);return this.updateEventInfo(i),this.logEventInternal(i),i},t.prototype.logChildEvent=function(e,t){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];o.push(e.id);var n=t.apply(null,o);return this.updateEventInfo(n),this.logEventInternal(n),n},t.prototype.getRootActivity=function(){var e=this.openActivities.length&&this.openActivities[0];return e?e.activityEvent:this.root},t.prototype.startActivity=function(e,t){for(var o=this,i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var a=this.getParentActivityForScope(e);i.push(a&&a.activityEvent&&a.activityEvent.id||this.root&&this.root.id);var s;t&&(s=t.apply(null,i),this.updateEventInfo(s),this.startTimedEventInternal(s));var l;return l={activityScope:e,activityParent:a,clientActivityId:this.getNewActivityClientActivityId(a,s),activityEvent:s,activityDeferred:new r(s||{},function(e){l.activityClosed=!0;var t=o.openActivities.indexOf(l);t!==-1&&o.openActivities.splice(t,1),l.activityEvent&&o.userActivityContextService.popParentContext(l.activityEvent),o.endActivityEvent(l)}),activityCount:1,activityClosed:!1,activityEnded:!1,activityTimeout:0,activityUnregisterScopeDestroy:e.$on("$destroy",(function(){o.activityScopeDestroyed(l)}))},this.extendActivityTimeout(l),this.openActivities.push(l),s&&this.userActivityContextService.pushParentContext(s),a&&this.startActivityEvent(a),l.activityDeferred},t.prototype.getParentActivityForScope=function(e){for(;e;){for(var t=e.$id,o=this.openActivities.length;o-- >0;){var i=this.openActivities[o];if(i.activityScope.$id===t)return i}e=e.$parent}},t.prototype.getNewActivityClientActivityId=function(e,t){if(e&&e.clientActivityId)return e.clientActivityId;var o=this.userActivityContextService.getRootContext();return o?o.activityId:t&&t.id?t.id:this.sessionId},t.prototype.clearActivityTimeout=function(e){e.activityTimeout&&(clearTimeout(e.activityTimeout),e.activityTimeout=0)},t.prototype.extendActivityTimeout=function(t){var o=this;this.clearActivityTimeout(t),t.activityEnded||(t.activityTimeout=setTimeout((function(){return o.activityTimedOut(t)}),e.ForceResolveTimeout))},t.prototype.activityTimedOut=function(t){t.activityEnded||this.stopActivity(t,{errorCode:"Timeout",errorMessage:"Timeout after "+e.ForceResolveTimeout+" ms (possible ClientActivityId="+t.clientActivityId+")"})},t.prototype.activityScopeDestroyed=function(e){e.activityEnded||(e.activityEvent&&(e.activityEvent.info.isCancelled=!0,e.activityEvent.info.errorCode="ScopeDestroyed"),this.stopActivity(e))},t.prototype.startActivityEvent=function(e){if(!e.activityEnded)for(++e.activityCount;e;)this.extendActivityTimeout(e),e=e.activityParent},t.prototype.endActivityEvent=function(e){do{if(e.activityEnded)break;var t=--e.activityCount;if(!e.activityClosed||t>0)break;this.endActivity(e),e=e.activityParent}while(e)},t.prototype.stopActivity=function(e,t){if(!e.activityEnded)if(e.activityCount=0,t){var o=e.activityEvent;if(o&&o.info.isReqId){var i="RequestId="+o.id;t.errorMessage=t.errorMessage?t.errorMessage+" "+i:i}e.activityDeferred.reject(t)}else e.activityDeferred.resolve()},t.prototype.endActivity=function(e){e.activityEnded=!0,this.clearActivityTimeout(e),e.activityUnregisterScopeDestroy(),e.activityEvent&&this.endTimedEventInternal(e.activityEvent)},t.prototype.startEvent=function(e){for(var t=this,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];o.push(this.getParentId());var n=e.apply(null,o);return this.updateEventInfo(n),this.startTimedEventInternal(n),new r(n,function(e){return t.endTimedEventInternal(e)})},t.prototype.startChildEvent=function(e,t){for(var o=this,i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];i.push(e.id);var a=t.apply(null,i);return this.updateEventInfo(a),this.startTimedEventInternal(a),new r(a,function(e){return o.endTimedEventInternal(e)})},t.prototype.logTrace=function(t){var o=e.telemetry.Trace(t.type,t.text);this.logEventInternal(o)},t.prototype.getParentId=function(){var e=this.userActivityContextService.getParentContext();return e?e.activityId:this.root.id},t.prototype.updateEventInfo=function(e){var t=e&&e.info;t&&(this.updateRootActivity(t),this.logHostInfo(t))},t.prototype.updateRootActivity=function(e){if(e){var t=this.userActivityContextService.getRootContext();if(t)e.activityName=t.activityName,e.activityId=t.activityId;else{var o=this.getRootActivity();o&&(e.activityName=o.name,e.activityId=o.id)}}},t.prototype.startTimedEventInternal=function(e){this.resetSessionTimeout();for(var t=this.getLoggerServices(),o=0,i=t.length;o<i;o++)t[o].startTimedEvent(e)},t.prototype.endTimedEventInternal=function(e){this.resetSessionTimeout();for(var t=this.getLoggerServices(),o=0,i=t.length;o<i;o++)t[o].endTimedEvent(e)},t.prototype.logEventInternal=function(e){this.resetSessionTimeout();for(var t=this.getLoggerServices(),o=0,i=t.length;o<i;o++)t[o].logEvent(e)},t.prototype.logHostInfo=function(e){jsCommon.QueryStringUtil.getQueryStringValue("unmin")&&(e.isDebug=!0);var t=this.hostInfo;if(null!=t)for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},Object.defineProperty(t.prototype,"sessionId",{get:function(){return this.hostData.sessionId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._rootEvent},enumerable:!0,configurable:!0}),t.prototype.getLoggerServices=function(){return this.isSuspended?[]:this.loggerServices},t})(),r=(function(){function t(e,t){this.event=e,this.end=t,this.isEnded=!1}return t.prototype.resolve=function(){this.isEnded||(this.isEnded=!0,this.end(this.event))},t.prototype.reject=function(t){if(!this.isEnded){this.isEnded=!0;var o=this.event;o.info.isError=!0,o.info.errorSource=t&&t.errorSource?t.errorSource:e.telemetry.ErrorSource.PowerBI,o.info.errorCode=t?t.errorCode:"UnknownError",o.info.errorMessage=t?t.errorMessage:void 0,this.end(o)}},t})();e.DeferredTelemetryEvent=r})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(){return new i}e.createUserActivityContextService=t;var o=(function(){function e(e,t){this.activityName=e,t&&(this.activityId=t)}return e})();e.ActivityContext=o;var i=(function(){function e(){e.currentActivityContextStack=[]}return e.prototype.pushParentContext=function(t){t&&(this.spliceParentContextStack(t.name,!0),e.currentActivityContextStack.push(new o(t.name,t.id)))},e.prototype.popParentContext=function(e){e&&this.spliceParentContextStack(e.name)},e.prototype.getParentContext=function(){var t=e.currentActivityContextStack.length;if(t>0)return e.currentActivityContextStack[t-1]},e.prototype.getRootContext=function(){var t=e.currentActivityContextStack.length;if(t>0)return e.currentActivityContextStack[0]},e.prototype.spliceParentContextStack=function(t,o){for(var i=e.currentActivityContextStack,n=i.length;n-- >0;)if(i[n].activityName===t)return void(o?i.splice(0,n+1):i.splice(n,1))},e})()})(powerbi||(powerbi={}));var jsCommon;!(function(e){var t;!(function(e){function t(e,t,o){if(e||t||o)return!e||t||o?e||!t||o?e||t||!o?$.extend(e,t,o):o:t:e}e.mergeUnionType=t})(t=e.UnionExtensions||(e.UnionExtensions={}))})(jsCommon||(jsCommon={}));var InJs;!(function(e){var t;!(function(e){e.infoNavErrorCodeTemplate="{0} ({1})",e.errorCodeText="Error Code",e.errorActivityIdText="Activity Id",e.errorRequestIdText="Request Id",e.correlationIdText="Correlation Id",e.errorLineNumberText="Line number",e.errorColumnNumberText="Column number",e.errorStackTraceText="Stack trace",e.errorSourceFileText="Source file",e.errorTimestampText="Time",e.showDetailsText="Show technical details",e.dialogCloseActionLabel="Close",e.dialogRefreshPageActionLabel="Refresh Page",e.errorDialogTitle="oops, something went wrong",e.unsupportedBrowserMessageTitle="Unsupported browser detected",e.unsupportedBrowserMessageText="Power BI Q&A requires Internet Explorer 10 or higher, please upgrade your browser and try again",e.errorDialogHelperText="Please try again later or contact support. If you contact support, please provide these details."})(t=e.UnlocalizedStrings||(e.UnlocalizedStrings={}))})(InJs||(InJs={}));var jsCommon;!(function(e){var t;!(function(e){function t(){return o()&&a()&&s()}function o(){return r()}function i(){var e=window.navigator.userAgent.toLowerCase();return e.indexOf("msie ")>-1||e.indexOf("trident/")>-1}function n(){var e=0;if("Microsoft Internet Explorer"===navigator.appName||window.navigator.userAgent.indexOf("MSIE")>=0){var t=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})"),o=t.exec(window.navigator.userAgent);o&&(e=parseFloat(o[1]))}return e}function r(){if(!Object.defineProperty)return!1;try{var e={},t={get:function(){return!0},enumerable:!0,configurable:!1};return Object.defineProperty(e,"customProperty",t),!0}catch(e){return!1}}function a(){return!!Function.prototype.bind}function s(){return $.support.cors}e.isBrowserSupported=t,e.browserSupportsEssentials=o,e.isInternetExplorerBrowser=i,e.getInternetExplorerVersion=n})(t=e.BrowserUtility||(e.BrowserUtility={}))})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){var t;!(function(e){function t(e,t){if(t&&t.document&&t.document.cookie)for(var o=t.document.cookie.split(";"),i=0,n=o;i<n.length;i++){var r=n[i],a=r.split("=");if(a.length>0&&a[0].trim()===e)return a[1]}}function o(e,t,o){o&&o.document&&(o.document.cookie=e+" = "+t+";secure")}e.getCookie=t,e.setCookie=o})(t=e.CookieUtil||(e.CookieUtil={}))})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){var t=(function(){function t(t,o,i){this.operation=t,this.timerFactory=o||e.TimerPromiseFactory.instance,this.batches=[],i&&(this.maxBatchSize=i,this.batchSize=0)}return t.prototype.enqueue=function(){var e,t=this,o=this.batches;return++this.batchSize,0===o.length?(e=$.Deferred(),o.push(e),this.timerFactory.create(0).done((function(){return t.completeBatches()}))):this.maxBatchSize&&this.batchSize>=this.maxBatchSize?(this.batchSize=0,e=$.Deferred(),o.push(e)):e=o[o.length-1],e.promise()},t.prototype.completeBatches=function(){for(var e;e=this.batches.pop();)this.completeBatch(e)},t.prototype.completeBatch=function(e){this.operation().done((function(t){return e.resolve(t)})).fail((function(t){return e.reject(t)}))},t})();e.DeferredBatch=t})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){var t;!(function(e){function t(e){return e&&e.requestId&&e.responseRequestId?e.requestId===e.responseRequestId:null}function o(e){return e&&e.responseRequestId?e.responseRequestId:null}e.clientAndServerRequestIdMatch=t,e.getResponseRequestId=o})(t=e.HttpUtils||(e.HttpUtils={}))})(jsCommon||(jsCommon={}));var InJs;!(function(e){e.RtlDirAttrVal="rtl";var t;!(function(t){function o(t,o){var i=$("<div />"),n=$("<a class=\"showAdditionalDetailsLink\" href='javascript:' />");return n.addClass(a),n.text(o||e.UnlocalizedStrings.showDetailsText),n.on(jsCommon.DOMConstants.mouseClickEventName,(function(e){i.find(jsCommon.Utility.createClassSelector(a)).remove(),i.find(jsCommon.Utility.createClassSelector(r)).css(jsCommon.CssConstants.displayProperty,jsCommon.CssConstants.blockValue)})),t.css(jsCommon.CssConstants.displayProperty,jsCommon.CssConstants.noneValue),t.addClass(r),i.append(n),i.append(t),i}function i(e,t){var o=$(s.replace("{FieldTitle}",e));return o.find(".infonav-errorInfoText").multiline(t),o}function n(){var t=$("html").attr("dir");return t===e.RtlDirAttrVal}var r="infonav-additionalError",a="infonav-showAdditionalError",s='<div class="infonav-errorInfoItem"><span class="infonav-errorInfoHeader">{FieldTitle}</span><span class="infonav-errorInfoText">{FieldValue}</span></div>';t.constructShowDetailsContainer=o,t.constructErrorField=i,t.isRTL=n})(t=e.InfoNavUtility||(e.InfoNavUtility={}))})(InJs||(InJs={}));var jsCommon;!(function(e){var t;!(function(e){function t(e,t,o){try{return JSON.parse(e,t)}catch(e){}}function o(e){if(e&&"string"==typeof e){try{JSON.parse(e)}catch(e){return!1}return!0}return!1}e.tryParseJSON=t,e.isJsonString=o})(t=e.JsonExtensions||(e.JsonExtensions={}))})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){var t;!(function(e){function t(e,t){return null==e||isNaN(e)?t:null==t||isNaN(t)?e:Math.min(e,t)}function o(e,t){return null==e||isNaN(e)?t:null==t||isNaN(t)?e:Math.max(e,t)}e.min=t,e.max=o})(t=e.MathExtensions||(e.MathExtensions={}))})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){var t;!(function(e){function t(){try{return window.self!==window.top}catch(e){return!0}}function o(){return t()&&i(document.referrer)!==i(document.URL)}function i(e){if(e&&""!==e.trim()){var t=document.createElement("a");return t.href=e,t.hostname}return""}e.isHostedInIFrame=t,e.isHostedInCrossDomainIFrame=o,e.getHostName=i})(t=e.iFrameUtility||(e.iFrameUtility={}));var o;!(function(t){function o(t){if(t)try{var o=atob(t),i=pako.inflate(o,{to:"string"});return i}catch(t){e.Trace.error("Error while uncompressing TileData: "+JSON.stringify(t),null==t.stack)}return null}function i(t){if(t)try{var o=pako.gzip(t,{to:"string"}),i=btoa(o);return i}catch(t){e.Trace.error("Error while compressing TileData: "+JSON.stringify(t),null==t.stack)}return null}t.uncompress=o,t.compress=i})(o=e.GzipUtility||(e.GzipUtility={}))})(jsCommon||(jsCommon={}));

window.parseTimeMarkers['powerbiportal.dependencies.bundle.min.js'].end = Date.now();
